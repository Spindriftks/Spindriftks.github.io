<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>classmethod、staticmethod、property三个装饰器理解学习</title>
      <link href="2021/03/24/classmethod%E3%80%81staticmethod%E3%80%81property%E4%B8%89%E4%B8%AA%E8%A3%85%E9%A5%B0%E5%99%A8%E7%90%86%E8%A7%A3%E5%AD%A6%E4%B9%A0/"/>
      <url>2021/03/24/classmethod%E3%80%81staticmethod%E3%80%81property%E4%B8%89%E4%B8%AA%E8%A3%85%E9%A5%B0%E5%99%A8%E7%90%86%E8%A7%A3%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>python自带的三个装饰器，classmethod、staticmethod和property理解学习</p><a id="more"></a><p>在stackoverflow上有个高回答的问题，</p><blockquote><p><a href="https://stackoverflow.com/questions/12179271/meaning-of-classmethod-and-staticmethod-for-beginner">Meaning of @classmethod and @staticmethod for beginner? </a></p></blockquote><p>我就直接参考<code>Rostyslav Dzinko</code> 的回答改写了下</p><p>代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2021&#x2F;3&#x2F;24 13:08</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># classmethod、staticmethod、property</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Date(object):</span><br><span class="line">    def __init__(self, day&#x3D;0, month&#x3D;0, year&#x3D;0):</span><br><span class="line">        self.day &#x3D; day</span><br><span class="line">        self.month &#x3D; month</span><br><span class="line">        self.year &#x3D; year</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def from_string(cls, date_as_string):</span><br><span class="line">        day, month, year &#x3D; map(int, date_as_string.split(&#39;-&#39;))</span><br><span class="line">        date_1 &#x3D; cls(day, month, year)</span><br><span class="line">        return date_1</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def is_date_valid(date_as_string):</span><br><span class="line">        day, month, year &#x3D; map(int, date_as_string.split(&#39;-&#39;))</span><br><span class="line">        return day &lt;&#x3D; 31 and month &lt;&#x3D; 12 and year &lt;&#x3D; 9999</span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    def get_month(self):</span><br><span class="line">        return self.month</span><br><span class="line"></span><br><span class="line">    def __repr__(self):</span><br><span class="line">        return &#39;year: &#123;&#125;, month: &#123;&#125;, day: &#123;&#125;&#39;.format(self.year, self.month, self.day)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">date1 &#x3D; Date(24, 3, 2021)</span><br><span class="line">print(date1)</span><br><span class="line"></span><br><span class="line">print(Date.is_date_valid(&#39;24-03-2021&#39;))</span><br><span class="line">date2 &#x3D; Date.from_string(&#39;24-03-2021&#39;)</span><br><span class="line">print(date2)</span><br><span class="line">print(date2.get_month)</span><br></pre></td></tr></table></figure><h3 id="classmethod"><a href="#classmethod" class="headerlink" title="classmethod"></a>classmethod</h3><p>classmethod是类装饰器，官方解释是指定一个类的方法为类方法，标致就是无需实例化就可以调用该方法。</p><p>然后我是这么理解的，比如上面的代码，一个Date类，最基本的用法就是实例化Date并且给三个参数：日、月、年，也就是这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date1 &#x3D; Date(24, 3, 2021)</span><br><span class="line">print(date1)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">year: 2021, month: 3, day: 24</span><br></pre></td></tr></table></figure><p>但是我们在实际的使用过程中，可能数据源那边的日期格式各种各样，不是所有的都是拆分成日月年这样一个个给你的，比如都是’24-03-2021’这样的格式，那么想用Date就要先对输入的日期进行一个格式化处理，先用一个方法把’24-03-2021’拆分成日月年。</p><p>classmethod装饰器就可以实现这个功能，还不需要重构函数，直接加进去一个日期解析的函数即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@classmethod</span><br><span class="line">def from_string(cls, date_as_string):</span><br><span class="line">    day, month, year &#x3D; map(int, date_as_string.split(&#39;-&#39;))</span><br><span class="line">    date_1 &#x3D; cls(day, month, year)</span><br><span class="line">    return date_1</span><br></pre></td></tr></table></figure><h3 id="staticmethod"><a href="#staticmethod" class="headerlink" title="staticmethod"></a>staticmethod</h3><p>staticmethod我的理解就是，这个装饰器修饰的方法，其实在业务上和类本身没什么关系，就是为了给这个类加某个功能，比如对某个字段进行校验，获取当前日期等等，和业务其实没什么关联，调用的时候直接类就能调用，不需要实例化。<br>比如上面的代码，用staticmethod修饰了一个对输入日期合法值校验的方法，其实要不要这个对业务（输入固定格式年月日）都没什么影响，完全是扩充了功能。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@staticmethod</span><br><span class="line">def is_date_valid(date_as_string):</span><br><span class="line">    day, month, year &#x3D; map(int, date_as_string.split(&#39;-&#39;))</span><br><span class="line">    return day &lt;&#x3D; 31 and month &lt;&#x3D; 12 and year &lt;&#x3D; 9999</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Date.is_date_valid(&#39;24-03-2021&#39;))</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True</span><br></pre></td></tr></table></figure><h3 id="property"><a href="#property" class="headerlink" title="property"></a>property</h3><p>用property装饰的方法，可以直接当成类的属性来使用，比如示例代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@property</span><br><span class="line">def get_month(self):</span><br><span class="line">    return self.month</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date2 &#x3D; Date.from_string(&#39;24-03-2021&#39;)</span><br><span class="line">print(date2)</span><br><span class="line">print(date2.get_month)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">year: 2021, month: 3, day: 24</span><br><span class="line">3</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -python基础 -计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -python3 -装饰器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos下yum安装MariaDB</title>
      <link href="2021/03/23/Centos%E4%B8%8Byum%E5%AE%89%E8%A3%85MariaDB/"/>
      <url>2021/03/23/Centos%E4%B8%8Byum%E5%AE%89%E8%A3%85MariaDB/</url>
      
        <content type="html"><![CDATA[<p>Centos7下使用yum方式安装MariaDB</p><a id="more"></a><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br><span class="line"></span><br><span class="line">Server version: 10.5.9-MariaDB MariaDB Server</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>其实教程一搜一大堆，不过很多都是互相抄，还有就是年代比较久远，有条件还是直接官网看搭建说明吧</p><h4 id="删除MySQL和MariaDB"><a href="#删除MySQL和MariaDB" class="headerlink" title="删除MySQL和MariaDB"></a>删除MySQL和MariaDB</h4><p>卸载当前服务器上的mysql和mariadb</p><p>MySQL：<code>rpm -qa |grep mysql | xargs rpm -e --nodeps</code><br><code>yum remove mysql mysql-server mysql-libs</code></p><p>MariaDB：<code>rpm -qa | grep mariadb | xargs rpm -e --nodeps</code><br>大写再来一遍：<code>rpm -qa | grep MariaDB | xargs rpm -e --nodeps</code></p><h4 id="创建repo"><a href="#创建repo" class="headerlink" title="创建repo"></a>创建repo</h4><blockquote><p><a href="https://downloads.mariadb.org/mariadb/repositories/#distro=CentOS&distro_release=centos7-amd64--centos7&mirror=escience&version=10.5">官网教程</a></p></blockquote><p>在/etc/yum.repos.d/   目录下创建<code>MariaDB.repo</code> 文件，网上很多教程说用中科大的yum源，反正我是遇到了很多的坑，最后还是换成了官网的<br>中科大的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mariadb]</span><br><span class="line">name &#x3D; MariaDB</span><br><span class="line">baseurl &#x3D; https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;mariadb&#x2F;yum&#x2F;10.1&#x2F;centos7-amd64&#x2F;</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;mariadb&#x2F;yum&#x2F;RPM-GPG-KEY-MariaDB</span><br><span class="line">gpgcheck&#x3D;1</span><br></pre></td></tr></table></figure><p>官网：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># MariaDB 10.5 CentOS repository list - created 2021-03-23 02:45 UTC</span><br><span class="line"># http:&#x2F;&#x2F;downloads.mariadb.org&#x2F;mariadb&#x2F;repositories&#x2F;</span><br><span class="line">[mariadb]</span><br><span class="line">name &#x3D; MariaDB</span><br><span class="line">baseurl &#x3D; http:&#x2F;&#x2F;yum.mariadb.org&#x2F;10.5&#x2F;centos7-amd64</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;yum.mariadb.org&#x2F;RPM-GPG-KEY-MariaDB</span><br><span class="line">gpgcheck&#x3D;1</span><br></pre></td></tr></table></figure><h4 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h4><p><code>yum -y install MariaDB-server MariaDB-client</code></p><p>等待安装完成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#启动服务</span><br><span class="line">systemctl start mariadb </span><br><span class="line">#设置开机启动</span><br><span class="line">systemctl enable mariadb </span><br></pre></td></tr></table></figure><p>结束之后开始安全配置：<br>直接敲：<code>mysql_secure_installation</code><br>会让你设置root密码，是否允许远程登录，是否删除test库等等，根据需要自己选吧</p><h4 id="安装后配置"><a href="#安装后配置" class="headerlink" title="安装后配置"></a>安装后配置</h4><p>首先是字符集配置，默认是<code>latin1</code>，为了方便还是改成utf8吧<br>修改配置文件：<code>vim /etc/my.cnf.d/server.cnf</code>(改之前先备份)<br>在mysqld栏添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">init_connect&#x3D;&#39;SET collation_connection &#x3D; utf8_unicode_ci&#39; </span><br><span class="line">init_connect&#x3D;&#39;SET NAMES utf8&#39; </span><br><span class="line">character-set-server&#x3D;utf8 </span><br><span class="line">collation-server&#x3D;utf8_unicode_ci </span><br><span class="line">skip-character-set-client-handshake</span><br></pre></td></tr></table></figure><p>保存，重启<code>systemctl restart mariadb</code></p><h4 id="MariaDB操作"><a href="#MariaDB操作" class="headerlink" title="MariaDB操作"></a>MariaDB操作</h4><p>作为MySQL的开源分支，操作上无缝对接MySQL<br>进控制台：<code>mysql -uroot -p</code>输入密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@QA ~]# mysql -uroot -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 4</span><br><span class="line">Server version: 10.5.9-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; </span><br></pre></td></tr></table></figure><p>建用户：<code>create user tester@localhost identified by &#39;yourpw&#39;;</code><br>赋权限：<code>grant all privileges on *.* to tester@&#39;%&#39; identified by &#39;yourpw&#39;;</code></p><h3 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h3><h4 id="切yum源到中科大，出现系统未注册"><a href="#切yum源到中科大，出现系统未注册" class="headerlink" title="切yum源到中科大，出现系统未注册"></a>切yum源到中科大，出现系统未注册</h4><p>想切换到中科大的yum源，更改了/etc/yum.repo.d/CentOS-Base.repo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -e &#39;s|^mirrorlist&#x3D;|#mirrorlist&#x3D;|g&#39; \</span><br><span class="line">         -e &#39;s|^#baseurl&#x3D;http:&#x2F;&#x2F;mirror.centos.org&#x2F;centos|baseurl&#x3D;https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;centos|g&#39; \</span><br><span class="line">         -i.bak \</span><br><span class="line">         &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo</span><br></pre></td></tr></table></figure><p>更改之后，yum clean all，yum makecache都执行了，然后安装个wget都直接失败，报下面这个：<br><code>This system is not registered with an entitlement server. You can use subscription-manager to regist</code></p><p>解决办法：<br>删了安装好的yum，重新下载那三个基础的yum文件，重新安装，再切yum源到163或者ali的</p><p>卸载：<code>rpm -qa | grep yum | xargs rpm -e</code><br>下载安装三个基础文件：</p><p><a href="http://centos.ustc.edu.cn/centos/7.9.2009/os/x86_64/Packages/">下载地址</a><br>直接搜这仨：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum-3.4.3-168.el7.centos.noarch</span><br><span class="line">yum-metadata-parser-1.1.4-10.el7.x86_64</span><br><span class="line">yum-plugin-fastestmirror-1.1.31-54.el7_8.noarch</span><br></pre></td></tr></table></figure><p>下载完成后上传到服务器，到文件夹位置执行：<code>rpm -ivh yum-*</code> yum安装完成，后面就切163的源吧。。。<code>wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</code><br>别忘了yum clean all和yum makecache</p><h4 id="GPG密钥失败"><a href="#GPG密钥失败" class="headerlink" title="GPG密钥失败"></a>GPG密钥失败</h4><p>yum -y install MariaDB-server MariaDB-client  这步安装时候，读取repo配置，有校验GPG Key这步骤，按照官网的死活没过得去，一直提示密钥失败，临时解决办法很简单，直接关掉校验<code>gpgcheck=0</code></p><p>彻底的解决办法，试了网上很多，没有一个成功的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm --import http:&#x2F;&#x2F;mirrors.163.com&#x2F;centos&#x2F;RPM-GPG-KEY-CentOS-7</span><br><span class="line">rpm --import https:&#x2F;&#x2F;yum.mariadb.org&#x2F;RPM-GPG-KEY-MariaDB</span><br><span class="line">rpm --import https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;mariadb&#x2F;yum&#x2F;RPM-GPG-KEY-MariaDB</span><br></pre></td></tr></table></figure><p>有空再研究吧…</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> MariaDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一点日常记录</title>
      <link href="2021/03/10/%E4%B8%80%E7%82%B9%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"/>
      <url>2021/03/10/%E4%B8%80%E7%82%B9%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>日常的一些知识点记录</p><a id="more"></a><h3 id="MySQL插数据"><a href="#MySQL插数据" class="headerlink" title="MySQL插数据"></a>MySQL插数据</h3><p>MySQL从表A中读取数据插入到表B</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into B(&#39;字段a&#39;, &#39;字段b&#39;, &#39;字段c&#39;) select 字段a,字段b,字段c from A;</span><br></pre></td></tr></table></figure><h3 id="awk改数据"><a href="#awk改数据" class="headerlink" title="awk改数据"></a>awk改数据</h3><p>一个文件，内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this is a dog</span><br><span class="line">this is a cat</span><br><span class="line">this is a pig</span><br></pre></td></tr></table></figure><p>最后一列改成xxx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#39; &#39; &#39;&#123;$4&#x3D;&quot;xxx&quot;;print $0&#125;&#39; awkfile.log</span><br></pre></td></tr></table></figure><h3 id="http和https区别"><a href="#http和https区别" class="headerlink" title="http和https区别"></a>http和https区别</h3><p>https协议需要向CA机构申请CA证书</p><p>s代表https传输是由SSL/TSL+HTTP构建，相对于http的无状态，https可进行身份验证，加密传输，更加安全。</p><h4 id="客户端使用https方式和web服务器通信步骤"><a href="#客户端使用https方式和web服务器通信步骤" class="headerlink" title="客户端使用https方式和web服务器通信步骤"></a>客户端使用https方式和web服务器通信步骤</h4><ol><li>   客户端用https格式url请求web服务端</li><li>   web服务器收到请求后，将网站的证书信息（包含公钥）传送一份给客户端</li><li>   客户端的浏览器和web服务器协商SSL/TSL连接的安全等级（信息加密等级）</li><li>   客户端浏览器根据安全等级，建立会话密钥，然后利用网站公钥将密钥加密，传给网站</li><li>   服务端用私钥解密</li></ol><h3 id="装饰器实现记录函数执行时间"><a href="#装饰器实现记录函数执行时间" class="headerlink" title="装饰器实现记录函数执行时间"></a>装饰器实现记录函数执行时间</h3><p>装饰器就是python中把函数当作参数的一种实现，目的是增强函数的功能，比如给函数增加执行日志，给函数增加执行时间等等</p><p>写一个装饰器，记录函数的执行时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2021&#x2F;3&#x2F;10 14:46</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">from functools import wraps</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def get_time(func):</span><br><span class="line">    @wraps(func)</span><br><span class="line">    def decorators(*args, **kwargs):</span><br><span class="line">        now &#x3D; time.time()</span><br><span class="line">        f &#x3D; func(*args, **kwargs)</span><br><span class="line">        print(func.__name__ + &quot; was called&quot;)</span><br><span class="line">        after &#x3D; time.time()</span><br><span class="line">        time_use &#x3D; after - now</span><br><span class="line">        print(func.__name__ + &quot;执行时间为： &quot; + str(format(time_use, &#39;.5f&#39;)) + &quot;s&quot;)</span><br><span class="line">        return f</span><br><span class="line">        # return func.__name__ + &quot;执行时间为： &quot; + str(format(time_use, &#39;.5f&#39;)) + &quot;s&quot;</span><br><span class="line">    return decorators</span><br><span class="line"></span><br><span class="line">@get_time</span><br><span class="line">def get_test(x):</span><br><span class="line">    return x**8**6</span><br><span class="line"></span><br><span class="line">print(get_test(8))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">get_test was called</span><br><span class="line">get_test执行时间为： 0.00349s</span><br><span class="line">一串很长的数字。。</span><br></pre></td></tr></table></figure><h4 id="带参数的装饰器"><a href="#带参数的装饰器" class="headerlink" title="带参数的装饰器"></a>带参数的装饰器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">from functools import wraps</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_log(level&#x3D;None):</span><br><span class="line">    def decorate_log(func):</span><br><span class="line">        @wraps(func)</span><br><span class="line">        def wrapper(*args, **kwargs):</span><br><span class="line">            start &#x3D; time.time()</span><br><span class="line">            f &#x3D; func(*args, **kwargs)</span><br><span class="line">            end &#x3D; time.time()</span><br><span class="line">            time_used &#x3D; end - start</span><br><span class="line">            if level &#x3D;&#x3D; &#39;info&#39;:</span><br><span class="line">                print(&quot;Info: &quot; + func.__name__ + &quot; 执行时间为：&quot; + format(time_used, &#39;0.4f&#39;))</span><br><span class="line">            elif level &#x3D;&#x3D; &#39;debug&#39;:</span><br><span class="line">                print(&quot;Debug: &quot; + func.__name__ + &quot; 执行时间为：&quot; + format(time_used, &#39;0.4f&#39;))</span><br><span class="line">            else:</span><br><span class="line">                print(&quot;Msg: &quot; + func.__name__ + &quot; 执行时间为：&quot; + format(time_used, &#39;0.4f&#39;))</span><br><span class="line">            return f</span><br><span class="line">        return wrapper</span><br><span class="line">    return decorate_log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@get_log(level&#x3D;&#39;info&#39;)</span><br><span class="line">def calculate_num(n):</span><br><span class="line">    return n ** 6 ** 8</span><br><span class="line">    </span><br><span class="line">@get_log()</span><br><span class="line">def calculate_num_2(n):</span><br><span class="line">    return n ** 6 ** 8    </span><br></pre></td></tr></table></figure><p>装饰器带可选参数，指定不同的参数实现不同的增强效果</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>质量管理-破窗效应</title>
      <link href="2021/03/09/%E8%B4%A8%E9%87%8F%E7%AE%A1%E7%90%86-%E7%A0%B4%E7%AA%97%E6%95%88%E5%BA%94/"/>
      <url>2021/03/09/%E8%B4%A8%E9%87%8F%E7%AE%A1%E7%90%86-%E7%A0%B4%E7%AA%97%E6%95%88%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<p>破窗效应（Break Pane Law; Broken windows theory）</p><a id="more"></a><h3 id="破窗效应简介"><a href="#破窗效应简介" class="headerlink" title="破窗效应简介"></a>破窗效应简介</h3><p>破窗效应是犯罪学的一个理论，由詹姆士·威尔逊（James Q. Wilson）及乔治·凯林（George L. Kelling）提出，此理论认为环境中的不良现象如果被放任存在，会诱使人们仿效，甚至变本加厉。</p><p>一种现象：一幢楼有少许窗户玻璃是破碎的，如果不及时修理好，可能会有破坏者破坏更多的窗户。</p><p><strong>破窗效应倡导及时矫正或补救正在发生的问题</strong>，有点类似我国古代的智慧结晶：亡羊补牢，以及防微杜渐。</p><h3 id="破窗效应的危害"><a href="#破窗效应的危害" class="headerlink" title="破窗效应的危害"></a>破窗效应的危害</h3><p>破窗效应的理论表示环境对人的心理形成和行为表现具有强烈的暗示性和诱导性，破窗的出现会诱发人的四种心理：</p><ol><li>颓丧心理：坏了东西没人修，公共财产没人管，制度无人遵守，破坏规则不受惩罚；长此以往，对于团队、社会的信任度逐渐降低，以消极的情绪和言行工作和生活。</li><li>弃旧心理：既然已经破废，既然没人管，那就随它去吧；到企业内部，因为某项规章制度没有有效的执行下去就用放弃的心态去面对，那对团队管理会造成非常不利的影响。</li><li>从众心理：别人能做，我也能做；别人能拿，我也能拿。典型的例子就是考勤作弊行为。</li><li>投机心理：不想努力就要达到目的的心理，和从众类似，看到别人这样做当下没有“不良”后果，自己也要这么做。</li></ol><h3 id="软件行业的破窗效应"><a href="#软件行业的破窗效应" class="headerlink" title="软件行业的破窗效应"></a>软件行业的破窗效应</h3><p>当bug积累到一定程度，消除每一个bug都不是一件轻松的事情；并且由于一定程度上的bug互相影响，定位到某一个具体的bug就更加的困难。所以当bug数量到一定程度，无论是身体还是心理上都会产生解决bug的抗拒。</p><p>软件上的破窗效应产生的原因很好理解：原本存在着质量差的代码，后来人觉得既然前人可以这么写，也没有受到任何指责或惩罚，那我也可以这么做，久而久之就成了一座大的垃圾堆。<br>可惜最终发生雪崩的时候，没有一片雪花是无辜的，还是整个团队一起买单。</p><h3 id="破解破窗效应"><a href="#破解破窗效应" class="headerlink" title="破解破窗效应"></a>破解破窗效应</h3><p>从破窗效应的描述可以看出，一是有破窗，二是没有及时修复。所以破解破窗效应的方法也就是对应的：</p><ol><li>经营“好窗”，构建良好的环境，制定有益的规范；预防的成本永远是最低的，从根源上就有效的避免破窗的出现。</li><li>经常“护窗”，没有一项制度是没有缺陷的，需要个人、企业一起努力不断去反思完善，一旦发现了制度上的漏洞，及时修复。</li><li>及时“补窗”，也就是防微杜渐了。</li></ol><p>在软件行业，设计合理的架构，遵守合理的代码规范，日常开发中每次提交都尽量做到比前一个版本要干净，哪怕是减少一部分重复代码，修正一个格式问题。</p><blockquote><p>应用自：</p></blockquote><p><a href="https://wiki.mbalib.com/wiki/%E7%A0%B4%E7%AA%97%E6%95%88%E5%BA%94">MBA智库-破窗效应</a></p><p><a href="http://blog.itpub.net/69978212/viewspace-2702938/">质量内建七步法</a></p>]]></content>
      
      
      <categories>
          
          <category> 团队管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件项目常见风险</title>
      <link href="2021/03/08/%E8%BD%AF%E4%BB%B6%E9%A1%B9%E7%9B%AE%E5%B8%B8%E8%A7%81%E9%A3%8E%E9%99%A9/"/>
      <url>2021/03/08/%E8%BD%AF%E4%BB%B6%E9%A1%B9%E7%9B%AE%E5%B8%B8%E8%A7%81%E9%A3%8E%E9%99%A9/</url>
      
        <content type="html"><![CDATA[<p>软件项目中常见的一些风险</p><a id="more"></a><h3 id="Barry-Boehm-软件开发风险检查单"><a href="#Barry-Boehm-软件开发风险检查单" class="headerlink" title="Barry Boehm 软件开发风险检查单"></a>Barry Boehm 软件开发风险检查单</h3><p>软件风险前十列表基于Barry Boehm的著作《Tutorial on Software Risk Management》,IEEE Computer Society,1989</p><table><thead><tr><th>风险</th><th>风险缓解技术</th></tr></thead><tbody><tr><td>人员缺失</td><td>配置高技能员工；工作匹配；团队组建；培训和职业规划；关键人员尽早安排日程</td></tr><tr><td>不现实的时间和成本估计</td><td>多种估计技术；费用设计；增量开发；对过去项目的记录和分析；方法标准化</td></tr><tr><td>软件功能错误</td><td>提高软件评价；正式的规格说明方法；用户调查；原型；早期用户手册</td></tr><tr><td>用户界面错误</td><td>原型；任务分析；用户参与</td></tr><tr><td>镀金</td><td>需求清理；原型；成本-效益分析；费用设计</td></tr><tr><td>晚期需求变化</td><td>变更控制；高变更阈值；增量开发（变更推迟）</td></tr><tr><td>外购构件缺陷</td><td>基准化；审查；正式规格说明；正式合同；质量保证规程和证明</td></tr><tr><td>外部任务实现缺陷</td><td>质量保证规程；竞争设计或原型；正式合同</td></tr><tr><td>实时性能缺陷</td><td>模拟；基准化；原型；调整；技术分析</td></tr><tr><td>开发技术过难</td><td>技术分析；成本-效益分析；原型；员工培训和开发</td></tr></tbody></table><h3 id="Fairley的四种COTS软件购买风险"><a href="#Fairley的四种COTS软件购买风险" class="headerlink" title="Fairley的四种COTS软件购买风险"></a>Fairley的四种COTS软件购买风险</h3><p>Richard Fairley（1994）发表的”Risk management for software projects”，直接购买软件的风险</p><table><thead><tr><th>风险</th><th>风险描述</th></tr></thead><tbody><tr><td>集成</td><td>为不同的应用进行数据格式的统一和数据交换有困难</td></tr><tr><td>更新</td><td>当供应商更新软件之后，有可能不再满足用户最初的需求。坚持使用旧版本意味着丢失了供应商的技术支持</td></tr><tr><td>没有源代码</td><td>如果想改进系统，会因为没有源代码导致无法进行改进</td></tr><tr><td>供应商问题</td><td>产品供应商有可能不再从事该项业务或者被竞争对手并购</td></tr></tbody></table><h3 id="一些其他风险项"><a href="#一些其他风险项" class="headerlink" title="一些其他风险项"></a>一些其他风险项</h3><ol><li>客户群越大，风险越高（pv、用户数等）</li><li>系统操作越频繁，风险越高（方法被调用次数，引用次数等）</li><li>场景接近可用，风险越高（核心业务，主干功能）</li><li>场景失败给客户带来危害越大，风险越高（交易、支付等）</li><li>场景涉及信息安全和信息泄露，风险越高</li><li>系统可恢复性难度越大，风险越高</li><li>团队成熟度越低，风险越高</li></ol>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成年人的“正义”</title>
      <link href="2021/03/08/%E6%88%90%E5%B9%B4%E4%BA%BA%E7%9A%84%E2%80%9C%E6%AD%A3%E4%B9%89%E2%80%9D/"/>
      <url>2021/03/08/%E6%88%90%E5%B9%B4%E4%BA%BA%E7%9A%84%E2%80%9C%E6%AD%A3%E4%B9%89%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<p>一些经历和自我坚持</p><a id="more"></a><p>学生时代我们或多或少都是棱角分明的热血青年，走上工作岗位之后，来自生活的压力、环境的同化、记忆的衰退等等，曾经的自己逐渐世故圆滑；其实也还好，满腔热血容易激动、冲动，没了棱角反而更注重三思而后行。只是，不要因此丢失了最基本的坚持</p><p>以下都是自己的亲身经历（自己选公司多多少少有点洁癖，受益于征信公司经历，事先会调查公司基本信息、创始人背景、市场规模、盈利模式、竞品情况；因此最后投递简历、面试、入职的公司在苏州也算是拿的出手、名声在外的，即使是这样的公司也会存在着各种奇葩情况，我也只能感慨下，资本时代不能只相信规模和估值，以及资本都是黑暗的。）</p><h3 id="经历一"><a href="#经历一" class="headerlink" title="经历一"></a>经历一</h3><p>某公司，面试通过了也发了offer，当时在上家公司还没真正走离职流程；该公司HR有一天找我，让我把现在公司某个系统的监控方案截图发给她，说是技术部想看一下我现在的成绩；就那一刻，我选择了拒绝这个offer。</p><p>同样是这个公司，不同的是这是我亲人的经历，她是做产品经理的；该公司HR邀请她去面试，面试完之后，我那亲人就找我一顿吐槽，给她面试的一看就是没有行业经验的，问的问题基本都是在套她现在公司的实现方案，想到该公司有传言要成立XX产品线，也就明白了。</p><p>这段经历我也不想表达的过于激愤，或许有的人会说互联网行业不存在抄袭，都是互相借鉴。还是要原谅我是被恶心到了，或许是我还是太天真，这类做法在我看来并没有体现任何正义，没有表现出一个公司该有的道德和价值观。</p><h3 id="经历二"><a href="#经历二" class="headerlink" title="经历二"></a>经历二</h3><p>某公司，行业龙头，国内市场占有率甚至是数一数二的存在。有一个项目，我负责性能测试，过程的各种内耗这边就不说了，是个公司应该都有这不是本次要表达的重点。测试结果很不理想，距离客户的要求差了十万八千里，就是这样，领导直接拍板（最高领导之一）改测试结果的数据，用P图和拉长性能曲线的方式来伪造测试结果，生成一个还算好看的测试报告给客户。</p><p>后续发展来了，客户毕竟不傻，知道这结果不可信，让该公司给个30/60/90天的改进目标。公司拉了好几号人研究定了这个目标，用正式的邮件回复了客户；整个改进过程只有PM和我在催开发人员改进，给领导反馈进度。结果呢，到了90天时候，连30天的目标都没有实现，就这样，领导就算是把事情揭过去了。事后，一个资深的PM离职了。</p><p>所以公司的规模和核心产品知名度真的不能成为评判一个公司好坏的标准。可能我不是高层，掌握的信息不够，也不懂得权衡各个项目，所以无法理解领导的决定。以我微不足道的观点，测试人员还是需要遵守基本的职业操守和道德底线，既然公司把我录用为测试，那我就需要对产品质量进行客观理性的评估，如果只是为了让我出一份报告，我是觉得完全可以随便找个会P图的就行了。公司的发展、经营真的不能只看销售队伍，守业是需要自上而下的高质量服务的；联想前段时间德勤员工实名举报造假，会计行业是这样，测试一样会遇到这样的情况，个人觉得，还是遵守你的职业道德吧。</p><h3 id="经历三"><a href="#经历三" class="headerlink" title="经历三"></a>经历三</h3><p>这段经历和公司关系没那么大，主角是个人。先说背景，领导和普调员工分部在不同的楼层办公，平时见不到。<br>某年度优秀员工A，平时上班大多数情况是让其他同事代打卡，8:30上班时间，10点，11点到，中午继续失踪一下午，晚上下班之后回家顺路来打个卡，看工作时长甚至出现天天辛苦加班的假象。这样的，拿了年度优秀员工。</p><p>某年度优秀员工B，因为是组织架构原因是没有本部的一些门禁和食堂免费就餐权限；这位同事用手机复制了有权限员工的卡，至于做什么，就不用细说了吧。某天闲聊我问起这些，大多数人的概念都是给他们免费的，不拿就是傻的意思。</p><p>至于还有的其他奇葩人和事，不列举了。</p><h3 id="说回自己"><a href="#说回自己" class="headerlink" title="说回自己"></a>说回自己</h3><p>感觉自己要成一个充斥着负面情绪的人了，很不理解某些人、某些企业的做法，也许他们都能最后得到资本的青睐，最后实现经济上的成功，但我清楚的知道这些我骨子里不认可。</p><p>自己是个什么样的人？学生时代直到工作至今，从未迟到过一次，对于时间有着近乎病态的执着。也成家了，知道金钱的好，但是坚持不坑蒙拐骗，不偷不抢，只拿真的属于自己的那份。对于未来，有期许有焦虑，相信世界终究很美好，也深知逆水行舟不进则退。</p><p>成年人的正义，做一行爱一行，努力提升自己，发自内心的热爱你的事业、热爱和感恩提供给你机会的公司，共同成长；坚守本心，做一个诚实、诚信、坚持、对世界充满好奇心、有担当的人。<br>（衷心祝愿所有人都能有个圆满的归宿，所有公司都能谨守自己公布的企业价值观）</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于员工管理几点记录</title>
      <link href="2021/03/03/%E5%85%B3%E4%BA%8E%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E5%87%A0%E7%82%B9%E8%AE%B0%E5%BD%95/"/>
      <url>2021/03/03/%E5%85%B3%E4%BA%8E%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E5%87%A0%E7%82%B9%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>关于团队中员工管理方法的一些记录，纸上谈兵型…</p><a id="more"></a><h3 id="工作安排"><a href="#工作安排" class="headerlink" title="工作安排"></a>工作安排</h3><p>团队中员工日常工作有幸福感和激情，恰当的方式之一是团队领导自上而下的拆分完大项任务，让员工自行自下而上的“任务认领”，甚至引导员工自发生成任务，积极引导员工思考。</p><h3 id="工程师文化"><a href="#工程师文化" class="headerlink" title="工程师文化"></a>工程师文化</h3><p>关于团队组建和日常工作，来自奈飞的成年人文化。</p><ol><li>只招能够管理好自己的人</li><li>每个人都要理解公司的业务</li><li>坦诚，意见当面讲</li><li>只有事实才能捍卫观点</li><li>录用员工取决于解决问题的方式</li><li>按员工带来的价值付薪</li><li>不挽留不应该挽留的员工</li><li>面向未来组建团队</li></ol><p>对于个人来说，更换一份工作的求职面试是一次投资；对企业来说，面试招录员工是一次未来发展的机会。</p><h3 id="热炉法则"><a href="#热炉法则" class="headerlink" title="热炉法则"></a>热炉法则</h3><p>关于奖励和处罚</p><ul><li>奖励要奖励基层员工</li><li>处罚要处罚中高层领导</li></ul><p>关注核心利益，以核心利益驱动制度遵守（例如不做codereview出现线上事故第一责任人是开发）</p><h3 id="黄金圈法则"><a href="#黄金圈法则" class="headerlink" title="黄金圈法则"></a>黄金圈法则</h3><p>最好的管理工具是问 why<br>对事物本身要赋予足够的意义，多问“我想做什么”，“我为什么要做”，以足够的意义去驱动更好的行动</p><h3 id="预期管理"><a href="#预期管理" class="headerlink" title="预期管理"></a>预期管理</h3><ol><li>多个好消息，分开发布：延迟幸福感的长度</li><li>多个坏消息，一起发布：降低心理损失感</li><li>一个大的坏消息和一个小的好消息，分别发布：低承诺，高交付</li><li>一个大的好消息和一个小的坏消息，一起发布：降低幸福的底线，让辛福感更强烈</li></ol><h3 id="工作管理"><a href="#工作管理" class="headerlink" title="工作管理"></a>工作管理</h3><p>工作时间划分<br>准备阶段：60%<br>执行阶段：20%<br>总结复盘：10%<br>下阶段规划：10%</p><p>行百里者半九十</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 团队管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 以人为本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python定义类加不加object区别</title>
      <link href="2021/02/26/python%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E4%B8%8D%E5%8A%A0object%E5%8C%BA%E5%88%AB/"/>
      <url>2021/02/26/python%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E4%B8%8D%E5%8A%A0object%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p>python定义类时候加不加object区别</p><a id="more"></a><h3 id="python-2-x"><a href="#python-2-x" class="headerlink" title="python 2.x"></a>python 2.x</h3><p>python2有经典类（旧式类）<code>old-style(classic-style)</code>和新式类<code>new-style</code>的区别</p><p>写法分别为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">  ...</span><br><span class="line">和</span><br><span class="line">class A(object):</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><p>继承object类的类就是新式类，目的就是让自己定义的类有更多的属性（因为本地只有python 3演示不了python 2不继承object类的效果，大概的输出：dir()只能输出<code>&#39;__doc__&#39;, &#39;__module__&#39;</code>两个属性，也就是说这个类的命名空间里面只有这两个属性可以操作）</p><h3 id="python-3-x"><a href="#python-3-x" class="headerlink" title="python 3.x"></a>python 3.x</h3><p>python 3.x默认是继承object类的，不需要声明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2021&#x2F;2&#x2F;26 8:52</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class WithoutObject:</span><br><span class="line">    # python3.x 默认继承object类</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name &#x3D; name</span><br><span class="line"></span><br><span class="line">    def __repr__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class WithObject1():</span><br><span class="line">    # 类无继承情况下，括号可写可不写，python3.x默认继承了object类</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name &#x3D; name</span><br><span class="line"></span><br><span class="line">    def __repr__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class WithObject2(object):</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name &#x3D; name</span><br><span class="line"></span><br><span class="line">    def __repr__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    x &#x3D; WithoutObject(&#39;Alice&#39;)</span><br><span class="line">    print(x, dir(x))</span><br><span class="line"></span><br><span class="line">    y &#x3D; WithObject1(&#39;Bob&#39;)</span><br><span class="line">    print(y, dir(y))</span><br><span class="line"></span><br><span class="line">    z &#x3D; WithObject2(&#39;Carl&#39;)</span><br><span class="line">    print(z, dir(z))</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Alice [&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;name&#39;]</span><br><span class="line"></span><br><span class="line">Bob [&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;name&#39;]</span><br><span class="line"></span><br><span class="line">Carl [&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;name&#39;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>为了养成良好的习惯，在定义类的时候，没有特定继承不妨也写出object类算是对自己的一个提示，该类的命名空间有哪些属性是可以操作的。</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>k8s踏坑记 第二篇</title>
      <link href="2021/02/03/k8s%E8%B8%8F%E5%9D%91%E8%AE%B0-%E7%AC%AC%E4%BA%8C%E7%AF%87/"/>
      <url>2021/02/03/k8s%E8%B8%8F%E5%9D%91%E8%AE%B0-%E7%AC%AC%E4%BA%8C%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>master和node在同一台虚拟机，外部网络无法访问k8s配置好的service暴露的端口</p><a id="more"></a><h3 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h3><p>环境：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br><span class="line">Kubernetes v1.5.2</span><br><span class="line">Docker version 1.13.1, build 0be3e21&#x2F;1.13.1</span><br></pre></td></tr></table></figure><p>单机搭建master加node</p><p>tomcat-deployment.yaml内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: extensions&#x2F;v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: tomcat</span><br><span class="line">spec:</span><br><span class="line">  replicas: 1</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      tier: tomcat</span><br><span class="line">    matchExpressions:</span><br><span class="line">    - &#123;key: tier, operator: In, values: [tomcat]&#125;</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: tomcat-demo</span><br><span class="line">        tier: tomcat</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: tomcat-demo</span><br><span class="line">        image: tomcat</span><br><span class="line">        imagePullPolicy: IfNotPresent</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 8080 </span><br></pre></td></tr></table></figure><p>tomcat-service.yaml内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: tomcat-service</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort</span><br><span class="line">  ports:</span><br><span class="line">  - port: 8080</span><br><span class="line">    nodePort: 31002</span><br><span class="line">  selector:</span><br><span class="line">    tier: tomcat</span><br><span class="line">    app: tomcat-demo</span><br></pre></td></tr></table></figure><p>用<code>kubectl get pods</code>看状态正常，<code>kubectl describe pod xxx</code>也正常，就是<code>docker exec -it xxx /bin/bash</code>进容器看日志也正常，虚拟机内直接<code>curl http://127.0.0.1:31002</code>也是正常有访问的，并且虚拟机的防火墙也是关着的（用<code>docker run -d -p 31002:8080 --name xxx tomcat</code>直接起容器就可以访问）</p><h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><p>排查一圈之后，实在没办法，上网搜。解决办法，虚拟机内执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -P FORWARD ACCEPT</span><br></pre></td></tr></table></figure><p>完了就全正常了。。</p><p><a href="https://github.com/kubernetes/kubernetes/issues/40182">参考链接</a></p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>k8s踏坑记 第一篇</title>
      <link href="2021/02/02/k8s%E8%B8%8F%E5%9D%91%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AF%87/"/>
      <url>2021/02/02/k8s%E8%B8%8F%E5%9D%91%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>开始还欠下的Kubernetes的债</p><a id="more"></a><p>首先是照着书敲《Kubernetes权威指南》，国人写的，写这篇文章时候看到了第一章第四节，不想吐槽了，专注记录坑</p><h3 id="搭建单机版kubernetes集群"><a href="#搭建单机版kubernetes集群" class="headerlink" title="搭建单机版kubernetes集群"></a>搭建单机版kubernetes集群</h3><h4 id="关防火墙"><a href="#关防火墙" class="headerlink" title="关防火墙"></a>关防火墙</h4><p>实在是偷懒的做法，纯测试用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 关闭</span><br><span class="line">systemctl stop firewalld</span><br><span class="line"># 取消自启动</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><h4 id="装etcd和k8s"><a href="#装etcd和k8s" class="headerlink" title="装etcd和k8s"></a>装etcd和k8s</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y etcd kubernetes</span><br></pre></td></tr></table></figure><h4 id="按顺序起服务"><a href="#按顺序起服务" class="headerlink" title="按顺序起服务"></a>按顺序起服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">systemctl start etcd</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl start kube-apiserver</span><br><span class="line">systemctl start kube-controller-manager</span><br><span class="line">systemctl start kube-scheduler</span><br><span class="line">systemctl start kubelet</span><br><span class="line">systemctl start kube-proxy</span><br></pre></td></tr></table></figure><h3 id="启mysql服务"><a href="#启mysql服务" class="headerlink" title="启mysql服务"></a>启mysql服务</h3><h4 id="创建pod"><a href="#创建pod" class="headerlink" title="创建pod"></a>创建pod</h4><p>创建<code>mysql-rc.yaml</code>，内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1  #指定api版本，此值必须在kubectl apiversion中</span><br><span class="line">kind: ReplicationController   #指定创建资源的类型或者角色，这里是副本控制器 RC</span><br><span class="line">metadata:       #资源的元数据&#x2F;属性</span><br><span class="line">  name: mysql</span><br><span class="line">spec:           #specification of the resource content</span><br><span class="line">  replicas: 1   #Pod副本期待数量</span><br><span class="line">  selector:</span><br><span class="line">    app: mysql  #通过这个标签找到生产的Pod</span><br><span class="line">  template:  　 #根据此模版创建Pod的副本(实例)</span><br><span class="line">    metadata:</span><br><span class="line">      labels:   #设定资源的标签     </span><br><span class="line">        app: mysql  #Pod副本拥有的标签，对应RC的selector中app: mysql</span><br><span class="line">    spec:</span><br><span class="line">      containers:   #Pod内容器的定义部分</span><br><span class="line">      - name: mysql   #容器的名称</span><br><span class="line">        image: mysql  #容器对应的Docker Image</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 3306 #容器应用监听的端口号</span><br><span class="line">        env:                 #注入容器内的环境变量</span><br><span class="line">        - name: MYSQL_ROOT_PASSWORD</span><br><span class="line">          value: &quot;123456&quot;</span><br></pre></td></tr></table></figure><p>发布到k8s集群，在master节点执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f mysql-rc.yaml</span><br></pre></td></tr></table></figure><p><code>replicationcontroller &quot;mysql&quot; created</code>创建完成<br>查看RC：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get rc</span><br><span class="line"></span><br><span class="line">NAME      DESIRED   CURRENT   READY     AGE</span><br><span class="line">mysql     1         1         0         1m</span><br></pre></td></tr></table></figure><p>查看pod</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods</span><br></pre></td></tr></table></figure><h5 id="坑一"><a href="#坑一" class="headerlink" title="坑一"></a>坑一</h5><p>查看pod，显示<code>No resources found.</code>，搜了一圈，要修改个文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;kubernetes&#x2F;apiserver</span><br></pre></td></tr></table></figure><p><strong>KUBE_ADMISSION_CONTROL</strong>项，去掉SecurityContextDeny,ServiceAccount，修改完成：<code> KUBE_ADMISSION_CONTROL=&quot;--admission-control=NamespaceLifecycle,NamespaceExists,LimitRanger,ResourceQuota&quot;</code><br>重启kube-apiserver：<code>systemctl restart kube-apiserver</code></p><p>重新创建RC，查看pod：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods</span><br><span class="line"></span><br><span class="line">NAME          READY     STATUS              RESTARTS   AGE</span><br><span class="line">mysql-gjg9h   0&#x2F;1       ContainerCreating   0          1m</span><br></pre></td></tr></table></figure><h5 id="坑二"><a href="#坑二" class="headerlink" title="坑二"></a>坑二</h5><p>查看pod状态，发现永远是ContainerCreating状态，查看日志：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl logs mysql-gjg9h</span><br><span class="line"></span><br><span class="line">Error from server (BadRequest): container &quot;mysql&quot; in pod &quot;mysql-gjg9h&quot; is waiting to start: ContainerCreating</span><br></pre></td></tr></table></figure><p>就这一句话。用<code>kubectl describe pod xxx</code>查看</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kubectl describe pod mysql-gjg9h</span><br><span class="line"></span><br><span class="line">... ...</span><br><span class="line">Events:</span><br><span class="line">  FirstSeenLastSeenCountFromSubObjectPathTypeReasonMessage</span><br><span class="line">  ------------------------------------------------------------</span><br><span class="line">  7m7m1&#123;default-scheduler &#125;NormalScheduledSuccessfully assigned mysql-gjg9h to 127.0.0.1</span><br><span class="line">  7m1m6&#123;kubelet 127.0.0.1&#125;WarningFailedSyncError syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;POD&quot; with ErrImagePull: &quot;image pull failed for registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure:latest, this may be because there are no credentials on this request.  details: (open &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;registry.access.redhat.com&#x2F;redhat-ca.crt: no such file or directory)&quot;</span><br><span class="line"></span><br><span class="line">  6m0s26&#123;kubelet 127.0.0.1&#125;WarningFailedSyncError syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;POD&quot; with ImagePullBackOff: &quot;Back-off pulling image \&quot;registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure:latest\&quot;&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>看到这个报错，首先尝试拉<code>docker pull registry.access.redhat.com/rhel7/pod-infrastructure:latest</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Trying to pull repository registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure ... </span><br><span class="line">open &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;registry.access.redhat.com&#x2F;redhat-ca.crt: no such file or directory</span><br></pre></td></tr></table></figure><p>报了个这个。。</p><p>进去报没有文件的这个路径查看这个文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@QA ~]# cd &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;registry.access.redhat.com</span><br><span class="line">[root@QA registry.access.redhat.com]# ll</span><br><span class="line">总用量 0</span><br><span class="line">lrwxrwxrwx. 1 root root 27 2月   2 10:10 redhat-ca.crt -&gt; &#x2F;etc&#x2F;rhsm&#x2F;ca&#x2F;redhat-uep.pem</span><br></pre></td></tr></table></figure><p>发现是个软链接，安装对应的：<code>yum install *rhsm*</code><br>安装完成，重新尝试拉镜像：<code>docker pull registry.access.redhat.com/rhel7/pod-infrastructure:latest</code></p><p>发现还是报失败</p><p>重新找了个办法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl s_client -showcerts -servername registry.access.redhat.com -connect registry.access.redhat.com:443 &lt;&#x2F;dev&#x2F;null 2&gt;&#x2F;dev&#x2F;null | openssl x509 -text &gt; &#x2F;etc&#x2F;rhsm&#x2F;ca&#x2F;redhat-uep.pem</span><br></pre></td></tr></table></figure><p>上面命令执行完之后再拉镜像:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@QA registry.access.redhat.com]# docker pull registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure:latest</span><br><span class="line">Trying to pull repository registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure ... </span><br><span class="line">latest: Pulling from registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure</span><br><span class="line">26e5ed6899db: Pull complete </span><br><span class="line">66dbe984a319: Pull complete </span><br><span class="line">9138e7863e08: Pull complete </span><br><span class="line">Digest: sha256:92d43c37297da3ab187fc2b9e9ebfb243c1110d446c783ae1b989088495db931</span><br><span class="line">Status: Image is up to date for registry.access.redhat.com&#x2F;rhel7&#x2F;pod-infrastructure:latest</span><br></pre></td></tr></table></figure><p>成功。<br>删除RC，删除pod，重新发布：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete -f mysql-rc.yaml</span><br><span class="line"># 验证</span><br><span class="line">kubectl get rc</span><br><span class="line">kubectl get pod </span><br></pre></td></tr></table></figure><p>因为压根没有部署pod成功，所以删除pod时候，只需要</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete pod mysql-xxxx</span><br></pre></td></tr></table></figure><p>就行了，如果是部署成功的，还需要查出deployment再删除</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get deployment</span><br><span class="line">kubectl delete deployment xxx</span><br></pre></td></tr></table></figure><p>发布到kubernetes集群里：<code>kubectl create -f mysql-rc.yaml</code></p><p>这次发现还是没成功创建pod，继续describe：<code>Error syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;mysql&quot; with ErrImagePull: &quot;net/http: request canceled&quot; </code><br>看这样子，是拉镜像时候网络超时了，配置新的镜像加速器<code>vim /etc/docker/daemon.json</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;http:&#x2F;&#x2F;hub-mirror.c.163.com&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启docker： <code>systemctl restart docker</code></p><p>继续删除rc，删除pod，重新发布<br>视本地网络因素（拉镜像），等n久之后查看pod</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@QA myweb]# kubectl get pods</span><br><span class="line"></span><br><span class="line">NAME          READY     STATUS    RESTARTS   AGE</span><br><span class="line">mysql-4cvj5   1&#x2F;1       Running   0          13s</span><br></pre></td></tr></table></figure><p>终于成功了。。。</p><h4 id="创建kubernetes-service"><a href="#创建kubernetes-service" class="headerlink" title="创建kubernetes service"></a>创建kubernetes service</h4><p>上述完成之后，创建一个和这个pod关联的kubernetes service<br>创建<code>mysql-svc.yaml</code>文件，内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: mysql</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - port: 3306</span><br><span class="line">  selector:</span><br><span class="line">    app: mysql</span><br></pre></td></tr></table></figure><p>创建service：<code>kubectl create -f musql-svc.yaml</code><br>查看：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@QA myweb]# kubectl get svc</span><br><span class="line"></span><br><span class="line">NAME         CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">kubernetes   10.254.0.1      &lt;none&gt;        443&#x2F;TCP    2h</span><br><span class="line">mysql        10.254.151.22   &lt;none&gt;        3306&#x2F;TCP   11s</span><br></pre></td></tr></table></figure><p>其中<strong>CLUSTER-IP</strong> 是一个虚拟的IP地址，由于Service（一个Service通常有多个相关的服务进程组成，kubernetes使用一组虚拟的IP和端口让用户连接到指定的service上）一旦创建就不会变化，所以不管后台有多少服务进程，也不管某个服务进程是否会由于发生故障或者部署到其他机器，都不需要因为业务服务进程的变更而去变更其他系统配置。</p><p>以上就是使用kubernetes启动一个服务（rc，service）需要的操作。</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python遍历嵌套列表</title>
      <link href="2021/01/22/python%E9%81%8D%E5%8E%86%E5%B5%8C%E5%A5%97%E5%88%97%E8%A1%A8/"/>
      <url>2021/01/22/python%E9%81%8D%E5%8E%86%E5%B5%8C%E5%A5%97%E5%88%97%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>用生成器函数遍历一个嵌套列表</p><a id="more"></a><p>假设有如下嵌套列表：</p><p><code>items = [1, 2, [3, 4, [5, 6], 7], 8]</code></p><p>想要把列表中所有元素输出为一系列单独的值（而不是有的是值，有的是子列表）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from collections import Iterable</span><br><span class="line"></span><br><span class="line">def get_index(items, ignore_type&#x3D;(str, bytes)):</span><br><span class="line">    for x in items:</span><br><span class="line">        if isinstance(x, Iterable) and not isinstance(x, ignore_type):</span><br><span class="line">            yield from get_index(x)</span><br><span class="line">        else:</span><br><span class="line">            yield x</span><br></pre></td></tr></table></figure><p>效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">for x in get_index(items):</span><br><span class="line">    print(x)</span><br><span class="line">    </span><br><span class="line"># 输出</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p>使用isinstance判断子元素是否可迭代，如果可迭代，使用yield from将这个可迭代对象进行递归，直到所有元素产出</p><p>该方法来自《Python Cookbook》一书</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python根据字典值排序</title>
      <link href="2021/01/20/python%E6%A0%B9%E6%8D%AE%E5%AD%97%E5%85%B8%E5%80%BC%E6%8E%92%E5%BA%8F/"/>
      <url>2021/01/20/python%E6%A0%B9%E6%8D%AE%E5%AD%97%E5%85%B8%E5%80%BC%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>根据字典的值对字典进行排序</p><a id="more"></a><p>示例字典：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">prices &#x3D; &#123;</span><br><span class="line">    &#39;ACME&#39;: 45.23,</span><br><span class="line">    &#39;AAPL&#39;: 612.78,</span><br><span class="line">    &#39;IBM&#39;: 205.55,</span><br><span class="line">    &#39;HPQ&#39;: 37.2,</span><br><span class="line">    &#39;FB&#39;: 10.75</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="按键排序"><a href="#按键排序" class="headerlink" title="按键排序"></a>按键排序</h3><p>正常sorted都是对键进行排序，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(sorted(prices.items()))</span><br><span class="line"></span><br><span class="line">#输出</span><br><span class="line">[(&#39;AAPL&#39;, 612.78), (&#39;ACME&#39;, 45.23), (&#39;FB&#39;, 10.75), (&#39;HPQ&#39;, 37.2), (&#39;IBM&#39;, 205.55)]</span><br></pre></td></tr></table></figure><p>是根据键的字母顺序排序</p><h3 id="值最大值和最小值"><a href="#值最大值和最小值" class="headerlink" title="值最大值和最小值"></a>值最大值和最小值</h3><p>类似示例字典，值是个数字，如果要对字典的值求最大和最小值，简单的办法就是反转字典，键变成值，值变成键，<code>zip（）</code>正好可以做到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">min_price &#x3D; min(zip(prices.values(), prices.keys()))</span><br><span class="line">max_price &#x3D; max(zip(prices.values(), prices.keys()))</span><br><span class="line">print(min_price)</span><br><span class="line">print(max_price)</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">(10.75, &#39;FB&#39;)</span><br><span class="line">(612.78, &#39;AAPL&#39;)</span><br></pre></td></tr></table></figure><h3 id="按值排序"><a href="#按值排序" class="headerlink" title="按值排序"></a>按值排序</h3><h4 id="方案一：-反转键值再排序"><a href="#方案一：-反转键值再排序" class="headerlink" title="方案一： 反转键值再排序"></a>方案一： 反转键值再排序</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">price_sort &#x3D; dict(sorted(zip(prices.values(), prices.keys())))</span><br><span class="line">print(dict(zip(price_sort.values(), price_sort.keys())))</span><br><span class="line"></span><br><span class="line"># 输出：</span><br><span class="line">&#123;&#39;FB&#39;: 10.75, &#39;HPQ&#39;: 37.2, &#39;ACME&#39;: 45.23, &#39;IBM&#39;: 205.55, &#39;AAPL&#39;: 612.78&#125;</span><br></pre></td></tr></table></figure><p>先反转键值对再排序，排序完成再反转回去</p><h4 id="方案二：使用匿名函数"><a href="#方案二：使用匿名函数" class="headerlink" title="方案二：使用匿名函数"></a>方案二：使用匿名函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sort_dict &#x3D; sorted(prices.items(), key&#x3D;lambda item:item[1])</span><br><span class="line">print(dict(sort_dict))</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">&#123;&#39;FB&#39;: 10.75, &#39;HPQ&#39;: 37.2, &#39;ACME&#39;: 45.23, &#39;IBM&#39;: 205.55, &#39;AAPL&#39;: 612.78&#125;</span><br></pre></td></tr></table></figure><p>sorted的key值，指定字典项的第二个值，也就是字典的值</p><h4 id="方案三：自定义获取key的函数"><a href="#方案三：自定义获取key的函数" class="headerlink" title="方案三：自定义获取key的函数"></a>方案三：自定义获取key的函数</h4><p>思路就是：<br>    1.对values进行排序<br>    2.遍历排序完的values列表<br>    3.构造空字典，按照上一步遍历的value插入原来字典对应的key和value<br>这边就需要自己构造一个根据value获取key的函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def get_key(dict, value):</span><br><span class="line">    # return (k for k,v in dict.items() if v &#x3D;&#x3D; value)</span><br><span class="line">    for k, v in dict.items():</span><br><span class="line">        if v &#x3D;&#x3D; value:</span><br><span class="line">            return k</span><br></pre></td></tr></table></figure><p>排序实现：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">d &#x3D; &#123;&#125;</span><br><span class="line"></span><br><span class="line">for i in sorted(prices.values()):</span><br><span class="line">    d[get_key(prices, i)] &#x3D; i</span><br><span class="line"></span><br><span class="line">print(d)</span><br><span class="line"># 输出</span><br><span class="line">&#123;&#39;FB&#39;: 10.75, &#39;HPQ&#39;: 37.2, &#39;ACME&#39;: 45.23, &#39;IBM&#39;: 205.55, &#39;AAPL&#39;: 612.78&#125;</span><br></pre></td></tr></table></figure><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改docker数据目录</title>
      <link href="2021/01/15/%E4%BF%AE%E6%94%B9docker%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95/"/>
      <url>2021/01/15/%E4%BF%AE%E6%94%B9docker%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>修改docker默认数据目录（镜像和启动容器过多造成磁盘满载情况）</p><a id="more"></a><p>版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Centos 7</span><br><span class="line">Docker</span><br><span class="line">Server Version: 20.10.2</span><br><span class="line">Storage Driver: overlay2</span><br></pre></td></tr></table></figure><ol><li>停服务 <code>systemctl stop docker</code></li><li>挂载数据盘，建数据文件夹  <code>/home/docker_data</code></li><li>备份     <code>tar -zcvf /home/docker_data/docker_bak.tar.gz /var/lib/docker/</code></li><li>建立软链接 <code>ln -s /home/docker_data /var/lib/docker</code></li><li>修改（新增）配置 <strong>/etc/docker/daemon</strong> ,<code>vim /etc/docker/daemon.json</code></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;http:&#x2F;&#x2F;hub-mirror.c.163.com&quot;],</span><br><span class="line">  &quot;data-root&quot;: &quot;&#x2F;home&#x2F;docker_data&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="6"><li>重新加载配置，重启<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></li><li>查看修改  <code>docker info</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker Root Dir: &#x2F;home&#x2F;docker_data</span><br><span class="line">Registry Mirrors:</span><br><span class="line"> http:&#x2F;&#x2F;hub-mirror.c.163.com&#x2F;</span><br></pre></td></tr></table></figure>以上，完~</li></ol>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sed和awk记录</title>
      <link href="2021/01/12/sed%E5%92%8Cawk%E8%AE%B0%E5%BD%95/"/>
      <url>2021/01/12/sed%E5%92%8Cawk%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>从学Linux开始，这俩就一直学学忘忘，记录下sed和awk的初阶使用</p><a id="more"></a><h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><p>sed编辑器全程流处理编辑器<code>stream editor，</code>流处理编辑器会在编辑器处理数据之前基于预先提供的一组规则来编辑数据流。sed预先设计的命令，要么从命令行输入，要么存储在命令文件里。<br><strong>sed不会修改原文件</strong></p><p>具体执行步骤：</p><ul><li>一次从输入中读取一行数据</li><li>根据所提供的编辑器命令匹配数据</li><li>按照命令修改流中的数据</li><li>将新的数据输出到STDOUT</li></ul><p>格式： <code> sed option script file</code></p><p>选项：</p><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>-e script</td><td>将script中指定的命令添加到已有命令中</td></tr><tr><td>-f file</td><td>将file中指定的命令添加到已有命令中</td></tr><tr><td>-n</td><td>不产生命令输出，一般和p配合使用</td></tr><tr><td></td><td></td></tr></tbody></table><h4 id="执行编辑器命令"><a href="#执行编辑器命令" class="headerlink" title="执行编辑器命令"></a>执行编辑器命令</h4><h5 id="命令行定义编辑器命令"><a href="#命令行定义编辑器命令" class="headerlink" title="命令行定义编辑器命令"></a>命令行定义编辑器命令</h5><p><code>echo &quot;This is a test&quot; | sed &#39;s/test/cat/&#39;</code></p><p>替换test为cat</p><h5 id="命令行定义多个编辑器命令"><a href="#命令行定义多个编辑器命令" class="headerlink" title="命令行定义多个编辑器命令"></a>命令行定义多个编辑器命令</h5><p><code>echo &quot;This is a test&quot; | sed &#39;s/a/two/; s/test/cats/&#39;</code></p><p>多个命令之间用分号隔开</p><h5 id="从文件读取编辑器命令"><a href="#从文件读取编辑器命令" class="headerlink" title="从文件读取编辑器命令"></a>从文件读取编辑器命令</h5><p>cat script.sed</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s&#x2F;a&#x2F;two&#x2F;</span><br><span class="line">s&#x2F;test&#x2F;cats&#x2F;</span><br></pre></td></tr></table></figure><p><code>sed -f script.sed data1.txt</code></p><h4 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h4><h5 id="替换标记"><a href="#替换标记" class="headerlink" title="替换标记"></a>替换标记</h5><p>格式：<code>s/pattern/replacement/flags</code></p><table><thead><tr><th>标记</th><th>描述</th></tr></thead><tbody><tr><td>数字</td><td>新文本将替换第几处模式匹配的地方</td></tr><tr><td>g</td><td>新文本会替换所有匹配的文本</td></tr><tr><td>p</td><td>输出修改过的行</td></tr><tr><td>w file</td><td>将替换结果写入file文件</td></tr><tr><td></td><td></td></tr></tbody></table><h5 id="指定匹配数替换"><a href="#指定匹配数替换" class="headerlink" title="指定匹配数替换"></a>指定匹配数替换</h5><p><code>sed &#39;s/test/cat/2&#39; data.txt</code></p><p>替换每行第二次匹配的test为cat</p><h5 id="打印修改过的内容"><a href="#打印修改过的内容" class="headerlink" title="打印修改过的内容"></a>打印修改过的内容</h5><p><code>sed -n &#39;s/test/cat/p&#39; data.txt</code></p><p>-n不产生命令输出，p输出修改过的行，合在一起，只输出修改过的行</p><h5 id="写更改内容"><a href="#写更改内容" class="headerlink" title="写更改内容"></a>写更改内容</h5><p><code>sed &#39;s/test/cat/w test.txt&#39; data.txt</code></p><p>将涉及到test改为cat的行，写到text.txt文件中</p><h4 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h4><p>sed提供两种形式的过滤</p><ul><li>以行数字形式的行区间过滤</li><li>文本形式的行过滤</li></ul><h5 id="行地址过滤"><a href="#行地址过滤" class="headerlink" title="行地址过滤"></a>行地址过滤</h5><h6 id="单行号"><a href="#单行号" class="headerlink" title="单行号"></a>单行号</h6><p><code>sed &#39;2s/dog/cat/&#39; data.txt</code></p><p>过滤出第二行，只将第二行的dog替换为cat</p><h6 id="行区间"><a href="#行区间" class="headerlink" title="行区间"></a>行区间</h6><p><code>sed &#39;2,4s/dog/cat/&#39; data.txt</code></p><p>过滤出第2-4行，将2,3,4行的dog替换为cat</p><h6 id="指定行开始的所有行"><a href="#指定行开始的所有行" class="headerlink" title="指定行开始的所有行"></a>指定行开始的所有行</h6><p><code>sed &#39;2,$s/dog/cat/&#39; data.txt</code></p><p>过滤出第二行开始到最后一行，替换第二行开始到最后一行的dog为cat</p><h5 id="文本过滤"><a href="#文本过滤" class="headerlink" title="文本过滤"></a>文本过滤</h5><p>格式： <code>/pattern/command</code>  pattern前必须要用正斜线封装</p><p><code>sed &#39;/kyle/s/bash/csh&#39; /etc/passwd</code></p><p>过滤出用户kyle，将默认的shell改为csh</p><h5 id="组合命令过滤"><a href="#组合命令过滤" class="headerlink" title="组合命令过滤"></a>组合命令过滤</h5><p>格式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">address &#123;</span><br><span class="line">command 1</span><br><span class="line">command 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果需要在单行上执行多条命令，需要用<strong>花括号</strong>将多条命令组合在一起，命令之间可以用换行或者分号隔开<br><code>sed &#39;2&#123;s/a/two/; s/dog/cats/&#125;&#39; data.txt</code><br>过滤到第二行，替换第二行的a为two，dog为cats</p><h4 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h4><h5 id="增"><a href="#增" class="headerlink" title="增"></a>增</h5><p>sed有两种插入方式，<code>i（insert）</code>和<code>a（append）</code>，分别是在指定行前以及指定行后插入<br>格式： <code>sed &#39;[address]command\&#39;</code><br><code>sed &#39;3i\This is a inserted line.&#39; data.txt</code><br>在第三行前插入</p><p><code>sed &#39;3a\This is an appended line.&#39; data.txt</code><br>在第三行后插入</p><p><code>sed &#39;$a\This is an appended line.&#39; data.txt</code><br>在文件末尾插入</p><h5 id="删"><a href="#删" class="headerlink" title="删"></a>删</h5><p>删和过滤类似<br><code>sed &#39;3d&#39; data.txt</code><br>删除第三行<br><code>sed &#39;3,4d&#39; data.txt</code><br>删除3,4行<br><code>sed &#39;3,$d&#39; data.txt</code><br>删除第三行开始到最后<br><code>sed &#39;/dog/d&#39; data.txt</code><br>删除匹配到dog的行</p><h5 id="改"><a href="#改" class="headerlink" title="改"></a>改</h5><h6 id="整行修改"><a href="#整行修改" class="headerlink" title="整行修改"></a>整行修改</h6><p>改和删也类似</p><p><code>sed &#39;3c\This is a changed line&#39; data.txt</code><br>改第三行<br><code>sed &#39;3,4c\This is a changed line&#39; data.txt</code><br>改3,4行<br><code>sed &#39;3,$c\This is a changed line&#39; data.txt</code><br>改第三行开始到最后<br><code>sed &#39;/dog/c\&#39; data.txt</code><br>改匹配到dog的行</p><h6 id="文本替换"><a href="#文本替换" class="headerlink" title="文本替换"></a>文本替换</h6><p>格式：<code>[address]/inchars/outchars/</code> 其中inchars和outchars的值一一对应（长度一致）<br><code>sed &#39;y/123/789/&#39; data.txt</code><br>将1替换成7,2换成8,3换成9</p><h3 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h3><p>这边使用的是awk的GUN版本gawk。<br>格式：<code>gawk options program file</code><br>选项</p><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>-F fs</td><td>指定数据分隔符</td></tr><tr><td>-f file</td><td>从指定文件中读取程序</td></tr><tr><td></td><td></td></tr></tbody></table><p>gawk的脚本命令必须放在两个花括号({})里面</p><h4 id="使用数据字段变量"><a href="#使用数据字段变量" class="headerlink" title="使用数据字段变量"></a>使用数据字段变量</h4><p>gawk会自动给一行中的每个数据元素分配一个变量，默认情况下按如下方式分配：</p><table><thead><tr><th>字段</th><th>描述</th></tr></thead><tbody><tr><td>$0</td><td>整个文件行</td></tr><tr><td>$1</td><td>文本行中第一个数据字段</td></tr><tr><td>$2</td><td>文本行中第二个数据字段</td></tr><tr><td>$n</td><td>文本行中第n个数据字段</td></tr><tr><td></td><td></td></tr></tbody></table><p><code>gawk &#123;print $1&#125; data.txt</code></p><p>输出所有行的第一个数据字段</p><h4 id="指定分隔符"><a href="#指定分隔符" class="headerlink" title="指定分隔符"></a>指定分隔符</h4><p><code>gawk -F &#39;:&#39; &#123;print $1&#125; /etc/passwd</code></p><p>指定分隔符为冒号’:’，输出每行分割之后的第一个数据字段</p><h4 id="脚本使用多个程序命令"><a href="#脚本使用多个程序命令" class="headerlink" title="脚本使用多个程序命令"></a>脚本使用多个程序命令</h4><p><code>echo &quot;This is a cat&quot; | gawk &#39;&#123;$4=&quot;dog&quot;; print $0&#125;&#39; </code></p><p>多个命令之间用分号隔开</p><h4 id="从文件读取程序"><a href="#从文件读取程序" class="headerlink" title="从文件读取程序"></a>从文件读取程序</h4><p>cat script.gawk</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;print $1 &quot;&#39;s home directory is &quot; $6&#125;</span><br></pre></td></tr></table></figure><p><code>gawk -F &#39;:&#39; -f script.gawk /etc/passwd</code><br>执行效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root&#39;s home directory is &#x2F;root</span><br><span class="line">bin&#39;s home directory is &#x2F;bin</span><br><span class="line">daemon&#39;s home directory is &#x2F;sbin</span><br><span class="line">... ...</span><br><span class="line">sshd&#39;s home directory is &#x2F;var&#x2F;empty&#x2F;sshd</span><br><span class="line">kyle&#39;s home directory is &#x2F;home&#x2F;kyle</span><br></pre></td></tr></table></figure><h4 id="数据处理前后动作"><a href="#数据处理前后动作" class="headerlink" title="数据处理前后动作"></a>数据处理前后动作</h4><p>gawk允许在数据处理前后使用<strong>BEGIN</strong>和<strong>END</strong>关键字指定运行前和运行后的动作。</p><p>cat script.gawk</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">BEGIN&#123;</span><br><span class="line">print &quot;The latest list of users and shells&quot;</span><br><span class="line">print &quot; USERID \t SHELL&quot;</span><br><span class="line">print &quot;-------- \t --------&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">print $1 &quot;  \t &quot; $7</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">END&#123;</span><br><span class="line">print &quot;This concludes the listing&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>gawk -F &#39;:&#39; -f script.gawk /etc/passwd</code><br>执行效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">The latest list of users and shells</span><br><span class="line"> USERID  SHELL</span><br><span class="line">--------  --------</span><br><span class="line">root   &#x2F;bin&#x2F;bash</span><br><span class="line">bin   &#x2F;sbin&#x2F;nologin</span><br><span class="line">......</span><br><span class="line">kyle   &#x2F;bin&#x2F;bash</span><br><span class="line">This concludes the listing</span><br></pre></td></tr></table></figure><p>以上为sed和awk的基础入门部分，熟能生巧，完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sed </tag>
            
            <tag> awk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux一些小技能</title>
      <link href="2021/01/07/Linux%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E8%83%BD/"/>
      <url>2021/01/07/Linux%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>一些Linux日常碰到的小技巧 –不间断更新</p><a id="more"></a><h3 id="vim设置tab空格数"><a href="#vim设置tab空格数" class="headerlink" title="vim设置tab空格数"></a>vim设置tab空格数</h3><p>vim编辑器中，tab默认的空格数是8，我们习惯上是4，可以通过修改配置文件来换成4：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;vimrc</span><br><span class="line"># 添加一行</span><br><span class="line">set tabstop&#x3D;4</span><br><span class="line"># 保存生效</span><br></pre></td></tr></table></figure><h3 id="vim文本替换"><a href="#vim文本替换" class="headerlink" title="vim文本替换"></a>vim文本替换</h3><p>这个不算小技巧，基本技能，只是不常用的时候就一直忘记，顺手记录下方便查找：</p><table><thead><tr><th>命令</th><th>释义</th></tr></thead><tbody><tr><td>:s/old/new/g</td><td>替换光标当前行所有old</td></tr><tr><td>:n,ms/old/new/g</td><td>替换n到m行之间所有old</td></tr><tr><td>:%s/old/new/g</td><td>替换文件中所有old</td></tr><tr><td>:%s/old/new/gc</td><td>替换文件中所有old，每次替换都提示</td></tr><tr><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python中关于日期的一些函数</title>
      <link href="2020/12/25/python%E4%B8%AD%E5%85%B3%E4%BA%8E%E6%97%A5%E6%9C%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E5%87%BD%E6%95%B0/"/>
      <url>2020/12/25/python%E4%B8%AD%E5%85%B3%E4%BA%8E%E6%97%A5%E6%9C%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>自己封装了关于日期的两个函数，供需要时候使用</p><a id="more"></a><h3 id="获取时间与当前日期比较"><a href="#获取时间与当前日期比较" class="headerlink" title="获取时间与当前日期比较"></a>获取时间与当前日期比较</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*-coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author: kyle</span></span><br><span class="line"><span class="string">@time: 2020/6/29 14:46</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diff_date</span>(<span class="params">t_date</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    和当前日期比较</span></span><br><span class="line"><span class="string">    :param t_date: 待比较日期</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    tmp_today = datetime.datetime.today()</span><br><span class="line">    today = tmp_today.date()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 格式化，str转换成 datetime格式</span></span><br><span class="line">    tmp_date_reg = datetime.datetime.strptime(t_date, <span class="string">&#x27;%Y-%m-%d&#x27;</span>).date()</span><br><span class="line"></span><br><span class="line">    result = (tmp_date_reg - today).days</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> t_date + <span class="string">&quot; 在未来&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> result == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> t_date + <span class="string">&quot; 是今天&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> t_date + <span class="string">&quot; 在过去&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print(diff_date(<span class="string">&#x27;2020-07-01&#x27;</span>))</span><br></pre></td></tr></table></figure><h3 id="获取一段时间内所有节假日"><a href="#获取一段时间内所有节假日" class="headerlink" title="获取一段时间内所有节假日"></a>获取一段时间内所有节假日</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*-coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author: kyle</span></span><br><span class="line"><span class="string">@time: 2020/6/4 11:05</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取一段时间内所有节假日</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pip install chinesecalendar</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> chinese_calendar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reg_date</span>(<span class="params">t_date</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    格式化日期</span></span><br><span class="line"><span class="string">    :param t_date:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> datetime.datetime.strptime(t_date, <span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_holiday</span>(<span class="params">start, end</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    返回指定时间区间内的节假日</span></span><br><span class="line"><span class="string">    :param start:</span></span><br><span class="line"><span class="string">    :param end:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> chinese_calendar.get_holidays(reg_date(start), reg_date(end))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_holiday_no_weekends</span>(<span class="params">start, end</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    返回指定时间区间内的节假日,不含周末</span></span><br><span class="line"><span class="string">    :param start:</span></span><br><span class="line"><span class="string">    :param end:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> chinese_calendar.get_holidays(reg_date(start), reg_date(end), include_weekends=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_workday</span>(<span class="params">start, end</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    返回指定时间区间内的工作日</span></span><br><span class="line"><span class="string">    :param start:</span></span><br><span class="line"><span class="string">    :param end:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> chinese_calendar.get_workdays(reg_date(start), reg_date(end))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">judge_date</span>(<span class="params">t_date</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    判断某个日期属于节假日还是工作日</span></span><br><span class="line"><span class="string">    :param t_date:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 格式化日期,获取该日期的年份</span></span><br><span class="line">    t_year = reg_date(t_date).year</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取节假日和工作日</span></span><br><span class="line">    holidays = get_holiday(<span class="string">&#x27;&#123;&#125;-01-01&#x27;</span>.<span class="built_in">format</span>(t_year), <span class="string">&#x27;&#123;&#125;-12-31&#x27;</span>.<span class="built_in">format</span>(t_year))</span><br><span class="line">    <span class="comment"># workdays = get_workday(&#x27;&#123;&#125;-01-01&#x27;.format(t_year), &#x27;&#123;&#125;-12-31&#x27;.format(t_year))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 判断属于节假日还是工作日</span></span><br><span class="line">    <span class="keyword">if</span> datetime.date(reg_date(t_date).year, reg_date(t_date).month, reg_date(t_date).day) <span class="keyword">in</span> holidays:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(t_date) + <span class="string">&quot; 是节假日&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(t_date) + <span class="string">&quot; 是工作日&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print(judge_date(<span class="string">&#x27;2020-06-28&#x27;</span>))</span><br></pre></td></tr></table></figure><h3 id="获取指定区间内的所有日期"><a href="#获取指定区间内的所有日期" class="headerlink" title="获取指定区间内的所有日期"></a>获取指定区间内的所有日期</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reg_date</span>(<span class="params">t_date</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    格式化日期</span></span><br><span class="line"><span class="string">    :param t_date:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> datetime.strptime(t_date, <span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_daterange</span>(<span class="params">start, end</span>):</span></span><br><span class="line">    <span class="comment"># 格式化</span></span><br><span class="line">    start = reg_date(start)</span><br><span class="line">    end = reg_date(end)</span><br><span class="line"></span><br><span class="line">    delta = (end - start).days</span><br><span class="line">    res_date = [(start + timedelta(days=deltaday)).date() <span class="keyword">for</span> deltaday <span class="keyword">in</span> <span class="built_in">range</span>(delta+<span class="number">1</span>)]</span><br><span class="line">    <span class="comment"># 输出结果转strpy</span></span><br><span class="line">    <span class="keyword">return</span> [date.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="keyword">for</span> date <span class="keyword">in</span> res_date]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print(get_daterange(<span class="string">&#x27;2020-05-01&#x27;</span>, <span class="string">&#x27;2020-06-02&#x27;</span>))</span><br><span class="line">    dateTime = datetime.today().date()</span><br><span class="line">    print(dateTime.isoformat())</span><br></pre></td></tr></table></figure><h3 id="datetime格式转str"><a href="#datetime格式转str" class="headerlink" title="datetime格式转str"></a>datetime格式转str</h3><h4 id="isoformat"><a href="#isoformat" class="headerlink" title="isoformat()"></a>isoformat()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">dateTime = datetime.today().date()</span><br><span class="line">r_date = dateTime.isoformat()</span><br><span class="line">print(dateTime)</span><br><span class="line">print(r_date)</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">type</span>(dateTime))</span><br><span class="line">print(<span class="built_in">type</span>(r_date))</span><br></pre></td></tr></table></figure><h4 id="datetime-strftime"><a href="#datetime-strftime" class="headerlink" title="datetime.strftime"></a>datetime.strftime</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">dateTime = datetime.today().date()</span><br><span class="line">r_date = dateTime.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line">print(dateTime)</span><br><span class="line">print(r_date)</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">type</span>(dateTime))</span><br><span class="line">print(<span class="built_in">type</span>(r_date))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python中break pass continue比较</title>
      <link href="2020/12/25/python%E4%B8%ADbreak-pass-continue%E6%AF%94%E8%BE%83/"/>
      <url>2020/12/25/python%E4%B8%ADbreak-pass-continue%E6%AF%94%E8%BE%83/</url>
      
        <content type="html"><![CDATA[<p>python3中break，continue，pass比较</p><a id="more"></a><h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><p><code>break</code>跳出当前层次的循环</p><p>例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;python&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> i == <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    print(i, end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>输出结果：<code>py</code></p><p>遇到嵌套循环时，break只会跳出所在层的循环，例如以下会跳出最内层循环，对外层没有影响：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;python&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        print(i, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> i == <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>输出结果：<code>pppyyythhhooonnn</code></p><h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><p><code>continue</code>跳出当前当次循环，不跳出循环体，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="string">&#x27;python&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> j == <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    print(j, end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>输出：<code>pyhon</code></p><h3 id="pass"><a href="#pass" class="headerlink" title="pass"></a>pass</h3><p><code>pass</code>可以看做是python的一个占位符，遇到有的方法当时不知道怎么设计细节时候，可以用pass占位，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_name</span>(<span class="params">name</span>):</span></span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>该函数没有实现任何具体的业务逻辑</p><p>另外在循环中使用pass不会跳出循环：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="string">&#x27;python&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> k == <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    print(k, end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>输出结果：<code>python</code></p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3读取乱码文件</title>
      <link href="2020/12/25/python3%E8%AF%BB%E5%8F%96%E4%B9%B1%E7%A0%81%E6%96%87%E4%BB%B6/"/>
      <url>2020/12/25/python3%E8%AF%BB%E5%8F%96%E4%B9%B1%E7%A0%81%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>python读取文件中乱码内容</p><a id="more"></a><p>首要矛盾不应该是避免写出乱码日志嘛~~~不过既然存在了，只能想办法解决</p><p>文件内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2020-06-04 09:30:21,011 - INFO - &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; setup &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">2020-06-04 09:30:21,016 - INFO - 启动TC003_01_punchGPS</span><br><span class="line">2020-06-04 09:30:35,119 - INFO - APP::TC003_01_punchGPS_</span><br><span class="line">2020-06-04 09:30:35,123 - INFO - APP::鎵撳紑鍔冲姩鍔涚鐞嗛〉闈</span><br><span class="line">2020-06-04 09:30:48,885 - INFO - APP::鐧诲綍鍔冲姩鍔涚鐞咥PP_</span><br><span class="line">2020-06-04 09:31:51,872 - INFO - APP::杩涘叆鐧诲綍鍔冲姩鍔涚鐞嗚彍鍗昣</span><br><span class="line">2020-06-04 09:31:57,813 - INFO - APP::verify:杩涘叆绉诲姩鎵撳崱_</span><br><span class="line">2020-06-04 09:32:01,860 - INFO - APP::verify:閫夋嫨鎵撳崱鏂瑰紡_</span><br><span class="line">2020-06-04 09:32:07,617 - INFO - APP::verify:鑾峰彇鎵撳崱鏃堕棿_</span><br><span class="line">2020-06-04 09:32:08,484 - INFO - APP::punchTime&#x3D;09:32_</span><br></pre></td></tr></table></figure><p>目标是截取到“punchTime”的值，并且去掉“_”</p><p>开始写法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">filename = <span class="string">&#x27;E:/py_workstation/tmpfiles/WFM4_old.TC003_01_punchGPS_1_1.log&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;punchTime&#x27;</span> <span class="keyword">in</span> line:</span><br><span class="line">            res = line</span><br><span class="line">            print(res)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">aim_time_index = res.find(<span class="string">&#x27;punchTime&#x27;</span>)</span><br><span class="line"><span class="comment"># print(aim_time_index)</span></span><br><span class="line"></span><br><span class="line">aim_time = res[aim_time_index+<span class="number">10</span>:].replace(<span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(aim_time)</span><br></pre></td></tr></table></figure><p>然后出现一堆你懂得报错：<code>UnicodeDecodeError: &#39;utf-8&#39; codec can&#39;t decode byte 0xc6 in position 87: invalid continuation byte</code></p><p>查了一圈，解决办法两个：<br>1，直接工具，例如”notepad“转到utf-8<br>2，编码指定为:encoding=’unicode_escape’</p><p>完整代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*-coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author: kyle</span></span><br><span class="line"><span class="string">@time: 2020/6/4 10:17</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># filename = &#x27;E:/py_workstation/tmpfiles/punchGPS_1_1.log&#x27;</span></span><br><span class="line"></span><br><span class="line">filename = <span class="string">&#x27;E:/py_workstation/tmpfiles/WFM4_old.TC003_01_punchGPS_1_1.log&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, encoding=<span class="string">&#x27;unicode_escape&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;punchTime&#x27;</span> <span class="keyword">in</span> line:</span><br><span class="line">            res = line</span><br><span class="line">            print(res)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">aim_time_index = res.find(<span class="string">&#x27;punchTime&#x27;</span>)</span><br><span class="line"><span class="comment"># print(aim_time_index)</span></span><br><span class="line"></span><br><span class="line">aim_time = res[aim_time_index+<span class="number">10</span>:].replace(<span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(aim_time)</span><br></pre></td></tr></table></figure><p>另外，可以考虑两个包<code>codecs</code>和<code>chardet</code></p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pycharm日常报错总结</title>
      <link href="2020/12/25/pycharm%E6%97%A5%E5%B8%B8%E6%8A%A5%E9%94%99%E6%80%BB%E7%BB%93/"/>
      <url>2020/12/25/pycharm%E6%97%A5%E5%B8%B8%E6%8A%A5%E9%94%99%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>一些日常使用pycharm过程中遇到的问题的记录，持续更新</p><a id="more"></a><ol><li>print，range，len等函数，在pycharm中出现红色下划线（有错误），提示  “Unresolved reference ‘print’”，但是可以正常执行</li></ol><p><code>解决办法：File -&gt; Invalidate Caches / Restart... -&gt; Invalidate and Restart</code></p><ol start="2"><li>切换分支（checkout），报“Permission denied can’t cannot stat ‘xxx’”<br><code>解决办法：关闭pycharm，所有浏览器，文件管理器，重启pycharm，再切换</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pycharm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python时区</title>
      <link href="2020/12/25/python%E6%97%B6%E5%8C%BA/"/>
      <url>2020/12/25/python%E6%97%B6%E5%8C%BA/</url>
      
        <content type="html"><![CDATA[<p>一点关于python里面时区的知识</p><a id="more"></a><h3 id="时区"><a href="#时区" class="headerlink" title="时区"></a>时区</h3><p><code>GMT</code> ： GMT时区是格林威治时间<br><code>UTC（Universal Coordinated Time）</code> ： UTC时区是根据GMT得来的“世界标准时间”<br><code>CST</code> ： CST时区指代有多个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">澳洲中部时间，Central Standard Time (Australia)</span><br><span class="line">中部标准时区（北美洲），Central Standard Time (North America)</span><br><span class="line">北京时间，China Standard Time</span><br><span class="line">古巴标准时间，Cuba Standard Time</span><br></pre></td></tr></table></figure><p>我们所在的时区（东八区），按照北京时间，实际上CST=UTC +08:00</p><h3 id="ISO-8601和UTC"><a href="#ISO-8601和UTC" class="headerlink" title="ISO 8601和UTC"></a>ISO 8601和UTC</h3><h4 id="UTC"><a href="#UTC" class="headerlink" title="UTC"></a>UTC</h4><p>用python分别输出 UTC 时区和CST(北京时区)的当前时间</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># import pytz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认时区（CST北京时区）</span></span><br><span class="line">now_cst = datetime.now()</span><br><span class="line">print(now_cst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定UTC时间</span></span><br><span class="line"><span class="comment"># utc_tz = pytz.timezone(&#x27;UTC&#x27;)</span></span><br><span class="line"><span class="comment"># now_utc = datetime.now(tz=utc_tz)</span></span><br><span class="line">now_utc = datetime.utcnow()</span><br><span class="line">print(now_utc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="number">2020</span>-07-01 <span class="number">14</span>:08:<span class="number">49.946031</span></span><br><span class="line"><span class="number">2020</span>-07-01 06:08:<span class="number">49.946031</span></span><br></pre></td></tr></table></figure><p>可以看到当前时区（北京）时间是UTC时间加8小时</p><h4 id="ISO8601"><a href="#ISO8601" class="headerlink" title="ISO8601"></a>ISO8601</h4><p>ISO8601全称：数据存储和交换形式·信息交换·日期和时间的表示方法，是国际标准化组织制定的表示日期和时间的国际标准，官方原话:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This ISO standard helps remove doubts that can result from the various day–date conventions, cultures and time zones that impact a global operation. It gives a way of presenting dates and times that is clearly defined and understandable to both people and machines.</span><br></pre></td></tr></table></figure><p>python将当前时间转换为 ISO8601格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># import pytz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认时区（CST北京时区）</span></span><br><span class="line">now_cst = datetime.now()</span><br><span class="line">print(now_cst)</span><br><span class="line">print(now_cst.isoformat())</span><br><span class="line"></span><br><span class="line">print(<span class="string">&quot;=&quot;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定UTC时间</span></span><br><span class="line"><span class="comment"># utc_tz = pytz.timezone(&#x27;UTC&#x27;)</span></span><br><span class="line"><span class="comment"># now_utc = datetime.now(tz=utc_tz)</span></span><br><span class="line">now_utc = datetime.utcnow()</span><br><span class="line">print(now_utc)</span><br><span class="line">print(now_utc.isoformat())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="number">2020</span>-07-01 <span class="number">14</span>:<span class="number">34</span>:<span class="number">10.948195</span></span><br><span class="line"><span class="number">2020</span>-07-01T14:<span class="number">34</span>:<span class="number">10.948195</span></span><br><span class="line">==============================</span><br><span class="line"><span class="number">2020</span>-07-01 06:<span class="number">34</span>:<span class="number">10.948195</span></span><br><span class="line"><span class="number">2020</span>-07-01T06:<span class="number">34</span>:<span class="number">10.948195</span></span><br></pre></td></tr></table></figure><p>ISO8601格式的输出结果比普通输出结果多了一个T，T表示后面是日期时间值的时间部分；</p><p>除了这个区别，还有就是类型上的区别：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">now_cst = datetime.now()</span><br><span class="line">print(now_cst, <span class="built_in">type</span>(now_cst))</span><br><span class="line">print(now_cst.isoformat(), <span class="built_in">type</span>(now_cst.isoformat()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="number">2020</span>-07-01 <span class="number">14</span>:<span class="number">17</span>:<span class="number">26.834861</span> &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">datetime</span>.<span class="title">datetime</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">2020-07-01<span class="title">T14</span>:</span><span class="number">17</span>:<span class="number">26.834861</span> &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到将时间转换成ISO8601格式之后，类型也从<code>datetime.datetime</code>转换成了<code>str</code></p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python生成身份证</title>
      <link href="2019/08/08/python%E7%94%9F%E6%88%90%E8%BA%AB%E4%BB%BD%E8%AF%81/"/>
      <url>2019/08/08/python%E7%94%9F%E6%88%90%E8%BA%AB%E4%BB%BD%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<p>python生成身份证</p><a id="more"></a><p>之前的<code>Faker</code>模块虽然也有<code>fake.ssn()</code>可以生成身份证，但是还是有点想知道原理，自己用python怎么实现，并且，生成例如指定年龄和性别的身份证怎么实现。</p><p>大陆身份证规则可以直接搜，很容易就找到，分为区域码、生日、顺序码、校验码四个部分，其中区域码是国家定义的各个区域，这个可以直接存到某个文件里，后面直接拿</p><h3 id="区域码"><a href="#区域码" class="headerlink" title="区域码"></a>区域码</h3><p>直接网上复制了一份<br><code>addrcode.py</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br><span class="line">2219</span><br><span class="line">2220</span><br><span class="line">2221</span><br><span class="line">2222</span><br><span class="line">2223</span><br><span class="line">2224</span><br><span class="line">2225</span><br><span class="line">2226</span><br><span class="line">2227</span><br><span class="line">2228</span><br><span class="line">2229</span><br><span class="line">2230</span><br><span class="line">2231</span><br><span class="line">2232</span><br><span class="line">2233</span><br><span class="line">2234</span><br><span class="line">2235</span><br><span class="line">2236</span><br><span class="line">2237</span><br><span class="line">2238</span><br><span class="line">2239</span><br><span class="line">2240</span><br><span class="line">2241</span><br><span class="line">2242</span><br><span class="line">2243</span><br><span class="line">2244</span><br><span class="line">2245</span><br><span class="line">2246</span><br><span class="line">2247</span><br><span class="line">2248</span><br><span class="line">2249</span><br><span class="line">2250</span><br><span class="line">2251</span><br><span class="line">2252</span><br><span class="line">2253</span><br><span class="line">2254</span><br><span class="line">2255</span><br><span class="line">2256</span><br><span class="line">2257</span><br><span class="line">2258</span><br><span class="line">2259</span><br><span class="line">2260</span><br><span class="line">2261</span><br><span class="line">2262</span><br><span class="line">2263</span><br><span class="line">2264</span><br><span class="line">2265</span><br><span class="line">2266</span><br><span class="line">2267</span><br><span class="line">2268</span><br><span class="line">2269</span><br><span class="line">2270</span><br><span class="line">2271</span><br><span class="line">2272</span><br><span class="line">2273</span><br><span class="line">2274</span><br><span class="line">2275</span><br><span class="line">2276</span><br><span class="line">2277</span><br><span class="line">2278</span><br><span class="line">2279</span><br><span class="line">2280</span><br><span class="line">2281</span><br><span class="line">2282</span><br><span class="line">2283</span><br><span class="line">2284</span><br><span class="line">2285</span><br><span class="line">2286</span><br><span class="line">2287</span><br><span class="line">2288</span><br><span class="line">2289</span><br><span class="line">2290</span><br><span class="line">2291</span><br><span class="line">2292</span><br><span class="line">2293</span><br><span class="line">2294</span><br><span class="line">2295</span><br><span class="line">2296</span><br><span class="line">2297</span><br><span class="line">2298</span><br><span class="line">2299</span><br><span class="line">2300</span><br><span class="line">2301</span><br><span class="line">2302</span><br><span class="line">2303</span><br><span class="line">2304</span><br><span class="line">2305</span><br><span class="line">2306</span><br><span class="line">2307</span><br><span class="line">2308</span><br><span class="line">2309</span><br><span class="line">2310</span><br><span class="line">2311</span><br><span class="line">2312</span><br><span class="line">2313</span><br><span class="line">2314</span><br><span class="line">2315</span><br><span class="line">2316</span><br><span class="line">2317</span><br><span class="line">2318</span><br><span class="line">2319</span><br><span class="line">2320</span><br><span class="line">2321</span><br><span class="line">2322</span><br><span class="line">2323</span><br><span class="line">2324</span><br><span class="line">2325</span><br><span class="line">2326</span><br><span class="line">2327</span><br><span class="line">2328</span><br><span class="line">2329</span><br><span class="line">2330</span><br><span class="line">2331</span><br><span class="line">2332</span><br><span class="line">2333</span><br><span class="line">2334</span><br><span class="line">2335</span><br><span class="line">2336</span><br><span class="line">2337</span><br><span class="line">2338</span><br><span class="line">2339</span><br><span class="line">2340</span><br><span class="line">2341</span><br><span class="line">2342</span><br><span class="line">2343</span><br><span class="line">2344</span><br><span class="line">2345</span><br><span class="line">2346</span><br><span class="line">2347</span><br><span class="line">2348</span><br><span class="line">2349</span><br><span class="line">2350</span><br><span class="line">2351</span><br><span class="line">2352</span><br><span class="line">2353</span><br><span class="line">2354</span><br><span class="line">2355</span><br><span class="line">2356</span><br><span class="line">2357</span><br><span class="line">2358</span><br><span class="line">2359</span><br><span class="line">2360</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2366</span><br><span class="line">2367</span><br><span class="line">2368</span><br><span class="line">2369</span><br><span class="line">2370</span><br><span class="line">2371</span><br><span class="line">2372</span><br><span class="line">2373</span><br><span class="line">2374</span><br><span class="line">2375</span><br><span class="line">2376</span><br><span class="line">2377</span><br><span class="line">2378</span><br><span class="line">2379</span><br><span class="line">2380</span><br><span class="line">2381</span><br><span class="line">2382</span><br><span class="line">2383</span><br><span class="line">2384</span><br><span class="line">2385</span><br><span class="line">2386</span><br><span class="line">2387</span><br><span class="line">2388</span><br><span class="line">2389</span><br><span class="line">2390</span><br><span class="line">2391</span><br><span class="line">2392</span><br><span class="line">2393</span><br><span class="line">2394</span><br><span class="line">2395</span><br><span class="line">2396</span><br><span class="line">2397</span><br><span class="line">2398</span><br><span class="line">2399</span><br><span class="line">2400</span><br><span class="line">2401</span><br><span class="line">2402</span><br><span class="line">2403</span><br><span class="line">2404</span><br><span class="line">2405</span><br><span class="line">2406</span><br><span class="line">2407</span><br><span class="line">2408</span><br><span class="line">2409</span><br><span class="line">2410</span><br><span class="line">2411</span><br><span class="line">2412</span><br><span class="line">2413</span><br><span class="line">2414</span><br><span class="line">2415</span><br><span class="line">2416</span><br><span class="line">2417</span><br><span class="line">2418</span><br><span class="line">2419</span><br><span class="line">2420</span><br><span class="line">2421</span><br><span class="line">2422</span><br><span class="line">2423</span><br><span class="line">2424</span><br><span class="line">2425</span><br><span class="line">2426</span><br><span class="line">2427</span><br><span class="line">2428</span><br><span class="line">2429</span><br><span class="line">2430</span><br><span class="line">2431</span><br><span class="line">2432</span><br><span class="line">2433</span><br><span class="line">2434</span><br><span class="line">2435</span><br><span class="line">2436</span><br><span class="line">2437</span><br><span class="line">2438</span><br><span class="line">2439</span><br><span class="line">2440</span><br><span class="line">2441</span><br><span class="line">2442</span><br><span class="line">2443</span><br><span class="line">2444</span><br><span class="line">2445</span><br><span class="line">2446</span><br><span class="line">2447</span><br><span class="line">2448</span><br><span class="line">2449</span><br><span class="line">2450</span><br><span class="line">2451</span><br><span class="line">2452</span><br><span class="line">2453</span><br><span class="line">2454</span><br><span class="line">2455</span><br><span class="line">2456</span><br><span class="line">2457</span><br><span class="line">2458</span><br><span class="line">2459</span><br><span class="line">2460</span><br><span class="line">2461</span><br><span class="line">2462</span><br><span class="line">2463</span><br><span class="line">2464</span><br><span class="line">2465</span><br><span class="line">2466</span><br><span class="line">2467</span><br><span class="line">2468</span><br><span class="line">2469</span><br><span class="line">2470</span><br><span class="line">2471</span><br><span class="line">2472</span><br><span class="line">2473</span><br><span class="line">2474</span><br><span class="line">2475</span><br><span class="line">2476</span><br><span class="line">2477</span><br><span class="line">2478</span><br><span class="line">2479</span><br><span class="line">2480</span><br><span class="line">2481</span><br><span class="line">2482</span><br><span class="line">2483</span><br><span class="line">2484</span><br><span class="line">2485</span><br><span class="line">2486</span><br><span class="line">2487</span><br><span class="line">2488</span><br><span class="line">2489</span><br><span class="line">2490</span><br><span class="line">2491</span><br><span class="line">2492</span><br><span class="line">2493</span><br><span class="line">2494</span><br><span class="line">2495</span><br><span class="line">2496</span><br><span class="line">2497</span><br><span class="line">2498</span><br><span class="line">2499</span><br><span class="line">2500</span><br><span class="line">2501</span><br><span class="line">2502</span><br><span class="line">2503</span><br><span class="line">2504</span><br><span class="line">2505</span><br><span class="line">2506</span><br><span class="line">2507</span><br><span class="line">2508</span><br><span class="line">2509</span><br><span class="line">2510</span><br><span class="line">2511</span><br><span class="line">2512</span><br><span class="line">2513</span><br><span class="line">2514</span><br><span class="line">2515</span><br><span class="line">2516</span><br><span class="line">2517</span><br><span class="line">2518</span><br><span class="line">2519</span><br><span class="line">2520</span><br><span class="line">2521</span><br><span class="line">2522</span><br><span class="line">2523</span><br><span class="line">2524</span><br><span class="line">2525</span><br><span class="line">2526</span><br><span class="line">2527</span><br><span class="line">2528</span><br><span class="line">2529</span><br><span class="line">2530</span><br><span class="line">2531</span><br><span class="line">2532</span><br><span class="line">2533</span><br><span class="line">2534</span><br><span class="line">2535</span><br><span class="line">2536</span><br><span class="line">2537</span><br><span class="line">2538</span><br><span class="line">2539</span><br><span class="line">2540</span><br><span class="line">2541</span><br><span class="line">2542</span><br><span class="line">2543</span><br><span class="line">2544</span><br><span class="line">2545</span><br><span class="line">2546</span><br><span class="line">2547</span><br><span class="line">2548</span><br><span class="line">2549</span><br><span class="line">2550</span><br><span class="line">2551</span><br><span class="line">2552</span><br><span class="line">2553</span><br><span class="line">2554</span><br><span class="line">2555</span><br><span class="line">2556</span><br><span class="line">2557</span><br><span class="line">2558</span><br><span class="line">2559</span><br><span class="line">2560</span><br><span class="line">2561</span><br><span class="line">2562</span><br><span class="line">2563</span><br><span class="line">2564</span><br><span class="line">2565</span><br><span class="line">2566</span><br><span class="line">2567</span><br><span class="line">2568</span><br><span class="line">2569</span><br><span class="line">2570</span><br><span class="line">2571</span><br><span class="line">2572</span><br><span class="line">2573</span><br><span class="line">2574</span><br><span class="line">2575</span><br><span class="line">2576</span><br><span class="line">2577</span><br><span class="line">2578</span><br><span class="line">2579</span><br><span class="line">2580</span><br><span class="line">2581</span><br><span class="line">2582</span><br><span class="line">2583</span><br><span class="line">2584</span><br><span class="line">2585</span><br><span class="line">2586</span><br><span class="line">2587</span><br><span class="line">2588</span><br><span class="line">2589</span><br><span class="line">2590</span><br><span class="line">2591</span><br><span class="line">2592</span><br><span class="line">2593</span><br><span class="line">2594</span><br><span class="line">2595</span><br><span class="line">2596</span><br><span class="line">2597</span><br><span class="line">2598</span><br><span class="line">2599</span><br><span class="line">2600</span><br><span class="line">2601</span><br><span class="line">2602</span><br><span class="line">2603</span><br><span class="line">2604</span><br><span class="line">2605</span><br><span class="line">2606</span><br><span class="line">2607</span><br><span class="line">2608</span><br><span class="line">2609</span><br><span class="line">2610</span><br><span class="line">2611</span><br><span class="line">2612</span><br><span class="line">2613</span><br><span class="line">2614</span><br><span class="line">2615</span><br><span class="line">2616</span><br><span class="line">2617</span><br><span class="line">2618</span><br><span class="line">2619</span><br><span class="line">2620</span><br><span class="line">2621</span><br><span class="line">2622</span><br><span class="line">2623</span><br><span class="line">2624</span><br><span class="line">2625</span><br><span class="line">2626</span><br><span class="line">2627</span><br><span class="line">2628</span><br><span class="line">2629</span><br><span class="line">2630</span><br><span class="line">2631</span><br><span class="line">2632</span><br><span class="line">2633</span><br><span class="line">2634</span><br><span class="line">2635</span><br><span class="line">2636</span><br><span class="line">2637</span><br><span class="line">2638</span><br><span class="line">2639</span><br><span class="line">2640</span><br><span class="line">2641</span><br><span class="line">2642</span><br><span class="line">2643</span><br><span class="line">2644</span><br><span class="line">2645</span><br><span class="line">2646</span><br><span class="line">2647</span><br><span class="line">2648</span><br><span class="line">2649</span><br><span class="line">2650</span><br><span class="line">2651</span><br><span class="line">2652</span><br><span class="line">2653</span><br><span class="line">2654</span><br><span class="line">2655</span><br><span class="line">2656</span><br><span class="line">2657</span><br><span class="line">2658</span><br><span class="line">2659</span><br><span class="line">2660</span><br><span class="line">2661</span><br><span class="line">2662</span><br><span class="line">2663</span><br><span class="line">2664</span><br><span class="line">2665</span><br><span class="line">2666</span><br><span class="line">2667</span><br><span class="line">2668</span><br><span class="line">2669</span><br><span class="line">2670</span><br><span class="line">2671</span><br><span class="line">2672</span><br><span class="line">2673</span><br><span class="line">2674</span><br><span class="line">2675</span><br><span class="line">2676</span><br><span class="line">2677</span><br><span class="line">2678</span><br><span class="line">2679</span><br><span class="line">2680</span><br><span class="line">2681</span><br><span class="line">2682</span><br><span class="line">2683</span><br><span class="line">2684</span><br><span class="line">2685</span><br><span class="line">2686</span><br><span class="line">2687</span><br><span class="line">2688</span><br><span class="line">2689</span><br><span class="line">2690</span><br><span class="line">2691</span><br><span class="line">2692</span><br><span class="line">2693</span><br><span class="line">2694</span><br><span class="line">2695</span><br><span class="line">2696</span><br><span class="line">2697</span><br><span class="line">2698</span><br><span class="line">2699</span><br><span class="line">2700</span><br><span class="line">2701</span><br><span class="line">2702</span><br><span class="line">2703</span><br><span class="line">2704</span><br><span class="line">2705</span><br><span class="line">2706</span><br><span class="line">2707</span><br><span class="line">2708</span><br><span class="line">2709</span><br><span class="line">2710</span><br><span class="line">2711</span><br><span class="line">2712</span><br><span class="line">2713</span><br><span class="line">2714</span><br><span class="line">2715</span><br><span class="line">2716</span><br><span class="line">2717</span><br><span class="line">2718</span><br><span class="line">2719</span><br><span class="line">2720</span><br><span class="line">2721</span><br><span class="line">2722</span><br><span class="line">2723</span><br><span class="line">2724</span><br><span class="line">2725</span><br><span class="line">2726</span><br><span class="line">2727</span><br><span class="line">2728</span><br><span class="line">2729</span><br><span class="line">2730</span><br><span class="line">2731</span><br><span class="line">2732</span><br><span class="line">2733</span><br><span class="line">2734</span><br><span class="line">2735</span><br><span class="line">2736</span><br><span class="line">2737</span><br><span class="line">2738</span><br><span class="line">2739</span><br><span class="line">2740</span><br><span class="line">2741</span><br><span class="line">2742</span><br><span class="line">2743</span><br><span class="line">2744</span><br><span class="line">2745</span><br><span class="line">2746</span><br><span class="line">2747</span><br><span class="line">2748</span><br><span class="line">2749</span><br><span class="line">2750</span><br><span class="line">2751</span><br><span class="line">2752</span><br><span class="line">2753</span><br><span class="line">2754</span><br><span class="line">2755</span><br><span class="line">2756</span><br><span class="line">2757</span><br><span class="line">2758</span><br><span class="line">2759</span><br><span class="line">2760</span><br><span class="line">2761</span><br><span class="line">2762</span><br><span class="line">2763</span><br><span class="line">2764</span><br><span class="line">2765</span><br><span class="line">2766</span><br><span class="line">2767</span><br><span class="line">2768</span><br><span class="line">2769</span><br><span class="line">2770</span><br><span class="line">2771</span><br><span class="line">2772</span><br><span class="line">2773</span><br><span class="line">2774</span><br><span class="line">2775</span><br><span class="line">2776</span><br><span class="line">2777</span><br><span class="line">2778</span><br><span class="line">2779</span><br><span class="line">2780</span><br><span class="line">2781</span><br><span class="line">2782</span><br><span class="line">2783</span><br><span class="line">2784</span><br><span class="line">2785</span><br><span class="line">2786</span><br><span class="line">2787</span><br><span class="line">2788</span><br><span class="line">2789</span><br><span class="line">2790</span><br><span class="line">2791</span><br><span class="line">2792</span><br><span class="line">2793</span><br><span class="line">2794</span><br><span class="line">2795</span><br><span class="line">2796</span><br><span class="line">2797</span><br><span class="line">2798</span><br><span class="line">2799</span><br><span class="line">2800</span><br><span class="line">2801</span><br><span class="line">2802</span><br><span class="line">2803</span><br><span class="line">2804</span><br><span class="line">2805</span><br><span class="line">2806</span><br><span class="line">2807</span><br><span class="line">2808</span><br><span class="line">2809</span><br><span class="line">2810</span><br><span class="line">2811</span><br><span class="line">2812</span><br><span class="line">2813</span><br><span class="line">2814</span><br><span class="line">2815</span><br><span class="line">2816</span><br><span class="line">2817</span><br><span class="line">2818</span><br><span class="line">2819</span><br><span class="line">2820</span><br><span class="line">2821</span><br><span class="line">2822</span><br><span class="line">2823</span><br><span class="line">2824</span><br><span class="line">2825</span><br><span class="line">2826</span><br><span class="line">2827</span><br><span class="line">2828</span><br><span class="line">2829</span><br><span class="line">2830</span><br><span class="line">2831</span><br><span class="line">2832</span><br><span class="line">2833</span><br><span class="line">2834</span><br><span class="line">2835</span><br><span class="line">2836</span><br><span class="line">2837</span><br><span class="line">2838</span><br><span class="line">2839</span><br><span class="line">2840</span><br><span class="line">2841</span><br><span class="line">2842</span><br><span class="line">2843</span><br><span class="line">2844</span><br><span class="line">2845</span><br><span class="line">2846</span><br><span class="line">2847</span><br><span class="line">2848</span><br><span class="line">2849</span><br><span class="line">2850</span><br><span class="line">2851</span><br><span class="line">2852</span><br><span class="line">2853</span><br><span class="line">2854</span><br><span class="line">2855</span><br><span class="line">2856</span><br><span class="line">2857</span><br><span class="line">2858</span><br><span class="line">2859</span><br><span class="line">2860</span><br><span class="line">2861</span><br><span class="line">2862</span><br><span class="line">2863</span><br><span class="line">2864</span><br><span class="line">2865</span><br><span class="line">2866</span><br><span class="line">2867</span><br><span class="line">2868</span><br><span class="line">2869</span><br><span class="line">2870</span><br><span class="line">2871</span><br><span class="line">2872</span><br><span class="line">2873</span><br><span class="line">2874</span><br><span class="line">2875</span><br><span class="line">2876</span><br><span class="line">2877</span><br><span class="line">2878</span><br><span class="line">2879</span><br><span class="line">2880</span><br><span class="line">2881</span><br><span class="line">2882</span><br><span class="line">2883</span><br><span class="line">2884</span><br><span class="line">2885</span><br><span class="line">2886</span><br><span class="line">2887</span><br><span class="line">2888</span><br><span class="line">2889</span><br><span class="line">2890</span><br><span class="line">2891</span><br><span class="line">2892</span><br><span class="line">2893</span><br><span class="line">2894</span><br><span class="line">2895</span><br><span class="line">2896</span><br><span class="line">2897</span><br><span class="line">2898</span><br><span class="line">2899</span><br><span class="line">2900</span><br><span class="line">2901</span><br><span class="line">2902</span><br><span class="line">2903</span><br><span class="line">2904</span><br><span class="line">2905</span><br><span class="line">2906</span><br><span class="line">2907</span><br><span class="line">2908</span><br><span class="line">2909</span><br><span class="line">2910</span><br><span class="line">2911</span><br><span class="line">2912</span><br><span class="line">2913</span><br><span class="line">2914</span><br><span class="line">2915</span><br><span class="line">2916</span><br><span class="line">2917</span><br><span class="line">2918</span><br><span class="line">2919</span><br><span class="line">2920</span><br><span class="line">2921</span><br><span class="line">2922</span><br><span class="line">2923</span><br><span class="line">2924</span><br><span class="line">2925</span><br><span class="line">2926</span><br><span class="line">2927</span><br><span class="line">2928</span><br><span class="line">2929</span><br><span class="line">2930</span><br><span class="line">2931</span><br><span class="line">2932</span><br><span class="line">2933</span><br><span class="line">2934</span><br><span class="line">2935</span><br><span class="line">2936</span><br><span class="line">2937</span><br><span class="line">2938</span><br><span class="line">2939</span><br><span class="line">2940</span><br><span class="line">2941</span><br><span class="line">2942</span><br><span class="line">2943</span><br><span class="line">2944</span><br><span class="line">2945</span><br><span class="line">2946</span><br><span class="line">2947</span><br><span class="line">2948</span><br><span class="line">2949</span><br><span class="line">2950</span><br><span class="line">2951</span><br><span class="line">2952</span><br><span class="line">2953</span><br><span class="line">2954</span><br><span class="line">2955</span><br><span class="line">2956</span><br><span class="line">2957</span><br><span class="line">2958</span><br><span class="line">2959</span><br><span class="line">2960</span><br><span class="line">2961</span><br><span class="line">2962</span><br><span class="line">2963</span><br><span class="line">2964</span><br><span class="line">2965</span><br><span class="line">2966</span><br><span class="line">2967</span><br><span class="line">2968</span><br><span class="line">2969</span><br><span class="line">2970</span><br><span class="line">2971</span><br><span class="line">2972</span><br><span class="line">2973</span><br><span class="line">2974</span><br><span class="line">2975</span><br><span class="line">2976</span><br><span class="line">2977</span><br><span class="line">2978</span><br><span class="line">2979</span><br><span class="line">2980</span><br><span class="line">2981</span><br><span class="line">2982</span><br><span class="line">2983</span><br><span class="line">2984</span><br><span class="line">2985</span><br><span class="line">2986</span><br><span class="line">2987</span><br><span class="line">2988</span><br><span class="line">2989</span><br><span class="line">2990</span><br><span class="line">2991</span><br><span class="line">2992</span><br><span class="line">2993</span><br><span class="line">2994</span><br><span class="line">2995</span><br><span class="line">2996</span><br><span class="line">2997</span><br><span class="line">2998</span><br><span class="line">2999</span><br><span class="line">3000</span><br><span class="line">3001</span><br><span class="line">3002</span><br><span class="line">3003</span><br><span class="line">3004</span><br><span class="line">3005</span><br><span class="line">3006</span><br><span class="line">3007</span><br><span class="line">3008</span><br><span class="line">3009</span><br><span class="line">3010</span><br><span class="line">3011</span><br><span class="line">3012</span><br><span class="line">3013</span><br><span class="line">3014</span><br><span class="line">3015</span><br><span class="line">3016</span><br><span class="line">3017</span><br><span class="line">3018</span><br><span class="line">3019</span><br><span class="line">3020</span><br><span class="line">3021</span><br><span class="line">3022</span><br><span class="line">3023</span><br><span class="line">3024</span><br><span class="line">3025</span><br><span class="line">3026</span><br><span class="line">3027</span><br><span class="line">3028</span><br><span class="line">3029</span><br><span class="line">3030</span><br><span class="line">3031</span><br><span class="line">3032</span><br><span class="line">3033</span><br><span class="line">3034</span><br><span class="line">3035</span><br><span class="line">3036</span><br><span class="line">3037</span><br><span class="line">3038</span><br><span class="line">3039</span><br><span class="line">3040</span><br><span class="line">3041</span><br><span class="line">3042</span><br><span class="line">3043</span><br><span class="line">3044</span><br><span class="line">3045</span><br><span class="line">3046</span><br><span class="line">3047</span><br><span class="line">3048</span><br><span class="line">3049</span><br><span class="line">3050</span><br><span class="line">3051</span><br><span class="line">3052</span><br><span class="line">3053</span><br><span class="line">3054</span><br><span class="line">3055</span><br><span class="line">3056</span><br><span class="line">3057</span><br><span class="line">3058</span><br><span class="line">3059</span><br><span class="line">3060</span><br><span class="line">3061</span><br><span class="line">3062</span><br><span class="line">3063</span><br><span class="line">3064</span><br><span class="line">3065</span><br><span class="line">3066</span><br><span class="line">3067</span><br><span class="line">3068</span><br><span class="line">3069</span><br><span class="line">3070</span><br><span class="line">3071</span><br><span class="line">3072</span><br><span class="line">3073</span><br><span class="line">3074</span><br><span class="line">3075</span><br><span class="line">3076</span><br><span class="line">3077</span><br><span class="line">3078</span><br><span class="line">3079</span><br><span class="line">3080</span><br><span class="line">3081</span><br><span class="line">3082</span><br><span class="line">3083</span><br><span class="line">3084</span><br><span class="line">3085</span><br><span class="line">3086</span><br><span class="line">3087</span><br><span class="line">3088</span><br><span class="line">3089</span><br><span class="line">3090</span><br><span class="line">3091</span><br><span class="line">3092</span><br><span class="line">3093</span><br><span class="line">3094</span><br><span class="line">3095</span><br><span class="line">3096</span><br><span class="line">3097</span><br><span class="line">3098</span><br><span class="line">3099</span><br><span class="line">3100</span><br><span class="line">3101</span><br><span class="line">3102</span><br><span class="line">3103</span><br><span class="line">3104</span><br><span class="line">3105</span><br><span class="line">3106</span><br><span class="line">3107</span><br><span class="line">3108</span><br><span class="line">3109</span><br><span class="line">3110</span><br><span class="line">3111</span><br><span class="line">3112</span><br><span class="line">3113</span><br><span class="line">3114</span><br><span class="line">3115</span><br><span class="line">3116</span><br><span class="line">3117</span><br><span class="line">3118</span><br><span class="line">3119</span><br><span class="line">3120</span><br><span class="line">3121</span><br><span class="line">3122</span><br><span class="line">3123</span><br><span class="line">3124</span><br><span class="line">3125</span><br><span class="line">3126</span><br><span class="line">3127</span><br><span class="line">3128</span><br><span class="line">3129</span><br><span class="line">3130</span><br><span class="line">3131</span><br><span class="line">3132</span><br><span class="line">3133</span><br><span class="line">3134</span><br><span class="line">3135</span><br><span class="line">3136</span><br><span class="line">3137</span><br><span class="line">3138</span><br><span class="line">3139</span><br><span class="line">3140</span><br><span class="line">3141</span><br><span class="line">3142</span><br><span class="line">3143</span><br><span class="line">3144</span><br><span class="line">3145</span><br><span class="line">3146</span><br><span class="line">3147</span><br><span class="line">3148</span><br><span class="line">3149</span><br><span class="line">3150</span><br><span class="line">3151</span><br><span class="line">3152</span><br><span class="line">3153</span><br><span class="line">3154</span><br><span class="line">3155</span><br><span class="line">3156</span><br><span class="line">3157</span><br><span class="line">3158</span><br><span class="line">3159</span><br><span class="line">3160</span><br><span class="line">3161</span><br><span class="line">3162</span><br><span class="line">3163</span><br><span class="line">3164</span><br><span class="line">3165</span><br><span class="line">3166</span><br><span class="line">3167</span><br><span class="line">3168</span><br><span class="line">3169</span><br><span class="line">3170</span><br><span class="line">3171</span><br><span class="line">3172</span><br><span class="line">3173</span><br><span class="line">3174</span><br><span class="line">3175</span><br><span class="line">3176</span><br><span class="line">3177</span><br><span class="line">3178</span><br><span class="line">3179</span><br><span class="line">3180</span><br><span class="line">3181</span><br><span class="line">3182</span><br><span class="line">3183</span><br><span class="line">3184</span><br><span class="line">3185</span><br><span class="line">3186</span><br><span class="line">3187</span><br><span class="line">3188</span><br><span class="line">3189</span><br><span class="line">3190</span><br><span class="line">3191</span><br><span class="line">3192</span><br><span class="line">3193</span><br><span class="line">3194</span><br><span class="line">3195</span><br><span class="line">3196</span><br><span class="line">3197</span><br><span class="line">3198</span><br><span class="line">3199</span><br><span class="line">3200</span><br><span class="line">3201</span><br><span class="line">3202</span><br><span class="line">3203</span><br><span class="line">3204</span><br><span class="line">3205</span><br><span class="line">3206</span><br><span class="line">3207</span><br><span class="line">3208</span><br><span class="line">3209</span><br><span class="line">3210</span><br><span class="line">3211</span><br><span class="line">3212</span><br><span class="line">3213</span><br><span class="line">3214</span><br><span class="line">3215</span><br><span class="line">3216</span><br><span class="line">3217</span><br><span class="line">3218</span><br><span class="line">3219</span><br><span class="line">3220</span><br><span class="line">3221</span><br><span class="line">3222</span><br><span class="line">3223</span><br><span class="line">3224</span><br><span class="line">3225</span><br><span class="line">3226</span><br><span class="line">3227</span><br><span class="line">3228</span><br><span class="line">3229</span><br><span class="line">3230</span><br><span class="line">3231</span><br><span class="line">3232</span><br><span class="line">3233</span><br><span class="line">3234</span><br><span class="line">3235</span><br><span class="line">3236</span><br><span class="line">3237</span><br><span class="line">3238</span><br><span class="line">3239</span><br><span class="line">3240</span><br><span class="line">3241</span><br><span class="line">3242</span><br><span class="line">3243</span><br><span class="line">3244</span><br><span class="line">3245</span><br><span class="line">3246</span><br><span class="line">3247</span><br><span class="line">3248</span><br><span class="line">3249</span><br><span class="line">3250</span><br><span class="line">3251</span><br><span class="line">3252</span><br><span class="line">3253</span><br><span class="line">3254</span><br><span class="line">3255</span><br><span class="line">3256</span><br><span class="line">3257</span><br><span class="line">3258</span><br><span class="line">3259</span><br><span class="line">3260</span><br><span class="line">3261</span><br><span class="line">3262</span><br><span class="line">3263</span><br><span class="line">3264</span><br><span class="line">3265</span><br><span class="line">3266</span><br><span class="line">3267</span><br><span class="line">3268</span><br><span class="line">3269</span><br><span class="line">3270</span><br><span class="line">3271</span><br><span class="line">3272</span><br><span class="line">3273</span><br><span class="line">3274</span><br><span class="line">3275</span><br><span class="line">3276</span><br><span class="line">3277</span><br><span class="line">3278</span><br><span class="line">3279</span><br><span class="line">3280</span><br><span class="line">3281</span><br><span class="line">3282</span><br><span class="line">3283</span><br><span class="line">3284</span><br><span class="line">3285</span><br><span class="line">3286</span><br><span class="line">3287</span><br><span class="line">3288</span><br><span class="line">3289</span><br><span class="line">3290</span><br><span class="line">3291</span><br><span class="line">3292</span><br><span class="line">3293</span><br><span class="line">3294</span><br><span class="line">3295</span><br><span class="line">3296</span><br><span class="line">3297</span><br><span class="line">3298</span><br><span class="line">3299</span><br><span class="line">3300</span><br><span class="line">3301</span><br><span class="line">3302</span><br><span class="line">3303</span><br><span class="line">3304</span><br><span class="line">3305</span><br><span class="line">3306</span><br><span class="line">3307</span><br><span class="line">3308</span><br><span class="line">3309</span><br><span class="line">3310</span><br><span class="line">3311</span><br><span class="line">3312</span><br><span class="line">3313</span><br><span class="line">3314</span><br><span class="line">3315</span><br><span class="line">3316</span><br><span class="line">3317</span><br><span class="line">3318</span><br><span class="line">3319</span><br><span class="line">3320</span><br><span class="line">3321</span><br><span class="line">3322</span><br><span class="line">3323</span><br><span class="line">3324</span><br><span class="line">3325</span><br><span class="line">3326</span><br><span class="line">3327</span><br><span class="line">3328</span><br><span class="line">3329</span><br><span class="line">3330</span><br><span class="line">3331</span><br><span class="line">3332</span><br><span class="line">3333</span><br><span class="line">3334</span><br><span class="line">3335</span><br><span class="line">3336</span><br><span class="line">3337</span><br><span class="line">3338</span><br><span class="line">3339</span><br><span class="line">3340</span><br><span class="line">3341</span><br><span class="line">3342</span><br><span class="line">3343</span><br><span class="line">3344</span><br><span class="line">3345</span><br><span class="line">3346</span><br><span class="line">3347</span><br><span class="line">3348</span><br><span class="line">3349</span><br><span class="line">3350</span><br><span class="line">3351</span><br><span class="line">3352</span><br><span class="line">3353</span><br><span class="line">3354</span><br><span class="line">3355</span><br><span class="line">3356</span><br><span class="line">3357</span><br><span class="line">3358</span><br><span class="line">3359</span><br><span class="line">3360</span><br><span class="line">3361</span><br><span class="line">3362</span><br><span class="line">3363</span><br><span class="line">3364</span><br><span class="line">3365</span><br><span class="line">3366</span><br><span class="line">3367</span><br><span class="line">3368</span><br><span class="line">3369</span><br><span class="line">3370</span><br><span class="line">3371</span><br><span class="line">3372</span><br><span class="line">3373</span><br><span class="line">3374</span><br><span class="line">3375</span><br><span class="line">3376</span><br><span class="line">3377</span><br><span class="line">3378</span><br><span class="line">3379</span><br><span class="line">3380</span><br><span class="line">3381</span><br><span class="line">3382</span><br><span class="line">3383</span><br><span class="line">3384</span><br><span class="line">3385</span><br><span class="line">3386</span><br><span class="line">3387</span><br><span class="line">3388</span><br><span class="line">3389</span><br><span class="line">3390</span><br><span class="line">3391</span><br><span class="line">3392</span><br><span class="line">3393</span><br><span class="line">3394</span><br><span class="line">3395</span><br><span class="line">3396</span><br><span class="line">3397</span><br><span class="line">3398</span><br><span class="line">3399</span><br><span class="line">3400</span><br><span class="line">3401</span><br><span class="line">3402</span><br><span class="line">3403</span><br><span class="line">3404</span><br><span class="line">3405</span><br><span class="line">3406</span><br><span class="line">3407</span><br><span class="line">3408</span><br><span class="line">3409</span><br><span class="line">3410</span><br><span class="line">3411</span><br><span class="line">3412</span><br><span class="line">3413</span><br><span class="line">3414</span><br><span class="line">3415</span><br><span class="line">3416</span><br><span class="line">3417</span><br><span class="line">3418</span><br><span class="line">3419</span><br><span class="line">3420</span><br><span class="line">3421</span><br><span class="line">3422</span><br><span class="line">3423</span><br><span class="line">3424</span><br><span class="line">3425</span><br><span class="line">3426</span><br><span class="line">3427</span><br><span class="line">3428</span><br><span class="line">3429</span><br><span class="line">3430</span><br><span class="line">3431</span><br><span class="line">3432</span><br><span class="line">3433</span><br><span class="line">3434</span><br><span class="line">3435</span><br><span class="line">3436</span><br><span class="line">3437</span><br><span class="line">3438</span><br><span class="line">3439</span><br><span class="line">3440</span><br><span class="line">3441</span><br><span class="line">3442</span><br><span class="line">3443</span><br><span class="line">3444</span><br><span class="line">3445</span><br><span class="line">3446</span><br><span class="line">3447</span><br><span class="line">3448</span><br><span class="line">3449</span><br><span class="line">3450</span><br><span class="line">3451</span><br><span class="line">3452</span><br><span class="line">3453</span><br><span class="line">3454</span><br><span class="line">3455</span><br><span class="line">3456</span><br><span class="line">3457</span><br><span class="line">3458</span><br><span class="line">3459</span><br><span class="line">3460</span><br><span class="line">3461</span><br><span class="line">3462</span><br><span class="line">3463</span><br><span class="line">3464</span><br><span class="line">3465</span><br><span class="line">3466</span><br><span class="line">3467</span><br><span class="line">3468</span><br><span class="line">3469</span><br><span class="line">3470</span><br><span class="line">3471</span><br><span class="line">3472</span><br><span class="line">3473</span><br><span class="line">3474</span><br><span class="line">3475</span><br><span class="line">3476</span><br><span class="line">3477</span><br><span class="line">3478</span><br><span class="line">3479</span><br><span class="line">3480</span><br><span class="line">3481</span><br><span class="line">3482</span><br><span class="line">3483</span><br><span class="line">3484</span><br><span class="line">3485</span><br><span class="line">3486</span><br><span class="line">3487</span><br><span class="line">3488</span><br><span class="line">3489</span><br><span class="line">3490</span><br><span class="line">3491</span><br><span class="line">3492</span><br><span class="line">3493</span><br><span class="line">3494</span><br><span class="line">3495</span><br><span class="line">3496</span><br><span class="line">3497</span><br><span class="line">3498</span><br><span class="line">3499</span><br><span class="line">3500</span><br><span class="line">3501</span><br><span class="line">3502</span><br><span class="line">3503</span><br><span class="line">3504</span><br><span class="line">3505</span><br><span class="line">3506</span><br><span class="line">3507</span><br><span class="line">3508</span><br><span class="line">3509</span><br><span class="line">3510</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;8&#x2F;8 13:22</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">AddrCode &#x3D; [(110000, u&#39;北京市&#39;),</span><br><span class="line">(110100, u&#39;市辖区&#39;),</span><br><span class="line">(110101, u&#39;东城区&#39;),</span><br><span class="line">(110102, u&#39;西城区&#39;),</span><br><span class="line">(110103, u&#39;崇文区&#39;),</span><br><span class="line">(110104, u&#39;宣武区&#39;),</span><br><span class="line">(110105, u&#39;朝阳区&#39;),</span><br><span class="line">(110106, u&#39;丰台区&#39;),</span><br><span class="line">(110107, u&#39;石景山区&#39;),</span><br><span class="line">(110108, u&#39;海淀区&#39;),</span><br><span class="line">(110109, u&#39;门头沟区&#39;),</span><br><span class="line">(110111, u&#39;房山区&#39;),</span><br><span class="line">(110112, u&#39;通州区&#39;),</span><br><span class="line">(110113, u&#39;顺义区&#39;),</span><br><span class="line">(110114, u&#39;昌平区&#39;),</span><br><span class="line">(110115, u&#39;大兴区&#39;),</span><br><span class="line">(110116, u&#39;怀柔区&#39;),</span><br><span class="line">(110117, u&#39;平谷区&#39;),</span><br><span class="line">(110200, u&#39;县&#39;),</span><br><span class="line">(110228, u&#39;密云县&#39;),</span><br><span class="line">(110229, u&#39;延庆县&#39;),</span><br><span class="line">(120000, u&#39;天津市&#39;),</span><br><span class="line">(120100, u&#39;市辖区&#39;),</span><br><span class="line">(120101, u&#39;和平区&#39;),</span><br><span class="line">(120102, u&#39;河东区&#39;),</span><br><span class="line">(120103, u&#39;河西区&#39;),</span><br><span class="line">(120104, u&#39;南开区&#39;),</span><br><span class="line">(120105, u&#39;河北区&#39;),</span><br><span class="line">(120106, u&#39;红桥区&#39;),</span><br><span class="line">(120107, u&#39;塘沽区&#39;),</span><br><span class="line">(120108, u&#39;汉沽区&#39;),</span><br><span class="line">(120109, u&#39;大港区&#39;),</span><br><span class="line">(120110, u&#39;东丽区&#39;),</span><br><span class="line">(120111, u&#39;西青区&#39;),</span><br><span class="line">(120112, u&#39;津南区&#39;),</span><br><span class="line">(120113, u&#39;北辰区&#39;),</span><br><span class="line">(120114, u&#39;武清区&#39;),</span><br><span class="line">(120115, u&#39;宝坻区&#39;),</span><br><span class="line">(120200, u&#39;市辖县&#39;),</span><br><span class="line">(120221, u&#39;宁河县&#39;),</span><br><span class="line">(120223, u&#39;静海县&#39;),</span><br><span class="line">(120225, u&#39;蓟县&#39;),</span><br><span class="line">(130000, u&#39;河北省&#39;),</span><br><span class="line">(130100, u&#39;石家庄市&#39;),</span><br><span class="line">(130101, u&#39;市辖区&#39;),</span><br><span class="line">(130102, u&#39;长安区&#39;),</span><br><span class="line">(130103, u&#39;桥东区&#39;),</span><br><span class="line">(130104, u&#39;桥西区&#39;),</span><br><span class="line">(130105, u&#39;新华区&#39;),</span><br><span class="line">(130107, u&#39;井陉矿区&#39;),</span><br><span class="line">(130108, u&#39;裕华区&#39;),</span><br><span class="line">(130121, u&#39;井陉县&#39;),</span><br><span class="line">(130123, u&#39;正定县&#39;),</span><br><span class="line">(130124, u&#39;栾城县&#39;),</span><br><span class="line">(130125, u&#39;行唐县&#39;),</span><br><span class="line">(130126, u&#39;灵寿县&#39;),</span><br><span class="line">(130127, u&#39;高邑县&#39;),</span><br><span class="line">(130128, u&#39;深泽县&#39;),</span><br><span class="line">(130129, u&#39;赞皇县&#39;),</span><br><span class="line">(130130, u&#39;无极县&#39;),</span><br><span class="line">(130131, u&#39;平山县&#39;),</span><br><span class="line">(130132, u&#39;元氏县&#39;),</span><br><span class="line">(130133, u&#39;赵县&#39;),</span><br><span class="line">(130181, u&#39;辛集市&#39;),</span><br><span class="line">(130182, u&#39;藁城市&#39;),</span><br><span class="line">(130183, u&#39;晋州市&#39;),</span><br><span class="line">(130184, u&#39;新乐市&#39;),</span><br><span class="line">(130185, u&#39;鹿泉市&#39;),</span><br><span class="line">(130200, u&#39;唐山市&#39;),</span><br><span class="line">(130201, u&#39;市辖区&#39;),</span><br><span class="line">(130202, u&#39;路南区&#39;),</span><br><span class="line">(130203, u&#39;路北区&#39;),</span><br><span class="line">(130204, u&#39;古冶区&#39;),</span><br><span class="line">(130205, u&#39;开平区&#39;),</span><br><span class="line">(130207, u&#39;丰南区&#39;),</span><br><span class="line">(130208, u&#39;丰润区&#39;),</span><br><span class="line">(130223, u&#39;滦县&#39;),</span><br><span class="line">(130224, u&#39;滦南县&#39;),</span><br><span class="line">(130225, u&#39;乐亭县&#39;),</span><br><span class="line">(130227, u&#39;迁西县&#39;),</span><br><span class="line">(130229, u&#39;玉田县&#39;),</span><br><span class="line">(130230, u&#39;唐海县&#39;),</span><br><span class="line">(130281, u&#39;遵化市&#39;),</span><br><span class="line">(130283, u&#39;迁安市&#39;),</span><br><span class="line">(130300, u&#39;秦皇岛市&#39;),</span><br><span class="line">(130301, u&#39;市辖区&#39;),</span><br><span class="line">(130302, u&#39;海港区&#39;),</span><br><span class="line">(130303, u&#39;山海关区&#39;),</span><br><span class="line">(130304, u&#39;北戴河区&#39;),</span><br><span class="line">(130321, u&#39;青龙满族自治县&#39;),</span><br><span class="line">(130322, u&#39;昌黎县&#39;),</span><br><span class="line">(130323, u&#39;抚宁县&#39;),</span><br><span class="line">(130324, u&#39;卢龙县&#39;),</span><br><span class="line">(130400, u&#39;邯郸市&#39;),</span><br><span class="line">(130401, u&#39;市辖区&#39;),</span><br><span class="line">(130402, u&#39;邯山区&#39;),</span><br><span class="line">(130403, u&#39;丛台区&#39;),</span><br><span class="line">(130404, u&#39;复兴区&#39;),</span><br><span class="line">(130406, u&#39;峰峰矿区&#39;),</span><br><span class="line">(130421, u&#39;邯郸县&#39;),</span><br><span class="line">(130423, u&#39;临漳县&#39;),</span><br><span class="line">(130424, u&#39;成安县&#39;),</span><br><span class="line">(130425, u&#39;大名县&#39;),</span><br><span class="line">(130426, u&#39;涉县&#39;),</span><br><span class="line">(130427, u&#39;磁县&#39;),</span><br><span class="line">(130428, u&#39;肥乡县&#39;),</span><br><span class="line">(130429, u&#39;永年县&#39;),</span><br><span class="line">(130430, u&#39;邱县&#39;),</span><br><span class="line">(130431, u&#39;鸡泽县&#39;),</span><br><span class="line">(130432, u&#39;广平县&#39;),</span><br><span class="line">(130433, u&#39;馆陶县&#39;),</span><br><span class="line">(130434, u&#39;魏县&#39;),</span><br><span class="line">(130435, u&#39;曲周县&#39;),</span><br><span class="line">(130481, u&#39;武安市&#39;),</span><br><span class="line">(130500, u&#39;邢台市&#39;),</span><br><span class="line">(130501, u&#39;市辖区&#39;),</span><br><span class="line">(130502, u&#39;桥东区&#39;),</span><br><span class="line">(130503, u&#39;桥西区&#39;),</span><br><span class="line">(130521, u&#39;邢台县&#39;),</span><br><span class="line">(130522, u&#39;临城县&#39;),</span><br><span class="line">(130523, u&#39;内邱县&#39;),</span><br><span class="line">(130524, u&#39;柏乡县&#39;),</span><br><span class="line">(130525, u&#39;隆尧县&#39;),</span><br><span class="line">(130526, u&#39;任县&#39;),</span><br><span class="line">(130527, u&#39;南和县&#39;),</span><br><span class="line">(130528, u&#39;宁晋县&#39;),</span><br><span class="line">(130529, u&#39;巨鹿县&#39;),</span><br><span class="line">(130530, u&#39;新河县&#39;),</span><br><span class="line">(130531, u&#39;广宗县&#39;),</span><br><span class="line">(130532, u&#39;平乡县&#39;),</span><br><span class="line">(130533, u&#39;威县&#39;),</span><br><span class="line">(130534, u&#39;清河县&#39;),</span><br><span class="line">(130535, u&#39;临西县&#39;),</span><br><span class="line">(130581, u&#39;南宫市&#39;),</span><br><span class="line">(130582, u&#39;沙河市&#39;),</span><br><span class="line">(130600, u&#39;保定市&#39;),</span><br><span class="line">(130601, u&#39;市辖区&#39;),</span><br><span class="line">(130602, u&#39;新市区&#39;),</span><br><span class="line">(130603, u&#39;北市区&#39;),</span><br><span class="line">(130604, u&#39;南市区&#39;),</span><br><span class="line">(130621, u&#39;满城县&#39;),</span><br><span class="line">(130622, u&#39;清苑县&#39;),</span><br><span class="line">(130623, u&#39;涞水县&#39;),</span><br><span class="line">(130624, u&#39;阜平县&#39;),</span><br><span class="line">(130625, u&#39;徐水县&#39;),</span><br><span class="line">(130626, u&#39;定兴县&#39;),</span><br><span class="line">(130627, u&#39;唐县&#39;),</span><br><span class="line">(130628, u&#39;高阳县&#39;),</span><br><span class="line">(130629, u&#39;容城县&#39;),</span><br><span class="line">(130630, u&#39;涞源县&#39;),</span><br><span class="line">(130631, u&#39;望都县&#39;),</span><br><span class="line">(130632, u&#39;安新县&#39;),</span><br><span class="line">(130633, u&#39;易县&#39;),</span><br><span class="line">(130634, u&#39;曲阳县&#39;),</span><br><span class="line">(130635, u&#39;蠡县&#39;),</span><br><span class="line">(130636, u&#39;顺平县&#39;),</span><br><span class="line">(130637, u&#39;博野县&#39;),</span><br><span class="line">(130638, u&#39;雄县&#39;),</span><br><span class="line">(130681, u&#39;涿州市&#39;),</span><br><span class="line">(130682, u&#39;定州市&#39;),</span><br><span class="line">(130683, u&#39;安国市&#39;),</span><br><span class="line">(130684, u&#39;高碑店市&#39;),</span><br><span class="line">(130700, u&#39;张家口市&#39;),</span><br><span class="line">(130701, u&#39;市辖区&#39;),</span><br><span class="line">(130702, u&#39;桥东区&#39;),</span><br><span class="line">(130703, u&#39;桥西区&#39;),</span><br><span class="line">(130705, u&#39;宣化区&#39;),</span><br><span class="line">(130706, u&#39;下花园区&#39;),</span><br><span class="line">(130721, u&#39;宣化县&#39;),</span><br><span class="line">(130722, u&#39;张北县&#39;),</span><br><span class="line">(130723, u&#39;康保县&#39;),</span><br><span class="line">(130724, u&#39;沽源县&#39;),</span><br><span class="line">(130725, u&#39;尚义县&#39;),</span><br><span class="line">(130726, u&#39;蔚县&#39;),</span><br><span class="line">(130727, u&#39;阳原县&#39;),</span><br><span class="line">(130728, u&#39;怀安县&#39;),</span><br><span class="line">(130729, u&#39;万全县&#39;),</span><br><span class="line">(130730, u&#39;怀来县&#39;),</span><br><span class="line">(130731, u&#39;涿鹿县&#39;),</span><br><span class="line">(130732, u&#39;赤城县&#39;),</span><br><span class="line">(130733, u&#39;崇礼县&#39;),</span><br><span class="line">(130800, u&#39;承德市&#39;),</span><br><span class="line">(130801, u&#39;市辖区&#39;),</span><br><span class="line">(130802, u&#39;双桥区&#39;),</span><br><span class="line">(130803, u&#39;双滦区&#39;),</span><br><span class="line">(130804, u&#39;鹰手营子矿区&#39;),</span><br><span class="line">(130821, u&#39;承德县&#39;),</span><br><span class="line">(130822, u&#39;兴隆县&#39;),</span><br><span class="line">(130823, u&#39;平泉县&#39;),</span><br><span class="line">(130824, u&#39;滦平县&#39;),</span><br><span class="line">(130825, u&#39;隆化县&#39;),</span><br><span class="line">(130826, u&#39;丰宁满族自治县&#39;),</span><br><span class="line">(130827, u&#39;宽城满族自治县&#39;),</span><br><span class="line">(130828, u&#39;围场满族蒙古族自治县&#39;),</span><br><span class="line">(130900, u&#39;沧州市&#39;),</span><br><span class="line">(130901, u&#39;市辖区&#39;),</span><br><span class="line">(130902, u&#39;新华区&#39;),</span><br><span class="line">(130903, u&#39;运河区&#39;),</span><br><span class="line">(130921, u&#39;沧县&#39;),</span><br><span class="line">(130922, u&#39;青县&#39;),</span><br><span class="line">(130923, u&#39;东光县&#39;),</span><br><span class="line">(130924, u&#39;海兴县&#39;),</span><br><span class="line">(130925, u&#39;盐山县&#39;),</span><br><span class="line">(130926, u&#39;肃宁县&#39;),</span><br><span class="line">(130927, u&#39;南皮县&#39;),</span><br><span class="line">(130928, u&#39;吴桥县&#39;),</span><br><span class="line">(130929, u&#39;献县&#39;),</span><br><span class="line">(130930, u&#39;孟村回族自治县&#39;),</span><br><span class="line">(130981, u&#39;泊头市&#39;),</span><br><span class="line">(130982, u&#39;任邱市&#39;),</span><br><span class="line">(130983, u&#39;黄骅市&#39;),</span><br><span class="line">(130984, u&#39;河间市&#39;),</span><br><span class="line">(131000, u&#39;廊坊市&#39;),</span><br><span class="line">(131001, u&#39;市辖区&#39;),</span><br><span class="line">(131002, u&#39;安次区&#39;),</span><br><span class="line">(131003, u&#39;广阳区&#39;),</span><br><span class="line">(131022, u&#39;固安县&#39;),</span><br><span class="line">(131023, u&#39;永清县&#39;),</span><br><span class="line">(131024, u&#39;香河县&#39;),</span><br><span class="line">(131025, u&#39;大城县&#39;),</span><br><span class="line">(131026, u&#39;文安县&#39;),</span><br><span class="line">(131028, u&#39;大厂回族自治县&#39;),</span><br><span class="line">(131081, u&#39;霸州市&#39;),</span><br><span class="line">(131082, u&#39;三河市&#39;),</span><br><span class="line">(131100, u&#39;衡水市&#39;),</span><br><span class="line">(131101, u&#39;市辖区&#39;),</span><br><span class="line">(131102, u&#39;桃城区&#39;),</span><br><span class="line">(131121, u&#39;枣强县&#39;),</span><br><span class="line">(131122, u&#39;武邑县&#39;),</span><br><span class="line">(131123, u&#39;武强县&#39;),</span><br><span class="line">(131124, u&#39;饶阳县&#39;),</span><br><span class="line">(131125, u&#39;安平县&#39;),</span><br><span class="line">(131126, u&#39;故城县&#39;),</span><br><span class="line">(131127, u&#39;景县&#39;),</span><br><span class="line">(131128, u&#39;阜城县&#39;),</span><br><span class="line">(131181, u&#39;冀州市&#39;),</span><br><span class="line">(131182, u&#39;深州市&#39;),</span><br><span class="line">(140000, u&#39;山西&#39;),</span><br><span class="line">(140100, u&#39;太原市&#39;),</span><br><span class="line">(140101, u&#39;市辖区&#39;),</span><br><span class="line">(140105, u&#39;小店区(人口含高新经济区)&#39;),</span><br><span class="line">(140106, u&#39;迎泽区&#39;),</span><br><span class="line">(140107, u&#39;杏花岭区&#39;),</span><br><span class="line">(140108, u&#39;尖草坪区&#39;),</span><br><span class="line">(140109, u&#39;万柏林区&#39;),</span><br><span class="line">(140110, u&#39;晋源区&#39;),</span><br><span class="line">(140121, u&#39;清徐县&#39;),</span><br><span class="line">(140122, u&#39;阳曲县&#39;),</span><br><span class="line">(140123, u&#39;娄烦县&#39;),</span><br><span class="line">(140181, u&#39;古交市&#39;),</span><br><span class="line">(140200, u&#39;大同市&#39;),</span><br><span class="line">(140201, u&#39;市辖区&#39;),</span><br><span class="line">(140202, u&#39;大同市城区&#39;),</span><br><span class="line">(140203, u&#39;矿区&#39;),</span><br><span class="line">(140211, u&#39;南郊区&#39;),</span><br><span class="line">(140212, u&#39;新荣区&#39;),</span><br><span class="line">(140221, u&#39;阳高县&#39;),</span><br><span class="line">(140222, u&#39;天镇县&#39;),</span><br><span class="line">(140223, u&#39;广灵县&#39;),</span><br><span class="line">(140224, u&#39;灵丘县&#39;),</span><br><span class="line">(140225, u&#39;浑源县&#39;),</span><br><span class="line">(140226, u&#39;左云县&#39;),</span><br><span class="line">(140227, u&#39;大同县&#39;),</span><br><span class="line">(140300, u&#39;阳泉市&#39;),</span><br><span class="line">(140301, u&#39;市辖区&#39;),</span><br><span class="line">(140302, u&#39;城区&#39;),</span><br><span class="line">(140303, u&#39;矿区&#39;),</span><br><span class="line">(140311, u&#39;郊区&#39;),</span><br><span class="line">(140321, u&#39;平定县&#39;),</span><br><span class="line">(140322, u&#39;盂县&#39;),</span><br><span class="line">(140400, u&#39;长治市&#39;),</span><br><span class="line">(140401, u&#39;市辖区&#39;),</span><br><span class="line">(140402, u&#39;长治市城区&#39;),</span><br><span class="line">(140411, u&#39;长治市郊区&#39;),</span><br><span class="line">(140421, u&#39;长治县&#39;),</span><br><span class="line">(140423, u&#39;襄垣县&#39;),</span><br><span class="line">(140424, u&#39;屯留县&#39;),</span><br><span class="line">(140425, u&#39;平顺县&#39;),</span><br><span class="line">(140426, u&#39;黎城县&#39;),</span><br><span class="line">(140427, u&#39;壶关县&#39;),</span><br><span class="line">(140428, u&#39;长子县&#39;),</span><br><span class="line">(140429, u&#39;武乡县&#39;),</span><br><span class="line">(140430, u&#39;沁县&#39;),</span><br><span class="line">(140431, u&#39;沁源县&#39;),</span><br><span class="line">(140481, u&#39;潞城市&#39;),</span><br><span class="line">(140500, u&#39;晋城市&#39;),</span><br><span class="line">(140501, u&#39;市辖区&#39;),</span><br><span class="line">(140502, u&#39;晋城市城区&#39;),</span><br><span class="line">(140521, u&#39;沁水县&#39;),</span><br><span class="line">(140522, u&#39;阳城县&#39;),</span><br><span class="line">(140524, u&#39;陵川县&#39;),</span><br><span class="line">(140525, u&#39;泽州县&#39;),</span><br><span class="line">(140581, u&#39;高平市&#39;),</span><br><span class="line">(140600, u&#39;朔州市&#39;),</span><br><span class="line">(140601, u&#39;市辖区&#39;),</span><br><span class="line">(140602, u&#39;朔城区&#39;),</span><br><span class="line">(140603, u&#39;平鲁区&#39;),</span><br><span class="line">(140621, u&#39;山阴县&#39;),</span><br><span class="line">(140622, u&#39;应县&#39;),</span><br><span class="line">(140623, u&#39;右玉县&#39;),</span><br><span class="line">(140624, u&#39;怀仁县&#39;),</span><br><span class="line">(140700, u&#39;晋中市&#39;),</span><br><span class="line">(140701, u&#39;市辖区&#39;),</span><br><span class="line">(140702, u&#39;榆次区&#39;),</span><br><span class="line">(140721, u&#39;榆社县&#39;),</span><br><span class="line">(140722, u&#39;左权县&#39;),</span><br><span class="line">(140723, u&#39;和顺县&#39;),</span><br><span class="line">(140724, u&#39;昔阳县&#39;),</span><br><span class="line">(140725, u&#39;寿阳县&#39;),</span><br><span class="line">(140726, u&#39;太谷县&#39;),</span><br><span class="line">(140727, u&#39;祁县&#39;),</span><br><span class="line">(140728, u&#39;平遥县&#39;),</span><br><span class="line">(140729, u&#39;灵石县&#39;),</span><br><span class="line">(140781, u&#39;介休市&#39;),</span><br><span class="line">(140800, u&#39;运城市&#39;),</span><br><span class="line">(140801, u&#39;市辖区&#39;),</span><br><span class="line">(140802, u&#39;盐湖区&#39;),</span><br><span class="line">(140821, u&#39;临猗县&#39;),</span><br><span class="line">(140822, u&#39;万荣县&#39;),</span><br><span class="line">(140823, u&#39;闻喜县&#39;),</span><br><span class="line">(140824, u&#39;稷山县&#39;),</span><br><span class="line">(140825, u&#39;新绛县&#39;),</span><br><span class="line">(140826, u&#39;绛县&#39;),</span><br><span class="line">(140827, u&#39;垣曲县&#39;),</span><br><span class="line">(140828, u&#39;夏县&#39;),</span><br><span class="line">(140829, u&#39;平陆县&#39;),</span><br><span class="line">(140830, u&#39;芮城县&#39;),</span><br><span class="line">(140881, u&#39;永济市&#39;),</span><br><span class="line">(140882, u&#39;河津市&#39;),</span><br><span class="line">(140900, u&#39;忻州市&#39;),</span><br><span class="line">(140901, u&#39;市辖区&#39;),</span><br><span class="line">(140902, u&#39;忻府区&#39;),</span><br><span class="line">(140921, u&#39;定襄县&#39;),</span><br><span class="line">(140922, u&#39;五台县&#39;),</span><br><span class="line">(140923, u&#39;代县&#39;),</span><br><span class="line">(140924, u&#39;繁峙县&#39;),</span><br><span class="line">(140925, u&#39;宁武县&#39;),</span><br><span class="line">(140926, u&#39;静乐县&#39;),</span><br><span class="line">(140927, u&#39;神池县&#39;),</span><br><span class="line">(140928, u&#39;五寨县&#39;),</span><br><span class="line">(140929, u&#39;岢岚县&#39;),</span><br><span class="line">(140930, u&#39;河曲县&#39;),</span><br><span class="line">(140931, u&#39;保德县&#39;),</span><br><span class="line">(140932, u&#39;偏关县&#39;),</span><br><span class="line">(140981, u&#39;原平市&#39;),</span><br><span class="line">(141000, u&#39;临汾市&#39;),</span><br><span class="line">(141001, u&#39;市辖区&#39;),</span><br><span class="line">(141002, u&#39;尧都区&#39;),</span><br><span class="line">(141021, u&#39;曲沃县&#39;),</span><br><span class="line">(141022, u&#39;翼城县&#39;),</span><br><span class="line">(141023, u&#39;襄汾县&#39;),</span><br><span class="line">(141024, u&#39;洪洞县&#39;),</span><br><span class="line">(141025, u&#39;古县&#39;),</span><br><span class="line">(141026, u&#39;安泽县&#39;),</span><br><span class="line">(141027, u&#39;浮山县&#39;),</span><br><span class="line">(141028, u&#39;吉县&#39;),</span><br><span class="line">(141029, u&#39;乡宁县&#39;),</span><br><span class="line">(141030, u&#39;大宁县&#39;),</span><br><span class="line">(141031, u&#39;隰县&#39;),</span><br><span class="line">(141032, u&#39;永和县&#39;),</span><br><span class="line">(141033, u&#39;蒲县&#39;),</span><br><span class="line">(141034, u&#39;汾西县&#39;),</span><br><span class="line">(141081, u&#39;侯马市&#39;),</span><br><span class="line">(141082, u&#39;霍州市&#39;),</span><br><span class="line">(141100, u&#39;吕梁市&#39;),</span><br><span class="line">(141101, u&#39;市辖区&#39;),</span><br><span class="line">(141102, u&#39;离石区&#39;),</span><br><span class="line">(141121, u&#39;文水县&#39;),</span><br><span class="line">(141122, u&#39;交城县&#39;),</span><br><span class="line">(141123, u&#39;兴县&#39;),</span><br><span class="line">(141124, u&#39;临县&#39;),</span><br><span class="line">(141125, u&#39;柳林县&#39;),</span><br><span class="line">(141126, u&#39;石楼县&#39;),</span><br><span class="line">(141127, u&#39;岚县&#39;),</span><br><span class="line">(141128, u&#39;方山县&#39;),</span><br><span class="line">(141129, u&#39;中阳县&#39;),</span><br><span class="line">(141130, u&#39;交口县&#39;),</span><br><span class="line">(141181, u&#39;孝义市&#39;),</span><br><span class="line">(141182, u&#39;汾阳市&#39;),</span><br><span class="line">(150000, u&#39;内蒙古自治区&#39;),</span><br><span class="line">(150100, u&#39;呼和浩特市&#39;),</span><br><span class="line">(150101, u&#39;市辖区&#39;),</span><br><span class="line">(150102, u&#39;新城区&#39;),</span><br><span class="line">(150103, u&#39;回民区&#39;),</span><br><span class="line">(150104, u&#39;玉泉区&#39;),</span><br><span class="line">(150105, u&#39;赛罕区&#39;),</span><br><span class="line">(150121, u&#39;土左旗&#39;),</span><br><span class="line">(150122, u&#39;托克托县&#39;),</span><br><span class="line">(150123, u&#39;和林格尔县&#39;),</span><br><span class="line">(150124, u&#39;清水河县&#39;),</span><br><span class="line">(150125, u&#39;武川县&#39;),</span><br><span class="line">(150200, u&#39;包头市&#39;),</span><br><span class="line">(150201, u&#39;市辖区&#39;),</span><br><span class="line">(150202, u&#39;东河区&#39;),</span><br><span class="line">(150203, u&#39;昆都仑区&#39;),</span><br><span class="line">(150204, u&#39;青山区&#39;),</span><br><span class="line">(150205, u&#39;石拐区&#39;),</span><br><span class="line">(150206, u&#39;白云鄂博矿区&#39;),</span><br><span class="line">(150207, u&#39;九原区&#39;),</span><br><span class="line">(150221, u&#39;土默特右旗&#39;),</span><br><span class="line">(150222, u&#39;固阳县&#39;),</span><br><span class="line">(150223, u&#39;达茂联合旗&#39;),</span><br><span class="line">(150300, u&#39;乌海市&#39;),</span><br><span class="line">(150301, u&#39;乌海市辖区&#39;),</span><br><span class="line">(150302, u&#39;海勃湾区&#39;),</span><br><span class="line">(150303, u&#39;海南区&#39;),</span><br><span class="line">(150304, u&#39;乌达区&#39;),</span><br><span class="line">(150400, u&#39;赤峰市&#39;),</span><br><span class="line">(150401, u&#39;市辖区&#39;),</span><br><span class="line">(150402, u&#39;红山区&#39;),</span><br><span class="line">(150403, u&#39;元宝山区&#39;),</span><br><span class="line">(150404, u&#39;松山区&#39;),</span><br><span class="line">(150421, u&#39;阿鲁科尔沁旗&#39;),</span><br><span class="line">(150422, u&#39;巴林左旗&#39;),</span><br><span class="line">(150423, u&#39;巴林右旗&#39;),</span><br><span class="line">(150424, u&#39;林西县&#39;),</span><br><span class="line">(150425, u&#39;克什克腾旗&#39;),</span><br><span class="line">(150426, u&#39;翁牛特旗&#39;),</span><br><span class="line">(150428, u&#39;喀喇沁旗&#39;),</span><br><span class="line">(150429, u&#39;宁城县&#39;),</span><br><span class="line">(150430, u&#39;敖汉旗&#39;),</span><br><span class="line">(150500, u&#39;通辽市&#39;),</span><br><span class="line">(150501, u&#39;市辖区&#39;),</span><br><span class="line">(150502, u&#39;科尔沁区&#39;),</span><br><span class="line">(150521, u&#39;科尔沁左翼中旗&#39;),</span><br><span class="line">(150522, u&#39;科左后旗&#39;),</span><br><span class="line">(150523, u&#39;开鲁县&#39;),</span><br><span class="line">(150524, u&#39;库伦旗&#39;),</span><br><span class="line">(150525, u&#39;奈曼旗&#39;),</span><br><span class="line">(150526, u&#39;扎鲁特旗&#39;),</span><br><span class="line">(150581, u&#39;霍林郭勒市&#39;),</span><br><span class="line">(150600, u&#39;鄂尔多斯市&#39;),</span><br><span class="line">(150602, u&#39;东胜区&#39;),</span><br><span class="line">(150621, u&#39;达拉特旗&#39;),</span><br><span class="line">(150622, u&#39;准格尔旗&#39;),</span><br><span class="line">(150623, u&#39;鄂托克前旗&#39;),</span><br><span class="line">(150624, u&#39;鄂托克旗&#39;),</span><br><span class="line">(150625, u&#39;杭锦旗&#39;),</span><br><span class="line">(150626, u&#39;乌审旗&#39;),</span><br><span class="line">(150627, u&#39;伊金霍洛旗&#39;),</span><br><span class="line">(150700, u&#39;呼伦贝尔市&#39;),</span><br><span class="line">(150701, u&#39;市辖区&#39;),</span><br><span class="line">(150702, u&#39;海拉尔区&#39;),</span><br><span class="line">(150721, u&#39;阿荣旗&#39;),</span><br><span class="line">(150722, u&#39;莫力达瓦达斡尔族自治旗&#39;),</span><br><span class="line">(150723, u&#39;鄂伦春自治旗&#39;),</span><br><span class="line">(150724, u&#39;鄂温克族自治旗&#39;),</span><br><span class="line">(150725, u&#39;陈巴尔虎旗镇&#39;),</span><br><span class="line">(150726, u&#39;新巴尔虎左旗&#39;),</span><br><span class="line">(150727, u&#39;新巴尔虎右旗&#39;),</span><br><span class="line">(150781, u&#39;满洲里市&#39;),</span><br><span class="line">(150782, u&#39;牙克石市&#39;),</span><br><span class="line">(150783, u&#39;扎兰屯市&#39;),</span><br><span class="line">(150784, u&#39;额尔古纳市&#39;),</span><br><span class="line">(150785, u&#39;根河市&#39;),</span><br><span class="line">(150800, u&#39;巴彦淖尔市&#39;),</span><br><span class="line">(150801, u&#39;市辖区&#39;),</span><br><span class="line">(150802, u&#39;临河区&#39;),</span><br><span class="line">(150821, u&#39;五原县&#39;),</span><br><span class="line">(150822, u&#39;磴口县&#39;),</span><br><span class="line">(150823, u&#39;乌拉特前旗&#39;),</span><br><span class="line">(150824, u&#39;乌拉特中旗&#39;),</span><br><span class="line">(150825, u&#39;乌拉特后旗&#39;),</span><br><span class="line">(150826, u&#39;杭锦后旗&#39;),</span><br><span class="line">(150900, u&#39;乌兰察布市&#39;),</span><br><span class="line">(150901, u&#39;市辖区&#39;),</span><br><span class="line">(150902, u&#39;集宁区&#39;),</span><br><span class="line">(150921, u&#39;卓资县&#39;),</span><br><span class="line">(150922, u&#39;化德县&#39;),</span><br><span class="line">(150923, u&#39;商都县&#39;),</span><br><span class="line">(150924, u&#39;兴和县&#39;),</span><br><span class="line">(150925, u&#39;凉城县&#39;),</span><br><span class="line">(150926, u&#39;察哈尔右翼前旗&#39;),</span><br><span class="line">(150927, u&#39;察右中旗&#39;),</span><br><span class="line">(150928, u&#39;察哈尔右翼后旗&#39;),</span><br><span class="line">(150929, u&#39;四子王旗&#39;),</span><br><span class="line">(150981, u&#39;丰镇市&#39;),</span><br><span class="line">(152200, u&#39;兴安盟&#39;),</span><br><span class="line">(152201, u&#39;乌兰浩特市&#39;),</span><br><span class="line">(152202, u&#39;阿尔山市&#39;),</span><br><span class="line">(152221, u&#39;科右前旗&#39;),</span><br><span class="line">(152222, u&#39;科右中旗&#39;),</span><br><span class="line">(152223, u&#39;扎赉特旗&#39;),</span><br><span class="line">(152224, u&#39;突泉县&#39;),</span><br><span class="line">(152500, u&#39;锡林郭勒盟&#39;),</span><br><span class="line">(152501, u&#39;二连浩特市&#39;),</span><br><span class="line">(152502, u&#39;锡林浩特市&#39;),</span><br><span class="line">(152522, u&#39;阿巴嘎旗&#39;),</span><br><span class="line">(152523, u&#39;苏尼特左旗&#39;),</span><br><span class="line">(152524, u&#39;苏尼特右旗&#39;),</span><br><span class="line">(152525, u&#39;东乌珠穆沁旗&#39;),</span><br><span class="line">(152526, u&#39;西乌珠穆沁旗&#39;),</span><br><span class="line">(152527, u&#39;太仆寺旗&#39;),</span><br><span class="line">(152528, u&#39;镶黄旗&#39;),</span><br><span class="line">(152529, u&#39;正镶白旗&#39;),</span><br><span class="line">(152530, u&#39;正蓝旗&#39;),</span><br><span class="line">(152531, u&#39;多伦县&#39;),</span><br><span class="line">(152900, u&#39;阿拉善盟&#39;),</span><br><span class="line">(152921, u&#39;阿拉善左旗&#39;),</span><br><span class="line">(152922, u&#39;阿拉善右旗&#39;),</span><br><span class="line">(152923, u&#39;额济纳旗&#39;),</span><br><span class="line">(210000, u&#39;辽宁省&#39;),</span><br><span class="line">(210100, u&#39;沈阳市&#39;),</span><br><span class="line">(210101, u&#39;市辖区&#39;),</span><br><span class="line">(210102, u&#39;和平区&#39;),</span><br><span class="line">(210103, u&#39;沈河区&#39;),</span><br><span class="line">(210104, u&#39;大东区&#39;),</span><br><span class="line">(210105, u&#39;皇姑区&#39;),</span><br><span class="line">(210106, u&#39;铁西区&#39;),</span><br><span class="line">(210111, u&#39;苏家屯区&#39;),</span><br><span class="line">(210112, u&#39;东陵区&#39;),</span><br><span class="line">(210113, u&#39;新城子区&#39;),</span><br><span class="line">(210114, u&#39;于洪区&#39;),</span><br><span class="line">(210122, u&#39;辽中县&#39;),</span><br><span class="line">(210123, u&#39;康平县&#39;),</span><br><span class="line">(210124, u&#39;法库县&#39;),</span><br><span class="line">(210181, u&#39;新民市&#39;),</span><br><span class="line">(210200, u&#39;大连市&#39;),</span><br><span class="line">(210201, u&#39;市辖区&#39;),</span><br><span class="line">(210202, u&#39;中山区&#39;),</span><br><span class="line">(210203, u&#39;西岗区&#39;),</span><br><span class="line">(210204, u&#39;沙河口区&#39;),</span><br><span class="line">(210211, u&#39;甘井子区&#39;),</span><br><span class="line">(210212, u&#39;旅顺口区&#39;),</span><br><span class="line">(210213, u&#39;金州区&#39;),</span><br><span class="line">(210224, u&#39;长海县&#39;),</span><br><span class="line">(210281, u&#39;瓦房店市&#39;),</span><br><span class="line">(210282, u&#39;普兰店市&#39;),</span><br><span class="line">(210283, u&#39;庄河市&#39;),</span><br><span class="line">(210300, u&#39;鞍山市&#39;),</span><br><span class="line">(210301, u&#39;市辖区&#39;),</span><br><span class="line">(210302, u&#39;铁东区&#39;),</span><br><span class="line">(210303, u&#39;铁西区&#39;),</span><br><span class="line">(210304, u&#39;立山区&#39;),</span><br><span class="line">(210311, u&#39;千山区&#39;),</span><br><span class="line">(210321, u&#39;台安县&#39;),</span><br><span class="line">(210323, u&#39;岫岩县&#39;),</span><br><span class="line">(210381, u&#39;海城市&#39;),</span><br><span class="line">(210400, u&#39;抚顺市&#39;),</span><br><span class="line">(210401, u&#39;市辖区&#39;),</span><br><span class="line">(210402, u&#39;新抚区&#39;),</span><br><span class="line">(210403, u&#39;东洲区&#39;),</span><br><span class="line">(210404, u&#39;望花区&#39;),</span><br><span class="line">(210411, u&#39;顺城区&#39;),</span><br><span class="line">(210421, u&#39;抚顺县&#39;),</span><br><span class="line">(210422, u&#39;新宾满族自治县&#39;),</span><br><span class="line">(210423, u&#39;清原满族自治县&#39;),</span><br><span class="line">(210500, u&#39;本溪市&#39;),</span><br><span class="line">(210501, u&#39;市辖区&#39;),</span><br><span class="line">(210502, u&#39;平山区&#39;),</span><br><span class="line">(210503, u&#39;溪湖区&#39;),</span><br><span class="line">(210504, u&#39;明山区&#39;),</span><br><span class="line">(210505, u&#39;南芬区&#39;),</span><br><span class="line">(210521, u&#39;本溪满族自治县&#39;),</span><br><span class="line">(210522, u&#39;桓仁满族自治县&#39;),</span><br><span class="line">(210600, u&#39;丹东市&#39;),</span><br><span class="line">(210601, u&#39;市辖区&#39;),</span><br><span class="line">(210602, u&#39;元宝区&#39;),</span><br><span class="line">(210603, u&#39;振兴区&#39;),</span><br><span class="line">(210604, u&#39;振安区&#39;),</span><br><span class="line">(210624, u&#39;宽甸满族自治县&#39;),</span><br><span class="line">(210681, u&#39;东港市&#39;),</span><br><span class="line">(210682, u&#39;凤城市&#39;),</span><br><span class="line">(210700, u&#39;锦州市&#39;),</span><br><span class="line">(210701, u&#39;市辖区&#39;),</span><br><span class="line">(210702, u&#39;古塔区&#39;),</span><br><span class="line">(210703, u&#39;凌河区&#39;),</span><br><span class="line">(210711, u&#39;太和区&#39;),</span><br><span class="line">(210726, u&#39;黑山县&#39;),</span><br><span class="line">(210727, u&#39;义县&#39;),</span><br><span class="line">(210781, u&#39;凌海市&#39;),</span><br><span class="line">(210782, u&#39;北镇市&#39;),</span><br><span class="line">(210800, u&#39;营口市&#39;),</span><br><span class="line">(210801, u&#39;市辖区&#39;),</span><br><span class="line">(210802, u&#39;站前区&#39;),</span><br><span class="line">(210803, u&#39;西市区&#39;),</span><br><span class="line">(210804, u&#39;鲅鱼圈区&#39;),</span><br><span class="line">(210811, u&#39;老边区&#39;),</span><br><span class="line">(210881, u&#39;盖州市&#39;),</span><br><span class="line">(210882, u&#39;大石桥市&#39;),</span><br><span class="line">(210900, u&#39;阜新市&#39;),</span><br><span class="line">(210901, u&#39;市辖区&#39;),</span><br><span class="line">(210902, u&#39;海州区&#39;),</span><br><span class="line">(210903, u&#39;新邱区&#39;),</span><br><span class="line">(210904, u&#39;太平区&#39;),</span><br><span class="line">(210905, u&#39;清河门区&#39;),</span><br><span class="line">(210911, u&#39;细河区&#39;),</span><br><span class="line">(210921, u&#39;阜新蒙古族自治县&#39;),</span><br><span class="line">(210922, u&#39;彰武县&#39;),</span><br><span class="line">(211000, u&#39;辽阳市&#39;),</span><br><span class="line">(211001, u&#39;市辖区&#39;),</span><br><span class="line">(211002, u&#39;白塔区&#39;),</span><br><span class="line">(211003, u&#39;文圣区&#39;),</span><br><span class="line">(211004, u&#39;宏伟区&#39;),</span><br><span class="line">(211005, u&#39;弓长岭区&#39;),</span><br><span class="line">(211011, u&#39;太子河区&#39;),</span><br><span class="line">(211021, u&#39;辽阳县&#39;),</span><br><span class="line">(211081, u&#39;灯塔市&#39;),</span><br><span class="line">(211100, u&#39;盘锦市&#39;),</span><br><span class="line">(211101, u&#39;市辖区&#39;),</span><br><span class="line">(211102, u&#39;双台子区&#39;),</span><br><span class="line">(211103, u&#39;兴隆台区&#39;),</span><br><span class="line">(211121, u&#39;大洼县&#39;),</span><br><span class="line">(211122, u&#39;盘山县&#39;),</span><br><span class="line">(211200, u&#39;铁岭市&#39;),</span><br><span class="line">(211201, u&#39;市辖区&#39;),</span><br><span class="line">(211202, u&#39;银州区&#39;),</span><br><span class="line">(211204, u&#39;清河区&#39;),</span><br><span class="line">(211221, u&#39;铁岭县&#39;),</span><br><span class="line">(211223, u&#39;西丰县&#39;),</span><br><span class="line">(211224, u&#39;昌图县&#39;),</span><br><span class="line">(211281, u&#39;调兵山市&#39;),</span><br><span class="line">(211282, u&#39;开原市&#39;),</span><br><span class="line">(211300, u&#39;朝阳市&#39;),</span><br><span class="line">(211301, u&#39;市辖区&#39;),</span><br><span class="line">(211302, u&#39;双塔区&#39;),</span><br><span class="line">(211303, u&#39;龙城区&#39;),</span><br><span class="line">(211321, u&#39;朝阳县&#39;),</span><br><span class="line">(211322, u&#39;建平县&#39;),</span><br><span class="line">(211324, u&#39;喀喇沁左翼蒙古族自治县&#39;),</span><br><span class="line">(211381, u&#39;北票市&#39;),</span><br><span class="line">(211382, u&#39;凌源市&#39;),</span><br><span class="line">(211400, u&#39;葫芦岛市&#39;),</span><br><span class="line">(211401, u&#39;市辖区&#39;),</span><br><span class="line">(211402, u&#39;连山区&#39;),</span><br><span class="line">(211403, u&#39;龙港区&#39;),</span><br><span class="line">(211404, u&#39;南票区&#39;),</span><br><span class="line">(211421, u&#39;绥中县&#39;),</span><br><span class="line">(211422, u&#39;建昌县&#39;),</span><br><span class="line">(211481, u&#39;兴城市&#39;),</span><br><span class="line">(220000, u&#39;吉林省&#39;),</span><br><span class="line">(220100, u&#39;长春市&#39;),</span><br><span class="line">(220101, u&#39;长春市辖区&#39;),</span><br><span class="line">(220102, u&#39;南关区&#39;),</span><br><span class="line">(220103, u&#39;宽城区&#39;),</span><br><span class="line">(220104, u&#39;朝阳区&#39;),</span><br><span class="line">(220105, u&#39;二道区&#39;),</span><br><span class="line">(220106, u&#39;绿园区&#39;),</span><br><span class="line">(220112, u&#39;双阳区&#39;),</span><br><span class="line">(220122, u&#39;农安县&#39;),</span><br><span class="line">(220181, u&#39;九台市&#39;),</span><br><span class="line">(220182, u&#39;榆树市&#39;),</span><br><span class="line">(220183, u&#39;德惠市&#39;),</span><br><span class="line">(220200, u&#39;吉林市&#39;),</span><br><span class="line">(220201, u&#39;吉林市辖区&#39;),</span><br><span class="line">(220202, u&#39;昌邑区&#39;),</span><br><span class="line">(220203, u&#39;龙潭区&#39;),</span><br><span class="line">(220204, u&#39;船营区&#39;),</span><br><span class="line">(220211, u&#39;丰满区&#39;),</span><br><span class="line">(220221, u&#39;永吉县&#39;),</span><br><span class="line">(220281, u&#39;蛟河市&#39;),</span><br><span class="line">(220282, u&#39;桦甸市&#39;),</span><br><span class="line">(220283, u&#39;舒兰市&#39;),</span><br><span class="line">(220284, u&#39;磐石市&#39;),</span><br><span class="line">(220300, u&#39;四平市&#39;),</span><br><span class="line">(220301, u&#39;四平市辖区&#39;),</span><br><span class="line">(220302, u&#39;铁西区&#39;),</span><br><span class="line">(220303, u&#39;铁东区&#39;),</span><br><span class="line">(220322, u&#39;梨树县&#39;),</span><br><span class="line">(220323, u&#39;伊通满族自治县&#39;),</span><br><span class="line">(220381, u&#39;公主岭市&#39;),</span><br><span class="line">(220382, u&#39;双辽市&#39;),</span><br><span class="line">(220400, u&#39;辽源市&#39;),</span><br><span class="line">(220401, u&#39;辽源市辖区&#39;),</span><br><span class="line">(220402, u&#39;龙山区&#39;),</span><br><span class="line">(220403, u&#39;西安区&#39;),</span><br><span class="line">(220421, u&#39;东丰县&#39;),</span><br><span class="line">(220422, u&#39;东辽县&#39;),</span><br><span class="line">(220500, u&#39;通化市&#39;),</span><br><span class="line">(220501, u&#39;通化市辖区&#39;),</span><br><span class="line">(220502, u&#39;东昌区&#39;),</span><br><span class="line">(220503, u&#39;二道江区&#39;),</span><br><span class="line">(220521, u&#39;通化县&#39;),</span><br><span class="line">(220523, u&#39;辉南县&#39;),</span><br><span class="line">(220524, u&#39;柳河县&#39;),</span><br><span class="line">(220581, u&#39;梅河口市&#39;),</span><br><span class="line">(220582, u&#39;集安市&#39;),</span><br><span class="line">(220600, u&#39;白山市&#39;),</span><br><span class="line">(220601, u&#39;白山市辖区&#39;),</span><br><span class="line">(220602, u&#39;八道江区&#39;),</span><br><span class="line">(220604, u&#39;江源区&#39;),</span><br><span class="line">(220621, u&#39;抚松县&#39;),</span><br><span class="line">(220622, u&#39;靖宇县&#39;),</span><br><span class="line">(220623, u&#39;长白朝鲜族自治县&#39;),</span><br><span class="line">(220681, u&#39;临江市&#39;),</span><br><span class="line">(220700, u&#39;松原市&#39;),</span><br><span class="line">(220701, u&#39;松原市辖区&#39;),</span><br><span class="line">(220702, u&#39;宁江区&#39;),</span><br><span class="line">(220721, u&#39;前郭尔罗斯蒙古族自治县&#39;),</span><br><span class="line">(220722, u&#39;长岭县&#39;),</span><br><span class="line">(220723, u&#39;乾安县&#39;),</span><br><span class="line">(220724, u&#39;扶余县&#39;),</span><br><span class="line">(220800, u&#39;白城市&#39;),</span><br><span class="line">(220801, u&#39;白城市辖区&#39;),</span><br><span class="line">(220802, u&#39;洮北区&#39;),</span><br><span class="line">(220821, u&#39;镇赉县&#39;),</span><br><span class="line">(220822, u&#39;通榆县&#39;),</span><br><span class="line">(220881, u&#39;洮南市&#39;),</span><br><span class="line">(220882, u&#39;大安市&#39;),</span><br><span class="line">(222400, u&#39;延边朝鲜族自治州&#39;),</span><br><span class="line">(222401, u&#39;延吉市&#39;),</span><br><span class="line">(222402, u&#39;图们市&#39;),</span><br><span class="line">(222403, u&#39;敦化市&#39;),</span><br><span class="line">(222404, u&#39;珲春市&#39;),</span><br><span class="line">(222405, u&#39;龙井市&#39;),</span><br><span class="line">(222406, u&#39;和龙市&#39;),</span><br><span class="line">(222424, u&#39;汪清县&#39;),</span><br><span class="line">(222426, u&#39;安图县&#39;),</span><br><span class="line">(230000, u&#39;黑龙江省&#39;),</span><br><span class="line">(230100, u&#39;哈尔滨市&#39;),</span><br><span class="line">(230101, u&#39;市辖区&#39;),</span><br><span class="line">(230102, u&#39;道里区&#39;),</span><br><span class="line">(230103, u&#39;南岗区&#39;),</span><br><span class="line">(230104, u&#39;道外区&#39;),</span><br><span class="line">(230108, u&#39;平房区&#39;),</span><br><span class="line">(230109, u&#39;松北区&#39;),</span><br><span class="line">(230110, u&#39;香坊区&#39;),</span><br><span class="line">(230111, u&#39;呼兰区&#39;),</span><br><span class="line">(230112, u&#39;阿城区&#39;),</span><br><span class="line">(230123, u&#39;依兰县&#39;),</span><br><span class="line">(230124, u&#39;方正县&#39;),</span><br><span class="line">(230125, u&#39;宾县&#39;),</span><br><span class="line">(230126, u&#39;巴彦县&#39;),</span><br><span class="line">(230127, u&#39;木兰县&#39;),</span><br><span class="line">(230128, u&#39;通河县&#39;),</span><br><span class="line">(230129, u&#39;延寿县&#39;),</span><br><span class="line">(230182, u&#39;双城市&#39;),</span><br><span class="line">(230183, u&#39;尚志市&#39;),</span><br><span class="line">(230184, u&#39;五常市&#39;),</span><br><span class="line">(230200, u&#39;齐齐哈尔市&#39;),</span><br><span class="line">(230201, u&#39;市辖区&#39;),</span><br><span class="line">(230202, u&#39;龙沙区&#39;),</span><br><span class="line">(230203, u&#39;建华区&#39;),</span><br><span class="line">(230204, u&#39;铁锋区&#39;),</span><br><span class="line">(230205, u&#39;昂昂溪区&#39;),</span><br><span class="line">(230206, u&#39;富拉尔基区&#39;),</span><br><span class="line">(230207, u&#39;碾子山区&#39;),</span><br><span class="line">(230208, u&#39;梅里斯达斡尔族区&#39;),</span><br><span class="line">(230221, u&#39;龙江县&#39;),</span><br><span class="line">(230223, u&#39;依安县&#39;),</span><br><span class="line">(230224, u&#39;泰来县&#39;),</span><br><span class="line">(230225, u&#39;甘南县&#39;),</span><br><span class="line">(230227, u&#39;富裕县&#39;),</span><br><span class="line">(230229, u&#39;克山县&#39;),</span><br><span class="line">(230230, u&#39;克东县&#39;),</span><br><span class="line">(230231, u&#39;拜泉县&#39;),</span><br><span class="line">(230281, u&#39;讷河市&#39;),</span><br><span class="line">(230300, u&#39;鸡西市&#39;),</span><br><span class="line">(230301, u&#39;市辖区&#39;),</span><br><span class="line">(230302, u&#39;鸡冠区&#39;),</span><br><span class="line">(230303, u&#39;恒山区&#39;),</span><br><span class="line">(230304, u&#39;滴道区&#39;),</span><br><span class="line">(230305, u&#39;梨树区&#39;),</span><br><span class="line">(230306, u&#39;城子河区&#39;),</span><br><span class="line">(230307, u&#39;麻山区&#39;),</span><br><span class="line">(230321, u&#39;鸡东县&#39;),</span><br><span class="line">(230381, u&#39;虎林市&#39;),</span><br><span class="line">(230382, u&#39;密山市&#39;),</span><br><span class="line">(230400, u&#39;鹤岗市&#39;),</span><br><span class="line">(230401, u&#39;市辖区&#39;),</span><br><span class="line">(230402, u&#39;向阳区&#39;),</span><br><span class="line">(230403, u&#39;工农区&#39;),</span><br><span class="line">(230404, u&#39;南山区&#39;),</span><br><span class="line">(230405, u&#39;兴安区&#39;),</span><br><span class="line">(230406, u&#39;东山区&#39;),</span><br><span class="line">(230407, u&#39;兴山区&#39;),</span><br><span class="line">(230421, u&#39;萝北县&#39;),</span><br><span class="line">(230422, u&#39;绥滨县&#39;),</span><br><span class="line">(230500, u&#39;双鸭山市&#39;),</span><br><span class="line">(230501, u&#39;市辖区&#39;),</span><br><span class="line">(230502, u&#39;尖山区&#39;),</span><br><span class="line">(230503, u&#39;岭东区&#39;),</span><br><span class="line">(230505, u&#39;四方台区&#39;),</span><br><span class="line">(230506, u&#39;宝山区&#39;),</span><br><span class="line">(230521, u&#39;集贤县&#39;),</span><br><span class="line">(230522, u&#39;友谊县&#39;),</span><br><span class="line">(230523, u&#39;宝清县&#39;),</span><br><span class="line">(230524, u&#39;饶河县&#39;),</span><br><span class="line">(230600, u&#39;大庆市&#39;),</span><br><span class="line">(230601, u&#39;市辖区&#39;),</span><br><span class="line">(230602, u&#39;萨尔图区&#39;),</span><br><span class="line">(230603, u&#39;龙凤区&#39;),</span><br><span class="line">(230604, u&#39;让胡路区&#39;),</span><br><span class="line">(230605, u&#39;红岗区&#39;),</span><br><span class="line">(230606, u&#39;大同区&#39;),</span><br><span class="line">(230621, u&#39;肇州县&#39;),</span><br><span class="line">(230622, u&#39;肇源县&#39;),</span><br><span class="line">(230623, u&#39;林甸县&#39;),</span><br><span class="line">(230624, u&#39;杜尔伯特县&#39;),</span><br><span class="line">(230700, u&#39;伊春市&#39;),</span><br><span class="line">(230701, u&#39;市辖区&#39;),</span><br><span class="line">(230702, u&#39;伊春区&#39;),</span><br><span class="line">(230703, u&#39;南岔区&#39;),</span><br><span class="line">(230704, u&#39;友好区&#39;),</span><br><span class="line">(230705, u&#39;西林区&#39;),</span><br><span class="line">(230706, u&#39;翠峦区&#39;),</span><br><span class="line">(230707, u&#39;新青区&#39;),</span><br><span class="line">(230708, u&#39;美溪区&#39;),</span><br><span class="line">(230709, u&#39;金山屯区&#39;),</span><br><span class="line">(230710, u&#39;五营区&#39;),</span><br><span class="line">(230711, u&#39;乌马河区&#39;),</span><br><span class="line">(230712, u&#39;汤旺河区&#39;),</span><br><span class="line">(230713, u&#39;带岭区&#39;),</span><br><span class="line">(230714, u&#39;乌伊岭区&#39;),</span><br><span class="line">(230715, u&#39;红星区&#39;),</span><br><span class="line">(230716, u&#39;上甘岭区&#39;),</span><br><span class="line">(230722, u&#39;嘉荫县&#39;),</span><br><span class="line">(230781, u&#39;铁力市&#39;),</span><br><span class="line">(230800, u&#39;佳木斯市&#39;),</span><br><span class="line">(230801, u&#39;市辖区&#39;),</span><br><span class="line">(230803, u&#39;向阳区&#39;),</span><br><span class="line">(230804, u&#39;前进区&#39;),</span><br><span class="line">(230805, u&#39;东风区&#39;),</span><br><span class="line">(230811, u&#39;郊区&#39;),</span><br><span class="line">(230822, u&#39;桦南县&#39;),</span><br><span class="line">(230826, u&#39;桦川县&#39;),</span><br><span class="line">(230828, u&#39;汤原县&#39;),</span><br><span class="line">(230833, u&#39;抚远县&#39;),</span><br><span class="line">(230881, u&#39;同江市&#39;),</span><br><span class="line">(230882, u&#39;富锦市&#39;),</span><br><span class="line">(230900, u&#39;七台河市&#39;),</span><br><span class="line">(230901, u&#39;市辖区&#39;),</span><br><span class="line">(230902, u&#39;新兴区&#39;),</span><br><span class="line">(230903, u&#39;桃山区&#39;),</span><br><span class="line">(230904, u&#39;茄子河区&#39;),</span><br><span class="line">(230921, u&#39;勃利县&#39;),</span><br><span class="line">(231000, u&#39;牡丹江市&#39;),</span><br><span class="line">(231001, u&#39;市辖区&#39;),</span><br><span class="line">(231002, u&#39;东安区&#39;),</span><br><span class="line">(231003, u&#39;阳明区&#39;),</span><br><span class="line">(231004, u&#39;爱民区&#39;),</span><br><span class="line">(231005, u&#39;西安区&#39;),</span><br><span class="line">(231024, u&#39;东宁县&#39;),</span><br><span class="line">(231025, u&#39;林口县&#39;),</span><br><span class="line">(231081, u&#39;绥芬河市&#39;),</span><br><span class="line">(231083, u&#39;海林市&#39;),</span><br><span class="line">(231084, u&#39;宁安市&#39;),</span><br><span class="line">(231085, u&#39;穆棱市&#39;),</span><br><span class="line">(231100, u&#39;黑河市&#39;),</span><br><span class="line">(231101, u&#39;市辖区&#39;),</span><br><span class="line">(231102, u&#39;爱辉区&#39;),</span><br><span class="line">(231121, u&#39;嫩江县&#39;),</span><br><span class="line">(231123, u&#39;逊克县&#39;),</span><br><span class="line">(231124, u&#39;孙吴县&#39;),</span><br><span class="line">(231181, u&#39;北安市&#39;),</span><br><span class="line">(231182, u&#39;五大连池市&#39;),</span><br><span class="line">(231200, u&#39;绥化市&#39;),</span><br><span class="line">(231201, u&#39;市辖区&#39;),</span><br><span class="line">(231202, u&#39;北林区&#39;),</span><br><span class="line">(231221, u&#39;望奎县&#39;),</span><br><span class="line">(231222, u&#39;兰西县&#39;),</span><br><span class="line">(231223, u&#39;青冈县&#39;),</span><br><span class="line">(231224, u&#39;庆安县&#39;),</span><br><span class="line">(231225, u&#39;明水县&#39;),</span><br><span class="line">(231226, u&#39;绥棱县&#39;),</span><br><span class="line">(231281, u&#39;安达市&#39;),</span><br><span class="line">(231282, u&#39;肇东市&#39;),</span><br><span class="line">(231283, u&#39;海伦市&#39;),</span><br><span class="line">(232700, u&#39;大兴安岭地区&#39;),</span><br><span class="line">(232701, u&#39;加格达奇区&#39;),</span><br><span class="line">(232702, u&#39;松岭区&#39;),</span><br><span class="line">(232703, u&#39;新林区&#39;),</span><br><span class="line">(232704, u&#39;呼中区&#39;),</span><br><span class="line">(232721, u&#39;呼玛县&#39;),</span><br><span class="line">(232722, u&#39;塔河县&#39;),</span><br><span class="line">(232723, u&#39;漠河县&#39;),</span><br><span class="line">(310000, u&#39;上海市&#39;),</span><br><span class="line">(310100, u&#39;市辖区&#39;),</span><br><span class="line">(310101, u&#39;黄浦区&#39;),</span><br><span class="line">(310103, u&#39;卢湾区&#39;),</span><br><span class="line">(310104, u&#39;徐汇区&#39;),</span><br><span class="line">(310105, u&#39;长宁区&#39;),</span><br><span class="line">(310106, u&#39;静安区&#39;),</span><br><span class="line">(310107, u&#39;普陀区&#39;),</span><br><span class="line">(310108, u&#39;闸北区&#39;),</span><br><span class="line">(310109, u&#39;虹口区&#39;),</span><br><span class="line">(310110, u&#39;杨浦区&#39;),</span><br><span class="line">(310112, u&#39;闵行区&#39;),</span><br><span class="line">(310113, u&#39;宝山区&#39;),</span><br><span class="line">(310114, u&#39;嘉定区&#39;),</span><br><span class="line">(310115, u&#39;浦东新区&#39;),</span><br><span class="line">(310116, u&#39;金山区&#39;),</span><br><span class="line">(310117, u&#39;松江区&#39;),</span><br><span class="line">(310118, u&#39;青浦区&#39;),</span><br><span class="line">(310119, u&#39;南汇区&#39;),</span><br><span class="line">(310120, u&#39;奉贤区&#39;),</span><br><span class="line">(310200, u&#39;县&#39;),</span><br><span class="line">(310230, u&#39;崇明县&#39;),</span><br><span class="line">(320000, u&#39;江苏省&#39;),</span><br><span class="line">(320100, u&#39;南京市&#39;),</span><br><span class="line">(320101, u&#39;市辖区&#39;),</span><br><span class="line">(320102, u&#39;玄武区&#39;),</span><br><span class="line">(320103, u&#39;白下区&#39;),</span><br><span class="line">(320104, u&#39;秦淮区&#39;),</span><br><span class="line">(320105, u&#39;建邺区&#39;),</span><br><span class="line">(320106, u&#39;鼓楼区&#39;),</span><br><span class="line">(320107, u&#39;下关区&#39;),</span><br><span class="line">(320111, u&#39;浦口区&#39;),</span><br><span class="line">(320113, u&#39;栖霞区&#39;),</span><br><span class="line">(320114, u&#39;雨花台区&#39;),</span><br><span class="line">(320115, u&#39;江宁区&#39;),</span><br><span class="line">(320116, u&#39;六合区&#39;),</span><br><span class="line">(320124, u&#39;溧水县&#39;),</span><br><span class="line">(320125, u&#39;高淳县&#39;),</span><br><span class="line">(320200, u&#39;无锡市&#39;),</span><br><span class="line">(320201, u&#39;市辖区&#39;),</span><br><span class="line">(320202, u&#39;崇安区&#39;),</span><br><span class="line">(320203, u&#39;南长区&#39;),</span><br><span class="line">(320204, u&#39;北塘区&#39;),</span><br><span class="line">(320205, u&#39;锡山区&#39;),</span><br><span class="line">(320206, u&#39;惠山区&#39;),</span><br><span class="line">(320211, u&#39;滨湖区&#39;),</span><br><span class="line">(320281, u&#39;江阴市&#39;),</span><br><span class="line">(320282, u&#39;宜兴市&#39;),</span><br><span class="line">(320300, u&#39;徐州市&#39;),</span><br><span class="line">(320301, u&#39;市辖区&#39;),</span><br><span class="line">(320302, u&#39;鼓楼区&#39;),</span><br><span class="line">(320303, u&#39;云龙区&#39;),</span><br><span class="line">(320304, u&#39;九里区&#39;),</span><br><span class="line">(320305, u&#39;贾汪区&#39;),</span><br><span class="line">(320311, u&#39;泉山区&#39;),</span><br><span class="line">(320321, u&#39;丰县&#39;),</span><br><span class="line">(320322, u&#39;沛县&#39;),</span><br><span class="line">(320323, u&#39;铜山县&#39;),</span><br><span class="line">(320324, u&#39;睢宁县&#39;),</span><br><span class="line">(320381, u&#39;新沂市&#39;),</span><br><span class="line">(320382, u&#39;邳州市&#39;),</span><br><span class="line">(320400, u&#39;常州市&#39;),</span><br><span class="line">(320401, u&#39;常州市区&#39;),</span><br><span class="line">(320402, u&#39;天宁区&#39;),</span><br><span class="line">(320404, u&#39;钟楼区&#39;),</span><br><span class="line">(320405, u&#39;戚墅堰区&#39;),</span><br><span class="line">(320411, u&#39;新北区&#39;),</span><br><span class="line">(320412, u&#39;武进区&#39;),</span><br><span class="line">(320481, u&#39;溧阳市&#39;),</span><br><span class="line">(320482, u&#39;金坛市&#39;),</span><br><span class="line">(320500, u&#39;苏州市&#39;),</span><br><span class="line">(320501, u&#39;市辖区&#39;),</span><br><span class="line">(320502, u&#39;沧浪区&#39;),</span><br><span class="line">(320503, u&#39;平江区&#39;),</span><br><span class="line">(320504, u&#39;金阊区&#39;),</span><br><span class="line">(320505, u&#39;苏州高新区虎丘区&#39;),</span><br><span class="line">(320506, u&#39;吴中区&#39;),</span><br><span class="line">(320507, u&#39;相城区&#39;),</span><br><span class="line">(320581, u&#39;常熟市&#39;),</span><br><span class="line">(320582, u&#39;张家港市&#39;),</span><br><span class="line">(320583, u&#39;昆山市&#39;),</span><br><span class="line">(320584, u&#39;吴江市&#39;),</span><br><span class="line">(320585, u&#39;太仓市&#39;),</span><br><span class="line">(320600, u&#39;南通市&#39;),</span><br><span class="line">(320601, u&#39;市辖区&#39;),</span><br><span class="line">(320602, u&#39;崇川区&#39;),</span><br><span class="line">(320611, u&#39;港闸区&#39;),</span><br><span class="line">(320621, u&#39;海安县&#39;),</span><br><span class="line">(320623, u&#39;如东&#39;),</span><br><span class="line">(320681, u&#39;启东市&#39;),</span><br><span class="line">(320682, u&#39;如皋市&#39;),</span><br><span class="line">(320683, u&#39;通州市&#39;),</span><br><span class="line">(320684, u&#39;海门市&#39;),</span><br><span class="line">(320700, u&#39;连云港市&#39;),</span><br><span class="line">(320701, u&#39;市辖区&#39;),</span><br><span class="line">(320703, u&#39;连云区&#39;),</span><br><span class="line">(320705, u&#39;新浦区&#39;),</span><br><span class="line">(320706, u&#39;海州区&#39;),</span><br><span class="line">(320721, u&#39;赣榆县&#39;),</span><br><span class="line">(320722, u&#39;东海县&#39;),</span><br><span class="line">(320723, u&#39;灌云县&#39;),</span><br><span class="line">(320724, u&#39;灌南县&#39;),</span><br><span class="line">(320800, u&#39;淮安市&#39;),</span><br><span class="line">(320801, u&#39;市辖区&#39;),</span><br><span class="line">(320802, u&#39;清河区&#39;),</span><br><span class="line">(320803, u&#39;楚州区&#39;),</span><br><span class="line">(320804, u&#39;淮阴区&#39;),</span><br><span class="line">(320811, u&#39;清浦区&#39;),</span><br><span class="line">(320826, u&#39;涟水县&#39;),</span><br><span class="line">(320829, u&#39;洪泽县&#39;),</span><br><span class="line">(320830, u&#39;盱眙县&#39;),</span><br><span class="line">(320831, u&#39;金湖县&#39;),</span><br><span class="line">(320900, u&#39;盐城市&#39;),</span><br><span class="line">(320901, u&#39;市辖区&#39;),</span><br><span class="line">(320902, u&#39;亭湖区&#39;),</span><br><span class="line">(320903, u&#39;盐都区&#39;),</span><br><span class="line">(320921, u&#39;响水县&#39;),</span><br><span class="line">(320922, u&#39;滨海县&#39;),</span><br><span class="line">(320923, u&#39;阜宁县&#39;),</span><br><span class="line">(320924, u&#39;射阳县&#39;),</span><br><span class="line">(320925, u&#39;建湖县&#39;),</span><br><span class="line">(320981, u&#39;东台市&#39;),</span><br><span class="line">(320982, u&#39;大丰市&#39;),</span><br><span class="line">(321000, u&#39;扬州市&#39;),</span><br><span class="line">(321001, u&#39;市辖区&#39;),</span><br><span class="line">(321002, u&#39;广陵区&#39;),</span><br><span class="line">(321003, u&#39;邗江区&#39;),</span><br><span class="line">(321011, u&#39;维扬区&#39;),</span><br><span class="line">(321023, u&#39;宝应县&#39;),</span><br><span class="line">(321081, u&#39;仪征市&#39;),</span><br><span class="line">(321084, u&#39;高邮市&#39;),</span><br><span class="line">(321088, u&#39;江都市&#39;),</span><br><span class="line">(321100, u&#39;镇江市&#39;),</span><br><span class="line">(321101, u&#39;市区&#39;),</span><br><span class="line">(321102, u&#39;京口区&#39;),</span><br><span class="line">(321111, u&#39;润州区&#39;),</span><br><span class="line">(321112, u&#39;丹徒区&#39;),</span><br><span class="line">(321181, u&#39;丹阳市&#39;),</span><br><span class="line">(321182, u&#39;扬中市&#39;),</span><br><span class="line">(321183, u&#39;句容市&#39;),</span><br><span class="line">(321200, u&#39;泰州市&#39;),</span><br><span class="line">(321201, u&#39;市辖区&#39;),</span><br><span class="line">(321202, u&#39;海陵区&#39;),</span><br><span class="line">(321203, u&#39;高港区&#39;),</span><br><span class="line">(321281, u&#39;兴化市&#39;),</span><br><span class="line">(321282, u&#39;靖江市&#39;),</span><br><span class="line">(321283, u&#39;泰兴市&#39;),</span><br><span class="line">(321284, u&#39;姜堰市&#39;),</span><br><span class="line">(321300, u&#39;宿迁市&#39;),</span><br><span class="line">(321301, u&#39;市辖区&#39;),</span><br><span class="line">(321302, u&#39;宿城区&#39;),</span><br><span class="line">(321311, u&#39;宿豫区&#39;),</span><br><span class="line">(321322, u&#39;沭阳县&#39;),</span><br><span class="line">(321323, u&#39;泗阳县&#39;),</span><br><span class="line">(321324, u&#39;泗洪县&#39;),</span><br><span class="line">(330000, u&#39;浙江省&#39;),</span><br><span class="line">(330100, u&#39;杭州市&#39;),</span><br><span class="line">(330101, u&#39;市辖区&#39;),</span><br><span class="line">(330102, u&#39;上城区&#39;),</span><br><span class="line">(330103, u&#39;下城区&#39;),</span><br><span class="line">(330104, u&#39;江干区&#39;),</span><br><span class="line">(330105, u&#39;拱墅区&#39;),</span><br><span class="line">(330106, u&#39;西湖区&#39;),</span><br><span class="line">(330108, u&#39;滨江区&#39;),</span><br><span class="line">(330109, u&#39;萧山区&#39;),</span><br><span class="line">(330110, u&#39;余杭区&#39;),</span><br><span class="line">(330122, u&#39;桐庐县&#39;),</span><br><span class="line">(330127, u&#39;淳安县&#39;),</span><br><span class="line">(330182, u&#39;建德市&#39;),</span><br><span class="line">(330183, u&#39;富阳市&#39;),</span><br><span class="line">(330185, u&#39;临安市&#39;),</span><br><span class="line">(330200, u&#39;宁波市&#39;),</span><br><span class="line">(330201, u&#39;市辖区&#39;),</span><br><span class="line">(330203, u&#39;海曙区&#39;),</span><br><span class="line">(330204, u&#39;江东区&#39;),</span><br><span class="line">(330205, u&#39;江北区&#39;),</span><br><span class="line">(330206, u&#39;北仑区&#39;),</span><br><span class="line">(330211, u&#39;镇海区&#39;),</span><br><span class="line">(330212, u&#39;鄞州区&#39;),</span><br><span class="line">(330225, u&#39;象山县&#39;),</span><br><span class="line">(330226, u&#39;宁海县&#39;),</span><br><span class="line">(330281, u&#39;余姚市&#39;),</span><br><span class="line">(330282, u&#39;慈溪市&#39;),</span><br><span class="line">(330283, u&#39;奉化市&#39;),</span><br><span class="line">(330300, u&#39;温州市&#39;),</span><br><span class="line">(330301, u&#39;市辖区&#39;),</span><br><span class="line">(330302, u&#39;鹿城区&#39;),</span><br><span class="line">(330303, u&#39;龙湾区&#39;),</span><br><span class="line">(330304, u&#39;瓯海区&#39;),</span><br><span class="line">(330322, u&#39;洞头县&#39;),</span><br><span class="line">(330324, u&#39;永嘉县&#39;),</span><br><span class="line">(330326, u&#39;平阳县&#39;),</span><br><span class="line">(330327, u&#39;苍南县&#39;),</span><br><span class="line">(330328, u&#39;文成县&#39;),</span><br><span class="line">(330329, u&#39;泰顺县&#39;),</span><br><span class="line">(330381, u&#39;瑞安市&#39;),</span><br><span class="line">(330382, u&#39;乐清市&#39;),</span><br><span class="line">(330400, u&#39;嘉兴市&#39;),</span><br><span class="line">(330401, u&#39;市辖区&#39;),</span><br><span class="line">(330402, u&#39;南湖区&#39;),</span><br><span class="line">(330411, u&#39;秀洲区&#39;),</span><br><span class="line">(330421, u&#39;嘉善县&#39;),</span><br><span class="line">(330424, u&#39;海盐县&#39;),</span><br><span class="line">(330481, u&#39;海宁市&#39;),</span><br><span class="line">(330482, u&#39;平湖市&#39;),</span><br><span class="line">(330483, u&#39;桐乡市&#39;),</span><br><span class="line">(330500, u&#39;湖州市&#39;),</span><br><span class="line">(330501, u&#39;市辖区&#39;),</span><br><span class="line">(330502, u&#39;吴兴区&#39;),</span><br><span class="line">(330503, u&#39;南浔区&#39;),</span><br><span class="line">(330521, u&#39;德清县&#39;),</span><br><span class="line">(330522, u&#39;长兴县&#39;),</span><br><span class="line">(330523, u&#39;安吉县&#39;),</span><br><span class="line">(330600, u&#39;绍兴市&#39;),</span><br><span class="line">(330601, u&#39;市辖区&#39;),</span><br><span class="line">(330602, u&#39;越城区&#39;),</span><br><span class="line">(330621, u&#39;绍兴县&#39;),</span><br><span class="line">(330624, u&#39;新昌县&#39;),</span><br><span class="line">(330681, u&#39;诸暨市&#39;),</span><br><span class="line">(330682, u&#39;上虞市&#39;),</span><br><span class="line">(330683, u&#39;嵊州市&#39;),</span><br><span class="line">(330700, u&#39;金华市&#39;),</span><br><span class="line">(330701, u&#39;市辖区&#39;),</span><br><span class="line">(330702, u&#39;婺城区&#39;),</span><br><span class="line">(330703, u&#39;金东区&#39;),</span><br><span class="line">(330723, u&#39;武义县&#39;),</span><br><span class="line">(330726, u&#39;浦江县&#39;),</span><br><span class="line">(330727, u&#39;磐安县&#39;),</span><br><span class="line">(330781, u&#39;兰溪市&#39;),</span><br><span class="line">(330782, u&#39;义乌市&#39;),</span><br><span class="line">(330783, u&#39;东阳市&#39;),</span><br><span class="line">(330784, u&#39;永康市&#39;),</span><br><span class="line">(330800, u&#39;衢州市&#39;),</span><br><span class="line">(330801, u&#39;市辖区&#39;),</span><br><span class="line">(330802, u&#39;柯城区&#39;),</span><br><span class="line">(330803, u&#39;衢江区&#39;),</span><br><span class="line">(330822, u&#39;常山县&#39;),</span><br><span class="line">(330824, u&#39;开化县&#39;),</span><br><span class="line">(330825, u&#39;龙游县&#39;),</span><br><span class="line">(330881, u&#39;江山市&#39;),</span><br><span class="line">(330900, u&#39;舟山市&#39;),</span><br><span class="line">(330901, u&#39;市辖区&#39;),</span><br><span class="line">(330902, u&#39;定海区&#39;),</span><br><span class="line">(330903, u&#39;普陀区&#39;),</span><br><span class="line">(330921, u&#39;岱山县&#39;),</span><br><span class="line">(330922, u&#39;嵊泗县&#39;),</span><br><span class="line">(331000, u&#39;台州市&#39;),</span><br><span class="line">(331001, u&#39;市辖区&#39;),</span><br><span class="line">(331002, u&#39;椒江区&#39;),</span><br><span class="line">(331003, u&#39;黄岩区&#39;),</span><br><span class="line">(331004, u&#39;路桥区&#39;),</span><br><span class="line">(331021, u&#39;玉环县&#39;),</span><br><span class="line">(331022, u&#39;三门县&#39;),</span><br><span class="line">(331023, u&#39;天台县&#39;),</span><br><span class="line">(331024, u&#39;仙居县&#39;),</span><br><span class="line">(331081, u&#39;温岭市&#39;),</span><br><span class="line">(331082, u&#39;临海市&#39;),</span><br><span class="line">(331100, u&#39;丽水市&#39;),</span><br><span class="line">(331101, u&#39;市辖区&#39;),</span><br><span class="line">(331102, u&#39;莲都区&#39;),</span><br><span class="line">(331121, u&#39;青田县&#39;),</span><br><span class="line">(331122, u&#39;缙云县&#39;),</span><br><span class="line">(331123, u&#39;遂昌县&#39;),</span><br><span class="line">(331124, u&#39;松阳县&#39;),</span><br><span class="line">(331125, u&#39;云和县&#39;),</span><br><span class="line">(331126, u&#39;庆元县&#39;),</span><br><span class="line">(331127, u&#39;景宁畲族自治县&#39;),</span><br><span class="line">(331181, u&#39;龙泉市&#39;),</span><br><span class="line">(340000, u&#39;安徽省&#39;),</span><br><span class="line">(340100, u&#39;合肥市&#39;),</span><br><span class="line">(340101, u&#39;市辖区&#39;),</span><br><span class="line">(340102, u&#39;瑶海区&#39;),</span><br><span class="line">(340103, u&#39;庐阳区&#39;),</span><br><span class="line">(340104, u&#39;蜀山区&#39;),</span><br><span class="line">(340111, u&#39;包河区&#39;),</span><br><span class="line">(340121, u&#39;长丰县&#39;),</span><br><span class="line">(340122, u&#39;肥东县&#39;),</span><br><span class="line">(340123, u&#39;肥西县&#39;),</span><br><span class="line">(340200, u&#39;芜湖市&#39;),</span><br><span class="line">(340201, u&#39;市辖区&#39;),</span><br><span class="line">(340202, u&#39;镜湖区&#39;),</span><br><span class="line">(340203, u&#39;弋江区&#39;),</span><br><span class="line">(340207, u&#39;鸠江区&#39;),</span><br><span class="line">(340208, u&#39;三山区&#39;),</span><br><span class="line">(340221, u&#39;芜湖县&#39;),</span><br><span class="line">(340222, u&#39;繁昌县&#39;),</span><br><span class="line">(340223, u&#39;南陵县&#39;),</span><br><span class="line">(340300, u&#39;蚌埠市&#39;),</span><br><span class="line">(340301, u&#39;市辖区&#39;),</span><br><span class="line">(340302, u&#39;龙子湖区&#39;),</span><br><span class="line">(340303, u&#39;蚌山区&#39;),</span><br><span class="line">(340304, u&#39;禹会区&#39;),</span><br><span class="line">(340311, u&#39;淮上区&#39;),</span><br><span class="line">(340321, u&#39;怀远县&#39;),</span><br><span class="line">(340322, u&#39;五河县&#39;),</span><br><span class="line">(340323, u&#39;固镇县&#39;),</span><br><span class="line">(340400, u&#39;淮南市&#39;),</span><br><span class="line">(340401, u&#39;市辖区&#39;),</span><br><span class="line">(340402, u&#39;大通区&#39;),</span><br><span class="line">(340403, u&#39;田家庵区&#39;),</span><br><span class="line">(340404, u&#39;谢家集区&#39;),</span><br><span class="line">(340405, u&#39;八公山区&#39;),</span><br><span class="line">(340406, u&#39;潘集区&#39;),</span><br><span class="line">(340421, u&#39;凤台县&#39;),</span><br><span class="line">(340500, u&#39;马鞍山市&#39;),</span><br><span class="line">(340501, u&#39;市辖区&#39;),</span><br><span class="line">(340502, u&#39;金家庄区&#39;),</span><br><span class="line">(340503, u&#39;花山区&#39;),</span><br><span class="line">(340504, u&#39;雨山区&#39;),</span><br><span class="line">(340521, u&#39;当涂县&#39;),</span><br><span class="line">(340600, u&#39;淮北市&#39;),</span><br><span class="line">(340601, u&#39;市辖区&#39;),</span><br><span class="line">(340602, u&#39;杜集区&#39;),</span><br><span class="line">(340603, u&#39;相山区&#39;),</span><br><span class="line">(340604, u&#39;烈山区&#39;),</span><br><span class="line">(340621, u&#39;濉溪县&#39;),</span><br><span class="line">(340700, u&#39;铜陵市&#39;),</span><br><span class="line">(340701, u&#39;市辖区&#39;),</span><br><span class="line">(340702, u&#39;铜官山区&#39;),</span><br><span class="line">(340703, u&#39;狮子山区&#39;),</span><br><span class="line">(340711, u&#39;铜陵市郊区&#39;),</span><br><span class="line">(340721, u&#39;铜陵县&#39;),</span><br><span class="line">(340800, u&#39;安庆市&#39;),</span><br><span class="line">(340801, u&#39;市辖区&#39;),</span><br><span class="line">(340802, u&#39;迎江区&#39;),</span><br><span class="line">(340803, u&#39;大观区&#39;),</span><br><span class="line">(340811, u&#39;宜秀区&#39;),</span><br><span class="line">(340822, u&#39;怀宁县&#39;),</span><br><span class="line">(340823, u&#39;枞阳县&#39;),</span><br><span class="line">(340824, u&#39;潜山县&#39;),</span><br><span class="line">(340825, u&#39;太湖县&#39;),</span><br><span class="line">(340826, u&#39;宿松县&#39;),</span><br><span class="line">(340827, u&#39;望江县&#39;),</span><br><span class="line">(340828, u&#39;岳西县&#39;),</span><br><span class="line">(340881, u&#39;桐城市&#39;),</span><br><span class="line">(341000, u&#39;黄山市&#39;),</span><br><span class="line">(341001, u&#39;市辖区&#39;),</span><br><span class="line">(341002, u&#39;屯溪区&#39;),</span><br><span class="line">(341003, u&#39;黄山区&#39;),</span><br><span class="line">(341004, u&#39;徽州区&#39;),</span><br><span class="line">(341021, u&#39;歙县&#39;),</span><br><span class="line">(341022, u&#39;休宁县&#39;),</span><br><span class="line">(341023, u&#39;黟县&#39;),</span><br><span class="line">(341024, u&#39;祁门县&#39;),</span><br><span class="line">(341100, u&#39;滁州市&#39;),</span><br><span class="line">(341101, u&#39;市辖区&#39;),</span><br><span class="line">(341102, u&#39;琅琊区&#39;),</span><br><span class="line">(341103, u&#39;南谯区&#39;),</span><br><span class="line">(341122, u&#39;来安县&#39;),</span><br><span class="line">(341124, u&#39;全椒县&#39;),</span><br><span class="line">(341125, u&#39;定远县&#39;),</span><br><span class="line">(341126, u&#39;凤阳县&#39;),</span><br><span class="line">(341181, u&#39;天长市&#39;),</span><br><span class="line">(341182, u&#39;明光市&#39;),</span><br><span class="line">(341200, u&#39;阜阳市&#39;),</span><br><span class="line">(341201, u&#39;市辖区&#39;),</span><br><span class="line">(341202, u&#39;颍州区&#39;),</span><br><span class="line">(341203, u&#39;颍东区&#39;),</span><br><span class="line">(341204, u&#39;颍泉区&#39;),</span><br><span class="line">(341221, u&#39;临泉县&#39;),</span><br><span class="line">(341222, u&#39;太和县&#39;),</span><br><span class="line">(341225, u&#39;阜南县&#39;),</span><br><span class="line">(341226, u&#39;颍上县&#39;),</span><br><span class="line">(341282, u&#39;界首市&#39;),</span><br><span class="line">(341300, u&#39;宿州市&#39;),</span><br><span class="line">(341301, u&#39;市辖区&#39;),</span><br><span class="line">(341302, u&#39;墉桥区&#39;),</span><br><span class="line">(341321, u&#39;砀山县&#39;),</span><br><span class="line">(341322, u&#39;萧县&#39;),</span><br><span class="line">(341323, u&#39;灵璧县&#39;),</span><br><span class="line">(341324, u&#39;泗县&#39;),</span><br><span class="line">(341400, u&#39;巢湖市&#39;),</span><br><span class="line">(341401, u&#39;市辖区&#39;),</span><br><span class="line">(341402, u&#39;居巢区&#39;),</span><br><span class="line">(341421, u&#39;庐江县&#39;),</span><br><span class="line">(341422, u&#39;无为县&#39;),</span><br><span class="line">(341423, u&#39;含山县&#39;),</span><br><span class="line">(341424, u&#39;和县&#39;),</span><br><span class="line">(341500, u&#39;六安市&#39;),</span><br><span class="line">(341501, u&#39;市辖区&#39;),</span><br><span class="line">(341502, u&#39;金安区&#39;),</span><br><span class="line">(341503, u&#39;裕安区&#39;),</span><br><span class="line">(341521, u&#39;寿县&#39;),</span><br><span class="line">(341522, u&#39;霍邱县&#39;),</span><br><span class="line">(341523, u&#39;舒城县&#39;),</span><br><span class="line">(341524, u&#39;金寨县&#39;),</span><br><span class="line">(341525, u&#39;霍山县&#39;),</span><br><span class="line">(341600, u&#39;亳州市&#39;),</span><br><span class="line">(341601, u&#39;市辖区&#39;),</span><br><span class="line">(341602, u&#39;谯城区&#39;),</span><br><span class="line">(341621, u&#39;涡阳县&#39;),</span><br><span class="line">(341622, u&#39;蒙城县&#39;),</span><br><span class="line">(341623, u&#39;利辛县&#39;),</span><br><span class="line">(341700, u&#39;池州市&#39;),</span><br><span class="line">(341701, u&#39;市辖区&#39;),</span><br><span class="line">(341702, u&#39;贵池区&#39;),</span><br><span class="line">(341721, u&#39;东至县&#39;),</span><br><span class="line">(341722, u&#39;石台县&#39;),</span><br><span class="line">(341723, u&#39;青阳县&#39;),</span><br><span class="line">(341800, u&#39;宣城市&#39;),</span><br><span class="line">(341801, u&#39;市辖区&#39;),</span><br><span class="line">(341802, u&#39;宣州区&#39;),</span><br><span class="line">(341821, u&#39;郎溪县&#39;),</span><br><span class="line">(341822, u&#39;广德县&#39;),</span><br><span class="line">(341823, u&#39;泾县&#39;),</span><br><span class="line">(341824, u&#39;绩溪县&#39;),</span><br><span class="line">(341825, u&#39;旌德县&#39;),</span><br><span class="line">(341881, u&#39;宁国市&#39;),</span><br><span class="line">(350000, u&#39;福建省&#39;),</span><br><span class="line">(350100, u&#39;福州市&#39;),</span><br><span class="line">(350101, u&#39;市辖区&#39;),</span><br><span class="line">(350102, u&#39;鼓楼区&#39;),</span><br><span class="line">(350103, u&#39;台江区&#39;),</span><br><span class="line">(350104, u&#39;仓山区&#39;),</span><br><span class="line">(350105, u&#39;马尾区&#39;),</span><br><span class="line">(350111, u&#39;晋安区&#39;),</span><br><span class="line">(350121, u&#39;闽侯县&#39;),</span><br><span class="line">(350122, u&#39;连江县&#39;),</span><br><span class="line">(350123, u&#39;罗源县&#39;),</span><br><span class="line">(350124, u&#39;闽清县&#39;),</span><br><span class="line">(350125, u&#39;永泰县&#39;),</span><br><span class="line">(350128, u&#39;平潭县&#39;),</span><br><span class="line">(350181, u&#39;福清市&#39;),</span><br><span class="line">(350182, u&#39;长乐市&#39;),</span><br><span class="line">(350200, u&#39;厦门市&#39;),</span><br><span class="line">(350201, u&#39;市辖区&#39;),</span><br><span class="line">(350203, u&#39;思明区&#39;),</span><br><span class="line">(350205, u&#39;海沧区&#39;),</span><br><span class="line">(350206, u&#39;湖里区&#39;),</span><br><span class="line">(350211, u&#39;集美区&#39;),</span><br><span class="line">(350212, u&#39;同安区&#39;),</span><br><span class="line">(350213, u&#39;翔安区&#39;),</span><br><span class="line">(350300, u&#39;莆田市&#39;),</span><br><span class="line">(350301, u&#39;市辖区&#39;),</span><br><span class="line">(350302, u&#39;城厢区&#39;),</span><br><span class="line">(350303, u&#39;涵江区&#39;),</span><br><span class="line">(350304, u&#39;荔城区&#39;),</span><br><span class="line">(350305, u&#39;秀屿区&#39;),</span><br><span class="line">(350322, u&#39;仙游县&#39;),</span><br><span class="line">(350400, u&#39;三明市&#39;),</span><br><span class="line">(350401, u&#39;市辖区&#39;),</span><br><span class="line">(350402, u&#39;梅列区&#39;),</span><br><span class="line">(350403, u&#39;三元区&#39;),</span><br><span class="line">(350421, u&#39;明溪县&#39;),</span><br><span class="line">(350423, u&#39;清流县&#39;),</span><br><span class="line">(350424, u&#39;宁化县&#39;),</span><br><span class="line">(350425, u&#39;大田县&#39;),</span><br><span class="line">(350426, u&#39;尤溪县&#39;),</span><br><span class="line">(350427, u&#39;沙县&#39;),</span><br><span class="line">(350428, u&#39;将乐县&#39;),</span><br><span class="line">(350429, u&#39;泰宁县&#39;),</span><br><span class="line">(350430, u&#39;建宁县&#39;),</span><br><span class="line">(350481, u&#39;永安市&#39;),</span><br><span class="line">(350500, u&#39;泉州市&#39;),</span><br><span class="line">(350501, u&#39;市辖区&#39;),</span><br><span class="line">(350502, u&#39;鲤城区&#39;),</span><br><span class="line">(350503, u&#39;丰泽区&#39;),</span><br><span class="line">(350504, u&#39;洛江区&#39;),</span><br><span class="line">(350505, u&#39;泉港区&#39;),</span><br><span class="line">(350521, u&#39;惠安县&#39;),</span><br><span class="line">(350524, u&#39;安溪县&#39;),</span><br><span class="line">(350525, u&#39;永春县&#39;),</span><br><span class="line">(350526, u&#39;德化县&#39;),</span><br><span class="line">(350527, u&#39;金门县&#39;),</span><br><span class="line">(350581, u&#39;石狮市&#39;),</span><br><span class="line">(350582, u&#39;晋江市&#39;),</span><br><span class="line">(350583, u&#39;南安市&#39;),</span><br><span class="line">(350600, u&#39;漳州市&#39;),</span><br><span class="line">(350601, u&#39;市辖区&#39;),</span><br><span class="line">(350602, u&#39;芗城区&#39;),</span><br><span class="line">(350603, u&#39;龙文区&#39;),</span><br><span class="line">(350622, u&#39;云霄县&#39;),</span><br><span class="line">(350623, u&#39;漳浦县&#39;),</span><br><span class="line">(350624, u&#39;诏安县&#39;),</span><br><span class="line">(350625, u&#39;长泰县&#39;),</span><br><span class="line">(350626, u&#39;东山县&#39;),</span><br><span class="line">(350627, u&#39;南靖县&#39;),</span><br><span class="line">(350628, u&#39;平和县&#39;),</span><br><span class="line">(350629, u&#39;华安县&#39;),</span><br><span class="line">(350681, u&#39;龙海市&#39;),</span><br><span class="line">(350700, u&#39;南平市&#39;),</span><br><span class="line">(350701, u&#39;市辖区&#39;),</span><br><span class="line">(350702, u&#39;延平区&#39;),</span><br><span class="line">(350721, u&#39;顺昌县&#39;),</span><br><span class="line">(350722, u&#39;浦城县&#39;),</span><br><span class="line">(350723, u&#39;光泽县&#39;),</span><br><span class="line">(350724, u&#39;松溪县&#39;),</span><br><span class="line">(350725, u&#39;政和县&#39;),</span><br><span class="line">(350781, u&#39;邵武市&#39;),</span><br><span class="line">(350782, u&#39;武夷山市&#39;),</span><br><span class="line">(350783, u&#39;建瓯市&#39;),</span><br><span class="line">(350784, u&#39;建阳市&#39;),</span><br><span class="line">(350800, u&#39;龙岩市&#39;),</span><br><span class="line">(350801, u&#39;市辖区&#39;),</span><br><span class="line">(350802, u&#39;新罗区&#39;),</span><br><span class="line">(350821, u&#39;长汀县&#39;),</span><br><span class="line">(350822, u&#39;永定县&#39;),</span><br><span class="line">(350823, u&#39;上杭县&#39;),</span><br><span class="line">(350824, u&#39;武平县&#39;),</span><br><span class="line">(350825, u&#39;连城县&#39;),</span><br><span class="line">(350881, u&#39;漳平市&#39;),</span><br><span class="line">(350900, u&#39;宁德市&#39;),</span><br><span class="line">(350901, u&#39;市辖区&#39;),</span><br><span class="line">(350902, u&#39;蕉城区&#39;),</span><br><span class="line">(350921, u&#39;霞浦县&#39;),</span><br><span class="line">(350922, u&#39;古田县&#39;),</span><br><span class="line">(350923, u&#39;屏南县&#39;),</span><br><span class="line">(350924, u&#39;寿宁县&#39;),</span><br><span class="line">(350925, u&#39;周宁县&#39;),</span><br><span class="line">(350926, u&#39;柘荣县&#39;),</span><br><span class="line">(350981, u&#39;福安市&#39;),</span><br><span class="line">(350982, u&#39;福鼎市&#39;),</span><br><span class="line">(360000, u&#39;江西省&#39;),</span><br><span class="line">(360100, u&#39;南昌市&#39;),</span><br><span class="line">(360101, u&#39;市辖区&#39;),</span><br><span class="line">(360102, u&#39;东湖区&#39;),</span><br><span class="line">(360103, u&#39;西湖区&#39;),</span><br><span class="line">(360104, u&#39;青云谱区&#39;),</span><br><span class="line">(360105, u&#39;湾里区&#39;),</span><br><span class="line">(360111, u&#39;青山湖区&#39;),</span><br><span class="line">(360121, u&#39;南昌县&#39;),</span><br><span class="line">(360122, u&#39;新建县&#39;),</span><br><span class="line">(360123, u&#39;安义县&#39;),</span><br><span class="line">(360124, u&#39;进贤县&#39;),</span><br><span class="line">(360200, u&#39;景德镇市&#39;),</span><br><span class="line">(360201, u&#39;市辖区&#39;),</span><br><span class="line">(360202, u&#39;昌江区&#39;),</span><br><span class="line">(360203, u&#39;珠山区&#39;),</span><br><span class="line">(360222, u&#39;浮梁县&#39;),</span><br><span class="line">(360281, u&#39;乐平市&#39;),</span><br><span class="line">(360300, u&#39;萍乡市&#39;),</span><br><span class="line">(360301, u&#39;市辖区&#39;),</span><br><span class="line">(360302, u&#39;安源区&#39;),</span><br><span class="line">(360313, u&#39;湘东区&#39;),</span><br><span class="line">(360321, u&#39;莲花县&#39;),</span><br><span class="line">(360322, u&#39;上栗县&#39;),</span><br><span class="line">(360323, u&#39;芦溪县&#39;),</span><br><span class="line">(360400, u&#39;九江市&#39;),</span><br><span class="line">(360401, u&#39;市辖区&#39;),</span><br><span class="line">(360402, u&#39;庐山区&#39;),</span><br><span class="line">(360403, u&#39;浔阳区&#39;),</span><br><span class="line">(360421, u&#39;九江县&#39;),</span><br><span class="line">(360423, u&#39;武宁县&#39;),</span><br><span class="line">(360424, u&#39;修水县&#39;),</span><br><span class="line">(360425, u&#39;永修县&#39;),</span><br><span class="line">(360426, u&#39;德安县&#39;),</span><br><span class="line">(360427, u&#39;星子县&#39;),</span><br><span class="line">(360428, u&#39;都昌县&#39;),</span><br><span class="line">(360429, u&#39;湖口县&#39;),</span><br><span class="line">(360430, u&#39;彭泽县&#39;),</span><br><span class="line">(360481, u&#39;瑞昌市&#39;),</span><br><span class="line">(360500, u&#39;新余市&#39;),</span><br><span class="line">(360501, u&#39;市辖区&#39;),</span><br><span class="line">(360502, u&#39;渝水区&#39;),</span><br><span class="line">(360521, u&#39;分宜县&#39;),</span><br><span class="line">(360600, u&#39;鹰潭市&#39;),</span><br><span class="line">(360601, u&#39;市辖区&#39;),</span><br><span class="line">(360602, u&#39;月湖区&#39;),</span><br><span class="line">(360622, u&#39;余江县&#39;),</span><br><span class="line">(360681, u&#39;贵溪市&#39;),</span><br><span class="line">(360700, u&#39;赣州市&#39;),</span><br><span class="line">(360701, u&#39;市辖区&#39;),</span><br><span class="line">(360702, u&#39;章贡区&#39;),</span><br><span class="line">(360721, u&#39;赣县&#39;),</span><br><span class="line">(360722, u&#39;信丰县&#39;),</span><br><span class="line">(360723, u&#39;大余县&#39;),</span><br><span class="line">(360724, u&#39;上犹县&#39;),</span><br><span class="line">(360725, u&#39;崇义县&#39;),</span><br><span class="line">(360726, u&#39;安远县&#39;),</span><br><span class="line">(360727, u&#39;龙南县&#39;),</span><br><span class="line">(360728, u&#39;定南县&#39;),</span><br><span class="line">(360729, u&#39;全南县&#39;),</span><br><span class="line">(360730, u&#39;宁都县&#39;),</span><br><span class="line">(360731, u&#39;于都县&#39;),</span><br><span class="line">(360732, u&#39;兴国县&#39;),</span><br><span class="line">(360733, u&#39;会昌县&#39;),</span><br><span class="line">(360734, u&#39;寻乌县&#39;),</span><br><span class="line">(360735, u&#39;石城县&#39;),</span><br><span class="line">(360781, u&#39;瑞金市&#39;),</span><br><span class="line">(360782, u&#39;南康市&#39;),</span><br><span class="line">(360800, u&#39;吉安市&#39;),</span><br><span class="line">(360801, u&#39;市辖区&#39;),</span><br><span class="line">(360802, u&#39;吉州区&#39;),</span><br><span class="line">(360803, u&#39;青原区&#39;),</span><br><span class="line">(360821, u&#39;吉安县&#39;),</span><br><span class="line">(360822, u&#39;吉水县&#39;),</span><br><span class="line">(360823, u&#39;峡江县&#39;),</span><br><span class="line">(360824, u&#39;新干县&#39;),</span><br><span class="line">(360825, u&#39;永丰县&#39;),</span><br><span class="line">(360826, u&#39;泰和县&#39;),</span><br><span class="line">(360827, u&#39;遂川县&#39;),</span><br><span class="line">(360828, u&#39;万安县&#39;),</span><br><span class="line">(360829, u&#39;安福县&#39;),</span><br><span class="line">(360830, u&#39;永新县&#39;),</span><br><span class="line">(360881, u&#39;井冈山市&#39;),</span><br><span class="line">(360900, u&#39;宜春市&#39;),</span><br><span class="line">(360901, u&#39;市辖区&#39;),</span><br><span class="line">(360902, u&#39;袁州区&#39;),</span><br><span class="line">(360921, u&#39;奉新县&#39;),</span><br><span class="line">(360922, u&#39;万载县&#39;),</span><br><span class="line">(360923, u&#39;上高县&#39;),</span><br><span class="line">(360924, u&#39;宜丰县&#39;),</span><br><span class="line">(360925, u&#39;靖安县&#39;),</span><br><span class="line">(360926, u&#39;铜鼓县&#39;),</span><br><span class="line">(360981, u&#39;丰城市&#39;),</span><br><span class="line">(360982, u&#39;樟树市&#39;),</span><br><span class="line">(360983, u&#39;高安市&#39;),</span><br><span class="line">(361000, u&#39;抚州市&#39;),</span><br><span class="line">(361001, u&#39;市辖区&#39;),</span><br><span class="line">(361002, u&#39;临川区&#39;),</span><br><span class="line">(361021, u&#39;南城县&#39;),</span><br><span class="line">(361022, u&#39;黎川县&#39;),</span><br><span class="line">(361023, u&#39;南丰县&#39;),</span><br><span class="line">(361024, u&#39;崇仁县&#39;),</span><br><span class="line">(361025, u&#39;乐安县&#39;),</span><br><span class="line">(361026, u&#39;宜黄县&#39;),</span><br><span class="line">(361027, u&#39;金溪县&#39;),</span><br><span class="line">(361028, u&#39;资溪县&#39;),</span><br><span class="line">(361029, u&#39;东乡县&#39;),</span><br><span class="line">(361030, u&#39;广昌县&#39;),</span><br><span class="line">(361100, u&#39;上饶市&#39;),</span><br><span class="line">(361101, u&#39;市辖区&#39;),</span><br><span class="line">(361102, u&#39;信州区&#39;),</span><br><span class="line">(361121, u&#39;上饶县&#39;),</span><br><span class="line">(361122, u&#39;广丰县&#39;),</span><br><span class="line">(361123, u&#39;玉山县&#39;),</span><br><span class="line">(361124, u&#39;铅山县&#39;),</span><br><span class="line">(361125, u&#39;横峰县&#39;),</span><br><span class="line">(361126, u&#39;弋阳县&#39;),</span><br><span class="line">(361127, u&#39;余干县&#39;),</span><br><span class="line">(361128, u&#39;鄱阳县&#39;),</span><br><span class="line">(361129, u&#39;万年县&#39;),</span><br><span class="line">(361130, u&#39;婺源县&#39;),</span><br><span class="line">(361181, u&#39;德兴市&#39;),</span><br><span class="line">(370000, u&#39;山东省&#39;),</span><br><span class="line">(370100, u&#39;济南市&#39;),</span><br><span class="line">(370101, u&#39;市辖区&#39;),</span><br><span class="line">(370102, u&#39;历下区&#39;),</span><br><span class="line">(370103, u&#39;市中区&#39;),</span><br><span class="line">(370104, u&#39;槐荫区&#39;),</span><br><span class="line">(370105, u&#39;天桥区&#39;),</span><br><span class="line">(370112, u&#39;历城区&#39;),</span><br><span class="line">(370113, u&#39;长清区&#39;),</span><br><span class="line">(370124, u&#39;平阴县&#39;),</span><br><span class="line">(370125, u&#39;济阳县&#39;),</span><br><span class="line">(370126, u&#39;商河县&#39;),</span><br><span class="line">(370181, u&#39;章丘市&#39;),</span><br><span class="line">(370200, u&#39;青岛市&#39;),</span><br><span class="line">(370201, u&#39;市辖区&#39;),</span><br><span class="line">(370202, u&#39;市南区&#39;),</span><br><span class="line">(370203, u&#39;市北区&#39;),</span><br><span class="line">(370205, u&#39;四方区&#39;),</span><br><span class="line">(370211, u&#39;黄岛区&#39;),</span><br><span class="line">(370212, u&#39;崂山区&#39;),</span><br><span class="line">(370213, u&#39;李沧区&#39;),</span><br><span class="line">(370214, u&#39;城阳区&#39;),</span><br><span class="line">(370281, u&#39;胶州市&#39;),</span><br><span class="line">(370282, u&#39;即墨市&#39;),</span><br><span class="line">(370283, u&#39;平度市&#39;),</span><br><span class="line">(370284, u&#39;胶南市&#39;),</span><br><span class="line">(370285, u&#39;莱西市&#39;),</span><br><span class="line">(370300, u&#39;淄博市&#39;),</span><br><span class="line">(370301, u&#39;市辖区&#39;),</span><br><span class="line">(370302, u&#39;淄川区&#39;),</span><br><span class="line">(370303, u&#39;张店区&#39;),</span><br><span class="line">(370304, u&#39;博山区&#39;),</span><br><span class="line">(370305, u&#39;临淄区&#39;),</span><br><span class="line">(370306, u&#39;周村区&#39;),</span><br><span class="line">(370321, u&#39;桓台县&#39;),</span><br><span class="line">(370322, u&#39;高青县&#39;),</span><br><span class="line">(370323, u&#39;沂源县&#39;),</span><br><span class="line">(370400, u&#39;枣庄市&#39;),</span><br><span class="line">(370401, u&#39;市辖区&#39;),</span><br><span class="line">(370402, u&#39;市中区&#39;),</span><br><span class="line">(370403, u&#39;薛城区&#39;),</span><br><span class="line">(370404, u&#39;峄城区&#39;),</span><br><span class="line">(370405, u&#39;台儿庄区&#39;),</span><br><span class="line">(370406, u&#39;山亭区&#39;),</span><br><span class="line">(370481, u&#39;滕州市&#39;),</span><br><span class="line">(370500, u&#39;东营市&#39;),</span><br><span class="line">(370501, u&#39;市辖区&#39;),</span><br><span class="line">(370502, u&#39;东营区&#39;),</span><br><span class="line">(370503, u&#39;河口区&#39;),</span><br><span class="line">(370521, u&#39;垦利县&#39;),</span><br><span class="line">(370522, u&#39;利津县&#39;),</span><br><span class="line">(370523, u&#39;广饶县&#39;),</span><br><span class="line">(370600, u&#39;烟台市&#39;),</span><br><span class="line">(370601, u&#39;市辖区&#39;),</span><br><span class="line">(370602, u&#39;芝罘区&#39;),</span><br><span class="line">(370611, u&#39;福山区&#39;),</span><br><span class="line">(370612, u&#39;牟平区&#39;),</span><br><span class="line">(370613, u&#39;莱山区&#39;),</span><br><span class="line">(370634, u&#39;长岛县&#39;),</span><br><span class="line">(370681, u&#39;龙口市&#39;),</span><br><span class="line">(370682, u&#39;莱阳市&#39;),</span><br><span class="line">(370683, u&#39;莱州市&#39;),</span><br><span class="line">(370684, u&#39;蓬莱市&#39;),</span><br><span class="line">(370685, u&#39;招远市&#39;),</span><br><span class="line">(370686, u&#39;栖霞市&#39;),</span><br><span class="line">(370687, u&#39;海阳市&#39;),</span><br><span class="line">(370700, u&#39;潍坊市&#39;),</span><br><span class="line">(370701, u&#39;市辖区&#39;),</span><br><span class="line">(370702, u&#39;潍城区&#39;),</span><br><span class="line">(370703, u&#39;寒亭区&#39;),</span><br><span class="line">(370704, u&#39;坊子区&#39;),</span><br><span class="line">(370705, u&#39;奎文区&#39;),</span><br><span class="line">(370724, u&#39;临朐县&#39;),</span><br><span class="line">(370725, u&#39;昌乐县&#39;),</span><br><span class="line">(370781, u&#39;青州市&#39;),</span><br><span class="line">(370782, u&#39;诸城市&#39;),</span><br><span class="line">(370783, u&#39;寿光市&#39;),</span><br><span class="line">(370784, u&#39;安丘市&#39;),</span><br><span class="line">(370785, u&#39;高密市&#39;),</span><br><span class="line">(370786, u&#39;昌邑市&#39;),</span><br><span class="line">(370800, u&#39;济宁市&#39;),</span><br><span class="line">(370801, u&#39;市辖区&#39;),</span><br><span class="line">(370802, u&#39;市中区&#39;),</span><br><span class="line">(370811, u&#39;任城区&#39;),</span><br><span class="line">(370826, u&#39;微山县&#39;),</span><br><span class="line">(370827, u&#39;鱼台县&#39;),</span><br><span class="line">(370828, u&#39;金乡县&#39;),</span><br><span class="line">(370829, u&#39;嘉祥县&#39;),</span><br><span class="line">(370830, u&#39;汶上县&#39;),</span><br><span class="line">(370831, u&#39;泗水县&#39;),</span><br><span class="line">(370832, u&#39;梁山县&#39;),</span><br><span class="line">(370881, u&#39;曲阜市&#39;),</span><br><span class="line">(370882, u&#39;兖州市&#39;),</span><br><span class="line">(370883, u&#39;邹城市&#39;),</span><br><span class="line">(370900, u&#39;泰安市&#39;),</span><br><span class="line">(370901, u&#39;市辖区&#39;),</span><br><span class="line">(370902, u&#39;泰山区&#39;),</span><br><span class="line">(370903, u&#39;岱岳区&#39;),</span><br><span class="line">(370921, u&#39;宁阳县&#39;),</span><br><span class="line">(370923, u&#39;东平县&#39;),</span><br><span class="line">(370982, u&#39;新泰市&#39;),</span><br><span class="line">(370983, u&#39;肥城市&#39;),</span><br><span class="line">(371000, u&#39;威海市&#39;),</span><br><span class="line">(371001, u&#39;市辖区&#39;),</span><br><span class="line">(371002, u&#39;环翠区&#39;),</span><br><span class="line">(371081, u&#39;文登市&#39;),</span><br><span class="line">(371082, u&#39;荣成市&#39;),</span><br><span class="line">(371083, u&#39;乳山市&#39;),</span><br><span class="line">(371100, u&#39;日照市&#39;),</span><br><span class="line">(371101, u&#39;市辖区&#39;),</span><br><span class="line">(371102, u&#39;东港区&#39;),</span><br><span class="line">(371103, u&#39;岚山区&#39;),</span><br><span class="line">(371121, u&#39;五莲县&#39;),</span><br><span class="line">(371122, u&#39;莒县&#39;),</span><br><span class="line">(371200, u&#39;莱芜市&#39;),</span><br><span class="line">(371201, u&#39;市辖区&#39;),</span><br><span class="line">(371202, u&#39;莱城区&#39;),</span><br><span class="line">(371203, u&#39;钢城区&#39;),</span><br><span class="line">(371300, u&#39;临沂市&#39;),</span><br><span class="line">(371301, u&#39;临沂市辖区&#39;),</span><br><span class="line">(371302, u&#39;兰山区&#39;),</span><br><span class="line">(371311, u&#39;罗庄区&#39;),</span><br><span class="line">(371312, u&#39;河东区&#39;),</span><br><span class="line">(371321, u&#39;沂南县&#39;),</span><br><span class="line">(371322, u&#39;郯城县&#39;),</span><br><span class="line">(371323, u&#39;沂水县&#39;),</span><br><span class="line">(371324, u&#39;苍山县&#39;),</span><br><span class="line">(371325, u&#39;费县&#39;),</span><br><span class="line">(371326, u&#39;平邑县&#39;),</span><br><span class="line">(371327, u&#39;莒南县&#39;),</span><br><span class="line">(371328, u&#39;蒙阴县&#39;),</span><br><span class="line">(371329, u&#39;临沭县&#39;),</span><br><span class="line">(371400, u&#39;德州市&#39;),</span><br><span class="line">(371401, u&#39;市辖区&#39;),</span><br><span class="line">(371402, u&#39;德城区&#39;),</span><br><span class="line">(371421, u&#39;陵县&#39;),</span><br><span class="line">(371422, u&#39;宁津县&#39;),</span><br><span class="line">(371423, u&#39;庆云县&#39;),</span><br><span class="line">(371424, u&#39;临邑县&#39;),</span><br><span class="line">(371425, u&#39;齐河县&#39;),</span><br><span class="line">(371426, u&#39;平原县&#39;),</span><br><span class="line">(371427, u&#39;夏津县&#39;),</span><br><span class="line">(371428, u&#39;武城县&#39;),</span><br><span class="line">(371481, u&#39;乐陵市&#39;),</span><br><span class="line">(371482, u&#39;禹城市&#39;),</span><br><span class="line">(371500, u&#39;聊城市&#39;),</span><br><span class="line">(371501, u&#39;市辖区&#39;),</span><br><span class="line">(371502, u&#39;东昌府区&#39;),</span><br><span class="line">(371521, u&#39;阳谷县&#39;),</span><br><span class="line">(371522, u&#39;莘县&#39;),</span><br><span class="line">(371523, u&#39;茌平县&#39;),</span><br><span class="line">(371524, u&#39;东阿县&#39;),</span><br><span class="line">(371525, u&#39;冠县&#39;),</span><br><span class="line">(371526, u&#39;高唐县&#39;),</span><br><span class="line">(371581, u&#39;临清市&#39;),</span><br><span class="line">(371600, u&#39;滨州市&#39;),</span><br><span class="line">(371601, u&#39;市辖区&#39;),</span><br><span class="line">(371602, u&#39;滨城区&#39;),</span><br><span class="line">(371621, u&#39;惠民县&#39;),</span><br><span class="line">(371622, u&#39;阳信县&#39;),</span><br><span class="line">(371623, u&#39;无棣县&#39;),</span><br><span class="line">(371624, u&#39;沾化县&#39;),</span><br><span class="line">(371625, u&#39;博兴县&#39;),</span><br><span class="line">(371626, u&#39;邹平县&#39;),</span><br><span class="line">(371700, u&#39;菏泽市&#39;),</span><br><span class="line">(371701, u&#39;市辖区&#39;),</span><br><span class="line">(371702, u&#39;牡丹区&#39;),</span><br><span class="line">(371721, u&#39;曹县&#39;),</span><br><span class="line">(371722, u&#39;单县&#39;),</span><br><span class="line">(371723, u&#39;成武县&#39;),</span><br><span class="line">(371724, u&#39;巨野县&#39;),</span><br><span class="line">(371725, u&#39;郓城县&#39;),</span><br><span class="line">(371726, u&#39;鄄城县&#39;),</span><br><span class="line">(371727, u&#39;定陶县&#39;),</span><br><span class="line">(371728, u&#39;东明县&#39;),</span><br><span class="line">(410000, u&#39;河南省&#39;),</span><br><span class="line">(410100, u&#39;郑州市&#39;),</span><br><span class="line">(410101, u&#39;市辖区&#39;),</span><br><span class="line">(410102, u&#39;中原区&#39;),</span><br><span class="line">(410103, u&#39;二七区&#39;),</span><br><span class="line">(410104, u&#39;管城回族区&#39;),</span><br><span class="line">(410105, u&#39;金水区&#39;),</span><br><span class="line">(410106, u&#39;上街区&#39;),</span><br><span class="line">(410108, u&#39;惠济区&#39;),</span><br><span class="line">(410122, u&#39;中牟县&#39;),</span><br><span class="line">(410181, u&#39;巩义市&#39;),</span><br><span class="line">(410182, u&#39;荥阳市&#39;),</span><br><span class="line">(410183, u&#39;新密市&#39;),</span><br><span class="line">(410184, u&#39;新郑市&#39;),</span><br><span class="line">(410185, u&#39;登封市&#39;),</span><br><span class="line">(410200, u&#39;开封市&#39;),</span><br><span class="line">(410201, u&#39;市辖区&#39;),</span><br><span class="line">(410202, u&#39;龙亭区&#39;),</span><br><span class="line">(410203, u&#39;顺河区&#39;),</span><br><span class="line">(410204, u&#39;鼓楼区&#39;),</span><br><span class="line">(410205, u&#39;禹王台区&#39;),</span><br><span class="line">(410211, u&#39;金明区&#39;),</span><br><span class="line">(410221, u&#39;杞县&#39;),</span><br><span class="line">(410222, u&#39;通许县&#39;),</span><br><span class="line">(410223, u&#39;尉氏县&#39;),</span><br><span class="line">(410224, u&#39;开封县&#39;),</span><br><span class="line">(410225, u&#39;兰考县&#39;),</span><br><span class="line">(410300, u&#39;洛阳市&#39;),</span><br><span class="line">(410301, u&#39;市辖区&#39;),</span><br><span class="line">(410302, u&#39;老城区&#39;),</span><br><span class="line">(410303, u&#39;西工区&#39;),</span><br><span class="line">(410304, u&#39;廛河回族区&#39;),</span><br><span class="line">(410305, u&#39;涧西区&#39;),</span><br><span class="line">(410306, u&#39;吉利区&#39;),</span><br><span class="line">(410307, u&#39;洛龙区&#39;),</span><br><span class="line">(410322, u&#39;孟津县&#39;),</span><br><span class="line">(410323, u&#39;新安县&#39;),</span><br><span class="line">(410324, u&#39;栾川县&#39;),</span><br><span class="line">(410325, u&#39;嵩县&#39;),</span><br><span class="line">(410326, u&#39;汝阳县&#39;),</span><br><span class="line">(410327, u&#39;宜阳县&#39;),</span><br><span class="line">(410328, u&#39;洛宁县&#39;),</span><br><span class="line">(410329, u&#39;伊川县&#39;),</span><br><span class="line">(410381, u&#39;偃师市&#39;),</span><br><span class="line">(410400, u&#39;平顶山市&#39;),</span><br><span class="line">(410401, u&#39;市辖区&#39;),</span><br><span class="line">(410402, u&#39;新华区&#39;),</span><br><span class="line">(410403, u&#39;卫东区&#39;),</span><br><span class="line">(410404, u&#39;石龙区&#39;),</span><br><span class="line">(410411, u&#39;湛河区&#39;),</span><br><span class="line">(410421, u&#39;宝丰县&#39;),</span><br><span class="line">(410422, u&#39;叶县&#39;),</span><br><span class="line">(410423, u&#39;鲁山县&#39;),</span><br><span class="line">(410425, u&#39;郏县&#39;),</span><br><span class="line">(410481, u&#39;舞钢市&#39;),</span><br><span class="line">(410482, u&#39;汝州市&#39;),</span><br><span class="line">(410500, u&#39;安阳市&#39;),</span><br><span class="line">(410501, u&#39;市辖区&#39;),</span><br><span class="line">(410502, u&#39;文峰区&#39;),</span><br><span class="line">(410503, u&#39;北关区&#39;),</span><br><span class="line">(410505, u&#39;殷都区&#39;),</span><br><span class="line">(410506, u&#39;龙安区&#39;),</span><br><span class="line">(410522, u&#39;安阳县&#39;),</span><br><span class="line">(410523, u&#39;汤阴县&#39;),</span><br><span class="line">(410526, u&#39;滑县&#39;),</span><br><span class="line">(410527, u&#39;内黄县&#39;),</span><br><span class="line">(410581, u&#39;林州市&#39;),</span><br><span class="line">(410600, u&#39;鹤壁市&#39;),</span><br><span class="line">(410601, u&#39;市辖区&#39;),</span><br><span class="line">(410602, u&#39;鹤山区&#39;),</span><br><span class="line">(410603, u&#39;山城区&#39;),</span><br><span class="line">(410611, u&#39;淇滨区&#39;),</span><br><span class="line">(410621, u&#39;浚县&#39;),</span><br><span class="line">(410622, u&#39;淇县&#39;),</span><br><span class="line">(410700, u&#39;新乡市&#39;),</span><br><span class="line">(410701, u&#39;市辖区&#39;),</span><br><span class="line">(410702, u&#39;红旗区&#39;),</span><br><span class="line">(410703, u&#39;卫滨区&#39;),</span><br><span class="line">(410704, u&#39;凤泉区&#39;),</span><br><span class="line">(410711, u&#39;牧野区&#39;),</span><br><span class="line">(410721, u&#39;新乡县&#39;),</span><br><span class="line">(410724, u&#39;获嘉县&#39;),</span><br><span class="line">(410725, u&#39;原阳县&#39;),</span><br><span class="line">(410726, u&#39;延津县&#39;),</span><br><span class="line">(410727, u&#39;封丘县&#39;),</span><br><span class="line">(410728, u&#39;长垣县&#39;),</span><br><span class="line">(410781, u&#39;卫辉市&#39;),</span><br><span class="line">(410782, u&#39;辉县市&#39;),</span><br><span class="line">(410800, u&#39;焦作市&#39;),</span><br><span class="line">(410801, u&#39;市辖区&#39;),</span><br><span class="line">(410802, u&#39;解放区&#39;),</span><br><span class="line">(410803, u&#39;中站区&#39;),</span><br><span class="line">(410804, u&#39;马村区&#39;),</span><br><span class="line">(410811, u&#39;山阳区&#39;),</span><br><span class="line">(410821, u&#39;修武县&#39;),</span><br><span class="line">(410822, u&#39;博爱县&#39;),</span><br><span class="line">(410823, u&#39;武陟县&#39;),</span><br><span class="line">(410825, u&#39;温县&#39;),</span><br><span class="line">(410881, u&#39;济源市&#39;),</span><br><span class="line">(410882, u&#39;沁阳市&#39;),</span><br><span class="line">(410883, u&#39;孟州市&#39;),</span><br><span class="line">(410900, u&#39;濮阳市&#39;),</span><br><span class="line">(410901, u&#39;市辖区&#39;),</span><br><span class="line">(410902, u&#39;华龙区&#39;),</span><br><span class="line">(410922, u&#39;清丰县&#39;),</span><br><span class="line">(410923, u&#39;南乐县&#39;),</span><br><span class="line">(410926, u&#39;范县&#39;),</span><br><span class="line">(410927, u&#39;台前县&#39;),</span><br><span class="line">(410928, u&#39;濮阳县&#39;),</span><br><span class="line">(411000, u&#39;许昌市&#39;),</span><br><span class="line">(411001, u&#39;市辖区&#39;),</span><br><span class="line">(411002, u&#39;魏都区&#39;),</span><br><span class="line">(411023, u&#39;许昌县&#39;),</span><br><span class="line">(411024, u&#39;鄢陵县&#39;),</span><br><span class="line">(411025, u&#39;襄城县&#39;),</span><br><span class="line">(411081, u&#39;禹州市&#39;),</span><br><span class="line">(411082, u&#39;长葛市&#39;),</span><br><span class="line">(411100, u&#39;漯河市&#39;),</span><br><span class="line">(411101, u&#39;市辖区&#39;),</span><br><span class="line">(411102, u&#39;源汇区&#39;),</span><br><span class="line">(411103, u&#39;郾城区&#39;),</span><br><span class="line">(411104, u&#39;召陵区&#39;),</span><br><span class="line">(411121, u&#39;舞阳县&#39;),</span><br><span class="line">(411122, u&#39;临颖县&#39;),</span><br><span class="line">(411200, u&#39;三门峡市&#39;),</span><br><span class="line">(411201, u&#39;市辖区&#39;),</span><br><span class="line">(411202, u&#39;湖滨区&#39;),</span><br><span class="line">(411221, u&#39;渑池县&#39;),</span><br><span class="line">(411222, u&#39;陕县&#39;),</span><br><span class="line">(411224, u&#39;卢氏县&#39;),</span><br><span class="line">(411281, u&#39;义马市&#39;),</span><br><span class="line">(411282, u&#39;灵宝市&#39;),</span><br><span class="line">(411300, u&#39;南阳市&#39;),</span><br><span class="line">(411301, u&#39;市辖区&#39;),</span><br><span class="line">(411302, u&#39;宛城区&#39;),</span><br><span class="line">(411303, u&#39;卧龙区&#39;),</span><br><span class="line">(411321, u&#39;南召县&#39;),</span><br><span class="line">(411322, u&#39;方城县&#39;),</span><br><span class="line">(411323, u&#39;西峡县&#39;),</span><br><span class="line">(411324, u&#39;镇平县&#39;),</span><br><span class="line">(411325, u&#39;内乡县&#39;),</span><br><span class="line">(411326, u&#39;淅川县&#39;),</span><br><span class="line">(411327, u&#39;社旗县&#39;),</span><br><span class="line">(411328, u&#39;唐河县&#39;),</span><br><span class="line">(411329, u&#39;新野县&#39;),</span><br><span class="line">(411330, u&#39;桐柏县&#39;),</span><br><span class="line">(411381, u&#39;邓州市&#39;),</span><br><span class="line">(411400, u&#39;商丘市&#39;),</span><br><span class="line">(411401, u&#39;市辖区&#39;),</span><br><span class="line">(411402, u&#39;梁园区&#39;),</span><br><span class="line">(411403, u&#39;睢阳区&#39;),</span><br><span class="line">(411421, u&#39;民权县&#39;),</span><br><span class="line">(411422, u&#39;睢县&#39;),</span><br><span class="line">(411423, u&#39;宁陵县&#39;),</span><br><span class="line">(411424, u&#39;柘城县&#39;),</span><br><span class="line">(411425, u&#39;虞城县&#39;),</span><br><span class="line">(411426, u&#39;夏邑县&#39;),</span><br><span class="line">(411481, u&#39;永城市&#39;),</span><br><span class="line">(411500, u&#39;信阳市&#39;),</span><br><span class="line">(411501, u&#39;市辖区&#39;),</span><br><span class="line">(411502, u&#39;浉河区&#39;),</span><br><span class="line">(411503, u&#39;平桥区&#39;),</span><br><span class="line">(411521, u&#39;罗山县&#39;),</span><br><span class="line">(411522, u&#39;光山县&#39;),</span><br><span class="line">(411523, u&#39;新县&#39;),</span><br><span class="line">(411524, u&#39;商城县&#39;),</span><br><span class="line">(411525, u&#39;固始县&#39;),</span><br><span class="line">(411526, u&#39;潢川县&#39;),</span><br><span class="line">(411527, u&#39;淮滨县&#39;),</span><br><span class="line">(411528, u&#39;息县&#39;),</span><br><span class="line">(411600, u&#39;周口市&#39;),</span><br><span class="line">(411601, u&#39;市辖区&#39;),</span><br><span class="line">(411602, u&#39;川汇区&#39;),</span><br><span class="line">(411621, u&#39;扶沟县&#39;),</span><br><span class="line">(411622, u&#39;西华县&#39;),</span><br><span class="line">(411623, u&#39;商水县&#39;),</span><br><span class="line">(411624, u&#39;沈丘县&#39;),</span><br><span class="line">(411625, u&#39;郸城县&#39;),</span><br><span class="line">(411626, u&#39;淮阳县&#39;),</span><br><span class="line">(411627, u&#39;太康县&#39;),</span><br><span class="line">(411628, u&#39;鹿邑县&#39;),</span><br><span class="line">(411681, u&#39;项城市&#39;),</span><br><span class="line">(411700, u&#39;驻马店市&#39;),</span><br><span class="line">(411701, u&#39;市辖区&#39;),</span><br><span class="line">(411702, u&#39;驿城区&#39;),</span><br><span class="line">(411721, u&#39;西平县&#39;),</span><br><span class="line">(411722, u&#39;上蔡县&#39;),</span><br><span class="line">(411723, u&#39;平舆县&#39;),</span><br><span class="line">(411724, u&#39;正阳县&#39;),</span><br><span class="line">(411725, u&#39;确山县&#39;),</span><br><span class="line">(411726, u&#39;泌阳县&#39;),</span><br><span class="line">(411727, u&#39;汝南县&#39;),</span><br><span class="line">(411728, u&#39;遂平县&#39;),</span><br><span class="line">(411729, u&#39;新蔡县&#39;),</span><br><span class="line">(420000, u&#39;湖北省&#39;),</span><br><span class="line">(420100, u&#39;武汉市&#39;),</span><br><span class="line">(420101, u&#39;市辖区&#39;),</span><br><span class="line">(420102, u&#39;江岸区&#39;),</span><br><span class="line">(420103, u&#39;江汉区&#39;),</span><br><span class="line">(420104, u&#39;硚口区&#39;),</span><br><span class="line">(420105, u&#39;汉阳区&#39;),</span><br><span class="line">(420106, u&#39;武昌区&#39;),</span><br><span class="line">(420107, u&#39;青山区&#39;),</span><br><span class="line">(420111, u&#39;洪山区&#39;),</span><br><span class="line">(420112, u&#39;东西湖区&#39;),</span><br><span class="line">(420113, u&#39;汉南区&#39;),</span><br><span class="line">(420114, u&#39;蔡甸区&#39;),</span><br><span class="line">(420115, u&#39;江夏区&#39;),</span><br><span class="line">(420116, u&#39;黄陂区&#39;),</span><br><span class="line">(420117, u&#39;武汉市新洲区&#39;),</span><br><span class="line">(420200, u&#39;黄石市&#39;),</span><br><span class="line">(420201, u&#39;市辖区&#39;),</span><br><span class="line">(420202, u&#39;黄石港区&#39;),</span><br><span class="line">(420203, u&#39;西塞山区&#39;),</span><br><span class="line">(420204, u&#39;下陆区&#39;),</span><br><span class="line">(420205, u&#39;铁山区&#39;),</span><br><span class="line">(420222, u&#39;阳新县&#39;),</span><br><span class="line">(420281, u&#39;大冶市&#39;),</span><br><span class="line">(420300, u&#39;十堰市&#39;),</span><br><span class="line">(420301, u&#39;市辖区&#39;),</span><br><span class="line">(420302, u&#39;茅箭区&#39;),</span><br><span class="line">(420303, u&#39;张湾区&#39;),</span><br><span class="line">(420321, u&#39;郧县&#39;),</span><br><span class="line">(420322, u&#39;郧西县&#39;),</span><br><span class="line">(420323, u&#39;竹山县&#39;),</span><br><span class="line">(420324, u&#39;竹溪县&#39;),</span><br><span class="line">(420325, u&#39;房县&#39;),</span><br><span class="line">(420381, u&#39;丹江口市&#39;),</span><br><span class="line">(420500, u&#39;宜昌市&#39;),</span><br><span class="line">(420501, u&#39;市辖区&#39;),</span><br><span class="line">(420502, u&#39;西陵区&#39;),</span><br><span class="line">(420503, u&#39;伍家岗区&#39;),</span><br><span class="line">(420504, u&#39;点军区&#39;),</span><br><span class="line">(420505, u&#39;猇亭区&#39;),</span><br><span class="line">(420506, u&#39;夷陵区&#39;),</span><br><span class="line">(420525, u&#39;远安县&#39;),</span><br><span class="line">(420526, u&#39;兴山县&#39;),</span><br><span class="line">(420527, u&#39;秭归县&#39;),</span><br><span class="line">(420528, u&#39;长阳土家族自治县&#39;),</span><br><span class="line">(420529, u&#39;五峰土家族自治县&#39;),</span><br><span class="line">(420581, u&#39;宜都市&#39;),</span><br><span class="line">(420582, u&#39;当阳市&#39;),</span><br><span class="line">(420583, u&#39;枝江市&#39;),</span><br><span class="line">(420600, u&#39;襄樊市&#39;),</span><br><span class="line">(420601, u&#39;市辖区&#39;),</span><br><span class="line">(420602, u&#39;襄城区&#39;),</span><br><span class="line">(420606, u&#39;樊城区&#39;),</span><br><span class="line">(420607, u&#39;襄阳区&#39;),</span><br><span class="line">(420624, u&#39;南漳县&#39;),</span><br><span class="line">(420625, u&#39;谷城县&#39;),</span><br><span class="line">(420626, u&#39;保康县&#39;),</span><br><span class="line">(420682, u&#39;老河口市&#39;),</span><br><span class="line">(420683, u&#39;枣阳市&#39;),</span><br><span class="line">(420684, u&#39;宜城市&#39;),</span><br><span class="line">(420700, u&#39;鄂州市&#39;),</span><br><span class="line">(420701, u&#39;市辖区&#39;),</span><br><span class="line">(420702, u&#39;粱子湖区&#39;),</span><br><span class="line">(420703, u&#39;华容区&#39;),</span><br><span class="line">(420704, u&#39;鄂城区&#39;),</span><br><span class="line">(420800, u&#39;荆门市&#39;),</span><br><span class="line">(420801, u&#39;市辖区&#39;),</span><br><span class="line">(420802, u&#39;东宝区&#39;),</span><br><span class="line">(420804, u&#39;掇刀区&#39;),</span><br><span class="line">(420821, u&#39;京山县&#39;),</span><br><span class="line">(420822, u&#39;沙洋县&#39;),</span><br><span class="line">(420881, u&#39;钟祥市&#39;),</span><br><span class="line">(420900, u&#39;孝感市&#39;),</span><br><span class="line">(420901, u&#39;市辖区&#39;),</span><br><span class="line">(420902, u&#39;孝南区&#39;),</span><br><span class="line">(420921, u&#39;孝昌县&#39;),</span><br><span class="line">(420922, u&#39;大悟县&#39;),</span><br><span class="line">(420923, u&#39;云梦县&#39;),</span><br><span class="line">(420981, u&#39;应城市&#39;),</span><br><span class="line">(420982, u&#39;安陆市&#39;),</span><br><span class="line">(420984, u&#39;汉川市&#39;),</span><br><span class="line">(421000, u&#39;荆州市&#39;),</span><br><span class="line">(421001, u&#39;市辖区&#39;),</span><br><span class="line">(421002, u&#39;沙市区&#39;),</span><br><span class="line">(421003, u&#39;荆州区&#39;),</span><br><span class="line">(421022, u&#39;公安县&#39;),</span><br><span class="line">(421023, u&#39;监利县&#39;),</span><br><span class="line">(421024, u&#39;江陵县&#39;),</span><br><span class="line">(421081, u&#39;石首市&#39;),</span><br><span class="line">(421083, u&#39;洪湖市&#39;),</span><br><span class="line">(421087, u&#39;松滋市&#39;),</span><br><span class="line">(421100, u&#39;黄冈市&#39;),</span><br><span class="line">(421101, u&#39;市辖区&#39;),</span><br><span class="line">(421102, u&#39;黄州区&#39;),</span><br><span class="line">(421121, u&#39;团风县&#39;),</span><br><span class="line">(421122, u&#39;红安县&#39;),</span><br><span class="line">(421123, u&#39;罗田县&#39;),</span><br><span class="line">(421124, u&#39;英山县&#39;),</span><br><span class="line">(421125, u&#39;浠水县&#39;),</span><br><span class="line">(421126, u&#39;蕲春县&#39;),</span><br><span class="line">(421127, u&#39;黄梅县&#39;),</span><br><span class="line">(421181, u&#39;麻城市&#39;),</span><br><span class="line">(421182, u&#39;武穴市&#39;),</span><br><span class="line">(421200, u&#39;咸宁市&#39;),</span><br><span class="line">(421201, u&#39;市辖区&#39;),</span><br><span class="line">(421202, u&#39;咸安区&#39;),</span><br><span class="line">(421221, u&#39;嘉鱼县&#39;),</span><br><span class="line">(421222, u&#39;通城县&#39;),</span><br><span class="line">(421223, u&#39;崇阳县&#39;),</span><br><span class="line">(421224, u&#39;通山县&#39;),</span><br><span class="line">(421281, u&#39;赤壁市&#39;),</span><br><span class="line">(421300, u&#39;随州市&#39;),</span><br><span class="line">(421301, u&#39;市辖区&#39;),</span><br><span class="line">(421302, u&#39;曾都区&#39;),</span><br><span class="line">(421381, u&#39;广水市&#39;),</span><br><span class="line">(422800, u&#39;恩施州&#39;),</span><br><span class="line">(422801, u&#39;恩施市&#39;),</span><br><span class="line">(422802, u&#39;利川市&#39;),</span><br><span class="line">(422822, u&#39;建始县&#39;),</span><br><span class="line">(422823, u&#39;巴东县&#39;),</span><br><span class="line">(422825, u&#39;宣恩县&#39;),</span><br><span class="line">(422826, u&#39;咸丰县&#39;),</span><br><span class="line">(422827, u&#39;来凤县&#39;),</span><br><span class="line">(422828, u&#39;鹤峰县&#39;),</span><br><span class="line">(429000, u&#39;省直辖行政单位&#39;),</span><br><span class="line">(429004, u&#39;仙桃市&#39;),</span><br><span class="line">(429005, u&#39;潜江市&#39;),</span><br><span class="line">(429006, u&#39;天门市&#39;),</span><br><span class="line">(429021, u&#39;神农架林区&#39;),</span><br><span class="line">(430000, u&#39;湖南省&#39;),</span><br><span class="line">(430100, u&#39;长沙市&#39;),</span><br><span class="line">(430101, u&#39;市辖区&#39;),</span><br><span class="line">(430102, u&#39;芙蓉区&#39;),</span><br><span class="line">(430103, u&#39;天心区&#39;),</span><br><span class="line">(430104, u&#39;岳麓区&#39;),</span><br><span class="line">(430105, u&#39;开福区&#39;),</span><br><span class="line">(430111, u&#39;雨花区&#39;),</span><br><span class="line">(430121, u&#39;长沙县&#39;),</span><br><span class="line">(430122, u&#39;望城县&#39;),</span><br><span class="line">(430124, u&#39;宁乡县&#39;),</span><br><span class="line">(430181, u&#39;浏阳市&#39;),</span><br><span class="line">(430200, u&#39;株洲市&#39;),</span><br><span class="line">(430201, u&#39;市辖区&#39;),</span><br><span class="line">(430202, u&#39;荷塘区&#39;),</span><br><span class="line">(430203, u&#39;芦淞区&#39;),</span><br><span class="line">(430204, u&#39;石峰区&#39;),</span><br><span class="line">(430211, u&#39;天元区&#39;),</span><br><span class="line">(430221, u&#39;株洲县&#39;),</span><br><span class="line">(430223, u&#39;攸县&#39;),</span><br><span class="line">(430224, u&#39;茶陵县&#39;),</span><br><span class="line">(430225, u&#39;炎陵县&#39;),</span><br><span class="line">(430281, u&#39;醴陵市&#39;),</span><br><span class="line">(430300, u&#39;湘潭市&#39;),</span><br><span class="line">(430301, u&#39;市辖区&#39;),</span><br><span class="line">(430302, u&#39;雨湖区&#39;),</span><br><span class="line">(430304, u&#39;岳塘区&#39;),</span><br><span class="line">(430321, u&#39;湘潭县&#39;),</span><br><span class="line">(430381, u&#39;湘乡市&#39;),</span><br><span class="line">(430382, u&#39;韶山市&#39;),</span><br><span class="line">(430400, u&#39;衡阳市&#39;),</span><br><span class="line">(430401, u&#39;市辖区&#39;),</span><br><span class="line">(430405, u&#39;珠晖区&#39;),</span><br><span class="line">(430406, u&#39;雁峰区&#39;),</span><br><span class="line">(430407, u&#39;石鼓区&#39;),</span><br><span class="line">(430408, u&#39;蒸湘区&#39;),</span><br><span class="line">(430412, u&#39;南岳区&#39;),</span><br><span class="line">(430421, u&#39;衡阳县&#39;),</span><br><span class="line">(430422, u&#39;衡南县&#39;),</span><br><span class="line">(430423, u&#39;衡山县&#39;),</span><br><span class="line">(430424, u&#39;衡东县&#39;),</span><br><span class="line">(430426, u&#39;祁东县&#39;),</span><br><span class="line">(430481, u&#39;耒阳市&#39;),</span><br><span class="line">(430482, u&#39;常宁市&#39;),</span><br><span class="line">(430500, u&#39;邵阳市&#39;),</span><br><span class="line">(430501, u&#39;市辖区&#39;),</span><br><span class="line">(430502, u&#39;双清区&#39;),</span><br><span class="line">(430503, u&#39;大祥区&#39;),</span><br><span class="line">(430511, u&#39;北塔区&#39;),</span><br><span class="line">(430521, u&#39;邵东县&#39;),</span><br><span class="line">(430522, u&#39;新邵县&#39;),</span><br><span class="line">(430523, u&#39;邵阳县&#39;),</span><br><span class="line">(430524, u&#39;隆回县&#39;),</span><br><span class="line">(430525, u&#39;洞口县&#39;),</span><br><span class="line">(430527, u&#39;绥宁县&#39;),</span><br><span class="line">(430528, u&#39;新宁县&#39;),</span><br><span class="line">(430529, u&#39;城步苗族自治县&#39;),</span><br><span class="line">(430581, u&#39;武冈市&#39;),</span><br><span class="line">(430600, u&#39;岳阳市&#39;),</span><br><span class="line">(430601, u&#39;市辖区&#39;),</span><br><span class="line">(430602, u&#39;岳阳楼区&#39;),</span><br><span class="line">(430603, u&#39;云溪区&#39;),</span><br><span class="line">(430611, u&#39;君山区&#39;),</span><br><span class="line">(430621, u&#39;岳阳县&#39;),</span><br><span class="line">(430623, u&#39;华容县&#39;),</span><br><span class="line">(430624, u&#39;湘阴县&#39;),</span><br><span class="line">(430626, u&#39;平江县&#39;),</span><br><span class="line">(430681, u&#39;汩罗市&#39;),</span><br><span class="line">(430682, u&#39;临湘市&#39;),</span><br><span class="line">(430700, u&#39;常德市&#39;),</span><br><span class="line">(430701, u&#39;市辖区&#39;),</span><br><span class="line">(430702, u&#39;武陵区&#39;),</span><br><span class="line">(430703, u&#39;鼎城区&#39;),</span><br><span class="line">(430721, u&#39;安乡县&#39;),</span><br><span class="line">(430722, u&#39;汉寿县&#39;),</span><br><span class="line">(430723, u&#39;澧县&#39;),</span><br><span class="line">(430724, u&#39;临澧县&#39;),</span><br><span class="line">(430725, u&#39;桃源县&#39;),</span><br><span class="line">(430726, u&#39;石门县&#39;),</span><br><span class="line">(430781, u&#39;津市市&#39;),</span><br><span class="line">(430800, u&#39;张家界市&#39;),</span><br><span class="line">(430801, u&#39;市辖区&#39;),</span><br><span class="line">(430802, u&#39;永定区&#39;),</span><br><span class="line">(430811, u&#39;武陵源区&#39;),</span><br><span class="line">(430821, u&#39;慈利县&#39;),</span><br><span class="line">(430822, u&#39;桑植县&#39;),</span><br><span class="line">(430900, u&#39;益阳市&#39;),</span><br><span class="line">(430901, u&#39;市辖区&#39;),</span><br><span class="line">(430902, u&#39;资阳区&#39;),</span><br><span class="line">(430903, u&#39;赫山区&#39;),</span><br><span class="line">(430921, u&#39;南县&#39;),</span><br><span class="line">(430922, u&#39;桃江县&#39;),</span><br><span class="line">(430923, u&#39;安化县&#39;),</span><br><span class="line">(430981, u&#39;沅江市&#39;),</span><br><span class="line">(431000, u&#39;郴州市&#39;),</span><br><span class="line">(431001, u&#39;市辖区&#39;),</span><br><span class="line">(431002, u&#39;北湖区&#39;),</span><br><span class="line">(431003, u&#39;苏仙区&#39;),</span><br><span class="line">(431021, u&#39;桂阳县&#39;),</span><br><span class="line">(431022, u&#39;宜章县&#39;),</span><br><span class="line">(431023, u&#39;永兴县&#39;),</span><br><span class="line">(431024, u&#39;嘉禾县&#39;),</span><br><span class="line">(431025, u&#39;临武县&#39;),</span><br><span class="line">(431026, u&#39;汝城县&#39;),</span><br><span class="line">(431027, u&#39;桂东县&#39;),</span><br><span class="line">(431028, u&#39;安仁县&#39;),</span><br><span class="line">(431081, u&#39;资兴市&#39;),</span><br><span class="line">(431100, u&#39;永州市&#39;),</span><br><span class="line">(431101, u&#39;市辖区&#39;),</span><br><span class="line">(431102, u&#39;零陵区&#39;),</span><br><span class="line">(431103, u&#39;冷水滩区&#39;),</span><br><span class="line">(431121, u&#39;祁阳县&#39;),</span><br><span class="line">(431122, u&#39;东安县&#39;),</span><br><span class="line">(431123, u&#39;双牌县&#39;),</span><br><span class="line">(431124, u&#39;道县&#39;),</span><br><span class="line">(431125, u&#39;江永县&#39;),</span><br><span class="line">(431126, u&#39;宁远县&#39;),</span><br><span class="line">(431127, u&#39;蓝山县&#39;),</span><br><span class="line">(431128, u&#39;新田县&#39;),</span><br><span class="line">(431129, u&#39;江华县&#39;),</span><br><span class="line">(431200, u&#39;怀化市&#39;),</span><br><span class="line">(431201, u&#39;市辖区&#39;),</span><br><span class="line">(431202, u&#39;鹤城区&#39;),</span><br><span class="line">(431221, u&#39;中方县&#39;),</span><br><span class="line">(431222, u&#39;沅陵县&#39;),</span><br><span class="line">(431223, u&#39;辰溪县&#39;),</span><br><span class="line">(431224, u&#39;溆浦县&#39;),</span><br><span class="line">(431225, u&#39;会同县&#39;),</span><br><span class="line">(431226, u&#39;麻阳苗族自治县&#39;),</span><br><span class="line">(431227, u&#39;新晃侗族自治县&#39;),</span><br><span class="line">(431228, u&#39;芷江侗族自治县&#39;),</span><br><span class="line">(431229, u&#39;靖州苗族侗族县&#39;),</span><br><span class="line">(431230, u&#39;通道侗族自治县&#39;),</span><br><span class="line">(431281, u&#39;洪江市&#39;),</span><br><span class="line">(431300, u&#39;娄底市&#39;),</span><br><span class="line">(431301, u&#39;市辖区&#39;),</span><br><span class="line">(431302, u&#39;娄星区&#39;),</span><br><span class="line">(431321, u&#39;双峰县&#39;),</span><br><span class="line">(431322, u&#39;新化县&#39;),</span><br><span class="line">(431381, u&#39;冷水江市&#39;),</span><br><span class="line">(431382, u&#39;涟源市&#39;),</span><br><span class="line">(433100, u&#39;湘西土家族苗族自治州&#39;),</span><br><span class="line">(433101, u&#39;吉首市&#39;),</span><br><span class="line">(433122, u&#39;泸溪县&#39;),</span><br><span class="line">(433123, u&#39;凤凰县&#39;),</span><br><span class="line">(433124, u&#39;花垣县&#39;),</span><br><span class="line">(433125, u&#39;保靖县&#39;),</span><br><span class="line">(433126, u&#39;古丈县&#39;),</span><br><span class="line">(433127, u&#39;永顺县&#39;),</span><br><span class="line">(433130, u&#39;龙山县&#39;),</span><br><span class="line">(440000, u&#39;广东省&#39;),</span><br><span class="line">(440100, u&#39;广州市&#39;),</span><br><span class="line">(440103, u&#39;荔湾区&#39;),</span><br><span class="line">(440104, u&#39;越秀区&#39;),</span><br><span class="line">(440105, u&#39;海珠区&#39;),</span><br><span class="line">(440106, u&#39;天河区&#39;),</span><br><span class="line">(440111, u&#39;白云区&#39;),</span><br><span class="line">(440112, u&#39;黄埔区&#39;),</span><br><span class="line">(440113, u&#39;番禺区&#39;),</span><br><span class="line">(440114, u&#39;花都区&#39;),</span><br><span class="line">(440115, u&#39;南沙区&#39;),</span><br><span class="line">(440116, u&#39;萝岗区&#39;),</span><br><span class="line">(440183, u&#39;增城市&#39;),</span><br><span class="line">(440184, u&#39;从化市&#39;),</span><br><span class="line">(440200, u&#39;韶关市&#39;),</span><br><span class="line">(440203, u&#39;武江区&#39;),</span><br><span class="line">(440204, u&#39;浈江区&#39;),</span><br><span class="line">(440205, u&#39;曲江区&#39;),</span><br><span class="line">(440222, u&#39;始兴县&#39;),</span><br><span class="line">(440224, u&#39;仁化县&#39;),</span><br><span class="line">(440229, u&#39;翁源县&#39;),</span><br><span class="line">(440232, u&#39;乳源瑶族自治县&#39;),</span><br><span class="line">(440233, u&#39;新丰县&#39;),</span><br><span class="line">(440281, u&#39;乐昌市&#39;),</span><br><span class="line">(440282, u&#39;南雄市&#39;),</span><br><span class="line">(440300, u&#39;深圳市&#39;),</span><br><span class="line">(440303, u&#39;罗湖区&#39;),</span><br><span class="line">(440304, u&#39;福田区&#39;),</span><br><span class="line">(440305, u&#39;南山区&#39;),</span><br><span class="line">(440306, u&#39;宝安区&#39;),</span><br><span class="line">(440307, u&#39;龙岗区&#39;),</span><br><span class="line">(440308, u&#39;盐田区&#39;),</span><br><span class="line">(440400, u&#39;珠海市&#39;),</span><br><span class="line">(440402, u&#39;香洲区&#39;),</span><br><span class="line">(440403, u&#39;斗门区&#39;),</span><br><span class="line">(440404, u&#39;金湾区&#39;),</span><br><span class="line">(440500, u&#39;汕头市&#39;),</span><br><span class="line">(440507, u&#39;龙湖区&#39;),</span><br><span class="line">(440511, u&#39;金平区&#39;),</span><br><span class="line">(440512, u&#39;濠江区&#39;),</span><br><span class="line">(440513, u&#39;潮阳区&#39;),</span><br><span class="line">(440514, u&#39;潮南区&#39;),</span><br><span class="line">(440515, u&#39;澄海区&#39;),</span><br><span class="line">(440523, u&#39;南澳县&#39;),</span><br><span class="line">(440600, u&#39;佛山市&#39;),</span><br><span class="line">(440604, u&#39;禅城区&#39;),</span><br><span class="line">(440605, u&#39;南海区&#39;),</span><br><span class="line">(440606, u&#39;顺德区&#39;),</span><br><span class="line">(440607, u&#39;三水区&#39;),</span><br><span class="line">(440608, u&#39;高明区&#39;),</span><br><span class="line">(440700, u&#39;江门市&#39;),</span><br><span class="line">(440703, u&#39;蓬江区&#39;),</span><br><span class="line">(440704, u&#39;江海区&#39;),</span><br><span class="line">(440705, u&#39;新会区&#39;),</span><br><span class="line">(440781, u&#39;台山市&#39;),</span><br><span class="line">(440783, u&#39;开平市&#39;),</span><br><span class="line">(440784, u&#39;鹤山市&#39;),</span><br><span class="line">(440785, u&#39;恩平市&#39;),</span><br><span class="line">(440800, u&#39;湛江市&#39;),</span><br><span class="line">(440802, u&#39;湛江市赤坎区&#39;),</span><br><span class="line">(440803, u&#39;湛江市霞山区&#39;),</span><br><span class="line">(440804, u&#39;湛江市坡头区&#39;),</span><br><span class="line">(440811, u&#39;湛江市麻章区&#39;),</span><br><span class="line">(440823, u&#39;遂溪县&#39;),</span><br><span class="line">(440825, u&#39;徐闻县&#39;),</span><br><span class="line">(440881, u&#39;廉江市&#39;),</span><br><span class="line">(440882, u&#39;雷州市&#39;),</span><br><span class="line">(440883, u&#39;吴川市&#39;),</span><br><span class="line">(440900, u&#39;茂名市&#39;),</span><br><span class="line">(440902, u&#39;茂南区&#39;),</span><br><span class="line">(440903, u&#39;茂港区&#39;),</span><br><span class="line">(440923, u&#39;电白县&#39;),</span><br><span class="line">(440981, u&#39;高州市&#39;),</span><br><span class="line">(440982, u&#39;化州市&#39;),</span><br><span class="line">(440983, u&#39;信宜市&#39;),</span><br><span class="line">(441200, u&#39;肇庆市&#39;),</span><br><span class="line">(441202, u&#39;端州区&#39;),</span><br><span class="line">(441203, u&#39;鼎湖区&#39;),</span><br><span class="line">(441223, u&#39;广宁县&#39;),</span><br><span class="line">(441224, u&#39;怀集县&#39;),</span><br><span class="line">(441225, u&#39;封开县&#39;),</span><br><span class="line">(441226, u&#39;德庆县&#39;),</span><br><span class="line">(441283, u&#39;高要市&#39;),</span><br><span class="line">(441284, u&#39;四会市&#39;),</span><br><span class="line">(441300, u&#39;惠州市&#39;),</span><br><span class="line">(441302, u&#39;惠城区&#39;),</span><br><span class="line">(441303, u&#39;惠阳区&#39;),</span><br><span class="line">(441322, u&#39;博罗县&#39;),</span><br><span class="line">(441323, u&#39;惠东县&#39;),</span><br><span class="line">(441324, u&#39;龙门县&#39;),</span><br><span class="line">(441400, u&#39;梅州市&#39;),</span><br><span class="line">(441402, u&#39;梅江区&#39;),</span><br><span class="line">(441421, u&#39;梅县&#39;),</span><br><span class="line">(441422, u&#39;大埔县&#39;),</span><br><span class="line">(441423, u&#39;丰顺县&#39;),</span><br><span class="line">(441424, u&#39;五华县&#39;),</span><br><span class="line">(441426, u&#39;平远县&#39;),</span><br><span class="line">(441427, u&#39;蕉岭县&#39;),</span><br><span class="line">(441481, u&#39;兴宁市&#39;),</span><br><span class="line">(441500, u&#39;汕尾市&#39;),</span><br><span class="line">(441501, u&#39;市辖区&#39;),</span><br><span class="line">(441502, u&#39;城区&#39;),</span><br><span class="line">(441521, u&#39;海丰县&#39;),</span><br><span class="line">(441523, u&#39;陆河县&#39;),</span><br><span class="line">(441581, u&#39;陆丰市&#39;),</span><br><span class="line">(441600, u&#39;河源市&#39;),</span><br><span class="line">(441602, u&#39;源城区&#39;),</span><br><span class="line">(441621, u&#39;紫金县&#39;),</span><br><span class="line">(441622, u&#39;龙川县&#39;),</span><br><span class="line">(441623, u&#39;连平县&#39;),</span><br><span class="line">(441624, u&#39;和平县&#39;),</span><br><span class="line">(441625, u&#39;东源县&#39;),</span><br><span class="line">(441700, u&#39;阳江市&#39;),</span><br><span class="line">(441702, u&#39;江城区&#39;),</span><br><span class="line">(441721, u&#39;阳西县&#39;),</span><br><span class="line">(441723, u&#39;阳东县&#39;),</span><br><span class="line">(441781, u&#39;阳春市&#39;),</span><br><span class="line">(441800, u&#39;清远市&#39;),</span><br><span class="line">(441802, u&#39;清城区&#39;),</span><br><span class="line">(441821, u&#39;佛冈县&#39;),</span><br><span class="line">(441823, u&#39;阳山县&#39;),</span><br><span class="line">(441825, u&#39;连山县&#39;),</span><br><span class="line">(441826, u&#39;连南瑶族自治县&#39;),</span><br><span class="line">(441827, u&#39;清新县&#39;),</span><br><span class="line">(441881, u&#39;英德市&#39;),</span><br><span class="line">(441882, u&#39;连州市&#39;),</span><br><span class="line">(441900, u&#39;东莞市&#39;),</span><br><span class="line">(441901, u&#39;市辖区&#39;),</span><br><span class="line">(442000, u&#39;中山市&#39;),</span><br><span class="line">(442001, u&#39;市辖区&#39;),</span><br><span class="line">(445100, u&#39;潮州市&#39;),</span><br><span class="line">(445102, u&#39;潮州市湘桥区&#39;),</span><br><span class="line">(445121, u&#39;潮州市潮安县&#39;),</span><br><span class="line">(445122, u&#39;潮州市饶平县&#39;),</span><br><span class="line">(445200, u&#39;揭阳市&#39;),</span><br><span class="line">(445202, u&#39;榕城区&#39;),</span><br><span class="line">(445221, u&#39;揭东县&#39;),</span><br><span class="line">(445222, u&#39;揭西县&#39;),</span><br><span class="line">(445224, u&#39;惠来县&#39;),</span><br><span class="line">(445281, u&#39;普宁市&#39;),</span><br><span class="line">(445300, u&#39;云浮市&#39;),</span><br><span class="line">(445302, u&#39;云城区&#39;),</span><br><span class="line">(445321, u&#39;新兴县&#39;),</span><br><span class="line">(445322, u&#39;郁南县&#39;),</span><br><span class="line">(445323, u&#39;云安县&#39;),</span><br><span class="line">(445381, u&#39;罗定市&#39;),</span><br><span class="line">(450000, u&#39;广西壮族自治区&#39;),</span><br><span class="line">(450100, u&#39;南宁市&#39;),</span><br><span class="line">(450101, u&#39;市辖区&#39;),</span><br><span class="line">(450102, u&#39;兴宁区&#39;),</span><br><span class="line">(450103, u&#39;青秀区&#39;),</span><br><span class="line">(450105, u&#39;江南区&#39;),</span><br><span class="line">(450107, u&#39;西乡塘区&#39;),</span><br><span class="line">(450108, u&#39;良庆区&#39;),</span><br><span class="line">(450109, u&#39;邕宁区&#39;),</span><br><span class="line">(450122, u&#39;武鸣县&#39;),</span><br><span class="line">(450123, u&#39;隆安县&#39;),</span><br><span class="line">(450124, u&#39;马山县&#39;),</span><br><span class="line">(450125, u&#39;上林县&#39;),</span><br><span class="line">(450126, u&#39;宾阳县&#39;),</span><br><span class="line">(450127, u&#39;横县&#39;),</span><br><span class="line">(450200, u&#39;柳州市&#39;),</span><br><span class="line">(450201, u&#39;市辖区&#39;),</span><br><span class="line">(450202, u&#39;城中区&#39;),</span><br><span class="line">(450203, u&#39;鱼峰区&#39;),</span><br><span class="line">(450204, u&#39;柳南区&#39;),</span><br><span class="line">(450205, u&#39;柳北区&#39;),</span><br><span class="line">(450221, u&#39;柳江县&#39;),</span><br><span class="line">(450222, u&#39;柳城县&#39;),</span><br><span class="line">(450223, u&#39;鹿寨县&#39;),</span><br><span class="line">(450224, u&#39;融安县&#39;),</span><br><span class="line">(450225, u&#39;融水苗族自治县&#39;),</span><br><span class="line">(450226, u&#39;三江侗族自治县&#39;),</span><br><span class="line">(450300, u&#39;桂林市&#39;),</span><br><span class="line">(450301, u&#39;市辖区&#39;),</span><br><span class="line">(450302, u&#39;秀峰区&#39;),</span><br><span class="line">(450303, u&#39;叠彩区&#39;),</span><br><span class="line">(450304, u&#39;象山区&#39;),</span><br><span class="line">(450305, u&#39;七星区&#39;),</span><br><span class="line">(450311, u&#39;雁山区&#39;),</span><br><span class="line">(450321, u&#39;阳朔县&#39;),</span><br><span class="line">(450322, u&#39;临桂县&#39;),</span><br><span class="line">(450323, u&#39;灵川县&#39;),</span><br><span class="line">(450324, u&#39;全州县&#39;),</span><br><span class="line">(450325, u&#39;兴安县&#39;),</span><br><span class="line">(450326, u&#39;永福县&#39;),</span><br><span class="line">(450327, u&#39;灌阳县&#39;),</span><br><span class="line">(450328, u&#39;龙胜各族自治县&#39;),</span><br><span class="line">(450329, u&#39;资源县&#39;),</span><br><span class="line">(450330, u&#39;平乐县&#39;),</span><br><span class="line">(450331, u&#39;荔浦县&#39;),</span><br><span class="line">(450332, u&#39;恭城县&#39;),</span><br><span class="line">(450400, u&#39;梧州市&#39;),</span><br><span class="line">(450401, u&#39;市辖区&#39;),</span><br><span class="line">(450403, u&#39;万秀区&#39;),</span><br><span class="line">(450404, u&#39;蝶山区&#39;),</span><br><span class="line">(450405, u&#39;长洲区&#39;),</span><br><span class="line">(450421, u&#39;苍梧县&#39;),</span><br><span class="line">(450422, u&#39;藤县&#39;),</span><br><span class="line">(450423, u&#39;蒙山县&#39;),</span><br><span class="line">(450481, u&#39;岑溪市&#39;),</span><br><span class="line">(450500, u&#39;北海市&#39;),</span><br><span class="line">(450501, u&#39;市辖区&#39;),</span><br><span class="line">(450502, u&#39;海城区&#39;),</span><br><span class="line">(450503, u&#39;银海区&#39;),</span><br><span class="line">(450512, u&#39;铁山港区&#39;),</span><br><span class="line">(450521, u&#39;合浦县&#39;),</span><br><span class="line">(450600, u&#39;防城港市&#39;),</span><br><span class="line">(450601, u&#39;市辖区&#39;),</span><br><span class="line">(450602, u&#39;港口区&#39;),</span><br><span class="line">(450603, u&#39;防城区&#39;),</span><br><span class="line">(450621, u&#39;上思县&#39;),</span><br><span class="line">(450681, u&#39;东兴市&#39;),</span><br><span class="line">(450700, u&#39;钦州市&#39;),</span><br><span class="line">(450701, u&#39;市辖区&#39;),</span><br><span class="line">(450702, u&#39;钦南区&#39;),</span><br><span class="line">(450703, u&#39;钦北区&#39;),</span><br><span class="line">(450721, u&#39;灵山县&#39;),</span><br><span class="line">(450722, u&#39;浦北县&#39;),</span><br><span class="line">(450800, u&#39;贵港市&#39;),</span><br><span class="line">(450801, u&#39;市辖区&#39;),</span><br><span class="line">(450802, u&#39;港北区&#39;),</span><br><span class="line">(450803, u&#39;港南区&#39;),</span><br><span class="line">(450804, u&#39;覃塘区&#39;),</span><br><span class="line">(450821, u&#39;平南县&#39;),</span><br><span class="line">(450881, u&#39;桂平市&#39;),</span><br><span class="line">(450900, u&#39;玉林市&#39;),</span><br><span class="line">(450901, u&#39;市辖区&#39;),</span><br><span class="line">(450902, u&#39;玉州区&#39;),</span><br><span class="line">(450921, u&#39;容县&#39;),</span><br><span class="line">(450922, u&#39;陆川县&#39;),</span><br><span class="line">(450923, u&#39;博白县&#39;),</span><br><span class="line">(450924, u&#39;兴业县&#39;),</span><br><span class="line">(450981, u&#39;北流市&#39;),</span><br><span class="line">(451000, u&#39;百色市&#39;),</span><br><span class="line">(451001, u&#39;市辖区&#39;),</span><br><span class="line">(451002, u&#39;右江区&#39;),</span><br><span class="line">(451021, u&#39;田阳县&#39;),</span><br><span class="line">(451022, u&#39;田东县&#39;),</span><br><span class="line">(451023, u&#39;平果县&#39;),</span><br><span class="line">(451024, u&#39;德保县&#39;),</span><br><span class="line">(451025, u&#39;靖西县&#39;),</span><br><span class="line">(451026, u&#39;那坡县&#39;),</span><br><span class="line">(451027, u&#39;凌云县&#39;),</span><br><span class="line">(451028, u&#39;乐业县&#39;),</span><br><span class="line">(451029, u&#39;田林县&#39;),</span><br><span class="line">(451030, u&#39;西林县&#39;),</span><br><span class="line">(451031, u&#39;隆林各族自治县&#39;),</span><br><span class="line">(451100, u&#39;贺州市&#39;),</span><br><span class="line">(451101, u&#39;市辖区&#39;),</span><br><span class="line">(451102, u&#39;八步区&#39;),</span><br><span class="line">(451121, u&#39;昭平县&#39;),</span><br><span class="line">(451122, u&#39;钟山县&#39;),</span><br><span class="line">(451123, u&#39;富川瑶族自治县&#39;),</span><br><span class="line">(451200, u&#39;河池市&#39;),</span><br><span class="line">(451201, u&#39;市辖区&#39;),</span><br><span class="line">(451202, u&#39;金城江区&#39;),</span><br><span class="line">(451221, u&#39;南丹县&#39;),</span><br><span class="line">(451222, u&#39;天峨县&#39;),</span><br><span class="line">(451223, u&#39;凤山县&#39;),</span><br><span class="line">(451224, u&#39;东兰县&#39;),</span><br><span class="line">(451225, u&#39;罗城仫佬族自治县&#39;),</span><br><span class="line">(451226, u&#39;环江毛南族自治县&#39;),</span><br><span class="line">(451227, u&#39;巴马瑶族自治县&#39;),</span><br><span class="line">(451228, u&#39;都安瑶族自治县&#39;),</span><br><span class="line">(451229, u&#39;大化瑶族自治县&#39;),</span><br><span class="line">(451281, u&#39;宜州市&#39;),</span><br><span class="line">(451300, u&#39;来宾市&#39;),</span><br><span class="line">(451301, u&#39;市辖区&#39;),</span><br><span class="line">(451302, u&#39;兴宾区&#39;),</span><br><span class="line">(451321, u&#39;忻城县&#39;),</span><br><span class="line">(451322, u&#39;象州县&#39;),</span><br><span class="line">(451323, u&#39;武宣县&#39;),</span><br><span class="line">(451324, u&#39;金秀瑶族自治县&#39;),</span><br><span class="line">(451381, u&#39;合山市&#39;),</span><br><span class="line">(451400, u&#39;崇左市&#39;),</span><br><span class="line">(451401, u&#39;市辖区&#39;),</span><br><span class="line">(451402, u&#39;江州区&#39;),</span><br><span class="line">(451421, u&#39;扶绥县&#39;),</span><br><span class="line">(451422, u&#39;宁明县&#39;),</span><br><span class="line">(451423, u&#39;龙州县&#39;),</span><br><span class="line">(451424, u&#39;大新县&#39;),</span><br><span class="line">(451425, u&#39;天等县&#39;),</span><br><span class="line">(451481, u&#39;凭祥市&#39;),</span><br><span class="line">(460000, u&#39;海南省&#39;),</span><br><span class="line">(460100, u&#39;海口市&#39;),</span><br><span class="line">(460101, u&#39;市辖区&#39;),</span><br><span class="line">(460105, u&#39;秀英区&#39;),</span><br><span class="line">(460106, u&#39;龙华区&#39;),</span><br><span class="line">(460107, u&#39;琼山区&#39;),</span><br><span class="line">(460108, u&#39;美兰区&#39;),</span><br><span class="line">(460200, u&#39;三亚市&#39;),</span><br><span class="line">(460201, u&#39;市辖区&#39;),</span><br><span class="line">(469000, u&#39;省属虚拟市&#39;),</span><br><span class="line">(469001, u&#39;五指山市&#39;),</span><br><span class="line">(469002, u&#39;琼海市&#39;),</span><br><span class="line">(469003, u&#39;儋州市&#39;),</span><br><span class="line">(469005, u&#39;文昌市&#39;),</span><br><span class="line">(469006, u&#39;万宁市&#39;),</span><br><span class="line">(469007, u&#39;东方市&#39;),</span><br><span class="line">(469025, u&#39;定安县&#39;),</span><br><span class="line">(469026, u&#39;屯昌县&#39;),</span><br><span class="line">(469027, u&#39;澄迈县&#39;),</span><br><span class="line">(469028, u&#39;临高县&#39;),</span><br><span class="line">(469030, u&#39;白沙黎族自治县&#39;),</span><br><span class="line">(469031, u&#39;昌江黎族自治县&#39;),</span><br><span class="line">(469033, u&#39;乐东黎族自治县&#39;),</span><br><span class="line">(469034, u&#39;陵水黎族自治县&#39;),</span><br><span class="line">(469035, u&#39;保亭黎族苗族自治县&#39;),</span><br><span class="line">(469036, u&#39;琼中黎族苗族自治县&#39;),</span><br><span class="line">(469037, u&#39;西沙群岛&#39;),</span><br><span class="line">(469038, u&#39;南沙群岛&#39;),</span><br><span class="line">(469039, u&#39;中沙群岛的岛礁及其海域&#39;),</span><br><span class="line">(500000, u&#39;重庆市&#39;),</span><br><span class="line">(500100, u&#39;市辖区&#39;),</span><br><span class="line">(500101, u&#39;万州区&#39;),</span><br><span class="line">(500102, u&#39;涪陵区&#39;),</span><br><span class="line">(500103, u&#39;渝中区&#39;),</span><br><span class="line">(500104, u&#39;大渡口区&#39;),</span><br><span class="line">(500105, u&#39;江北区&#39;),</span><br><span class="line">(500106, u&#39;沙坪坝区&#39;),</span><br><span class="line">(500107, u&#39;九龙坡区&#39;),</span><br><span class="line">(500108, u&#39;南岸区&#39;),</span><br><span class="line">(500109, u&#39;北碚区&#39;),</span><br><span class="line">(500110, u&#39;万盛区&#39;),</span><br><span class="line">(500111, u&#39;双桥区&#39;),</span><br><span class="line">(500112, u&#39;渝北区&#39;),</span><br><span class="line">(500113, u&#39;巴南区&#39;),</span><br><span class="line">(500114, u&#39;黔江区&#39;),</span><br><span class="line">(500115, u&#39;长寿区&#39;),</span><br><span class="line">(500116, u&#39;江津区&#39;),</span><br><span class="line">(500117, u&#39;合川区&#39;),</span><br><span class="line">(500118, u&#39;永川区&#39;),</span><br><span class="line">(500119, u&#39;南川区&#39;),</span><br><span class="line">(500200, u&#39;县&#39;),</span><br><span class="line">(500222, u&#39;綦江县&#39;),</span><br><span class="line">(500223, u&#39;潼南县&#39;),</span><br><span class="line">(500224, u&#39;铜梁县&#39;),</span><br><span class="line">(500225, u&#39;大足县&#39;),</span><br><span class="line">(500226, u&#39;荣昌县&#39;),</span><br><span class="line">(500227, u&#39;璧山县&#39;),</span><br><span class="line">(500228, u&#39;梁平县&#39;),</span><br><span class="line">(500229, u&#39;城口县&#39;),</span><br><span class="line">(500230, u&#39;丰都县&#39;),</span><br><span class="line">(500231, u&#39;垫江县&#39;),</span><br><span class="line">(500232, u&#39;武隆县&#39;),</span><br><span class="line">(500233, u&#39;忠县&#39;),</span><br><span class="line">(500234, u&#39;开县&#39;),</span><br><span class="line">(500235, u&#39;云阳县&#39;),</span><br><span class="line">(500236, u&#39;奉节县&#39;),</span><br><span class="line">(500237, u&#39;巫山县&#39;),</span><br><span class="line">(500238, u&#39;巫溪县&#39;),</span><br><span class="line">(500240, u&#39;石柱县&#39;),</span><br><span class="line">(500241, u&#39;秀山土家族苗族自治县&#39;),</span><br><span class="line">(500242, u&#39;酉阳土家族苗族自治县&#39;),</span><br><span class="line">(500243, u&#39;彭水苗族土家族自治县&#39;),</span><br><span class="line">(510000, u&#39;四川省&#39;),</span><br><span class="line">(510100, u&#39;成都市&#39;),</span><br><span class="line">(510101, u&#39;市辖区&#39;),</span><br><span class="line">(510104, u&#39;锦江区&#39;),</span><br><span class="line">(510105, u&#39;青羊区&#39;),</span><br><span class="line">(510106, u&#39;金牛区&#39;),</span><br><span class="line">(510107, u&#39;武侯区&#39;),</span><br><span class="line">(510108, u&#39;成华区&#39;),</span><br><span class="line">(510112, u&#39;龙泉驿区&#39;),</span><br><span class="line">(510113, u&#39;青白江区&#39;),</span><br><span class="line">(510114, u&#39;新都区&#39;),</span><br><span class="line">(510115, u&#39;温江区&#39;),</span><br><span class="line">(510121, u&#39;金堂县&#39;),</span><br><span class="line">(510122, u&#39;双流县&#39;),</span><br><span class="line">(510124, u&#39;郫县&#39;),</span><br><span class="line">(510129, u&#39;大邑县&#39;),</span><br><span class="line">(510131, u&#39;蒲江县&#39;),</span><br><span class="line">(510132, u&#39;新津县&#39;),</span><br><span class="line">(510181, u&#39;都江堰市&#39;),</span><br><span class="line">(510182, u&#39;彭州市&#39;),</span><br><span class="line">(510183, u&#39;邛崃市&#39;),</span><br><span class="line">(510184, u&#39;崇州市&#39;),</span><br><span class="line">(510300, u&#39;自贡市&#39;),</span><br><span class="line">(510301, u&#39;市辖区&#39;),</span><br><span class="line">(510302, u&#39;自流井区&#39;),</span><br><span class="line">(510303, u&#39;贡井区&#39;),</span><br><span class="line">(510304, u&#39;大安区&#39;),</span><br><span class="line">(510311, u&#39;沿滩区&#39;),</span><br><span class="line">(510321, u&#39;荣县&#39;),</span><br><span class="line">(510322, u&#39;富顺县&#39;),</span><br><span class="line">(510400, u&#39;攀枝花市&#39;),</span><br><span class="line">(510401, u&#39;市辖区&#39;),</span><br><span class="line">(510402, u&#39;攀枝花东区&#39;),</span><br><span class="line">(510403, u&#39;西区&#39;),</span><br><span class="line">(510411, u&#39;仁和区&#39;),</span><br><span class="line">(510421, u&#39;米易县&#39;),</span><br><span class="line">(510422, u&#39;盐边县&#39;),</span><br><span class="line">(510500, u&#39;泸州市&#39;),</span><br><span class="line">(510501, u&#39;市辖区&#39;),</span><br><span class="line">(510502, u&#39;江阳区&#39;),</span><br><span class="line">(510503, u&#39;纳溪区&#39;),</span><br><span class="line">(510504, u&#39;龙马潭区&#39;),</span><br><span class="line">(510521, u&#39;泸县&#39;),</span><br><span class="line">(510522, u&#39;合江县&#39;),</span><br><span class="line">(510524, u&#39;叙永县&#39;),</span><br><span class="line">(510525, u&#39;古蔺县&#39;),</span><br><span class="line">(510600, u&#39;德阳市&#39;),</span><br><span class="line">(510601, u&#39;市辖区&#39;),</span><br><span class="line">(510603, u&#39;旌阳区&#39;),</span><br><span class="line">(510623, u&#39;中江县&#39;),</span><br><span class="line">(510626, u&#39;罗江县&#39;),</span><br><span class="line">(510681, u&#39;广汉市&#39;),</span><br><span class="line">(510682, u&#39;什邡市&#39;),</span><br><span class="line">(510683, u&#39;绵竹市&#39;),</span><br><span class="line">(510700, u&#39;绵阳市&#39;),</span><br><span class="line">(510701, u&#39;市辖区&#39;),</span><br><span class="line">(510703, u&#39;涪城区&#39;),</span><br><span class="line">(510704, u&#39;游仙区&#39;),</span><br><span class="line">(510722, u&#39;三台县&#39;),</span><br><span class="line">(510723, u&#39;盐亭县&#39;),</span><br><span class="line">(510724, u&#39;安县&#39;),</span><br><span class="line">(510725, u&#39;梓潼县&#39;),</span><br><span class="line">(510726, u&#39;北川羌族自治县&#39;),</span><br><span class="line">(510727, u&#39;平武县&#39;),</span><br><span class="line">(510781, u&#39;江油市&#39;),</span><br><span class="line">(510800, u&#39;广元市&#39;),</span><br><span class="line">(510801, u&#39;市辖区&#39;),</span><br><span class="line">(510802, u&#39;市中区&#39;),</span><br><span class="line">(510811, u&#39;元坝区&#39;),</span><br><span class="line">(510812, u&#39;朝天区&#39;),</span><br><span class="line">(510821, u&#39;旺苍县&#39;),</span><br><span class="line">(510822, u&#39;青川县&#39;),</span><br><span class="line">(510823, u&#39;剑阁县&#39;),</span><br><span class="line">(510824, u&#39;苍溪县&#39;),</span><br><span class="line">(510900, u&#39;遂宁市&#39;),</span><br><span class="line">(510901, u&#39;市辖区&#39;),</span><br><span class="line">(510903, u&#39;船山区&#39;),</span><br><span class="line">(510904, u&#39;安居区&#39;),</span><br><span class="line">(510921, u&#39;蓬溪县&#39;),</span><br><span class="line">(510922, u&#39;射洪县&#39;),</span><br><span class="line">(510923, u&#39;大英县&#39;),</span><br><span class="line">(511000, u&#39;内江市&#39;),</span><br><span class="line">(511001, u&#39;市辖区&#39;),</span><br><span class="line">(511002, u&#39;市中区&#39;),</span><br><span class="line">(511011, u&#39;东兴区&#39;),</span><br><span class="line">(511024, u&#39;威远县&#39;),</span><br><span class="line">(511025, u&#39;资中县&#39;),</span><br><span class="line">(511028, u&#39;隆昌县&#39;),</span><br><span class="line">(511100, u&#39;乐山市&#39;),</span><br><span class="line">(511101, u&#39;市辖区&#39;),</span><br><span class="line">(511102, u&#39;市中区&#39;),</span><br><span class="line">(511111, u&#39;沙湾区&#39;),</span><br><span class="line">(511112, u&#39;五通桥区&#39;),</span><br><span class="line">(511113, u&#39;金口河区&#39;),</span><br><span class="line">(511123, u&#39;犍为县&#39;),</span><br><span class="line">(511124, u&#39;井研县&#39;),</span><br><span class="line">(511126, u&#39;夹江县&#39;),</span><br><span class="line">(511129, u&#39;沐川县&#39;),</span><br><span class="line">(511132, u&#39;峨边彝族自治县&#39;),</span><br><span class="line">(511133, u&#39;马边彝族自治县&#39;),</span><br><span class="line">(511181, u&#39;峨眉山市&#39;),</span><br><span class="line">(511300, u&#39;南充市&#39;),</span><br><span class="line">(511301, u&#39;市辖区&#39;),</span><br><span class="line">(511302, u&#39;顺庆区&#39;),</span><br><span class="line">(511303, u&#39;高坪区&#39;),</span><br><span class="line">(511304, u&#39;嘉陵区&#39;),</span><br><span class="line">(511321, u&#39;南部县&#39;),</span><br><span class="line">(511322, u&#39;营山县&#39;),</span><br><span class="line">(511323, u&#39;蓬安县&#39;),</span><br><span class="line">(511324, u&#39;仪陇县&#39;),</span><br><span class="line">(511325, u&#39;西充县&#39;),</span><br><span class="line">(511381, u&#39;阆中市&#39;),</span><br><span class="line">(511400, u&#39;眉山市&#39;),</span><br><span class="line">(511401, u&#39;市辖区&#39;),</span><br><span class="line">(511402, u&#39;东坡区&#39;),</span><br><span class="line">(511421, u&#39;仁寿县&#39;),</span><br><span class="line">(511422, u&#39;彭山县&#39;),</span><br><span class="line">(511423, u&#39;洪雅县&#39;),</span><br><span class="line">(511424, u&#39;丹棱县&#39;),</span><br><span class="line">(511425, u&#39;青神县&#39;),</span><br><span class="line">(511500, u&#39;宜宾市&#39;),</span><br><span class="line">(511501, u&#39;市辖区&#39;),</span><br><span class="line">(511502, u&#39;翠屏区&#39;),</span><br><span class="line">(511521, u&#39;宜宾县&#39;),</span><br><span class="line">(511522, u&#39;南溪县&#39;),</span><br><span class="line">(511523, u&#39;江安县&#39;),</span><br><span class="line">(511524, u&#39;长宁县&#39;),</span><br><span class="line">(511525, u&#39;高县&#39;),</span><br><span class="line">(511526, u&#39;珙县&#39;),</span><br><span class="line">(511527, u&#39;筠连县&#39;),</span><br><span class="line">(511528, u&#39;兴文县&#39;),</span><br><span class="line">(511529, u&#39;屏山县&#39;),</span><br><span class="line">(511600, u&#39;广安市&#39;),</span><br><span class="line">(511601, u&#39;市辖区&#39;),</span><br><span class="line">(511602, u&#39;广安区&#39;),</span><br><span class="line">(511621, u&#39;岳池县&#39;),</span><br><span class="line">(511622, u&#39;武胜县&#39;),</span><br><span class="line">(511623, u&#39;邻水县&#39;),</span><br><span class="line">(511681, u&#39;华蓥市&#39;),</span><br><span class="line">(511700, u&#39;达州市&#39;),</span><br><span class="line">(511701, u&#39;市辖区&#39;),</span><br><span class="line">(511702, u&#39;通川区&#39;),</span><br><span class="line">(511721, u&#39;达县&#39;),</span><br><span class="line">(511722, u&#39;宣汉县&#39;),</span><br><span class="line">(511723, u&#39;开江县&#39;),</span><br><span class="line">(511724, u&#39;大竹县&#39;),</span><br><span class="line">(511725, u&#39;渠县&#39;),</span><br><span class="line">(511781, u&#39;万源市&#39;),</span><br><span class="line">(511800, u&#39;雅安市&#39;),</span><br><span class="line">(511801, u&#39;市辖区&#39;),</span><br><span class="line">(511802, u&#39;雨城区&#39;),</span><br><span class="line">(511821, u&#39;名山县&#39;),</span><br><span class="line">(511822, u&#39;荥经县&#39;),</span><br><span class="line">(511823, u&#39;汉源县&#39;),</span><br><span class="line">(511824, u&#39;石棉县&#39;),</span><br><span class="line">(511825, u&#39;天全县&#39;),</span><br><span class="line">(511826, u&#39;芦山县&#39;),</span><br><span class="line">(511827, u&#39;宝兴县&#39;),</span><br><span class="line">(511900, u&#39;巴中市&#39;),</span><br><span class="line">(511901, u&#39;市辖区&#39;),</span><br><span class="line">(511902, u&#39;巴州区&#39;),</span><br><span class="line">(511921, u&#39;通江县&#39;),</span><br><span class="line">(511922, u&#39;南江县&#39;),</span><br><span class="line">(511923, u&#39;平昌县&#39;),</span><br><span class="line">(512000, u&#39;资阳市&#39;),</span><br><span class="line">(512001, u&#39;市辖区&#39;),</span><br><span class="line">(512002, u&#39;雁江区&#39;),</span><br><span class="line">(512021, u&#39;安岳县&#39;),</span><br><span class="line">(512022, u&#39;乐至县&#39;),</span><br><span class="line">(512081, u&#39;简阳市&#39;),</span><br><span class="line">(513200, u&#39;阿坝州&#39;),</span><br><span class="line">(513221, u&#39;汶川县&#39;),</span><br><span class="line">(513222, u&#39;理县&#39;),</span><br><span class="line">(513223, u&#39;茂县&#39;),</span><br><span class="line">(513224, u&#39;松潘县&#39;),</span><br><span class="line">(513225, u&#39;九寨沟县&#39;),</span><br><span class="line">(513226, u&#39;金川县&#39;),</span><br><span class="line">(513227, u&#39;小金县&#39;),</span><br><span class="line">(513228, u&#39;黑水县&#39;),</span><br><span class="line">(513229, u&#39;马尔康县&#39;),</span><br><span class="line">(513230, u&#39;壤塘县&#39;),</span><br><span class="line">(513231, u&#39;阿坝县&#39;),</span><br><span class="line">(513232, u&#39;若尔盖县&#39;),</span><br><span class="line">(513233, u&#39;红原县&#39;),</span><br><span class="line">(513300, u&#39;甘孜藏族自治州&#39;),</span><br><span class="line">(513321, u&#39;康定县&#39;),</span><br><span class="line">(513322, u&#39;泸定县&#39;),</span><br><span class="line">(513323, u&#39;丹巴县&#39;),</span><br><span class="line">(513324, u&#39;九龙县&#39;),</span><br><span class="line">(513325, u&#39;雅江县&#39;),</span><br><span class="line">(513326, u&#39;道孚县&#39;),</span><br><span class="line">(513327, u&#39;炉霍县&#39;),</span><br><span class="line">(513328, u&#39;甘孜县&#39;),</span><br><span class="line">(513329, u&#39;新龙县&#39;),</span><br><span class="line">(513330, u&#39;德格县&#39;),</span><br><span class="line">(513331, u&#39;白玉县&#39;),</span><br><span class="line">(513332, u&#39;石渠县&#39;),</span><br><span class="line">(513333, u&#39;色达县&#39;),</span><br><span class="line">(513334, u&#39;理塘县&#39;),</span><br><span class="line">(513335, u&#39;巴塘县&#39;),</span><br><span class="line">(513336, u&#39;乡城县&#39;),</span><br><span class="line">(513337, u&#39;稻城县&#39;),</span><br><span class="line">(513338, u&#39;得荣县&#39;),</span><br><span class="line">(513400, u&#39;凉山州&#39;),</span><br><span class="line">(513401, u&#39;西昌市&#39;),</span><br><span class="line">(513422, u&#39;木里藏族自治县&#39;),</span><br><span class="line">(513423, u&#39;盐源县&#39;),</span><br><span class="line">(513424, u&#39;德昌&#39;),</span><br><span class="line">(513425, u&#39;会理县&#39;),</span><br><span class="line">(513426, u&#39;会东县&#39;),</span><br><span class="line">(513427, u&#39;宁南县&#39;),</span><br><span class="line">(513428, u&#39;普格县&#39;),</span><br><span class="line">(513429, u&#39;布拖县&#39;),</span><br><span class="line">(513430, u&#39;金阳县&#39;),</span><br><span class="line">(513431, u&#39;昭觉县&#39;),</span><br><span class="line">(513432, u&#39;喜德县&#39;),</span><br><span class="line">(513433, u&#39;冕宁县&#39;),</span><br><span class="line">(513434, u&#39;越西县&#39;),</span><br><span class="line">(513435, u&#39;甘洛县&#39;),</span><br><span class="line">(513436, u&#39;美姑县&#39;),</span><br><span class="line">(513437, u&#39;雷波县&#39;),</span><br><span class="line">(520000, u&#39;贵州省&#39;),</span><br><span class="line">(520100, u&#39;贵阳市&#39;),</span><br><span class="line">(520101, u&#39;市辖区&#39;),</span><br><span class="line">(520102, u&#39;南明区&#39;),</span><br><span class="line">(520103, u&#39;云岩区&#39;),</span><br><span class="line">(520111, u&#39;花溪区&#39;),</span><br><span class="line">(520112, u&#39;乌当区&#39;),</span><br><span class="line">(520113, u&#39;白云区&#39;),</span><br><span class="line">(520114, u&#39;小河区&#39;),</span><br><span class="line">(520121, u&#39;开阳县&#39;),</span><br><span class="line">(520122, u&#39;息烽县&#39;),</span><br><span class="line">(520123, u&#39;修文县&#39;),</span><br><span class="line">(520181, u&#39;清镇市&#39;),</span><br><span class="line">(520200, u&#39;六盘水市&#39;),</span><br><span class="line">(520201, u&#39;钟山区&#39;),</span><br><span class="line">(520203, u&#39;六枝特区&#39;),</span><br><span class="line">(520221, u&#39;水城县&#39;),</span><br><span class="line">(520222, u&#39;盘县&#39;),</span><br><span class="line">(520300, u&#39;遵义市&#39;),</span><br><span class="line">(520301, u&#39;市辖区&#39;),</span><br><span class="line">(520302, u&#39;红花岗区&#39;),</span><br><span class="line">(520303, u&#39;汇川区&#39;),</span><br><span class="line">(520321, u&#39;遵义县&#39;),</span><br><span class="line">(520322, u&#39;桐梓县&#39;),</span><br><span class="line">(520323, u&#39;绥阳县&#39;),</span><br><span class="line">(520324, u&#39;正安县&#39;),</span><br><span class="line">(520325, u&#39;道真仡佬族苗族自治县&#39;),</span><br><span class="line">(520326, u&#39;务川仡佬族苗族自治县&#39;),</span><br><span class="line">(520327, u&#39;凤冈县&#39;),</span><br><span class="line">(520328, u&#39;湄潭县&#39;),</span><br><span class="line">(520329, u&#39;余庆县&#39;),</span><br><span class="line">(520330, u&#39;习水县&#39;),</span><br><span class="line">(520381, u&#39;赤水市&#39;),</span><br><span class="line">(520382, u&#39;仁怀市&#39;),</span><br><span class="line">(520400, u&#39;安顺市&#39;),</span><br><span class="line">(520401, u&#39;市辖区&#39;),</span><br><span class="line">(520402, u&#39;西秀区&#39;),</span><br><span class="line">(520421, u&#39;平坝县&#39;),</span><br><span class="line">(520422, u&#39;普定县&#39;),</span><br><span class="line">(520423, u&#39;镇宁布依族苗族自治县&#39;),</span><br><span class="line">(520424, u&#39;关岭自治县&#39;),</span><br><span class="line">(520425, u&#39;紫云苗族布依族自治县&#39;),</span><br><span class="line">(522200, u&#39;铜仁地区&#39;),</span><br><span class="line">(522201, u&#39;铜仁市&#39;),</span><br><span class="line">(522222, u&#39;江口县&#39;),</span><br><span class="line">(522223, u&#39;玉屏侗族自治县&#39;),</span><br><span class="line">(522224, u&#39;石阡县&#39;),</span><br><span class="line">(522225, u&#39;思南县&#39;),</span><br><span class="line">(522226, u&#39;印江土家族苗族自治县&#39;),</span><br><span class="line">(522227, u&#39;德江县&#39;),</span><br><span class="line">(522228, u&#39;沿河土家族自治县&#39;),</span><br><span class="line">(522229, u&#39;松桃苗族自治县&#39;),</span><br><span class="line">(522230, u&#39;万山特区&#39;),</span><br><span class="line">(522300, u&#39;黔西南州&#39;),</span><br><span class="line">(522301, u&#39;兴义市&#39;),</span><br><span class="line">(522322, u&#39;兴仁县&#39;),</span><br><span class="line">(522323, u&#39;普安县&#39;),</span><br><span class="line">(522324, u&#39;晴隆县&#39;),</span><br><span class="line">(522325, u&#39;贞丰县&#39;),</span><br><span class="line">(522326, u&#39;望谟县&#39;),</span><br><span class="line">(522327, u&#39;册亨县&#39;),</span><br><span class="line">(522328, u&#39;安龙县&#39;),</span><br><span class="line">(522400, u&#39;毕节地区&#39;),</span><br><span class="line">(522401, u&#39;毕节市&#39;),</span><br><span class="line">(522422, u&#39;大方县&#39;),</span><br><span class="line">(522423, u&#39;黔西县&#39;),</span><br><span class="line">(522424, u&#39;金沙县&#39;),</span><br><span class="line">(522425, u&#39;织金县&#39;),</span><br><span class="line">(522426, u&#39;纳雍县&#39;),</span><br><span class="line">(522427, u&#39;威宁彝族回族苗族自治县&#39;),</span><br><span class="line">(522428, u&#39;赫章县&#39;),</span><br><span class="line">(522600, u&#39;黔东南苗族侗族自治州&#39;),</span><br><span class="line">(522601, u&#39;凯里市&#39;),</span><br><span class="line">(522622, u&#39;黄平县&#39;),</span><br><span class="line">(522623, u&#39;施秉县&#39;),</span><br><span class="line">(522624, u&#39;三穗县&#39;),</span><br><span class="line">(522625, u&#39;镇远县&#39;),</span><br><span class="line">(522626, u&#39;岑巩县&#39;),</span><br><span class="line">(522627, u&#39;天柱县&#39;),</span><br><span class="line">(522628, u&#39;锦屏县&#39;),</span><br><span class="line">(522629, u&#39;剑河县&#39;),</span><br><span class="line">(522630, u&#39;台江县&#39;),</span><br><span class="line">(522631, u&#39;黎平县&#39;),</span><br><span class="line">(522632, u&#39;榕江县&#39;),</span><br><span class="line">(522633, u&#39;从江县&#39;),</span><br><span class="line">(522634, u&#39;雷山县&#39;),</span><br><span class="line">(522635, u&#39;麻江县&#39;),</span><br><span class="line">(522636, u&#39;丹寨县&#39;),</span><br><span class="line">(522700, u&#39;黔南布依族苗族自治州&#39;),</span><br><span class="line">(522701, u&#39;都匀市&#39;),</span><br><span class="line">(522702, u&#39;福泉市&#39;),</span><br><span class="line">(522722, u&#39;荔波县&#39;),</span><br><span class="line">(522723, u&#39;贵定县&#39;),</span><br><span class="line">(522725, u&#39;瓮安县&#39;),</span><br><span class="line">(522726, u&#39;独山县&#39;),</span><br><span class="line">(522727, u&#39;平塘县&#39;),</span><br><span class="line">(522728, u&#39;罗甸县&#39;),</span><br><span class="line">(522729, u&#39;长顺县&#39;),</span><br><span class="line">(522730, u&#39;龙里县&#39;),</span><br><span class="line">(522731, u&#39;惠水县&#39;),</span><br><span class="line">(522732, u&#39;三都水族自治县&#39;),</span><br><span class="line">(530000, u&#39;云南省&#39;),</span><br><span class="line">(530100, u&#39;昆明市&#39;),</span><br><span class="line">(530101, u&#39;市辖区&#39;),</span><br><span class="line">(530102, u&#39;五华区&#39;),</span><br><span class="line">(530103, u&#39;盘龙区&#39;),</span><br><span class="line">(530111, u&#39;官渡区&#39;),</span><br><span class="line">(530112, u&#39;西山区&#39;),</span><br><span class="line">(530113, u&#39;东川区&#39;),</span><br><span class="line">(530121, u&#39;呈贡县&#39;),</span><br><span class="line">(530122, u&#39;晋宁县&#39;),</span><br><span class="line">(530124, u&#39;富民县&#39;),</span><br><span class="line">(530125, u&#39;宜良县&#39;),</span><br><span class="line">(530126, u&#39;石林县&#39;),</span><br><span class="line">(530127, u&#39;嵩明县&#39;),</span><br><span class="line">(530128, u&#39;禄劝县&#39;),</span><br><span class="line">(530129, u&#39;寻甸县&#39;),</span><br><span class="line">(530181, u&#39;安宁市&#39;),</span><br><span class="line">(530300, u&#39;曲靖市&#39;),</span><br><span class="line">(530301, u&#39;市辖区&#39;),</span><br><span class="line">(530302, u&#39;麒麟区&#39;),</span><br><span class="line">(530321, u&#39;马龙县&#39;),</span><br><span class="line">(530322, u&#39;陆良县&#39;),</span><br><span class="line">(530323, u&#39;师宗县&#39;),</span><br><span class="line">(530324, u&#39;罗平县&#39;),</span><br><span class="line">(530325, u&#39;富源县&#39;),</span><br><span class="line">(530326, u&#39;会泽县&#39;),</span><br><span class="line">(530328, u&#39;沾益县&#39;),</span><br><span class="line">(530381, u&#39;宣威市&#39;),</span><br><span class="line">(530400, u&#39;玉溪市&#39;),</span><br><span class="line">(530401, u&#39;市辖区&#39;),</span><br><span class="line">(530402, u&#39;红塔区&#39;),</span><br><span class="line">(530421, u&#39;江川县&#39;),</span><br><span class="line">(530422, u&#39;澄江县&#39;),</span><br><span class="line">(530423, u&#39;通海县&#39;),</span><br><span class="line">(530424, u&#39;华宁县&#39;),</span><br><span class="line">(530425, u&#39;易门县&#39;),</span><br><span class="line">(530426, u&#39;峨山县&#39;),</span><br><span class="line">(530427, u&#39;新平县&#39;),</span><br><span class="line">(530428, u&#39;元江县&#39;),</span><br><span class="line">(530500, u&#39;保山市&#39;),</span><br><span class="line">(530501, u&#39;市辖区&#39;),</span><br><span class="line">(530502, u&#39;隆阳区&#39;),</span><br><span class="line">(530521, u&#39;施甸县&#39;),</span><br><span class="line">(530522, u&#39;腾冲县&#39;),</span><br><span class="line">(530523, u&#39;龙陵县&#39;),</span><br><span class="line">(530524, u&#39;昌宁县&#39;),</span><br><span class="line">(530600, u&#39;昭通市&#39;),</span><br><span class="line">(530601, u&#39;市辖区&#39;),</span><br><span class="line">(530602, u&#39;昭阳区&#39;),</span><br><span class="line">(530621, u&#39;鲁甸县&#39;),</span><br><span class="line">(530622, u&#39;巧家县&#39;),</span><br><span class="line">(530623, u&#39;盐津县&#39;),</span><br><span class="line">(530624, u&#39;大关县&#39;),</span><br><span class="line">(530625, u&#39;永善县&#39;),</span><br><span class="line">(530626, u&#39;绥江县&#39;),</span><br><span class="line">(530627, u&#39;镇雄县&#39;),</span><br><span class="line">(530628, u&#39;彝良县&#39;),</span><br><span class="line">(530629, u&#39;威信县&#39;),</span><br><span class="line">(530630, u&#39;水富县&#39;),</span><br><span class="line">(530700, u&#39;丽江市&#39;),</span><br><span class="line">(530701, u&#39;市辖区&#39;),</span><br><span class="line">(530702, u&#39;古城区&#39;),</span><br><span class="line">(530721, u&#39;玉龙县&#39;),</span><br><span class="line">(530722, u&#39;永胜县&#39;),</span><br><span class="line">(530723, u&#39;华坪县&#39;),</span><br><span class="line">(530724, u&#39;宁蒗县&#39;),</span><br><span class="line">(530800, u&#39;思茅市&#39;),</span><br><span class="line">(530801, u&#39;市辖区&#39;),</span><br><span class="line">(530802, u&#39;翠云区&#39;),</span><br><span class="line">(530821, u&#39;普洱县&#39;),</span><br><span class="line">(530822, u&#39;墨江县&#39;),</span><br><span class="line">(530823, u&#39;景东县&#39;),</span><br><span class="line">(530824, u&#39;景谷县&#39;),</span><br><span class="line">(530825, u&#39;镇沅县&#39;),</span><br><span class="line">(530826, u&#39;江城县&#39;),</span><br><span class="line">(530827, u&#39;孟连县&#39;),</span><br><span class="line">(530828, u&#39;澜沧县&#39;),</span><br><span class="line">(530829, u&#39;西盟县&#39;),</span><br><span class="line">(530900, u&#39;临沧市&#39;),</span><br><span class="line">(530901, u&#39;市辖区&#39;),</span><br><span class="line">(530902, u&#39;临翔区&#39;),</span><br><span class="line">(530921, u&#39;凤庆县&#39;),</span><br><span class="line">(530922, u&#39;云县&#39;),</span><br><span class="line">(530923, u&#39;永德县&#39;),</span><br><span class="line">(530924, u&#39;镇康县&#39;),</span><br><span class="line">(530925, u&#39;双江县&#39;),</span><br><span class="line">(530926, u&#39;耿马县&#39;),</span><br><span class="line">(530927, u&#39;沧源县&#39;),</span><br><span class="line">(532300, u&#39;楚雄州&#39;),</span><br><span class="line">(532301, u&#39;楚雄市&#39;),</span><br><span class="line">(532322, u&#39;双柏县&#39;),</span><br><span class="line">(532323, u&#39;牟定县&#39;),</span><br><span class="line">(532324, u&#39;南华县&#39;),</span><br><span class="line">(532325, u&#39;姚安县&#39;),</span><br><span class="line">(532326, u&#39;大姚县&#39;),</span><br><span class="line">(532327, u&#39;永仁县&#39;),</span><br><span class="line">(532328, u&#39;元谋县&#39;),</span><br><span class="line">(532329, u&#39;武定县&#39;),</span><br><span class="line">(532331, u&#39;禄丰县&#39;),</span><br><span class="line">(532500, u&#39;红河州&#39;),</span><br><span class="line">(532501, u&#39;个旧市&#39;),</span><br><span class="line">(532502, u&#39;开远市&#39;),</span><br><span class="line">(532522, u&#39;蒙自县&#39;),</span><br><span class="line">(532523, u&#39;屏边县&#39;),</span><br><span class="line">(532524, u&#39;建水县&#39;),</span><br><span class="line">(532525, u&#39;石屏县&#39;),</span><br><span class="line">(532526, u&#39;弥勒县&#39;),</span><br><span class="line">(532527, u&#39;泸西县&#39;),</span><br><span class="line">(532528, u&#39;元阳县&#39;),</span><br><span class="line">(532529, u&#39;红河县&#39;),</span><br><span class="line">(532530, u&#39;金平县&#39;),</span><br><span class="line">(532531, u&#39;绿春县&#39;),</span><br><span class="line">(532532, u&#39;河口县&#39;),</span><br><span class="line">(532600, u&#39;文山州&#39;),</span><br><span class="line">(532621, u&#39;文山县&#39;),</span><br><span class="line">(532622, u&#39;砚山县&#39;),</span><br><span class="line">(532623, u&#39;西畴县&#39;),</span><br><span class="line">(532624, u&#39;麻栗坡县&#39;),</span><br><span class="line">(532625, u&#39;马关县&#39;),</span><br><span class="line">(532626, u&#39;丘北县&#39;),</span><br><span class="line">(532627, u&#39;广南县&#39;),</span><br><span class="line">(532628, u&#39;富宁县&#39;),</span><br><span class="line">(532800, u&#39;西双版纳州&#39;),</span><br><span class="line">(532801, u&#39;景洪市&#39;),</span><br><span class="line">(532822, u&#39;勐海县&#39;),</span><br><span class="line">(532823, u&#39;勐腊县&#39;),</span><br><span class="line">(532900, u&#39;大理州&#39;),</span><br><span class="line">(532901, u&#39;大理市&#39;),</span><br><span class="line">(532922, u&#39;漾濞县&#39;),</span><br><span class="line">(532923, u&#39;祥云县&#39;),</span><br><span class="line">(532924, u&#39;宾川县&#39;),</span><br><span class="line">(532925, u&#39;弥渡县&#39;),</span><br><span class="line">(532926, u&#39;南涧县&#39;),</span><br><span class="line">(532927, u&#39;巍山县&#39;),</span><br><span class="line">(532928, u&#39;永平县&#39;),</span><br><span class="line">(532929, u&#39;云龙县&#39;),</span><br><span class="line">(532930, u&#39;洱源县&#39;),</span><br><span class="line">(532931, u&#39;剑川县&#39;),</span><br><span class="line">(532932, u&#39;鹤庆县&#39;),</span><br><span class="line">(533100, u&#39;德宏州&#39;),</span><br><span class="line">(533102, u&#39;瑞丽市&#39;),</span><br><span class="line">(533103, u&#39;潞西市&#39;),</span><br><span class="line">(533122, u&#39;梁河县&#39;),</span><br><span class="line">(533123, u&#39;盈江县&#39;),</span><br><span class="line">(533124, u&#39;陇川县&#39;),</span><br><span class="line">(533300, u&#39;怒江州&#39;),</span><br><span class="line">(533321, u&#39;泸水县&#39;),</span><br><span class="line">(533323, u&#39;福贡县&#39;),</span><br><span class="line">(533324, u&#39;贡山县&#39;),</span><br><span class="line">(533325, u&#39;兰坪县&#39;),</span><br><span class="line">(533400, u&#39;迪庆州&#39;),</span><br><span class="line">(533421, u&#39;香格里拉县&#39;),</span><br><span class="line">(533422, u&#39;德钦县&#39;),</span><br><span class="line">(533423, u&#39;维西县&#39;),</span><br><span class="line">(540000, u&#39;西藏自治区&#39;),</span><br><span class="line">(540100, u&#39;拉萨市&#39;),</span><br><span class="line">(540102, u&#39;城关区&#39;),</span><br><span class="line">(540121, u&#39;林周县&#39;),</span><br><span class="line">(540122, u&#39;当雄县&#39;),</span><br><span class="line">(540123, u&#39;尼木县&#39;),</span><br><span class="line">(540124, u&#39;曲水县&#39;),</span><br><span class="line">(540125, u&#39;堆龙德庆&#39;),</span><br><span class="line">(540126, u&#39;达孜县&#39;),</span><br><span class="line">(540127, u&#39;墨竹工卡县&#39;),</span><br><span class="line">(542100, u&#39;昌都地区&#39;),</span><br><span class="line">(542121, u&#39;昌都县&#39;),</span><br><span class="line">(542122, u&#39;江达县&#39;),</span><br><span class="line">(542123, u&#39;贡觉县&#39;),</span><br><span class="line">(542124, u&#39;类乌齐县&#39;),</span><br><span class="line">(542125, u&#39;丁青县&#39;),</span><br><span class="line">(542126, u&#39;察亚县&#39;),</span><br><span class="line">(542127, u&#39;八宿县&#39;),</span><br><span class="line">(542128, u&#39;左贡县&#39;),</span><br><span class="line">(542129, u&#39;芒康县&#39;),</span><br><span class="line">(542132, u&#39;洛隆县&#39;),</span><br><span class="line">(542133, u&#39;边坝县&#39;),</span><br><span class="line">(542200, u&#39;山南地区&#39;),</span><br><span class="line">(542221, u&#39;乃东县&#39;),</span><br><span class="line">(542222, u&#39;扎囊县&#39;),</span><br><span class="line">(542223, u&#39;贡嘎县&#39;),</span><br><span class="line">(542224, u&#39;桑日县&#39;),</span><br><span class="line">(542225, u&#39;琼结县&#39;),</span><br><span class="line">(542226, u&#39;曲松县&#39;),</span><br><span class="line">(542227, u&#39;措美县&#39;),</span><br><span class="line">(542228, u&#39;洛扎县&#39;),</span><br><span class="line">(542229, u&#39;加查县&#39;),</span><br><span class="line">(542231, u&#39;隆子县&#39;),</span><br><span class="line">(542232, u&#39;错那县&#39;),</span><br><span class="line">(542233, u&#39;浪卡子县&#39;),</span><br><span class="line">(542300, u&#39;日喀则地区&#39;),</span><br><span class="line">(542301, u&#39;日喀则市&#39;),</span><br><span class="line">(542322, u&#39;南木林县&#39;),</span><br><span class="line">(542323, u&#39;江孜县&#39;),</span><br><span class="line">(542324, u&#39;定日县&#39;),</span><br><span class="line">(542325, u&#39;萨迦县&#39;),</span><br><span class="line">(542326, u&#39;拉孜县&#39;),</span><br><span class="line">(542327, u&#39;昂仁县&#39;),</span><br><span class="line">(542328, u&#39;谢通门县&#39;),</span><br><span class="line">(542329, u&#39;白朗县&#39;),</span><br><span class="line">(542330, u&#39;仁布县&#39;),</span><br><span class="line">(542331, u&#39;康马县&#39;),</span><br><span class="line">(542332, u&#39;定结县&#39;),</span><br><span class="line">(542333, u&#39;仲巴县&#39;),</span><br><span class="line">(542334, u&#39;亚东县&#39;),</span><br><span class="line">(542335, u&#39;吉隆县&#39;),</span><br><span class="line">(542336, u&#39;聂拉木县&#39;),</span><br><span class="line">(542337, u&#39;萨嘎县&#39;),</span><br><span class="line">(542338, u&#39;岗巴县&#39;),</span><br><span class="line">(542400, u&#39;那曲地区&#39;),</span><br><span class="line">(542421, u&#39;那曲县&#39;),</span><br><span class="line">(542422, u&#39;嘉黎县&#39;),</span><br><span class="line">(542423, u&#39;比如县&#39;),</span><br><span class="line">(542424, u&#39;聂荣县&#39;),</span><br><span class="line">(542425, u&#39;安多县&#39;),</span><br><span class="line">(542426, u&#39;申扎县&#39;),</span><br><span class="line">(542427, u&#39;索县&#39;),</span><br><span class="line">(542428, u&#39;班戈县&#39;),</span><br><span class="line">(542429, u&#39;巴青县&#39;),</span><br><span class="line">(542430, u&#39;尼玛县&#39;),</span><br><span class="line">(542500, u&#39;阿里地区&#39;),</span><br><span class="line">(542521, u&#39;普兰县&#39;),</span><br><span class="line">(542522, u&#39;札达县&#39;),</span><br><span class="line">(542523, u&#39;噶尔县&#39;),</span><br><span class="line">(542524, u&#39;日土县&#39;),</span><br><span class="line">(542525, u&#39;革吉县&#39;),</span><br><span class="line">(542526, u&#39;改则县&#39;),</span><br><span class="line">(542527, u&#39;措勤县&#39;),</span><br><span class="line">(542600, u&#39;林芝地区&#39;),</span><br><span class="line">(542621, u&#39;林芝县&#39;),</span><br><span class="line">(542622, u&#39;工布江达县&#39;),</span><br><span class="line">(542623, u&#39;米林县&#39;),</span><br><span class="line">(542624, u&#39;墨脱县&#39;),</span><br><span class="line">(542625, u&#39;波密县&#39;),</span><br><span class="line">(542626, u&#39;察隅县&#39;),</span><br><span class="line">(542627, u&#39;朗县&#39;),</span><br><span class="line">(610000, u&#39;陕西省&#39;),</span><br><span class="line">(610100, u&#39;西安市&#39;),</span><br><span class="line">(610101, u&#39;市辖区&#39;),</span><br><span class="line">(610102, u&#39;新城区&#39;),</span><br><span class="line">(610103, u&#39;碑林区&#39;),</span><br><span class="line">(610104, u&#39;莲湖区&#39;),</span><br><span class="line">(610111, u&#39;灞桥区&#39;),</span><br><span class="line">(610112, u&#39;未央区&#39;),</span><br><span class="line">(610113, u&#39;雁塔区&#39;),</span><br><span class="line">(610114, u&#39;阎良区&#39;),</span><br><span class="line">(610115, u&#39;临潼区&#39;),</span><br><span class="line">(610116, u&#39;长安区&#39;),</span><br><span class="line">(610122, u&#39;蓝田县&#39;),</span><br><span class="line">(610124, u&#39;周至县&#39;),</span><br><span class="line">(610125, u&#39;户县&#39;),</span><br><span class="line">(610126, u&#39;高陵县&#39;),</span><br><span class="line">(610200, u&#39;铜川市&#39;),</span><br><span class="line">(610201, u&#39;市辖区&#39;),</span><br><span class="line">(610202, u&#39;王益区&#39;),</span><br><span class="line">(610203, u&#39;印台区&#39;),</span><br><span class="line">(610204, u&#39;耀州区&#39;),</span><br><span class="line">(610222, u&#39;宜君县&#39;),</span><br><span class="line">(610300, u&#39;宝鸡市&#39;),</span><br><span class="line">(610301, u&#39;市辖区&#39;),</span><br><span class="line">(610302, u&#39;渭滨区&#39;),</span><br><span class="line">(610303, u&#39;金台区&#39;),</span><br><span class="line">(610304, u&#39;陈仓区&#39;),</span><br><span class="line">(610322, u&#39;凤翔县&#39;),</span><br><span class="line">(610323, u&#39;岐山县&#39;),</span><br><span class="line">(610324, u&#39;扶风县&#39;),</span><br><span class="line">(610326, u&#39;眉县&#39;),</span><br><span class="line">(610327, u&#39;陇县&#39;),</span><br><span class="line">(610328, u&#39;千阳县&#39;),</span><br><span class="line">(610329, u&#39;麟游县&#39;),</span><br><span class="line">(610330, u&#39;凤县&#39;),</span><br><span class="line">(610331, u&#39;太白县&#39;),</span><br><span class="line">(610400, u&#39;咸阳市&#39;),</span><br><span class="line">(610401, u&#39;市辖区&#39;),</span><br><span class="line">(610402, u&#39;秦都区&#39;),</span><br><span class="line">(610403, u&#39;杨凌区&#39;),</span><br><span class="line">(610404, u&#39;渭城区&#39;),</span><br><span class="line">(610422, u&#39;三原县&#39;),</span><br><span class="line">(610423, u&#39;泾阳县&#39;),</span><br><span class="line">(610424, u&#39;乾县&#39;),</span><br><span class="line">(610425, u&#39;礼泉县&#39;),</span><br><span class="line">(610426, u&#39;永寿县&#39;),</span><br><span class="line">(610427, u&#39;彬县&#39;),</span><br><span class="line">(610428, u&#39;长武县&#39;),</span><br><span class="line">(610429, u&#39;旬邑县&#39;),</span><br><span class="line">(610430, u&#39;淳化县&#39;),</span><br><span class="line">(610431, u&#39;武功县&#39;),</span><br><span class="line">(610481, u&#39;兴平市&#39;),</span><br><span class="line">(610500, u&#39;渭南市&#39;),</span><br><span class="line">(610501, u&#39;市辖区&#39;),</span><br><span class="line">(610502, u&#39;临渭区&#39;),</span><br><span class="line">(610521, u&#39;华县&#39;),</span><br><span class="line">(610522, u&#39;潼关县&#39;),</span><br><span class="line">(610523, u&#39;大荔县&#39;),</span><br><span class="line">(610524, u&#39;合阳县&#39;),</span><br><span class="line">(610525, u&#39;澄城县&#39;),</span><br><span class="line">(610526, u&#39;蒲城县&#39;),</span><br><span class="line">(610527, u&#39;白水县&#39;),</span><br><span class="line">(610528, u&#39;富平县&#39;),</span><br><span class="line">(610581, u&#39;韩城市&#39;),</span><br><span class="line">(610582, u&#39;华阴市&#39;),</span><br><span class="line">(610600, u&#39;延安市&#39;),</span><br><span class="line">(610601, u&#39;市辖区&#39;),</span><br><span class="line">(610602, u&#39;宝塔区&#39;),</span><br><span class="line">(610621, u&#39;延长县&#39;),</span><br><span class="line">(610622, u&#39;延川县&#39;),</span><br><span class="line">(610623, u&#39;子长县&#39;),</span><br><span class="line">(610624, u&#39;安塞县&#39;),</span><br><span class="line">(610625, u&#39;志丹县&#39;),</span><br><span class="line">(610626, u&#39;吴起县&#39;),</span><br><span class="line">(610627, u&#39;甘泉县&#39;),</span><br><span class="line">(610628, u&#39;富县&#39;),</span><br><span class="line">(610629, u&#39;洛川县&#39;),</span><br><span class="line">(610630, u&#39;宜川县&#39;),</span><br><span class="line">(610631, u&#39;黄龙县&#39;),</span><br><span class="line">(610632, u&#39;黄陵县&#39;),</span><br><span class="line">(610700, u&#39;汉中市&#39;),</span><br><span class="line">(610701, u&#39;市辖区&#39;),</span><br><span class="line">(610702, u&#39;汉台区&#39;),</span><br><span class="line">(610721, u&#39;南郑县&#39;),</span><br><span class="line">(610722, u&#39;城固县&#39;),</span><br><span class="line">(610723, u&#39;洋县&#39;),</span><br><span class="line">(610724, u&#39;西乡县&#39;),</span><br><span class="line">(610725, u&#39;勉县&#39;),</span><br><span class="line">(610726, u&#39;宁强县&#39;),</span><br><span class="line">(610727, u&#39;略阳县&#39;),</span><br><span class="line">(610728, u&#39;镇巴县&#39;),</span><br><span class="line">(610729, u&#39;留坝县&#39;),</span><br><span class="line">(610730, u&#39;佛坪县&#39;),</span><br><span class="line">(610800, u&#39;榆林市&#39;),</span><br><span class="line">(610801, u&#39;市辖区&#39;),</span><br><span class="line">(610802, u&#39;榆阳区&#39;),</span><br><span class="line">(610821, u&#39;神木县&#39;),</span><br><span class="line">(610822, u&#39;府谷县&#39;),</span><br><span class="line">(610823, u&#39;横山县&#39;),</span><br><span class="line">(610824, u&#39;靖边县&#39;),</span><br><span class="line">(610825, u&#39;定边县&#39;),</span><br><span class="line">(610826, u&#39;绥德县&#39;),</span><br><span class="line">(610827, u&#39;米脂县&#39;),</span><br><span class="line">(610828, u&#39;佳县&#39;),</span><br><span class="line">(610829, u&#39;吴堡县&#39;),</span><br><span class="line">(610830, u&#39;清涧县&#39;),</span><br><span class="line">(610831, u&#39;子洲县&#39;),</span><br><span class="line">(610900, u&#39;安康市&#39;),</span><br><span class="line">(610901, u&#39;市辖区&#39;),</span><br><span class="line">(610902, u&#39;汉滨区&#39;),</span><br><span class="line">(610921, u&#39;汉阴县&#39;),</span><br><span class="line">(610922, u&#39;石泉县&#39;),</span><br><span class="line">(610923, u&#39;宁陕县&#39;),</span><br><span class="line">(610924, u&#39;紫阳县&#39;),</span><br><span class="line">(610925, u&#39;岚皋县&#39;),</span><br><span class="line">(610926, u&#39;平利县&#39;),</span><br><span class="line">(610927, u&#39;镇坪县&#39;),</span><br><span class="line">(610928, u&#39;旬阳县&#39;),</span><br><span class="line">(610929, u&#39;白河县&#39;),</span><br><span class="line">(611000, u&#39;商洛市&#39;),</span><br><span class="line">(611001, u&#39;市辖区&#39;),</span><br><span class="line">(611002, u&#39;商州区&#39;),</span><br><span class="line">(611021, u&#39;洛南县&#39;),</span><br><span class="line">(611022, u&#39;丹凤县&#39;),</span><br><span class="line">(611023, u&#39;商南县&#39;),</span><br><span class="line">(611024, u&#39;山阳县&#39;),</span><br><span class="line">(611025, u&#39;镇安县&#39;),</span><br><span class="line">(611026, u&#39;柞水县&#39;),</span><br><span class="line">(620000, u&#39;甘肃省&#39;),</span><br><span class="line">(620100, u&#39;兰州市&#39;),</span><br><span class="line">(620101, u&#39;市辖区&#39;),</span><br><span class="line">(620102, u&#39;城关区&#39;),</span><br><span class="line">(620103, u&#39;七里河区&#39;),</span><br><span class="line">(620104, u&#39;兰州市西固区&#39;),</span><br><span class="line">(620105, u&#39;安宁区&#39;),</span><br><span class="line">(620111, u&#39;红古区&#39;),</span><br><span class="line">(620121, u&#39;永登县&#39;),</span><br><span class="line">(620122, u&#39;皋兰县&#39;),</span><br><span class="line">(620123, u&#39;榆中县&#39;),</span><br><span class="line">(620200, u&#39;嘉峪关市&#39;),</span><br><span class="line">(620201, u&#39;市辖&#39;),</span><br><span class="line">(620300, u&#39;金昌市&#39;),</span><br><span class="line">(620301, u&#39;市辖区&#39;),</span><br><span class="line">(620302, u&#39;金川区&#39;),</span><br><span class="line">(620321, u&#39;永昌县&#39;),</span><br><span class="line">(620400, u&#39;白银市&#39;),</span><br><span class="line">(620401, u&#39;市辖区&#39;),</span><br><span class="line">(620402, u&#39;白银区&#39;),</span><br><span class="line">(620403, u&#39;平川区&#39;),</span><br><span class="line">(620421, u&#39;靖远县&#39;),</span><br><span class="line">(620422, u&#39;会宁县&#39;),</span><br><span class="line">(620423, u&#39;景泰县&#39;),</span><br><span class="line">(620500, u&#39;天水市&#39;),</span><br><span class="line">(620501, u&#39;市辖区&#39;),</span><br><span class="line">(620502, u&#39;秦州区&#39;),</span><br><span class="line">(620503, u&#39;麦积区&#39;),</span><br><span class="line">(620521, u&#39;清水县&#39;),</span><br><span class="line">(620522, u&#39;秦安县&#39;),</span><br><span class="line">(620523, u&#39;甘谷县&#39;),</span><br><span class="line">(620524, u&#39;武山县&#39;),</span><br><span class="line">(620525, u&#39;张家川县&#39;),</span><br><span class="line">(620600, u&#39;武威市&#39;),</span><br><span class="line">(620601, u&#39;市辖区&#39;),</span><br><span class="line">(620602, u&#39;凉州区&#39;),</span><br><span class="line">(620621, u&#39;民勤县&#39;),</span><br><span class="line">(620622, u&#39;古浪县&#39;),</span><br><span class="line">(620623, u&#39;天祝县&#39;),</span><br><span class="line">(620700, u&#39;张掖市&#39;),</span><br><span class="line">(620701, u&#39;市辖区&#39;),</span><br><span class="line">(620702, u&#39;甘州区&#39;),</span><br><span class="line">(620721, u&#39;肃南裕固族自治县&#39;),</span><br><span class="line">(620722, u&#39;民乐县&#39;),</span><br><span class="line">(620723, u&#39;临泽县&#39;),</span><br><span class="line">(620724, u&#39;高台县&#39;),</span><br><span class="line">(620725, u&#39;山丹县&#39;),</span><br><span class="line">(620800, u&#39;平凉市&#39;),</span><br><span class="line">(620801, u&#39;市辖区&#39;),</span><br><span class="line">(620802, u&#39;崆峒区&#39;),</span><br><span class="line">(620821, u&#39;泾川县&#39;),</span><br><span class="line">(620822, u&#39;灵台县&#39;),</span><br><span class="line">(620823, u&#39;崇信县&#39;),</span><br><span class="line">(620824, u&#39;华亭县&#39;),</span><br><span class="line">(620825, u&#39;庄浪县&#39;),</span><br><span class="line">(620826, u&#39;静宁县&#39;),</span><br><span class="line">(620900, u&#39;酒泉市&#39;),</span><br><span class="line">(620901, u&#39;市辖区&#39;),</span><br><span class="line">(620902, u&#39;肃州区&#39;),</span><br><span class="line">(620921, u&#39;金塔县&#39;),</span><br><span class="line">(620922, u&#39;瓜州县&#39;),</span><br><span class="line">(620923, u&#39;肃北蒙古族自治县&#39;),</span><br><span class="line">(620924, u&#39;阿克塞县&#39;),</span><br><span class="line">(620981, u&#39;玉门市&#39;),</span><br><span class="line">(620982, u&#39;敦煌市&#39;),</span><br><span class="line">(621000, u&#39;庆阳市&#39;),</span><br><span class="line">(621001, u&#39;市辖区&#39;),</span><br><span class="line">(621002, u&#39;西峰区&#39;),</span><br><span class="line">(621021, u&#39;庆城县&#39;),</span><br><span class="line">(621022, u&#39;环县&#39;),</span><br><span class="line">(621023, u&#39;华池县&#39;),</span><br><span class="line">(621024, u&#39;合水县&#39;),</span><br><span class="line">(621025, u&#39;正宁县&#39;),</span><br><span class="line">(621026, u&#39;宁县&#39;),</span><br><span class="line">(621027, u&#39;镇原县&#39;),</span><br><span class="line">(621100, u&#39;定西市&#39;),</span><br><span class="line">(621101, u&#39;市辖区&#39;),</span><br><span class="line">(621102, u&#39;安定区&#39;),</span><br><span class="line">(621121, u&#39;通渭县&#39;),</span><br><span class="line">(621122, u&#39;陇西县&#39;),</span><br><span class="line">(621123, u&#39;渭源县&#39;),</span><br><span class="line">(621124, u&#39;临洮县&#39;),</span><br><span class="line">(621125, u&#39;漳县&#39;),</span><br><span class="line">(621126, u&#39;岷县&#39;),</span><br><span class="line">(621200, u&#39;陇南市&#39;),</span><br><span class="line">(621201, u&#39;市辖区&#39;),</span><br><span class="line">(621202, u&#39;武都区&#39;),</span><br><span class="line">(621221, u&#39;成县&#39;),</span><br><span class="line">(621222, u&#39;文县&#39;),</span><br><span class="line">(621223, u&#39;宕昌县&#39;),</span><br><span class="line">(621224, u&#39;康县&#39;),</span><br><span class="line">(621225, u&#39;西和县&#39;),</span><br><span class="line">(621226, u&#39;礼县&#39;),</span><br><span class="line">(621227, u&#39;徽县&#39;),</span><br><span class="line">(621228, u&#39;两当县&#39;),</span><br><span class="line">(622900, u&#39;临夏州&#39;),</span><br><span class="line">(622901, u&#39;临夏市&#39;),</span><br><span class="line">(622921, u&#39;临夏县&#39;),</span><br><span class="line">(622922, u&#39;康乐县&#39;),</span><br><span class="line">(622923, u&#39;永靖县&#39;),</span><br><span class="line">(622924, u&#39;广河县&#39;),</span><br><span class="line">(622925, u&#39;和政县&#39;),</span><br><span class="line">(622926, u&#39;东乡族自治县&#39;),</span><br><span class="line">(622927, u&#39;积石山县&#39;),</span><br><span class="line">(623000, u&#39;甘南州&#39;),</span><br><span class="line">(623001, u&#39;合作市&#39;),</span><br><span class="line">(623021, u&#39;临潭县&#39;),</span><br><span class="line">(623022, u&#39;卓尼县&#39;),</span><br><span class="line">(623023, u&#39;舟曲县&#39;),</span><br><span class="line">(623024, u&#39;迭部县&#39;),</span><br><span class="line">(623025, u&#39;玛曲县&#39;),</span><br><span class="line">(623026, u&#39;碌曲县&#39;),</span><br><span class="line">(623027, u&#39;夏河县&#39;),</span><br><span class="line">(630000, u&#39;青海省&#39;),</span><br><span class="line">(630100, u&#39;西宁市&#39;),</span><br><span class="line">(630102, u&#39;城东区&#39;),</span><br><span class="line">(630103, u&#39;城中区&#39;),</span><br><span class="line">(630104, u&#39;城西区&#39;),</span><br><span class="line">(630105, u&#39;城北区&#39;),</span><br><span class="line">(630121, u&#39;大通回族土族自治县&#39;),</span><br><span class="line">(630122, u&#39;湟中县&#39;),</span><br><span class="line">(630123, u&#39;湟源县&#39;),</span><br><span class="line">(632100, u&#39;海东地区&#39;),</span><br><span class="line">(632121, u&#39;平安县&#39;),</span><br><span class="line">(632122, u&#39;民和县&#39;),</span><br><span class="line">(632123, u&#39;乐都县&#39;),</span><br><span class="line">(632126, u&#39;互助县&#39;),</span><br><span class="line">(632127, u&#39;化隆回族自治县&#39;),</span><br><span class="line">(632128, u&#39;循化县&#39;),</span><br><span class="line">(632200, u&#39;海北州&#39;),</span><br><span class="line">(632221, u&#39;门源县&#39;),</span><br><span class="line">(632222, u&#39;祁连县&#39;),</span><br><span class="line">(632223, u&#39;海晏县&#39;),</span><br><span class="line">(632224, u&#39;刚察县&#39;),</span><br><span class="line">(632300, u&#39;黄南州&#39;),</span><br><span class="line">(632321, u&#39;同仁县&#39;),</span><br><span class="line">(632322, u&#39;尖扎县&#39;),</span><br><span class="line">(632323, u&#39;泽库县&#39;),</span><br><span class="line">(632324, u&#39;河南县&#39;),</span><br><span class="line">(632500, u&#39;海南州&#39;),</span><br><span class="line">(632521, u&#39;共和县&#39;),</span><br><span class="line">(632522, u&#39;同德县&#39;),</span><br><span class="line">(632523, u&#39;贵德县&#39;),</span><br><span class="line">(632524, u&#39;兴海县&#39;),</span><br><span class="line">(632525, u&#39;贵南县&#39;),</span><br><span class="line">(632600, u&#39;果洛州&#39;),</span><br><span class="line">(632621, u&#39;玛沁县&#39;),</span><br><span class="line">(632622, u&#39;班玛县&#39;),</span><br><span class="line">(632623, u&#39;甘德县&#39;),</span><br><span class="line">(632624, u&#39;达日县&#39;),</span><br><span class="line">(632625, u&#39;久治县&#39;),</span><br><span class="line">(632626, u&#39;玛多县&#39;),</span><br><span class="line">(632700, u&#39;玉树州&#39;),</span><br><span class="line">(632721, u&#39;玉树县&#39;),</span><br><span class="line">(632722, u&#39;杂多县&#39;),</span><br><span class="line">(632723, u&#39;称多县&#39;),</span><br><span class="line">(632724, u&#39;治多县&#39;),</span><br><span class="line">(632725, u&#39;囊谦县&#39;),</span><br><span class="line">(632726, u&#39;曲麻莱县&#39;),</span><br><span class="line">(632800, u&#39;海西州&#39;),</span><br><span class="line">(632801, u&#39;格尔木市&#39;),</span><br><span class="line">(632802, u&#39;德令哈市&#39;),</span><br><span class="line">(632821, u&#39;乌兰县&#39;),</span><br><span class="line">(632822, u&#39;都兰县&#39;),</span><br><span class="line">(632823, u&#39;天峻县&#39;),</span><br><span class="line">(640000, u&#39;宁夏回族自治区&#39;),</span><br><span class="line">(640100, u&#39;银川市&#39;),</span><br><span class="line">(640101, u&#39;市辖区&#39;),</span><br><span class="line">(640104, u&#39;兴庆区&#39;),</span><br><span class="line">(640105, u&#39;西夏区&#39;),</span><br><span class="line">(640106, u&#39;金凤区&#39;),</span><br><span class="line">(640121, u&#39;永宁县&#39;),</span><br><span class="line">(640122, u&#39;贺兰县&#39;),</span><br><span class="line">(640181, u&#39;灵武市&#39;),</span><br><span class="line">(640200, u&#39;石嘴山市&#39;),</span><br><span class="line">(640201, u&#39;市辖区&#39;),</span><br><span class="line">(640202, u&#39;大武口区&#39;),</span><br><span class="line">(640205, u&#39;惠农区&#39;),</span><br><span class="line">(640221, u&#39;平罗县&#39;),</span><br><span class="line">(640300, u&#39;吴忠市&#39;),</span><br><span class="line">(640301, u&#39;市辖区&#39;),</span><br><span class="line">(640302, u&#39;利通区&#39;),</span><br><span class="line">(640323, u&#39;盐池县&#39;),</span><br><span class="line">(640324, u&#39;同心县&#39;),</span><br><span class="line">(640381, u&#39;青铜峡市&#39;),</span><br><span class="line">(640400, u&#39;固原市&#39;),</span><br><span class="line">(640401, u&#39;市辖区&#39;),</span><br><span class="line">(640402, u&#39;原州区&#39;),</span><br><span class="line">(640422, u&#39;西吉县&#39;),</span><br><span class="line">(640423, u&#39;隆德县&#39;),</span><br><span class="line">(640424, u&#39;泾源县&#39;),</span><br><span class="line">(640425, u&#39;彭阳县&#39;),</span><br><span class="line">(640500, u&#39;中卫市&#39;),</span><br><span class="line">(640501, u&#39;市辖区&#39;),</span><br><span class="line">(640502, u&#39;沙坡头区&#39;),</span><br><span class="line">(640521, u&#39;中宁县&#39;),</span><br><span class="line">(640522, u&#39;海原县&#39;),</span><br><span class="line">(650000, u&#39;新疆维吾尔自治区&#39;),</span><br><span class="line">(650100, u&#39;乌鲁木齐市&#39;),</span><br><span class="line">(650101, u&#39;市辖区&#39;),</span><br><span class="line">(650102, u&#39;天山区&#39;),</span><br><span class="line">(650103, u&#39;沙依巴克区&#39;),</span><br><span class="line">(650104, u&#39;新市区&#39;),</span><br><span class="line">(650105, u&#39;水磨沟区&#39;),</span><br><span class="line">(650106, u&#39;头屯河区&#39;),</span><br><span class="line">(650107, u&#39;达坂城区&#39;),</span><br><span class="line">(650108, u&#39;东山区&#39;),</span><br><span class="line">(650121, u&#39;乌鲁木齐县&#39;),</span><br><span class="line">(650200, u&#39;克拉玛依市&#39;),</span><br><span class="line">(650201, u&#39;市辖区&#39;),</span><br><span class="line">(650202, u&#39;独山子区&#39;),</span><br><span class="line">(650203, u&#39;克拉玛依区&#39;),</span><br><span class="line">(650204, u&#39;白碱滩区&#39;),</span><br><span class="line">(650205, u&#39;乌尔禾区&#39;),</span><br><span class="line">(652100, u&#39;吐鲁番地区&#39;),</span><br><span class="line">(652101, u&#39;吐鲁番市&#39;),</span><br><span class="line">(652122, u&#39;鄯善县&#39;),</span><br><span class="line">(652123, u&#39;托克逊县&#39;),</span><br><span class="line">(652200, u&#39;哈密地区&#39;),</span><br><span class="line">(652201, u&#39;哈密市&#39;),</span><br><span class="line">(652222, u&#39;巴里坤县&#39;),</span><br><span class="line">(652223, u&#39;伊吾县&#39;),</span><br><span class="line">(652300, u&#39;昌吉州&#39;),</span><br><span class="line">(652301, u&#39;昌吉市&#39;),</span><br><span class="line">(652302, u&#39;阜康市&#39;),</span><br><span class="line">(652303, u&#39;米泉市&#39;),</span><br><span class="line">(652323, u&#39;呼图壁县&#39;),</span><br><span class="line">(652324, u&#39;玛纳斯&#39;),</span><br><span class="line">(652325, u&#39;奇台县&#39;),</span><br><span class="line">(652327, u&#39;吉木萨尔县&#39;),</span><br><span class="line">(652328, u&#39;木垒县&#39;),</span><br><span class="line">(652700, u&#39;博尔塔拉蒙古自治州&#39;),</span><br><span class="line">(652701, u&#39;博乐市&#39;),</span><br><span class="line">(652722, u&#39;精河县&#39;),</span><br><span class="line">(652723, u&#39;温泉县&#39;),</span><br><span class="line">(652800, u&#39;巴音郭楞蒙古自治州&#39;),</span><br><span class="line">(652801, u&#39;库尔勒市&#39;),</span><br><span class="line">(652822, u&#39;轮台县&#39;),</span><br><span class="line">(652823, u&#39;尉犁县&#39;),</span><br><span class="line">(652824, u&#39;若羌县&#39;),</span><br><span class="line">(652825, u&#39;且末县&#39;),</span><br><span class="line">(652826, u&#39;焉耆县&#39;),</span><br><span class="line">(652827, u&#39;和静县&#39;),</span><br><span class="line">(652828, u&#39;和硕县&#39;),</span><br><span class="line">(652829, u&#39;博湖县&#39;),</span><br><span class="line">(652900, u&#39;阿克苏地区&#39;),</span><br><span class="line">(652901, u&#39;阿克苏市&#39;),</span><br><span class="line">(652922, u&#39;温宿县&#39;),</span><br><span class="line">(652923, u&#39;库车县&#39;),</span><br><span class="line">(652924, u&#39;沙雅县&#39;),</span><br><span class="line">(652925, u&#39;新和县&#39;),</span><br><span class="line">(652926, u&#39;拜城县&#39;),</span><br><span class="line">(652927, u&#39;乌什县&#39;),</span><br><span class="line">(652928, u&#39;阿瓦提县&#39;),</span><br><span class="line">(652929, u&#39;柯坪县&#39;),</span><br><span class="line">(653000, u&#39;克州&#39;),</span><br><span class="line">(653001, u&#39;阿图什市&#39;),</span><br><span class="line">(653022, u&#39;阿克陶县&#39;),</span><br><span class="line">(653023, u&#39;阿合奇县&#39;),</span><br><span class="line">(653024, u&#39;乌恰县&#39;),</span><br><span class="line">(653100, u&#39;喀什地区&#39;),</span><br><span class="line">(653101, u&#39;喀什市&#39;),</span><br><span class="line">(653121, u&#39;疏附县&#39;),</span><br><span class="line">(653122, u&#39;疏勒县&#39;),</span><br><span class="line">(653123, u&#39;英吉沙县&#39;),</span><br><span class="line">(653124, u&#39;泽普县&#39;),</span><br><span class="line">(653125, u&#39;莎车县&#39;),</span><br><span class="line">(653126, u&#39;叶城县&#39;),</span><br><span class="line">(653127, u&#39;麦盖提县&#39;),</span><br><span class="line">(653128, u&#39;岳普湖县&#39;),</span><br><span class="line">(653129, u&#39;伽师县&#39;),</span><br><span class="line">(653130, u&#39;巴楚县&#39;),</span><br><span class="line">(653131, u&#39;塔什库尔干县&#39;),</span><br><span class="line">(653200, u&#39;和田地区&#39;),</span><br><span class="line">(653201, u&#39;和田市&#39;),</span><br><span class="line">(653221, u&#39;和田县&#39;),</span><br><span class="line">(653222, u&#39;墨玉县&#39;),</span><br><span class="line">(653223, u&#39;皮山县&#39;),</span><br><span class="line">(653224, u&#39;洛浦县&#39;),</span><br><span class="line">(653225, u&#39;策勒县&#39;),</span><br><span class="line">(653226, u&#39;于田县&#39;),</span><br><span class="line">(653227, u&#39;民丰县&#39;),</span><br><span class="line">(654000, u&#39;伊犁州&#39;),</span><br><span class="line">(654002, u&#39;伊宁市&#39;),</span><br><span class="line">(654003, u&#39;奎屯市&#39;),</span><br><span class="line">(654021, u&#39;伊宁县&#39;),</span><br><span class="line">(654022, u&#39;察布查尔县&#39;),</span><br><span class="line">(654023, u&#39;霍城县&#39;),</span><br><span class="line">(654024, u&#39;巩留县&#39;),</span><br><span class="line">(654025, u&#39;新源县&#39;),</span><br><span class="line">(654026, u&#39;昭苏县&#39;),</span><br><span class="line">(654027, u&#39;特克斯县&#39;),</span><br><span class="line">(654028, u&#39;尼勒克县&#39;),</span><br><span class="line">(654200, u&#39;塔城地区&#39;),</span><br><span class="line">(654201, u&#39;塔城市&#39;),</span><br><span class="line">(654202, u&#39;乌苏市&#39;),</span><br><span class="line">(654221, u&#39;额敏县&#39;),</span><br><span class="line">(654223, u&#39;沙湾县&#39;),</span><br><span class="line">(654224, u&#39;托里县&#39;),</span><br><span class="line">(654225, u&#39;裕民县&#39;),</span><br><span class="line">(654226, u&#39;和布克赛尔蒙古自治县&#39;),</span><br><span class="line">(654300, u&#39;阿勒泰地区&#39;),</span><br><span class="line">(654301, u&#39;阿勒泰市&#39;),</span><br><span class="line">(654321, u&#39;布尔津县&#39;),</span><br><span class="line">(654322, u&#39;富蕴县&#39;),</span><br><span class="line">(654323, u&#39;福海县&#39;),</span><br><span class="line">(654324, u&#39;哈巴河县&#39;),</span><br><span class="line">(654325, u&#39;青河县&#39;),</span><br><span class="line">(654326, u&#39;吉木乃县&#39;),</span><br><span class="line">(659000, u&#39;省直辖行政单位&#39;),</span><br><span class="line">(659001, u&#39;石河子市&#39;),</span><br><span class="line">(659002, u&#39;阿拉尔市&#39;),</span><br><span class="line">(659003, u&#39;图木舒克市&#39;),</span><br><span class="line">(659004, u&#39;五家渠市&#39;)]</span><br></pre></td></tr></table></figure><h3 id="python生成身份证"><a href="#python生成身份证" class="headerlink" title="python生成身份证"></a>python生成身份证</h3><p>直接上代码了，写了两个，一个直接返回身份证，一个需要输入年龄和性别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;8&#x2F;8 12:00</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from addrcode import AddrCode</span><br><span class="line">from datetime import datetime</span><br><span class="line">from faker import Faker</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 初始化</span><br><span class="line">fake &#x3D; Faker(locale&#x3D;&#39;zh_CN&#39;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_idmsg(addrCode, birthCode, listCode, checkCode):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    :param addrCode: 表示编码对象常住户口所在县(市、旗、区)的行政区域划分代码，按GB&#x2F;T2260的规定执行</span><br><span class="line">    :param birthCode: 表示编码对象出生的年、月、日，按GB&#x2F;T7408的规定执行，年、月、日代码之间不用分隔符。</span><br><span class="line">    :param listCode: 表示在同一地址码所标识的区域范围内，对同年、同月、同日出生的人编定的顺序号，</span><br><span class="line">                    顺序码的奇数分配给男性，偶数分配给女性</span><br><span class="line">    :param checkCode: 将本体码各位数字乘以对应加权因子并求和，除以11得到余数，根据余数通过校验码对照表查得校验码。</span><br><span class="line">                    (1)十七位数字本体码加权求和公式</span><br><span class="line">                        S &#x3D; Sum(Ai * Wi), i &#x3D; 0, ... , 16 ，先对前17位数字的权求和</span><br><span class="line">                        Ai:表示第i位置上的身份证号码数字值(0~9),list(前十七位)</span><br><span class="line">                        Wi:7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2 （表示第i位置上的加权因子）</span><br><span class="line">                    (2)计算模</span><br><span class="line">                        Y &#x3D; mod(S, 11)</span><br><span class="line">                    (3)根据模，查找得到对应的校验码</span><br><span class="line">                        Y: 0 1 2 3 4 5 6 7 8 9 10</span><br><span class="line">                        校验码: 1 0 X 9 8 7 6 5 4 3 2</span><br><span class="line">    :return:    只是个身份证组成的说明，毫无意义的函数~</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    idcard &#x3D; addrCode + birthCode + listCode + checkCode</span><br><span class="line">    return idcard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_address_code():</span><br><span class="line">    &quot;&quot;&quot;获取地址码&quot;&quot;&quot;</span><br><span class="line">    addrIndex &#x3D; random.randint(0, len(AddrCode) - 1)</span><br><span class="line">    addrCode &#x3D; AddrCode[addrIndex][0]</span><br><span class="line">    return addrCode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_birth_code():</span><br><span class="line">    &quot;&quot;&quot;获取出生年月日 19900101格式，指定范围19900101-20190808&quot;&quot;&quot;</span><br><span class="line">    date &#x3D; fake.date_time_between_dates(datetime_start&#x3D;datetime(1990, 1, 1, 00, 00, 00),</span><br><span class="line">                                         datetime_end&#x3D;datetime(2019, 8, 8, 23, 59, 59), tzinfo&#x3D;None)</span><br><span class="line">    birthCode &#x3D; datetime.strftime(date, &quot;%Y%m%d&quot;)</span><br><span class="line">    return birthCode</span><br><span class="line"></span><br><span class="line">def get_birth_age_code(age):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    获取出生年月日 19900101格式</span><br><span class="line">    :param age: 指定年龄</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    now_year &#x3D; datetime.now().strftime(&quot;%Y&quot;)</span><br><span class="line">    get_year &#x3D; int(now_year) - int(age)</span><br><span class="line">    next_year &#x3D; int(get_year) + 1</span><br><span class="line">    date &#x3D; fake.date_time_between_dates(datetime_start&#x3D;datetime(get_year, 1, 1, 0, 0, 0),</span><br><span class="line">                                         datetime_end&#x3D;datetime(next_year, 1, 1, 0, 0, 0), tzinfo&#x3D;None)</span><br><span class="line">    birthCode &#x3D; datetime.strftime(date, &quot;%Y%m%d&quot;)</span><br><span class="line">    return birthCode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_list_code():</span><br><span class="line">    &quot;&quot;&quot;获取顺序码，不区分男女，001-999&quot;&quot;&quot;</span><br><span class="line">    listCode &#x3D; random.randint(1, 999)</span><br><span class="line">    if listCode &lt; 10:</span><br><span class="line">        listCode &#x3D; &quot;00&quot; + str(listCode)</span><br><span class="line">    elif listCode &lt; 100:</span><br><span class="line">        listCode &#x3D; &quot;0&quot; + str(listCode)</span><br><span class="line">    else:</span><br><span class="line">        listCode &#x3D; str(listCode)</span><br><span class="line">    return listCode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_list_sex_code(sex_type):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    获取顺序码，001-999</span><br><span class="line">    :param sex_type: 0为女，1为男</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    listCode &#x3D; random.randint(1, 999)</span><br><span class="line"></span><br><span class="line">    if listCode % 2 &#x3D;&#x3D; sex_type:</span><br><span class="line">        listCode &#x3D; listCode</span><br><span class="line">    else:</span><br><span class="line">        listCode +&#x3D; 1</span><br><span class="line"></span><br><span class="line">    if listCode &lt; 10:</span><br><span class="line">        listCode &#x3D; &quot;00&quot; + str(listCode)</span><br><span class="line">    elif listCode &lt; 100:</span><br><span class="line">        listCode &#x3D; &quot;0&quot; + str(listCode)</span><br><span class="line">    else:</span><br><span class="line">        listCode &#x3D; str(listCode)</span><br><span class="line">    return listCode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_idcard():</span><br><span class="line">    &quot;&quot;&quot;获取身份证号码&quot;&quot;&quot;</span><br><span class="line">    # 加权因子</span><br><span class="line">    Wi &#x3D; [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]</span><br><span class="line">    # 校验码</span><br><span class="line">    checkCode &#x3D; [&#39;1&#39;, &#39;0&#39;, &#39;X&#39;, &#39;9&#39;, &#39;8&#39;, &#39;7&#39;, &#39;6&#39;, &#39;5&#39;, &#39;4&#39;, &#39;3&#39;, &#39;2&#39;]</span><br><span class="line"></span><br><span class="line">    addrCode &#x3D; str(get_address_code())</span><br><span class="line">    birthCode &#x3D; str(get_birth_code())</span><br><span class="line">    listCode &#x3D; str(get_list_code())</span><br><span class="line"></span><br><span class="line">    # 获取身份证前17位，并序列化</span><br><span class="line">    checkformat &#x3D; addrCode + birthCode + listCode</span><br><span class="line">    checkCard17 &#x3D; list(checkformat)</span><br><span class="line"></span><br><span class="line">    # 打包前十七位数字组成的列表和加权因子的列表为一个元祖的列表</span><br><span class="line">    zipnum &#x3D; zip(checkCard17, Wi)</span><br><span class="line"></span><br><span class="line">    # 加权计算</span><br><span class="line">    s &#x3D; sum(int(i) * int(j) for i, j in zipnum)</span><br><span class="line">    # 计算模</span><br><span class="line">    Y &#x3D; s % 11</span><br><span class="line"></span><br><span class="line">    checkNum &#x3D; checkCode[Y]</span><br><span class="line"></span><br><span class="line">    idcard &#x3D; checkformat + checkNum</span><br><span class="line">    return idcard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_custom_idcard(age, sex_type):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    指定年龄及性别，生成身份证</span><br><span class="line">    :param age: 年龄</span><br><span class="line">    :param sex_type: 性别（女为0，男为1）</span><br><span class="line">    :return: </span><br><span class="line">    &quot;&quot;&quot;&quot;&quot;</span><br><span class="line">    # 加权因子</span><br><span class="line">    Wi &#x3D; [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]</span><br><span class="line">    # 校验码</span><br><span class="line">    checkCode &#x3D; [&#39;1&#39;, &#39;0&#39;, &#39;X&#39;, &#39;9&#39;, &#39;8&#39;, &#39;7&#39;, &#39;6&#39;, &#39;5&#39;, &#39;4&#39;, &#39;3&#39;, &#39;2&#39;]</span><br><span class="line"></span><br><span class="line">    addrCode &#x3D; str(get_address_code())</span><br><span class="line">    birthCode &#x3D; str(get_birth_age_code(age))</span><br><span class="line">    listCode &#x3D; str(get_list_sex_code(sex_type))</span><br><span class="line"></span><br><span class="line">    # 获取身份证前17位，并序列化</span><br><span class="line">    checkformat &#x3D; addrCode + birthCode + listCode</span><br><span class="line">    checkCard17 &#x3D; list(checkformat)</span><br><span class="line"></span><br><span class="line">    # 打包前十七位数字组成的列表和加权因子的列表为一个元祖的列表</span><br><span class="line">    zipnum &#x3D; zip(checkCard17, Wi)</span><br><span class="line"></span><br><span class="line">    # 加权计算</span><br><span class="line">    s &#x3D; sum(int(i) * int(j) for i, j in zipnum)</span><br><span class="line">    # 计算模</span><br><span class="line">    Y &#x3D; s % 11</span><br><span class="line"></span><br><span class="line">    checkNum &#x3D; checkCode[Y]</span><br><span class="line"></span><br><span class="line">    idcard &#x3D; checkformat + checkNum</span><br><span class="line">    return idcard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    print(get_idcard())</span><br><span class="line">    print(get_custom_idcard(26, 1))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以上，完~</p><blockquote><p><a href="https://blog.csdn.net/caoxinjian423/article/details/81027029">参考博客</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> faker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python造数据</title>
      <link href="2019/08/08/%E4%BD%BF%E7%94%A8python%E9%80%A0%E6%95%B0%E6%8D%AE/"/>
      <url>2019/08/08/%E4%BD%BF%E7%94%A8python%E9%80%A0%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>使用python造测试数据</p><a id="more"></a><h3 id="faker"><a href="#faker" class="headerlink" title="faker"></a>faker</h3><p>首先是faker模块，支持生成电话号码，地址，区号，银行卡号，邮箱等数据<br>安装：<code>pip install faker</code></p><p>初始化：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;8&#x2F;8 9:01</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 安装：pip install faker</span><br><span class="line">from faker import Faker</span><br><span class="line"></span><br><span class="line"># 初始化</span><br><span class="line">fake &#x3D; Faker(locale&#x3D;&#39;zh_CN&#39;)</span><br></pre></td></tr></table></figure><p>只列举一些常用的，更多选项可以上官网查看：</p><blockquote><p><a href="https://faker.readthedocs.io/en/master/locales/zh_CN.html">faker官网使用说明</a></p></blockquote><h4 id="手机号"><a href="#手机号" class="headerlink" title="手机号"></a>手机号</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 手机号</span><br><span class="line">print(fake.phone_number())</span><br><span class="line"></span><br><span class="line"># 运营商号段（手机号码前三位）</span><br><span class="line">print(fake.phonenumber_prefix())</span><br></pre></td></tr></table></figure><h4 id="身份证"><a href="#身份证" class="headerlink" title="身份证"></a>身份证</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 身份证,18位</span><br><span class="line">print(fake.ssn())</span><br></pre></td></tr></table></figure><h3 id="银行卡"><a href="#银行卡" class="headerlink" title="银行卡"></a>银行卡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 基本银行账户号码(本国)</span><br><span class="line">print(fake.bban())</span><br><span class="line"># 国际银行账户号码</span><br><span class="line">print(fake.iban())</span><br></pre></td></tr></table></figure><h3 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 地址</span><br><span class="line">print(fake.address())</span><br><span class="line"></span><br><span class="line"># 国家</span><br><span class="line">print(fake.country())</span><br><span class="line"></span><br><span class="line"># 城市</span><br><span class="line">print(fake.city())</span><br><span class="line"></span><br><span class="line"># 城市后缀，市或县</span><br><span class="line">print(fake.city_suffix())</span><br><span class="line"></span><br><span class="line"># 街道</span><br><span class="line">print(fake.street_address())</span><br><span class="line"></span><br><span class="line"># 街道名</span><br><span class="line">print(fake.street_name())</span><br><span class="line"></span><br><span class="line"># 经纬度</span><br><span class="line"># 纬度</span><br><span class="line">print(fake.latitude())</span><br><span class="line"># 经度</span><br><span class="line">print(fake.longitude())</span><br><span class="line"></span><br><span class="line"># 邮编</span><br><span class="line">print(fake.postcode())</span><br></pre></td></tr></table></figure><h3 id="姓名、职业"><a href="#姓名、职业" class="headerlink" title="姓名、职业"></a>姓名、职业</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 人名相关</span><br><span class="line"># 姓名</span><br><span class="line">print(fake.name())</span><br><span class="line"></span><br><span class="line"># 姓</span><br><span class="line">print(fake.last_name())</span><br><span class="line"></span><br><span class="line"># 名</span><br><span class="line">print(fake.first_name())</span><br><span class="line"></span><br><span class="line"># 职业</span><br><span class="line">print(fake.job())</span><br></pre></td></tr></table></figure><h3 id="条形码"><a href="#条形码" class="headerlink" title="条形码"></a>条形码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 条形码</span><br><span class="line"># 8位</span><br><span class="line">print(fake.ean8())</span><br><span class="line"></span><br><span class="line"># 13位</span><br><span class="line">print(fake.ean13())</span><br></pre></td></tr></table></figure><h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 颜色</span><br><span class="line"># 16进制表示</span><br><span class="line">print(fake.hex_color())</span><br><span class="line"></span><br><span class="line"># css用的rgb颜色</span><br><span class="line">print(fake.rgb_css_color())</span><br><span class="line"></span><br><span class="line"># css字符串</span><br><span class="line">print(fake.rgb_color())</span><br><span class="line"></span><br><span class="line"># 颜色名称</span><br><span class="line">print(fake.color_name())</span><br></pre></td></tr></table></figure><h3 id="公司"><a href="#公司" class="headerlink" title="公司"></a>公司</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 公司</span><br><span class="line"># 公司名</span><br><span class="line">print(fake.company())</span><br><span class="line"></span><br><span class="line"># 公司名前缀</span><br><span class="line">print(fake.company_prefix())</span><br><span class="line"></span><br><span class="line"># 公司名后缀</span><br><span class="line">print(fake.company_suffix())</span><br></pre></td></tr></table></figure><h3 id="信用卡"><a href="#信用卡" class="headerlink" title="信用卡"></a>信用卡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 信用卡</span><br><span class="line"># 卡号</span><br><span class="line">print(fake.credit_card_number(card_type&#x3D;None))</span><br><span class="line"></span><br><span class="line"># 卡提供方</span><br><span class="line">print(fake.credit_card_provider(card_type&#x3D;None))</span><br><span class="line"></span><br><span class="line"># 卡安全码</span><br><span class="line">print(fake.credit_card_security_code(card_type&#x3D;None))</span><br><span class="line"></span><br><span class="line"># 卡有效期</span><br><span class="line">print(fake.credit_card_expire())</span><br><span class="line"></span><br><span class="line"># 卡完整信息</span><br><span class="line">print(fake.credit_card_full(card_type&#x3D;None))</span><br></pre></td></tr></table></figure><h3 id="货币"><a href="#货币" class="headerlink" title="货币"></a>货币</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 货币</span><br><span class="line"># 货币代码</span><br><span class="line">print(fake.currency_code())</span><br><span class="line"></span><br><span class="line"># 货币名称</span><br><span class="line">print(fake.currency_name())</span><br><span class="line"></span><br><span class="line"># 货币完整信息</span><br><span class="line">print(fake.currency())</span><br></pre></td></tr></table></figure><h3 id="日期-时间"><a href="#日期-时间" class="headerlink" title="日期/时间"></a>日期/时间</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># 日期&#x2F;时间</span><br><span class="line"># 随机时间</span><br><span class="line">print(fake.date_time())</span><br><span class="line"></span><br><span class="line"># 随机年、月、月份名字、月中某一天、星期几</span><br><span class="line">print(fake.year())</span><br><span class="line">print(fake.month())</span><br><span class="line">print(fake.month())</span><br><span class="line">print(fake.day_of_month())</span><br><span class="line">print(fake.day_of_week())</span><br><span class="line"></span><br><span class="line"># 随机输出上下午</span><br><span class="line">print(fake.am_pm())</span><br><span class="line"></span><br><span class="line"># 随机时区</span><br><span class="line">print(fake.timezone())</span><br><span class="line"></span><br><span class="line"># 随机时间戳（unix_time）</span><br><span class="line">print(fake.unix_time())</span><br><span class="line"></span><br><span class="line"># 随机日期，自定义格式</span><br><span class="line">print(fake.date(pattern&#x3D;&quot;%Y-%m-%d&quot;))</span><br><span class="line"></span><br><span class="line"># 随机时间，自定义格式</span><br><span class="line">print(fake.time(pattern&#x3D;&quot;%H:%M:%S&quot;))</span><br><span class="line"></span><br><span class="line"># 随机十年内任一时间</span><br><span class="line">print(fake.date_time_this_decade(before_now&#x3D;True, after_now&#x3D;False, tzinfo&#x3D;None))</span><br><span class="line"></span><br><span class="line"># 指定时间内任一时间</span><br><span class="line">from datetime import datetime</span><br><span class="line">print(fake.date_time_between_dates(datetime_start&#x3D;datetime(2002, 2, 9, 10, 50, 20),</span><br><span class="line">                                   datetime_end&#x3D;datetime(2007, 2, 9, 10, 51, 30), tzinfo&#x3D;None))</span><br></pre></td></tr></table></figure><h3 id="internet互联网"><a href="#internet互联网" class="headerlink" title="internet互联网"></a>internet互联网</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 互联网</span><br><span class="line"># ipv4地址</span><br><span class="line">print(fake.ipv4(network&#x3D;False))</span><br><span class="line"></span><br><span class="line"># ipv6地址</span><br><span class="line">print(fake.ipv6(network&#x3D;False))</span><br><span class="line"></span><br><span class="line"># url(统一资源定位符)</span><br><span class="line">print(fake.url())</span><br><span class="line"></span><br><span class="line"># uri(统一资源标识符)</span><br><span class="line">print(fake.uri())</span><br><span class="line"></span><br><span class="line"># uri路径、扩展名</span><br><span class="line">print(fake.uri_path())</span><br><span class="line">print(fake.uri_extension())</span><br><span class="line"></span><br><span class="line"># 域名主体、域名、域名后缀</span><br><span class="line">print(fake.domain_word())</span><br><span class="line">print(fake.domain_name())</span><br><span class="line">print(fake.tld())</span><br><span class="line"></span><br><span class="line"># MAC地址</span><br><span class="line">print(fake.mac_address())</span><br><span class="line"></span><br><span class="line"># 邮箱、安全邮箱、免费邮箱、公司邮箱</span><br><span class="line">print(fake.email())</span><br><span class="line">print(fake.safe_email())</span><br><span class="line">print(fake.free_email())</span><br><span class="line">print(fake.company_email())</span><br></pre></td></tr></table></figure><h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 随机指定长度的二进制字符串</span><br><span class="line">print(fake.binary(length&#x3D;15))</span><br><span class="line"></span><br><span class="line"># 随机MD5、sha1、sha256</span><br><span class="line">print(fake.md5(raw_output&#x3D;False))</span><br><span class="line">print(fake.sha1(raw_output&#x3D;False))</span><br><span class="line">print(fake.sha256(raw_output&#x3D;False))</span><br><span class="line"></span><br><span class="line"># 随机uuid</span><br><span class="line">print(fake.uuid4())</span><br><span class="line"></span><br><span class="line"># 随机密码,支持指定策略</span><br><span class="line">print(fake.password(length&#x3D;10, special_chars&#x3D;True, digits&#x3D;True, upper_case&#x3D;True, lower_case&#x3D;True))</span><br></pre></td></tr></table></figure><h3 id="python数据"><a href="#python数据" class="headerlink" title="python数据"></a>python数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># python数据</span><br><span class="line"># 随机list</span><br><span class="line">print(fake.pylist(nb_elements&#x3D;3, variable_nb_elements&#x3D;True))</span><br><span class="line"></span><br><span class="line"># 随机字典</span><br><span class="line">print(fake.pydict(nb_elements&#x3D;3, variable_nb_elements&#x3D;True))</span><br><span class="line"></span><br><span class="line"># 随机元组tuple</span><br><span class="line">print(fake.pytuple(nb_elements&#x3D;4, variable_nb_elements&#x3D;True))</span><br></pre></td></tr></table></figure><h3 id="user-agent用户代理"><a href="#user-agent用户代理" class="headerlink" title="user_agent用户代理"></a>user_agent用户代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># user_agent</span><br><span class="line">print(fake.user_agent())</span><br></pre></td></tr></table></figure><h4 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 系统伪造</span><br><span class="line"># windows</span><br><span class="line">print(fake.windows_platform_token())</span><br><span class="line"></span><br><span class="line"># linux</span><br><span class="line">print(fake.linux_processor())</span><br><span class="line">print(fake.linux_platform_token())</span><br><span class="line"></span><br><span class="line"># mac</span><br><span class="line">print(fake.mac_processor())</span><br><span class="line">print(fake.mac_platform_token())</span><br></pre></td></tr></table></figure><h4 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 浏览器</span><br><span class="line"># IE</span><br><span class="line">print(fake.internet_explorer())</span><br><span class="line"></span><br><span class="line"># Chrome</span><br><span class="line">print(fake.chrome())</span><br><span class="line"></span><br><span class="line"># Firefox</span><br><span class="line">print(fake.firefox())</span><br><span class="line"></span><br><span class="line"># safari</span><br><span class="line">print(fake.safari())</span><br></pre></td></tr></table></figure><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> faker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter正则表达式提取器</title>
      <link href="2019/08/02/Jmeter%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8F%90%E5%8F%96%E5%99%A8/"/>
      <url>2019/08/02/Jmeter%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8F%90%E5%8F%96%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>Jmeter正则表达式提取器</p><p>一个Jmter常用的后置处理器</p><a id="more"></a><h3 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h3><p>添加方式：Jmeter线程组，右键——&gt; 后置处理器 ——&gt; 正则表达式提取器</p><p>作用：提取前一个请求返回结果中的相应信息，给后续请求使用</p><p>Apply to部分：</p><ul><li>Main Sample and sub-sample: 作用于父节点取样器及对应的子节点取样器</li><li>Main sample only：仅作用于父节点的取样器</li><li>Sub-samples only：仅作用于子节点的取样器</li><li>Jmeter Variable：作用于Jmeter变量</li></ul><p>要检查的响应字段部分：</p><ul><li><p>主体：响应报文的主体</p></li><li><p>Body（unescaped）：主体，响应的主体内容且替换了所有的html转义符</p></li><li><p>Body as a Document：从不同类型的文件中提取文本</p></li><li><p>信息头：响应信息头</p></li><li><p>Request Headers：请求信息头</p></li><li><p>URL：统一资源定位符</p></li><li><p>响应代码：http code，200,404,500等</p></li><li><p>响应信息：响应信息</p></li><li><p>引用名称：Jmeter变量名称，用来保存正则提取的结果，传给下个请求用</p></li><li><p>正则表达式：正则表达式</p></li><li><p>模板：从匹配结果中创建一个字符串，意思是提取到某一组值（正则结果可能是有几个组，g0，g1，g2…），<code>$0$</code>，表示提取g0组的结果；<code>$1$</code>表示提取g1组的结果；同时支持提取多组值：<code>$0$$1$</code>同时提取g0，g1组结果，并且拼接成一个变量值。</p></li><li><p>匹配数字：匹配某一组值的第几个值，0表示随机，1表示提取第一个值，2表示提取第二个值；</p></li><li><p>缺省值：匹配失败的默认值，常用于后续逻辑判断，例如：ERROR</p></li></ul><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>有两个接口，第一个接口是登录，第二个接口使用第一个接口返回信息中的id</p><p>登录接口返回信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;result&quot;:true,</span><br><span class="line">    &quot;data&quot;:&#123;</span><br><span class="line">        &quot;IsValid&quot;:true,</span><br><span class="line">        &quot;SysParaInfo&quot;:null,</span><br><span class="line">        &quot;ModuleList&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010010&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;移动&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010020&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;排班&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010030&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;请假&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010040&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;加班&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010060&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;调休&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010070&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;审核&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010080&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;异常&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Id&quot;:&quot;S010380&quot;,</span><br><span class="line">                &quot;Name&quot;:&quot;调班&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;Uuid&quot;:&quot;FDA50693-A4E2-4FB1-AFCF-C6EB07647825825&quot;,</span><br><span class="line">        &quot;PunchTypeList&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;PunchType&quot;:&quot;APP_QR&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;PunchType&quot;:&quot;APP_GPS&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;PunchType&quot;:&quot;APP_BHT&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;gesturePwd&quot;:&quot;&quot;,</span><br><span class="line">        &quot;timeClassS&quot;:null,</span><br><span class="line">        &quot;timeClassE&quot;:null,</span><br><span class="line">        &quot;ServiceTime&quot;:&quot;11:22&quot;,</span><br><span class="line">        &quot;BackGroundVersion&quot;:&quot;Y1&quot;,</span><br><span class="line">        &quot;aghUrl&quot;:null,</span><br><span class="line">        &quot;HeadImgUrl&quot;:null,</span><br><span class="line">        &quot;EmployeeTypeId&quot;:null,</span><br><span class="line">        &quot;phoneNumber&quot;:null,</span><br><span class="line">        &quot;areaCode&quot;:null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用工具测试，<code>&quot;Id&quot;:&quot;(.+?)&quot;</code>提取出的结果为：</p><table><thead><tr><th>0</th><th>1</th></tr></thead><tbody><tr><td>“Id”:”S010010”</td><td>S010010</td></tr><tr><td>“Id”:”S010020”</td><td>S010020</td></tr><tr><td>“Id”:”S010030”</td><td>S010030</td></tr><tr><td>“Id”:”S010040”</td><td>S010040</td></tr><tr><td>“Id”:”S010050”</td><td>S010050</td></tr><tr><td>“Id”:”S010060”</td><td>S010060</td></tr><tr><td>“Id”:”S010070”</td><td>S010070</td></tr></tbody></table><h4 id="1"><a href="#1" class="headerlink" title="1"></a>1</h4><p>添加正则表达式提取器，配置内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">应用名称：id</span><br><span class="line">正则表达式：&quot;Id&quot;:&quot;(.+?)&quot;</span><br><span class="line">模板：$0$  </span><br><span class="line">匹配数字：1 </span><br><span class="line">缺省值：</span><br></pre></td></tr></table></figure><p>配置项组合结果为：提取第0组结果的第一个值，也就是<code>&quot;Id&quot;:&quot;S010010&quot;</code>;运行查看结果，结果显示id提取值为：<code>&quot;Id&quot;:&quot;S010010&quot;</code>;符合预期。</p><h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><p>添加正则表达式提取器，配置内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">应用名称：id</span><br><span class="line">正则表达式：&quot;Id&quot;:&quot;(.+?)&quot;</span><br><span class="line">模板：$1$</span><br><span class="line">匹配数字：2 </span><br><span class="line">缺省值：</span><br></pre></td></tr></table></figure><p>配置项组合结果为：提取第1组结果的第2个值，也就是<code>S010020</code>;运行查看结果，结果显示id提取值为：<code>S010020</code>;符合预期。</p><h4 id="3"><a href="#3" class="headerlink" title="3"></a>3</h4><p>添加正则表达式提取器，配置内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">应用名称：id</span><br><span class="line">正则表达式：&quot;Id&quot;:&quot;(.+?)&quot;</span><br><span class="line">模板：$1$$0$</span><br><span class="line">匹配数字：3</span><br><span class="line">缺省值：</span><br></pre></td></tr></table></figure><p>配置项组合结果为：提取第1组和第0组拼接成的结果的第4个值，也就是<code>S010030&quot;Id&quot;:&quot;S010030&quot;</code>;运行查看结果，结果显示id提取值为：<code>S010030&quot;Id&quot;:&quot;S010030&quot;</code>;符合预期。</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[转]Git Cheat Sheet中文版</title>
      <link href="2019/08/01/%E8%BD%AC-Git-Cheat-Sheet%E4%B8%AD%E6%96%87%E7%89%88/"/>
      <url>2019/08/01/%E8%BD%AC-Git-Cheat-Sheet%E4%B8%AD%E6%96%87%E7%89%88/</url>
      
        <content type="html"><![CDATA[<p>Git Cheat Sheet 中文版</p><a id="more"></a><p>转自互联网,感谢原作者：</p><blockquote><p><a href="https://github.com/flyhigher139/Git-Cheat-Sheet">Git Cheat Sheet 中文版</a></p></blockquote><p>=====================</p><h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><ul><li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">配置文件</a></li><li><a href="#%E5%88%9B%E5%BB%BA">创建</a></li><li><a href="#%E6%9C%AC%E5%9C%B0%E4%BF%AE%E6%94%B9">本地修改</a></li><li><a href="#%E6%90%9C%E7%B4%A2">搜索</a></li><li><a href="#%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2">提交历史</a></li><li><a href="#%E5%88%86%E6%94%AF%E4%B8%8E%E6%A0%87%E7%AD%BE">分支与标签</a></li><li><a href="#%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%8F%91%E5%B8%83">更新与发布</a></li><li><a href="#%E5%90%88%E5%B9%B6%E4%B8%8E%E9%87%8D%E7%BD%AE">合并与重置</a></li><li><a href="#%E6%92%A4%E9%94%80">撤销</a></li><li><a href="#git-flow">Git Flow</a></li></ul><hr><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h5 id="列出当前配置："><a href="#列出当前配置：" class="headerlink" title="列出当前配置："></a>列出当前配置：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list</span><br></pre></td></tr></table></figure><h5 id="列出repository配置："><a href="#列出repository配置：" class="headerlink" title="列出repository配置："></a>列出repository配置：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --local --list</span><br></pre></td></tr></table></figure><h5 id="列出全局配置："><a href="#列出全局配置：" class="headerlink" title="列出全局配置："></a>列出全局配置：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global --list</span><br></pre></td></tr></table></figure><h5 id="列出系统配置："><a href="#列出系统配置：" class="headerlink" title="列出系统配置："></a>列出系统配置：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --system --list</span><br></pre></td></tr></table></figure><h5 id="设置用户名："><a href="#设置用户名：" class="headerlink" title="设置用户名："></a>设置用户名：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name “[firstname lastname]”</span><br></pre></td></tr></table></figure><h5 id="设置用户邮箱："><a href="#设置用户邮箱：" class="headerlink" title="设置用户邮箱："></a>设置用户邮箱：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.email “[valid-email]”</span><br></pre></td></tr></table></figure><h5 id="设置git命令输出为彩色："><a href="#设置git命令输出为彩色：" class="headerlink" title="设置git命令输出为彩色："></a>设置git命令输出为彩色：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global color.ui auto</span><br></pre></td></tr></table></figure><h5 id="设置git使用的文本编辑器设："><a href="#设置git使用的文本编辑器设：" class="headerlink" title="设置git使用的文本编辑器设："></a>设置git使用的文本编辑器设：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.editor vi</span><br></pre></td></tr></table></figure><hr><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h5 id="Repository配置对应的配置文件路径-–local-："><a href="#Repository配置对应的配置文件路径-–local-：" class="headerlink" title="Repository配置对应的配置文件路径[–local]："></a>Repository配置对应的配置文件路径[–local]：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;repo&gt;&#x2F;.git&#x2F;config</span><br></pre></td></tr></table></figure><h5 id="用户全局配置对应的配置文件路径-–global-："><a href="#用户全局配置对应的配置文件路径-–global-：" class="headerlink" title="用户全局配置对应的配置文件路径[–global]："></a>用户全局配置对应的配置文件路径[–global]：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~&#x2F;.gitconfig</span><br></pre></td></tr></table></figure><h5 id="系统配置对应的配置文件路径-–local-："><a href="#系统配置对应的配置文件路径-–local-：" class="headerlink" title="系统配置对应的配置文件路径[–local]："></a>系统配置对应的配置文件路径[–local]：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;gitconfig</span><br></pre></td></tr></table></figure><hr><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><h5 id="复制一个已创建的仓库"><a href="#复制一个已创建的仓库" class="headerlink" title="复制一个已创建的仓库:"></a>复制一个已创建的仓库:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过 SSH</span></span><br><span class="line">$ git <span class="built_in">clone</span> ssh://user@domain.com/repo.git</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过 HTTP</span></span><br><span class="line">$ git <span class="built_in">clone</span> http://domain.com/user/repo.git</span><br></pre></td></tr></table></figure><h5 id="创建一个新的本地仓库"><a href="#创建一个新的本地仓库" class="headerlink" title="创建一个新的本地仓库:"></a>创建一个新的本地仓库:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure><hr><h3 id="本地修改"><a href="#本地修改" class="headerlink" title="本地修改"></a>本地修改</h3><h5 id="显示工作路径下已修改的文件："><a href="#显示工作路径下已修改的文件：" class="headerlink" title="显示工作路径下已修改的文件："></a>显示工作路径下已修改的文件：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br></pre></td></tr></table></figure><h5 id="显示与上次提交版本文件的不同："><a href="#显示与上次提交版本文件的不同：" class="headerlink" title="显示与上次提交版本文件的不同："></a>显示与上次提交版本文件的不同：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br></pre></td></tr></table></figure><h5 id="把当前所有修改添加到下次提交中："><a href="#把当前所有修改添加到下次提交中：" class="headerlink" title="把当前所有修改添加到下次提交中："></a>把当前所有修改添加到下次提交中：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br></pre></td></tr></table></figure><h5 id="把对某个文件的修改添加到下次提交中："><a href="#把对某个文件的修改添加到下次提交中：" class="headerlink" title="把对某个文件的修改添加到下次提交中："></a>把对某个文件的修改添加到下次提交中：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add -p &lt;file&gt;</span><br></pre></td></tr></table></figure><h5 id="提交本地的所有修改："><a href="#提交本地的所有修改：" class="headerlink" title="提交本地的所有修改："></a>提交本地的所有修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -a</span><br></pre></td></tr></table></figure><h5 id="提交之前已标记的变化："><a href="#提交之前已标记的变化：" class="headerlink" title="提交之前已标记的变化："></a>提交之前已标记的变化：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit</span><br></pre></td></tr></table></figure><h5 id="附加消息提交："><a href="#附加消息提交：" class="headerlink" title="附加消息提交："></a>附加消息提交：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &#39;message here&#39;</span><br></pre></td></tr></table></figure><h5 id="提交，并将提交时间设置为之前的某个日期"><a href="#提交，并将提交时间设置为之前的某个日期" class="headerlink" title="提交，并将提交时间设置为之前的某个日期:"></a>提交，并将提交时间设置为之前的某个日期:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --date&#x3D;&quot;&#96;date --date&#x3D;&#39;n day ago&#39;&#96;&quot; -am &quot;Commit Message&quot;</span><br></pre></td></tr></table></figure><h5 id="修改上次提交"><a href="#修改上次提交" class="headerlink" title="修改上次提交"></a>修改上次提交</h5><p><em><sub>请勿修改已发布的提交记录!</sub></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure><h5 id="修改上次提交的committer-date："><a href="#修改上次提交的committer-date：" class="headerlink" title="修改上次提交的committer date："></a>修改上次提交的committer date：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GIT_COMMITTER_DATE&#x3D;&quot;date&quot; git commit --amend</span><br></pre></td></tr></table></figure><h5 id="修改上次提交的author-date："><a href="#修改上次提交的author-date：" class="headerlink" title="修改上次提交的author date："></a>修改上次提交的author date：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend --date&#x3D;&quot;date&quot;</span><br></pre></td></tr></table></figure><h5 id="把当前分支中未提交的修改移动到其他分支："><a href="#把当前分支中未提交的修改移动到其他分支：" class="headerlink" title="把当前分支中未提交的修改移动到其他分支："></a>把当前分支中未提交的修改移动到其他分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br><span class="line">git checkout branch2</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure><h5 id="将-stashed-changes-应用到当前分支："><a href="#将-stashed-changes-应用到当前分支：" class="headerlink" title="将 stashed changes 应用到当前分支："></a>将 stashed changes 应用到当前分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure><h5 id="删除最新一次的-stashed-changes："><a href="#删除最新一次的-stashed-changes：" class="headerlink" title="删除最新一次的 stashed changes："></a>删除最新一次的 stashed changes：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop</span><br></pre></td></tr></table></figure><hr><h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><h5 id="从当前目录的所有文件中查找文本内容："><a href="#从当前目录的所有文件中查找文本内容：" class="headerlink" title="从当前目录的所有文件中查找文本内容："></a>从当前目录的所有文件中查找文本内容：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git grep &quot;Hello&quot;</span><br></pre></td></tr></table></figure><h5 id="在某一版本中搜索文本："><a href="#在某一版本中搜索文本：" class="headerlink" title="在某一版本中搜索文本："></a>在某一版本中搜索文本：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git grep &quot;Hello&quot; v2.5</span><br></pre></td></tr></table></figure><hr><h3 id="提交历史"><a href="#提交历史" class="headerlink" title="提交历史"></a>提交历史</h3><h5 id="从最新提交开始，显示所有的提交记录（显示hash，-作者信息，提交的标题和时间）："><a href="#从最新提交开始，显示所有的提交记录（显示hash，-作者信息，提交的标题和时间）：" class="headerlink" title="从最新提交开始，显示所有的提交记录（显示hash， 作者信息，提交的标题和时间）："></a>从最新提交开始，显示所有的提交记录（显示hash， 作者信息，提交的标题和时间）：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br></pre></td></tr></table></figure><h5 id="显示所有提交（仅显示提交的hash和message）："><a href="#显示所有提交（仅显示提交的hash和message）：" class="headerlink" title="显示所有提交（仅显示提交的hash和message）："></a>显示所有提交（仅显示提交的hash和message）：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline</span><br></pre></td></tr></table></figure><h5 id="显示某个用户的所有提交："><a href="#显示某个用户的所有提交：" class="headerlink" title="显示某个用户的所有提交："></a>显示某个用户的所有提交：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log --author&#x3D;&quot;username&quot;</span><br></pre></td></tr></table></figure><h5 id="显示某个文件的所有修改："><a href="#显示某个文件的所有修改：" class="headerlink" title="显示某个文件的所有修改："></a>显示某个文件的所有修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log -p &lt;file&gt;</span><br></pre></td></tr></table></figure><h5 id="仅显示远端-lt-remote-master-gt-分支与远端-lt-origin-master-gt-分支提交记录的差集："><a href="#仅显示远端-lt-remote-master-gt-分支与远端-lt-origin-master-gt-分支提交记录的差集：" class="headerlink" title="仅显示远端&lt;remote/master&gt;分支与远端&lt;origin/master&gt;分支提交记录的差集："></a>仅显示远端&lt;remote/master&gt;分支与远端&lt;origin/master&gt;分支提交记录的差集：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline &lt;origin&#x2F;master&gt;..&lt;remote&#x2F;master&gt; --left-right</span><br></pre></td></tr></table></figure><h5 id="谁，在什么时间，修改了文件的什么内容："><a href="#谁，在什么时间，修改了文件的什么内容：" class="headerlink" title="谁，在什么时间，修改了文件的什么内容："></a>谁，在什么时间，修改了文件的什么内容：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git blame &lt;file&gt;</span><br></pre></td></tr></table></figure><h5 id="显示reflog："><a href="#显示reflog：" class="headerlink" title="显示reflog："></a>显示reflog：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog show </span><br></pre></td></tr></table></figure><h5 id="删除reflog："><a href="#删除reflog：" class="headerlink" title="删除reflog："></a>删除reflog：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog delete</span><br></pre></td></tr></table></figure><hr><h3 id="分支与标签"><a href="#分支与标签" class="headerlink" title="分支与标签"></a>分支与标签</h3><h5 id="列出所有的分支："><a href="#列出所有的分支：" class="headerlink" title="列出所有的分支："></a>列出所有的分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br></pre></td></tr></table></figure><h5 id="列出所有的远端分支："><a href="#列出所有的远端分支：" class="headerlink" title="列出所有的远端分支："></a>列出所有的远端分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -r</span><br></pre></td></tr></table></figure><h5 id="切换分支："><a href="#切换分支：" class="headerlink" title="切换分支："></a>切换分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="创建并切换到新分支"><a href="#创建并切换到新分支" class="headerlink" title="创建并切换到新分支:"></a>创建并切换到新分支:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="基于当前分支创建新分支："><a href="#基于当前分支创建新分支：" class="headerlink" title="基于当前分支创建新分支："></a>基于当前分支创建新分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch &lt;new-branch&gt;</span><br></pre></td></tr></table></figure><h5 id="基于远程分支创建新的可追溯的分支："><a href="#基于远程分支创建新的可追溯的分支：" class="headerlink" title="基于远程分支创建新的可追溯的分支："></a>基于远程分支创建新的可追溯的分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --track &lt;new-branch&gt; &lt;remote-branch&gt;</span><br></pre></td></tr></table></figure><h5 id="删除本地分支"><a href="#删除本地分支" class="headerlink" title="删除本地分支:"></a>删除本地分支:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="强制删除一个本地分支："><a href="#强制删除一个本地分支：" class="headerlink" title="强制删除一个本地分支："></a>强制删除一个本地分支：<br></h5><p><em><sub>将会丢失未合并的修改！</sub></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -D &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="给当前版本打标签："><a href="#给当前版本打标签：" class="headerlink" title="给当前版本打标签："></a>给当前版本打标签：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag &lt;tag-name&gt;</span><br></pre></td></tr></table></figure><h5 id="给当前版本打标签并附加消息："><a href="#给当前版本打标签并附加消息：" class="headerlink" title="给当前版本打标签并附加消息："></a>给当前版本打标签并附加消息：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a &lt;tag-name&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="更新与发布"><a href="#更新与发布" class="headerlink" title="更新与发布"></a>更新与发布</h3><h5 id="列出当前配置的远程端："><a href="#列出当前配置的远程端：" class="headerlink" title="列出当前配置的远程端："></a>列出当前配置的远程端：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure><h5 id="显示远程端的信息："><a href="#显示远程端的信息：" class="headerlink" title="显示远程端的信息："></a>显示远程端的信息：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote show &lt;remote&gt;</span><br></pre></td></tr></table></figure><h5 id="添加新的远程端："><a href="#添加新的远程端：" class="headerlink" title="添加新的远程端："></a>添加新的远程端：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add &lt;remote&gt; &lt;url&gt;</span><br></pre></td></tr></table></figure><h5 id="下载远程端版本，但不合并到HEAD中："><a href="#下载远程端版本，但不合并到HEAD中：" class="headerlink" title="下载远程端版本，但不合并到HEAD中："></a>下载远程端版本，但不合并到HEAD中：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch &lt;remote&gt;</span><br></pre></td></tr></table></figure><h5 id="下载远程端版本，并自动与HEAD版本合并："><a href="#下载远程端版本，并自动与HEAD版本合并：" class="headerlink" title="下载远程端版本，并自动与HEAD版本合并："></a>下载远程端版本，并自动与HEAD版本合并：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote pull &lt;remote&gt; &lt;url&gt;</span><br></pre></td></tr></table></figure><h5 id="将远程端版本合并到本地版本中："><a href="#将远程端版本合并到本地版本中：" class="headerlink" title="将远程端版本合并到本地版本中："></a>将远程端版本合并到本地版本中：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin master</span><br></pre></td></tr></table></figure><h5 id="以rebase方式将远端分支与本地合并："><a href="#以rebase方式将远端分支与本地合并：" class="headerlink" title="以rebase方式将远端分支与本地合并："></a>以rebase方式将远端分支与本地合并：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull --rebase &lt;remote&gt; &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="将本地版本发布到远程端："><a href="#将本地版本发布到远程端：" class="headerlink" title="将本地版本发布到远程端："></a>将本地版本发布到远程端：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push remote &lt;remote&gt; &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="删除远程端分支："><a href="#删除远程端分支：" class="headerlink" title="删除远程端分支："></a>删除远程端分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push &lt;remote&gt; :&lt;branch&gt; (since Git v1.5.0)</span><br><span class="line">or</span><br><span class="line">git push &lt;remote&gt; --delete &lt;branch&gt; (since Git v1.7.0)</span><br></pre></td></tr></table></figure><h5 id="发布标签"><a href="#发布标签" class="headerlink" title="发布标签:"></a>发布标签:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push --tags</span><br></pre></td></tr></table></figure><hr><h3 id="合并与重置-Rebase"><a href="#合并与重置-Rebase" class="headerlink" title="合并与重置(Rebase)"></a>合并与重置(Rebase)</h3><h5 id="将分支合并到当前HEAD中："><a href="#将分支合并到当前HEAD中：" class="headerlink" title="将分支合并到当前HEAD中："></a>将分支合并到当前HEAD中：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="将当前HEAD版本重置到分支中"><a href="#将当前HEAD版本重置到分支中" class="headerlink" title="将当前HEAD版本重置到分支中:"></a>将当前HEAD版本重置到分支中:</h5><p><em><sub>请勿重置已发布的提交!</sub></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase &lt;branch&gt;</span><br></pre></td></tr></table></figure><h5 id="退出重置"><a href="#退出重置" class="headerlink" title="退出重置:"></a>退出重置:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase --abort</span><br></pre></td></tr></table></figure><h5 id="解决冲突后继续重置："><a href="#解决冲突后继续重置：" class="headerlink" title="解决冲突后继续重置："></a>解决冲突后继续重置：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase --continue</span><br></pre></td></tr></table></figure><h5 id="使用配置好的merge-tool-解决冲突："><a href="#使用配置好的merge-tool-解决冲突：" class="headerlink" title="使用配置好的merge tool 解决冲突："></a>使用配置好的merge tool 解决冲突：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git mergetool</span><br></pre></td></tr></table></figure><h5 id="在编辑器中手动解决冲突后，标记文件为已解决冲突："><a href="#在编辑器中手动解决冲突后，标记文件为已解决冲突：" class="headerlink" title="在编辑器中手动解决冲突后，标记文件为已解决冲突："></a>在编辑器中手动解决冲突后，标记文件为<code>已解决冲突</code>：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add &lt;resolved-file&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm &lt;resolved-file&gt;</span><br></pre></td></tr></table></figure><h5 id="合并提交："><a href="#合并提交：" class="headerlink" title="合并提交："></a>合并提交：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i &lt;commit-just-before-first&gt;</span><br></pre></td></tr></table></figure><p>把上面的内容替换为下面的内容：</p><p>原内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick &lt;commit_id&gt;</span><br><span class="line">pick &lt;commit_id2&gt;</span><br><span class="line">pick &lt;commit_id3&gt;</span><br></pre></td></tr></table></figure><p>替换为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pick &lt;commit_id&gt;</span><br><span class="line">squash &lt;commit_id2&gt;</span><br><span class="line">squash &lt;commit_id3&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h3><h5 id="放弃工作目录下的所有修改："><a href="#放弃工作目录下的所有修改：" class="headerlink" title="放弃工作目录下的所有修改："></a>放弃工作目录下的所有修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD</span><br></pre></td></tr></table></figure><h5 id="移除缓存区的所有文件（i-e-撤销上次git-add）"><a href="#移除缓存区的所有文件（i-e-撤销上次git-add）" class="headerlink" title="移除缓存区的所有文件（i.e. 撤销上次git add）:"></a>移除缓存区的所有文件（i.e. 撤销上次<code>git add</code>）:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD</span><br></pre></td></tr></table></figure><h5 id="放弃某个文件的所有本地修改："><a href="#放弃某个文件的所有本地修改：" class="headerlink" title="放弃某个文件的所有本地修改："></a>放弃某个文件的所有本地修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout HEAD &lt;file&gt;</span><br></pre></td></tr></table></figure><h5 id="重置一个提交（通过创建一个截然不同的新提交）"><a href="#重置一个提交（通过创建一个截然不同的新提交）" class="headerlink" title="重置一个提交（通过创建一个截然不同的新提交）"></a>重置一个提交（通过创建一个截然不同的新提交）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git revert &lt;commit&gt;</span><br></pre></td></tr></table></figure><h5 id="将HEAD重置到指定的版本，并抛弃该版本之后的所有修改："><a href="#将HEAD重置到指定的版本，并抛弃该版本之后的所有修改：" class="headerlink" title="将HEAD重置到指定的版本，并抛弃该版本之后的所有修改："></a>将HEAD重置到指定的版本，并抛弃该版本之后的所有修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard &lt;commit&gt;</span><br></pre></td></tr></table></figure><h5 id="用远端分支强制覆盖本地分支："><a href="#用远端分支强制覆盖本地分支：" class="headerlink" title="用远端分支强制覆盖本地分支："></a>用远端分支强制覆盖本地分支：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;remote&#x2F;branch&gt; e.g., upstream&#x2F;master, origin&#x2F;my-feature</span><br></pre></td></tr></table></figure><h5 id="将HEAD重置到上一次提交的版本，并将之后的修改标记为未添加到缓存区的修改："><a href="#将HEAD重置到上一次提交的版本，并将之后的修改标记为未添加到缓存区的修改：" class="headerlink" title="将HEAD重置到上一次提交的版本，并将之后的修改标记为未添加到缓存区的修改："></a>将HEAD重置到上一次提交的版本，并将之后的修改标记为未添加到缓存区的修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset &lt;commit&gt;</span><br></pre></td></tr></table></figure><h5 id="将HEAD重置到上一次提交的版本，并保留未提交的本地修改："><a href="#将HEAD重置到上一次提交的版本，并保留未提交的本地修改：" class="headerlink" title="将HEAD重置到上一次提交的版本，并保留未提交的本地修改："></a>将HEAD重置到上一次提交的版本，并保留未提交的本地修改：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --keep &lt;commit&gt;</span><br></pre></td></tr></table></figure><h5 id="删除添加-gitignore文件前错误提交的文件："><a href="#删除添加-gitignore文件前错误提交的文件：" class="headerlink" title="删除添加.gitignore文件前错误提交的文件："></a>删除添加<code>.gitignore</code>文件前错误提交的文件：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git rm -r --cached .</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m &quot;remove xyz file&quot;</span><br></pre></td></tr></table></figure><hr><h2 id="Git-Flow"><a href="#Git-Flow" class="headerlink" title="Git-Flow"></a>Git-Flow</h2><h3 id="索引-1"><a href="#索引-1" class="headerlink" title="索引"></a>索引</h3><ul><li><a href="#%E5%AE%89%E8%A3%85">安装</a></li><li><a href="#%E5%BC%80%E5%A7%8B">开始</a></li><li><a href="#%E7%89%B9%E6%80%A7">特性</a></li><li><a href="#%E5%81%9A%E4%B8%80%E4%B8%AArelease%E7%89%88%E6%9C%AC">做一个release版本</a></li><li><a href="#%E7%B4%A7%E6%80%A5%E4%BF%AE%E5%A4%8D">紧急修复</a></li><li><a href="#commands">Commands</a></li></ul><hr><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul><li>你需要有一个可以工作的 git 作为前提。</li><li>Git flow 可以工作在 OSX, Linux 和 Windows之下</li></ul><h5 id="OSX-Homebrew"><a href="#OSX-Homebrew" class="headerlink" title="OSX Homebrew:"></a>OSX Homebrew:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install git-flow</span><br></pre></td></tr></table></figure><h5 id="OSX-Macports"><a href="#OSX-Macports" class="headerlink" title="OSX Macports:"></a>OSX Macports:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ port install git-flow</span><br></pre></td></tr></table></figure><h5 id="Linux"><a href="#Linux" class="headerlink" title="Linux:"></a>Linux:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install git-flow</span><br></pre></td></tr></table></figure><h5 id="Windows-Cygwin"><a href="#Windows-Cygwin" class="headerlink" title="Windows (Cygwin):"></a>Windows (Cygwin):</h5><p>安装 git-flow, 你需要 wget 和 util-linux。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -q -O - --no-check-certificate https:&#x2F;&#x2F;github.com&#x2F;nvie&#x2F;gitflow&#x2F;raw&#x2F;develop&#x2F;contrib&#x2F;gitflow-installer.sh | bash</span><br></pre></td></tr></table></figure><hr><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><ul><li>为了自定义你的项目，Git flow 需要初始化过程。</li><li>使用 git-flow，从初始化一个现有的 git 库内开始。</li><li>初始化，你必须回答几个关于分支的命名约定的问题。建议使用默认值。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow init</span><br></pre></td></tr></table></figure><hr><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul><li>为即将发布的版本开发新功能特性。</li><li>这通常只存在开发者的库中。</li></ul><h5 id="创建一个新特性"><a href="#创建一个新特性" class="headerlink" title="创建一个新特性:"></a>创建一个新特性:</h5><p>下面操作创建了一个新的feature分支，并切换到该分支</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature start MYFEATURE</span><br></pre></td></tr></table></figure><h5 id="完成新特性的开发"><a href="#完成新特性的开发" class="headerlink" title="完成新特性的开发:"></a>完成新特性的开发:</h5><p>完成开发新特性。这个动作执行下面的操作：</p><ol><li>合并 MYFEATURE 分支到 ‘develop’</li><li>删除这个新特性分支</li><li>切换回 ‘develop’ 分支</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature finish MYFEATURE</span><br></pre></td></tr></table></figure><h5 id="发布新特性"><a href="#发布新特性" class="headerlink" title="发布新特性:"></a>发布新特性:</h5><p>你是否合作开发一项新特性？<br>发布新特性分支到远程服务器，所以，其它用户也可以使用这分支。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature publish MYFEATURE</span><br></pre></td></tr></table></figure><h5 id="取得一个发布的新特性分支"><a href="#取得一个发布的新特性分支" class="headerlink" title="取得一个发布的新特性分支:"></a>取得一个发布的新特性分支:</h5><p>取得其它用户发布的新特性分支。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature pull origin MYFEATURE</span><br></pre></td></tr></table></figure><h5 id="追溯远端上的特性"><a href="#追溯远端上的特性" class="headerlink" title="追溯远端上的特性:"></a>追溯远端上的特性:</h5><p>通过下面命令追溯远端上的特性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow feature track MYFEATURE</span><br></pre></td></tr></table></figure><hr><h3 id="做一个release版本"><a href="#做一个release版本" class="headerlink" title="做一个release版本"></a>做一个release版本</h3><ul><li>支持一个新的用于生产环境的发布版本。</li><li>允许修正小问题，并为发布版本准备元数据。</li></ul><h5 id="开始创建release版本"><a href="#开始创建release版本" class="headerlink" title="开始创建release版本:"></a>开始创建release版本:</h5><ul><li>开始创建release版本，使用 git flow release 命令。 </li><li>‘release’ 分支的创建基于 ‘develop’ 分支。 </li><li>你可以选择提供一个 [BASE]参数，即提交记录的 sha-1 hash 值，来开启动 release 分支。</li><li>这个提交记录的 sha-1 hash 值必须是’develop’ 分支下的。 </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow release start RELEASE [BASE]</span><br></pre></td></tr></table></figure><p>创建 release 分支之后立即发布允许其它用户向这个 release 分支提交内容是个明智的做法。命令十分类似发布新特性：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow release publish RELEASE</span><br></pre></td></tr></table></figure><p>(你可以通过<br><code>git flow release track RELEASE</code> 命令追溯远端的 release 版本)</p><h5 id="完成-release-版本"><a href="#完成-release-版本" class="headerlink" title="完成 release 版本:"></a>完成 release 版本:</h5><p>完成 release 版本是一个大 git 分支操作。它执行下面几个动作：</p><ol><li>归并 release 分支到 ‘master’ 分支。</li><li>用 release 分支名打 Tag</li><li>归并 release 分支到 ‘develop’</li><li>移除 release 分支。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow release finish RELEASE</span><br></pre></td></tr></table></figure><p>不要忘记使用<code>git push --tags</code>将tags推送到远端</p><hr><h3 id="紧急修复"><a href="#紧急修复" class="headerlink" title="紧急修复"></a>紧急修复</h3><p>紧急修复来自这样的需求：生产环境的版本处于一个不预期状态，需要立即修正。有可能是需要修正 master 分支上某个 TAG 标记的生产版本。</p><h5 id="开始-git-flow-紧急修复"><a href="#开始-git-flow-紧急修复" class="headerlink" title="开始 git flow 紧急修复:"></a>开始 git flow 紧急修复:</h5><p>像其它 git flow 命令一样, 紧急修复分支开始自：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git flow hotfix start VERSION [BASENAME]</span><br></pre></td></tr></table></figure><p>VERSION 参数标记着修正版本。你可以从 <code>[BASENAME]开始，</code>[BASENAME]`为finish release时填写的版本号</p><h5 id="完成紧急修复"><a href="#完成紧急修复" class="headerlink" title="完成紧急修复:"></a>完成紧急修复:</h5><p>当完成紧急修复分支，代码归并回 develop 和 master 分支。相应地，master 分支打上修正版本的 TAG。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow hotfix finish VERSION</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式入门</title>
      <link href="2019/07/30/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8/"/>
      <url>2019/07/30/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>正则表达式入门</p><p>一个个的捡起因为懒放一边的</p><a id="more"></a><h3 id="几个元字符（metecharacter）"><a href="#几个元字符（metecharacter）" class="headerlink" title="几个元字符（metecharacter）"></a>几个元字符（metecharacter）</h3><p>| 语法 | 说明 | 示例|示例解释|<br>|——–|——–|<br>|  \b      |单词的开头或结尾        | \breg\b|精确查找reg这个单词|<br>|.    |匹配除换行符以外任意字符    ||    |<br>|*    |前面内容可以连续重复使用任意次|.*    |任意数量的不包含换行的字符|<br>|\d    |匹配一位数字（0或1或2…）    |0\d{2}    |    0开头，连续重复匹配两次数字，如010|<br>|\s    |匹配任意空白符，包括空格，tab，换行等    |    |    |<br>|\w    |匹配字母或数字或下划线或汉字等    |\ba\w{6}\b    |匹配以a开头的7个字符的单词    |<br>|^    |匹配字符串开头    |    |    |<br>|$    |匹配字符串结尾    |^\b{5,12}$    |匹配5到12位数字（QQ号）    |</p><h3 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h3><p>要匹配<code>.</code>，<code>\</code>，<code>*</code>这样本身，需要加转义<code>\</code><br>例如：<code>C:\\Windows</code>匹配<code>C:\Windows</code></p><h3 id="重复"><a href="#重复" class="headerlink" title="重复"></a>重复</h3><table><thead><tr><th>语法</th><th>说明</th></tr></thead><tbody><tr><td>*</td><td>重复零次或更多次</td></tr><tr><td>+</td><td>重复一次或更多次</td></tr><tr><td>？</td><td>重复零次或一次</td></tr><tr><td>{n}</td><td>重复n次</td></tr><tr><td>{n,}</td><td>重复n次或更多次</td></tr><tr><td>{n,m}</td><td>重复n到m次</td></tr></tbody></table><h3 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h3><p>想要匹配没有预定义元字符的字符集，只需要在方括号中列出即可，例如</p><ul><li>匹配任何一个英文元音字母： <code>[aeiou]</code></li><li>匹配标点符号： <code>[.?!]</code>（匹配.或?或！）</li><li>匹配一位数字：<code>[0-9]</code>(与<code>\d</code>含义一致)</li><li>匹配字母或数字：<code>[a-z0-9A-Z]</code>(英文下等同于<code>\w</code>)</li></ul><p>示例：<code>\(0\d&#123;2&#125;\)\s\d&#123;4&#125;\s\d&#123;4&#125;|\(0\d&#123;2,3&#125;\)\s\d&#123;7,8&#125;</code><br>匹配结果：</p><table><thead><tr><th>结果</th></tr></thead><tbody><tr><td>(010) 6554 6016</td></tr><tr><td>(010) 6825451</td></tr><tr><td>(0511) 87283179</td></tr><tr><td>(0512) 7708732</td></tr></tbody></table><p>然后对应IP地址的匹配，这个用正则怎么有点长啊。。。可能是我太菜了。。：<br>原来以为IP格式是：<code>1~255.0~255.0~255.0~255</code>，所以写成了这样<br><code>(\b[1-9]\d&#123;0,1&#125;\b|\b1\d&#123;2&#125;\b|\b2[0-4]\d\b|\b25[0-5]\b)(\.(\b[1-9]?\d\b|\b1\d&#123;2&#125;\b|\b2[0-4]\d\b|\b25[0-5]\b))&#123;3&#125;</code></p><p>然后翻了下格式，有<code>0.0.0.0</code>这个IP（本身）,所以改成了<br><code>((\b[1-9]?\d\b|\b1\d&#123;2&#125;\b|\b2[0-4]\d\b|\b25[0-5]\b)\.)&#123;3&#125;(\b[1-9]?\d\b|\b1\d&#123;2&#125;\b|\b2[0-4]\d\b|\b25[0-5]\b)</code></p><p>然后又看到IP中可以有<code>01.02.03.04</code>这样的存在，前导0的意思（leading zeroes），又改成了这样：<br><code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.)&#123;3&#125;(2[0-4]\d|25[0-5]|[01]?\d\d?)</code> (参考自教程)</p><h3 id="反义"><a href="#反义" class="headerlink" title="反义"></a>反义</h3><p>匹配不属于某个字符类的字符，例如匹配非数字字符</p><table><thead><tr><th>语法</th><th>说明</th></tr></thead><tbody><tr><td>\W</td><td>匹配任意不是字母，数字，下划线，汉字的字符</td></tr><tr><td>\S</td><td>匹配任意不是空白符的字符</td></tr><tr><td>\D</td><td>匹配任意非数字的字符</td></tr><tr><td>\B</td><td>匹配不是单词开头或结束的位置</td></tr><tr><td>[^x]</td><td>匹配除了x以外的任意字符</td></tr><tr><td>[^aeiou]</td><td>匹配除了aeiou以外的任意字符</td></tr></tbody></table><h3 id="贪婪与懒惰"><a href="#贪婪与懒惰" class="headerlink" title="贪婪与懒惰"></a>贪婪与懒惰</h3><p>贪婪匹配：匹配尽可能多的字符<br>懒惰匹配：匹配尽可能少的字符</p><p>例如有个字符串：<code>aabbabaaab</code><br>贪婪匹配：<code>a.*b</code>，匹配结果为：<code>aabbabaaab</code><br>懒惰匹配：<code>a.*?b</code>，匹配结果为：<code>aab</code>、<code>ab</code>、<code>aaab</code></p><p>懒惰限定符：</p><table><thead><tr><th>语法</th><th>说明</th></tr></thead><tbody><tr><td>*?</td><td>重复任意次，单尽可能少重复</td></tr><tr><td>+?</td><td>重复一次或更多次，但尽可能少重复</td></tr><tr><td>??</td><td>重复0次或1次，但尽可能少重复</td></tr><tr><td>{n,m}?</td><td>重复n到m次，但尽可能少重复</td></tr><tr><td>{n,}?</td><td>重复n次以上，但尽可能少重复</td></tr></tbody></table><h3 id="一些其他语法"><a href="#一些其他语法" class="headerlink" title="一些其他语法"></a>一些其他语法</h3><table><thead><tr><th>语法</th><th>说明</th></tr></thead><tbody><tr><td>\a</td><td>报警字符（打印它的效果是电脑嘀的一声）</td></tr><tr><td>\b</td><td>通常是单词分界位置，但如果在字符类里使用代表退格</td></tr><tr><td>\t</td><td>制表符，Tab</td></tr><tr><td>\r</td><td>回车</td></tr><tr><td>\v</td><td>竖向制表符</td></tr><tr><td>\f</td><td>换页符</td></tr><tr><td>\n</td><td>换行符</td></tr><tr><td>\e</td><td>Escape</td></tr><tr><td>\0nn</td><td>ASCII码中八进制代码为00的字符</td></tr><tr><td>\xnn</td><td>ASCII码中十六进制代码为nn的字符</td></tr><tr><td>\unnnn</td><td>Unicode码中十六进制代码为nnnn的字符</td></tr><tr><td>\A</td><td>字符类开头（类似^，但不受处理多行选项的影响）</td></tr><tr><td>\z</td><td>字符类结尾（类似$，但不受处理多行选项的影响）</td></tr><tr><td>\Z</td><td>字符串结尾或行尾，不受处理多行选项的影响</td></tr><tr><td>\G</td><td>当前搜索的开头</td></tr></tbody></table><p>以上只能说是记录的正则的一部分，教程说是30分钟，看了我三个小时都不止。。</p><blockquote><p><a href="http://deerchao.net/tutorials/regex/regex.htm">完整教程地址</a></p></blockquote><p>再次感谢deerchao的正则教程！</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> regex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macaca试用</title>
      <link href="2019/07/25/Macaca%E8%AF%95%E7%94%A8/"/>
      <url>2019/07/25/Macaca%E8%AF%95%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Macaca试用</p><p>app inspector及UI Recorder</p><a id="more"></a><h3 id="Macaca-App-Inspector"><a href="#Macaca-App-Inspector" class="headerlink" title="Macaca App Inspector"></a>Macaca App Inspector</h3><p>首先是元素定位工具，类似<code>uiautomatorviewer.bat</code></p><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i app-inspector -g</span><br></pre></td></tr></table></figure><p>备注：<br>起Macaca server：<code>macaca server -p 3456 --verbose </code>（指定端口，打印详细日志）</p><p>使用：<br>首先获取设备id:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">DVD5T18622001756        device</span><br></pre></td></tr></table></figure><p>然后起:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">F:\downloads\chrome\移动devops &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; app-inspector -u DVD5T18622001756</span><br><span class="line">&gt;&gt; UIAutomatorWD http server ready</span><br><span class="line">&gt;&gt; Android device started: DVD5T18622001756</span><br><span class="line">&gt;&gt; inspector start at: http:&#x2F;&#x2F;192.168.78.1:5678</span><br><span class="line">  &lt;-- GET &#x2F;</span><br></pre></td></tr></table></figure><p>然后浏览器就打开个页面，是手机当前界面，开始玩吧。。</p><h3 id="Macaca-UIRecorder"><a href="#Macaca-UIRecorder" class="headerlink" title="Macaca UIRecorder"></a>Macaca UIRecorder</h3><p>录制工具</p><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install uirecorder -g</span><br></pre></td></tr></table></figure><p>1.创建新目录并进入，初始化UIRecorder工程目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">E:\Macaca_workstation\uisample &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; uirecorder init</span><br><span class="line">    __  ______   ____                           __</span><br><span class="line">   &#x2F; &#x2F; &#x2F; &#x2F;  _&#x2F;  &#x2F; __ \___  _________  _________&#x2F; &#x2F;__  _____</span><br><span class="line">  &#x2F; &#x2F; &#x2F; &#x2F;&#x2F; &#x2F;   &#x2F; &#x2F;_&#x2F; &#x2F; _ \&#x2F; ___&#x2F; __ \&#x2F; ___&#x2F; __  &#x2F; _ \&#x2F; ___&#x2F;</span><br><span class="line"> &#x2F; &#x2F;_&#x2F; &#x2F;&#x2F; &#x2F;   &#x2F; _, _&#x2F;  __&#x2F; &#x2F;__&#x2F; &#x2F;_&#x2F; &#x2F; &#x2F;  &#x2F; &#x2F;_&#x2F; &#x2F;  __&#x2F; &#x2F;</span><br><span class="line"> \____&#x2F;___&#x2F;  &#x2F;_&#x2F; |_|\___&#x2F;\___&#x2F;\____&#x2F;_&#x2F;   \__,_&#x2F;\___&#x2F;_&#x2F;    v3.1.0</span><br><span class="line">Official Site: http:&#x2F;&#x2F;uirecorder.com</span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">? Path扩展属性配置,除id,name,class之外 data-id,data-name,type,data-type,role,data-role,data-value</span><br><span class="line">? 属性值黑名单正则</span><br><span class="line">? class值黑名单正则</span><br><span class="line">? 断言前隐藏</span><br><span class="line">? WebDriver域名或IP 127.0.0.1</span><br><span class="line">? WebDriver端口号 4444</span><br><span class="line">? 需要同时测试的浏览器列表 chrome, ie 11</span><br><span class="line"></span><br><span class="line">config.json 文件保存成功</span><br><span class="line">package.json 文件创建成功</span><br><span class="line">README.md 文件创建成功</span><br><span class="line">screenshots 文件夹创建成功</span><br><span class="line">commons 文件夹创建成功</span><br><span class="line">uploadfiles 文件夹创建成功</span><br><span class="line">.editorconfig 文件创建成功</span><br><span class="line">.gitignore 文件创建成功</span><br><span class="line">install.sh 文件创建成功</span><br><span class="line">run.bat 文件创建成功</span><br><span class="line">run.sh 文件创建成功</span><br><span class="line">hosts 文件创建成功</span><br><span class="line">.vscode&#x2F;launch.json 文件创建成功</span><br><span class="line"></span><br><span class="line">Start install project dependencies...</span><br></pre></td></tr></table></figure><p>各字段解释，copy自官方教程</p><blockquote><p><a href="https://github.com/alibaba/uirecorder/blob/master/doc/zh-cn/pc-standard.md">官方教程</a></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">创建新目录并进入，然后初始化UIRecorder工程目录：uirecorder init， 根据具体情况输入相关的参数，几个回车后，我们的准备工作就结束了，这里详细介绍下几个参数分别是什么作用</span><br><span class="line"></span><br><span class="line">Path扩展属性配置,除id,name,class之外: 此参数，用来定义网页DOM中哪些属性可以用来定位我们的控件，默认值已经包括了主流的属性，一般情况下不需要修改</span><br><span class="line"></span><br><span class="line">属性值黑名单正则：网页中当某些属性值是随机或者不稳定的时候，我们可以通过这个配置来忽略那些属性值，从而保证我们的自动化脚本稳定性，例如我们可以这样配置：&#x2F;attr_name_\d+&#x2F;，如果需要配置多个属性，可以这么写：&#x2F;attr1_\d+|attr2_\d+|&#x2F;，详细更多的正则教程请自行搜索</span><br><span class="line"></span><br><span class="line">class值黑名单正则：某些场景下，class属性的值会干扰自动化录制，比如当鼠标移到某个控件上时会动态的添加一个class样式名称，就可能会被录制到PATH中，从而导致自动化无法稳定重放。此时就可以将那个class名称加到黑名单中，例如:&#x2F;class_name&#x2F;，详细值的配置请参考属性值黑名单</span><br><span class="line"></span><br><span class="line">断言前隐藏：某些业务场景下，会在最上层显示一层透明的div，用来实现一些高级的富应用需求，会导致无法直接断言透明div下方的控件。此种场景下，可以将透明div的PATH配置在此属性中，即可实现在断言时自动移除透明的div，断言后再自动恢复</span><br><span class="line"></span><br><span class="line">WebDriver域名或IP：WebDriver执行机的IP地址，默认是指向本地，如果有部署grid执行机集群，可以指向对应的执行机集群IP</span><br><span class="line"></span><br><span class="line">WebDriver端口号：WebDriver端口号，一般情况下是4444端口号，不需要修改</span><br><span class="line"></span><br><span class="line">需要同时测试的浏览器列表： 需要同时测试的浏览器列表，例如：chrome, firefox, ie 11，可以根据本地或远程执行机集群所支持的浏览器类型自行输入</span><br></pre></td></tr></table></figure><h4 id="Start-install-project-dependencies"><a href="#Start-install-project-dependencies" class="headerlink" title="Start install project dependencies"></a>Start install project dependencies</h4><p>然后就看到卡在这边不动了。。。上github翻半天找到了原因，当前环境装的node版本过高，uirecorder使用的node版本是<code>7.10.0</code>，解决办法就是装个<code>nvm</code>，切node版本</p><blockquote><p><a href="https://github.com/coreybutler/nvm-windows/releases">nvm下载</a></p></blockquote><p>安装之前，卸载原来的node<br>安装完成，验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">E:\ &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; NVM</span><br><span class="line"></span><br><span class="line">Running version 1.1.7.</span><br></pre></td></tr></table></figure><p>然后使用nvm来安装node</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install 7.10.0</span><br></pre></td></tr></table></figure><p>多版本控制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nvm install 4.4.0</span><br><span class="line"></span><br><span class="line">nvm ls</span><br><span class="line"></span><br><span class="line">nvm use 7.10.0</span><br></pre></td></tr></table></figure><p>当然，因为卸载了原来装的node，所以这么干的话，要重新配置node环境变量，N多东西要重弄，垃圾，反正我不用录制功能，不折腾了！<br>（直接只装7.10.0的话，用macaca doctor会提示版本低，坑真多）</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Macaca </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10搭建Macaca环境及简单试用</title>
      <link href="2019/07/25/win10%E6%90%AD%E5%BB%BAMacaca%E7%8E%AF%E5%A2%83%E5%8F%8A%E7%AE%80%E5%8D%95%E8%AF%95%E7%94%A8/"/>
      <url>2019/07/25/win10%E6%90%AD%E5%BB%BAMacaca%E7%8E%AF%E5%A2%83%E5%8F%8A%E7%AE%80%E5%8D%95%E8%AF%95%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>win10搭建Macaca环境及简单试用</p><a id="more"></a><p>各组件版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">OS: win 10</span><br><span class="line">java: 1.8.0_91</span><br><span class="line">node：10.16.0</span><br><span class="line">npm：6.9.0</span><br><span class="line">Gradle：5.5.1</span><br><span class="line">SDK Tools：25.2.5</span><br><span class="line">SDK Platform-tools：29.0.1</span><br><span class="line">SDK Build-tools：25.0.2</span><br></pre></td></tr></table></figure><p>jdk和android环境配置就不说了，jdk用1.8的<br>android： </p><blockquote><p><a href="http://tools.android-studio.org/index.php/sdk">下载地址</a></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ANDROID_HOME: D:\Android\android-sdk-windows</span><br><span class="line">Path: ;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools;%ANDROID_HOME%\build-tools;</span><br></pre></td></tr></table></figure><h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><p>安装稳定版</p><blockquote><p><a href="https://nodejs.org/en/">下载地址</a></p></blockquote><p>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; node -v</span><br><span class="line">v10.16.0</span><br><span class="line"></span><br><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; npm -v</span><br><span class="line">6.9.0</span><br></pre></td></tr></table></figure><p>设置cache路径，node安装路径下，新建<code>node-global</code>和<code> node-cache</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; npm config set prefix &quot;D:\dev\js\node-global&quot;</span><br><span class="line"></span><br><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; npm config set cache &quot;D:\dev\js\node-cache&quot;</span><br></pre></td></tr></table></figure><p>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; npm config get prefix</span><br><span class="line">D:\dev\js\node-global</span><br><span class="line"></span><br><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; npm config get cache</span><br><span class="line">D:\dev\js\node-cache</span><br></pre></td></tr></table></figure><p>虽然安装时候设置了node环境变量，还是建议将<code>D:\dev\js\node-global</code>配置到path里面，防止后面用<code>cnpm</code>时候报错</p><p>设置淘宝源：<code>npm config set registry http://registry.npm.taobao.org</code></p><p>升级npm：<code>npm install npm@latest -g</code>（可指定具体版本号）</p><h3 id="gradle"><a href="#gradle" class="headerlink" title="gradle"></a>gradle</h3><blockquote><p><a href="https://gradle.org/releases/">下载地址</a></p></blockquote><p>配置环境变量：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRADLE_HOME: D:\QA\gradle-5.5.1</span><br><span class="line">CLASSPATH: %GRADLE_HOME%\lib</span><br><span class="line">Path: %GRADLE_HOME%\bin;</span><br></pre></td></tr></table></figure><p>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; gradle -v</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Gradle 5.5.1</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Build time:   2019-07-10 20:38:12 UTC</span><br><span class="line">Revision:     3245f748c7061472da4dc184991919810f7935a5</span><br><span class="line"></span><br><span class="line">Kotlin:       1.3.31</span><br><span class="line">Groovy:       2.5.4</span><br><span class="line">Ant:          Apache Ant(TM) version 1.9.14 compiled on March 12 2019</span><br><span class="line">JVM:          1.8.0_91 (Oracle Corporation 25.91-b14)</span><br><span class="line">OS:           Windows 10 10.0 amd64</span><br></pre></td></tr></table></figure><h3 id="安装Macaca"><a href="#安装Macaca" class="headerlink" title="安装Macaca"></a>安装Macaca</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g macaca-cli</span><br></pre></td></tr></table></figure><p>检查：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; macaca doctor</span><br><span class="line"></span><br><span class="line">  macaca-doctor version: 2.0.18</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Node.js checklist:</span><br><span class="line"></span><br><span class="line">  node env: D:\dev\js\node.exe</span><br><span class="line">  node version: v10.16.0</span><br><span class="line"></span><br><span class="line">  Android checklist:</span><br><span class="line"></span><br><span class="line">  JAVA version is &#96;1.8&#96;</span><br><span class="line">  JAVA_HOME is set to &#96;D:\dev\java\jdk1.8.0_91&#96;</span><br><span class="line">  ANDROID_HOME is set to &#96;D:\dev\android\android-sdk-windows&#96;</span><br><span class="line">  Platforms is set to &#96;D:\dev\android\android-sdk-windows\platforms\android-28&#96;</span><br><span class="line">  ADB tool is set to &#96;D:\dev\android\android-sdk-windows\platform-tools\adb.exe&#96;</span><br><span class="line">  GRADLE_HOME is set to &#96;D:\QA\gradle-5.5.1&#96;</span><br><span class="line"></span><br><span class="line">  Installed driver list:</span><br></pre></td></tr></table></figure><p>环境配置完成。。。</p><h4 id="Not-accepted-Android-SDK-license-agreements"><a href="#Not-accepted-Android-SDK-license-agreements" class="headerlink" title="Not accepted Android SDK license agreements"></a>Not accepted Android SDK license agreements</h4><p>macaca doctor出现  “Not accepted Android SDK license agreements”（win 10）</p><p>terminal进入SDK/tools/bin目录（我的路径：D:\dev\android\android-sdk-windows\tools\bin），有个<code>sdkmanager.bat</code>,执行<code>sdkmanager.bat --update</code>，系统会让你确认，按<code>y</code>就行，然后在<code>D:\dev\android\android-sdk-windows\licenses</code>下就会生成licenses，继续执行<code>macaca doctor</code>就不会出现那个红字</p><h4 id="安装驱动："><a href="#安装驱动：" class="headerlink" title="安装驱动："></a>安装驱动：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i macaca-android -g</span><br></pre></td></tr></table></figure><p>嗯，报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; version: 2.33</span><br><span class="line">&gt;&gt; chromedriver cdn url: https:&#x2F;&#x2F;chromedriver.storage.googleapis.com&#x2F;2.33&#x2F;chromedriver_win32.zip</span><br><span class="line">internal&#x2F;streams&#x2F;legacy.js:57</span><br><span class="line">      throw er; &#x2F;&#x2F; Unhandled stream error in pipe.</span><br><span class="line">      ^</span><br><span class="line"></span><br><span class="line">Error: read ECONNRESET</span><br><span class="line">    at TLSWrap.onStreamRead (internal&#x2F;stream_base_commons.js:111:27)</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! macaca-chromedriver@1.0.45 install: &#96;node .&#x2F;bin&#x2F;macaca-chromedriver install&#96;</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the macaca-chromedriver@1.0.45 install script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     D:\dev\js\node-cache\_logs\2019-07-25T00_47_29_733Z-debug.log</span><br></pre></td></tr></table></figure><p>网上找了方法，换成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i macaca-android -g</span><br></pre></td></tr></table></figure><p>然后，**’cnpm’ 不是内部或外部命令，也不是可运行的程序**。。。再装cnpm：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>装完验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">E:\Macaca_workstation\run1 &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; cnpm -v</span><br><span class="line">cnpm@6.1.0 (D:\dev\js\node-global\node_modules\cnpm\lib\parse_argv.js)</span><br><span class="line">npm@6.10.2 (D:\dev\js\node-global\node_modules\cnpm\node_modules\npm\lib\npm.js)</span><br><span class="line">node@10.16.0 (D:\dev\js\node.exe)</span><br><span class="line">npminstall@3.22.1 (D:\dev\js\node-global\node_modules\cnpm\node_modules\npminstall\lib\index.js)</span><br><span class="line">prefix&#x3D;D:\dev\js\node-global</span><br><span class="line">win32 x64 10.0.17134</span><br><span class="line">registry&#x3D;https:&#x2F;&#x2F;r.npm.taobao.org</span><br></pre></td></tr></table></figure><p>可以顺便macaca都这么装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i -g macaca-cli</span><br></pre></td></tr></table></figure><p>再装驱动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cnpm i macaca-android -g</span><br><span class="line"></span><br><span class="line">cnpm i macaca-electron -g</span><br><span class="line"></span><br><span class="line">cnpm i app-inspector -g</span><br></pre></td></tr></table></figure><h3 id="Macaca-sample-python"><a href="#Macaca-sample-python" class="headerlink" title="Macaca sample-python"></a>Macaca sample-python</h3><p>由于只认识python，老老实实的试python的sample吧，先去官方示例库下例子：</p><blockquote><p><a href="https://github.com/macaca-sample">macaca-sample</a></p></blockquote><p>下载下来之后，windows terminal进到目录里面，pip安装依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 路径</span><br><span class="line">E:\Macaca_workstation\sample-python &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; pwd</span><br><span class="line">E:\Macaca_workstation\sample-python</span><br><span class="line"></span><br><span class="line"># 安装依赖</span><br><span class="line">E:\Macaca_workstation\sample-python &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>测试脚本稍微改了下，基本还是示例脚本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;7&#x2F;25 11:13</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">#coding:utf-8</span><br><span class="line"></span><br><span class="line">import unittest</span><br><span class="line">import time</span><br><span class="line">from macaca import WebDriver</span><br><span class="line">from retrying import retry</span><br><span class="line"></span><br><span class="line">desired_caps &#x3D; &#123;</span><br><span class="line">    &#39;platformName&#39;: &#39;android&#39;,</span><br><span class="line">    &#39;app&#39;: &#39;F:&#x2F;downloads&#x2F;chrome&#x2F;Macaca&#x2F;android_app_bootstrap-debug.apk&#39;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">server_url &#x3D; &#123;</span><br><span class="line">    &#39;hostname&#39;: &#39;localhost&#39;,</span><br><span class="line">    &#39;port&#39;: 3456</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">def switch_to_webview(driver):</span><br><span class="line">    contexts &#x3D; driver.contexts</span><br><span class="line">    driver.context &#x3D; contexts[-1]</span><br><span class="line">    return driver</span><br><span class="line"></span><br><span class="line">def switch_to_native(driver):</span><br><span class="line">    contexts &#x3D; driver.contexts</span><br><span class="line">    driver.context &#x3D; contexts[0]</span><br><span class="line">    return driver</span><br><span class="line"></span><br><span class="line">class MacacaTest(unittest.TestCase):</span><br><span class="line">    @classmethod</span><br><span class="line">    def setUpClass(cls):</span><br><span class="line">        cls.driver &#x3D; WebDriver(desired_caps, server_url)</span><br><span class="line">        cls.initDriver()</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def tearDownClass(cls):</span><br><span class="line">        cls.driver.quit()</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    @retry</span><br><span class="line">    def initDriver(cls):</span><br><span class="line">        print(&quot;Retry connecting server...&quot;)</span><br><span class="line">        cls.driver.init()</span><br><span class="line"></span><br><span class="line">    def test_01_login(self):</span><br><span class="line">        el &#x3D; self.driver \</span><br><span class="line">            .elements_by_class_name(&#39;android.widget.EditText&#39;)[0] \</span><br><span class="line">            .send_keys(&#39;中文+Test+12345678&#39;)   \</span><br><span class="line"></span><br><span class="line">        el &#x3D; self.driver \</span><br><span class="line">            .elements_by_class_name(&#39;android.widget.EditText&#39;)[1] \</span><br><span class="line">            .send_keys(&#39;111111&#39;)</span><br><span class="line"></span><br><span class="line">        time.sleep(1)</span><br><span class="line">        # self.driver.keys(Keys.ENTER.value + Keys.ESCAPE.value)</span><br><span class="line"></span><br><span class="line">        self.driver \</span><br><span class="line">            .element_by_name(&#39;Login&#39;) \</span><br><span class="line">            .click()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    unittest.main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>顺便为了省事，直接把示例app先下载下来了：</p><blockquote><p><a href="https://npmcdn.com/android-app-bootstrap@latest/android_app_bootstrap/build/outputs/apk/android_app_bootstrap-debug.apk">android_app_bootstrap-debug.apk</a></p></blockquote><ol><li>启server：<code> macaca server -p 3456 --verbose</code>  （指定端口，打印详细日志）</li><li>执行测试脚本</li></ol><p>查看结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Testing started at 11:20 ...</span><br><span class="line">D:\dev\python\python.exe &quot;D:\dev\pycharm\PyCharm Community Edition 2018.3.4\helpers\pycharm\_jb_pytest_runner.py&quot; --path E:&#x2F;Macaca_workstation&#x2F;sample-python&#x2F;test_run1.py</span><br><span class="line">Launching pytest with arguments E:&#x2F;Macaca_workstation&#x2F;sample-python&#x2F;test_run1.py in E:\Macaca_workstation\sample-python</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; test session starts &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">platform win32 -- Python 3.6.6, pytest-4.6.3, py-1.8.0, pluggy-0.12.0</span><br><span class="line">rootdir: E:\Macaca_workstation\sample-python</span><br><span class="line">plugins: allure-pytest-2.6.5, forked-1.0.2, html-1.21.0, metadata-1.8.0, rerunfailures-7.0, xdist-1.29.0collected 1 item</span><br><span class="line"></span><br><span class="line">test_run1.py                                                            [100%]</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 1 passed in 24.38 seconds &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Retry connecting server...</span><br><span class="line">.</span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p>试验结束。实话实说，国内的开源生态是真的一言难尽。。。这个环境加跑通结果，折腾了大半天，太多坑了，官方的教程真的无力吐槽。记录下搭建过程，有兴趣试这个的，少踩点坑。。。</p><p>浏览器也试了下，最简版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;7&#x2F;25 10:42</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line">from macaca import WebDriver,WebElement</span><br><span class="line"></span><br><span class="line"># 因为挂着梯子，顺便设置个代理</span><br><span class="line">os.environ[&#39;https_proxy&#39;] &#x3D; &#39;https:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class="line">os.environ[&#39;http_proxy&#39;] &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class="line">desired_caps &#x3D; &#123;</span><br><span class="line">    &#39;autoAcceptAlerts&#39; : True,</span><br><span class="line">    &#39;browserName&#39; : &#39;electron&#39;,</span><br><span class="line">    &#39;platformName&#39; : &#39;desktop&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">driver &#x3D; WebDriver(desired_caps)</span><br><span class="line"></span><br><span class="line">driver.init()</span><br><span class="line">driver.set_window_size(1280, 800)</span><br><span class="line">driver.get(&#39;https:&#x2F;&#x2F;www.baidu.com&#39;)</span><br><span class="line"></span><br><span class="line">driver.element_by_id(&quot;kw&quot;).send_keys(&#39;macaca&#39;)</span><br><span class="line">driver.element_by_id(&quot;su&quot;).click()</span><br><span class="line">time.sleep(5)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Macaca </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python操作excel一些实现</title>
      <link href="2019/07/18/python%E6%93%8D%E4%BD%9Cexcel%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%8E%B0/"/>
      <url>2019/07/18/python%E6%93%8D%E4%BD%9Cexcel%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>python操作excel一些实现</p><a id="more"></a><p>抽了点时间，把python使用openpyxl操作excel的一些实现封装了下，后面有需求直接用吧</p><p><strong>numpytest.openexcel.py</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;7&#x2F;18 13:17</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import openpyxl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def load_excel(filename):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    加载excel</span><br><span class="line">    :param filename:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 加载execl文件</span><br><span class="line">    wb &#x3D; openpyxl.load_workbook(filename)</span><br><span class="line">    return wb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_excel(filename, sheetname):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    获取excel行、列数</span><br><span class="line">    :param filename: 待读取文件名</span><br><span class="line">    :param sheetname: 列名</span><br><span class="line">    :return: 行、列数</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    wb &#x3D; load_excel(filename)</span><br><span class="line">    # 指定读取sheet页</span><br><span class="line">    sheet &#x3D; wb[sheetname]</span><br><span class="line">    # 获取最大行数</span><br><span class="line">    nrows &#x3D; sheet.max_row</span><br><span class="line">    ncols &#x3D; sheet.max_column</span><br><span class="line">    return nrows, ncols</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def read_excels(filename, sheetname):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    读取excel所有数据</span><br><span class="line">    :param filename: 待读取文件</span><br><span class="line">    :param sheetname: 带读取sheet页</span><br><span class="line">    :return: 数据</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 获取指定sheet页</span><br><span class="line">    wb &#x3D; load_excel(filename)</span><br><span class="line">    sheet &#x3D; wb[sheetname]</span><br><span class="line">    # 获取最大行、列数</span><br><span class="line">    nrow &#x3D; get_excel(filename, sheetname)[0]</span><br><span class="line">    ncol &#x3D; get_excel(filename, sheetname)[1]</span><br><span class="line">    # 读取数据</span><br><span class="line">    testdata &#x3D; []</span><br><span class="line">    for i in list(range(1, nrow+1)):</span><br><span class="line">        tmplist &#x3D; []</span><br><span class="line">        for j in list(range(1, ncol+1)):</span><br><span class="line">            tmplist.append(sheet.cell(row&#x3D;i, column&#x3D;j).value)</span><br><span class="line">        testdata.append(tmplist)</span><br><span class="line">    return testdata</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def read_excel(filename, sheetname, col):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    读取excel指定列，返回数据列表</span><br><span class="line">    :param filename: 带读取excel文件</span><br><span class="line">    :return: 列数据</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 获取指定sheet页</span><br><span class="line">    wb &#x3D; load_excel(filename)</span><br><span class="line">    sheet &#x3D; wb[sheetname]</span><br><span class="line">    # 获取最大行数</span><br><span class="line">    nrows &#x3D; get_excel(filename, sheetname)[0]</span><br><span class="line">    # 获取数据</span><br><span class="line">    testdata &#x3D; []</span><br><span class="line">    for i in list(range(2, nrows+1)):</span><br><span class="line">        testdata.append(sheet.cell(row&#x3D;i, column&#x3D;col).value)</span><br><span class="line">    return testdata</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def write_excel(filename, sheetname, colname, col, testdata):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    已知数据集，写数据到指定列</span><br><span class="line">    :param filename: 待写数据文件</span><br><span class="line">    :param sheetname: 待写数据页签</span><br><span class="line">    :param colname: 待写数据列名</span><br><span class="line">    :param col: 待写数据列</span><br><span class="line">    :param testdata: 待写数据集（列表格式）</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 激活写页签</span><br><span class="line">    wb &#x3D; load_excel(filename)</span><br><span class="line">    sheet &#x3D; wb[sheetname]</span><br><span class="line"></span><br><span class="line">    # 写入列标题</span><br><span class="line">    sheet.cell(row&#x3D;1, column&#x3D;col, value&#x3D;str(colname))</span><br><span class="line">    # 写入数据</span><br><span class="line">    # 写数据</span><br><span class="line">    for i in range(2, len(testdata) + 1):</span><br><span class="line">        sheet.cell(row&#x3D;i, column&#x3D;col, value&#x3D;str(testdata[i-2]))</span><br><span class="line">    # 写入缺失的最后一行数据</span><br><span class="line">    max_row &#x3D; len(testdata) + 1</span><br><span class="line">    sheet.cell(row&#x3D;max_row, column&#x3D;col, value&#x3D;str(testdata[-1]))</span><br><span class="line">    # 保存文件</span><br><span class="line">    wb.save(filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def write_col(filename, wfilename, sheetname, wsheetname, colname, col, colnumber):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    先读取，再写数据到指定列</span><br><span class="line">    :param filename: 数据读取文件</span><br><span class="line">    :param wfilename: 待写数据文件</span><br><span class="line">    :param sheetname:  读取数据页签</span><br><span class="line">    :param wsheetname:  待写数据页签</span><br><span class="line">    :param colname: 写数据列名</span><br><span class="line">    :param col: 读数据列序号</span><br><span class="line">    :param colnumber:  写数据列序号</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 激活写页签</span><br><span class="line">    wb &#x3D; load_excel(wfilename)</span><br><span class="line">    sheet &#x3D; wb[wsheetname]</span><br><span class="line"></span><br><span class="line">    # 写入列标题</span><br><span class="line">    sheet.cell(row&#x3D;1, column&#x3D;colnumber, value&#x3D;str(colname))</span><br><span class="line">    # 写入数据</span><br><span class="line">    # 读取待写数据</span><br><span class="line">    testdata &#x3D; read_excel(filename, sheetname, col)</span><br><span class="line">    # 写数据</span><br><span class="line">    for i in range(2, len(testdata)+1):</span><br><span class="line">        sheet.cell(row&#x3D;i, column&#x3D;colnumber, value&#x3D;str(testdata[i-2]))</span><br><span class="line">    # 写入缺失的最后一行数据</span><br><span class="line">    max_row &#x3D; len(testdata) + 1</span><br><span class="line">    sheet.cell(row&#x3D;max_row, column&#x3D;colnumber, value&#x3D;str(testdata[-1]))</span><br><span class="line">    # 保存文件</span><br><span class="line">    wb.save(filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def write_data(filename, wfilename, sheetname, wsheetname, nrow, ncol):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    写所有数据</span><br><span class="line">    :param filename: 读取文件</span><br><span class="line">    :param wfilename: 待写入文件</span><br><span class="line">    :param sheetname: 读数据页签</span><br><span class="line">    :param wsheetname: 待写数据页签</span><br><span class="line">    :param nrow: 写数据行数</span><br><span class="line">    :param ncol: 写数据列数</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 激活写页签</span><br><span class="line">    wb &#x3D; load_excel(wfilename)</span><br><span class="line">    sheet &#x3D; wb[wsheetname]</span><br><span class="line"></span><br><span class="line">    # 待写数据</span><br><span class="line">    testdata &#x3D; read_excels(filename, sheetname)</span><br><span class="line"></span><br><span class="line">    # 写数据</span><br><span class="line">    for i in range(0, nrow):</span><br><span class="line">        for j in range(0, ncol):</span><br><span class="line">            sheet.cell(row&#x3D;i+1, column&#x3D;j+1, value&#x3D;str(testdata[i][j]))</span><br><span class="line">    wb.save(filename)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后写了个DES加密的client，以后加密直接从excel一列读数据，再写到下一列即可：<br><strong>desclient</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;7&#x2F;18 15:22</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import binascii</span><br><span class="line">from numpytest import openexcel</span><br><span class="line">from pyDes import des, ECB, PAD_PKCS5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 获取待加密数据列</span><br><span class="line">filename &#x3D; &#39;E:&#x2F;DESFile&#x2F;loginname.xlsx&#39;</span><br><span class="line">sheet &#x3D; &#39;Sheet1&#39;</span><br><span class="line">colnumber &#x3D; 1</span><br><span class="line">loginname &#x3D; openexcel.read_excel(filename, sheet, colnumber)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># DES加密方法</span><br><span class="line">def des_en(msg):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    DES 加密，分组方式 ECB，填充方式 PAD_PKCS5</span><br><span class="line">    :param msg: msg待加密字符串</span><br><span class="line">    :return: 返回加密后字符串,16进制，utf-8格式化，输出结果去除b和\n</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    secret_key &#x3D; &#39;SKUHWKLL&#39;</span><br><span class="line">    iv &#x3D;secret_key</span><br><span class="line">    key &#x3D; des(secret_key, ECB, iv, pad&#x3D;None, padmode&#x3D;PAD_PKCS5)</span><br><span class="line">    entrymsg &#x3D; key.encrypt(msg, padmode&#x3D;PAD_PKCS5)</span><br><span class="line">    desstr &#x3D; binascii.b2a_base64(entrymsg)</span><br><span class="line">    # return str(desstr, &#39;utf8&#39;)</span><br><span class="line">    # 去除写入excel可能出现的空行</span><br><span class="line">    desmsg &#x3D; str(desstr, &#39;utf8&#39;)</span><br><span class="line">    return desmsg.strip()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 加密处理</span><br><span class="line">username &#x3D; []</span><br><span class="line">for i in loginname:</span><br><span class="line">    username.append(des_en(i))</span><br><span class="line"></span><br><span class="line"># 写入excel指定列</span><br><span class="line">filename &#x3D; &#39;E:&#x2F;DESFile&#x2F;loginname.xlsx&#39;</span><br><span class="line">sheet &#x3D; &#39;Sheet1&#39;</span><br><span class="line">col &#x3D; 2</span><br><span class="line">colname &#x3D; &#39;Username&#39;</span><br><span class="line">openexcel.write_excel(filename, sheet, colname, col, username)</span><br></pre></td></tr></table></figure><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DES </tag>
            
            <tag> openpyxl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Grafana集成进自己web项目</title>
      <link href="2019/07/16/Grafana%E9%9B%86%E6%88%90%E8%BF%9B%E8%87%AA%E5%B7%B1web%E9%A1%B9%E7%9B%AE/"/>
      <url>2019/07/16/Grafana%E9%9B%86%E6%88%90%E8%BF%9B%E8%87%AA%E5%B7%B1web%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p>Grafana集成进自己的监控项目</p><a id="more"></a><p>可能有需求是将grafana的dashboard集成到自己的监控系统里面，这样就避免了进grafana再查看</p><p>方案有是有，可能有点不安全，建议实在要这么干的话：</p><ol><li><p>尽量是公司内部玩，也就是纯内网操作；</p></li><li><p>找IT设置网络访问权限，只有公司IP可以访问监控系统和grafana的域名/IP；</p></li></ol><p>以下是方法：<br>嵌grafana监控dashboard，只需要在web监控iframe中嵌进去：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src&#x3D;&quot;http:&#x2F;&#x2F;192.168.0.1:3000&#x2F;d&#x2F;oidoT24Wk&#x2F;apache-jmeter?refresh&#x3D;5s&amp;orgId&#x3D;1&quot; width&#x3D;&quot;450&quot; height&#x3D;&quot;200&quot; frameborder&#x3D;&quot;0&quot;&gt;&lt;&#x2F;iframe&gt;</span><br></pre></td></tr></table></figure><p>src后面放dashboard的页面即可</p><p>但是这样有个问题，直接打开，会跳转到登录页面，也就是想这么做的话，需要开启<code>匿名登录</code></p><p>修改grafana配置文件: <code>vim /etc/grafana/grafana.ini</code><br>修改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[auth.anonymous]</span><br><span class="line"># enable anonymous access</span><br><span class="line"># 去掉注释，改为true，允许匿名访问</span><br><span class="line">enabled &#x3D; true</span><br><span class="line"></span><br><span class="line"># specify organization name that should be used for unauthenticated users</span><br><span class="line"># 匿名用户属于的组织</span><br><span class="line">org_name &#x3D; Main Org.</span><br><span class="line"></span><br><span class="line"># specify role for unauthenticated users</span><br><span class="line"># 匿名用户的角色&#x2F;权限</span><br><span class="line">org_role &#x3D; Viewer</span><br></pre></td></tr></table></figure><p>修改完之后，重启grafana即可:<code>systemctl restart grafana-server</code></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grafana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DES加解密（python3实现）</title>
      <link href="2019/07/11/DES%E5%8A%A0%E8%A7%A3%E5%AF%86%EF%BC%88python3%E5%AE%9E%E7%8E%B0%EF%BC%89/"/>
      <url>2019/07/11/DES%E5%8A%A0%E8%A7%A3%E5%AF%86%EF%BC%88python3%E5%AE%9E%E7%8E%B0%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>DES加解密（python3实现）</p><a id="more"></a><p>安装工具包：<code>pip install pyDes</code></p><p>加解密实现：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;7&#x2F;9 17:15</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import binascii</span><br><span class="line">from pyDes import des, PAD_PKCS5, ECB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def des_en(msg):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    DES 加密，分组方式 ECB，填充方式 PAD_PKCS5</span><br><span class="line">    :param msg: msg待加密字符串</span><br><span class="line">    :return: 返回加密后字符串,16进制</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    secret_key &#x3D; &#39;IuFWKUut&#39;</span><br><span class="line">    iv &#x3D;secret_key</span><br><span class="line">    key &#x3D; des(secret_key, ECB, iv, pad&#x3D;None, padmode&#x3D;PAD_PKCS5)</span><br><span class="line">    entrymsg &#x3D; key.encrypt(msg, padmode&#x3D;PAD_PKCS5)</span><br><span class="line">    return binascii.b2a_hex(entrymsg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def des_des(msg):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    DES 解密，分组方式 ECB，填充方式 PAD_PKCS5</span><br><span class="line">    :param msg: 16进制加密码</span><br><span class="line">    :return: 解密字符串</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    secret_key &#x3D; &#39;IuFWKUut&#39;</span><br><span class="line">    iv &#x3D; secret_key</span><br><span class="line">    key &#x3D; des(secret_key, ECB, iv, pad&#x3D;None, padmode&#x3D;PAD_PKCS5)</span><br><span class="line">    desmsg &#x3D; key.decrypt(binascii.a2b_hex(msg), padmode&#x3D;PAD_PKCS5)</span><br><span class="line">    return desmsg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">str_en &#x3D; des_en(&#39;DESTest&#39;)</span><br><span class="line">print(&quot;DES加密DESTest结果为： &quot; + str(str_en))</span><br><span class="line"></span><br><span class="line">str_des &#x3D; des_des(str_en)</span><br><span class="line">print(&quot;DES解密结果为： &quot; + str(str_des))</span><br></pre></td></tr></table></figure><p>结果输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DES加密DESTest结果为： b&#39;9811175955dda6f9&#39;</span><br><span class="line">DES解密结果为： b&#39;DESTest&#39;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DES </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-Requests练习（一）</title>
      <link href="2019/07/09/Python-Requests%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2019/07/09/Python-Requests%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>Python-Requests练习（一）</p><a id="more"></a><p>python requests包(接口自动化)</p><p>想看看requests包的东西，主要是为了接口自动化</p><p>安装不谈，直接<code>pip install requests</code></p><h3 id="应用安装"><a href="#应用安装" class="headerlink" title="应用安装"></a>应用安装</h3><p>有个<code>httpbin</code>网站可以用来练习requests的请求：</p><blockquote><p><a href="http://httpbin.org/">官网</a></p></blockquote><p>不过为了防止IP因为过多请求被封，还是本地搭建一个吧</p><p>这边使用docker安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">安装：</span><br><span class="line">docker pull kennethreitz&#x2F;httpbin</span><br><span class="line"></span><br><span class="line">运行：</span><br><span class="line">docker run --name httpbin -d -p 8088:80 kennethreitz&#x2F;httpbin</span><br></pre></td></tr></table></figure><p>成功之后，浏览器就可以访问：<code>http://192.168.0.126:8088/</code></p><h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><p>最简单的用法：</p><h4 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">r &#x3D; requests.get(&quot;http:&#x2F;&#x2F;192.168.0.126:8088&#x2F;get&quot;)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure><p>返回</p><pre><code>&#123;  &quot;args&quot;: &#123;&#125;,   &quot;data&quot;: &quot;&quot;,   &quot;files&quot;: &#123;&#125;,   &quot;form&quot;: &#123;&#125;,   &quot;headers&quot;: &#123;    &quot;Accept&quot;: &quot;*/*&quot;,     &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,     &quot;Connection&quot;: &quot;close&quot;,     &quot;Content-Length&quot;: &quot;0&quot;,     &quot;Host&quot;: &quot;192.168.0.126:8088&quot;,     &quot;User-Agent&quot;: &quot;python-requests/2.21.0&quot;  &#125;,   &quot;json&quot;: null,   &quot;origin&quot;: &quot;192.168.11.144&quot;,   &quot;url&quot;: &quot;http://192.168.0.126:8088/put&quot;&#125;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### POST</span><br><span class="line"></span><br></pre></td></tr></table></figure>r = requests.post(&quot;http://192.168.0.126:8088/post&quot;)print(r.text)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">####  PUT</span><br><span class="line"></span><br></pre></td></tr></table></figure>r = requests.put(&quot;http://192.168.0.126:8088/put&quot;)print(r.text)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">####  DELETE</span><br><span class="line"></span><br></pre></td></tr></table></figure>r = requests.delete(&quot;http://192.168.0.126:8088/delete&quot;)print(r.text)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### PATCH</span><br><span class="line"></span><br></pre></td></tr></table></figure>r = requests.patch(&quot;http://192.168.0.126:8088/patch&quot;)print(r.text)```</code></pre>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Requests </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NumPy中的轴-维度-秩</title>
      <link href="2019/07/09/NumPy%E4%B8%AD%E7%9A%84%E8%BD%B4-%E7%BB%B4%E5%BA%A6-%E7%A7%A9/"/>
      <url>2019/07/09/NumPy%E4%B8%AD%E7%9A%84%E8%BD%B4-%E7%BB%B4%E5%BA%A6-%E7%A7%A9/</url>
      
        <content type="html"><![CDATA[<p>NumPy中的轴-维度-秩</p><a id="more"></a><p>看了某个要求，需要numpy和pandas，先看了numpy，才看到NumPy数组，就已经懵了，NumPy的维度（dimension）、轴（axis）和秩（rank）这几个概念有点绕。</p><p>关于维度：In NumPy dimension are called axes。意思是维度称为轴，和学生时代学习的对比，一维不谈，二维空间（x轴和y轴），只需要对应的x和y坐标，就能在二维空间中确定一个点；三维空间（x轴、y轴和z轴），只需要x坐标，y坐标和z坐标，就能在三维空间确定一个固定的点。类比到NumPy中，一维数组，轴的个数就为一；二维数组，轴的个数就为二。</p><p>而秩（rank）就是轴的数量，一维数组，秩是1，二维数组，秩是2这样。</p><p>NumPy可以用<code>ndim</code>和<code>shape</code>来获取秩和维度<br>源码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ndim &#x3D; property(lambda self: object(), lambda self, v: None, lambda self: None)  # default</span><br><span class="line">    &quot;&quot;&quot;Number of array dimensions.</span><br><span class="line"></span><br><span class="line">    Examples</span><br><span class="line">    --------</span><br><span class="line">    &gt;&gt;&gt; x &#x3D; np.array([1, 2, 3])</span><br><span class="line">    &gt;&gt;&gt; x.ndim</span><br><span class="line">    1</span><br><span class="line">    &gt;&gt;&gt; y &#x3D; np.zeros((2, 3, 4))</span><br><span class="line">    &gt;&gt;&gt; y.ndim</span><br><span class="line">    3&quot;&quot;&quot;</span><br></pre></td></tr></table></figure><p>秩是维度的数量（轴的数量）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">shape &#x3D; property(lambda self: object(), lambda self, v: None, lambda self: None)  # default</span><br><span class="line">    &quot;&quot;&quot;Tuple of array dimensions.</span><br><span class="line"></span><br><span class="line">    The shape property is usually used to get the current shape of an array,</span><br><span class="line">    but may also be used to reshape the array in-place by assigning a tuple of</span><br><span class="line">    array dimensions to it.  As with &#96;numpy.reshape&#96;, one of the new shape</span><br><span class="line">    dimensions can be -1, in which case its value is inferred from the size of</span><br><span class="line">    the array and the remaining dimensions. Reshaping an array in-place will</span><br><span class="line">    fail if a copy is required.</span><br><span class="line"></span><br><span class="line">    Examples</span><br><span class="line">    --------</span><br><span class="line">    &gt;&gt;&gt; x &#x3D; np.array([1, 2, 3, 4])</span><br><span class="line">    &gt;&gt;&gt; x.shape</span><br><span class="line">    (4,)</span><br></pre></td></tr></table></figure><p>直接用例子来辅助理解：</p><p>首先记住：<strong>NumPy对于轴的编号由外向内，从行到列。</strong></p><p>一维数组：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import  numpy as np</span><br><span class="line"></span><br><span class="line"># 一维数组</span><br><span class="line">a &#x3D; np.array([1, 2, 3])</span><br><span class="line">print(a.ndim)</span><br><span class="line">print(a.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出结果</span><br><span class="line">1</span><br><span class="line">(3,)</span><br></pre></td></tr></table></figure><p>示例的一维数组，秩为1，维度返回值(3,)，表示该数组在一维空间，有三个数据</p><p>二维数组：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 二维数组</span><br><span class="line">a &#x3D; np.array([[1, 2, 3], [4, 5, 6]])</span><br><span class="line">print(a.ndim)</span><br><span class="line">print(a.shape)</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">2</span><br><span class="line">(2, 3)</span><br></pre></td></tr></table></figure><p>示例二维数据，秩为2，维度返回值(2, 3)，表示该二维数组有两行三列(0轴长度为2,1轴长度为3)<br>示意图：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4tkmha3rrj20c504b0sk.jpg"></p><p>二维数组中，轴0表示数组的行，轴1表示数组的列</p><p>二维数组，可以看做是在0轴方向叠加一维数组，相应的，数组求和，0轴方向结果应该为：[5, 7, 9]，1轴方向结果应该为[6, 15]<br>验证一下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(a.sum(axis&#x3D;0))</span><br><span class="line">print(a.sum(axis&#x3D;1))</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">[5 7 9]</span><br><span class="line">[ 6 15]</span><br></pre></td></tr></table></figure><p>三维数组：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 三维数组</span><br><span class="line">a &#x3D; np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]], [[13, 14, 15], [16, 17, 18]]])</span><br><span class="line">b &#x3D; np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])</span><br><span class="line">c &#x3D; np.array([[[1, 2, 3]]])</span><br><span class="line"># print(a)</span><br><span class="line">print(a.ndim)</span><br><span class="line">print(a.shape)</span><br><span class="line"></span><br><span class="line">print(b.ndim)</span><br><span class="line">print(b.shape)</span><br><span class="line"></span><br><span class="line">print(c.ndim)</span><br><span class="line">print(c.shape)</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">3</span><br><span class="line">(3, 2, 3)</span><br><span class="line">3</span><br><span class="line">(2, 2, 3)</span><br><span class="line">3</span><br><span class="line">(1, 1, 3)</span><br></pre></td></tr></table></figure><p>以a为例，秩为3，数组维度返回（3, 2, 3），表示0轴长度为3,1轴长度为2,2轴长度为3,<br>示意图：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4tlnnatiyj20ni0d2q3a.jpg"></p><p>从示意图可以看出，三维数组可以理解为二维数组在0轴方向的叠加；<br>0轴方向求和，结果应该是个二维数组：[[21, 24, 27], [30, 33, 36]]<br>1轴方向求和，结果应该是二维数组：[[5, 7, 9], [17, 19, 21], [29, 31, 33]]<br>2轴方向求和，结果应该是二维数组：[[6, 15], [24, 33], [42, 51]]<br>验证求和计算：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">print(a.sum(axis&#x3D;0))</span><br><span class="line">print(a.sum(axis&#x3D;1))</span><br><span class="line">print(a.sum(axis&#x3D;2))</span><br><span class="line"></span><br><span class="line"># 结果输出</span><br><span class="line">[[21 24 27]</span><br><span class="line"> [30 33 36]]</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">[[ 5  7  9]</span><br><span class="line"> [17 19 21]</span><br><span class="line"> [29 31 33]]</span><br><span class="line">*********************</span><br><span class="line">[[ 6 15]</span><br><span class="line"> [24 33]</span><br><span class="line"> [42 51]]</span><br></pre></td></tr></table></figure><p>对于更高维度的数组，其实可以采用“降维”的方式进行处理，例如四维数组：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; np.array([[[1, 2, 3, 4], [5, 6, 7, 8]], [[9, 10, 11, 12], [13, 14, 15, 16]]])</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">[[[ 1  2  3  4]</span><br><span class="line">  [ 5  6  7  8]]</span><br><span class="line"></span><br><span class="line"> [[ 9 10 11 12]</span><br><span class="line">  [13 14 15 16]]]</span><br></pre></td></tr></table></figure><p>可以这么看：<br>A=[1, 2, 3, 4]<br>B=[5, 6, 7, 8]<br>C=[9, 10, 11, 12]<br>D=[13, 14, 15, 16]</p><p>原数组就可以重新表示成：[[A, B], [C, D]]，一个二维数组<br>示意图：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4tmcoq5brj20ak05xmx0.jpg"></p><p>此时进行数组求和，是按照向量进行加减法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 三维数组</span><br><span class="line"># a &#x3D; np.array([[A, B], [C, D]])</span><br><span class="line"># A&#x3D;[1, 2, 3, 4]</span><br><span class="line"># B&#x3D;[5, 6, 7, 8]</span><br><span class="line"># C&#x3D;[9, 10, 11, 12]</span><br><span class="line"># D&#x3D;[13, 14, 15, 16]</span><br><span class="line"># 二维数组，1轴方向</span><br><span class="line"># A+B&#x3D;[1+5, 2+6, 3+7, 4+8]&#x3D;[6, 8, 10, 12]</span><br><span class="line"># C+D&#x3D;[9+13, 10+14, 11+15, 12+16]&#x3D;[22, 24, 26, 28]</span><br><span class="line"># 原数组1轴方向求和结果：[[6, 8, 10, 12], [22, 24, 26, 28]]</span><br><span class="line"># 二维数组，0方向</span><br><span class="line"># A+C&#x3D;[1+9, 2+10, 3+11, 4+12]&#x3D;[10, 12, 14, 16]</span><br><span class="line"># B+D&#x3D;[5+13, 6+14, 7+15, 8+16]&#x3D;[18, 20, 22, 24]</span><br><span class="line"># 原数组0轴方向求和结果：[[10, 12, 14, 16], [18, 20, 22, 24]]</span><br><span class="line"># 原数组2轴方向求和结果即为每个一维数组内元素之和:A&#x3D;10,B&#x3D;26,C&#x3D;42,D&#x3D;58  --&gt; [[10, 26], [42, 58]]</span><br><span class="line">a &#x3D; np.array([[[1, 2, 3, 4], [5, 6, 7, 8]], [[9, 10, 11, 12], [13, 14, 15, 16]]])</span><br><span class="line"></span><br><span class="line"># print(a)</span><br><span class="line">print(a.sum(axis&#x3D;0))</span><br><span class="line">print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">print(a.sum(axis&#x3D;1))</span><br><span class="line">print(&quot;....................&quot;)</span><br><span class="line">print(a.sum(axis&#x3D;2))</span><br></pre></td></tr></table></figure><p>结果验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[[10 12 14 16]</span><br><span class="line"> [18 20 22 24]]</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">[[ 6  8 10 12]</span><br><span class="line"> [22 24 26 28]]</span><br><span class="line">....................</span><br><span class="line">[[10 26]</span><br><span class="line"> [42 58]]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NumPy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3 MD5加密</title>
      <link href="2019/07/05/python3-MD5%E5%8A%A0%E5%AF%86/"/>
      <url>2019/07/05/python3-MD5%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<p>python3 MD5加密</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;7&#x2F;5 13:09</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line">import hashlib</span><br><span class="line"></span><br><span class="line"># ZHTTest_f9768ce9e3acd3a743724c8128692d5d_1561529340474_&#123;&quot;searchText&quot;:&quot;吴凯&quot;&#125;</span><br><span class="line"># cd63c0e512a99aeabc73d1e6b9f26cbe</span><br><span class="line"></span><br><span class="line"># m &#x3D; hashlib.md5(&#39;ZHTTest_f9768ce9e3acd3a743724c8128692d5d_1561529340474_&#123;&quot;searchText&quot;:&quot;吴凯&quot;&#125;&#39;.</span><br><span class="line">#                 encode(encoding&#x3D;&#39;utf-8&#39;)).hexdigest()</span><br><span class="line"></span><br><span class="line"># 生成13位时间戳</span><br><span class="line">timestamp &#x3D; int(time.time()*1000)</span><br><span class="line">strs&#x3D; &#39;ZHTTest_f9768ce9e3acd3a743724c8128692d5d_&#39;</span><br><span class="line"></span><br><span class="line">md5str &#x3D; strs + str(timestamp) + &#39;_&#123;&quot;searchText&quot;:&quot;吴凯&quot;&#125;&#39;</span><br><span class="line"># print(md5str)</span><br><span class="line"></span><br><span class="line"># 加密</span><br><span class="line">m &#x3D; hashlib.md5(md5str.encode(encoding&#x3D;&#39;utf-8&#39;)).hexdigest()</span><br><span class="line"></span><br><span class="line">print(&quot;md5sss:&quot; + m +&quot;&lt;&gt;&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在windows下放在英文文件路径下，再创建一个.bat脚本：<code>python xxx.python</code><br>配合Jmeter的<code>OS Process Sampler</code>完成jmeter调用python实现MD5加密，之前写过HmacSHA256加密的</p><blockquote><p><a href="https://tokyle.com/2019/04/23/Jmeter%E8%B0%83%E7%94%A8python%E5%AE%8C%E6%88%90HmacSHA256%E5%8A%A0%E5%AF%86%E5%A4%84%E7%90%86/">Jmeter调用python完成HmacSHA256加密处理</a></p></blockquote><p>附上loadrunner MD5实现（C语言真一窍不通）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Action()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">char* va1;</span><br><span class="line">char* va2;</span><br><span class="line">char* va3;</span><br><span class="line">char sign[500];</span><br><span class="line"></span><br><span class="line">web_save_timestamp_param(&quot;tStamp&quot;, LAST);</span><br><span class="line"></span><br><span class="line">va1&#x3D;&quot;ZHTTest_f9768ce9e3acd3a743724c8128692d5d_&quot;;</span><br><span class="line">va2&#x3D;&quot;&#123;tStamp&#125;&quot;;</span><br><span class="line">&#x2F;&#x2F;va2&#x3D;&quot;1561529340474&quot;;</span><br><span class="line">va3&#x3D;&quot;_&#123;\&quot;searchText\&quot;:\&quot;鍚村嚡\&quot;&#125;&quot;;</span><br><span class="line"> </span><br><span class="line">strcat(sign,va1);</span><br><span class="line">strcat(sign,va2);</span><br><span class="line">strcat(sign,va3);</span><br><span class="line"></span><br><span class="line">lr_output_message(&quot;%s&quot;,CMd5(sign));</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
            <tag> python3 </tag>
            
            <tag> MD5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些测试杂说</title>
      <link href="2019/07/04/%E4%B8%80%E4%BA%9B%E6%B5%8B%E8%AF%95%E6%9D%82%E8%AF%B4/"/>
      <url>2019/07/04/%E4%B8%80%E4%BA%9B%E6%B5%8B%E8%AF%95%E6%9D%82%E8%AF%B4/</url>
      
        <content type="html"><![CDATA[<p>一些测试杂说</p><a id="more"></a><h3 id="序-软件质量模型"><a href="#序-软件质量模型" class="headerlink" title="序.软件质量模型"></a>序.软件质量模型</h3><p>这段时间越来越不安定，越来越不理解自己当前的工作到底是为了什么，测试人员的产出只是作为一个参考，完全不是准出条件之一，越来越乱和浮躁的环境，充斥着无奈。</p><p>不谈现在的环境，想想测试本身，看看外面的测试现状。</p><p>首先，插个或许觉得不相关的：<code>软件产品质量模型</code>：</p><p>软件产品质量模型六大属性：</p><table><thead><tr><th>Item</th><th>子属性</th></tr></thead><tbody><tr><td>功能性</td><td>适合性、准确性、安全性、功能性的顺从性等</td></tr><tr><td>可靠性</td><td>成熟性、容错性、可恢复性、可靠性的顺从性等</td></tr><tr><td>易用性</td><td>易理解性、易学性、易操作性、易用性的依从性等</td></tr><tr><td>效率</td><td>时间特性、资源利用率、效率的依从性</td></tr><tr><td>可维护性</td><td>可分析性、可修改性、稳定性、可测试性、可维护性的依从性</td></tr><tr><td>可移植性</td><td>适应性、可安装性、共存性、易替换性、可移植性的依从性</td></tr></tbody></table><p>功能性的顺从性（Functionality Compliance）：软件产品符合和该功能相关的标准、规范、规则或特定的能力（如对于一款计算器，计算规则要和数学中相关规则保持一致）</p><p>可靠性的顺从性（Reliability Compliance）：软件产品遵循与可靠性相关的标准、约定或规定的能力（如对于通信类产品，系统的故障率不能高干多少、故障恢复时间不能长于多少等）</p><p>易用性的依从性(Usability Compliance)：软件产品遵循与易用性相关的标准、约定、风格指南（style guide）或法规的能力（如对Windows的计算器来说，在界面设计上模仿实体计算器是易用性依从性的一个体现）</p><p>效率依从性（Efficiency Compliance）： 软件产品遵循与效率相关的标准或约定的能力（如对系统资源的占有率又不能高于多少）</p><p>可维护性的依从性(Maintainability Compliance)：软件产品遵循与维护相关的标准或约定的能力（如软件出现故障时会弹出“XXX遇到问题要关闭”之类的提示）</p><p>可移植性的依从性（Portability Compliance）： 软件产品遵循与可移植性相关的标准或约定的能力（如产品不是针对某款特定的操作系统开发的，需要支持Windows所有操作系统）</p><h3 id="软件测试初衷"><a href="#软件测试初衷" class="headerlink" title="软件测试初衷"></a>软件测试初衷</h3><p>回想软件测试这个活动存在的理由和意义是什么。最简单粗暴的，测试是为了发现bug，人都有思维定式，自己写的逻辑，自己去发现问题，不是很容易，同时，人精力也有限，让开发人员既负责产品研发，又负责质量控制，不是很切实际，因此，测试人员的最重要使命就是把关，产品质量关，确保最终交付给客户的是相对满意的产品（关于质量，不是单纯的靠测试人员就可以保证的，理性的应该知道，产品质量是需要整个团队，整个软件生命周期共同设计，保证）</p><p>关于bug，很明显，bug不是测试人员造成的，很多开发不知道怎么的，就觉得，bug是测试人员造成的，怕不是失了智，这样的开发，建议转行，遇到这样开发的测试，建议深呼吸，抑制住锤人的冲动。bug可能是程序员写出来的，不符合需求的实现。也可能是产品经理错误的想法或者错误概念造成和客户期望不符的需求。当然，是人就都可能犯错误，测试需要关注的，是怎么预防错误的发生，针对需求开始就可能出现的质量问题，最简单的，现在已经盛行的，测试左移，全流程测试，从需求层面就开始介入测试，这也是测试的最佳实践之一，很不幸，国内当前，至少在苏州的大多数，很难。</p><p>同样的，就按我现在所在公司来说，听到的很多抱怨都是测不下去，原因是需求变来变去，产品无法准确把握和设计需求，造成开发过程甚至已经提测之后，进行不停的“需求变更”，美其名曰敏捷开发提倡拥抱变化，变更是正常的，实际上变化的自始至终都不是客户的需求，而是产品经理自己的需求，这可能是产品经理自身能力不够，也可能是没有对需求本身进行质量控制，大家都知道的，变更越往后，成本越高，作为质量控制人员，要防止最终的不可控，我们更应该从需求就开始接入，控制质量，控制成本。</p><h3 id="当前测试现状"><a href="#当前测试现状" class="headerlink" title="当前测试现状"></a>当前测试现状</h3><p>只从“术”的角度看当前软件测试技术发展<br>当前测试大环境下：</p><ul><li>大量公司关注自动化，提倡自动化实施</li><li>大力开展CI/CD、Devops</li><li>多数公司都建立有自己的测试平台</li><li>关注APM，链路监控</li><li>使用大量开源工具辅助测试</li><li>… …</li></ul><p>同时，可能存在的问题：</p><ul><li>公司并没有质量文化，没有关注质量的基因</li><li>公司没有自己的质量标准，也没有缺陷预防</li><li>过于追求“术”，对于测试行为本身的思考几乎没有</li><li>面对新的软件开发模式，敏捷、微服务、Service Mesh、Serverless手足无措</li><li>热衷于招聘测试开发和所谓资深测试，重复造轮子，和市场脱节（苏州oracle的部分资深）</li><li>… …<br>（提个搞笑的，招了一堆资深人员，做手工测试）</li></ul><h3 id="可能的未来"><a href="#可能的未来" class="headerlink" title="可能的未来"></a>可能的未来</h3><p>对于现状，说说可能的未来，首先，当前市场上，去翻的看看，招聘的职位，基本都是“测试开发”，说实话，很多时候，花大代价招进来的测试开发，做的是不是就是维护已有自动化框架的事情，或者是一些小的团队，招测试开发是为了开展自动化，我还是那句话，是不是有考虑好真的需要开展自动化了。自动化做到什么程序是自己满意的。单纯的开发自动化框架，不接触业务的测试开发，最终的产出真的是可以解决当前问题的。其实，是可以先冷静的想想的。毕竟，自动化，说到底，也是在已知测试结果的情况下进行的自动验证，现实中很多情况，是自动化做不到的，在没有能力做到自动生成测试用例，自动生成测试数据情况下，还是不用过于追求它。当然，当前已经有AI在测试上的实施，AI可以帮助我们自动生成测试用例、测试数据，模拟用户操作，帮助我们提高测试效率和测试覆盖率，但是AI基础是大数据，这边的数据，还是需要人工进行探索式测试得到。未来可能会出现这样的场景，首先人工进行业务分析，需求评审，功能拆分，探索式测试，产出数据供AI进行模型训练，然后AI会帮助进行以前的自动化部分，甚至是自动化没有涉及到的，AI会自动帮你扩充，自动化没有覆盖的，AI会帮助覆盖。</p><p>看过一个关于测试的公式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">测试 &#x3D; 检测 + 试验</span><br><span class="line"></span><br><span class="line">测试 &#x3D; 已知的检测 + 未知的试验</span><br><span class="line"></span><br><span class="line">测试 &#x3D; 基于确定性模型&#x2F;明确的预言（test oracle）的自动化测试 + 基于AI搜索&#x2F;基于工具随机&#x2F;模糊模型&#x2F;人工的探索式测试</span><br></pre></td></tr></table></figure><p>理想情况下，人工负责分析，建模性工作，其他交给AI和自动化进行机械重复性劳动</p><p>以上基本都是关于测试“术”的未来，关于测试“道”，说到底，其实自始至终都是一样的，软件测试人员，存在的原因是保障产品质量，最终提交客户的是客户满意的产品，你所要负责的，是产品的质量保障，不是测试代码，不是测试工具，不是你的领导布置的任务你有了框架产出，所有的一切“旁门”的努力，根本原因是为了保障质量，提高效率的保障质量。</p><p>最后，希望自己能在技术挣扎中，不忘了，自己做测试的原因。</p><p>通篇胡言乱语，完~</p>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7搭建wordpress博客</title>
      <link href="2019/07/03/Centos7%E6%90%AD%E5%BB%BAwordpress%E5%8D%9A%E5%AE%A2/"/>
      <url>2019/07/03/Centos7%E6%90%AD%E5%BB%BAwordpress%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>Centos7搭建wordpress博客</p><a id="more"></a><p>其实，也不是想换成wordpress，就是想看看搭起来怎么样</p><h3 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h3><p>当前最新版本是5.2.2，但是没有汉化包，折腾半天，英语还是看的费劲，当然，全英文无压力可以用和这个，看了下汉化进度，简体中文0%，繁体中文100%，所以不介意的话，可以用台湾同胞制作的繁体中文汉化包：</p><blockquote><p><a href="https://wordpress.org/download/">官网5.22下载</a><br><a href="https://make.wordpress.org/polyglots/teams/?locale=zh_TW">繁体中文汉化包</a></p></blockquote><p>汉化包下载完了之后，先进入wordpress的<code>wp-content</code>文件夹，创建一个<code>languages</code>文件夹，然后将汉化包解压到这个文件夹，然后浏览器刷新页面即可</p><p>当前简体中文版汉化的最高版本是<strong>5.0.4</strong>，下载地址：</p><blockquote><p><a href="https://cn.wordpress.org/download/releases/">简体中文汉化版</a></p></blockquote><h3 id="httpd"><a href="#httpd" class="headerlink" title="httpd"></a>httpd</h3><p>安装httpd很简单<code>yum install httpd</code>，启动：<code>systemctl start httpd</code></p><p>将上一步下载好的安装包，解压到httpd目录下：<code>/var/www/html</code>，重命名文件夹，更改属主和属组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf wordpress-5.2.2.tar.gz -C &#x2F;var&#x2F;www&#x2F;html</span><br><span class="line"></span><br><span class="line">mv wordpress blog</span><br><span class="line"></span><br><span class="line">chown -R root:root blog</span><br></pre></td></tr></table></figure><p>并且，由于多加了一层<code>blog</code>，需要更改httpd的配置文件，修改路径：<br><code>vim /etc/httpd/conf/httpd.conf</code><br>将<code>DocumentRoot</code>和<code>Directory</code>改为<code>/var/www/html/blog</code></p><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><p>安装MySQL就不说了，装好之后，进控制台，建库和用户：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create database wordpress character set utf8;</span><br><span class="line">create user wordpress@&#39;%&#39; identified by &#39;test@1234&#39;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;wordpress&#39;@&#39;%&#39; IDENTIFIED BY &#39;test@1234&#39; WITH GRANT OPTION;</span><br><span class="line">flush privileges;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><h3 id="php"><a href="#php" class="headerlink" title="php"></a>php</h3><p>使用<code>yum install php</code>安装的php版本是5.6有点低，wordpress5.2.2不支持，最好是安装<strong>PHP7</strong><br>卸载原来版本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove php*</span><br></pre></td></tr></table></figure><p>更改RPM源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https:&#x2F;&#x2F;mirror.webtatic.com&#x2F;yum&#x2F;el7&#x2F;epel-release.rpm</span><br><span class="line">rpm -Uvh https:&#x2F;&#x2F;mirror.webtatic.com&#x2F;yum&#x2F;el7&#x2F;webtatic-release.rpm</span><br></pre></td></tr></table></figure><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install php71w php71w-cli php71w-common php71w-devel php71w-embedded php71w-fpm php71w-gd php71w-mbstring php71w-mysqlnd php71w-opcache php71w-pdo php71w-xml php71w-ldap php71w-mcrypt</span><br></pre></td></tr></table></figure><p>验证：<code>php -v</code></p><h3 id="配置wordpress"><a href="#配置wordpress" class="headerlink" title="配置wordpress"></a>配置wordpress</h3><p>修改数据库配置：</p><p>进入blog文件夹（之前重命名的），重命名wp-config-sample.php为wp-config.php，添加数据库信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv wp-config-sample.php wp-config.php</span><br><span class="line">vim wp-config.php</span><br></pre></td></tr></table></figure><p>修改对应数据库信息，并且访问<code>https://api.wordpress.org/secret-key/1.1/salt/</code>获取Authentication Unique Keys，并且粘贴进来。</p><p>编辑完成之后，重启httpd:<code>systemctl restart httpd</code><br>浏览器输入IP，开始使用wordpress</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wordpress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter生成Report Dashboard</title>
      <link href="2019/07/02/Jmeter%E7%94%9F%E6%88%90Report-Dashboard/"/>
      <url>2019/07/02/Jmeter%E7%94%9F%E6%88%90Report-Dashboard/</url>
      
        <content type="html"><![CDATA[<p>Jmeter生成Report Dashboard</p><a id="more"></a><h3 id="Report-Dashboard"><a href="#Report-Dashboard" class="headerlink" title="Report Dashboard"></a>Report Dashboard</h3><p>Jmeter最后生成的测试结果报告一直是被吐槽的，今天翻官方教程时候，发现，人家报告根本就很好看啊，自己不会用。。</p><blockquote><p><a href="https://jmeter.apache.org/usermanual/generating-dashboard.html#top">Generating Report Dashboard</a></p></blockquote><p>生成方法很简单，命令行运行jmeter脚本即可，格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t &lt;test JMX file&gt; -l &lt;test log file&gt; -e -o &lt;Path to output folder&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t 111.jmx -l report\01-result.csv -e -o report\01-Dashboard</span><br></pre></td></tr></table></figure><p>运行完成之后，会在report文件夹下，生成一个<code>01-Dashboard</code>文件夹，浏览器打开<code>index.html</code>就是一个很完整的<strong>Report Dashboard</strong></p><p>效果图：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4mecnxu8xj21h30phmyo.jpg" alt="dashboard"></p><p>响应时间图<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4medfxay2j21gz0q60uk.jpg"></p><p>另一种生成dashboard的方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Generation from an existing sample CSV log file（从结果csv文件产生）</span><br><span class="line">jmeter -g &lt;log file&gt; -o &lt;Path to output folder&gt;</span><br></pre></td></tr></table></figure><p>这是在已经执行完测试，生成了csv的测试结果</p><h3 id="Jmeter几条常用命令"><a href="#Jmeter几条常用命令" class="headerlink" title="Jmeter几条常用命令"></a>Jmeter几条常用命令</h3><p>算是自己平时可能用的比较多的：</p><h4 id="命令行模式"><a href="#命令行模式" class="headerlink" title="命令行模式"></a>命令行模式</h4><p>jmeter命令行模式（脚本和jmeter.bat在一个目录）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t test1.jmx  -r -l report\01-result.csv -j report\01-log.log（分布式）</span><br><span class="line"></span><br><span class="line">jmeter -n -t APP.jmx   -l report\01-result.csv -j report\01-log.log（单台）</span><br></pre></td></tr></table></figure><p>顺便记点不相关的：<br>iostat安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y sysstat</span><br></pre></td></tr></table></figure><p>htop安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line"></span><br><span class="line">yum install htop</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter使用Grafana展示</title>
      <link href="2019/06/27/Jmeter%E4%BD%BF%E7%94%A8Grafana%E5%B1%95%E7%A4%BA/"/>
      <url>2019/06/27/Jmeter%E4%BD%BF%E7%94%A8Grafana%E5%B1%95%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<p>Jmeter使用Grafana展示</p><a id="more"></a><p>之前写过一个Jmeter + Influxdb + Grafana实时展示测试结果：</p><blockquote><p><a href="https://tokyle.com/2018/09/27/%E4%BD%BF%E7%94%A8Grafana%E5%B1%95%E7%A4%BAJmeter%E6%95%B0%E6%8D%AE/">使用Grafana展示Jmeter数据</a></p></blockquote><p>之前使用的<code>Backend Listener</code>选择的是<code>org.apache.jmeter.visualizers.backend.graphite.TextGraphiteMetricsSender</code></p><p>现在直接使用<code>org.apache.jmeter.visualizers.backend.influxdb.HttpMetricsSender</code>更简单一点</p><h3 id="安装influxdb"><a href="#安装influxdb" class="headerlink" title="安装influxdb"></a>安装influxdb</h3><ul><li>安装：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dl.influxdata.com&#x2F;influxdb&#x2F;releases&#x2F;influxdb-1.7.6.x86_64.rpm</span><br><span class="line">sudo yum localinstall influxdb-1.7.6.x86_64.rpm</span><br></pre></td></tr></table></figure><ul><li>启动：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">加自启动：</span><br><span class="line">systemctl enable influxdb</span><br><span class="line"></span><br><span class="line">启服务：</span><br><span class="line">systemctl start influxdb</span><br></pre></td></tr></table></figure><ul><li>建库：</li></ul><p>进控制台：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@tokyle influxdb]# influx</span><br><span class="line">Connected to http:&#x2F;&#x2F;localhost:8086 version 1.6.1</span><br><span class="line">InfluxDB shell version: 1.6.1</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure><p>建库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 建库</span><br><span class="line">create database jmeterdb;</span><br><span class="line"> </span><br><span class="line"># 建存储策略</span><br><span class="line">CREATE RETENTION POLICY &quot;jmeter_7d&quot; ON &quot;jmeterdb&quot; DURATION 7d REPLICATION 1 DEFAULT;</span><br><span class="line"></span><br><span class="line"># 查看存储策略</span><br><span class="line">show retention policies on jmeterdb;</span><br><span class="line"></span><br><span class="line">name      duration shardGroupDuration replicaN default</span><br><span class="line">----      -------- ------------------ -------- -------</span><br><span class="line">autogen   0s       168h0m0s           1        false</span><br><span class="line">jmeter_7d 168h0m0s 24h0m0s            1        true</span><br></pre></td></tr></table></figure><h3 id="安装grafana"><a href="#安装grafana" class="headerlink" title="安装grafana"></a>安装grafana</h3><ul><li>安装</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dl.grafana.com&#x2F;oss&#x2F;release&#x2F;grafana-6.2.5-1.x86_64.rpm </span><br><span class="line">sudo yum localinstall grafana-6.2.5-1.x86_64.rpm </span><br></pre></td></tr></table></figure><ul><li>启动</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">systemctl start grafana-server</span><br><span class="line"></span><br><span class="line">systemctl status grafana-server</span><br></pre></td></tr></table></figure><p>进官网，下载Jmter标准模板。。。</p><blockquote><p><a href="https://grafana.com/dashboards/5496">Grafana-Jmeter模板</a></p></blockquote><p>可以直接下载Json，然后进grafana web页面，导入dashboard即可</p><h3 id="Jmeter配置"><a href="#Jmeter配置" class="headerlink" title="Jmeter配置"></a>Jmeter配置</h3><p>主要就是配置一个<code>Backend Listener</code></p><p><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4fodelbddj213f094tbg.jpg" alt="Jmeter配置"></p><p>需要修改部分：</p><ol><li><p>influxdbUrl: IP改为自己influxdb的IP</p></li><li><p>application：自定义一个应用名称，后面grafana要用到</p></li><li><p>summaryOnly：false</p></li></ol><p>然后就可以直接运行jmeter跑结果了，在grafana中可以直观的呈现：</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1g4fpmqipiwj20dw074gmr.jpg"></p><h3 id="Jmeter-Metrics"><a href="#Jmeter-Metrics" class="headerlink" title="Jmeter Metrics"></a>Jmeter Metrics</h3><p>Jmter对接influxdb之后，可以在表里找到很多的字段，翻jmeter官网，看看各个metric的含义</p><blockquote><p><a href="http://jmeter.apache.org/usermanual/realtime-results.html">Jmeter官网Metrics教程</a></p></blockquote><h4 id="线程-虚拟用户"><a href="#线程-虚拟用户" class="headerlink" title="线程/虚拟用户"></a>线程/虚拟用户</h4><table><thead><tr><th>Item</th><th>含义</th></tr></thead><tbody><tr><td>minAT</td><td>最小活跃线程（虚拟用户）</td></tr><tr><td>maxAT</td><td>最大活跃线程（虚拟用户）</td></tr><tr><td>meanAT</td><td>平均活跃线程（虚拟用户）</td></tr><tr><td>startedT</td><td>started threads运行中的线程？</td></tr><tr><td>endedT</td><td>Finished thread停止的线程</td></tr></tbody></table><h4 id="响应时间"><a href="#响应时间" class="headerlink" title="响应时间"></a>响应时间</h4><table><thead><tr><th>Item</th><th>含义</th></tr></thead><tbody><tr><td>.ok.count</td><td>成功的请求数</td></tr><tr><td>.h.count/hit</td><td>QPS</td></tr><tr><td>.ok.min</td><td>最小成功请求响应时间</td></tr><tr><td>.ok.max</td><td>最大成功请求响应时间</td></tr><tr><td>.ok.avg</td><td>成功请求平均响应时间</td></tr><tr><td>.ok.pct</td><td>请求成功率</td></tr><tr><td>.a.count</td><td>总请求数（成功+失败）</td></tr><tr><td>.sb.bytes</td><td>发送数据量（Bytes）</td></tr><tr><td>.rb.bytes</td><td>接收数据量（Bytes）</td></tr><tr><td>countError</td><td>错误数</td></tr><tr><td>pct90.0</td><td>90%响应时间</td></tr><tr><td>pct95.0</td><td>95%响应时间</td></tr><tr><td>pct99.0</td><td>99%响应时间</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grafana </tag>
            
            <tag> Influxdb </tag>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Influxdb启动失败日志定位</title>
      <link href="2019/06/26/Influxdb%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E6%97%A5%E5%BF%97%E5%AE%9A%E4%BD%8D/"/>
      <url>2019/06/26/Influxdb%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E6%97%A5%E5%BF%97%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<p>Influxdb启动失败日志定位</p><a id="more"></a><p>之前做过Jmeter使用influxdb和grafana展示测试数据，当时使用了graphite，现在看到Jmeter好像可以直接存在influxdb中，就想尝试下，就找了台机器搭建influxdb，然后悲剧了，起不来。</p><p>其实问题很简单，基本不是端口占用就是文件夹权限问，主要是找不到日志。。</p><p>下面是完整的经过<br>搭建完influxdb，并且<code>systemctl start influxdb</code>之后，想连进去看看：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@tokyle bin]# influx</span><br><span class="line">Failed to connect to http:&#x2F;&#x2F;localhost:8086: Get http:&#x2F;&#x2F;localhost:8086&#x2F;ping: dial tcp [::1]:8086: connect: connection refused</span><br><span class="line">Please check your connection settings and ensure &#39;influxd&#39; is running.</span><br></pre></td></tr></table></figure><p>进不去。。检查状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@tokyle bin]# systemctl  status  influxdb</span><br><span class="line">● influxdb.service - InfluxDB is an open-source, distributed, time series database</span><br><span class="line">   Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;influxdb.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: failed (Result: start-limit) since 四 2019-06-27 11:00:45 CST; 2min 0s ago</span><br><span class="line">     Docs: https:&#x2F;&#x2F;docs.influxdata.com&#x2F;influxdb&#x2F;</span><br><span class="line">  Process: 3587 ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;influxd -config &#x2F;etc&#x2F;influxdb&#x2F;influxdb.conf $INFLUXD_OPTS (code&#x3D;exited, status&#x3D;1&#x2F;FAILURE)</span><br><span class="line"> Main PID: 3587 (code&#x3D;exited, status&#x3D;1&#x2F;FAILURE)</span><br><span class="line"></span><br><span class="line">6月 27 11:00:44 tokyle.com systemd[1]: Unit influxdb.service entered failed state.</span><br><span class="line">6月 27 11:00:44 tokyle.com systemd[1]: influxdb.service failed.</span><br><span class="line">6月 27 11:00:45 tokyle.com systemd[1]: influxdb.service holdoff time over, scheduling restart.</span><br><span class="line">6月 27 11:00:45 tokyle.com systemd[1]: Stopped InfluxDB is an open-source, distributed, time series database.</span><br><span class="line">6月 27 11:00:45 tokyle.com systemd[1]: start request repeated too quickly for influxdb.service</span><br><span class="line">6月 27 11:00:45 tokyle.com systemd[1]: Failed to start InfluxDB is an open-source, distributed, time series database.</span><br><span class="line">6月 27 11:00:45 tokyle.com systemd[1]: Unit influxdb.service entered failed state.</span><br><span class="line">6月 27 11:00:45 tokyle.com systemd[1]: influxdb.service failed.</span><br></pre></td></tr></table></figure><p>压根没起来</p><p>找日志，先到<code>/var/lib/influxdb</code>下，没知道，<code>/var/log/</code>没找到</p><p>找<strong>系统日志</strong><br><code>journalctl -u influxdb</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u influxdb</span><br><span class="line"></span><br><span class="line">6月 27 10:46:02 tokyle.com systemd[1]: influxdb.service: main process exited, code&#x3D;exited, status&#x3D;1&#x2F;FAILURE</span><br><span class="line">6月 27 10:46:02 tokyle.com systemd[1]: Unit influxdb.service entered failed state.</span><br><span class="line">6月 27 10:46:02 tokyle.com systemd[1]: influxdb.service failed.</span><br><span class="line">6月 27 10:46:03 tokyle.com systemd[1]: influxdb.service holdoff time over, scheduling restart.</span><br><span class="line">6月 27 10:46:03 tokyle.com systemd[1]: Stopped InfluxDB is an open-source, distributed, time series database.</span><br><span class="line">6月 27 10:46:03 tokyle.com systemd[1]: start request repeated too quickly for influxdb.service</span><br><span class="line">6月 27 10:46:03 tokyle.com systemd[1]: Failed to start InfluxDB is an open-source, distributed, time series database.</span><br></pre></td></tr></table></figure><p>还是看不出什么问题</p><p>最后，不使用systemctl直接手工启动influxdb：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop influxdb</span><br><span class="line"></span><br><span class="line">cd &#x2F;usr&#x2F;bin</span><br><span class="line"></span><br><span class="line">[root@tokyle bin]# influxd -config &#x2F;etc&#x2F;influxdb&#x2F;influxdb.conf </span><br><span class="line"></span><br><span class="line"> 8888888           .d888 888                   8888888b.  888888b.</span><br><span class="line">   888            d88P&quot;  888                   888  &quot;Y88b 888  &quot;88b</span><br><span class="line">   888            888    888                   888    888 888  .88P</span><br><span class="line">   888   88888b.  888888 888 888  888 888  888 888    888 8888888K.</span><br><span class="line">   888   888 &quot;88b 888    888 888  888  Y8bd8P&#39; 888    888 888  &quot;Y88b</span><br><span class="line">   888   888  888 888    888 888  888   X88K   888    888 888    888</span><br><span class="line">   888   888  888 888    888 Y88b 888 .d8&quot;&quot;8b. 888  .d88P 888   d88P</span><br><span class="line"> 8888888 888  888 888    888  &quot;Y88888 888  888 8888888P&quot;  8888888P&quot;</span><br><span class="line"></span><br><span class="line">2019-06-27T03:04:08.786635ZinfoInfluxDB starting&#123;&quot;log_id&quot;: &quot;0GHj5JKW000&quot;, &quot;version&quot;: &quot;1.6.1&quot;, &quot;branch&quot;: &quot;1.6&quot;, &quot;commit&quot;: &quot;5766854b95ae86cccf6cc8ffe4c5bb9eacc994b8&quot;&#125;</span><br><span class="line">2019-06-27T03:04:08.786678ZinfoGo runtime&#123;&quot;log_id&quot;: &quot;0GHj5JKW000&quot;, &quot;version&quot;: &quot;go1.10.3&quot;, &quot;maxprocs&quot;: 4&#125;</span><br><span class="line">run: open server: listen: listen tcp 127.0.0.1:8088: bind: address already in use</span><br></pre></td></tr></table></figure><p>终于看见了，端口被占用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@tokyle bin]# netstat -anp | grep 8088</span><br><span class="line">tcp6       0      0 :::8088                 :::*                    LISTEN      22329&#x2F;docker-proxy</span><br></pre></td></tr></table></figure><p>docker占了8088,问题解决</p><p>以上经过，记住，influxdb找不到日志：</p><ol><li>journalctl -u influxdb</li><li>/usr/bin/influxd -config /etc/influxdb/influxdb.conf</li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Influxdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter ForEach控制器使用</title>
      <link href="2019/06/26/Jmeter-ForEach%E6%8E%A7%E5%88%B6%E5%99%A8%E4%BD%BF%E7%94%A8/"/>
      <url>2019/06/26/Jmeter-ForEach%E6%8E%A7%E5%88%B6%E5%99%A8%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Jmeter ForEach控制器使用</p><a id="more"></a><p>昨天遇到的问题，有个接口需要循环删除多个taskid（前一个接口获得），找了网上资料，最后成功实现</p><h3 id="ForEach控制器"><a href="#ForEach控制器" class="headerlink" title="ForEach控制器"></a>ForEach控制器</h3><p>ForEach控制器一般和用户自定义变量一起使用，其在用户自定义变量中读取一系列相关的变量。该控制器下的采样器或控制器都会被执行一次或多次，每次读取不同的变量值</p><p>字段解释：</p><table><thead><tr><th>字段</th><th>含义</th></tr></thead><tbody><tr><td>Input Variable Prefix</td><td>输入变量前缀</td></tr><tr><td>Output variable name</td><td>输出变量名称</td></tr><tr><td>Start index for loop(exclusive)</td><td>循环开始的索引（这里如果不填写，默认从1开始，如果没有1开始的变量，执行时会报错）</td></tr><tr><td>End index for loop(inclusive)</td><td>循环结束的索引</td></tr><tr><td>Add”_”before number</td><td>输入变量名称中是否使用“_”进行间隔</td></tr></tbody></table><h3 id="一般用法"><a href="#一般用法" class="headerlink" title="一般用法"></a>一般用法</h3><p>ForEach控制器一般喝<code>用户定义的变量</code>一起使用<br>结构类似这样：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ffkn6taqj20wp089t9m.jpg" alt="ForEach示例"></p><p>在<code>用户定义的变量</code>插件中定义了四个name，在后续http请求，需要每个都传进去执行一次，也就是整个线程组执行是一次，其中http请求会执行四次，并且每次使用不通的name</p><p>ForEach控制器配置：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ffnhsjnlj20a906owf2.jpg" alt="ForEach控制器配置"></p><p>传入name，输出testname，在后续http请求中，name替换成<code>$&#123;testname&#125;</code>即可<br>看看效果：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ffrpyrraj20ld08oq4t.jpg" alt="执行效果"></p><h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>回到之前那个删除taskid的问题，可以采用同样的方式，只要保证，传给ForEach控制器的是key:value形式，并且是同一个key，不同的value</p><p><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ffwmsfu7j20ju081wg0.jpg" alt="11"></p><p>其中search接口返回数据大概是这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;taskId&quot;:&quot;5d12ddc64d44wserwreeaa4cb56&quot;,</span><br><span class="line">        &quot;input&quot;:Object&#123;...&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;taskId&quot;:&quot;5d12ddc64ereea017eaa4cb56&quot;,</span><br><span class="line">        &quot;input&quot;:Object&#123;...&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>可以看到返回值中有多个taskId，这些taskId是需要全部传给后续delete接口删除的<br>可以用JSON提取出所有的taskID，再传给ForEach控制器，输出一个新的变量taskidItem，将该taskidItem传给delete接口，达到有多少taskId，delete接口就取不同的taskId循环多少次，最终全部删除的效果</p><p><code>JSON Extractor</code>配置：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4fg1x4m2wj20wn07jq4x.jpg" alt="JSON Extractor"></p><p>以上就是本次实现，ForEach控制器，总的来说，适用于有多个value值返回，并且这些value值都需要进行后续操作的场景</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>性能监控简单小结</title>
      <link href="2019/06/26/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%AE%80%E5%8D%95%E5%B0%8F%E7%BB%93/"/>
      <url>2019/06/26/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%AE%80%E5%8D%95%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>性能监控简单小结</p><p>涉及MySQL和JVM</p><a id="more"></a><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><p>首先是MySQL的常用监控项</p><h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><ul><li>缓存概览<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;%Query_cache%%&quot;;</span><br><span class="line">+------------------------------+----------+</span><br><span class="line">| Variable_name                | Value    |</span><br><span class="line">+------------------------------+----------+</span><br><span class="line">| have_query_cache             | YES      |</span><br><span class="line">| query_cache_limit            | 16777216 |</span><br><span class="line">| query_cache_min_res_unit     | 4096     |</span><br><span class="line">| query_cache_size             | 16777216 |</span><br><span class="line">| query_cache_type             | OFF      |</span><br><span class="line">| query_cache_wlock_invalidate | OFF      |</span><br><span class="line">+------------------------------+----------+</span><br><span class="line">6 rows in set (0.24 sec)</span><br></pre></td></tr></table></figure></li><li>缓存碎片率<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status  like &quot;%Qcache%&quot;;</span><br><span class="line">+-------------------------+----------+</span><br><span class="line">| Variable_name           | Value    |</span><br><span class="line">+-------------------------+----------+</span><br><span class="line">| Qcache_free_blocks      | 1        |</span><br><span class="line">| Qcache_free_memory      | 16760152 |</span><br><span class="line">| Qcache_hits             | 0        |</span><br><span class="line">| Qcache_inserts          | 0        |</span><br><span class="line">| Qcache_lowmem_prunes    | 0        |</span><br><span class="line">| Qcache_not_cached       | 19860231 |</span><br><span class="line">| Qcache_queries_in_cache | 0        |</span><br><span class="line">| Qcache_total_blocks     | 1        |</span><br><span class="line">+-------------------------+----------+</span><br><span class="line">8 rows in set (0.21 sec)</span><br></pre></td></tr></table></figure>其中，如果Qcache_free_blocks大致等于Qcache_total_blocks/2，说明碎片非常严重<br>如果Qcache_lowmem_prunes的值正在增加，并且有大量的自由块，表示碎片导致查询正在被从缓存中永久删除</li></ul><p>*<em>缓存碎片率 = Qcache_free_block/Qcache_total_blocks <em>100%</em></em>如果查询缓存碎片率都超过20%，可以使用<code>FLUSH QUERY CACHE</code>整理缓存碎片</p><p>*<em>缓存利用率 = （query_cache_size - Qcache_free_memory）/ query_cache_size *100% *</em><br>查询缓存利用率低于25%，表明query_cache_size值设置过大，可以适当减小；<br>查询利用率在80%以上，并且Qcache_lowmem_prunes &gt;50，表明query_cache_size值太小或者碎片太多</p><ul><li>thread_cache_size<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;thread%&quot;;</span><br><span class="line">+-------------------+---------------------------+</span><br><span class="line">| Variable_name     | Value                     |</span><br><span class="line">+-------------------+---------------------------+</span><br><span class="line">| thread_cache_size | 32                        |</span><br><span class="line">| thread_handling   | one-thread-per-connection |</span><br><span class="line">| thread_stack      | 262144                    |</span><br><span class="line">+-------------------+---------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>缓存在Cache中的线程数量</li></ul><h4 id="连接数"><a href="#连接数" class="headerlink" title="连接数"></a>连接数</h4><ul><li><p>DB已连接线程数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like &#39;Connections&#39;;</span><br><span class="line">+---------------+--------+</span><br><span class="line">| Variable_name | Value  |</span><br><span class="line">+---------------+--------+</span><br><span class="line">| Connections   | 245884 |</span><br><span class="line">+---------------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p>当前连接线程状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like &#39;%thread%&#39;;</span><br><span class="line">+------------------------------------------+-------+</span><br><span class="line">| Variable_name                            | Value |</span><br><span class="line">+------------------------------------------+-------+</span><br><span class="line">| Delayed_insert_threads                   | 0     |</span><br><span class="line">| Performance_schema_thread_classes_lost   | 0     |</span><br><span class="line">| Performance_schema_thread_instances_lost | 0     |</span><br><span class="line">| Slow_launch_threads                      | 0     |</span><br><span class="line">| Threads_cached                           | 18    |</span><br><span class="line">| Threads_connected                        | 9     |</span><br><span class="line">| Threads_created                          | 27    |</span><br><span class="line">| Threads_running                          | 1     |</span><br><span class="line">+------------------------------------------+-------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p>服务器允许最大连接数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;max_connections&#39;;</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| Variable_name   | Value |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| max_connections | 151   |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>一般500 ~ 800比较合适</p></li><li><p>服务器响应的最大连接数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;Max_used_connections&#39;;</span><br><span class="line">+----------------------+-------+</span><br><span class="line">| Variable_name        | Value |</span><br><span class="line">+----------------------+-------+</span><br><span class="line">| Max_used_connections | 27    |</span><br><span class="line">+----------------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li></ul><p>**Max_used_connections/max_connections &lt;= 85%**比较理想</p><ul><li>连接队列长度<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;back_log&#39;;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| back_log      | 80    |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>类似于线程队列，当无法响应请求时，就让线程排队；值越小越好。</li></ul><h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><ul><li>索引缓存大小<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;key_buffer_size&#39;;</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| key_buffer_size | 33554432 |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">1 row in set (0.00 sec</span><br></pre></td></tr></table></figure></li></ul><p>*<em>连接缓存命中率Threads_Cache_Hit = (Connections - Threads_created)/Connections</em>100%**建议90%左右甚至更高</p><ul><li>索引缓存未命中率<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;key_read%&#39;;</span><br><span class="line">+-------------------+-------+</span><br><span class="line">| Variable_name     | Value |</span><br><span class="line">+-------------------+-------+</span><br><span class="line">| Key_read_requests | 28    |</span><br><span class="line">| Key_reads         | 10    |</span><br><span class="line">+-------------------+-------+</span><br><span class="line">2 rows in set (0.10 sec)</span><br></pre></td></tr></table></figure></li></ul><p>*<em>索引缓存未命中率key_cache_miss_rate = Key_reads/Key_read_requests <em>100%</em></em><br>1%即100个索引中有一个在缓存中找不到，要直接从硬盘读取;建议<code>小于0.1%</code></p><ul><li>索引缓存命中率<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;key_%&#39;;</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| Variable_name          | Value |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| Key_blocks_not_flushed | 0     |</span><br><span class="line">| Key_blocks_unused      | 26785 |</span><br><span class="line">| Key_blocks_used        | 7     |</span><br><span class="line">| Key_read_requests      | 28    |</span><br><span class="line">| Key_reads              | 10    |</span><br><span class="line">| Key_write_requests     | 2     |</span><br><span class="line">| Key_writes             | 2     |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li></ul><p><strong>key_buffer_read_hits = (1-Key_reads/Key_read_requests) *100%**<br>**key_buffer_write_hits = (1-Key_writes/Key_write_requests)*100%</strong><br>越大越好</p><ul><li>索引读取统计<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;key_blocks_u%&#39;;</span><br><span class="line">+-------------------+-------+</span><br><span class="line">| Variable_name     | Value |</span><br><span class="line">+-------------------+-------+</span><br><span class="line">| Key_blocks_unused | 26785 |</span><br><span class="line">| Key_blocks_used   | 7     |</span><br><span class="line">+-------------------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>Key_blocks_unused表示未使用的缓存簇（blocks）数，Key_blocks_used表示曾经用到的最大的blocks数，如果缓存都用到了，那么要么增加key_buffer_size，要么就是过度索引把缓存占满了。<br>比较理想的情况：</li></ul><p>*<em>Key_blocks_used/(Key_blocks_unused + Key_blocks_used) <em>100% ≈ 80%</em></em></p><h4 id="表"><a href="#表" class="headerlink" title="表"></a>表</h4><ul><li>临时表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;created_tmp%&#39;;</span><br><span class="line">+-------------------------+--------+</span><br><span class="line">| Variable_name           | Value  |</span><br><span class="line">+-------------------------+--------+</span><br><span class="line">| Created_tmp_disk_tables | 3054   |</span><br><span class="line">| Created_tmp_files       | 7      |</span><br><span class="line">| Created_tmp_tables      | 624084 |</span><br><span class="line">+-------------------------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>临时表比较大无法在内存中完成时就不得不使用磁盘文件。如果Created_tmp_tables非常大，则可能是系统中排序操作过多，或者表连接方式不是很优化。如果Created_tmp_disk_tables和Created_tmp_tables的比率过高，如超过10%，则需要考虑tmp_table_size这个系统参数的值是都设置的足够大。<br>参考值： <strong>Created_tmp_disk_tables/Created_tmp_tables &lt; 5%</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables where Variable_name in (&#39;tmp_table_size&#39;, &#39;max_heap_table_size&#39;);</span><br><span class="line">+---------------------+----------+</span><br><span class="line">| Variable_name       | Value    |</span><br><span class="line">+---------------------+----------+</span><br><span class="line">| max_heap_table_size | 33554432 |</span><br><span class="line">| tmp_table_size      | 33554432 |</span><br><span class="line">+---------------------+----------+</span><br><span class="line">2 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><p>MySQL规定的内部内存临时表的最大值，每个线程都要分配。（实际起限制作用的是tmp_table_size和max_heap_table_size的最小值。）如果内存临时表超出了限制，MySQL就会自动地把它转化为基于磁盘的MyISAM表，存储在指定的tmpdir目录下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;tmpdir&quot;;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| tmpdir        | &#x2F;tmp  |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure><ul><li>表扫描情况<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;handler_read%&#39;;</span><br><span class="line">+-----------------------+----------+</span><br><span class="line">| Variable_name         | Value    |</span><br><span class="line">+-----------------------+----------+</span><br><span class="line">| Handler_read_first    | 9357279  |</span><br><span class="line">| Handler_read_key      | 77387871 |</span><br><span class="line">| Handler_read_last     | 121      |</span><br><span class="line">| Handler_read_next     | 69589828 |</span><br><span class="line">| Handler_read_prev     | 104      |</span><br><span class="line">| Handler_read_rnd      | 531042   |</span><br><span class="line">| Handler_read_rnd_next | 45348670 |</span><br><span class="line">+-----------------------+----------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &#39;com_select&#39;;</span><br><span class="line">+---------------+----------+</span><br><span class="line">| Variable_name | Value    |</span><br><span class="line">+---------------+----------+</span><br><span class="line">| Com_select    | 19894899 |</span><br><span class="line">+---------------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li></ul><p><strong>表扫描率 = Handler_read_rnd_next /Com_select</strong><br>如果表扫描率超过4000，说明进行了太多表扫描，可能是索引没有建好；</p><h3 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h3><h4 id="jps"><a href="#jps" class="headerlink" title="jps"></a>jps</h4><p>直接运行命令，返回java进程号，参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-l： 返回java进程全路径 </span><br><span class="line">-q： 仅显示进程号</span><br><span class="line">-v： 返回JVM参数，可以查看堆大小</span><br></pre></td></tr></table></figure><h4 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h4><p>用的最多</p><ul><li>查看运行情况<br>首先通过<code>jps</code>获取进程号，再使用<code>jstat</code>获取JVM中加载的累的数据和size<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# jps</span><br><span class="line">15649 Gtest.0-y-1.1.5.jar</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# jstat -class -h5  15649 1000</span><br><span class="line">Loaded  Bytes  Unloaded  Bytes     Time   </span><br><span class="line"> 11654 21472.7        0     0.0       4.21</span><br><span class="line"> 11654 21472.7        0     0.0       4.21</span><br><span class="line"> 11654 21472.7        0     0.0       4.21</span><br><span class="line"> 11654 21472.7        0     0.0       4.21</span><br><span class="line"> 11654 21472.7        0     0.0       4.21</span><br></pre></td></tr></table></figure>每1秒统计一次，每统计5次显示一次表头</li></ul><p>字段含义：</p><table><thead><tr><th>Item</th><th>含义</th></tr></thead><tbody><tr><td>Loaded</td><td>加载类的数目</td></tr><tr><td>Bytes</td><td>加载类的Size，单位Bytes</td></tr><tr><td>Unloaded</td><td>卸载类的数量</td></tr><tr><td>Bytes</td><td>卸载类的Size，单位Bytes</td></tr><tr><td>Time</td><td>加载和卸载类花费的时间</td></tr></tbody></table><ul><li>jstat 所有选项说明<br>更详细可以<code>man jstat</code>查看，所有选项及对应的参数说明</li></ul><table><thead><tr><th>Item</th><th>含义</th></tr></thead><tbody><tr><td>class</td><td>查看类加载情况的统计</td></tr><tr><td>compiler</td><td>查看HotSpot中即使编译器编译情况的统计</td></tr><tr><td>gc</td><td>用于查看JVM中堆的垃圾回收情况统计</td></tr><tr><td>gccapacity</td><td>查看新生代、老年代及元空间情况</td></tr><tr><td>gccause</td><td>最后一次及当前正在垃圾回收的原因</td></tr><tr><td>gcnew</td><td>查看新生代垃圾回收情况</td></tr><tr><td>gcnewcapacity</td><td>查看新生代存储容量情况</td></tr><tr><td>gcold</td><td>查看老年代及持久代发生GC的情况</td></tr><tr><td>gcoldcapacity</td><td>查看老年代容量</td></tr><tr><td>gcmetacapacity</td><td>元空间容量</td></tr><tr><td>gcutil</td><td>GC统计</td></tr></tbody></table><ul><li>jstat gccapacity</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# jstat -gccapacity 15649</span><br><span class="line"> NGCMN    NGCMX     NGC     S0C   S1C       EC      OGCMN      OGCMX       OGC         OC       MCMN     MCMX      MC     CCSMN    CCSMX     CCSC    YGC    FGC </span><br><span class="line"> 84992.0 1355776.0 688640.0 8192.0 20992.0 640512.0   171008.0  2711552.0   201728.0   201728.0      0.0 1105920.0  65280.0      0.0 1048576.0   8192.0     14     3</span><br></pre></td></tr></table></figure><p>字段说明：</p><table><thead><tr><th>Item</th><th>说明</th></tr></thead><tbody><tr><td>NGCMN</td><td>新生代最小容量（KB）</td></tr><tr><td>NGCMX</td><td>新生代最大容量(KB)</td></tr><tr><td>NGC</td><td>新生代当前容量(KB)</td></tr><tr><td>S0C</td><td>当前幸存者一区（survivor）容量(KB)</td></tr><tr><td>S1C</td><td>当前幸存者二区（survivor）容量(KB)</td></tr><tr><td>EC</td><td>当前伊甸园（eden）容量(KB)</td></tr><tr><td>OGCMN</td><td>老年代初始化大小(KB)</td></tr><tr><td>OGCMX</td><td>老年代最大容量(KB)</td></tr><tr><td>OGC</td><td>老年代当前容量(KB) Current old generation capacity (kB)</td></tr><tr><td>OC</td><td>old区当前容量（KB） Current old space capacity (kB)</td></tr><tr><td>MCMN</td><td>最小元空间容量（kB）</td></tr><tr><td>MCMX</td><td>最大元空间容量（kB）</td></tr><tr><td>MC</td><td>元空间容量（kB）</td></tr><tr><td>CCSMN</td><td>压缩类空间最小容量（kB）</td></tr><tr><td>CCSMX</td><td>压缩类空间最大容量（kB）</td></tr><tr><td>CCSC</td><td>压缩类空间容量（kB）</td></tr><tr><td>YGC</td><td>young GC次数</td></tr><tr><td>FGC</td><td>Full GC次数</td></tr></tbody></table><ul><li>jstat gcutil</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# jstat -gcutil 15649</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   </span><br><span class="line"> 99.22   0.00  81.74  21.00  95.96  93.63     14    0.161     3    0.186    0.347</span><br></pre></td></tr></table></figure><p>字段说明：</p><table><thead><tr><th>Item</th><th>含义</th></tr></thead><tbody><tr><td>S0</td><td>幸存者一区已使用的容量百分比</td></tr><tr><td>S1</td><td>幸存者二区已使用的容量百分比</td></tr><tr><td>E</td><td>伊甸园已使用的容量百分比</td></tr><tr><td>O</td><td>老年代已使用的容量百分比</td></tr><tr><td>M</td><td>元空间已使用的容量百分比</td></tr><tr><td>CCS</td><td>压缩类空间利用率百分比</td></tr><tr><td>YGC</td><td>Young GC次数</td></tr><tr><td>YGCT</td><td>JVM启动到采样时，Young GC用时（s）</td></tr><tr><td>FGC</td><td>Full GC次数</td></tr><tr><td>FGCT</td><td>JVM启动到采样时，Full GC用时（s）</td></tr><tr><td>GCT</td><td>GC总时间</td></tr></tbody></table><h4 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a>jmap</h4><p>jmap我知道的作用，就是dump下堆快照，再用工具分析</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmap -dump:live,format&#x3D;b,file&#x3D;dump.hprof PID</span><br></pre></td></tr></table></figure><p>其他用法：</p><ul><li><p>jmap分析jvm内存<br><code>jmap -heap pidOP</code></p></li><li><p>打印当前java堆活跃的各个对象的数量、大小<br><code>jmap -histo:live 16102 | head -10</code></p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[C is a char[]</span><br><span class="line">[S is a short[]</span><br><span class="line">[I is a int[]</span><br><span class="line">[B is a byte[]</span><br><span class="line">[[I is a int[][]</span><br></pre></td></tr></table></figure><ul><li>打印等待回收的对象信息<br><code>jmap -finalizerinfo  pid</code></li></ul><p>dump快照打印下来之后，传到本地，可以使用Jsisualvm或者<code>MemoryAnalyze</code>（mat）打开</p><blockquote><p><a href="https://pan.baidu.com/s/159QUTj5OKKi7jvtPIlSIvA">MemoryAnalyze</a></p></blockquote><p>提取码：t4yy</p><h4 id="jstack"><a href="#jstack" class="headerlink" title="jstack"></a>jstack</h4><p>步骤：</p><ol><li><p>top -c   P（找最耗CPU进程拿pid）    4209</p></li><li><p>top -Hp 4209    P (找最耗CPU线程，拿pid)     9890</p></li><li><p>printf “%x” 9890    （转换为16进制）</p></li><li><p>jstack 4209 | grep 26a2 -C5 –color</p></li></ol><p>以上，就是整理的一点监控相关，配合以下几篇，性能测试的性能问题定位，差不多入门：</p><blockquote><p><a href="https://tokyle.com/2018/05/16/%E3%80%90%E8%BD%AC%E3%80%91windows%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87/#">windows性能监控指标</a><br><a href="https://tokyle.com/2018/08/29/%E3%80%90%E8%BD%AC%E3%80%91Linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/">Linux性能监控与分析</a><br><a href="https://tokyle.com/2018/10/17/Linux%E5%AE%9A%E4%BD%8D%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B/#">Linux定位最耗CPU的线程</a><br><a href="https://tokyle.com/2018/11/02/JVM%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/">JVM内存性能问题定位</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>性能测试工具nGrinder试用</title>
      <link href="2019/06/25/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7nGrinder%E8%AF%95%E7%94%A8/"/>
      <url>2019/06/25/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7nGrinder%E8%AF%95%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>性能测试工具nGrinder试用</p><a id="more"></a><p>之前就有听过这工具，但本着工具在精不在多原则，一直没用过，最近看市场上，苏州有家公司把这个列进了要求，就试用了下</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>这边是直接使用的docker拉的镜像安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ngrinder&#x2F;controller</span><br></pre></td></tr></table></figure><p>直接拉了最新版本镜像，然后起容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name ngrinder -d -p 8099:80 ngrinder&#x2F;controller</span><br></pre></td></tr></table></figure><p>嗯，起起来了，不出所料，后续起agent时候挂了，端口没开：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR agent controller: Error while connecting to agent controller server at &#x2F;192.168.0.97:16001</span><br></pre></td></tr></table></figure><p>原因很简单，起容器时候，没暴露16001端口，省略后续的其他踩坑，直接把要用的端口都开了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --name ngrinder -d -p 8099:80 \</span><br><span class="line"> -p 16001:16001 \</span><br><span class="line"> -p 12000-12009:12000-12009 \</span><br><span class="line"> ngrinder&#x2F;controller</span><br></pre></td></tr></table></figure><p>查看状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 拿containerid</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"># 看日志</span><br><span class="line">docker logs -f --tail&#x3D;300 containerid</span><br></pre></td></tr></table></figure><p>起好之后，浏览器打开：<code>http://192.168.0.97:8099</code>，默认账密<code>admin/admin</code><br>界面长这样：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4eb9syiw4j20s40hh41l.jpg" alt="主界面"></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在<code>帮助</code>旁边的<code>admin</code>下，点击下载代理和下载监控，传到服务器上，解压完起代理和监控（linux下直接起shell脚本）<br>先创建<code>脚本</code>,再创建<code>性能测试</code></p><p>创建脚本填写对应参数即可：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ebe1j89ej20ov0hmmxi.jpg" alt="创建脚本"></p><p>测试配置页面也很简单，都是一些通用的配置，代理数量，vusers，启动延时配置，运行时间，运行次数等<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ebfx4si4j20t30ml3zm.jpg" alt="测试配置"></p><p>配置完成，点保存并运行即可</p><p>测试报告：<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ebhu40qej20t00m0t9u.jpg" alt="测试报告"><br>其中有日志，也可以点<code>详细测试结果</code>查看更详细的数据<br><img src="http://ww1.sinaimg.cn/mw690/a025e134gy1g4ebkhbyh9j20rx0ofq4b.jpg" alt="详细报告"><br>支持下载CSV报告查看</p><p>以上就是nGrinder的一次，总的印象，工具还行，报告很直观，但是对于编码可能要求（看了下，Jython编写的，基本就是python的request框架），语言试用Groovy和Jython;内置了SVN，团队之间脚本分享很方便。</p><p>实在不想手持身份证用七牛云，用了新浪的图床，很可能图会挂。。见谅。。</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nGrinder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python字符串实践</title>
      <link href="2019/06/25/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AE%9E%E8%B7%B5/"/>
      <url>2019/06/25/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<p>python字符串实践</p><a id="more"></a><p>收银小票打印尝试</p><h3 id="python字符串对齐方式"><a href="#python字符串对齐方式" class="headerlink" title="python字符串对齐方式"></a>python字符串对齐方式</h3><p>首先，看几个命令的效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from math import pi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&quot;&#123;0:&lt;10.2f&#125;\n&#123;0:^10.2f&#125;\n&#123;0:&gt;10.2f&#125;&quot;.format(pi))</span><br><span class="line">print(&#39;&#123;&#125;&#39;.format(pi))</span><br><span class="line">print(&#39;&#123;0&#125;&#39;.format(pi))</span><br><span class="line">print(&#39;&#123;&#123;:&#123;&#125;&#125;&#125;&#39;.format(10))</span><br><span class="line">print(&#39;&#123;:10.2f&#125;&#39;.format(pi))</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">3.14      </span><br><span class="line">   3.14   </span><br><span class="line">      3.14</span><br><span class="line">3.141592653589793</span><br><span class="line">3.141592653589793</span><br><span class="line">&#123;:10&#125;</span><br><span class="line">      3.14</span><br></pre></td></tr></table></figure><h3 id="收银小票尝试："><a href="#收银小票尝试：" class="headerlink" title="收银小票尝试："></a>收银小票尝试：</h3><p>实现方式有点low，写的有点乱。。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;6&#x2F;20 16:06</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># from math import pi</span><br><span class="line"></span><br><span class="line"># print(&quot;&#123;0:&lt;10.2f&#125;\n&#123;0:^10.2f&#125;\n&#123;0:&gt;10.2f&#125;&quot;.format(pi))</span><br><span class="line"># print(&#39;&#123;&#125;&#39;.format(pi))</span><br><span class="line"># print(&#39;&#123;0&#125;&#39;.format(pi))</span><br><span class="line"># print(&#39;&#123;&#123;:&#123;&#125;&#125;&#125;&#39;.format(10))</span><br><span class="line"># print(&#39;&#123;:10.2f&#125;&#39;.format(pi))</span><br><span class="line"></span><br><span class="line">def fruit_price(fruit):</span><br><span class="line">    if fruit &#x3D;&#x3D; &#39;Watermelon&#39;:</span><br><span class="line">        return 1.6</span><br><span class="line">    elif fruit &#x3D;&#x3D; &#39;Apple&#39;:</span><br><span class="line">        return 10</span><br><span class="line">    elif fruit &#x3D;&#x3D; &#39;Peach&#39;:</span><br><span class="line">        return 3.3</span><br><span class="line">    elif fruit &#x3D;&#x3D; &#39;Pear&#39;:</span><br><span class="line">        return 2</span><br><span class="line">    else:</span><br><span class="line">        return None</span><br><span class="line"></span><br><span class="line">def enter_price():</span><br><span class="line">    price &#x3D; []</span><br><span class="line">    weights &#x3D; []</span><br><span class="line">    fruits &#x3D; []</span><br><span class="line">    num &#x3D; 0</span><br><span class="line">    while True:</span><br><span class="line">        num +&#x3D; 1</span><br><span class="line">        fruit &#x3D; input(&#39;Enter the fruit: &#39;)</span><br><span class="line">        weight &#x3D; input(&#39;Enter the weight: &#39;)</span><br><span class="line">        fruits.append(fruit)</span><br><span class="line">        weights.append(weight)</span><br><span class="line">        a &#x3D; fruit_price(fruit)</span><br><span class="line">        price.append(a)</span><br><span class="line">        if fruit &#x3D;&#x3D; &#39;q&#39; or weight &#x3D;&#x3D; &#39;q&#39;:</span><br><span class="line">            break</span><br><span class="line">    num -&#x3D; 1</span><br><span class="line">    fruits.remove(fruits[-1])</span><br><span class="line">    price.remove(price[-1])</span><br><span class="line">    weights.remove(weights[-1])</span><br><span class="line"></span><br><span class="line">    return [num,fruits,weights,price]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fruit_res &#x3D; enter_price()</span><br><span class="line">print(fruit_res)</span><br><span class="line"></span><br><span class="line"># 设置小票宽度</span><br><span class="line">width &#x3D; int(input(&#39;Please enter your width: &#39;))</span><br><span class="line">price_width &#x3D; 10</span><br><span class="line">num_width &#x3D; 10</span><br><span class="line">item_width &#x3D; width - price_width - num_width</span><br><span class="line"></span><br><span class="line"># 设置小票表头格式</span><br><span class="line">header_fmt &#x3D; &#39;&#123;&#123;:&#123;&#125;&#125;&#125;&#123;&#123;:^&#123;&#125;&#125;&#125;&#123;&#123;:&gt;&#123;&#125;&#125;&#125;&#39;.format(item_width, num_width, price_width)</span><br><span class="line">fmt &#x3D; &#39;&#123;&#123;:&#123;&#125;&#125;&#125;&#123;&#123;:^&#123;&#125;&#125;&#125;&#123;&#123;:&gt;&#123;&#125;.2f&#125;&#125;&#39;.format(item_width, num_width, price_width)</span><br><span class="line"></span><br><span class="line">print(&#39;*&#39;* width)</span><br><span class="line">print(&quot;Here&#39;s Your Ticket&quot;)</span><br><span class="line"></span><br><span class="line">print(&#39;&#x3D;&#39;* width)</span><br><span class="line">print(header_fmt.format(&#39;Item&#39;, &#39;Num&#39;, &#39;Price&#39;))</span><br><span class="line">print(&#39;-&#39; * width)</span><br><span class="line"></span><br><span class="line"># 循环打印水果，单价，数量</span><br><span class="line">num &#x3D; fruit_res[0]</span><br><span class="line">i &#x3D; 0</span><br><span class="line">prices &#x3D; []</span><br><span class="line">for i in range(int(num)):</span><br><span class="line">    prices.append(int(fruit_res[2][i]) * float(fruit_res[3][i]))</span><br><span class="line">    print(fmt.format(fruit_res[1][i], fruit_res[2][i], fruit_res[3][i]))</span><br><span class="line">    i +&#x3D; 1</span><br><span class="line"></span><br><span class="line">print(&#39;-&#39; * width)</span><br><span class="line"></span><br><span class="line"># 打印总价</span><br><span class="line">Sum &#x3D; sum(prices)</span><br><span class="line">item2_width &#x3D; width - price_width</span><br><span class="line">foot_fmt &#x3D; &#39;&#123;&#123;:&lt;&#123;&#125;&#125;&#125;&#123;&#123;:&gt;&#123;&#125;.2f&#125;&#125;&#39;.format(item2_width, price_width)</span><br><span class="line">print(foot_fmt.format(&#39;Summary&#39;, Sum))</span><br><span class="line">print(&#39;-&#39; * width)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Enter the fruit: Watermelon</span><br><span class="line">Enter the weight: 10</span><br><span class="line">Enter the fruit: Apple</span><br><span class="line">Enter the weight: 20</span><br><span class="line">Enter the fruit: Peach</span><br><span class="line">Enter the weight: 30</span><br><span class="line">Enter the fruit: q</span><br><span class="line">Enter the weight: q</span><br><span class="line">[3, [&#39;Watermelon&#39;, &#39;Apple&#39;, &#39;Peach&#39;], [&#39;10&#39;, &#39;20&#39;, &#39;30&#39;], [1.6, 10, 3.3]]</span><br><span class="line">Please enter your width: 45</span><br><span class="line">*********************************************</span><br><span class="line">Here&#39;s Your Ticket</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Item                        Num         Price</span><br><span class="line">---------------------------------------------</span><br><span class="line">Watermelon                   10          1.60</span><br><span class="line">Apple                        20         10.00</span><br><span class="line">Peach                        30          3.30</span><br><span class="line">---------------------------------------------</span><br><span class="line">Summary                                315.00</span><br><span class="line">---------------------------------------------</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p>有空再改进。。</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>敏捷测试与自动化</title>
      <link href="2019/06/23/%E6%95%8F%E6%8D%B7%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
      <url>2019/06/23/%E6%95%8F%E6%8D%B7%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>敏捷测试与自动化</p><a id="more"></a><h3 id="敏捷自动化问题"><a href="#敏捷自动化问题" class="headerlink" title="敏捷自动化问题"></a>敏捷自动化问题</h3><p>最近看到一篇文章，讨论敏捷开发模式下的自动化实施问题，看到里面有很多值得好好想想的地方。</p><p>首先，在一个追求敏捷开发的团队中，很多时候，测试工作都是放在整个项目的最后一个环节，尤其是Android应用项目，多数情况下，会出现很多个版本一起上线，这个时候，作为测试的压力明显是非常大，工作量巨大，纯手工进行测试很可能会忙于应付需求，这个时候正式自动化回归最大效率化的时候，然后现状很可能是，自动化连手工都不如，需要半天甚至一天才能出测试结果，每次运行都是全流程，自动化测试报告也需要大量时间进行分析，这无疑是很失败的敏捷自动化实施。</p><p>很多团队，可能也有专人进行了很长时间的专职自动化设计，搭建，但是效果一直不理想，原因可能是：</p><ol><li><p>自动化人员与业务剥离，甚至不了解业务，所有用例需要业务功能测试人员提供；试想这样的情况下，自动化也不是纯框架设计，进行的也是涉及业务的自动化用例设计，那怎么可能设计出有效的自动化用例呢。</p></li><li><p>管理人员对于自动化预期过高，认为自动化测试可以实现所有的测试活动；自动化测试，说到底，也是在设计了断言的情况下进行验证，也就是已知结果的情况，很多时候，测试工作需要随机测试，暴力测试等等去发现很多非正常情况下可能出现的问题。</p></li><li><p>自动化测试没有专人，没有必要的时间和精力；有的公司可能实行的是固定测试开发团队进行自动化框架编辑搭建，后续的自动化用例是由产线的测试工程师进行编写维护；这样的做法，的确算是功能细分，但是有个前提，产线的测试有时间和精力去专门做自动化测试相关。很多团队有点搞笑，自动化用例让产线实施，并不给产线测试需要的时间去学习和练习自动化测试技能，最终的结果，可想而知。</p></li></ol><p>其实测试人员也都知道，产品交接时间点临近时，产品功能交付的优先级肯定是高于自动化实施，测试人员需要确保的是那些即将交付的产品功能，而不是确保产品功能正常的自动化测试用例。但是长此以往的不断将自动化测试实施优先级降低，一次次的迭代发布日期指定，只会将产线折腾的异常忙碌，烦躁。造成这种情况的原因，可能是迫于市场和客户压力，需要一次次的制定满足于市场的新功能，短时间铺开市场，解决客户问题，但是这样的一次次的追求快，仓促发布功能，最终真的是在满足市场吗？守业更比创业难，不要等到最后市场诚信低至谷底时候才想起来，当然，追求快速IPO分钱走人就当没说。</p><p>插一句：敏捷工作方式的目的是以最小幅度增长的方式发布可供用户使用的功能，并且得到用户的即时反馈。</p><h3 id="可能的解决办法"><a href="#可能的解决办法" class="headerlink" title="可能的解决办法"></a>可能的解决办法</h3><ol><li><p>设定合理的预期，想清楚，为什么需要自动化，需要自动化做什么，怎么实施可以帮助现在的团队。有个很扯淡的想法，实施自动化是因为不想做手工。。。</p></li><li><p>给自动化分配专用的资源，公司需要关注的不应该仅仅是测试开发需要专门的资源，产线的自动化用例编写维护人员更需要专门的时间和精力去学习，练习，维护自动化，整天疲于应对功能迭代压力，最终结果是自动化夭折。</p></li><li><p>提高自动化关注度和优先级，这个需要在公司层面，宣传论证实施自动化的价值，试问如果团队都不知道自动化为何物，就提出要花大时间，聘请专员进行自动化，是不是有点扯。</p></li><li><p>将自动化测试看做软件研发对待，这点是对自动化测试工程师本身来说的，实施自动化测试之前，需要和产品研发一样，需求分析，方案论证，概要设计，详细设计等。</p></li><li><p>合理制定目标，也是针对自动化实施人员来说的，在经验没有那么丰富，或者时间没有那么充裕的情况下，是是不是可以考虑首先进行的是接口的自动化，而不是直接UI。</p></li><li><p>持续学习，既然敏捷工作模式下，产品都是一些快速迭代的过程，那身为自动化工程师的你，是不是应该为了适应不断增加的需求，去快递学习。例如自动化工具后续直接使用docker镜像化，自动化实施配合CI，构建完成直接Jenkins调度，无需手工执行，自动化实施过程中，关注测试右移，实施APM监控等等。</p></li></ol><p>以上是看到的和自己的一点点想法，希望国内广大的测试同胞们可以不被自动化所累，知道自己想要的是什么，其实在我看来，追求系统的底层实现，开发语言的基本语法，高效实施等，才是更有效的方式，一味的追求工具，追求框架，很可能会迷失自己，毕竟做到后面，自动化也成了维护代码。</p><p>愿测试可以被温柔以待</p><p>突然想到个毫无关系的一句话：<code>少年不知画中意，归来已成画中人</code></p>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次Android安全问题定位</title>
      <link href="2019/06/21/%E4%B8%80%E6%AC%A1Android%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/"/>
      <url>2019/06/21/%E4%B8%80%E6%AC%A1Android%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<p>一次Android安全问题定位</p><a id="more"></a><p>有个账密明文存库问题，<code>default.realm</code>存了明文的用户名和密码</p><h3 id="文件获取"><a href="#文件获取" class="headerlink" title="文件获取"></a>文件获取</h3><p>首先，很明显，需要root手机了，正常的权限，根本进不去<code>/data/data</code>文件夹</p><p>root完之后开始</p><p><code>adb devices</code>，设备已连接上</p><p><code>su</code>切换用户，进入shell</p><p>赋权限：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 &#x2F;data</span><br><span class="line">chmod 777 &#x2F;data&#x2F;data</span><br><span class="line">chmod -R 777 &#x2F;data&#x2F;data&#x2F;com.test.package</span><br></pre></td></tr></table></figure><p><code>find / -name &quot;default.realm&quot;</code>查找该数据库文件</p><p><code>cd /data/data/com.test.package/files</code>进入数据库文件夹</p><p><code>cp default.realm /sdcard</code>将数据库文件拷贝到外部存储器SD卡（方便拉倒本地）</p><p><code>exit</code><br>退出adb shell</p><p><code>adb pull /sdcard/default.realm E:/LOGS</code> 将SD卡里数据库文件拉到本地</p><h3 id="文件查看"><a href="#文件查看" class="headerlink" title="文件查看"></a>文件查看</h3><p>没那本事在windows下看<code>.realm</code>，找个台mac，装了个<code>Realm Browser</code>打开导出的<code>default.realm</code></p><p>看到在user表，明文的链接，用户名，密码。。。<br>(android sdk的platform_tool中有个monitor.bat工具，可以看见android的文件系统，可能不能深层次进入，还是命令行方式靠谱)</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Service Mesh基础知识</title>
      <link href="2019/06/21/Service-Mesh%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>2019/06/21/Service-Mesh%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<p>Service Mesh基础知识</p><a id="more"></a><p>微服务大噪一时，可以说是最火的后端架构，微服务架构将原来的单体应用进行服务拆分，做成一个个独立的服务应用，各个服务各司其职，彼此独立，各个服务甚至不需要用同样的编程语言，更方便团队协作。</p><p>微服务包含一些基本组件，服务发现，服务注册，鉴权，熔断降级等。由于微服务是将单体拆分为独立应用，当应用越来越大，微服务越来越多，管理起来也就会越来越麻烦。一套微服务环境，链路追踪，负载均衡，安全配置，流量管理等等，可能就会耗费大量时间去维护。针对微服务不断壮大，微服务管理的相关问题，出现了新的微服务框架<code>Service Mesh</code>(服务网格)</p><h3 id="Service-Mesh"><a href="#Service-Mesh" class="headerlink" title="Service Mesh"></a>Service Mesh</h3><p>在解释service mesh之前，先看看nginx的基本概念</p><p>nginx有几大功能，其中正向代理和反向代理，应该都很熟悉。本来最基本的架构是A和B需要进行通信，A和B可以直接相互传输，买房子为例，买家和卖家直接交易。这样的架构有个问题，A和B传输之间的信息，旁人无法知道，传输状态外界也无法监控，传输的数据包如果太大把带宽占满，外界也无法知晓，这样的情况下，就有了中间加一层，代理,C。</p><p>A和B进行通信，会经过C，A向C发起通知，要和B通信，消息给C，C转给B。C就成了中间人，也就是代理，说两个日常常用但可能没多想的例子：</p><ol><li>国内万里长城的存在，想要见识外部世界，就需要VPN，俗称的翻墙。技术实现其实很简单，VPN其实是搭建在一台可以直接访问外部网站（例如IG）的服务器上的正向代理服务，可能在日本，可能在美国等；本地挂VPN翻墙，其实就是用客户端去访问正向代理服务，再由服务进行转发，达到大陆也可以访问外网的效果。这就是正向代理（Forward Proxy）</li><li>典型的nginx负载均衡，A访问C，C将A的请求，分发给下面的无数个B(B1,B2,B3,B4,B5…)。A其实压根不知道它是最终是在和B进行通信，A也根本不关心有多少个B，只要有C，和C进行通信，就能达到A和无数个B进行通信的效果，C就是反向代理。（Reverse Proxy）</li></ol><p>说完代理的例子，说说中间加这么一层有什么意义：</p><ol><li>拦截：原来A和B直接通信，没人能阻止，现在加了层这个，就可以防止员工上班时间看视频。。。</li><li>统计：既然A和B所有的通信都会经过代理，那么也就可以通过代理来统计网络传输中的数据信息</li><li>缓存：典型应用CDN，访问比较慢，直接将数据缓存到访问快的地方，通过这个地方进行访问，要快很多</li><li>分发：负载均衡</li><li>跳板：堡垒机<br>… …</li></ol><p>说完nginx的代理，说回service mesh，其实service mesh也就是类似于nginx的一个代理，可以看做是分布式微服务代理。在传统的代理模式下，代理一般是单独的代理服务器，所有请求先通过代理，再转发到实际的后端。service mesh中，代理是分布式的，常驻在服务身边（sidecar模式），每个服务可以理解成有两个部分，一个是原来的服务（service），一个是用于service mesh的代理（sidecar），sidecar之间相互连接，和彼此的服务彼此隔离，和传统的代理一样，流量也就是经过sidecar进行管理，所有的服务的sidecar进行连接，组成了mesh（网格）。</p><p>同时，传统的代理，基本是只基于网络流量，但是 Service Mesh 中，代理会知道整个集群的所有应用信息，并且额外添加了热更新、注入服务发现、降级熔断、认证授权、超时重试、日志监控等功能，让这些通用的功能不必每个应用都自己实现，放在代理中即可。换句话说，Service Mesh 中的代理对微服务中的应用做了定制化的改进。</p><p>有了service mesh，管理员只需要和代理层打交道，就能达到对整个微服务系统控制的效果。</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1g48rpbys10g21hc0tee81.gif" alt="Service Mesh原理"></p><h3 id="Istio"><a href="#Istio" class="headerlink" title="Istio"></a>Istio</h3><p>Istio其实就是Service Mesh架构的一种实现，来看看通过istio可以解决什么问题：<br>来自Istio网站：</p><ul><li>HTTP、gRPC、WebSocket和TCP流量的自动负载均衡。</li><li>通过丰富的路由规则、重试、故障转移和故障注入对流量行为进行细粒度控制。</li><li>支持访问控制、速率限制和配额的可拔插策略层和配置API。</li><li>自动指标、日志和集群内所有流量的跟踪，包括集群入口和出口。</li><li>通过集群中的服务之间的强身份断言来实现服务间的身份验证。</li></ul><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1g48ru7eqtng21hc0te7ip.gif" alt="Istio解决的问题"></p><p>以上内容均来自万能的互联网，由于自己目前对k8s理解还比较浅，对k8s的sidecar还只是理论的认知，Service Mesh和Istio以及Serviceless和knative当前也只是在理论阶段，本篇只是敲门，后面再慢慢入门。</p>]]></content>
      
      
      <categories>
          
          <category> cloud native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service Mesh </tag>
            
            <tag> Istio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pytest学习实践（二）</title>
      <link href="2019/06/19/pytest%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2019/06/19/pytest%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>pytest学习实践（二）</p><a id="more"></a><h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><p>pytest的断言就用的python最基本的assert</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import pytest</span><br><span class="line"></span><br><span class="line">def func(x):</span><br><span class="line">    return x + 1</span><br><span class="line"></span><br><span class="line">def test_func():</span><br><span class="line">    assert func(3) &#x3D;&#x3D; 5</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    pytest.main([&#39;-q&#39;])</span><br></pre></td></tr></table></figure><h3 id="异常捕获"><a href="#异常捕获" class="headerlink" title="异常捕获"></a>异常捕获</h3><p>用raises来捕获预期的异常</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import json</span><br><span class="line">import pytest</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">    filename &#x3D; &#39;package.json&#39;</span><br><span class="line">    with open(filename) as f_obj:</span><br><span class="line">        json.load(f_obj)</span><br><span class="line">    raise FileNotFoundError</span><br><span class="line"></span><br><span class="line">def test_func():</span><br><span class="line">    with pytest.raises(FileNotFoundError):</span><br><span class="line">        func()</span><br></pre></td></tr></table></figure><h3 id="多个类组成用例"><a href="#多个类组成用例" class="headerlink" title="多个类组成用例"></a>多个类组成用例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import pytest</span><br><span class="line"></span><br><span class="line">class TestClass():</span><br><span class="line">    def test_one(self):</span><br><span class="line">        x &#x3D; &quot;this&quot;</span><br><span class="line">        assert &#39;h&#39; in x</span><br><span class="line"></span><br><span class="line">    def test_two(self):</span><br><span class="line">        x &#x3D; &#39;hello&#39;</span><br><span class="line">        assert hasattr(x, &#39;check&#39;)</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    pytest.main([&#39;-q&#39;])</span><br></pre></td></tr></table></figure><p>只要函数以test_开头，都可以识别</p><h3 id="指定测试case"><a href="#指定测试case" class="headerlink" title="指定测试case"></a>指定测试case</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def test_one():</span><br><span class="line">    x &#x3D; &quot;this&quot;</span><br><span class="line">    assert &#39;h&#39; in x</span><br><span class="line"></span><br><span class="line">def test_two():</span><br><span class="line">    x &#x3D; &#39;hello&#39;</span><br><span class="line">    assert hasattr(x, &#39;check&#39;)</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    pytest.main([&#39;-q&#39;, &#39;test_2.py::test_one&#39;])</span><br></pre></td></tr></table></figure><p>但是这样的方式只能指定一个函数，如果需要执行多个，就有点麻烦</p><p>使用<code>pytest.mark</code>进行标记</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@pytest.mark.commit</span><br><span class="line">def test_one():</span><br><span class="line">    x &#x3D; &quot;this&quot;</span><br><span class="line">    assert &#39;h&#39; in x</span><br><span class="line"></span><br><span class="line">@pytest.mark.finished</span><br><span class="line">def test_two():</span><br><span class="line">    x &#x3D; &#39;hello&#39;</span><br><span class="line">    assert hasattr(x, &#39;check&#39;)</span><br><span class="line"></span><br><span class="line">@pytest.mark.finished</span><br><span class="line">def test_three():</span><br><span class="line">    assert 1 &#x3D;&#x3D; 2</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    pytest.main([&#39;-m&#39;, &#39;finished&#39;])</span><br><span class="line">    # os.system(&#39;pytest -m finished&#39;)</span><br></pre></td></tr></table></figure><p>使用mark进行标记，标记哪些需要执行，也支持：<code>pytest -m &quot;commit and finished&quot;</code></p><h3 id="跳过测试"><a href="#跳过测试" class="headerlink" title="跳过测试"></a>跳过测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@pytest.mark.skip</span><br><span class="line">def test_two():</span><br><span class="line">    x &#x3D; &#39;hello&#39;</span><br><span class="line">    assert hasattr(x, &#39;check&#39;)</span><br></pre></td></tr></table></figure><p>也支持<code>skipif</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@pytest.mark.skipif(sys.platform &#x3D;&#x3D; &quot;win32&quot;, reason&#x3D;&quot;not support win32&quot;)</span><br><span class="line">def test_four():</span><br><span class="line">    assert 1 &#x3D;&#x3D; 1</span><br></pre></td></tr></table></figure><h3 id="捕获遇见错误xfail"><a href="#捕获遇见错误xfail" class="headerlink" title="捕获遇见错误xfail"></a>捕获遇见错误xfail</h3><p>使用xfail来标记，期望该测试函数执行失败（执行失败，但又不想跳过）；配合配置文件<code>test.ini</code>，文件中指定标志位，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[pytest]</span><br><span class="line">xfail_strict&#x3D;true</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@pytest.mark.xfail(strict&#x3D;True)</span><br><span class="line">def test_five():</span><br><span class="line">    a &#x3D; id([&quot;1&quot;, &quot;2&quot;, &quot;3&quot;])</span><br><span class="line">    b &#x3D; id([1, 2, 3])</span><br><span class="line">    assert a &#x3D;&#x3D; b</span><br></pre></td></tr></table></figure><p>运行返回结果<code>x</code>表示<code>XFAIL</code>预见的失败；<code>X</code>表示<code>XPASS</code>预见的成果</p><p>也可以用<code>pytest --runxfail</code>强制执行标记xfail的用例</p><h3 id="参数化"><a href="#参数化" class="headerlink" title="参数化"></a>参数化</h3><p>pytest使用<code>pytest.mark.parametrize(argnames, argvalues)</code>进行参数化实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@pytest.mark.parametrize(&#39;passwd&#39;, [&#39;12345678909&#39;, &#39;sdsddewd&#39;])</span><br><span class="line">def test_six(passwd):</span><br><span class="line">    assert len(passwd) &gt;&#x3D; 10</span><br></pre></td></tr></table></figure><p>测试结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.F                                                                       [100%]</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; FAILURES &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">_____________________________ test_six[sdsddewd] ______________________________</span><br><span class="line"></span><br><span class="line">passwd &#x3D; &#39;sdsddewd&#39;</span><br><span class="line"></span><br><span class="line">    @pytest.mark.parametrize(&#39;passwd&#39;, [&#39;12345678909&#39;, &#39;sdsddewd&#39;])</span><br><span class="line">    def test_six(passwd):</span><br><span class="line">&gt;       assert len(passwd) &gt;&#x3D; 10</span><br><span class="line">E       AssertionError: assert 8 &gt;&#x3D; 10</span><br><span class="line">E        +  where 8 &#x3D; len(&#39;sdsddewd&#39;)</span><br><span class="line"></span><br><span class="line">test_2.py:31: AssertionError</span><br><span class="line">1 failed, 1 passed in 0.15 seconds</span><br></pre></td></tr></table></figure><h3 id="case重试"><a href="#case重试" class="headerlink" title="case重试"></a>case重试</h3><p>安装插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pytest-rerunfailures</span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    pytest.main([&#39;-s&#39;, &#39;-q&#39;, &#39;--reruns&#39;, &#39;3&#39;])</span><br><span class="line">    # os.system(&#39;pytest -s -q test_2.py --reruns 3&#39;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 failed, 1 warnings, 3 rerun in 0.13 seconds</span><br></pre></td></tr></table></figure><p>可以指定单个case重试</p><h3 id="多进程运行cases"><a href="#多进程运行cases" class="headerlink" title="多进程运行cases"></a>多进程运行cases</h3><p>安装插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pytest-xdist</span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    # pytest.main([&#39;-s&#39;, &#39;-n&#39;, &#39;3&#39;])</span><br><span class="line">    os.system(&#39;pytest -s -n 3 test_2.py&#39;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gw0 I &#x2F; gw1 I &#x2F; gw2 I</span><br><span class="line">gw0 [1] &#x2F; gw1 [1] &#x2F; gw2 [1]</span><br></pre></td></tr></table></figure><h3 id="生成测试报告（htmlReport）"><a href="#生成测试报告（htmlReport）" class="headerlink" title="生成测试报告（htmlReport）"></a>生成测试报告（htmlReport）</h3><p>安装插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pytest-html</span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    # pytest.main([&#39;--html&#x3D;report.html&#39;])</span><br><span class="line">    os.system(&#39;pytest  test_2.py --html&#x3D;report.html&#39;)</span><br></pre></td></tr></table></figure><p>报告很好看！</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pytest学习实践（一）</title>
      <link href="2019/06/19/pytest%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2019/06/19/pytest%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>pytest学习实践（一）</p><a id="more"></a><p>pytest是python中一个很好用的框架，主要特点：</p><ol><li>支持参数化（不用unittest一样接ddt）</li><li>支持简单单元测试及复杂功能测试，可以用来做selenium和appium，以及接口自动化（pytest+request）</li><li>众多第三方插件：pytest-html（报告）、pytest-selenium（集成selenium）、pytest-rerunfailures（失败重跑）等</li><li>测试用来skip和xfail处理</li><li>CI方便</li></ol><blockquote><p><a href="http://plugincompat.herokuapp.com/">pytest插件大全</a></p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytest</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>写一个简单的测试函数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line">def test_func1():</span><br><span class="line">    assert 1 &#x3D;&#x3D; 1</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    os.system(&#39;pytest&#39;)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">collected 1 item</span><br><span class="line"></span><br><span class="line">test_1.py .                                                              [100%]</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 1 passed in 0.06 seconds &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p>pytest以<code>.</code>表示测试成功，可以看一下测试失败：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line">def test_func1():</span><br><span class="line">    assert 1 &#x3D;&#x3D; 2</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    os.system(&#39;pytest&#39;)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">collected 1 item</span><br><span class="line"></span><br><span class="line">test_1.py F                                                              [100%]</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; FAILURES &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">_________________________________ test_func1 __________________________________</span><br><span class="line"></span><br><span class="line">    def test_func1():</span><br><span class="line">&gt;       assert 1 &#x3D;&#x3D; 2</span><br><span class="line">E       assert 1 &#x3D;&#x3D; 2</span><br><span class="line"></span><br><span class="line">test_1.py:5: AssertionError</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 1 failed in 0.11 seconds &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><p><code>F</code>表示运行失败</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker简单使用（六）</title>
      <link href="2019/06/14/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E5%85%AD%EF%BC%89/"/>
      <url>2019/06/14/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E5%85%AD%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>docker简单使用（六）</p><p>数据卷</p><a id="more"></a><p>数据卷的使用，类似于linux下的挂载。</p><p>数据卷是一个可供一个或多个容器使用的特殊目录，有以下特性：</p><ul><li>数据卷可以在容器间共享和重用</li><li>对数据卷的修改立刻生效</li><li>对数据卷的更新，不会影响到镜像</li><li>数据卷默认一直存在，即使容器被删除</li></ul><p>创建数据卷：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create test_vol</span><br></pre></td></tr></table></figure><p>查看数据卷：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mynexus]# docker volume ls | grep test</span><br><span class="line">local               test_vol</span><br></pre></td></tr></table></figure><p>查看数据卷详细信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mynexus]# docker volume inspect test_vol</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2019-06-14T14:08:45+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;test_vol&#x2F;_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;test_vol&quot;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>启动一个挂载数据卷的容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8077:80 --name web2 --mount source&#x3D;test_vol,target&#x3D;&#x2F;webapp nginx</span><br></pre></td></tr></table></figure><p>查看数据卷具体信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker inspect web2</span><br><span class="line"></span><br><span class="line"># 在Mounts节点</span><br><span class="line"> &quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,</span><br><span class="line">                &quot;Name&quot;: &quot;test_vol&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;test_vol&#x2F;_data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;&#x2F;webapp&quot;,</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;z&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><p>删除数据卷：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm test_vol</span><br></pre></td></tr></table></figure><p>删除之前需要将使用这个数据卷的容器关闭，否则报错</p><p>挂载主机目录<br>使用<code>--mount</code>标记</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8076:80 --name web3 --mount type&#x3D;bind,source&#x3D;&#x2F;home&#x2F;volumetest,target&#x3D;&#x2F;opt&#x2F;webapp nginx</span><br></pre></td></tr></table></figure><p>本地文件需要存在，否则报错</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker简单使用（五）</title>
      <link href="2019/06/13/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%BA%94%EF%BC%89/"/>
      <url>2019/06/13/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%BA%94%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>docker简单使用（五）</p><p>仓库</p><a id="more"></a><h3 id="Docker-Hub"><a href="#Docker-Hub" class="headerlink" title="Docker Hub"></a>Docker Hub</h3><p>类似<code>github</code>，docker也有<code>Docker Hub</code>注册了账号之后，也就可以进行镜像的<br>拉取：<code>docker pull nginx</code><br>上传：<code>docker push nginx</code><br>上传到Ddocker Hub时候，可以给自己的镜像一个标注，自己的docker hub id加上镜像<code>kyle/nginx</code>这样</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker tag nginx:v3 kyle&#x2F;nginx:v3</span><br><span class="line"></span><br><span class="line">docker push kyle&#x2F;nginx:v3</span><br></pre></td></tr></table></figure><h3 id="私仓"><a href="#私仓" class="headerlink" title="私仓"></a>私仓</h3><p>个人、公司级别的镜像，可能不适合上传到公有仓库，类似gitlab一样，可以在本地创建私有仓库</p><h4 id="创建私仓"><a href="#创建私仓" class="headerlink" title="创建私仓"></a>创建私仓</h4><p>官方提供的工具：<code>docker-registry</code><br>运行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8090:5000 --restart&#x3D;always --name registry registry</span><br></pre></td></tr></table></figure><p>进入容器：<code>docker exec -it registry sh</code><br>仓库默认会创建到容器的该路径：<code>/var/lib/registry</code></p><p>或者通过<code>-v</code>更改路径，将镜像文件放在本地指定路径：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8081:5000 -v &#x2F;home&#x2F;images:&#x2F;var&#x2F;lib&#x2F;registry  --restart&#x3D;always --name registry2 registry</span><br></pre></td></tr></table></figure><p>将本地<code>/home/images</code>作为镜像上传路径，替换默认路径（该文件不存在，会自动创建）</p><h4 id="操作镜像"><a href="#操作镜像" class="headerlink" title="操作镜像"></a>操作镜像</h4><p>先打tag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag ubuntu:16.04 192.168.0.97:8081&#x2F;ubuntu:16.04</span><br></pre></td></tr></table></figure><p>再推送</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost images]# docker push 192.168.0.97:8081&#x2F;ubuntu:16.04</span><br><span class="line">The push refers to repository [192.168.0.97:8081&#x2F;ubuntu]</span><br><span class="line">Get https:&#x2F;&#x2F;192.168.0.97:8081&#x2F;v2&#x2F;: http: server gave HTTP response to HTTPS client</span><br></pre></td></tr></table></figure><p>嗯。失败了、、、因为Docker默认不允许非<code>HTTPS</code>方式推送镜像，解决办法，要么是该配置，要么配置https</p><h4 id="更改配置"><a href="#更改配置" class="headerlink" title="更改配置"></a>更改配置</h4><p>适用于：<code>ubuntu 16.04+</code>、<code>Debian 8+</code>、<code>centos 7</code><br>修改<code>/etc/docker/daemon.json</code>（不存在就新建）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;:[</span><br><span class="line">        &quot;https:&#x2F;&#x2F;registry.docker-cn.com&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;insecure-registries&quot;:[</span><br><span class="line">        &quot;192.168.0.97:8081&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启docker:<code>systemctl restart docker</code><br>重新push：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost images]# docker push 192.168.0.97:8081&#x2F;ubuntu:16.04</span><br><span class="line">The push refers to repository [192.168.0.97:8081&#x2F;ubuntu]</span><br><span class="line">4c54072a5034: Pushed </span><br><span class="line">49652298c779: Pushed </span><br><span class="line">e15278fcccca: Pushed </span><br><span class="line">739482a9723d: Pushed </span><br><span class="line">16.04: digest: sha256:08f4295167241c59fc4a24f18816618ff8f959756fb4b236e880a3b7f45f0ba0 size: 1150</span><br></pre></td></tr></table></figure><p>看到成功了。。。<br>在本地<code>/home/images</code>下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]# tree images&#x2F;</span><br><span class="line">images&#x2F;</span><br><span class="line">└── docker</span><br><span class="line">    └── registry</span><br><span class="line">        └── v2</span><br><span class="line">            ├── blobs</span><br><span class="line">            │   └── sha256</span><br><span class="line">            │       ├── 08</span><br><span class="line">            │       │   └── 08f4295167241c59fc4a24f18816618ff8f959756fb4b236e880a3b7f45f0ba0</span><br><span class="line">            │       │       └── data</span><br><span class="line">            │       ├── 2a</span><br><span class="line">            │       │   └── 2a697363a8709093834e852b26bedb1d85b316c613120720fea9524f0e98e4a2</span><br><span class="line">            │       │       └── data</span><br><span class="line">            │       ├── 59</span><br><span class="line">            │       │   └── 59856638ac9f32d4caa0f5761b2597fe251642786fdfe1b917ddbb074b890c29</span><br><span class="line">            │       │       └── data</span><br><span class="line">            │       ├── 6f</span><br><span class="line">            │       │   └── 6f317d6d954b9a59c54b2cb09e1f30cd3e872796e431cd2ceac5ed570beb2939</span><br><span class="line">            │       │       └── data</span><br><span class="line">            │       ├── 9f</span><br><span class="line">            │       │   └── 9ff7e2e5f967fb9c4e8099e63508ab0dddebe3f820d08ca7fd568431b0d10c0e</span><br><span class="line">            │       │       └── data</span><br><span class="line">            │       └── a9</span><br><span class="line">            │           └── a9dde5e2a643eca8fde0eed52f4aed31f3ecd9c1b2f24d5e3729cd8d2ae68177</span><br><span class="line">            │               └── data</span><br><span class="line">            └── repositories</span><br><span class="line">                └── ubuntu</span><br><span class="line">                    ├── _layers</span><br><span class="line">                    │   └── sha256</span><br><span class="line">                    │       ├── 2a697363a8709093834e852b26bedb1d85b316c613120720fea9524f0e98e4a2</span><br><span class="line">                    │       │   └── link</span><br><span class="line">                    │       ├── 59856638ac9f32d4caa0f5761b2597fe251642786fdfe1b917ddbb074b890c29</span><br><span class="line">                    │       │   └── link</span><br><span class="line">                    │       ├── 6f317d6d954b9a59c54b2cb09e1f30cd3e872796e431cd2ceac5ed570beb2939</span><br><span class="line">                    │       │   └── link</span><br><span class="line">                    │       ├── 9ff7e2e5f967fb9c4e8099e63508ab0dddebe3f820d08ca7fd568431b0d10c0e</span><br><span class="line">                    │       │   └── link</span><br><span class="line">                    │       └── a9dde5e2a643eca8fde0eed52f4aed31f3ecd9c1b2f24d5e3729cd8d2ae68177</span><br><span class="line">                    │           └── link</span><br><span class="line">                    ├── _manifests</span><br><span class="line">                    │   ├── revisions</span><br><span class="line">                    │   │   └── sha256</span><br><span class="line">                    │   │       └── 08f4295167241c59fc4a24f18816618ff8f959756fb4b236e880a3b7f45f0ba0</span><br><span class="line">                    │   │           └── link</span><br><span class="line">                    │   └── tags</span><br><span class="line">                    │       └── 16.04</span><br><span class="line">                    │           ├── current</span><br><span class="line">                    │           │   └── link</span><br><span class="line">                    │           └── index</span><br><span class="line">                    │               └── sha256</span><br><span class="line">                    │                   └── 08f4295167241c59fc4a24f18816618ff8f959756fb4b236e880a3b7f45f0ba0</span><br><span class="line">                    │                       └── link</span><br><span class="line">                    └── _uploads</span><br></pre></td></tr></table></figure><p>使用curl获取：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]# curl 192.168.0.97:8081&#x2F;v2&#x2F;_catalog</span><br><span class="line">&#123;&quot;repositories&quot;:[&quot;ubuntu&quot;]&#125;</span><br></pre></td></tr></table></figure><h3 id="Docker-Compose建私仓"><a href="#Docker-Compose建私仓" class="headerlink" title="Docker Compose建私仓"></a>Docker Compose建私仓</h3><p>参照《docker practice》建私仓，配置全新啊认证，TLS<br>使用openssl自动签发站点SSL证书</p><p>新建一个空白文件夹，进入文件夹，开始操作<br><code>/etc/docker/registry</code></p><h4 id="创建CA私钥"><a href="#创建CA私钥" class="headerlink" title="创建CA私钥"></a>创建CA私钥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out &quot;root-ca.key&quot; 4096</span><br></pre></td></tr></table></figure><h4 id="创建CA根证书请求文件"><a href="#创建CA根证书请求文件" class="headerlink" title="创建CA根证书请求文件"></a>创建CA根证书请求文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key &quot;root-ca.key&quot; -out &quot;root-ca.csr&quot; -sha256 \</span><br><span class="line">&gt; -subj &#39;&#x2F;C&#x3D;CN&#x2F;ST&#x3D;Jiangsu&#x2F;L&#x3D;Suzhou&#x2F;O&#x3D;Company Xaa&#x2F;CN&#x3D;Company Xaa Docker Registry CA&#39;</span><br></pre></td></tr></table></figure><p>其中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;C表示国家，如CN；&#x2F;ST表示省，如Jiangsu；&#x2F;L表示城市或地区，如Suzhou；&#x2F;O表示组织名，如公司名；&#x2F;CN表示组织通用名称，如公司对外的名称，XXX company</span><br></pre></td></tr></table></figure><h4 id="配置CA根证书"><a href="#配置CA根证书" class="headerlink" title="配置CA根证书"></a>配置CA根证书</h4><p><code>vim root-ca.cnf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root_ca]</span><br><span class="line">basicConstraints &#x3D; critical,CA:TRUE,pathlen:1</span><br><span class="line">keyUsage &#x3D; critical, nonRepudiation, cRLSign, keyCertSign</span><br><span class="line">subjectKeyIdentifier&#x3D;hash</span><br></pre></td></tr></table></figure><h4 id="签发根证书"><a href="#签发根证书" class="headerlink" title="签发根证书"></a>签发根证书</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -days 3650 -in &quot;root-ca.csr&quot; \</span><br><span class="line">&gt; -signkey &quot;root-ca.key&quot; -sha256 -out &quot;root-ca.crt&quot; \</span><br><span class="line">&gt; -extfile &quot;root-ca.cnf&quot; -extensions \</span><br><span class="line">&gt; root_ca</span><br></pre></td></tr></table></figure><h4 id="生成站点SSL私钥"><a href="#生成站点SSL私钥" class="headerlink" title="生成站点SSL私钥"></a>生成站点SSL私钥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out &quot;tokyle.com.key&quot; 4096</span><br></pre></td></tr></table></figure><h4 id="使用私钥生成证书请求文件"><a href="#使用私钥生成证书请求文件" class="headerlink" title="使用私钥生成证书请求文件"></a>使用私钥生成证书请求文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key &quot;tokyle.com.key&quot; -out &quot;site.csr&quot; -sha256 \</span><br><span class="line">&gt; -subj &#39;&#x2F;C&#x3D;CN&#x2F;ST&#x3D;Jiangsu&#x2F;L&#x3D;Suzhou&#x2F;O&#x3D;Company Xaa&#x2F;CN&#x3D;tokyle.com&#39;</span><br></pre></td></tr></table></figure><h4 id="配置证书"><a href="#配置证书" class="headerlink" title="配置证书"></a>配置证书</h4><p>新建<code>site.cnf</code>文件 <code>vim site.cnf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[server]</span><br><span class="line">authorityKeyIdentifier&#x3D;keyid,issuer</span><br><span class="line">basicConstraints &#x3D; critical,CA:FALSE</span><br><span class="line">extendedKeyUsage&#x3D;serverAuth</span><br><span class="line">keyUsage &#x3D; critical, digitalSignature, keyEncipherment</span><br><span class="line">subjectAltName &#x3D; DNS:tokyle.com, IP:127.0.0.1</span><br><span class="line">subjectKeyIdentifier&#x3D;hash</span><br></pre></td></tr></table></figure><h4 id="签署站点SSL证书"><a href="#签署站点SSL证书" class="headerlink" title="签署站点SSL证书"></a>签署站点SSL证书</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -days 750 -in &quot;site.csr&quot; -sha256 \</span><br><span class="line">&gt; -CA &quot;root-ca.crt&quot; -CAkey &quot;root-ca.key&quot; -CAcreateserial \</span><br><span class="line">&gt; -out &quot;tokyle.com.crt&quot; -extfile &quot;site.cnf&quot; -extensions server</span><br></pre></td></tr></table></figure><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost registry]# ll</span><br><span class="line">总用量 36</span><br><span class="line">-rw-r--r-- 1 root root  140 6月  13 17:03 root-ca.cnf</span><br><span class="line">-rw-r--r-- 1 root root 2021 6月  13 17:05 root-ca.crt</span><br><span class="line">-rw-r--r-- 1 root root 1708 6月  13 16:49 root-ca.csr</span><br><span class="line">-rw-r--r-- 1 root root 3247 6月  13 16:45 root-ca.key</span><br><span class="line">-rw-r--r-- 1 root root   17 6月  13 17:18 root-ca.srl</span><br><span class="line">-rw-r--r-- 1 root root  237 6月  13 17:14 site.cnf</span><br><span class="line">-rw-r--r-- 1 root root 1679 6月  13 17:10 site.csr</span><br><span class="line">-rw-r--r-- 1 root root 2098 6月  13 17:18 tokyle.com.crt</span><br><span class="line">-rw-r--r-- 1 root root 3243 6月  13 17:08 tokyle.com.key</span><br></pre></td></tr></table></figure><p>这样，就已经拥有了<code>tokyle.com</code>的网站SSL私钥<code>tokyle.com.key</code>和SSL证书<code>tokyle.com.crt</code>及CA根证书<code>root-ca.crt</code></p><p>新建ssl文件夹，将<code>tokyle.com.key</code>、<code>tokyle.com.crt</code>、<code>root-ca.crt</code>拷入，其他删除。</p><h4 id="配置私有仓库"><a href="#配置私有仓库" class="headerlink" title="配置私有仓库"></a>配置私有仓库</h4><p>私仓默认配置文件位于:<code>/etc/docker/registry/config.yml</code>，先本地编辑config.yml再挂在到容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">version: 0.1</span><br><span class="line">log:</span><br><span class="line">  accesslog:</span><br><span class="line">    disabled: true</span><br><span class="line">  level: debug</span><br><span class="line">  formatter: text</span><br><span class="line">  fields:</span><br><span class="line">    service: registry</span><br><span class="line">    environment: staging</span><br><span class="line">storage:</span><br><span class="line">  delete:</span><br><span class="line">    enabled: true</span><br><span class="line">  cache:</span><br><span class="line">    blobdescriptor: inmemory</span><br><span class="line">  filesystem:</span><br><span class="line">    rootdirectory: &#x2F;var&#x2F;lib&#x2F;registry</span><br><span class="line">auth:</span><br><span class="line">  htpasswd:</span><br><span class="line">    realm: basic-realm</span><br><span class="line">    path: &#x2F;etc&#x2F;docker&#x2F;registry&#x2F;auth&#x2F;nginx.htpasswd</span><br><span class="line">http:</span><br><span class="line">  addr: :443</span><br><span class="line">  host: https:&#x2F;&#x2F;tokyle.com</span><br><span class="line">  headers:</span><br><span class="line">    X-Content-Type-Options: [nosniff]</span><br><span class="line">  http2:</span><br><span class="line">    disabled: false</span><br><span class="line">  tls:</span><br><span class="line">    certificate: &#x2F;etc&#x2F;docker&#x2F;registry&#x2F;ssl&#x2F;tokyle.com.crt</span><br><span class="line">    key: &#x2F;etc&#x2F;docker&#x2F;registry&#x2F;ssl&#x2F;tokyle.com.key</span><br><span class="line">health:</span><br><span class="line">  storagedriver:</span><br><span class="line">    enabled: true</span><br><span class="line">    interval: 10s</span><br><span class="line">threshold: 3</span><br></pre></td></tr></table></figure><h4 id="生成http认证文件"><a href="#生成http认证文件" class="headerlink" title="生成http认证文件"></a>生成http认证文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir auth</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm \</span><br><span class="line">    --entrypoint htpasswd \</span><br><span class="line">    registry \</span><br><span class="line">    -Bbn username pwd &gt; auth&#x2F;nginx.htpasswd</span><br></pre></td></tr></table></figure><p>用户名密码用自己的</p><h4 id="编辑docker-compose-yml"><a href="#编辑docker-compose-yml" class="headerlink" title="编辑docker-compose.yml"></a>编辑docker-compose.yml</h4><p><code>vim docker-compose.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">version: &#39;3&#39;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  registry:</span><br><span class="line">    image: registry</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;443:443&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - .&#x2F;:&#x2F;etc&#x2F;docker&#x2F;registry</span><br><span class="line">      - registry-data:&#x2F;var&#x2F;lib&#x2F;registry</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  registry-data:</span><br></pre></td></tr></table></figure><h4 id="修改hosts"><a href="#修改hosts" class="headerlink" title="修改hosts"></a>修改hosts</h4><p><code>vim /etc/hosts</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 tokyle.com</span><br></pre></td></tr></table></figure><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p>安装docker-compose</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U docker-compose</span><br></pre></td></tr></table></figure><p>启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>由于自行签发的 CA 根证书不被系统信任，所以我们需要将 CA 根证书 ssl/root-ca.crt 移入/etc/docker/certs.d/docker.domain.com 文件夹中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;tokyle.com</span><br><span class="line">cp ssl&#x2F;root-ca.crt &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;tokyle.com&#x2F;ca.crt</span><br></pre></td></tr></table></figure><h4 id="私仓操作"><a href="#私仓操作" class="headerlink" title="私仓操作"></a>私仓操作</h4><p>登录私仓：<code>docker login tokyle.com</code><br>就可以进行镜像推送、拉取了（需要登录进去）</p><h3 id="参考docker-practice"><a href="#参考docker-practice" class="headerlink" title="参考docker practice"></a>参考docker practice</h3><blockquote><p><a href="https://yeasy.gitbooks.io/docker_practice/content/repository/registry_auth.html">私仓高级配置</a></p></blockquote><h3 id="使用Nexus建私仓"><a href="#使用Nexus建私仓" class="headerlink" title="使用Nexus建私仓"></a>使用Nexus建私仓</h3><p>docker官方的registry建立的仓库，有些镜像删除后不会回收空间，必须命令去释放空间，重启Registry程序。当前比较常见的做法是使用<code>Nexus</code>来管理<code>Docker</code>、<code>Yum</code>、<code>PyPI</code>等</p><p>启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nexus3 --restart&#x3D;always \</span><br><span class="line">    -p 8081:8081 sonatype&#x2F;nexus3</span><br></pre></td></tr></table></figure><p>需要等一段时间，可以进容器<code>docker exec -it nexus3 bash</code>，看日志<code>/nexus-data/log/nexus.log</code>看到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Started Sonatype Nexus OSS 3.16.2-01</span><br></pre></td></tr></table></figure><p>就是起好了，可以通过<a href="http://IP:8088访问web页面。默认账密：`admin/admin123`">http://IP:8088访问web页面。默认账密：`admin/admin123`</a></p><h4 id="Nexus配置"><a href="#Nexus配置" class="headerlink" title="Nexus配置"></a>Nexus配置</h4><h5 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h5><p>进入nexus界面之后，创建仓库：<br>点击设置（齿轮）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Repository-&gt;Repositories 点击右边菜单 Create repository 选择 docker (hosted)</span><br></pre></td></tr></table></figure><ul><li>Name: 仓库的名称，如dockertest</li><li>HTTP: 仓库单独的访问端口，如8082</li><li>Enable Docker V1 API: 如果需要同时支持 V1 版本请勾选此项</li><li>Hosted -&gt; Deployment pollcy: 请选择 Allow redeploy 否则无法上传 Docker 镜像</li></ul><h5 id="添加权限"><a href="#添加权限" class="headerlink" title="添加权限"></a>添加权限</h5><p>菜单 Security-&gt;Realms 把 Docker Bearer Token Realm 移到右边的框中保存。</p><p>添加用户规则：菜单 Security-&gt;Roles-&gt;Create role 在 Privlleges 选项搜索 docker 把相应的规则移动到右边的框中然后保存。</p><p>添加用户：菜单 Security-&gt;Users-&gt;Create local user 在 Roles 选项中选中刚才创建的规则移动到右边的窗口保存。</p><h4 id="操作Nexus私仓"><a href="#操作Nexus私仓" class="headerlink" title="操作Nexus私仓"></a>操作Nexus私仓</h4><p>和之前官方私仓一样，不是https访问，需要在<code>/etc/docker/daemon.json</code>中添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   &quot;insecure-registries&quot;:[&quot;http:&#x2F;&#x2F;192.168.0.97:8082&quot;]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启docker：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>登录：<code>docker login 192.168.0.97:8082</code>，输入创建的用户名和密码，完成登录。</p><h5 id="Error-response-from-daemon-Get-http-192-168-0-97-8082-v2-dial-tcp-192-168-0-97-8082-connect-connection-refused"><a href="#Error-response-from-daemon-Get-http-192-168-0-97-8082-v2-dial-tcp-192-168-0-97-8082-connect-connection-refused" class="headerlink" title="Error response from daemon: Get http://192.168.0.97:8082/v2/: dial tcp 192.168.0.97:8082: connect: connection refused"></a>Error response from daemon: Get <a href="http://192.168.0.97:8082/v2/">http://192.168.0.97:8082/v2/</a>: dial tcp 192.168.0.97:8082: connect: connection refused</h5><p><code>docker login 192.168.0.97:8082</code>时候，登录不进去，确认用户名密码正确，确认有添加到daemon.json中。<br>这个问题折腾我一个上午，想来想去，配置的没有问题，然后翻Stack Overflow时候看到差不多的问题，才知道什么鬼。。</p><p>首先，碰到这个，用curl验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl &quot;http:&#x2F;&#x2F;192.168.0.97:8082&#x2F;v2&#x2F;_catalog&quot;</span><br><span class="line"></span><br><span class="line">curl: (7) Failed connect to 192.168.0.97:8082; Connection refused</span><br></pre></td></tr></table></figure><p>证明这个端口应该压根就没起来，然后往回翻，看看起nexus3这个容器的命令，发现是这样写的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nexus3 --restart&#x3D;always \</span><br><span class="line">    -p 8081:8081 sonatype&#x2F;nexus3</span><br></pre></td></tr></table></figure><p>只给nexus3分配了8081端口，没有其他端口暴露出来，即使在页面设置了8082端口，因为8082是在容器内部，没有暴露出来，所以在服务器上，根本就连不到192.168.0.97的8082端口，解决办法就是暴露出8082端口。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8081:8081 -p 8082:8082 -p 8083:8083 --restart&#x3D;always --name nexus3 sonatype&#x2F;nexus3</span><br></pre></td></tr></table></figure><p>然后再进入nexus页面重新设置，这样，就可以登陆了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost log]# docker login 192.168.0.97:8082</span><br><span class="line">Username: admin</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in &#x2F;root&#x2F;.docker&#x2F;config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https:&#x2F;&#x2F;docs.docker.com&#x2F;engine&#x2F;reference&#x2F;commandline&#x2F;login&#x2F;#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure><h5 id="镜像操作"><a href="#镜像操作" class="headerlink" title="镜像操作"></a>镜像操作</h5><p>首先登录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost docker]# docker login 192.168.0.97:8082</span><br><span class="line">Username: kyle</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in &#x2F;root&#x2F;.docker&#x2F;config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https:&#x2F;&#x2F;docs.docker.com&#x2F;engine&#x2F;reference&#x2F;commandline&#x2F;login&#x2F;#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure><p>镜像操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker tag nginx:v2 192.168.0.97:8082&#x2F;nginx:v2</span><br><span class="line"></span><br><span class="line">[root@localhost docker]# docker push 192.168.0.97:8082&#x2F;nginx:v2</span><br><span class="line">The push refers to repository [192.168.0.97:8082&#x2F;nginx]</span><br><span class="line">7df9ba6b1822: Pushed </span><br><span class="line">ea06a73e56fc: Pushed </span><br><span class="line">22c458a3ff08: Pushed </span><br><span class="line">6270adb5794c: Pushed </span><br><span class="line">v2: digest: sha256:619a4fd83aef966bbee5677f0a2c169ae990cf83b9183aed0969c991b04e23dc size: 1155</span><br></pre></td></tr></table></figure><p>可以到nexus界面的Docker栏看到推送上去的镜像。</p><p>删除本地镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost docker]# docker image ls</span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">192.168.0.97:8082&#x2F;nginx   v2                  f531cfc896d6        3 days ago          109MB</span><br><span class="line">nginx                     v2                  f531cfc896d6        3 days ago          109MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost docker]# docker rmi 192.168.0.97:8082&#x2F;nginx:v2</span><br><span class="line">Untagged: 192.168.0.97:8082&#x2F;nginx:v2</span><br><span class="line">Untagged: 192.168.0.97:8082&#x2F;nginx@sha256:619a4fd83aef966bbee5677f0a2c169ae990cf83b9183aed0969c991b04e23dc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost docker]# docker image ls</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                 v2                  f531cfc896d6        3 days ago          109MB</span><br></pre></td></tr></table></figure><p>从nexus私仓拉取镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost docker]# docker pull 192.168.0.97:8082&#x2F;nginx:v2</span><br><span class="line">v2: Pulling from nginx</span><br><span class="line">Digest: sha256:619a4fd83aef966bbee5677f0a2c169ae990cf83b9183aed0969c991b04e23dc</span><br><span class="line">Status: Downloaded newer image for 192.168.0.97:8082&#x2F;nginx:v2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost docker]# docker image ls</span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">192.168.0.97:8082&#x2F;nginx   v2                  f531cfc896d6        3 days ago          109MB</span><br><span class="line">nginx                     v2                  f531cfc896d6        3 days ago          109MB</span><br></pre></td></tr></table></figure><p>退出私仓：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost docker]# docker logout 192.168.0.97:8082</span><br><span class="line">Removing login credentials for 192.168.0.97:8082</span><br></pre></td></tr></table></figure><p>然后，可以对自己的私仓加上个<strong>s</strong>，更安全一点，这个，教程一堆</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker简单使用（四）</title>
      <link href="2019/06/13/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>2019/06/13/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>docker简单使用（四）</p><p>Docker容器操作</p><a id="more"></a><h3 id="容器启动"><a href="#容器启动" class="headerlink" title="容器启动"></a>容器启动</h3><h4 id="新建并启动"><a href="#新建并启动" class="headerlink" title="新建并启动"></a>新建并启动</h4><p>构建完镜像之后，启动容器<br>例如：<code>docker run -it ubintu:16.04 bash</code>，启ubuntu，并开启交互终端</p><h4 id="重启容器"><a href="#重启容器" class="headerlink" title="重启容器"></a>重启容器</h4><p>容器已经关闭，可以使用<code>docker container start containerID(或name)</code>启动<br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser2]# docker run --name web1 -d -p 8088:80 nginx</span><br><span class="line">73a5c1a3ac2300f6e2317ae39c9571b84be07e44beb92fcb98b41ee68aa6672a</span><br><span class="line"></span><br><span class="line">[root@localhost myuser2]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                          PORTS                  NAMES</span><br><span class="line">73a5c1a3ac23        nginx               &quot;nginx -g &#39;daemon of…&quot;   14 seconds ago      Up 4 seconds                    0.0.0.0:8088-&gt;80&#x2F;tcp   web1</span><br></pre></td></tr></table></figure><p>关掉容器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser2]# docker kill 73a5c1a3ac23</span><br><span class="line">73a5c1a3ac23</span><br><span class="line"></span><br><span class="line">[root@localhost myuser2]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS                        PORTS               NAMES</span><br><span class="line">73a5c1a3ac23        nginx               &quot;nginx -g &#39;daemon of…&quot;   About a minute ago   Exited (137) 14 seconds ago                       web1</span><br></pre></td></tr></table></figure><p>重新启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser2]# docker container start 73a5c1a3ac23</span><br><span class="line">73a5c1a3ac23</span><br><span class="line"></span><br><span class="line">[root@localhost myuser2]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS                     PORTS                  NAMES</span><br><span class="line">73a5c1a3ac23        nginx               &quot;nginx -g &#39;daemon of…&quot;   About a minute ago   Up 9 seconds               0.0.0.0:8088-&gt;80&#x2F;tcp   web1</span><br></pre></td></tr></table></figure><p><code>docker container start -i  5879098886bf </code>以交互模式重启</p><h3 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h3><p>推荐<code>docker exec</code>，交互模式：<code>docker exec -it container</code></p><h3 id="停止容器"><a href="#停止容器" class="headerlink" title="停止容器"></a>停止容器</h3><p>可以<code>docker container stop containerid(name)</code><br>也可以暴力的<code>dokcer kill containerid</code></p><h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><p><code>docker rm containerid</code></p><p>删除镜像：<code>docker rmi imageid</code></p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker简单使用（三）</title>
      <link href="2019/06/12/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>2019/06/12/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>docker简单使用（三）</p><p>Dockerfile简介二</p><a id="more"></a><p>简单介绍Dockerfile的一些指令</p><h3 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a>COPY</h3><p>COPY，复制文件指令，格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPY &lt;源路径&gt;  &lt;目标路径&gt;</span><br></pre></td></tr></table></figure><p>另一种格式类似函数调用：<code>COPY [&quot;&lt;源路径&gt;&quot;,... &quot;&lt;目标路径&gt;&quot;]</code></p><p>COPY指令作用是从构建上下文目录中<code>&lt;源路径&gt;</code>（相对于上下文的路径）下的文件复制到镜像中的<code>目标路径</code></p><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPY test1.txt &#x2F;usr&#x2F;local&#x2F;test&#x2F;</span><br></pre></td></tr></table></figure><p>将当前上下文目录下的test1.txt复制到新镜像的/usr/local/test/文件夹下<br>&lt;目标路径&gt;可以是容器内的绝对路径，也可以是相对于<code>WOKDIR</code>的相对路径</p><h3 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h3><p>不实用的命令，有拷贝的功能，同时，可以拷贝url，但是使用ADD url时，docker会先将url的文件下载下来，如果是个压缩包，还需要自己添加一层RUN进行解压，剔除不需要的文件，再复制；所以不如直接RUN wget，然后解压缩，剔除文件复制</p><p>ADD命令在有一种情况下很有用，源路径是一个gzip，bzip2以及xz的压缩包，ADD会自动解压压缩包到目标路径。</p><p>在《docker practice》中指出，<strong>在COPY和ADD指令中选择的时候，可以遵循这样的原则，所有的文件复制均使用COPY指令，仅在需要自动解压缩场合使用ADD</strong></p><h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>首先要理解，容器是进程，不是虚拟机，在正常linux中，运行进程一般都伴随有启动参数，类似的，容器也有，CMD就是用于指定默认的容器主进程的启动命令的</p><p>格式：<br><code>shell</code>格式：<code>CMD &lt;命令&gt;</code><br><code>exec</code>格式：<code>CMD [&quot;可执行文件&quot;， &quot;参数1&quot;, &quot;参数2&quot;...]</code></p><p>在运行时，可以使用CMD来指定新的命令来替代镜像中设置的默认命令，例如，ubuntu镜像的默认CMD是<code>/bin/bash</code>，如果我们直接<code>docker run -it ubuntu:16.04</code>会直接进入<code>bash</code>；也可以指定别的命令，例如输出系统版本：<code>docker run -it ubuntu:16.04 cat /etc/os-rlease</code></p><p>在指令格式上，推荐使用<code>CMD [&quot;可执行文件&quot;， &quot;参数1&quot;, &quot;参数2&quot;...]</code>，这类格式会被解析成JSON，因此一定要是用双引号<code>&quot;</code><br>如果使用shell格式，例如<code>CMD echo $JAVA_HOME</code>在实际执行中会变更为<code>CMD [&quot;sh&quot;, &quot;-c&quot;, &quot;echo $JAVA_HOME&quot;]</code>，实际会被包装成<code>sh -c</code>的参数形式。（这也是shell中可以直接使用环境变量的原因）</p><p>前面说过，容器其实就是进程，本身就是进程，所以就不存在什么进程里面的程序有后台执行的说法了，容器中的应用，都是在前台执行的，不存在systemctl这样的操作，不会像虚拟机中有<code>systemctl start mysqld</code>这样的操作，如果使用CMD写成这样的：<code>CMD systemctl start nginx</code>，会发现容器执行后立刻退出。</p><p>这是因为，docker容器，默认会把容器内部第一个进程，也就是pid=1的程序作为docker容器正在运行的依据，如果容器中pid=1的程序挂了，那docker容器就会直接退出；在执行<code>CMD systemctl start nginx</code>时候，实际执行的是<code>CMD [&quot;sh&quot;, &quot;-c&quot;, &quot;systemctl start nginx&quot;]</code>，起初pid=1的程序是bash，但是后面接上了systemctl start nginx（后台守护模式daemon启动nginx），使得systemctl start nginx进程启动后，sh也结束了（CMD会更改默认命令），当pid=1的程序结束，容器就退出了。所以只要运行程序时候，在非守护模式下，容器就不会退出，因此，容器内启动nginx可以：<code>CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off&quot;]</code></p><h3 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a>ENTRYPOINT</h3><p>和CMD类似，不同的是，CMD会被docker run覆盖，而ENTERPOINT不会，例如以下一个最简单的镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:16.04</span><br><span class="line">CMD [&quot;&#x2F;bin&#x2F;echo&quot;, &quot;test&quot;]</span><br></pre></td></tr></table></figure><p>构建镜像：<code>docker build -t echotest .</code>，<br>运行容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myip]# docker run echotest </span><br><span class="line">test</span><br></pre></td></tr></table></figure><p>但是既然容器是进程，那如果像其他进程一样，加参数，效果如何：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myip]# docker run echotest -i</span><br><span class="line">docker: Error response from daemon: OCI runtime create failed: container_linux.go:345: starting container process caused &quot;exec: \&quot;-i\&quot;: executable file not found in $PATH&quot;: unknown.</span><br><span class="line">ERRO[0001] error waiting for container: context canceled </span><br></pre></td></tr></table></figure><p>直接就报错了。。这是因为跟在镜像名之后的执行，会替换调CMD的默认值，但是-i又不是个指令，所以就报错了。</p><p>ENTRYPOINT在这点上就可以做到带参数，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:16.04</span><br><span class="line">ENTRYPOINT [&quot;&#x2F;bin&#x2F;echo&quot;, &quot;test&quot;]</span><br></pre></td></tr></table></figure><p>构建：<code>docker build -t echotest2 .</code>，运行容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost echotest]# docker run echotest2 -i</span><br><span class="line">test -i</span><br></pre></td></tr></table></figure><p>可以看到，-i可以带进去。</p><h3 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h3><p>顾名思义，设置环境变量<code>ENV JAVA_VERSION 1.8.0_191</code></p><h3 id="ARG"><a href="#ARG" class="headerlink" title="ARG"></a>ARG</h3><p>和ENV类似，都是设置环境变量。区别在于：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The ARG instruction defines a variable that users can pass at build-time to the builder with the docker build command using the --build-arg &lt;varname&gt;&#x3D;&lt;value&gt; flag.ARG指令定义了用户可以在编译时或者运行时传递的变量，如使用如下命令：--build-arg &lt;varname&gt;&#x3D;&lt;value&gt;</span><br><span class="line"></span><br><span class="line">The ENV instruction sets the environment variable &lt;key&gt; to the value &lt;value&gt;. The environment variables set using ENV will persist when a container is run from the resulting image.ENV指令是在dockerfile里面设置环境变量，不能在编译时或运行时传递。</span><br></pre></td></tr></table></figure><p>例如，在Dockerfile中定义：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ARG a_key1</span><br><span class="line">ARG a_key2 &#x3D; a_value2</span><br></pre></td></tr></table></figure><p>ARG指令定义的参数，在docker build命令中可以通过–build-arg a_key1=avalue1来覆盖</p><h3 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h3><p>创建一个可以从本地主机或其他容器挂载的挂在点，格式：<code>VOLUME [&quot;/data&quot;]</code><br>对于数据库类需要保存动态数据的应用，数据库文件应该保存在卷（volume）。为了防止运行时用户忘记将动态文件所保存的目录挂在为卷，在写Dockerfile时，就可以事先指定某些目录挂载为匿名卷，这样运行时如果用户不挂载，应用也可以正常运行，不会向容器存储层写大量数据</p><p><code>VOLUME [&quot;/data&quot;]</code>,这里的<code>/data</code>目录就会在运行时自动挂载为匿名卷，任何向/data中写入的信息都不会记录进容器存储层。当然，docker run时候也可以覆盖这个设置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v mydata:&#x2F;data&#x2F;tmp mysql</span><br></pre></td></tr></table></figure><h3 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h3><p>声明端口，格式：<code>EXPOSE &lt;port1&gt; &lt;port2&gt;</code><br>用来指定要映射出去的端口，例如，容器内部开启了nginx,就需要将80（或者指定的端口）暴露出去：<code>EXPOSE 80</code>。这个需要-P（大写）配合，启动容器是，加上-P，让它自动分配。如果想指定具体端口，使用-p(小写)</p><h3 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h3><p>指定工作目录，格式：<code>WORKDIR &lt;工作目录路径&gt;</code>，作用就是为后续的<code>RUN</code>、<code>COPY</code>等指定工作目录<br>在Dockerfile中，每个RUN，都会启一个容器，都是一个<code>启动容器</code>、<code>执行命令</code>、<code>提交存储层文件变更</code>的操作。<br>示例，如果Dockerfile这么写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:16.04</span><br><span class="line">RUN cd &#x2F;home \</span><br><span class="line">    &amp;&amp; mkdir myapp \</span><br><span class="line">    &amp;&amp; cd myapp</span><br><span class="line">RUN echo &quot;docker practice&quot; &gt; test1.txt</span><br></pre></td></tr></table></figure><p>然后构建镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myworkfile]# docker build -t workfile1 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1&#x2F;3 : FROM ubuntu:16.04</span><br><span class="line"> ---&gt; 2a697363a870</span><br><span class="line">Step 2&#x2F;3 : RUN cd &#x2F;home     &amp;&amp; mkdir myapp     &amp;&amp; cd myapp</span><br><span class="line"> ---&gt; Running in a33b48c39597</span><br><span class="line">Removing intermediate container a33b48c39597</span><br><span class="line"> ---&gt; daebc80cbf9d</span><br><span class="line">Step 3&#x2F;3 : RUN echo &quot;docker practice&quot; &gt; test1.txt</span><br><span class="line"> ---&gt; Running in 500473ff3363</span><br><span class="line">Removing intermediate container 500473ff3363</span><br><span class="line"> ---&gt; 4a1668a9a53c</span><br><span class="line">Successfully built 4a1668a9a53c</span><br><span class="line">Successfully tagged workfile1:latest</span><br></pre></td></tr></table></figure><p>可以看到，构建过程中，出现了两个中间容器<code>a33b48c39597</code>和<code>500473ff3363</code>，所以这两个RUN，其实运行的是不一样的容器，最终结果，启动容器后在<code>/home/myapp</code>下可能就找不到<code>test1.txt</code>，验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myworkfile]# docker run -it workfile1 bash</span><br><span class="line">root@3a7bbb6da9a2:&#x2F;# cd &#x2F;home&#x2F;</span><br><span class="line">root@3a7bbb6da9a2:&#x2F;home# ls</span><br><span class="line">myapp</span><br><span class="line">root@3a7bbb6da9a2:&#x2F;home# cd myapp&#x2F;</span><br><span class="line">root@3a7bbb6da9a2:&#x2F;home&#x2F;myapp# ls</span><br><span class="line">root@3a7bbb6da9a2:&#x2F;home&#x2F;myapp# </span><br></pre></td></tr></table></figure><p>没有找到test1.txt</p><p>使用WORKDIR:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:16.04</span><br><span class="line">WORKDIR &#x2F;home&#x2F;myapp</span><br><span class="line">RUN echo &quot;docker practice&quot; &gt; test2.txt</span><br></pre></td></tr></table></figure><p>构建镜像，运行容器，查看：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myworkfile2]# docker build -t workfile2 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1&#x2F;3 : FROM ubuntu:16.04</span><br><span class="line"> ---&gt; 2a697363a870</span><br><span class="line">Step 2&#x2F;3 : WORKDIR &#x2F;home&#x2F;myapp</span><br><span class="line"> ---&gt; Running in a64c73b81fcb</span><br><span class="line">Removing intermediate container a64c73b81fcb</span><br><span class="line"> ---&gt; c7868d92cec6</span><br><span class="line">Step 3&#x2F;3 : RUN echo &quot;docker practice&quot; &gt; test2.txt</span><br><span class="line"> ---&gt; Running in f18afb589fee</span><br><span class="line">Removing intermediate container f18afb589fee</span><br><span class="line"> ---&gt; 8733481c9491</span><br><span class="line">Successfully built 8733481c9491</span><br><span class="line">Successfully tagged workfile2:latest</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myworkfile2]# docker run -it workfile2 bash</span><br><span class="line">root@8bc345cf4fe7:&#x2F;home&#x2F;myapp# ls</span><br><span class="line">test2.txt</span><br><span class="line">root@8bc345cf4fe7:&#x2F;home&#x2F;myapp# cat test2.txt </span><br><span class="line">docker practic</span><br></pre></td></tr></table></figure><p>看到在<code>/home/myapp</code>下有<code>test2.txt</code>，并且内容是我们指定的。</p><p>Ps 在Dockerfile中，这边只使用<code>WORKDIR /home/myapp</code>并没有创建该目录，但是，后面执行就是在该目录下，这是因为<code>WORKDIR</code>会帮你建立目录</p><h3 id="USER"><a href="#USER" class="headerlink" title="USER"></a>USER</h3><p>和<code>WORKDIR</code>类似，指定之后执行<code>RUN</code>、<code>COPY</code>等命令的用户；</p><p>示例一：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:16.04</span><br><span class="line">USER kyle</span><br><span class="line">RUN echo &quot;Hello world&quot;</span><br></pre></td></tr></table></figure><p>构建镜像:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser2]# docker build -t myuser2 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1&#x2F;3 : FROM ubuntu:16.04</span><br><span class="line"> ---&gt; 2a697363a870</span><br><span class="line">Step 2&#x2F;3 : USER kyle</span><br><span class="line"> ---&gt; Running in b9af960d2702</span><br><span class="line">Removing intermediate container b9af960d2702</span><br><span class="line"> ---&gt; ba5592dfdba1</span><br><span class="line">Step 3&#x2F;3 : RUN echo &quot;Hello world&quot;</span><br><span class="line"> ---&gt; Running in d93f1b59934c</span><br><span class="line">unable to find user kyle: no matching entries in passwd file</span><br></pre></td></tr></table></figure><p>发现报错，kyle该用户不存在，镜像<code>myuser2</code>构建不成功</p><p>示例二：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser1]# cat Dockerfile </span><br><span class="line">FROM ubuntu:16.04</span><br><span class="line">RUN groupadd -r tests &amp;&amp; useradd -r -g tests kyle</span><br><span class="line">USER kyle</span><br><span class="line">RUN echo &quot;Hello World&quot;</span><br></pre></td></tr></table></figure><p>构建镜像，运行容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser1]# docker build -t myuser1 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1&#x2F;4 : FROM ubuntu:16.04</span><br><span class="line"> ---&gt; 2a697363a870</span><br><span class="line">Step 2&#x2F;4 : RUN groupadd -r tests &amp;&amp; useradd -r -g tests kyle</span><br><span class="line"> ---&gt; Running in 95030508e783</span><br><span class="line">Removing intermediate container 95030508e783</span><br><span class="line"> ---&gt; 8910cd5c0ee0</span><br><span class="line">Step 3&#x2F;4 : USER kyle</span><br><span class="line"> ---&gt; Running in 5ca75c068a8b</span><br><span class="line">Removing intermediate container 5ca75c068a8b</span><br><span class="line"> ---&gt; 17e120181a8a</span><br><span class="line">Step 4&#x2F;4 : RUN echo &quot;Hello World&quot;</span><br><span class="line"> ---&gt; Running in 022b81376556</span><br><span class="line">Hello World</span><br><span class="line">Removing intermediate container 022b81376556</span><br><span class="line"> ---&gt; 73527faf6379</span><br><span class="line">Successfully built 73527faf6379</span><br><span class="line">Successfully tagged myuser1:latest</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost myuser1]# docker run -it myuser1 bash</span><br><span class="line">kyle@55b05690325a:&#x2F;$ whoami</span><br><span class="line">kyle</span><br></pre></td></tr></table></figure><p>成功构建镜像，切换用户。</p><p>这两个示例可以看出，使用<code>USER</code>之前，必须创建好用户，也就是**<code>USER</code>不会帮你建用户，只是切换用户**</p><h3 id="MAINTAINER"><a href="#MAINTAINER" class="headerlink" title="MAINTAINER"></a>MAINTAINER</h3><p>指定制作作者信息，格式：<code>MAINTAINER &lt;name&gt;</code>，例如<code>MAINTAINER kyle kyle@xxx.com</code></p><p>以上，就是Dockerfile一些常用的指令，基本是借鉴的<a href="https://github.com/yeasy/docker_practice">《docker practice》</a>…</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客配置https</title>
      <link href="2019/06/11/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEhttps/"/>
      <url>2019/06/11/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEhttps/</url>
      
        <content type="html"><![CDATA[<p>hexo博客配置https</p><a id="more"></a><p>整天被chrome提醒不安全，简直了，实在忍不下去了，给博客加个s</p><p>方法很简单，到<a href="https://dash.cloudflare.com/login">CloudFlare</a>解析域名，开启CDN强制http转https，修改DNS即可</p><p>原DNS</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dns23.hichina.com</span><br><span class="line"></span><br><span class="line">dns24.hichina.com</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cortney.ns.cloudflare.com</span><br><span class="line"></span><br><span class="line">lloyd.ns.cloudflare.com</span><br></pre></td></tr></table></figure><p><code>CloudFlare</code>注册以后配置很简单，基本输入自己域名（tokyle.com）下一步下一步就结束了</p><p>就最后有一步配置DNS:<code>DNS Manage your Domain Name System (DNS) settings</code>时候，CNAME配置自己的域名，然后到对应的域名提供商（阿里云）去修改DNS解析</p><p>成功之后，CloudFlare会邮件给你，就可以愉快的https了：</p><blockquote><p><a href="https://tokyle.com/">https://tokyle.com</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker简单使用（二）</title>
      <link href="2019/06/11/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2019/06/11/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>docker简单使用（二）</p><p>Dockerfile简介一</p><a id="more"></a><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p>Dockerfile是一个包含一条条指令的文本文件，其中每一条指令都构建一层（每一条指令的内存，就是描述该层应当如何构建）（docker镜像采用联合文件系统）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">联合文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtual filesystem)。</span><br></pre></td></tr></table></figure><p>Dockerfile使用示例，建立一个空白文件夹，进去文件夹，创建Dockerfile，编辑Dockerfile，编写指令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir nginxtest</span><br><span class="line"></span><br><span class="line">cd nginxtest</span><br><span class="line"></span><br><span class="line">vim Dockerfile</span><br></pre></td></tr></table></figure><p>Dockerfile内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line"></span><br><span class="line">RUN echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br></pre></td></tr></table></figure><p>在当前文件夹，构建镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginxtest]# docker build -t nginx:v3 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1&#x2F;2 : FROM nginx</span><br><span class="line"> ---&gt; 62c261073ecf</span><br><span class="line">Step 2&#x2F;2 : RUN echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line"> ---&gt; Running in c20926fff810</span><br><span class="line">Removing intermediate container c20926fff810</span><br><span class="line"> ---&gt; 6ee9e7b88db2</span><br><span class="line">Successfully built 6ee9e7b88db2</span><br><span class="line">Successfully tagged nginx:v3</span><br></pre></td></tr></table></figure><p>注意docker build最后有个<code>.</code>表示镜像构建的上下文（Context）</p><h3 id="镜像构建上下文（Context）"><a href="#镜像构建上下文（Context）" class="headerlink" title="镜像构建上下文（Context）"></a>镜像构建上下文（Context）</h3><p>说实话，网上全是抄的一模一样的，全部来去《docker practice》，我也说不好自己理解的是对是错。。</p><p>首先，我也抄一下，docker其实是C/S架构，在执行docker build的时候，其实是有和server端（Docker引擎，服务端守护进程）进行交互。<br>Docker运行时，Docker引擎提供一组REST API，docker命令这样的客户端，就是通过这组API与Docker引擎交互，从而完成各种功能。<br>因此，在进行docker build的时候，看起来像是在本地进行构建，实际上，是先将上下文定义的路径下构建需要的包上传到Docker引擎，在Docker引擎处（服务端）完成构建。之前进行构建示例时候，有一行可以看出，和server进行了交互：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sending build context to Docker daemon  2.048kB</span><br></pre></td></tr></table></figure><p>在Dockerfile中经常会需要用到COPY，服务器在执行构建的时候，就需要知道copy的文件的地址，也就是上下文路径，需要注意的是，Docker的镜像构建上下文，即不是docker build执行的路径，也不是Dockerfile当前所在的目录。默认情况下，是建议创建一个空文件夹，然后将构建需要的文件和Dockerfile都放在该文件夹下，这样理所当然的Dockerfile所在路径就是上下文路径。<br>（说实话，这个上下文，有点晕，不是很理解，我只能理解成是构建需要的文件所在的路径为上下文；也就是为什么要创建一个空文件夹，将构建需要的文件和Dockerfile放进该文件夹的原因）<br>一定要记住，<strong>千万不要把Dockerfile放在根目录，不然会打包整个硬盘</strong></p><p>一些Dockerfile指令示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COPY .&#x2F;package.json &#x2F;etc&#x2F;</span><br><span class="line">COPY pachage.json &#x2F;etc&#x2F;</span><br></pre></td></tr></table></figure><p>上述两句效果是一样的，都是讲上下文下的<code>package.json</code>拷贝到镜像里面的<code>/etc/</code>下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPY &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf &#x2F;etc&#x2F;nginx&#x2F;</span><br></pre></td></tr></table></figure><p>上面这条，会无法工作，因为<code>/usr/local/nginx/nginx.conf</code>已经超出了上下文范文，服务端无法获取该文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f &#x2F;usr&#x2F;kyle&#x2F;dockertest&#x2F;a&#x2F;Dockerfile .</span><br></pre></td></tr></table></figure><p>当Dockerfile不在构建上下文的根目录下，可以-f指定该文件位置（当前执行docker build在构建上下文下，可以理解为，当前有个空文件夹，里面是构建需要的文件，但是Dockerfile不在当前文件夹下，可以通过-f指定）</p><h4 id="dockerignore"><a href="#dockerignore" class="headerlink" title=".dockerignore"></a>.dockerignore</h4><p>现在上下文中有不想上传到服务端的文件，就需要使用<code>.dockerignore</code>，例如当前文件夹下有：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mynginx]# ls -al</span><br><span class="line">总用量 20</span><br><span class="line">drwxr-xr-x  2 root root  96 6月  11 15:23 .</span><br><span class="line">drwxr-xr-x. 6 root root 147 6月  11 11:07 ..</span><br><span class="line">-rw-r--r--  1 root root  99 6月  11 15:22 Dockerfile</span><br><span class="line">-rw-r--r--  1 root root  10 6月  11 15:23 .dockerignore</span><br><span class="line">-rw-r--r--  1 root root  33 6月  11 15:20 text1.txt</span><br><span class="line">-rw-r--r--  1 root root  37 6月  11 15:20 text2.txt</span><br><span class="line">-rw-r--r--  1 root root  19 6月  11 15:22 text3.txt</span><br></pre></td></tr></table></figure><p>不想把text3.txt上传到server，其中Dockerfile内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line">COPY text* &#x2F;home&#x2F;</span><br><span class="line">RUN echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br></pre></td></tr></table></figure><p>这样，只需要编辑<code>.dockerignore</code>，将text3.txt添加进去，然后构建镜像即可<br>可以起容器，进去验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mynginx]# docker run --name web2 -d -p 8070:80 nginx:v4</span><br><span class="line">76527bd2b0f601e4fa844b9ed3afc4f29da65ee1d202fca6ee6c81380591ad0a</span><br><span class="line">[root@localhost mynginx]# </span><br><span class="line">[root@localhost mynginx]# docker exec -it web2 bash</span><br><span class="line">root@76527bd2b0f6:&#x2F;# cd &#x2F;home</span><br><span class="line">root@76527bd2b0f6:&#x2F;home# ls</span><br><span class="line">text1.txt  text2.txt</span><br></pre></td></tr></table></figure><p>可以看到，已经忽略了text3.txt</p><p>tips：<strong>删除镜像</strong>：<code>docker rmi imageid</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mynginx]# docker rmi a59be9875db4</span><br><span class="line">Untagged: nginx:v4</span><br><span class="line">Deleted: sha256:a59be9875db4025dcdab5a26c239302eec9bea47427b04eaa02e2111a800d2ec</span><br><span class="line">Deleted: sha256:7cc4283ef786efa1f9e2885533d3c3eb815a273548f5e7bbfda777726173a7b9</span><br><span class="line">Deleted: sha256:9e87263adf6572244788519ce5c9338c3e70b6e62cc6f1092e9b257a487ecb3c</span><br><span class="line">Deleted: sha256:79b76358156ea32a59800f6d4600a8ce79cc3798cd0ddfcad3362a014f96b397</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker简单使用（一）</title>
      <link href="2019/06/10/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2019/06/10/docker%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>docker简单使用（一）</p><a id="more"></a><h3 id="镜像操作"><a href="#镜像操作" class="headerlink" title="镜像操作"></a>镜像操作</h3><h4 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h4><p>docker获取镜像很简单，<code>docker pull image:tag</code>即可，不加tag默认获取最新<code>latest</code><br>例如，获取Ubuntu和nginx：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu#获取latest</span><br><span class="line"></span><br><span class="line">docker pull ubuntu:16.04#获取16.04版本ubuntu</span><br><span class="line"></span><br><span class="line">docker pull nginx#获取latest版nginx</span><br></pre></td></tr></table></figure><h4 id="运行镜像"><a href="#运行镜像" class="headerlink" title="运行镜像"></a>运行镜像</h4><p>获取完镜像之后，可以通过<code>dokcer images</code>来查看：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                 latest              62c261073ecf        5 days ago          109MB</span><br><span class="line">ubuntu                16.04               2a697363a870        3 weeks ago         119MB</span><br><span class="line">ubuntu                latest              7698f282e524        3 weeks ago         69.9MB</span><br><span class="line">hello-world           latest              fce289e99eb9        5 months ago        1.84kB</span><br><span class="line">ngrinder&#x2F;controller   latest              e7f8d86685cd        3 years ago         246MB</span><br></pre></td></tr></table></figure><p>镜像的运行，以ubuntu:16.04为例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it ubuntu:16.04 </span><br></pre></td></tr></table></figure><p>可以通过<code>docker ps -a</code>来查看当前运行的镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost docker]# docker  ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS                  NAMES</span><br><span class="line">385364730b09        ubuntu:16.04        &quot;&#x2F;bin&#x2F;bash&quot;              18 seconds ago      Up 16 seconds                                         nervous_jones</span><br></pre></td></tr></table></figure><p>其中<code>-it</code>表示以交互式方式运行镜像，这样，就可以进入交互式终端（ubuntu），来进行一些操作，例如查看当前系统：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@385364730b09:&#x2F;# cat &#x2F;etc&#x2F;os-release</span><br><span class="line">NAME&#x3D;&quot;Ubuntu&quot;</span><br><span class="line">VERSION&#x3D;&quot;16.04.6 LTS (Xenial Xerus)&quot;</span><br><span class="line">ID&#x3D;ubuntu</span><br><span class="line">ID_LIKE&#x3D;debian</span><br><span class="line">PRETTY_NAME&#x3D;&quot;Ubuntu 16.04.6 LTS&quot;</span><br><span class="line">VERSION_ID&#x3D;&quot;16.04&quot;</span><br><span class="line">HOME_URL&#x3D;&quot;http:&#x2F;&#x2F;www.ubuntu.com&#x2F;&quot;</span><br><span class="line">SUPPORT_URL&#x3D;&quot;http:&#x2F;&#x2F;help.ubuntu.com&#x2F;&quot;</span><br><span class="line">BUG_REPORT_URL&#x3D;&quot;http:&#x2F;&#x2F;bugs.launchpad.net&#x2F;ubuntu&#x2F;&quot;</span><br><span class="line">VERSION_CODENAME&#x3D;xenial</span><br><span class="line">UBUNTU_CODENAME&#x3D;xenial</span><br></pre></td></tr></table></figure><p>使用<code>exit</code>退出容器</p><p>查看当前容器状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS                  NAMES</span><br><span class="line">385364730b09        ubuntu:16.04        &quot;&#x2F;bin&#x2F;bash&quot;              2 minutes ago       Exited (0) 4 seconds ago                              nervous_jones</span><br></pre></td></tr></table></figure><p>可以看见当前STATUS状态从<code>Up xxx</code>变成了<code>Exited</code>，容器以及被关闭，如果该容器只是用来调试错误，在关闭之后可以进行删除操作：<code>docker rm 385364730b09</code>(Container id)</p><p>或者在启动镜像时候就直接指定关闭即删除容器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm ubuntu:16.04</span><br></pre></td></tr></table></figure><h4 id="运行webserver"><a href="#运行webserver" class="headerlink" title="运行webserver"></a>运行webserver</h4><p>像类似nginx这样的webserver，运行时候，需要指定端口，可以这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name web1 -d -p 8088:80 nginx</span><br></pre></td></tr></table></figure><p>以nginx镜像启动名为web1的容器，端口从80映射到8088，这样，在浏览器中可以使用<strong><a href="http://ip:8088/">http://ip:8088</a></strong>打开nginx欢迎页面。</p><h4 id="commit保存新镜像"><a href="#commit保存新镜像" class="headerlink" title="commit保存新镜像"></a>commit保存新镜像</h4><p>前面已经启动了nginx的镜像，并且以8088端口运行，现在，修改nginx的欢迎页面来生成一个新的镜像：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it web1 bash</span><br></pre></td></tr></table></figure><p>进入容器之后，修改默认页：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &#39;&lt;h1&gt;Hello, Docker!&lt;&#x2F;h1&gt;&#39; &gt; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>刷新浏览器页面即可，当前欢迎页已被修改<br>修改了容器的文件，也就是改动了容器的存储层，可以通过<code>docker diff web1</code>来查看具体改动</p><p>以上已经完成了修改nginx默认页，现在需要将修改保存成新的镜像，这样后面就可以直接使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker commit \</span><br><span class="line">&gt; --author &quot;kyle&quot; \</span><br><span class="line">&gt; --message &quot;change the default page&quot; \</span><br><span class="line">&gt; web1 \</span><br><span class="line">&gt; nginx:v2</span><br><span class="line">sha256:f531cfc896d61fd557748ddabb1ce2233e57f4e88e6cf49502e4c3e03de77eff</span><br></pre></td></tr></table></figure><p>然后使用docker images查看：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                 v2                  f531cfc896d6        12 minutes ago      109MB</span><br><span class="line">nginx                 latest              62c261073ecf        6 days ago          109MB</span><br><span class="line">ubuntu                16.04               2a697363a870        3 weeks ago         119MB</span><br><span class="line">ubuntu                latest              7698f282e524        3 weeks ago         69.9MB</span><br><span class="line">hello-world           latest              fce289e99eb9        5 months ago        1.84kB</span><br><span class="line">ngrinder&#x2F;controller   latest              e7f8d86685cd        3 years ago         246MB</span><br></pre></td></tr></table></figure><p>通过<code>docker history</code>查看镜像的历史记录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker history nginx:v2</span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">f531cfc896d6        15 minutes ago      nginx -g daemon off;                            106B                change the default page</span><br><span class="line">62c261073ecf        6 days ago          &#x2F;bin&#x2F;sh -c #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemon…   0B                  </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c #(nop)  STOPSIGNAL SIGTERM           0B                  </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c #(nop)  EXPOSE 80                    0B                  </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c ln -sf &#x2F;dev&#x2F;stdout &#x2F;var&#x2F;log&#x2F;nginx…   22B                 </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c set -x     &amp;&amp; addgroup --system -…   54MB                </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c #(nop)  ENV PKG_RELEASE&#x3D;1~stretch    0B                  </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c #(nop)  ENV NJS_VERSION&#x3D;0.3.2        0B                  </span><br><span class="line">&lt;missing&gt;           6 days ago          &#x2F;bin&#x2F;sh -c #(nop)  ENV NGINX_VERSION&#x3D;1.17.0     0B                  </span><br><span class="line">&lt;missing&gt;           4 weeks ago         &#x2F;bin&#x2F;sh -c #(nop)  LABEL maintainer&#x3D;NGINX Do…   0B                  </span><br><span class="line">&lt;missing&gt;           4 weeks ago         &#x2F;bin&#x2F;sh -c #(nop)  CMD [&quot;bash&quot;]                 0B                  </span><br><span class="line">&lt;missing&gt;           4 weeks ago         &#x2F;bin&#x2F;sh -c #(nop) ADD file:fcb9328ea4c115670…   55.3MB  </span><br></pre></td></tr></table></figure><p><strong>备注：</strong> docker commit要慎用，该操作，即使是简单的修改一个默认页面，也会同时添加或改动很多文件，如果是安装软件包、编译构建，那会有大量无关内容被添加进来，不小心清理会导致镜像极为臃肿；并且，docker commit除了制作镜像的人，其他没有人知道执行过什么命令，无法保证下一次可以生成一个一模一样的镜像（以上，来自docker practice）</p><p>关于docker镜像的制作，最优良的方式是写<code>dockerfile</code> 这个后面再说</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>几个测试问题思考</title>
      <link href="2019/05/29/%E5%87%A0%E4%B8%AA%E6%B5%8B%E8%AF%95%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83/"/>
      <url>2019/05/29/%E5%87%A0%E4%B8%AA%E6%B5%8B%E8%AF%95%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<p>几个测试问题思考</p><a id="more"></a><p>翻到了关于测试职业生涯的文章，里面有提到几个问题，自己想了想，挺震撼的，之前真没仔细考虑过</p><h3 id="如果测试时间不够，怎么办"><a href="#如果测试时间不够，怎么办" class="headerlink" title="如果测试时间不够，怎么办"></a>如果测试时间不够，怎么办</h3><p>或者可以延伸为，<strong>如果测试时间不够，肯定不能够全部覆盖的进行测试，是否可以只测试客户关心的，比较常用的功能？</strong></p><p>想了挺久，结合网友的讨论，我给出的答案是：<br>作为测试，碰到时间紧张，测试资源欠缺，我们所唯一能做的就是上报公司，让公司协调人工和资源做延期处理。这样做，公司可能会因为不能如期交付而受到一定的经济损失，但交付一个合格的产品给客户，绝对不会有信誉上的损失（即使做了常用功能的测试，也不能保障产品就已经达到的交付标准，实在是中彩票的事情），从长远来看，会有更多的收益；</p><p>作为测试，我们没有任何权利自己做风险处理，“测客户关心的，测主要功能”都是错误的测试行为；</p><p>作为测试，坚守自己的职业道德底线，只做职责范围内和力所能及的事情；</p><p>最后，一个大话，作为测试，不仅需要对支付你工资的老板负责，也请为你手中的产品负责，为客户支付的金钱负责。</p><h3 id="如果让你测试一个完全不熟悉的系统，怎么办"><a href="#如果让你测试一个完全不熟悉的系统，怎么办" class="headerlink" title="如果让你测试一个完全不熟悉的系统，怎么办"></a>如果让你测试一个完全不熟悉的系统，怎么办</h3><p>前提当然是可能没有需求说明书，甚至没有产品架构图<br>看到testerhome上一个回答，很有启发性<br>没有标准答案，参考如下：</p><ol><li><p>先去直接操作和观察被测物。（比直接奔向需求要加分很多，想一下，你实际工作中，快速理解一个东西靠的是什么？肯定不是先读文档，且不说这些文档是不是能够正确的描述被测物）</p></li><li><p>其他信息来源：同类产品，说明书，直接操作、观察被测物，原有版本，找产品经理，找开发，找销售，运维，客服，找用户，公司知识库，历史邮件，会议纪要，原来的各种文档，代码，google，相关法规，行业标准。。。</p></li><li><p>如果项目进度很赶，会先上手操作，参考能找到的一切文档及信息源，通过迭代，一边学一边加深理解，一边给出质量反馈；</p></li><li><p>思考是什么原因造成这样的局面：没有需求文档，没有架构图，开发很赶没空搭理。怎么解决：推动知识库建设和必要的文档输出，也是很重要的。</p></li></ol><h3 id="怎么优化测试工作"><a href="#怎么优化测试工作" class="headerlink" title="怎么优化测试工作"></a>怎么优化测试工作</h3><p>开发提测质量不高。测试的头几天，很多主流程都走不通，导致测试总是在等待，或者是跟着开发一起联调。而这段时间，已经被习惯性的认为是测试时间了，因为：提测了</p><p>项目抱怨，测试时间过长，如何缩短测试时间</p><p>先分析测试时间过长的原因，可能是：</p><ol><li><p>测试环境不可用，测试环境被占用</p></li><li><p>开发提测质量不高，主流程都走不通</p></li></ol><p>解决办法：<br>关于环境问题，可能可以实施：</p><ol><li><p>监控环境使用率，可用率（时间占比）；</p></li><li><p>规范部署，部署时间，操作人，checklist；</p></li><li><p>制定规则，权限分明，操作环境的人员，分工；</p></li><li><p>确定部署人员，backup人员，完整可行的部署手册</p></li><li><p>环境分组，分版本操作（更新devops技能，docker容器化进行环境隔离） </p></li><li><p>等等… </p></li></ol><p>关于提测质量</p><p>测试可以：</p><ol><li><p>有明确的测试计划，并让所有干系人都有明确的预期</p></li><li><p>测试依据风险测试，最大的风险得到最快的cover，科学分配时间，明显缩短bug反馈时间弧</p></li><li><p>bug严格管理，所有重要bug都及时修复</p></li><li><p>良好的沟通和汇报机制，每天让团队主要干系人清晰的知道，距离发布还差多远</p></li><li><p>外部资源联调非常早的进行，不会让它在测试后期成为测试blocker。</p></li></ol><p>要求开发可以：</p><ol><li><p>根据测试提供冒烟用例，开发必须完成一定程度的自测才能提测。</p></li><li><p>测试和开发做自动化同期共建，在开发过程中，核心功能就被自动化用例保护起来了。</p></li><li><p>开发切分feature提测，而不是攒一个大招一下子提一坨</p></li><li><p>代码Codereview变成团队常规活动，QA在早期跟进核心代码，把问题坑杀在萌芽阶段</p></li></ol><p>结合新的理念，测试左移：提前参与；测试右移：生产监控体系；全面保障产品质量，并且提高测试效率。</p>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>闲谈测试理论</title>
      <link href="2019/05/28/%E9%97%B2%E8%B0%88%E6%B5%8B%E8%AF%95%E7%90%86%E8%AE%BA/"/>
      <url>2019/05/28/%E9%97%B2%E8%B0%88%E6%B5%8B%E8%AF%95%E7%90%86%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<p>闲谈测试理论</p><a id="more"></a><h3 id="测试理念"><a href="#测试理念" class="headerlink" title="测试理念"></a>测试理念</h3><p>也是个人的测试坚持吧，有很多，最在意的几条</p><p><strong>不为进度牺牲质量</strong></p><p><strong>软件测试，绝对不存在随便点点</strong></p><p><strong>测试人员要全力关注的是测试设计</strong></p><p><strong>测试工程师，是产品的第一批用户，关注用户满意度</strong></p><h3 id="测试工作"><a href="#测试工作" class="headerlink" title="测试工作"></a>测试工作</h3><h4 id="从需求出发"><a href="#从需求出发" class="headerlink" title="从需求出发"></a>从需求出发</h4><p>软件产品的设计、研发、测试、投产，一定是为了满足一定的需求，PRD（产品需求文档）所描述的产品需求，是切研发、测试开展的基础。或许现在很多公司号称敏捷开发， 没有PRD，那也一定会在类似wiki上有相应的记载，如果这个也没有，那产品最终的质量是很值得怀疑的，毕竟一点需求痕迹都没有，那测试人员的测试根据，就只是开发实现了，比起PO的需求，已经产生了很大的偏差。</p><p>测试人员进行软件测试必须从需求出发。首先要全面了解需求，包括其背景、关联性、用户特点等；其次要深入挖掘隐含的需求和关联，包括某个需求隐含了 对于系统现有功能的修改等等。 我们只有在全面、深入了解需求的基础上，才能设计全面、有效的测试用例来进行测试，以满足对于软件产品满足需求的基本质量保证。</p><h4 id="测试设计"><a href="#测试设计" class="headerlink" title="测试设计"></a>测试设计</h4><p>测试活动，最应该关注的是测试设计，而不是最后冷冰冰的执行了多少多少用例，提交了多少多少bug。</p><p>测试设计的基础是对于需求的全面理解，并且在需求的基础上，对于需求实现的设计进行一定的了解；很多测试人员进行测试活动的依据都是需求文档，而忽略了开发的逻辑设计这一块；如果可以进行一定的开发设计分析的话，可以帮助我们测试人员更加全面的进行质量验证（有些时候，开发是可以实现需求，但是会出现数组溢出等问题，这样的问题，在其他地方可能就会引起重大的bug）</p><p>个人觉得，关注测试设计，才是关注了软件测试之道</p><h4 id="测试目标"><a href="#测试目标" class="headerlink" title="测试目标"></a>测试目标</h4><p>需要明确的是，软件测试，是在生命周期的接近最末端，单单靠测试，是无法保证软件质量的，测试人员，是软件质量的验证者，并不是保障，软件质量需要整个生命周期，整个团队一起努力。</p><p>软件测试并不能保证测试活动结束之后，产品没有bug，这是不现实的，没有一个软件产品可以号称自己没有bug，同样，这也不是测试的目标。</p><p>引用网上看到的一句话：<br><strong>测试活动-是一个运用测试的思维和各种测试理论及方法，将所测试的软件产品的每一个功能都改变成一组特定的输入和一组特定的输出一一确定对应的形式，形成测试用例，然后待开发人员提交测试后，在测试环境部署被测程序，根据测试用例进行主动测试的过程。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>所谓测试新时代</title>
      <link href="2019/05/27/%E6%89%80%E8%B0%93%E6%B5%8B%E8%AF%95%E6%96%B0%E6%97%B6%E4%BB%A3/"/>
      <url>2019/05/27/%E6%89%80%E8%B0%93%E6%B5%8B%E8%AF%95%E6%96%B0%E6%97%B6%E4%BB%A3/</url>
      
        <content type="html"><![CDATA[<p>所谓测试新时代</p><a id="more"></a><h3 id="2019-软件测试"><a href="#2019-软件测试" class="headerlink" title="2019 软件测试"></a>2019 软件测试</h3><p>翻到了<code>World Quality Report 2018-19</code>看了好几项，也看了testerhome，软件质量报告等优秀公众号的文章，世界的确在变。</p><p>2019甚至之后很多年，国内的软件测试和质量保障人员的职责，已经不是单纯的找bug，现在我们需要做的，是客户满意度和业务成果的推动者。<br>刚入行时候，就一直挂在嘴边的一句话，软件测试，是要站在客户角度看问题，但是随着节奏越来越快，“涉世”越来越深，逐渐的，也就成了，找到个bug，提交各jira，结束，曾几何时，我们就迷失了自己；现在<code>World Quality Report 2018-19</code>再次提出了，<strong>客户满意度</strong>这个词，也是对我们已经迷茫的测试人员一个警醒。</p><h4 id="2019软件测试的趋势"><a href="#2019软件测试的趋势" class="headerlink" title="2019软件测试的趋势"></a>2019软件测试的趋势</h4><h5 id="AI在质量保障和测试中的作用"><a href="#AI在质量保障和测试中的作用" class="headerlink" title="AI在质量保障和测试中的作用"></a>AI在质量保障和测试中的作用</h5><p>随着过去一年甚至几年的AI大潮，AI技术在软件测试中越来越有应用市场，对于自动化的保障、对本身的AI产品的测试、使用AI进行质量预测等等，说实话，是个新技术，也是未来的一个趋势，但是目前该方案还没有那么的普及，很多公司，自身都没有响应的人工智能开发，所以，至少对我来说，是个值得参考的方向，但当前阶段，我不会去过多关注。</p><h5 id="敏捷以及devops"><a href="#敏捷以及devops" class="headerlink" title="敏捷以及devops"></a>敏捷以及devops</h5><p>这个，至少在我现在在的公司，是大谈特谈，从最高层开始，大力推行所谓敏捷开发，敏捷团队，说实话，一个小而优的团队，进行快速迭代对于产品来说，肯定是好的，同时配以devops，辅助CI\CD，全自动化回滚，测试等，可以想象，这样的团队，日常开发、测试、发布的效率有多高。但是实际上呢，从我现在公司的状况来看，一味的牺牲质量去追求速度，为了敏捷实施敏捷，到头来是留下了一堆祸根，客户生产问题接踵而至，整个产线疲于应付客户问题，无心关注新的功能点的设计，质量控制，继续往后，新的功能点进行快速迭代上线，缺乏有效的测试，更加增加了祸根数量，为后续的生产问题集中爆发写下了引言，整个，已经形成了恶性循环。</p><p>同时，敏捷团队和devops的转型，已经打乱了原来的QA团队，所有人分配到了不同的产线，这样使得跨项目的合作共享变成尤其困难。这点值得吐槽的更多，算了，不说了。</p><h5 id="自动化"><a href="#自动化" class="headerlink" title="自动化"></a>自动化</h5><p>这个已经不是新鲜事了，几乎所有公司都在追求自动化。也用现在的公司来举例子吧，当前实现的自动化</p><ol><li>产品重构多，自动化脚本几乎每次都会随着产品新迭代进行更新，没有一个可以适应多版本的自动化方案；</li><li>自动化测试环境以及自动化测试数据，准备异常繁琐，大多时间是消耗在环境排查及数据准备上；</li><li>自动化技术及理念不推陈出新，并没有思考过怎么样进行更高效的自动化覆盖，一味的沉溺于维护当前脚本；</li></ol><h5 id="测试环境和成本"><a href="#测试环境和成本" class="headerlink" title="测试环境和成本"></a>测试环境和成本</h5><p>关于测试环境和测试数据，很多公司做法不一样，但是同样的，对于测试来说，很多时候，问题是出现在测试环境上，很多时间是消耗在准备测试数据上，如何进行快速的测试环境部署，以及如何保障测试数据复用真的是衡量一个企业测试团队成熟度的一项指标。</p><h4 id="应对策略"><a href="#应对策略" class="headerlink" title="应对策略"></a>应对策略</h4><h5 id="以智能的、分阶段的方式提升基础自动化和智能测试自动化水平"><a href="#以智能的、分阶段的方式提升基础自动化和智能测试自动化水平" class="headerlink" title="以智能的、分阶段的方式提升基础自动化和智能测试自动化水平"></a>以智能的、分阶段的方式提升基础自动化和智能测试自动化水平</h5><p>未来，自动化肯定是测试的必备技能，团队的自动化测试水平，很直接的会影响到后续一系列开展，是真的可以决定团队是否能真正开展敏捷的关键。</p><p><code>World Quality Report 2018-19</code>给的建议如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1, 优化测试</span><br><span class="line">2，实施基础的自动化测试</span><br><span class="line">3，采用智能的、自适应的测试自动化方案让自动化变得更加“智能”</span><br></pre></td></tr></table></figure><h5 id="以非孤立的方式实施测试数据和测试环境的管理"><a href="#以非孤立的方式实施测试数据和测试环境的管理" class="headerlink" title="以非孤立的方式实施测试数据和测试环境的管理"></a>以非孤立的方式实施测试数据和测试环境的管理</h5><p>企业要开始生命周期的自动化，把测试自动化和数据、环境的准备工作一起开展，不要分离开来。另外，要采用更加智能的方式来管理测试环境和数据。</p><h5 id="构建超出测试开发（SDET）之外的质量工程技能"><a href="#构建超出测试开发（SDET）之外的质量工程技能" class="headerlink" title="构建超出测试开发（SDET）之外的质量工程技能"></a>构建超出测试开发（SDET）之外的质量工程技能</h5><p>这项，原谅才疏学浅，暂时get不到，抄录一下。。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">敏捷、DevOps、云、IoT、区块链和AI这些新趋势的发展，以及更加自动的、集成的质量保障方法的需求，企业需要关注新的质量技能。</span><br><span class="line"></span><br><span class="line">推荐以下方式做好质量保障能力建设：</span><br><span class="line"></span><br><span class="line">1、第一优先级是吸引敏捷测试专家，需要具备功能自动化技能和领域测试技能，自动化测试将是每个质量保障人员的必备技能；</span><br><span class="line"></span><br><span class="line">2、第二优先级是吸引 SDET ，他们的必备技能要求有高级自动化测试、白盒测试、开发和平台构建能力，同时最好还有 AI 应用的基础算法应用能力和自然语言处理技能；</span><br><span class="line"></span><br><span class="line">3、第三优先级是吸引拥有一些特定 QA 技能集的人员，比如安全等非功能测试、测试环境和数据的管理技能等；</span><br><span class="line"></span><br><span class="line">4、第四优先级是吸引高级 QA 专家，需要有AI架构技能，以构建能够执行重复、智能任务的“智能资产”，这些技能由深度机器学习概念和算法组成，比如决策树、分类器、神经网络、高级统计学和数据优化技能。</span><br></pre></td></tr></table></figure><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>1，未来，我们需要更加关注客户满意度，追求速度，忽视客户满意度，迟早药丸；<br>2，低水平的自动化测试，测试数据及测试环境的管理已经影响到整个敏捷的实施；加强自动化培训，更加规范科学的进行测试数据及环境的管理，才能更好保障QA实施；<br>3，测试人员，需要更多的必备技能，来应对未来的挑战；这点上，个人还是坚持，测试人员需要明了并坚定自己的测试理念。以此为根基，进行测试技术的扩展，才是可行的路。</p><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><blockquote><p><a href="https://mp.weixin.qq.com/s/voKNIhVOPLrjgQhDUhte9w">2019 软件测试行业 5 大关键趋势与应对策略</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试 有惑</title>
      <link href="2019/05/27/%E6%B5%8B%E8%AF%95-%E6%9C%89%E6%83%91/"/>
      <url>2019/05/27/%E6%B5%8B%E8%AF%95-%E6%9C%89%E6%83%91/</url>
      
        <content type="html"><![CDATA[<p>测试有惑</p><a id="more"></a><p>最近因为一些事情，一度要转devops，一个我们这样的小互联网环境下还比较不常用的词汇；同时也遇上要手工造200多个excel这样的无语需求，烦躁之际，看到几篇文章，静下来好好想想，我现在的软件测试，是不是已经迷茫了。</p><h3 id="测试有惑"><a href="#测试有惑" class="headerlink" title="测试有惑"></a>测试有惑</h3><p>最近挺长时间，身边充斥着新兴技术，“大数据”、“容器化”、“微服务”、“service mesh”、“AI”等等，很长一段时间，我也像绝大多数人一样，追在后面，无尽的翻阅着“大数据下如何进行软件测试”、“如何测试分布式系统”、“容器化时代的测试技术”等等诸如此类的文章，渐渐的，从一个测试，学了python，关注了docker，k8s，到如今的servicemesh，istio；渐渐的，也感觉越来越无力，越来越迷茫，我的所作，是不是已经完成偏成了追求工具，追求新鲜，对于软件测试最基本的理论，是不是已经忘记的差不多了。</p><p>看到一篇博客，作者写了一句话，我也问了自己，发现，有点悲哀。</p><p><strong>面对被测对象，你的测试理念是什么</strong>，是否清楚，为何而战。</p><p>技术，永远处于不断重构中，而自己的测试理念，信念，才是作为测试从业者的根基，互联网的世界里，技术上的推陈出新永远比你的学习速度要快，一味的去追求技术，是不是需要担心，有一天，作为没有坚实测试理念的我们，会被技术革了命。</p><p>越来越迷茫，默然做着自己都不知道为什么的测试的我们，是不是可以稍微等一等，停下来重新寻找，或许已经丢失了的，我们的软件测试之道。</p>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>excel随机函数</title>
      <link href="2019/05/23/excel%E9%9A%8F%E6%9C%BA%E5%87%BD%E6%95%B0/"/>
      <url>2019/05/23/excel%E9%9A%8F%E6%9C%BA%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>excel随机函数</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>需要给客户一份性能报告，然后有些数据需要稍微修饰下，服务器资源部分，采用的是之前nmon生成的报告，nmon的报告可以通过修改数据，自动生成图像，然后我们就需要在一个数值区间内生成几千个数据，来尽量真实点（o(╥﹏╥)o）（好没下限的感觉）</p><p>例如，现在需要出一个CPU使用率的监控图像，采用nmon和nmon_analyser生成了图像之后，找到cpu sheet页，通过更改User%，Sys%，Wait%以及Idle%来生成需要的数据的监控图像</p><p>现在需要生成一个CPU使用率在76%左右的图像，也就是需要User%的值大约在[74%, 78%]这个区间内，然后需要的是1000个这个区间的随机数，生成随机数的方法很多，这边介绍的excel的函数</p><h3 id="RAND"><a href="#RAND" class="headerlink" title="RAND()"></a>RAND()</h3><p>直接上用法</p><p>如果要生成[0, 10]，单元格内输入<code>=RAND()*10</code>，回车即可，按<code>F9</code>刷新</p><p>如果要生成[0.50]，单元格内输入<code>=RAND()*50</code>，回车即可，按<code>F9</code>刷新</p><p>然后，如果要生成[1, 8]，单元格内输入<code>=RAND()*7+1</code>，回车即可，按<code>F9</code>刷新</p><p>因此，我们的需求可以在单元格内写<code>=RAND()*4+74</code>，回车即可，按<code>F9</code>刷新<br>（1000条数据，直接往下拖即可）</p><p>纯粹是个无聊小技能。。</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appium使用uiautomator2无法启动app问题</title>
      <link href="2019/05/22/appium%E4%BD%BF%E7%94%A8uiautomator2%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8app%E9%97%AE%E9%A2%98/"/>
      <url>2019/05/22/appium%E4%BD%BF%E7%94%A8uiautomator2%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8app%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>appium使用uiautomator2无法启动app问题</p><a id="more"></a><p>之前有遇到过Android 7之后，使用appium登录进去之后，拿不到元素，page_source获取也超时，找了资料，都说是android 7的原因，解决办法很简单，appium起的时候，加个参数就行了,改成下面这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">desired_caps &#x3D; &#123;&#125;</span><br><span class="line">desired_caps[&#39;platformName&#39;] &#x3D; &#39;Android&#39;</span><br><span class="line">desired_caps[&#39;platformVersion&#39;] &#x3D; &#39;8.1.0&#39;</span><br><span class="line">desired_caps[&#39;deviceName&#39;] &#x3D; &#39;yanfyang&#39;</span><br><span class="line">desired_caps[&#39;appPackage&#39;] &#x3D; &#39;com.kuaikan.comic&#39;</span><br><span class="line">desired_caps[&#39;appActivity&#39;] &#x3D; &#39;com.kuaikan.comic.ui.LaunchActivity&#39;</span><br><span class="line">desired_caps[&#39;automationName&#39;] &#x3D; &#39;uiautomator2&#39;</span><br><span class="line">desired_caps[&#39;noReset&#39;] &#x3D; True</span><br><span class="line"></span><br><span class="line">driver &#x3D; webdriver.Remote(&#39;http:&#x2F;&#x2F;localhost:4723&#x2F;wd&#x2F;hub&#39;, desired_caps)</span><br></pre></td></tr></table></figure><p>增加了一个：<code>desired_caps[&#39;automationName&#39;] = &#39;uiautomator2&#39;</code></p><p>这样直接启动，会有点问题</p><h3 id="Message-An-unknown-server-side-error-occurred-while-processing-the-command-Original-error-Could-not-sign-with-default-certificate"><a href="#Message-An-unknown-server-side-error-occurred-while-processing-the-command-Original-error-Could-not-sign-with-default-certificate" class="headerlink" title="Message: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate."></a>Message: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate.</h3><p>后面还有更有价值的报错，完整的不记得了，大概是这样</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files (x86)\Appium\resources\app\node_modules\appium-uiautomator2-server\apks\appium-uiautomator2-server-v3.1.1.apk       Access denied</span><br></pre></td></tr></table></figure><p>看到<code>Access denied</code>，首先就检查了下，因为当前电脑是域账号登录的，不是管理员，对那个报错的文件夹，权限只有读，没有写的权限，看样子问题是权限的</p><p><strong>解决办法</strong>：打开appium时候，右键使用管理员权限打开，这样就可以了</p><h3 id="命令行方式管理员运行appium"><a href="#命令行方式管理员运行appium" class="headerlink" title="命令行方式管理员运行appium"></a>命令行方式管理员运行appium</h3><p>linux或者mac好解决，sudo 即可，windows下，查了点资料，有个命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runas &#x2F;user:Administrator Appium.exe</span><br></pre></td></tr></table></figure><p>需要进入appium目录下执行</p><p>执行这条命令，会让输入一个administrator的密码，这个密码，可以更改，方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">右击我的电脑——管理——本地用户和组——点击用户——选择administrator——右击设置密码</span><br></pre></td></tr></table></figure><h4 id="1327-用户帐户限制阻止了此用户进行登录。例如：不允许使用空密码，登录次数的限制，或强制实施的某个策略限制。"><a href="#1327-用户帐户限制阻止了此用户进行登录。例如：不允许使用空密码，登录次数的限制，或强制实施的某个策略限制。" class="headerlink" title="1327: 用户帐户限制阻止了此用户进行登录。例如：不允许使用空密码，登录次数的限制，或强制实施的某个策略限制。"></a>1327: 用户帐户限制阻止了此用户进行登录。例如：不允许使用空密码，登录次数的限制，或强制实施的某个策略限制。</h4><p>输入密码之后，还是会报错上述错误，这个，是由于没有解禁用户造成的，解禁办法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">右击我的电脑——管理——本地用户和组——点击用户——选择administrator——右击——选择属性——取消勾选  账户已禁用</span><br></pre></td></tr></table></figure><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> appium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> appium </tag>
            
            <tag> uiautomator2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jumpserver简单使用</title>
      <link href="2019/05/21/jumpserver%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>2019/05/21/jumpserver%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>jumpserver简单使用</p><a id="more"></a><p>Jumpserver搭建完成之后，就可以通过堡垒机跳转到制定的机器了，登录jumpserver：</p><ol><li><p>要么直接是命令行(xshell 客户端)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@192.168.0.1 2222</span><br></pre></td></tr></table></figure><p>回车再输入密码即可（192.168.0.1是jumpserver搭建的服务器的ip）</p></li><li><p>使用xshell客户端秘钥进行登录，jumpserver服务器创建登录用户，设置密码，生成公钥和私钥，xshell使用该用户进行登录（具体设置后面会说明）</p></li></ol><p>jumpserver登录web页面有几块：<br><code>仪表盘</code>、<code>用户管理</code>、<code>资产管理</code>、<code>权限管理</code>、<code>会话管理</code>、<code>作业中心</code>、<code>日志审计</code>、<code>系统设置</code><br>简单介绍一下基本的一些用法</p><h3 id="系统设置"><a href="#系统设置" class="headerlink" title="系统设置"></a>系统设置</h3><p>系统设置里面有几个，基本设置、邮件设置、LDAP设置、终端设置、安全设置</p><p><strong>基本设置</strong>很简单，配置下当前jumpserver web端的url即可，Email主题前缀就是发送的邮件主题前缀，可以自定，没啥好说的;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 修改 url 的&quot;localhost&quot;为你的实际 url 地址, 否则邮件收到的地址将为&quot;localhost&quot; 也无法创建新用户</span><br></pre></td></tr></table></figure><p><strong>邮件设置</strong>，根据实际的邮件配置即可，使用SSL，端口为465，设置完成之后，可以点击“测试连接”试试看能不能成功；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 点击页面上边的&quot;邮件设置&quot;, 进入邮件设置页面</span><br><span class="line"># 默认使用 25 端口, 不勾选 SSL 和 TLS; 如果需要勾选 SSL, 端口需要修改成 465; 如果需要勾选 TLS, 端口需要改成 587</span><br><span class="line"># 不可以同时勾选 SSL 和 TLS</span><br><span class="line"># 配置邮件服务后, 点击页面的&quot;测试连接&quot;按钮, 如果配置正确, Jumpserver 会发送一条测试邮件到您的 SMTP 账号邮箱里面, 确定收到测试邮件后点击保存即可使用</span><br></pre></td></tr></table></figure><p><strong>LDAP设置</strong>，统一用户认证，看你需不需要使用域账号了，具体怎么配置可以咨询IT；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 如果不需要使用&quot;ldap&quot;用户登陆 jumpserver, 可以直接跳过, 不需要设置</span><br><span class="line"># 先&quot;测试&quot;通过才能保存</span><br><span class="line"># DN 和 OU 一定要完整(如 &quot;DN:cn&#x3D;Manage,ou&#x3D;Jumpserver,dc&#x3D;jumpserver,ou&#x3D;org&quot;)</span><br><span class="line"># 注：可借用第三方 gui 工具查看 ldap 用户的属性, 新版本已经支持中文名登录, 即cn&#x3D;中文也可正常使用</span><br></pre></td></tr></table></figure><p><strong>终端设置</strong>，按需勾选，密码认证，密钥认证等；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># &quot;密码认证&quot;和&quot;密钥认证&quot;是 SSH 连接跳板机时所使用的认证方式(都不选会造成无法使用 SSH 方式连接登录跳板机, 不影响 web 登录)</span><br><span class="line"># &quot;Telnet成功正则表达式&quot; telnet设备登陆失败需要设置</span><br><span class="line"># &quot;命令存储&quot;&quot;录像存储&quot;位置设置</span><br><span class="line"></span><br><span class="line"># &quot;命令存储&quot;&quot;录像存储&quot;修改后, 需要在Jumpserver 会话管理-终端管理 修改terminal的配置 录像存储 命令记录, 然后重启 Jumpserver 服务</span><br><span class="line"># 设置后重启 Coco 才能生效</span><br></pre></td></tr></table></figure><p><strong>安全设置</strong>，也是按需勾选；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># &quot;MAF二次认证&quot;勾选会开启全局强制&quot;MFA&quot;, 所有 jumpserver 用户必须使用动态口令进行认证登录(即时生效)</span><br><span class="line"># &quot;限制登录失败&quot;和&quot;限制登录时间&quot;设置需要重启 jumpserver 才能生效</span><br><span class="line"># &quot;SSH最大空闲时间&quot;设置需要重启 coco 才能生效</span><br><span class="line"># &quot;密码校验规则&quot;设置立即生效</span><br></pre></td></tr></table></figure><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><p>用户管理分用户列表和用户组，顾名思义，jumpserver的用户和组；根据实际需要创建对应的用户，和组，用户分到对应的组即可；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 点击页面左侧&quot;用户列表&quot;菜单下的&quot;用户列表&quot;, 进入用户列表页面</span><br><span class="line"># 点击页面左上角&quot;创建用户&quot;按钮, 进入创建用户页面, (也可以通过右上角导入模版进行用户导入)</span><br><span class="line"># 其中, 用户名即 Jumpserver 登录账号(具有唯一性, 不能重名)。名称为页面右上角用户标识(可重复)</span><br><span class="line"># 成功提交用户信息后, Jumpserver 会发送一条设置&quot;用户密码&quot;的邮件到您填写的用户邮箱</span><br><span class="line"># 点击邮件中的设置密码链接, 设置好密码后, 您就可以用户名和密码登录 Jumpserver 了。</span><br><span class="line"># 用户首次登录 Jumpserver, 会被要求完善用户信息, 按照向导操作即可。</span><br><span class="line">注：MFA 即 Google Authenticator, 使用此软件需要APP时间与浏览器时间同步</span><br></pre></td></tr></table></figure><p>关于创建用户及完善用户信息，为了方便后续使用xshell客户端可以使用密钥登录，需要一点注意：</p><ol><li>首先，在jumpserver服务器上创建登录的账号，设置密码，生成公钥和私钥(root账号)：</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#新增用户</span><br><span class="line">useradd kyle</span><br><span class="line"></span><br><span class="line"># 设置新密码</span><br><span class="line">passwd kyle</span><br><span class="line"></span><br><span class="line"># 生成公钥及私钥（记得过程中输入密钥的密码，后面会用到）</span><br><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p>在用户的家目录下（/home/kyle），会有<code>.ssh</code>文件夹（ls -al），里面是生成的公钥和私钥（cd /home/kyle/.ssh &amp;&amp; ls -al），这边用<code>id_rsa_1</code>和<code>id_rsa_1.pub</code>表示，便于识别</p><p>在jumpserver服务器上创建完账号kyle之后，在jumpserver web界面创建用户，用户名使用kyle，邮件自填，点击保存，等着收邮件，邮件会提示改密码，更改了密码之后，会进行完善用户信息，最主要的就是一个密钥，将之前生生成的公钥（id_rsa_1.pub）内容填进去即可(cat，复制)</p><h3 id="资产管理"><a href="#资产管理" class="headerlink" title="资产管理"></a>资产管理</h3><p>资产管理顾名思义就是管理设备的地方</p><h4 id="资产列表"><a href="#资产列表" class="headerlink" title="资产列表"></a>资产列表</h4><p>管理资产的节点，左边是资产树，右击可以进行增删改操作，右侧是该节点下的资产，界面挺简单</p><h4 id="网域列表"><a href="#网域列表" class="headerlink" title="网域列表"></a>网域列表</h4><p>这个功能没用过，看官方文档介绍的，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">网域功能是为了解决部分环境（如：混合云）无法直接连接而新增的功能，原理是通过网关服务器进行跳转登录。 </span><br><span class="line">JMS &#x3D;&gt; 网域网关 &#x3D;&gt; 目标资产</span><br></pre></td></tr></table></figure><h4 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h4><p>jumpserver的管理用户，可以理解为资产上的root用户，或者是具备all sudo权限的用户；页面直接点创建管理用户，填写资产机器的root账号信息，或者用all sudo权限的账号信息即可（有个添加秘钥的选项，这个可以设置，root在目标机器上生成公钥和私钥，再引过来即可）</p><h4 id="系统用户"><a href="#系统用户" class="headerlink" title="系统用户"></a>系统用户</h4><p>官方解释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统用户是 Jumpserver跳转登录资产时使用的用户，可以理解为登录资产用户，如 web, sa, dba(&#96;ssh web@some-host&#96;), 而不是使用某个用户的用户名跳转登录服务器(&#96;ssh kyle@some-host&#96;); 简单来说是 用户使用自己的用户名登录Jumpserver, Jumpserver使用系统用户登录资产。 系统用户创建时，如果选择了自动推送 Jumpserver会使用ansible自动推送系统用户到资产中，如果资产(交换机、windows)不支持ansible, 请手动填写账号密码。</span><br></pre></td></tr></table></figure><p>以下为官方文档的注意事项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># &quot;系统用户&quot;是 Jumpserver 跳转登录资产时使用的用户, 用户使用该用户登录资产</span><br><span class="line"># &quot;自动生成密码&quot;、&quot;自动推送&quot;、&quot;Sudo&quot;等功能需要对应资产的&quot;管理用户&quot;是且有root权限, 否则自动推送失败</span><br><span class="line"># ssh 协议的 &quot;Sudo&quot; 栏设定用户的 sudo 权限,</span><br><span class="line"># ssh 协议如果创建的&quot;系统用户&quot;已在资产上面存在, &quot;推送&quot;将会覆盖掉原用户的&quot;home&quot;目录权限(注: 替换成700权限)</span><br><span class="line"># ssh 协议的 &quot;ssh私钥&quot; 如果私钥有密码, 请把key的密码填在密码栏上, 目前仅支持 RSA DSA 格式私钥</span><br><span class="line"></span><br><span class="line"># 这里简单举几个 &quot;sudo&quot; 设置例子</span><br><span class="line">Sudo &#x2F;bin&#x2F;su  # 当前系统用户可以免sudo密码执行sudo su命令</span><br><span class="line"></span><br><span class="line">Sudo &#x2F;usr&#x2F;bin&#x2F;git, &#x2F;usr&#x2F;bin&#x2F;php, &#x2F;bin&#x2F;cat, &#x2F;bin&#x2F;more, &#x2F;bin&#x2F;less, &#x2F;usr&#x2F;bin&#x2F;tail</span><br><span class="line"># 当前系统用户可以免sudo密码执行git php cat more less tail</span><br><span class="line"></span><br><span class="line">Sudo !&#x2F;usr&#x2F;bin&#x2F;yum  # 当前系统用户不可以执行sudo yum命令</span><br><span class="line"></span><br><span class="line"># 此处的权限应该根据使用用户的需求汇总后定制, 原则上给予最小权限即可</span><br><span class="line"></span><br><span class="line"># &quot;系统用户&quot;创建时, 如果选择了&quot;自动推送&quot; Jumpserver 会使用&quot;Ansible&quot;自动推送系统用户到资产中, &quot;root&quot;用户不支持推送</span><br><span class="line"># 如果资产(交换机、Windows)不支持&quot;Ansible&quot;, 请去掉&quot;自动生成密钥&quot;、&quot;自动推送&quot;勾选。手动填写资产上已有的账号及账号密码</span><br><span class="line"></span><br><span class="line"># 如果想让用户登录资产时自己输入密码, 可以在创建系统用户时选择&quot;手动登录&quot;</span><br></pre></td></tr></table></figure><h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><p>权限管理下，主要就是<code>资产授权</code>，可以创建授权规则，选择用户或者组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># &quot;名称&quot;, 授权的名称, 不能重复</span><br><span class="line"># &quot;用户&quot;和&quot;用户组&quot;二选一, 不推荐即选择用户又选择用户组</span><br><span class="line"># &quot;资产&quot;和&quot;节点&quot;二选一, 选择节点会包含节点下面的所有资产</span><br><span class="line"># &quot;系统用户&quot;, 及所选的用户或用户组下的用户能通过该系统用户使用所选节点或者节点下的资产</span><br><span class="line"># 用户(组), 资产(节点), 系统用户是一对一的关系, 所以当拥有 Linux、Windows 不同类型资产时, 应该分别给 Linux 资产和 Windows 资产创建授权规则</span><br></pre></td></tr></table></figure><h3 id="Jumpserver一些名词解释"><a href="#Jumpserver一些名词解释" class="headerlink" title="Jumpserver一些名词解释"></a>Jumpserver一些名词解释</h3><h4 id="用户管理-1"><a href="#用户管理-1" class="headerlink" title="用户管理"></a>用户管理</h4><ul><li><p>用户组<br>多个用户可以组合成用户组，为了方便进行授权，可以将一个部门或者几个用户组成用户组，在授权中使用组授权，该组中的用户拥有所有授权的主机权限</p></li><li><p>用户<br>用户是授权和登陆的主体，将来为每个员工简历一个账户，用来登录跳板机，将资产授权给改用户</p></li></ul><h4 id="资产管理-1"><a href="#资产管理-1" class="headerlink" title="资产管理"></a>资产管理</h4><ul><li><p>资产<br>资产通常是我们的服务器、网络设备等，将资产授权给用户，用户则会有权限登录资产，执行命令等</p></li><li><p>管理账号<br>添加资产时需要一个管理账号，该账号是该资产上已有的有管理权限的用户，如root，或者是有NOPASSWD:ALL sudo权限的用户，改管理账号用来向资产推送系统用户，为系统用户添加sudo，获取资产的一些信息</p></li></ul><h4 id="授权管理"><a href="#授权管理" class="headerlink" title="授权管理"></a>授权管理</h4><ul><li>系统用户<br>系统用户是服务器上建立的一些真实存在的可以ssh登陆的用户，如dev,sa,dba等，系统用户可以使用jumpserver推送到服务器上，也可以利用自己公司的工具进行推送，授权时将用户、资产、系统用户关联起来，则表明用户有权限登陆该资产的这个系统用户，例如：用户<strong>小明</strong>以<strong>dev</strong>系统用户登录192.168.0.2资产，简单理解就是，<strong>将某个资产上的某个系统用户映射给这个用户登录</strong></li></ul><h4 id="用户作用："><a href="#用户作用：" class="headerlink" title="用户作用："></a>用户作用：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">登录web（使用用户）</span><br><span class="line"></span><br><span class="line">登陆跳板机（使用用户）</span><br><span class="line"></span><br><span class="line">跳转登陆Client端（使用系统用户）</span><br><span class="line"></span><br><span class="line">系统用户 关联sudo（就是sudo授权），该系统用户就拥有sudo权限</span><br><span class="line"></span><br><span class="line">推送系统用户（使用管理用户，管理用户是Client端上已有的用户并且有sudo权限）</span><br></pre></td></tr></table></figure><p>以上，完~</p><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><blockquote><p><a href="http://docs.jumpserver.org/zh/docs/quick_start.html">官方指导文档</a><br><a href="https://www.cnblogs.com/kevingrace/p/5587265.html">优秀指导文档</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Jumpserver </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7安装jumpserver堡垒机</title>
      <link href="2019/05/20/centos7%E5%AE%89%E8%A3%85jumpserver%E5%A0%A1%E5%9E%92%E6%9C%BA/"/>
      <url>2019/05/20/centos7%E5%AE%89%E8%A3%85jumpserver%E5%A0%A1%E5%9E%92%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>centos7安装jumpserver堡垒机</p><a id="more"></a><h3 id="Jumpserver"><a href="#Jumpserver" class="headerlink" title="Jumpserver"></a>Jumpserver</h3><p>jumpserver是一款常用的开源堡垒机方案，基于python+django，适合上手，安装需要确保python3环境</p><blockquote><p><a href="http://tokyle.com/%2F2018%2F04%2F20%2FCentos%E4%B8%8B%E5%8D%87%E7%BA%A7python2-7%E5%88%B03-6%2F">centos7下python2和python3共存</a></p></blockquote><h3 id="安装jumpserver"><a href="#安装jumpserver" class="headerlink" title="安装jumpserver"></a>安装jumpserver</h3><h4 id="克隆项目"><a href="#克隆项目" class="headerlink" title="克隆项目"></a>克隆项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt</span><br><span class="line"></span><br><span class="line">git clone --depth&#x3D;1 https:&#x2F;&#x2F;github.com&#x2F;jumpserver&#x2F;jumpserver.git</span><br></pre></td></tr></table></figure><h4 id="安装RPM包"><a href="#安装RPM包" class="headerlink" title="安装RPM包"></a>安装RPM包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;jumpserver&#x2F;requirements</span><br><span class="line"></span><br><span class="line">yum -y install &#96;cat rpm_requirements.txt&#96;</span><br></pre></td></tr></table></figure><h4 id="安装python库依赖"><a href="#安装python库依赖" class="headerlink" title="安装python库依赖"></a>安装python库依赖</h4><p>**tip: ** 安装pip，实际可以使用pip3安装依赖<br>安装pip</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 安装epel扩展源</span><br><span class="line">yum -y install epel-release</span><br><span class="line"></span><br><span class="line"># 安装pip</span><br><span class="line">yum -y install python-pip</span><br><span class="line"></span><br><span class="line"># 清楚cache</span><br><span class="line">yum clean all</span><br></pre></td></tr></table></figure><p><strong>安装依赖</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt -i https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;</span><br></pre></td></tr></table></figure><h4 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h4><p>使用redis作为cache和celery broke</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install redis</span><br><span class="line"></span><br><span class="line">systemctl enable redis</span><br><span class="line"></span><br><span class="line">systemctl start redis</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h4><p>这边使用的是MySQL，安装教程就不写了，很简单，创建jumpserver库和用户：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create database jumpserver  character set utf8;</span><br><span class="line"></span><br><span class="line">create user jumpserver@&#39;%&#39; identified by &#39;pwd&#39;;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;jumpserver&#39;@&#39;%&#39; IDENTIFIED BY &#39;pwd&#39; WITH GRANT OPTION;</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><h4 id="修改jumpserver配置文件"><a href="#修改jumpserver配置文件" class="headerlink" title="修改jumpserver配置文件"></a>修改jumpserver配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;jumpserver</span><br><span class="line"></span><br><span class="line">cp config_example.yml config.yml</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 生成随机SECRET_KEY</span><br><span class="line">SECRET_KEY&#x3D;&#96;cat &#x2F;dev&#x2F;urandom | tr -dc A-Za-z0-9 | head -c 50&#96;</span><br><span class="line"></span><br><span class="line">echo &quot;SECRET_KEY&#x3D;$SECRET_KEY&quot; &gt;&gt; ~&#x2F;.bashrc</span><br><span class="line"></span><br><span class="line"># 生成随机BOOTSTRAP_TOKEN</span><br><span class="line">BOOTSTRAP_TOKEN&#x3D;&#96;cat &#x2F;dev&#x2F;urandom | tr -dc A-Za-z0-9 | head -c 16&#96;</span><br><span class="line"></span><br><span class="line">echo &quot;BOOTSTRAP_TOKEN&#x3D;$BOOTSTRAP_TOKEN&quot; &gt;&gt; ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s&#x2F;SECRET_KEY:&#x2F;SECRET_KEY: $SECRET_KEY&#x2F;g&quot; &#x2F;opt&#x2F;jumpserver&#x2F;config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;BOOTSTRAP_TOKEN:&#x2F;BOOTSTRAP_TOKEN: $BOOTSTRAP_TOKEN&#x2F;g&quot; &#x2F;opt&#x2F;jumpserver&#x2F;config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;# DEBUG: true&#x2F;DEBUG: false&#x2F;g&quot; &#x2F;opt&#x2F;jumpserver&#x2F;config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;# LOG_LEVEL: DEBUG&#x2F;LOG_LEVEL: ERROR&#x2F;g&quot; &#x2F;opt&#x2F;jumpserver&#x2F;config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;# SESSION_EXPIRE_AT_BROWSER_CLOSE: false&#x2F;SESSION_EXPIRE_AT_BROWSER_CLOSE: true&#x2F;g&quot; &#x2F;opt&#x2F;jumpserver&#x2F;config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;DB_PASSWORD: &#x2F;DB_PASSWORD: $DB_PASSWORD&#x2F;g&quot; &#x2F;opt&#x2F;jumpserver&#x2F;config.yml</span><br></pre></td></tr></table></figure><p>查看SECRET_KEY和BOOTSTRAP_TOKEN</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat ~&#x2F;.bashrc</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">echo -e &quot;\033[31m 你的SECRET_KEY是 $SECRET_KEY \033[0m&quot;</span><br><span class="line">echo -e &quot;\033[31m 你的BOOTSTRAP_TOKEN是 $BOOTSTRAP_TOKEN \033[0m&quot;</span><br></pre></td></tr></table></figure><p>人工确认修改没有问题：<code>vim /opt/jumpserver/config.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"># SECURITY WARNING: keep the secret key used in production secret!</span><br><span class="line"># 加密秘钥 生产环境中请修改为随机字符串，请勿外泄, 可使用命令生成 </span><br><span class="line"># $ cat &#x2F;dev&#x2F;urandom | tr -dc A-Za-z0-9 | head -c 49;echo</span><br><span class="line">SECRET_KEY: </span><br><span class="line"></span><br><span class="line"># SECURITY WARNING: keep the bootstrap token used in production secret!</span><br><span class="line"># 预共享Token coco和guacamole用来注册服务账号，不在使用原来的注册接受机制</span><br><span class="line">BOOTSTRAP_TOKEN: </span><br><span class="line"></span><br><span class="line"># Development env open this, when error occur display the full process track, Production disable it</span><br><span class="line"># DEBUG 模式 开启DEBUG后遇到错误时可以看到更多日志</span><br><span class="line">DEBUG: false</span><br><span class="line"></span><br><span class="line"># DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;1.10&#x2F;topics&#x2F;logging&#x2F;</span><br><span class="line"># 日志级别</span><br><span class="line">LOG_LEVEL: ERROR</span><br><span class="line"># LOG_DIR: </span><br><span class="line"></span><br><span class="line"># Session expiration setting, Default 24 hour, Also set expired on on browser close</span><br><span class="line"># 浏览器Session过期时间，默认24小时, 也可以设置浏览器关闭则过期</span><br><span class="line"># SESSION_COOKIE_AGE: 86400</span><br><span class="line">SESSION_EXPIRE_AT_BROWSER_CLOSE: true</span><br><span class="line"></span><br><span class="line"># Database setting, Support sqlite3, mysql, postgres ....</span><br><span class="line"># 数据库设置</span><br><span class="line"># See https:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;1.10&#x2F;ref&#x2F;settings&#x2F;#databases</span><br><span class="line"></span><br><span class="line"># SQLite setting:</span><br><span class="line"># 使用单文件sqlite数据库</span><br><span class="line"># DB_ENGINE: sqlite3</span><br><span class="line"># DB_NAME: </span><br><span class="line"></span><br><span class="line"># MySQL or postgres setting like:</span><br><span class="line"># 使用Mysql作为数据库</span><br><span class="line">DB_ENGINE: mysql</span><br><span class="line">DB_HOST: 127.0.0.1</span><br><span class="line">DB_PORT: 3306</span><br><span class="line">DB_USER: jumpserver</span><br><span class="line">DB_PASSWORD: </span><br><span class="line">DB_NAME: jumpserver</span><br><span class="line"></span><br><span class="line"># When Django start it will bind this host and port</span><br><span class="line"># .&#x2F;manage.py runserver 127.0.0.1:8080</span><br><span class="line"># 运行时绑定端口</span><br><span class="line">HTTP_BIND_HOST: 0.0.0.0</span><br><span class="line">HTTP_LISTEN_PORT: 8080</span><br><span class="line"></span><br><span class="line"># Use Redis as broker for celery and web socket</span><br><span class="line"># Redis配置</span><br><span class="line">REDIS_HOST: 127.0.0.1</span><br><span class="line">REDIS_PORT: 6379</span><br><span class="line"># REDIS_PASSWORD: </span><br><span class="line"># REDIS_DB_CELERY: 3</span><br><span class="line"># REDIS_DB_CACHE: 4</span><br><span class="line"></span><br><span class="line"># Use OpenID authorization</span><br><span class="line"># 使用OpenID 来进行认证设置</span><br><span class="line"># BASE_SITE_URL: http:&#x2F;&#x2F;localhost:8080</span><br><span class="line"># AUTH_OPENID: false  # True or False</span><br><span class="line"># AUTH_OPENID_SERVER_URL: https:&#x2F;&#x2F;openid-auth-server.com&#x2F;</span><br><span class="line"># AUTH_OPENID_REALM_NAME: realm-name</span><br><span class="line"># AUTH_OPENID_CLIENT_ID: client-id</span><br><span class="line"># AUTH_OPENID_CLIENT_SECRET: client-secret</span><br><span class="line">#</span><br><span class="line"># Use Radius authorization</span><br><span class="line"># 使用Radius来认证</span><br><span class="line"># AUTH_RADIUS: false</span><br><span class="line"># RADIUS_SERVER: localhost</span><br><span class="line"># RADIUS_PORT: 1812</span><br><span class="line"># RADIUS_SECRET: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># OTP settings</span><br><span class="line"># OTP&#x2F;MFA 配置</span><br><span class="line"># OTP_VALID_WINDOW: 0</span><br><span class="line"># OTP_ISSUER_NAME: Jumpserver</span><br></pre></td></tr></table></figure><h4 id="运行Jumpserver"><a href="#运行Jumpserver" class="headerlink" title="运行Jumpserver"></a>运行Jumpserver</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;jumpserver</span><br><span class="line"></span><br><span class="line"># 后台运行</span><br><span class="line">.&#x2F;jms start all -d</span><br><span class="line"></span><br><span class="line"># 其他命令</span><br><span class="line">.&#x2F;jms start|stop|status all</span><br></pre></td></tr></table></figure><h3 id="安装SSH-Server和-WebSocket-Server：Coco"><a href="#安装SSH-Server和-WebSocket-Server：Coco" class="headerlink" title="安装SSH Server和 WebSocket Server：Coco"></a>安装SSH Server和 WebSocket Server：Coco</h3><h4 id="clone项目"><a href="#clone项目" class="headerlink" title="clone项目"></a>clone项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --depth&#x3D;1 https:&#x2F;&#x2F;github.com&#x2F;jumpserver&#x2F;coco.git</span><br></pre></td></tr></table></figure><h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;coco&#x2F;requirements</span><br><span class="line"></span><br><span class="line">yum -y install $(cat rpm_requirements.txt)</span><br><span class="line"></span><br><span class="line">pip3 install -r requirements.txt -i https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;</span><br></pre></td></tr></table></figure><h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;coco&#x2F;</span><br><span class="line"></span><br><span class="line">cp config_example.yml config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;BOOTSTRAP_TOKEN: &lt;PleasgeChangeSameWithJumpserver&gt;&#x2F;BOOTSTRAP_TOKEN: $BOOTSTRAP_TOKEN&#x2F;g&quot; &#x2F;opt&#x2F;coco&#x2F;config.yml</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;# LOG_LEVEL: INFO&#x2F;LOG_LEVEL: ERROR&#x2F;g&quot; &#x2F;opt&#x2F;coco&#x2F;config.yml</span><br></pre></td></tr></table></figure><p><code>vim  /opt/coco/config.yml</code></p><h4 id="启coco"><a href="#启coco" class="headerlink" title="启coco"></a>启coco</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 后台启动</span><br><span class="line">.&#x2F;cocod start -d</span><br><span class="line"></span><br><span class="line"># 更多命令</span><br><span class="line">.&#x2F;cocod start|stop|statu</span><br></pre></td></tr></table></figure><h3 id="安装Web-Terminal-前端-Luna"><a href="#安装Web-Terminal-前端-Luna" class="headerlink" title="安装Web Terminal 前端: Luna"></a>安装Web Terminal 前端: Luna</h3><p>直接下载解压</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;opt</span><br><span class="line">wget https:&#x2F;&#x2F;github.com&#x2F;jumpserver&#x2F;luna&#x2F;releases&#x2F;download&#x2F;1.4.10&#x2F;luna.tar.gz</span><br><span class="line"></span><br><span class="line">#如果网络有问题导致下载无法完成可以使用下面地址</span><br><span class="line">wget https:&#x2F;&#x2F;demo.jumpserver.org&#x2F;download&#x2F;luna&#x2F;1.4.10&#x2F;luna.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf luna.tar.gz</span><br><span class="line">chown -R root:root luna</span><br></pre></td></tr></table></figure><h3 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a>nginx配置</h3><h4 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install yum-utils</span><br><span class="line"></span><br><span class="line"># 配置nginx yum源</span><br><span class="line">vim &#x2F;etc&#x2F;yum.repos.d&#x2F;nginx.repo</span><br></pre></td></tr></table></figure><p>内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[nginx-stable]</span><br><span class="line">name&#x3D;nginx stable repo</span><br><span class="line">baseurl&#x3D;http:&#x2F;&#x2F;nginx.org&#x2F;packages&#x2F;centos&#x2F;$releasever&#x2F;$basearch&#x2F;</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;nginx.org&#x2F;keys&#x2F;nginx_signing.key</span><br></pre></td></tr></table></figure><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br><span class="line"></span><br><span class="line">yum install -y nginx</span><br><span class="line"></span><br><span class="line">mv default.conf default.conf_20190520.bak</span><br><span class="line"></span><br><span class="line"># 修改配置</span><br><span class="line">vim &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;jumpserver.conf</span><br></pre></td></tr></table></figure><p>修改如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;  # 代理端口, 以后将通过此端口进行访问, 不再通过8080端口</span><br><span class="line">    # server_name demo.jumpserver.org;  # 修改成你的域名或者注释掉</span><br><span class="line"></span><br><span class="line">    client_max_body_size 100m;  # 录像及文件上传大小限制</span><br><span class="line"></span><br><span class="line">    location &#x2F;luna&#x2F; &#123;</span><br><span class="line">        try_files $uri &#x2F; &#x2F;index.html;</span><br><span class="line">        alias &#x2F;opt&#x2F;luna&#x2F;;  # luna 路径, 如果修改安装目录, 此处需要修改</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F;media&#x2F; &#123;</span><br><span class="line">        add_header Content-Encoding gzip;</span><br><span class="line">        root &#x2F;opt&#x2F;jumpserver&#x2F;data&#x2F;;  # 录像位置, 如果修改安装目录, 此处需要修改</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F;static&#x2F; &#123;</span><br><span class="line">        root &#x2F;opt&#x2F;jumpserver&#x2F;data&#x2F;;  # 静态资源, 如果修改安装目录, 此处需要修改</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F;socket.io&#x2F; &#123;</span><br><span class="line">        proxy_pass       http:&#x2F;&#x2F;localhost:5000&#x2F;socket.io&#x2F;;  # 如果coco安装在别的服务器, 请填写它的ip</span><br><span class="line">        proxy_buffering off;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        access_log off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F;coco&#x2F; &#123;</span><br><span class="line">        proxy_pass       http:&#x2F;&#x2F;localhost:5000&#x2F;coco&#x2F;;  # 如果coco安装在别的服务器, 请填写它的ip</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        access_log off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F;guacamole&#x2F; &#123;</span><br><span class="line">        proxy_pass       http:&#x2F;&#x2F;localhost:8081&#x2F;;  # 如果guacamole安装在别的服务器, 请填写它的ip</span><br><span class="line">        proxy_buffering off;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection $http_connection;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        access_log off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;localhost:8080;  # 如果jumpserver安装在别的服务器, 请填写它的ip</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx</span><br><span class="line"></span><br><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><h4 id="访问jumpserver"><a href="#访问jumpserver" class="headerlink" title="访问jumpserver"></a>访问jumpserver</h4><p>nginx启动后，浏览器访问<code>http:ip:nginx配置的端口</code>即可访问，默认账密<code>admin/admin</code></p><h3 id="测试连接"><a href="#测试连接" class="headerlink" title="测试连接"></a>测试连接</h3><p>如果登录客户端是 macOS 或 Linux, 登录语法如下<br>$ ssh -p2222 <a href="mailto:&#97;&#100;&#x6d;&#105;&#110;&#64;&#49;&#x39;&#x32;&#x2e;&#x31;&#x36;&#x38;&#46;&#50;&#52;&#x34;&#x2e;&#49;&#x34;&#52;">&#97;&#100;&#x6d;&#105;&#110;&#64;&#49;&#x39;&#x32;&#x2e;&#x31;&#x36;&#x38;&#46;&#50;&#52;&#x34;&#x2e;&#49;&#x34;&#52;</a><br>$ sftp -P2222 <a href="mailto:&#x61;&#x64;&#x6d;&#105;&#x6e;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#x38;&#46;&#50;&#52;&#52;&#x2e;&#49;&#x34;&#x34;">&#x61;&#x64;&#x6d;&#105;&#x6e;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#x38;&#46;&#50;&#52;&#52;&#x2e;&#49;&#x34;&#x34;</a><br>密码: admin</p><p>如果登录客户端是 Windows, Xshell Terminal 登录语法如下<br>$ ssh <a href="mailto:&#97;&#x64;&#109;&#x69;&#x6e;&#64;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#56;&#x2e;&#x32;&#52;&#x34;&#46;&#x31;&#x34;&#x34;">&#97;&#x64;&#109;&#x69;&#x6e;&#64;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#56;&#x2e;&#x32;&#52;&#x34;&#46;&#x31;&#x34;&#x34;</a> 2222<br>$ sftp <a href="mailto:&#x61;&#x64;&#x6d;&#105;&#110;&#x40;&#49;&#x39;&#50;&#46;&#49;&#x36;&#x38;&#46;&#50;&#x34;&#x34;&#46;&#49;&#52;&#52;">&#x61;&#x64;&#x6d;&#105;&#110;&#x40;&#49;&#x39;&#50;&#46;&#49;&#x36;&#x38;&#46;&#50;&#x34;&#x34;&#46;&#49;&#52;&#52;</a> 2222<br>密码: admin<br>如果能登陆代表部署成功</p><p>以上，完~</p><h3 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h3><blockquote><p><a href="http://docs.jumpserver.org/zh/docs/setup_by_centos.html">官方安装指导</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Jumpserver </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>几个linux命令小技巧</title>
      <link href="2019/05/15/%E5%87%A0%E4%B8%AAlinux%E5%91%BD%E4%BB%A4%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
      <url>2019/05/15/%E5%87%A0%E4%B8%AAlinux%E5%91%BD%E4%BB%A4%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p>一些Linux技巧型命令</p><a id="more"></a><p>可能不是太常用，算是可以提高效率的一点点方式，简单实践了一下。</p><h3 id="光标类"><a href="#光标类" class="headerlink" title="光标类"></a>光标类</h3><p>不同于vi/vim下的<code>h</code>、<code>j</code>、<code>k</code>、<code>l</code>上下左右移动，这边介绍的是普通模式下的光标移动。</p><h4 id="删除从行开头到光标处的命令"><a href="#删除从行开头到光标处的命令" class="headerlink" title="删除从行开头到光标处的命令"></a>删除从行开头到光标处的命令</h4><p><code>ctrl + u</code><br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;home&#x2F;;ll光标处</span><br></pre></td></tr></table></figure><p>按下<code>ctrl+u</code>，会将<code>cd /home/;ll</code>该行删除</p><h4 id="删除从光标到结尾处的命令"><a href="#删除从光标到结尾处的命令" class="headerlink" title="删除从光标到结尾处的命令"></a>删除从光标到结尾处的命令</h4><p><code>ctrl + k</code><br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd &#x2F;home&#x2F;;光标处ll</span><br></pre></td></tr></table></figure><p>按下<code>ctrl+k</code>，会将<code>ll</code>删除</p><h4 id="删除一个词（空格隔开的字符串）"><a href="#删除一个词（空格隔开的字符串）" class="headerlink" title="删除一个词（空格隔开的字符串）"></a>删除一个词（空格隔开的字符串）</h4><p><code>ctrl + w</code><br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls -al光标处</span><br></pre></td></tr></table></figure><p>按下<code>ctrl w</code>，会将<code>-al</code>删除</p><h3 id="资源查看"><a href="#资源查看" class="headerlink" title="资源查看"></a>资源查看</h3><h4 id="各目录子目录占用空间大小"><a href="#各目录子目录占用空间大小" class="headerlink" title="各目录子目录占用空间大小"></a>各目录子目录占用空间大小</h4><p>tips: <strong>-h参数会将结果展示为人类可读的方式，所以结果会加上M、G这样的单位</strong></p><p>查看当前磁盘占用情况，这个都知道<code>df -h</code><br>查看目录各子目录占用空间大小，例如查看<code>/home</code>下各子目录空间大小</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# du -h --max-depth&#x3D;1 &#x2F;home&#x2F;</span><br><span class="line">91M&#x2F;home&#x2F;ngrinder</span><br><span class="line">0&#x2F;home&#x2F;docker</span><br><span class="line">143M&#x2F;home&#x2F;</span><br></pre></td></tr></table></figure><p>查看内存情况：<code>free -h</code></p><h3 id="进程操作"><a href="#进程操作" class="headerlink" title="进程操作"></a>进程操作</h3><h4 id="获取pid"><a href="#获取pid" class="headerlink" title="获取pid"></a>获取pid</h4><p>很多时候，我们需要查看运行进行的PID，无论是进行分析还是杀进程。。以前的常用做法是:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep zabbix_server</span><br></pre></td></tr></table></figure><p>这样，拿到<code>zabbix_server</code>这个进程的PID，同时会输出一堆信息，如果我们只想要一个pid，也有办法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pgrep zabbix_server</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">pidof zabbix_server</span><br></pre></td></tr></table></figure><h4 id="杀进程"><a href="#杀进程" class="headerlink" title="杀进程"></a>杀进程</h4><p>之前杀进程，比较常用的就是<code>ps -ef|grep XX</code>拿到pid，然后kill掉，或者写的复杂点：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 &#96;ps -ef | grep zabbix | grep -v grep | awk &#39;&#123;print $2&#125;&#39;&#96;</span><br></pre></td></tr></table></figure><p>现在有比较简单的方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill zabbix</span><br></pre></td></tr></table></figure><h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><h4 id="清空文件内容"><a href="#清空文件内容" class="headerlink" title="清空文件内容"></a>清空文件内容</h4><p>之前清空日志文件的内容，一直很头疼，文件太大根本进不去，sed和awk又没那么熟练，现在找到个比较快捷的方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;zabbix_server.log</span><br></pre></td></tr></table></figure><p>完成清空<br>效果展示：<br>清空前：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zabbix]# ll</span><br><span class="line">total 108</span><br><span class="line">-rw-rw-r-- 1 zabbix zabbix 50071 May 16 08:55 zabbix_server.log</span><br></pre></td></tr></table></figure><p>清空：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zabbix]# &gt;zabbix_server.log</span><br><span class="line"></span><br><span class="line">[root@localhost zabbix]# ll</span><br><span class="line">total 56</span><br><span class="line">-rw-rw-r-- 1 zabbix zabbix     0 May 16 08:57 zabbix_server.log</span><br></pre></td></tr></table></figure><p>linux是个非常有意思的系统啊，有事没事多多研究<code>grep</code>、<code>sed</code>、<code>awk</code>以及<code>vi/vim</code>啊！</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7安装docker</title>
      <link href="2019/05/14/centos7%E5%AE%89%E8%A3%85docker/"/>
      <url>2019/05/14/centos7%E5%AE%89%E8%A3%85docker/</url>
      
        <content type="html"><![CDATA[<p>Centos7安装docker</p><a id="more"></a><p>容器化大潮，微服务最后一里路，至少掌握docker的基本使用</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>查看内核版本，大于3.10才能安装</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p><code>更新yum源</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><p><code>卸载旧版本</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker docker-common docker-selinux docker-engine -y</span><br></pre></td></tr></table></figure><p><code>安装需要的安装包</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><p><code>配置yum源（防止万里长城，配置阿里yum源）</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br></pre></td></tr></table></figure><p><code>查看可选择版本</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure><p><code>安装最新稳定版（repo中默认开启了stable仓库）</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce</span><br></pre></td></tr></table></figure><p><code>或者指定版本</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce-18.06.3.ce</span><br></pre></td></tr></table></figure><p><code>启动并加自启动</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure><p><code>验证</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost docker]# docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           18.09.6</span><br><span class="line"> API version:       1.39</span><br><span class="line"> Go version:        go1.10.8</span><br><span class="line"> Git commit:        481bc77156</span><br><span class="line"> Built:             Sat May  4 02:34:58 2019</span><br><span class="line"> OS&#x2F;Arch:           linux&#x2F;amd64</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          18.09.6</span><br><span class="line">  API version:      1.39 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.10.8</span><br><span class="line">  Git commit:       481bc77</span><br><span class="line">  Built:            Sat May  4 02:02:43 2019</span><br><span class="line">  OS&#x2F;Arch:          linux&#x2F;amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>有client和server表示安装成功</p><p>本篇算是容器化的第一篇，计划后续好好折腾折腾docker和K8S，去年欠下的，要补回来了。</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改Linux时间</title>
      <link href="2019/04/28/%E4%BF%AE%E6%94%B9Linux%E6%97%B6%E9%97%B4/"/>
      <url>2019/04/28/%E4%BF%AE%E6%94%B9Linux%E6%97%B6%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<p>linux修改系统时间</p><a id="more"></a><h3 id="手动修改"><a href="#手动修改" class="headerlink" title="手动修改"></a>手动修改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date -s 04&#x2F;28&#x2F;19</span><br></pre></td></tr></table></figure><p>修改日期为：2019/04/28</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date -s 11:28:00</span><br></pre></td></tr></table></figure><p>修改时间为11:28:00</p><p>或者一次：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date -s &quot;2019-04-28 11:28:00&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hwclock -w</span><br></pre></td></tr></table></figure><p>将时间写入bios避免重启失效</p><h3 id="同步网络时间"><a href="#同步网络时间" class="headerlink" title="同步网络时间"></a>同步网络时间</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ntp</span><br></pre></td></tr></table></figure><p>ntp常用服务器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">中国国家授时中心：210.72.145.44</span><br><span class="line">NTP服务器(上海) ：ntp.api.bz</span><br><span class="line">美国：time.nist.gov </span><br><span class="line">复旦：ntp.fudan.edu.cn </span><br><span class="line">微软公司授时主机(美国) ：time.windows.com </span><br><span class="line">台警大授时中心(台湾)：asia.pool.ntp.org</span><br></pre></td></tr></table></figure><h4 id="同步时间："><a href="#同步时间：" class="headerlink" title="同步时间："></a>同步时间：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntpdate -dv ntp.api.bz</span><br></pre></td></tr></table></figure><p>同步完成之后，发现时间有点不对，12h误差</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# date</span><br><span class="line">Sun Apr 28 01:20:14 EDT 2019</span><br></pre></td></tr></table></figure><p>查了下，<code>EDT</code>是美国东部时间，需要改成北京时间</p><h3 id="时区修改"><a href="#时区修改" class="headerlink" title="时区修改"></a>时区修改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;etc&#x2F;localtime &#x2F;etc&#x2F;localtime.bak </span><br><span class="line"></span><br><span class="line">ln -s &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai  &#x2F;etc&#x2F;localtime </span><br><span class="line"></span><br><span class="line">date</span><br></pre></td></tr></table></figure><p>完成~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter调用python完成HmacSHA256加密处理</title>
      <link href="2019/04/23/Jmeter%E8%B0%83%E7%94%A8python%E5%AE%8C%E6%88%90HmacSHA256%E5%8A%A0%E5%AF%86%E5%A4%84%E7%90%86/"/>
      <url>2019/04/23/Jmeter%E8%B0%83%E7%94%A8python%E5%AE%8C%E6%88%90HmacSHA256%E5%8A%A0%E5%AF%86%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>Jmeter调用python完成HmacSHA256加密处理</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>同事有个需求，一个获取人员信息的接口，请求头里面需要有一个<code>sign</code>参数，这个参数是几个实时获取的参数最后进行Hmachash256加密之后生成的，具体示例：<br>获取用户接口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;192.168.0.1&#x2F;api&#x2F;user?userName&#x3D;20190101&amp;tenant&#x3D;testtenant</span><br></pre></td></tr></table></figure><p>请求头：</p><table><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><td>Authorization</td><td>Bearer ${token}</td></tr><tr><td>content-type</td><td>application/json</td></tr><tr><td>tenant</td><td>testtenant</td></tr><tr><td>timestamp</td><td>当前时间戳</td></tr><tr><td>randoms</td><td>随机数</td></tr><tr><td>sign</td><td>签名</td></tr></tbody></table><p>其中签名生成规则如下：<br><code>tenanttesttenantuserName20190101tenanttesttenanttimestamp当前时间戳randoms随机数</code><br>这一长串再使用指定密码，进行<strong>HmacSHA256</strong>加密，生成的密文即为<code>sign</code></p><blockquote><p><a href="http://tool.chinaz.com/tools/hash.aspx">加密工具</a></p></blockquote><h3 id="jmeter方案"><a href="#jmeter方案" class="headerlink" title="jmeter方案"></a>jmeter方案</h3><p>因为后期接口要进行性能测试，所以还是选了jmeter进行性能测试，按照接口描述的先排序再加密，在jmeter中，首先想到的就是通过<code>beanshell</code>外部实现，然后生成对应jar包，在jmeter中引用，然后就有个问题，我java太菜了。。。没办法，折腾python。</p><h4 id="jmeter中使用python脚本"><a href="#jmeter中使用python脚本" class="headerlink" title="jmeter中使用python脚本"></a>jmeter中使用python脚本</h4><p>在jmeter中使用python脚本，搜了下，找到三种方式：<br><strong>1</strong>. 使用Jython包 </p><blockquote><p><a href="https://www.jython.org/downloads.html">下载地址</a><br>下载 <code>Download Jython 2.7.0 - Standalone Jar</code> 包，放到jmeter/lib/目录下，重启jmeter，就能在<code>sampler</code>中找到<code>JSR223 Sampler</code>，里面就有python，但是，是python2.7，所以，对我没啥用</p></blockquote><p><strong>2</strong>. jmeter-functions-execute-python-script-1.0.jar，网上有个这个包，可以从函数助手那边进去执行python脚本，试了下失败了，就不介绍了，有兴趣可以百度下咋弄</p><p><strong>3</strong>. <strong>OS Process Sampler</strong>，使用这个组件可以执行脚本，后面着重介绍这个，使用了下，很强的组件，理论上，只要你脚本能力强，可以获得各种想要的（终于看到摆脱java的希望了。。）</p><h4 id="OS-Process-Sampler"><a href="#OS-Process-Sampler" class="headerlink" title="OS Process Sampler"></a>OS Process Sampler</h4><p>这个组件可以用来启动一个可执行程序，由于是通过命令行方式启动，所以我们可以用任何语言编写一个测试用的可执行程序(比如Linux的sh脚本)。在该可执行程序中调用我们的接口，并把返回的原始数据输出而交由JMeter做后续解析判断。</p><p>位置：<code>/sampler/OS Process Sampler</code><br>这个组件有几栏：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">command: 可执行文件（windows系统建议放.bat脚本或exe文件，linux系统放shell；干过windows下放了shell直接报非可执行文件。。）</span><br><span class="line"></span><br><span class="line">working directory：工作目录，默认是jmeterbin 目录，可指定</span><br><span class="line">command parameters：参数，如果脚本需要传参，可在这边传</span><br></pre></td></tr></table></figure><p>既然这个组件可以执行bat文件，那我们在bat文件里面再调python文件不就实现了嘛~</p><h3 id="加密实现"><a href="#加密实现" class="headerlink" title="加密实现"></a>加密实现</h3><p>前面说了，思路就是使用<code>OS Process Sampler</code>来调用<code>.bat</code>文件，然后在<code>.bat</code>文件中再调python文件，实现加密，脚本如下：</p><h4 id="jmeter"><a href="#jmeter" class="headerlink" title="jmeter"></a>jmeter</h4><p>OS Process Sampler中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">command: oss.bat路径</span><br><span class="line"></span><br><span class="line">working directory：默认</span><br><span class="line">command parameters：secret，userName，tenant（三个传参，方便参数化）</span><br></pre></td></tr></table></figure><p>同时，在<code>OS Process Sampler</code>后追加三个正则表达式提取器，分别获取<strong>时间戳</strong>，<strong>随机数</strong>，<strong>签名</strong></p><p>正则表达式提取器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">引用名称：sign</span><br><span class="line">正则表达式：sign:(.+?)&lt;&gt;</span><br><span class="line">模板：$1$</span><br><span class="line">匹配数字: 1</span><br></pre></td></tr></table></figure><p>时间戳和随机数相同方式获取</p><h4 id="oss-bat"><a href="#oss-bat" class="headerlink" title="oss.bat"></a>oss.bat</h4><p>oss.bat:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set secret &#x3D; %1</span><br><span class="line">set userName &#x3D; %2</span><br><span class="line">set tenant &#x3D; %3</span><br><span class="line"></span><br><span class="line">python  E:\py_workspace\hashtest\JmeterSSTest.py  %*</span><br></pre></td></tr></table></figure><p>Windows批处理文件，首先获取传进去的三个参数，再将这三个参数作为入参传给python脚本</p><h4 id="JmeterSSTest-py"><a href="#JmeterSSTest-py" class="headerlink" title="JmeterSSTest.py"></a>JmeterSSTest.py</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*-coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2019&#x2F;4&#x2F;23 12:44</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import hashlib</span><br><span class="line">import hmac</span><br><span class="line">import time</span><br><span class="line">import random</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line"># 定义传参，按顺序，secret,userName,tenant</span><br><span class="line">secret &#x3D; sys.argv[1]</span><br><span class="line">userName &#x3D; sys.argv[2]</span><br><span class="line">tenant &#x3D; sys.argv[3]</span><br><span class="line"></span><br><span class="line"># 获取当前时间戳</span><br><span class="line">timestamp &#x3D; int(time.time())</span><br><span class="line"></span><br><span class="line"># 获取随机数</span><br><span class="line">randoms &#x3D; random.randint(0, 999999999)</span><br><span class="line"></span><br><span class="line"># 获取sign</span><br><span class="line">strsign &#x3D; str(u&#39;tenant&#39; + str(tenant) + u&#39;userName&#39; + str(userName) + u&#39;tenant&#39; + str(tenant) +</span><br><span class="line">               u&#39;timestamp&#39; + str(timestamp) + u&#39;randoms&#39; + str(randoms))</span><br><span class="line"></span><br><span class="line"># hmacsha256加密</span><br><span class="line">intsign &#x3D; hmac.new(bytes(str(secret), encoding&#x3D;&#39;utf-8&#39;), bytes(str(strsign), encoding&#x3D;&#39;utf-8&#39;),</span><br><span class="line">                    digestmod&#x3D;hashlib.sha256).digest()</span><br><span class="line"></span><br><span class="line"># 二进制转义</span><br><span class="line">sign &#x3D; intsign.hex()</span><br><span class="line"></span><br><span class="line">print(u&#39;timestamp&#39; + &#39;:&#39; + str(timestamp) + &#39;&lt;&gt;&#39;)</span><br><span class="line">print(u&#39;randoms&#39; + &#39;:&#39; + str(randoms) + &#39;&lt;&gt;&#39;)</span><br><span class="line">print(u&#39;sign&#39; + &#39;:&#39; + str(sign) + &#39;&lt;&gt;&#39;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>脚本就不解释了，不难</p><h3 id="完整jmeter结构"><a href="#完整jmeter结构" class="headerlink" title="完整jmeter结构"></a>完整jmeter结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 获取token接口（简单控制器）</span><br><span class="line">-- http信息头管理器</span><br><span class="line">    -- http请求</span><br><span class="line">    -- 响应断言</span><br><span class="line">    --查看结果树</span><br><span class="line">    -- JSON Extractor</span><br><span class="line">-- 加密sign</span><br><span class="line">   -- OS Process Sampler</span><br><span class="line">     -- 正则提取 timestamp</span><br><span class="line">     -- 正则提取 randoms</span><br><span class="line">     -- 正则提取 sign</span><br><span class="line">-- 获取用户接口</span><br><span class="line">   -- http信息头管理器</span><br><span class="line">   -- http请求</span><br><span class="line">   -- 查看结果树</span><br><span class="line">   -- 响应断言</span><br></pre></td></tr></table></figure><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
            <tag> python3 </tag>
            
            <tag> HmacSHA256 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android性能测试——内存</title>
      <link href="2019/04/18/Android%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E2%80%94%E2%80%94%E5%86%85%E5%AD%98/"/>
      <url>2019/04/18/Android%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E2%80%94%E2%80%94%E5%86%85%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<p>Android性能测试——内存</p><a id="more"></a><h3 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h3><p>通常情况下我们说的内存都是指手机的RAM，RAM主要包括：</p><ul><li>寄存器：速度最快的存储</li><li>栈（stack）：在jvm中栈用来存储一些对象的引用、局部变量以及计算过程的中间数据，在方法退出后那么这些变量也会被销毁。它的存储比堆快得多，只比CPU里的寄存器慢</li><li>堆（Heap）：用来存储程序中的一些对象，比如你用new关键字创建的对象，它就会被存储在堆内存中，但是这个对象在堆内存中的首地址会存储在栈中；堆中分配的内存，由java虚拟机自动垃圾回收器（GC）来管理。<br>关于GC的，记得之前稍微记过点<a href="http://tokyle.com/%2F2018%2F11%2F02%2FJVM%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D%2F">JVM内存性能问题定位</a></li><li>… …</li></ul><h3 id="Dalvik和JVM"><a href="#Dalvik和JVM" class="headerlink" title="Dalvik和JVM"></a>Dalvik和JVM</h3><p>Davlik虚拟机（DVM）是Android系统在java虚拟机（JVM）基础上优化得到的，DVM是基于寄存器的，而JVM是基于栈的，由于寄存器更高效，DVM性能相比JVM要好一点。</p><h3 id="Android中进程的堆内存"><a href="#Android中进程的堆内存" class="headerlink" title="Android中进程的堆内存"></a>Android中进程的堆内存</h3><p>RAM作为进程运行不可或缺的资源，对Android系统性能和稳定性有着决定性影响，RAM的一部分被操作系统留作他用，比如显存等等，当然这个程序员无法干预，我们也不必过多地关注它。进程空间中的heap空间是我们需要重点关注的。heap空间完全由程序员控制，我们使用的C++ new和java new所申请的空间都是heap空间， C/C++申请的内存空间在native heap中，而java申请的内存空间则在dalvik heap中。</p><h3 id="Android的java程序为什么容易OOM"><a href="#Android的java程序为什么容易OOM" class="headerlink" title="Android的java程序为什么容易OOM"></a>Android的java程序为什么容易OOM</h3><p>这个是因为Android系统对dalvik的vmheapsize作了硬性限制，当java进程申请的java空间超过阈值时，就会抛出OOM异常（这个阈值可以是48M、24M、16M等，视机型而定），可以通过adb shell getprop | grep dalvik.vm.heapgrowthlimit查看此值。也就是说，程序发生OMM并不表示RAM不足，而是因为程序申请的java heap对象超过了dalvik vmheapgrowthlimit。也就是说，在RAM充足的情况下，也可能发生OOM。</p><p>这样的设计似乎有些不合理，但是Google为什么这样做呢？这样设计的目的是为了让Android系统能同时让比较多的进程常驻内存，这样程序启动时就不用每次都重新加载到内存，能够给用户更快的响应。迫使每个应用程序使用较小的内存，移动设备非常有限的RAM就能使比较多的app常驻其中。但是有一些大型应用程序是无法忍受vmheapgrowthlimit的限制的</p><p>实际上<code>dalvik.vm.heapgrowthlimit</code>和<code>dalvik.vm.heapsize</code>都是java虚拟机的最大内存限制，应用如果不想在dalvikheap达到heapgrowthlimit限制的时候出现OOM，需要在Manifest中的application标签中声明<code>android:largeHeap=“true”</code>，声明后应用dalvik heap达到heapsize的时候才会出现OOM</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell getprop | grep dalvik.vm.heapgrowthlimit</span><br><span class="line">[dalvik.vm.heapgrowthlimit]: [192m]</span><br><span class="line"></span><br><span class="line">&#123;lamb&#125; adb shell getprop | grep dalvik.vm.heapsize</span><br><span class="line">[dalvik.vm.heapsize]: [512m]</span><br></pre></td></tr></table></figure><h3 id="Android内存采集"><a href="#Android内存采集" class="headerlink" title="Android内存采集"></a>Android内存采集</h3><p><strong>dumpsys</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell dumpsys meminfo com.kuaikan.comic                                                                 </span><br><span class="line">Applications Memory Usage (in Kilobytes):                                                                          </span><br><span class="line">Uptime: 467997959 Realtime: 2137774428                                                                             </span><br><span class="line">** MEMINFO in pid 15956 [com.kuaikan.comic] **                                                                     </span><br><span class="line">                   Pss  Private  Private  SwapPss     Heap     Heap     Heap                                       </span><br><span class="line">                 Total    Dirty    Clean    Dirty     Size    Alloc     Free                                       </span><br><span class="line">                ------   ------   ------   ------   ------   ------   ------                                       </span><br><span class="line">  Native Heap    98778    98668       64      406   127872   120081     7790                                       </span><br><span class="line">  Dalvik Heap     8247     8204       24       52    20111     7823    12288                                       </span><br><span class="line"> Dalvik Other     2505     2496        4        2                                                                  </span><br><span class="line">        Stack     2464     2464        0        0  </span><br><span class="line">       Ashmem      258      256        0        0   </span><br><span class="line">      Gfx dev    24048    23372      676        0  </span><br><span class="line">    Other dev       45        8       28        0  </span><br><span class="line">     .so mmap     4157     2036      716       26  </span><br><span class="line">    .jar mmap        8        8        0        0  </span><br><span class="line">    .apk mmap     9900     9676      160        0  </span><br><span class="line">    .dex mmap    20863    17524     2380        0  </span><br><span class="line">    .oat mmap     2731        0      384        0  </span><br><span class="line">    .art mmap     8290     6736      148       12   </span><br><span class="line">   Other mmap       29        4        0        0                                                                  </span><br><span class="line">   EGL mtrack    38636    38636        0        0                                                                  </span><br><span class="line">    GL mtrack     5480     5480        0        0   </span><br><span class="line">      Unknown     6031     6016        0        3  </span><br><span class="line">        TOTAL   232971   221584     4584      501   147983   127904    20078  </span><br><span class="line"> App Summary                                                                                                       </span><br><span class="line">                       Pss(KB)   </span><br><span class="line">                        ------    </span><br><span class="line">           Java Heap:    15088   </span><br><span class="line">         Native Heap:    98668    </span><br><span class="line">                Code:    32884   </span><br><span class="line">               Stack:     2464    </span><br><span class="line">            Graphics:    68164   </span><br><span class="line">       Private Other:     8900   </span><br><span class="line">              System:     6803     </span><br><span class="line">               TOTAL:   232971       TOTAL SWAP PSS:      501   </span><br><span class="line"> Objects                                                                                                           </span><br><span class="line">               Views:      927         ViewRootImpl:        2  </span><br><span class="line">         AppContexts:       11           Activities:        1   </span><br><span class="line">              Assets:        8        AssetManagers:        5    </span><br><span class="line">       Local Binders:       89        Proxy Binders:       42    </span><br><span class="line">       Parcel memory:       56         Parcel count:      226   </span><br><span class="line">    Death Recipients:        5      OpenSSL Sockets:       10  </span><br><span class="line">            WebViews:        0       </span><br><span class="line"> SQL                                                                                                               </span><br><span class="line">         MEMORY_USED:     3886    </span><br><span class="line">  PAGECACHE_OVERFLOW:     1026          MALLOC_SIZE:      309</span><br><span class="line"> DATABASES                                                                                                      </span><br><span class="line">      pgsz     dbsz   Lookaside(b)          cache  Dbname </span><br><span class="line">         4       52            109       54&#x2F;31&#x2F;17  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;bugly_db_    </span><br><span class="line">         4      100             76        83&#x2F;57&#x2F;9  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;kkmh-room.db      </span><br><span class="line">         4       12                         0&#x2F;0&#x2F;0    (attached) temp   </span><br><span class="line">         4      100            109      147&#x2F;26&#x2F;14  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;kkmh-room.db (1)       </span><br><span class="line">         4       20             24         1&#x2F;16&#x2F;2  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;ThrowalbeLog.db        </span><br><span class="line">         4      564             88       52&#x2F;43&#x2F;25  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;kkmh.db    </span><br><span class="line">         4       20            109      185&#x2F;24&#x2F;10  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;btechainh.db           </span><br><span class="line">         4       20             45         6&#x2F;19&#x2F;5  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;sharesdk.db            </span><br><span class="line">         4       20             52        23&#x2F;24&#x2F;6  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;aa_in_techain.db       </span><br><span class="line">         4       36             92      106&#x2F;41&#x2F;25  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;techain_d.db           </span><br><span class="line">         4       52             47         2&#x2F;17&#x2F;3  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;volcano_ac_techain.db  </span><br><span class="line">         4       20             29         1&#x2F;16&#x2F;2  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;tracker.db   </span><br><span class="line">         4       60             97         3&#x2F;21&#x2F;5  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;tes_db     </span><br><span class="line">         4       16             52        12&#x2F;17&#x2F;5  &#x2F;storage&#x2F;emulated&#x2F;0&#x2F;Mob&#x2F;comm&#x2F;dbs&#x2F;.dh </span><br><span class="line">         4       20             65        16&#x2F;19&#x2F;5  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;x24_techain_typhoon.db </span><br><span class="line">         4       76             38        54&#x2F;17&#x2F;3  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;com.kuaikan.comic      </span><br><span class="line">         4       28             50         5&#x2F;18&#x2F;4  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;tcyrtsdb.db            </span><br><span class="line">         4       44             80        10&#x2F;21&#x2F;7  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;beacon_tbs_db   </span><br><span class="line">         4       20             26         1&#x2F;16&#x2F;2  &#x2F;data&#x2F;user&#x2F;0&#x2F;com.kuaikan.comic&#x2F;databases&#x2F;kk-push </span><br><span class="line"> Asset Allocations                                                                            </span><br><span class="line">    zip:&#x2F;data&#x2F;user&#x2F;0&#x2F;com.tencent.mm&#x2F;app_tbs&#x2F;core_share&#x2F;res.apk:&#x2F;resources.arsc: 97K </span><br></pre></td></tr></table></figure><h4 id="字段含义"><a href="#字段含义" class="headerlink" title="字段含义"></a>字段含义</h4><ul><li><p>私有内存(Dirty and Clean)<br>进程独占内存。也就是进程销毁时可以回收的内存容量。通常private Dirty内存是最重要的部分，因为只被自己进程使用。Dirty内存是已经被修改的内存页，因此必须常驻内存（因为没有swap）；Clean内存是已经映射持久文件使用的内存页（例如正在被执行的代码），因此一段时间不使用的话就可以置换出去。</p></li><li><p>实际使用内存(PSS)<br>将跨进程共享页也加入进来， 进行按比例计算PSS。这样能够比较准确的表示<strong>进程占用的实际物理内存</strong></p></li><li><p>Native Heap Alloc<br>JNI层的内存分配</p></li><li><p>Dalvik Heap Alloc<br>Java层的内存分配</p></li></ul><p>这两个值一直增长，应用程序可能出现了内存泄漏</p><h3 id="测试Android内存"><a href="#测试Android内存" class="headerlink" title="测试Android内存"></a>测试Android内存</h3><p><strong>1.</strong> monkey压力测试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p com.kuaikan.comic --ignore-crashes --ignore-timeouts --ignore-security-exceptions  --ignore-native-crashes --pct-touch 70 --pct-motion 25 --pct-majornav 5 -v -v -v --throttle 300 100000</span><br></pre></td></tr></table></figure><p><strong>2.</strong> adb shell dumpsys meminfo监控内存</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys meminfo com.kuaikan.comic</span><br></pre></td></tr></table></figure><p>如发现内存过大，保存<strong>HPROF文件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am dumpheap com.kuaikan.comic &#x2F;data&#x2F;local&#x2F;tmp&#x2F;1.hprof</span><br></pre></td></tr></table></figure><p><strong>3.</strong> 格式化<br><code>D:\dev\android\android-sdk-windows\platform-tools</code>下有个<strong>hprof-conv.exe</strong>工具</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hprof-conv 1.hprof 2.hprof</span><br></pre></td></tr></table></figure><p><strong>4.</strong> 用MAT分析<br><a href="https://pan.baidu.com/s/1mF70g1IyS8wYIuXaNx7vaQ">MAT度娘盘地址（提取码：jidc）</a></p><h3 id="扩展知识"><a href="#扩展知识" class="headerlink" title="扩展知识"></a>扩展知识</h3><h4 id="Android沙盒"><a href="#Android沙盒" class="headerlink" title="Android沙盒"></a>Android沙盒</h4><p>由于Android是建立在Linux系统之上的，所以Android系统继承了Linux的 类Unix继承进程隔离机制与最小权限原则，并且在原有Linux的进程管理基础上对UID的使用做了改进，形成了Android应用的”沙箱“机制。</p><p>普通的Linux中启动的应用通常和登陆用户相关联，同一用户的UID相同。但是Android中给不同的应用都赋予了不同的UID，这样不同的应用将不能相互访问资源。对应用而言，这样会更加封闭，安全。</p><p>在Android系统中，应用（通常）都在一个独立的沙箱中运行，即每一个Android应用程序都在它自己的进程中运行，都拥有一个独立的Dalvik虚拟机实例。Dalvik经过优化，允许在有限的内存中同时高效地运行多个虚拟机的实例，并且每一个Dalvik应用作为一个独立的Linux进程执行。Android这种基于Linux的进程“沙箱”机制，是整个安全设计的基础之一。</p><p>简单点说就是在Android的世界中每一个应用相当与一个Linux中的用户，他们相互独立，不能相互共享与访问，（这也就解释了Android系统中为什么需要进程间通信），正是由于沙盒机制的存在最大程度的保护了应用之间的安全，但是也带来了每一个应用所分配的内存大小是有限制的问题。</p><h4 id="获取当前页面activity"><a href="#获取当前页面activity" class="headerlink" title="获取当前页面activity"></a>获取当前页面activity</h4><p>通过<code>adb shell dumpsys window |findstr mCurrent</code>，捕获当前页面的activity<br>通过<code>adb shell dumpsys activity|findstr &quot;realActivity&quot;</code>, 捕获到当前页面的activity</p><h4 id="频繁GC的可能原因"><a href="#频繁GC的可能原因" class="headerlink" title="频繁GC的可能原因"></a>频繁GC的可能原因</h4><ol><li><p>Memory Churn（内存抖动），内存抖动是因为大量的对象被创建又在短时间内马上被释放</p></li><li><p>瞬间产生大量的对象会严重占用Young Generation的内存区域，当达到阀值，剩余空间不够的时候，也会触发GC。即使每次分配的对象占用了很少的内存，但是他们叠加在一起会增加 Heap的压力，从而触发更多其他类型的GC。这个操作有可能会影响到帧率，并使得用户感知到性能问题。</p></li></ol><h3 id="优秀Android博客"><a href="#优秀Android博客" class="headerlink" title="优秀Android博客"></a>优秀Android博客</h3><blockquote><p><a href="https://www.jianshu.com/p/2bceb820b435?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation">Android性能优化-详解内存优化来龙去脉</a><br><a href="https://www.jianshu.com/p/0df5ad0d2e6a">Android性能优化&amp;内存篇</a><br><a href="https://blog.csdn.net/carson_ho/article/details/79549417">一份详细&amp;全面内存优化指南</a></p></blockquote><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次Linux磁盘清理</title>
      <link href="2019/04/18/%E8%AE%B0%E4%B8%80%E6%AC%A1Linux%E7%A3%81%E7%9B%98%E6%B8%85%E7%90%86/"/>
      <url>2019/04/18/%E8%AE%B0%E4%B8%80%E6%AC%A1Linux%E7%A3%81%E7%9B%98%E6%B8%85%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>记一次Linux清磁盘</p><a id="more"></a><p>最近发现有台机器磁盘满了，搜了下，nohub.out占完了</p><p>然后果断的rm -rf nohub.out，以为结束了，然而df -h看了下，一点都没释放。。。</p><p>因为被删除的文件在删除的时侯还是进程在操作(打开、访问等)的缘故，rm只完成了在磁盘上文件实体的释放，而类似free list结构中相应的文件系统因进程的操作相应的inode并未释放。</p><p>解决的方法：<br>这样的问题解决起来也很简单，找到操作的进程，kill掉就可以了</p><p>当然，闲得无聊，你重启机器，也没话说<br>(最后，别忘了重启你的程序)</p><p>在网上发现两个可以不用停止服务就可清空nohup.out的命令。<br>第一种：cp /dev/null nohup.out<br>第二种：cat /dev/null &gt; nohup.out</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7搭建testlink</title>
      <link href="2019/04/16/centos7%E6%90%AD%E5%BB%BAtestlink/"/>
      <url>2019/04/16/centos7%E6%90%AD%E5%BB%BAtestlink/</url>
      
        <content type="html"><![CDATA[<p>centos 7搭建testlink</p><p>帮忙搭建了个testlink，说实话，不习惯用这个</p><a id="more"></a><h3 id="系统版本"><a href="#系统版本" class="headerlink" title="系统版本"></a>系统版本</h3><p>搭建版本<br><code>testlink</code>: 1.9.19<br><code>MySQL</code>：5.7.25 （mysql -V）<br><code>PHP</code>：5.6 (php -v)<br><code>Linux</code>：Centos 7.6.1810 (Core) （cat /etc/redhat-release）</p><h3 id="前置操作"><a href="#前置操作" class="headerlink" title="前置操作"></a>前置操作</h3><p>升级yum：<code>yum update</code></p><p>关闭防火墙：<code>systemctl  stop   firewalld.service</code><br>防火墙禁止自启动：<code>systemctl   disable   firewalld.service</code></p><p>关闭selinux：<code>sudo sed -i &quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config</code></p><h3 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h3><p>下载源包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>安装MySQL源：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall mysql57-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>检查可选包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist enabled | grep &quot;mysql.*-community.*&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql-connectors-community&#x2F;x86_64 MySQL Connectors Community                  51</span><br><span class="line">mysql-tools-community&#x2F;x86_64      MySQL Tools Community                       63</span><br><span class="line">mysql57-community&#x2F;x86_64          MySQL 5.7 Community Server                 267</span><br></pre></td></tr></table></figure><p>可修改配置：<code>/etc/yum.repos.d/mysql-community.repo</code>选择想要安装的版本，将对应<code>enable</code>改为<strong>1</strong></p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure><p>启动服务：<code>systemctl start mysqld</code><br>查看服务状态：<code>systemctl status mysqld</code></p><p>配置开机启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h4 id="安装后配置"><a href="#安装后配置" class="headerlink" title="安装后配置"></a>安装后配置</h4><h5 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a>修改root密码</h5><p>查看原始密码：<code>grep &#39;temporary password&#39; /var/log/mysqld.log</code></p><p>进入控制台<code>mysql -uroot -p</code>，修改密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;yourpwd&#39;;</span><br></pre></td></tr></table></figure><p>修改权限：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;yourpwd&#39; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure><h4 id="创建testlink库"><a href="#创建testlink库" class="headerlink" title="创建testlink库"></a>创建testlink库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE testlink;</span><br><span class="line"></span><br><span class="line">CREATE USER ‘testlinkuser‘@‘localhost‘ IDENTIFIED BY ‘yourpwd‘;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON testlink.* TO ‘testlinkuser‘@‘localhost‘ IDENTIFIED BY ‘yourpwd‘ WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line">EXIT;</span><br></pre></td></tr></table></figure><h3 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd</span><br></pre></td></tr></table></figure><p>配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -i ‘s&#x2F;^&#x2F;#&amp;&#x2F;g‘ &#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;welcome.conf</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;Options Indexes FollowSymLinks&#x2F;Options FollowSymLinks&#x2F;&quot; &#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</span><br></pre></td></tr></table></figure><p>启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd.service</span><br><span class="line"></span><br><span class="line">systemctl enable httpd.service</span><br></pre></td></tr></table></figure><h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><p>直接用yum install php安装的，默认是5.4版本，然而testlink要求至少是<strong>5.5</strong>（这点坑的我，zabbix直接不能和它装一台机器）</p><p>配置yum源：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line"></span><br><span class="line">rpm -ivh http:&#x2F;&#x2F;rpms.famillecollet.com&#x2F;enterprise&#x2F;remi-release-7.rpm</span><br></pre></td></tr></table></figure><p>安装<strong>php5.6</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install php56 php56-php php56-php-mysqlnd php56-php-gd php56-php-mcrypt php56-php-mbstring php56-php-xml php56-php-cli php56-php-ldap</span><br></pre></td></tr></table></figure><p>修改参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s&#x2F;session.gc_maxlifetime &#x3D; 1440&#x2F;session.gc_maxlifetime &#x3D; 2880&#x2F;&quot; &#x2F;opt&#x2F;remi&#x2F;php56&#x2F;root&#x2F;etc&#x2F;php.ini</span><br><span class="line"></span><br><span class="line">sed -i &quot;s&#x2F;max_execution_time &#x3D; 30&#x2F;max_execution_time &#x3D; 120&#x2F;&quot; &#x2F;opt&#x2F;remi&#x2F;php56&#x2F;root&#x2F;etc&#x2F;php.ini</span><br></pre></td></tr></table></figure><h3 id="安装testlink"><a href="#安装testlink" class="headerlink" title="安装testlink"></a>安装testlink</h3><blockquote><p><a href="https://sourceforge.net/projects/testlink/files/">官网下载地址</a></p></blockquote><p>下载完成后传到linux下（rz…），解压缩到<code>/var/www/html</code>目录下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf testlink-1.9.19.tar.gz -C &#x2F;var&#x2F;www&#x2F;html</span><br></pre></td></tr></table></figure><p>重命名：<code>mv testlink-1.9.19 testlink</code></p><p>创建<strong>upload_area</strong>：<code>mkdir /var/www/html/upload_area</code></p><p>修改项目属主以及日志文件权限：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chown -R apache:apache &#x2F;var&#x2F;www&#x2F;html&#x2F;testlink</span><br><span class="line"></span><br><span class="line">chmod -R 755 &#x2F;var&#x2F;www&#x2F;html&#x2F;testlink&#x2F;logs</span><br></pre></td></tr></table></figure><h4 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h4><p>首先是创建（直接把示例文件备份重命名）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;var&#x2F;www&#x2F;html&#x2F;testlink&#x2F;custom_config.inc.php.example&#x2F;var&#x2F;www&#x2F;html&#x2F;testlink&#x2F;custom_config.inc.php</span><br></pre></td></tr></table></figure><p>修改配置(日志路径等)可直接vim进入之后查找<code>?log_path</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; $tlCfg-&gt;log_path &#x3D; ‘&#x2F;var&#x2F;testlink-ga-testlink-code&#x2F;logs&#x2F;‘; &#x2F;* unix example *&#x2F;</span><br><span class="line">&#x2F;&#x2F; $g_repositoryPath &#x3D; ‘&#x2F;var&#x2F;testlink-ga-testlink-code&#x2F;upload_area&#x2F;‘;  &#x2F;* unix example *&#x2F;</span><br><span class="line"></span><br><span class="line">$tlCfg-&gt;log_path &#x3D; ‘&#x2F;var&#x2F;www&#x2F;html&#x2F;testlink&#x2F;logs&#x2F;‘;</span><br><span class="line">$g_repositoryPath &#x3D; ‘&#x2F;var&#x2F;www&#x2F;html&#x2F;testlink&#x2F;upload_area&#x2F;‘;</span><br><span class="line">$tlCfg-&gt;config_check_warning_mode &#x3D; ‘SILENT‘;</span><br></pre></td></tr></table></figure><p>重启Apache</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd.service</span><br></pre></td></tr></table></figure><h3 id="启动testlink"><a href="#启动testlink" class="headerlink" title="启动testlink"></a>启动testlink</h3><p>浏览器输入<code>http://IP/testlink</code><br>进入安装页面，依次<code>new installation</code>-&gt;<code>agree license</code>-&gt;<code>continue</code>开始一堆校验，继续<code>continue</code>，进入数据库配置页面，依次填写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Database name：testlink（testlink库名）</span><br><span class="line"></span><br><span class="line">Database admin login：root</span><br><span class="line">Database admin password：yourpwd（你MySQL的root密码）</span><br><span class="line"></span><br><span class="line">Testlink DB login：testlinkuser（testlink数据库用户名）</span><br><span class="line">Testlink DB password：yourpwd（你testlink库密码）</span><br></pre></td></tr></table></figure><p>填写完成，点击<code>Process Testlink Setup</code><br>结束！</p><h3 id="登录testlink"><a href="#登录testlink" class="headerlink" title="登录testlink"></a>登录testlink</h3><p><code>http://IP/testlink</code><br>默认账密：<code>admin/admin</code></p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> testlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adb进阶四 —— dumpsys</title>
      <link href="2019/04/12/adb%E8%BF%9B%E9%98%B6%E5%9B%9B-%E2%80%94%E2%80%94-dumpsys/"/>
      <url>2019/04/12/adb%E8%BF%9B%E9%98%B6%E5%9B%9B-%E2%80%94%E2%80%94-dumpsys/</url>
      
        <content type="html"><![CDATA[<p>adb进阶四 —— dumpsys</p><a id="more"></a><h3 id="dumpsys简介"><a href="#dumpsys简介" class="headerlink" title="dumpsys简介"></a>dumpsys简介</h3><p>Dumpsys用于系统诊断，并提供系统服务状态信息,命令格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys [system serbices]</span><br></pre></td></tr></table></figure><h4 id="系统服务查询"><a href="#系统服务查询" class="headerlink" title="系统服务查询"></a>系统服务查询</h4><p>直接运行<code>adb shell dumpsys</code>会输出很多很多信息，可以指定需要检查的服务</p><p>查看系统服务、：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell service list</span><br><span class="line">或者</span><br><span class="line">adb shell dumpsys -l</span><br></pre></td></tr></table></figure><p>可以看见<code>cpuinfo</code>，<code>meminfo</code>等服务，因此指定检查的服务示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell dumpsys cpuinfo</span><br><span class="line">Load: 6.04 &#x2F; 6.17 &#x2F; 6.21</span><br><span class="line">CPU usage from 364288ms to 62061ms ago (2019-04-12 16:20:56.605 to 2019-04-12 16:25:58.831):</span><br><span class="line">  99% 28771&#x2F;com.tencent.tmgp.supercell.clashofclans: 99% user + 0% kernel &#x2F; faults: 128 minor</span><br><span class="line">  2.4% 1641&#x2F;system_server: 1.4% user + 0.9% kernel &#x2F; faults: 5586 minor 1 major</span><br><span class="line">  1.3% 582&#x2F;android.hardware.sensors@1.0-service: 0.5% user + 0.7% kernel</span><br><span class="line">  0.9% 441&#x2F;ueventd: 0.6% user + 0.3% kernel</span><br><span class="line">  0.6% 4950&#x2F;kworker&#x2F;u16:2: 0% user + 0.6% kernel</span><br><span class="line">  0.5% 5727&#x2F;kworker&#x2F;u16:0: 0% user + 0.5% kernel</span><br><span class="line">  0.5% 5679&#x2F;kworker&#x2F;u16:5: 0% user + 0.5% kernel</span><br><span class="line">  </span><br><span class="line">... ...</span><br></pre></td></tr></table></figure><p>命令行参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-h：对于大多数的服务，可以添加-h看到文本的帮助</span><br><span class="line">-c：对于一些服务，可以添加-c查看数据会更友好</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell dumpsys usb -h</span><br><span class="line">Dump current USB state or issue command:</span><br><span class="line">  ports</span><br><span class="line">  set-port-roles &lt;id&gt; &lt;source|sink|no-power&gt; &lt;host|device|no-data&gt;</span><br><span class="line">  add-port &lt;id&gt; &lt;ufp|dfp|dual|none&gt;</span><br><span class="line">  connect-port &lt;id&gt; &lt;ufp|dfp&gt;&lt;?&gt; &lt;source|sink&gt;&lt;?&gt; &lt;host|device&gt;&lt;?&gt;</span><br><span class="line">    (add ? suffix if mode, power role, or data role can be changed)</span><br><span class="line">  disconnect-port &lt;id&gt;</span><br><span class="line">  remove-port &lt;id&gt;</span><br><span class="line">  reset</span><br></pre></td></tr></table></figure><h3 id="包服务查询"><a href="#包服务查询" class="headerlink" title="包服务查询"></a>包服务查询</h3><p>格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys package [-h] [-f] [—checkin] [cmd]…</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-h</td><td>打印帮助信息</td></tr><tr><td>-f</td><td>打印intent filter的信息</td></tr><tr><td>–checkin</td><td>打印出已经登记的库、系统功能、安装包</td></tr><tr><td>cmd</td><td>子命令（可以在-h帮助文档中查看有哪些子命令）</td></tr></tbody></table><table><thead><tr><th>cmd子命令</th><th>说明</th></tr></thead><tbody><tr><td>prov[iders]</td><td>获取content providers</td></tr><tr><td>p[ackages]</td><td>获取安装包基本信息</td></tr><tr><td>s[hared-user]</td><td>获取共享用户ID的应用</td></tr><tr><td>m[essages]</td><td>打印运行时收集的信息</td></tr><tr><td>v[erifiers]</td><td>打印包校验信息</td></tr><tr><td>version</td><td>打印数据库版本信息</td></tr><tr><td>write</td><td>写当前位置</td></tr><tr><td>package.name</td><td>输出给定包的信息</td></tr><tr><td>installs</td><td>安装会话的详细信息</td></tr><tr><td>l[ibraries]</td><td>列出已知的共享库</td></tr><tr><td>f[ibraries]</td><td>列出手机的功能</td></tr><tr><td>k[eysets]</td><td>列出各个包的Signing KeySets</td></tr><tr><td>r[esolvers]</td><td>获取intent filter</td></tr><tr><td>perm[issions]</td><td>获取权限</td></tr><tr><td>pref[erred]</td><td>打印包首选项</td></tr><tr><td>preferred-xml [—full]</td><td>打印包首选项，xml格式打印</td></tr></tbody></table><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell dumpsys package com.kuaikan.comic </span><br><span class="line">Activity Resolver Table: </span><br><span class="line">  Schemes: </span><br><span class="line">      qwallet1104081998:  </span><br><span class="line">        2d32642 com.kuaikan.comic&#x2F;com.kuaikan.pay.kkb.activity.RechargeCenterActivity filter ba2036f</span><br><span class="line">          Action: &quot;android.intent.action.VIEW&quot;</span><br><span class="line">          Category: &quot;android.intent.category.BROWSABLE&quot; </span><br><span class="line">          Category: &quot;android.intent.category.DEFAULT&quot; </span><br><span class="line">          Scheme: &quot;qwallet1104081998&quot; </span><br><span class="line">      commonqwallet20181030: </span><br><span class="line">        7efe8c0 com.kuaikan.comic&#x2F;com.kuaikan.pay.cashPay.TranslucentPayActivity filter b5a1d49</span><br><span class="line">          Action: &quot;android.intent.action.VIEW&quot;   </span><br><span class="line">          Category: &quot;android.intent.category.BROWSABLE&quot;  </span><br><span class="line">          Category: &quot;android.intent.category.DEFAULT&quot; </span><br><span class="line">          Scheme: &quot;commonqwallet20181030&quot;   </span><br><span class="line">          Scheme: &quot;commonalipay20181030&quot;   </span><br><span class="line">          Scheme: &quot;commonwx20181030&quot;</span><br><span class="line">          Scheme: &quot;commonpay20181105&quot;</span><br><span class="line">      comicwx201804028: </span><br></pre></td></tr></table></figure><h3 id="activity信息查询"><a href="#activity信息查询" class="headerlink" title="activity信息查询"></a>activity信息查询</h3><p>格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity [-a] [-c]…</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-a</td><td>包括所有可用的服务器状态</td></tr><tr><td>-c</td><td>包括客户端状态</td></tr><tr><td>-p</td><td>限制输出为给定的包，例如： adb shell dumpsys activity -p com.android.browser</td></tr><tr><td>-h</td><td>打印帮助信息</td></tr><tr><td>cmd</td><td>子命令</td></tr></tbody></table><table><thead><tr><th>cmd子命令</th><th>说明</th></tr></thead><tbody><tr><td>a[ctivities]</td><td>activity堆栈状态</td></tr><tr><td>r[recents]</td><td>最近activity的状态</td></tr><tr><td>b[rodacasts] [package_name] [histpry [-s]]</td><td>广播状态</td></tr><tr><td>i[ntents] [package_name]</td><td>挂起的intent状态</td></tr><tr><td>p[rocesses] [package_name]</td><td>进程状态</td></tr><tr><td>o[om]</td><td>oom管理</td></tr><tr><td>perm[issions]</td><td>url权限授权状态</td></tr><tr><td>prov[iders] [comp_spec…]</td><td>content provider状态</td></tr><tr><td>provider [comp_spec]</td><td>provider客户端状态</td></tr><tr><td>s[ervices] [comp_spec…]</td><td>服务状态</td></tr><tr><td>as[sociations]</td><td>跟踪应用程序的关联</td></tr><tr><td>service [comp_spec]</td><td>服务客户端状态</td></tr><tr><td>package [package_name]</td><td>给的包的所有状态</td></tr><tr><td>all</td><td>转储所有的activityes</td></tr><tr><td>top</td><td>转储栈顶的activity</td></tr><tr><td>write</td><td>写入所有挂起状态存储</td></tr><tr><td>track-associations</td><td>允许会话跟踪</td></tr><tr><td>untrack-associations</td><td>禁用和明确会话跟踪，命令参数可能也是一个comp_spec 转储的activity</td></tr></tbody></table><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 获取当前页面UI信息</span><br><span class="line">adb shell dumpsys activity top</span><br><span class="line"></span><br><span class="line"># 获取当前页面的Activity</span><br><span class="line">adb shell dumpsys activity top | findstr ACTIVITY</span><br></pre></td></tr></table></figure><h3 id="网络信息查询"><a href="#网络信息查询" class="headerlink" title="网络信息查询"></a>网络信息查询</h3><p>| 子命令 | 说明 |命令格式|<br>|——–|——–|<br>|  connectivity      |   网络连接     |adb shell dumpsys connectivity|<br>|netpolicy    |网络策略    |    adb shell dumpsys netpolicy|<br>|netstats    |    网络状态|    adb shell dumpsys netstats|<br>|    network_management|    网络管理|adb shell dumpsys network_management    |</p><h3 id="其他常用服务信息查询"><a href="#其他常用服务信息查询" class="headerlink" title="其他常用服务信息查询"></a>其他常用服务信息查询</h3><p>| 子命令 | 说明 |命令格式|<br>|——–|——–|<br>|    meminfo    |    内存    |adb shell dumpsys meminfo|<br>|cpuinfo    |CPU    |adb shell dumpsys cpuinfo    |<br>|gfxinfo    |    帧率|adb shell dumpsys gfxinfo    |<br>|    display|    显示|adb shell dumpsys display    |<br>|power    |电源    |adb shell dumpsys power    |<br>|batterystats    |电池状态    |adb shell dumpsys batterystats    |<br>|battery    |电池    |adb shell dumpsys battery    |<br>|alarm    |闹钟    |adb shell dumpsys alarm    |<br>|location    |位置    |adb shell dumpsys location    |<br>|wifi    |wifi    |adb shell dumpsys wifi    |<br>|power    |电源    |adb shell dumpsys power    |<br>|notification    |通知    |adb shell dumpsys notification    |</p><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 电池信息</span><br><span class="line">&#123;lamb&#125; adb shell dumpsys battery</span><br><span class="line">Current Battery Service state:</span><br><span class="line">  AC powered: false</span><br><span class="line">  USB powered: true</span><br><span class="line">  Wireless powered: false</span><br><span class="line">  Max charging current: 500000</span><br><span class="line">  Max charging voltage: 5000000</span><br><span class="line">  Charge counter: 3321815</span><br><span class="line">  status: 5 #电池状态</span><br><span class="line">  health: 2 </span><br><span class="line">  present: true</span><br><span class="line">  level: 100 #电量</span><br><span class="line">  scale: 100</span><br><span class="line">  voltage: 4369</span><br><span class="line">  temperature: 310  #电池温度</span><br><span class="line">  technology: Li-poly</span><br></pre></td></tr></table></figure><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adb进阶三 —— Monkey (2)</title>
      <link href="2019/04/11/adb%E8%BF%9B%E9%98%B6%E4%B8%89-%E2%80%94%E2%80%94-Monkey-2/"/>
      <url>2019/04/11/adb%E8%BF%9B%E9%98%B6%E4%B8%89-%E2%80%94%E2%80%94-Monkey-2/</url>
      
        <content type="html"><![CDATA[<p>adb进阶三 —— Monkey (2)</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>因为原生的monkey，是一系列的随机事件，很多时候事满足不了我们自定义场景需求的，比如只想验证APP的登录的稳定性，使用原生的<code>adb shell monkey</code>貌似做不到，这边就需要自定义脚本来实现</p><h3 id="Monkey-API"><a href="#Monkey-API" class="headerlink" title="Monkey API"></a>Monkey API</h3><table><thead><tr><th>API</th><th>描述</th></tr></thead><tbody><tr><td>LaunchActivity(pkg_name, cl_name)</td><td>启动应用的Activity。参数：包名和启动的Activity</td></tr><tr><td>Tap(x, y, tapDuration)</td><td>模拟一次手指单击事件。参数：x,y为控件坐标，tapDuration为点击的持续时间，此参数可省略</td></tr><tr><td>DispatchPress(keycode)</td><td>按键。参数： keycode</td></tr><tr><td>RotateScreen(rotationDegree, persist)</td><td>旋转屏幕。 参数：rotationDegree为旋转角度， e.g. 1代表90度；persist表示旋转之后是否固定，0表示旋转后恢复，非0则表示固定不变</td></tr><tr><td>DispatchFlip(true/false)</td><td>打开或者关闭软键盘</td></tr><tr><td>LongPress()</td><td>长按</td></tr><tr><td>PressAndHold(x, y, pressDuration)</td><td>模拟长按事件</td></tr><tr><td>DispatchString(input)</td><td>输入字符串</td></tr><tr><td>Drag(xStart, yStart, xEnd, yEnd, stepCount)</td><td>拖拽</td></tr><tr><td>PinchZoom(x1Start, y1Start, x1End, y1End, x2Start, y2Start, x2End, y2End, stepCount)</td><td>缩放</td></tr><tr><td>UserWait(sleepTime)</td><td>休眠</td></tr><tr><td>DeviceWakeUp()</td><td>唤醒屏幕</td></tr><tr><td>PowerLog(power_log_type, test_case_status)</td><td>模拟电池电量信息</td></tr><tr><td>WriteLog()</td><td>将电池信息写入sd卡</td></tr><tr><td>RunCmd(cmd)</td><td>运行shell命令</td></tr><tr><td>DispatchPointer(long downTime,  long eventTime, int action, loat x, float y, float pressure, float size, int metaState,  float xPrecision, float yPrecision, int device, int edgeFlags)</td><td>向指定位置，发送单个手势，点击事件</td></tr><tr><td>DispatchKey(long downTime, long eventTime, int action, int code, int repeat, int metaState, int device, int scancode)</td><td>发送键值</td></tr><tr><td>LaunchInstrumentation(test_name,runner_name)</td><td>运行一个instrumentation测试用例</td></tr><tr><td>DispatchTrackball(long downTime, long eventTime, int action, float x, float y, float pressure, float size, int metaState, float xPrecision, float yPrecision, int device, int edgeFlags)</td><td>模拟发送轨迹球事件</td></tr><tr><td>ProfileWait</td><td>等待5秒</td></tr><tr><td>StartCaptureFramerate()</td><td>获取帧率</td></tr><tr><td>EndCaptureFramerate(input)</td><td>结束获取帧率</td></tr></tbody></table><p>以<strong>点击事件</strong>为例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DispatchPointer(long downTime,  long eventTime, int action, loat x, float y, float pressure, float size, int metaState,  float xPrecision, float yPrecision, int device, int edgeFlags)</span><br></pre></td></tr></table></figure><p>参数很多，只需要关注<code>action</code>，<code>x</code>，<code>y</code>，对于参数action值为0代表按下（KeyDown），1代表弹起（KeyUp）。如果使用这个方法实现点击事件，这个方法就应该成对出现，先0再1。</p><ul><li>long downTime：键最初被按下时间</li><li>long eventTime：事件发生时间</li><li>int action：动作ACTION_DOWN=0,ACTION_UP=1,ACTION_MULTIPLE=2</li><li>float x：x坐标</li><li>float y：y坐标</li><li>float pressure：当前事件的压力，值为0～1</li><li>float size：触摸的近似值，范围为0～1</li><li>int metaState：当前按下的meta键的标识</li><li>float xPrecision：x坐标精确值</li><li>float yPrecision：y坐标精确值</li><li>int device：事件来源，范围0～x，0表示不来自物理设备</li><li>int edgeFlags：坐标是否超出了屏幕范围</li></ul><blockquote><p><a href="http://tokyle.com/2018/01/17/appium%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6/">Android键盘事件，keycode</a></p></blockquote><h3 id="Monkey脚本"><a href="#Monkey脚本" class="headerlink" title="Monkey脚本"></a>Monkey脚本</h3><p>和自动化测试时候差不多实现，<strong>打开首页-点击用户名-输入用户名-点击密码-输入密码-点击登录</strong>，相应的，也就是只需要获取用户名和密码以及确定按键的坐标，传到<code>DispatchPointer</code>即可，获取坐标可以使用<code>uiautomatorviewer.bat</code>挺简单的，直接上脚本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 头部</span><br><span class="line">type&#x3D; user</span><br><span class="line">count&#x3D; 1</span><br><span class="line">speed&#x3D; 1.0</span><br><span class="line">UserWait(200)</span><br><span class="line">start data &gt;&gt;</span><br><span class="line"></span><br><span class="line"># 打开app登录页</span><br><span class="line">LaunchActivity(com.android.testapp,com.android.testapp.MainActivity)</span><br><span class="line"># 休眠</span><br><span class="line">UserWait(10000)</span><br><span class="line"># 点击用户名文本框（460,751）为坐标</span><br><span class="line">DispatchPointer(10,10,0,460,751,1,1,-1,1,1,0,0)</span><br><span class="line">DispatchPointer(10,10,1,460,751,1,1,-1,1,1,0,0)</span><br><span class="line">UserWait(5000)</span><br><span class="line"># 输入用户名</span><br><span class="line">DispatchString(monkeytest)</span><br><span class="line">DispatchFlip(false)</span><br><span class="line">UserWait(2000)</span><br><span class="line"># 点击密码文本框（490,867）为坐标</span><br><span class="line">DispatchPointer(10,10,0,490,867,1,1,-1,1,1,0,0)</span><br><span class="line">DispatchPointer(10,10,1,490,867,1,1,-1,1,1,0,0)</span><br><span class="line">UserWait(5000)</span><br><span class="line"># 输入密码</span><br><span class="line">DispatchString(123456)</span><br><span class="line">DispatchFlip(false)</span><br><span class="line">UserWait(2000)</span><br><span class="line"># 点击确定</span><br><span class="line">Tap(541,1096)</span><br></pre></td></tr></table></figure><p>保存为monkey_test.txt文件，上传到android设备：<code>adb push monkey_test.txt /mnt/sdcard/</code><br>执行脚本：<code>adb shell monkey -f /mnt/sdcard/monkey_test.txt -v 1</code></p><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
            <tag> Monkey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adb进阶二 —— Monkey (1)</title>
      <link href="2019/04/11/adb%E8%BF%9B%E9%98%B6%E4%B8%80-%E2%80%94%E2%80%94-Monkey-1/"/>
      <url>2019/04/11/adb%E8%BF%9B%E9%98%B6%E4%B8%80-%E2%80%94%E2%80%94-Monkey-1/</url>
      
        <content type="html"><![CDATA[<p>adb进阶二 —— Monkey (1)</p><a id="more"></a><h3 id="Monkey简介"><a href="#Monkey简介" class="headerlink" title="Monkey简介"></a>Monkey简介</h3><p>Monkey是一个可运行在Android环境中的命令行工具，使用monkey尅发送一些伪随机事件（pseudo-random）的用户事件流，例如点击，触摸，手势等。通过monkey，我们可以注入随机事件流或者自定义特定事件来对应用进行健壮性、稳定性测试。</p><h4 id="Monkey用途"><a href="#Monkey用途" class="headerlink" title="Monkey用途"></a>Monkey用途</h4><p>通过使用monkey来对应用进行压力测试。</p><p>Monkey包含一系列选项，主要包括以下方面：</p><ol><li>基础配置项，比如设置注入事件的数量<code>adb shell monkey 500</code></li><li>备选限制，比如限制测试单个包<code>adb shell monkey -p com.android.camera  5000</code></li><li>事件类型和频率</li><li>调试选项</li></ol><h4 id="Monkey程序简介"><a href="#Monkey程序简介" class="headerlink" title="Monkey程序简介"></a>Monkey程序简介</h4><p>monkey在Android文件系统存放路径为：<code>/system/framework/monkey.jar</code><br>启动monkey.jar的shell脚本文件在Android文件系统存放路径为<code>system/bin/monkey</code><br>导到本地:<code>adb pull /system/bin/monkey E:\app_workstation\Android_files\MONKEY</code><br>可以看到monkey的shell内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Script to start &quot;monkey&quot; on the device, which has a very rudimentary</span><br><span class="line"># shell.</span><br><span class="line">#</span><br><span class="line">base&#x3D;&#x2F;system</span><br><span class="line">export CLASSPATH&#x3D;$base&#x2F;framework&#x2F;monkey.jar</span><br><span class="line">trap &quot;&quot; HUP</span><br><span class="line">for a in &quot;$@&quot;; do</span><br><span class="line">    echo &quot;  bash arg:&quot; $a</span><br><span class="line">done</span><br><span class="line">exec app_process $base&#x2F;bin com.android.commands.monkey.Monkey &quot;$@&quot;</span><br></pre></td></tr></table></figure><p>可以看到调用的是<code>com.android.commands.monkey.Monkey</code>包</p><h3 id="Monkey命令"><a href="#Monkey命令" class="headerlink" title="Monkey命令"></a>Monkey命令</h3><h4 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h4><p>基础语法：<code>adb shell monkey [option] &lt;event-count&gt;</code><br>当不指定任何选项时，monkey将默认静态模式，并且会向目标设备的所有包发送随机事件</p><p>基本使用：<code>adb shell monkey</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell monkey                                                 </span><br><span class="line">args: []                                                                </span><br><span class="line">usage: monkey [-p ALLOWED_PACKAGE [-p ALLOWED_PACKAGE] ...]             </span><br><span class="line">              [-c MAIN_CATEGORY [-c MAIN_CATEGORY] ...]                 </span><br><span class="line">              [--ignore-crashes] [--ignore-timeouts]                    </span><br><span class="line">              [--ignore-security-exceptions]                            </span><br><span class="line">              [--monitor-native-crashes] [--ignore-native-crashes]      </span><br><span class="line">              [--kill-process-after-error] [--hprof]                    </span><br><span class="line">              [--match-description TEXT]                                </span><br><span class="line">              [--pct-touch PERCENT] [--pct-motion PERCENT]              </span><br><span class="line">              [--pct-trackball PERCENT] [--pct-syskeys PERCENT]         </span><br><span class="line">              [--pct-nav PERCENT] [--pct-majornav PERCENT]              </span><br><span class="line">              [--pct-appswitch PERCENT] [--pct-flip PERCENT]            </span><br><span class="line">              [--pct-anyevent PERCENT] [--pct-pinchzoom PERCENT]        </span><br><span class="line">              [--pct-permission PERCENT]                                </span><br><span class="line">              [--pkg-blacklist-file PACKAGE_BLACKLIST_FILE]             </span><br><span class="line">              [--pkg-whitelist-file PACKAGE_WHITELIST_FILE]             </span><br><span class="line">              [--wait-dbg] [--dbg-no-events]                            </span><br><span class="line">              [--setup scriptfile] [-f scriptfile [-f scriptfile] ...]  </span><br><span class="line">              [--port port]                                             </span><br><span class="line">              [-s SEED] [-v [-v] ...]                                   </span><br><span class="line">              [--throttle MILLISEC] [--randomize-throttle]              </span><br><span class="line">              [--profile-wait MILLISEC]                                 </span><br><span class="line">              [--device-sleep-time MILLISEC]                            </span><br><span class="line">              [--randomize-script]                                      </span><br><span class="line">              [--script-log]                                            </span><br><span class="line">              [--bugreport]                                             </span><br><span class="line">              [--periodic-bugreport]                                    </span><br><span class="line">              [--permission-target-system]                              </span><br><span class="line">              COUNT                                                     </span><br></pre></td></tr></table></figure><p>可以看见列出了所有monkey的usage，但是并没有启动，因为缺少事件数量，只要加上数量，即可<code>adb shell monkey 10000</code></p><h4 id="Monkey-Option"><a href="#Monkey-Option" class="headerlink" title="Monkey Option"></a>Monkey Option</h4><p>monkey的option可以根据实际需要进行选择，主要分为<strong>常规类</strong>、<strong>事件类</strong>、<strong>约束类</strong>和<strong>调试类</strong></p><h5 id="常规类"><a href="#常规类" class="headerlink" title="常规类"></a>常规类</h5><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>- - help</td><td>显示帮助信息，usage</td></tr><tr><td>-v</td><td>打印日志信息，每增加一个-v，日志显示的信息越详细，目前最多支持三个-v，即：-v -v -v;  L0:一个-v，除启动提示、测试完成和最终结果之外，提供较少信息；  L1：两个-v，-v -v，提供较详细的运行测试信息，如发送到Activity的事件； L2：三个-v，-v -v -v，提供更加详细的信息，如测试中被选中的或未选中的Activity</td></tr></tbody></table><h5 id="事件类"><a href="#事件类" class="headerlink" title="事件类"></a>事件类</h5><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>-s</td><td>伪随机数生成器的seed值，如果用相同的seed值再次运行mnkey，会生成相同的事件序列(重复执行刚才的随机操作，复现问题好用)</td></tr><tr><td>- -throttle</td><td>后面接时间，单位毫秒，表示事件之间的固定延时（执行 每一个指令的间隔时间）</td></tr><tr><td>- -pct-touch</td><td>后接触摸事件百分比(触摸事件是一个down-up事件，它发生在屏幕上的某单一位置)，点击</td></tr><tr><td>- -pct-motion</td><td>后接动作事件百分比(动作事件由屏幕上某处的一个down事件、一系列的伪随机事件和一个up事件组成)，滑动</td></tr><tr><td>- -pct-trackball</td><td>后面接轨迹事件的百分比(轨迹事件由一个或几个随机的移动组成，有时还伴随有点击)</td></tr><tr><td>- -pct-syskeys</td><td>后面接“系统”按键事件的百分比(这些按键通常被保留，由系统使用，如Home、Back、StartCall、End Call及音量控制键)。</td></tr><tr><td>- -pct-nav</td><td>后面接“基本”导航事件百分比(导航事件主要来自方向输入设备的上，下，左，右事件)</td></tr><tr><td>- -pct-majornav</td><td>后面接“主要”导航事件的百分比(这些导航事件通常引发图形界面中的动作，如：键盘的中间按键、回退按键、菜单按键)</td></tr><tr><td>- -pct-appswitch</td><td>后面接启动Activity的百分比。在随机间隔里，Monkey将执行一个startActivity()调用，作为最大程度覆盖包中全部Activity的一种方法。</td></tr><tr><td>- -pct-flip</td><td>键盘翻转事件</td></tr><tr><td>- -pct-anyevent</td><td>调整其他时间比例，比如很少使用的keypress等事件</td></tr><tr><td>- -pct-pinchzoom</td><td>缩放事件</td></tr><tr><td>- -pct-permission</td><td>未知</td></tr></tbody></table><h5 id="约束类"><a href="#约束类" class="headerlink" title="约束类"></a>约束类</h5><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>-p</td><td>指定包，可一个可多个，多个包需要多个-p</td></tr><tr><td>-c</td><td>指定类，可一个可多个，多个需多个-c</td></tr></tbody></table><h5 id="调试类"><a href="#调试类" class="headerlink" title="调试类"></a>调试类</h5><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>- -hprof</td><td>设置此选项，将在Monkey事件序列之前和之后立即生成profiling报告。这将会在data/misc中生成大文件(~5Mb)，所以要小心使用它</td></tr><tr><td>- -ignore-crashes</td><td>当应用程序崩溃或发生任何失控异常时，Monkey将停止运行。如果设置此选项，Monkey将继续向系统发送事件，直到计数完成</td></tr><tr><td>- -ignore-timeouts</td><td>当应用程序发生任何超时错误(如“ApplicationNot Responding”对话框)时，Monkey将停止运行。如果设置此选项，Monkey将继续向系统发送事件，直到计数完成</td></tr><tr><td>- -ignore-security-exceptions</td><td>当应用程序发生任何权限错误（如启动一个需要某些权限的Activity)时，monkey将继续运行直到计数完成</td></tr><tr><td>- -ignore-native-crashes</td><td>当应用程序发生native code的崩溃事件时，monkey将继续运行直至计数完成</td></tr><tr><td>- -kill-process-after-error</td><td>设置此项后，当monkey因为应用程序发生错误而停止时，将会通知系统停止发生错误的进程</td></tr><tr><td>- -monitor-native-crashes</td><td>设置此项后，monkey运行时native code的崩溃事件将被监视并报告</td></tr></tbody></table><h4 id="常用monkey示例"><a href="#常用monkey示例" class="headerlink" title="常用monkey示例"></a>常用monkey示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p com.android.camera --ignore-crashes --ignore-timeouts --ignore-security-exceptions  --ignore-native-crashes --pct-touch 70 --pct-motion 25 --pct-majornav 5 -v -v -v --throttle 300 100000 &gt; E:\app_workstation\Android_files\MONKEY\1.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>以上命令执行效果：忽略app崩溃，忽略超时，忽略权限异常，忽略应用程序发生崩溃的本地代码，触摸事件百分比70%，手势事件25%，主要导航事件5%；日志等级三级，事件间隔3s，执行100000次事件，输出和错误都打印进D盘1.log文件中</p><h5 id="补充标准输出知识"><a href="#补充标准输出知识" class="headerlink" title="补充标准输出知识"></a>补充标准输出知识</h5><p>linux中，标准输入<code>stdin</code>，标准输出<code>stdout</code>，标准错误<code>stderr</code>，分别使用0,1,2代替，所以就有了以下几种常用的重定向方式：</p><ol><li><code>sh test.sh &gt; 1.log</code>，标准错误输出到屏幕，标准输出打印到1.log文件中，1.log中没有错误内容</li><li><code>sh test.sh &gt; 2.log 2&gt;&amp;1</code>，标准输出和标准错误都打印到2.log文件中</li><li><code>sh test.sh &gt; 3.log 2 &gt;err.log</code>，标准输出打印到3.log文件，标准错误打印到err.log文件</li></ol><p>使用monkey生成日志之后，需要对日志进行筛查，看是否有APP崩溃记录或者无响应记录。</p><ul><li>崩溃记录查找”CRASH”</li><li>无响应记录查找”ANR”（Application No Responding）</li><li>内存泄露问题搜索”GC”（需进一步分析）</li><li>异常问题搜索“Exception”（如果出现空指针，NullPointerException，需格外重视）</li></ul><h4 id="停止Monkey"><a href="#停止Monkey" class="headerlink" title="停止Monkey"></a>停止Monkey</h4><p>既然是linux进程，想停，很简单，找出来，kill掉..<br><code>adb shell ps | grep monkey</code><br><code>adb shell kill -9 PID</code></p><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
            <tag> Monkey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adb进阶一 —— logcat</title>
      <link href="2019/04/10/adb%E8%BF%9B%E9%98%B6%E4%B8%80-%E2%80%94%E2%80%94-logcat/"/>
      <url>2019/04/10/adb%E8%BF%9B%E9%98%B6%E4%B8%80-%E2%80%94%E2%80%94-logcat/</url>
      
        <content type="html"><![CDATA[<p>adb进阶一 —— logcat</p><a id="more"></a><h3 id="logcat-简介"><a href="#logcat-简介" class="headerlink" title="logcat 简介"></a>logcat 简介</h3><p>logcat是Android中的一个命令行工具，可以用于测试过程中获取程序的log<br>基本用法：<br>测试开始前，可以先清缓存:<code>adb logcat -c</code><br>获取日志：<code>adb logcat &gt; E:\app_workstation\Android_files\logs\1.log</code></p><p>语法格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[adb] logcat [&lt;option&gt;] … [&lt;filter – spec&gt;] …</span><br></pre></td></tr></table></figure><p>推荐搭配grep使用</p><h3 id="logcat-缓冲区"><a href="#logcat-缓冲区" class="headerlink" title="logcat 缓冲区"></a>logcat 缓冲区</h3><p>Android log输出量巨大， 特别是通信类log，好在Android降log放在不同的缓冲区内，可用于指定缓冲区输出log，目前有四个缓冲区：</p><table><thead><tr><th>缓冲区名称</th><th>用途</th></tr></thead><tbody><tr><td>Radio</td><td>输出通信系统的log</td></tr><tr><td>System</td><td>输出系统组件的log</td></tr><tr><td>Event</td><td>输出event模块的log</td></tr><tr><td>Main</td><td>所有java层的log，以及不属于上面三层的log</td></tr></tbody></table><p>缓冲区主要是给系统组件使用的，一般的应用不需要考虑，应用的log都在<strong>main</strong>缓冲区中<br>默认log输出（不指定缓冲区的情况下）是输出<code>System</code>和<code>Main</code>缓冲区的log</p><p>获取缓冲区命令：</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>-b <buffer></td><td>加载一个可使用的日志缓冲区提供查看，默认是main</td></tr></tbody></table><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">adb logcat –b radio</span><br><span class="line"></span><br><span class="line">adb logcat –b system</span><br><span class="line"></span><br><span class="line">adb logcat –b events</span><br><span class="line"></span><br><span class="line">adb logcat –b main</span><br></pre></td></tr></table></figure><h3 id="logcat-参数"><a href="#logcat-参数" class="headerlink" title="logcat 参数"></a>logcat 参数</h3><h4 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h4><p>由低到高</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>V</td><td>Verbose（最低优先级）明细</td></tr><tr><td>D</td><td>Debug调试</td></tr><tr><td>I</td><td>Info    信息</td></tr><tr><td>W</td><td>Warning警告</td></tr><tr><td>E</td><td>Error    错误</td></tr><tr><td>F</td><td>Fatal    严重错误</td></tr><tr><td>S</td><td>Silent（Super all output）</td></tr></tbody></table><p>日志过滤器格式：<code>tag: priority</code></p><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 仅输出标记为“ActivityManager”且优先级大于等于“Info”和 标记为“PowerManagerService”并且优先级大于等于“Debug”的日志</span><br><span class="line"></span><br><span class="line">adb logcat ActivityManager:I PowerManagerService:D *:S</span><br><span class="line"></span><br><span class="line"># 显示所有优先级大于等于“warning”的日志</span><br><span class="line"></span><br><span class="line">adb logcat *:W</span><br><span class="line"></span><br><span class="line"># 显示PowerManagerService的日志信息</span><br><span class="line"></span><br><span class="line">adb logcat -s PowerManagerService</span><br></pre></td></tr></table></figure><p>tips：<code>*:S</code>设置所有日志级别高于S的日志，由于没有这样级别，所以加上该过滤器可以确保只会输出符合条件的日志</p><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>-b</td><td>加载一个可使用的日志缓冲区供查看，默认值为main</td></tr><tr><td>-c</td><td>清除缓冲区中的全部日志并退出（清除完成后可使用-g 查看）</td></tr><tr><td>-g</td><td>打印日志缓冲区的大小并退出</td></tr><tr><td>-d</td><td>将缓冲区的log转存到屏幕中然后退出</td></tr><tr><td>-f</td><td>将log输出到制定的文件中&lt;文件名&gt;，默认为标准输出（stdout）</td></tr><tr><td>-n</td><td>设置日志的最大数目，默认值为4，需要和-r选项一起使用</td></tr><tr><td>-r</td><td>按照每千字节输出日志，默认值为16，需要和-f一起使用</td></tr><tr><td>-s</td><td>设置过滤器</td></tr><tr><td>-v</td><td>设置输出格式的日志消息</td></tr></tbody></table><p>一般长时间输出log的话建议-f -n -r三个参数连用，这样当一个文件日志输出满了之后可以马上在另一个中进行输出（输出多个指定大小的日志文件）<br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -f &#x2F;data&#x2F;local&#x2F;tmp&#x2F;log.txt -n 2 -r 3</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -b radio -v time &gt; &#x2F;tmp&#x2F;event.log</span><br></pre></td></tr></table></figure><p>tips:<code>-v time</code>表示在log中加入每条log发生的时间</p><h4 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h4><p>-v更多格式：</p><table><thead><tr><th>格式</th><th>说明</th></tr></thead><tbody><tr><td>brief</td><td>显示优先级/标记和过程的PID发出的消息（默认格式）</td></tr><tr><td>process</td><td>仅显示进程PID</td></tr><tr><td>tag</td><td>仅显示优先级/标记</td></tr><tr><td>thread</td><td>仅显示进程：线程和优先级/标记</td></tr><tr><td>raw</td><td>显示原始的日志信息，没有其他的元数据字段</td></tr><tr><td>time</td><td>显示日期，调用时间，优先级/标记，PID</td></tr><tr><td>long</td><td>显示所有的元数据字段并且用空行分隔消息内容</td></tr></tbody></table><p>示例：<code>adb logcat -v thread</code></p><p>以上，完~</p><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><blockquote><p><a href="https://www.cnblogs.com/bydzhangxiaowei/p/8168598.html">ADB logcat 过滤方法(抓取日志)</a><br><a href="https://www.cnblogs.com/JianXu/p/5468839.html">Android logcat命令详解</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android调试工具adb简介</title>
      <link href="2019/04/10/Android%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7adb%E7%AE%80%E4%BB%8B/"/>
      <url>2019/04/10/Android%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7adb%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>Android调试工具adb简介</p><a id="more"></a><p>对于Android测试和开发，adb使用应该算是一个基本技能，正好最近需要用到这个，结合网上前人经验稍微总结一下。</p><h3 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h3><p>adb全称<code>Android Debug Bridge</code>Android的调试桥，其实就是一个C/S架构的命令行工具。<br>adb有三个部分：</p><ol><li>运行在PC端（Windows，linux，Mac os）的client，功能是可以进行Android应用的安装，卸载，调试。</li><li>运行在PC端的service，作用是管理客户端到Android设备上adb后台进程的连接（adb服务启动后，在Windows资源管理器中可以查看adb.exe是启动状态）</li><li>运行在Android设备上的adb后台进程（adb shell ps | grep adb可见，占用端口5037）</li></ol><h3 id="常用abd命令"><a href="#常用abd命令" class="headerlink" title="常用abd命令"></a>常用abd命令</h3><ul><li><p>安装应用（apk文件在PC本地）<br>命令行进入apk文件所在路径，执行<code>adb install kuaikan.apk</code></p></li><li><p>卸载应用（应用已安装在Android设备）<br>区别与安装应用是试用apk文件，卸载应用试用的是包名，类似：<code>com.android.camera</code><br>连接上设备，执行<code>adb uninstall com.kuaikan.comic</code><br>(关于获取包名，可以问开发，也可以反编译apk文件，从<code>AndroidManifest.xml</code>文件中获取，反编译方法：推荐使用<code>apktool</code>,直接命令行执行<code>java -jar 路径\apktool.jar d 、路径yourApkFile.apk</code>即可，包名在<code>AndroidManifest.xml</code>中的<code>package</code>项可获取，顺便activity也可以在此获取<code>activity</code>)</p><blockquote><p><a href="https://bitbucket.org/iBotPeaches/apktool/downloads/">apktool下载地址</a></p></blockquote></li><li><p>文件互传<br>Android设备和PC之间的文件互传<br><code>adb pull 文件 目录</code>文件从Android设备推送到本地PC<br><code>adb push 文件 目录</code>文件从本地PC上传到Android设备</p></li><li><p>设备连接<br><code>adb devices</code> 获取设备列表及设备状态<br><code>adb get-state</code> 获取设备状态（device表示连接正常；offline表示连接异常，设备无响应；unknown表示为止设备）</p></li><li><p>日志操作<br><code>adb logcat</code>打印Android系统日志，类似的<code>bugreport</code>、<code>dumpsys</code>、<code>dumpstate</code>，建议重定向到本地：<br><code>adb bugreport &gt; D:\applogs\bugreport.log</code></p></li></ul><h3 id="adb-shell"><a href="#adb-shell" class="headerlink" title="adb shell"></a>adb shell</h3><p>adb shell其实就是调用Android系统中的命令，应该都知道，Android底层其实是linux，adb shell个人理解，和进入linux敲命令差不多，只是敲的是封装好的Android命令，因此，可以直接先执行adb shell进入shell模式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">E:\app_workstation &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; adb shell</span><br><span class="line">sakura:&#x2F; $</span><br><span class="line">2|sakura:&#x2F; $ cd &#x2F;data&#x2F;</span><br><span class="line">sakura:&#x2F;data $</span><br></pre></td></tr></table></figure><p>另外，adb shell的命令，都是执行的/system/bin目录下的执行文件，如果设备是root过的，可以尝试把这个目录导出来，看看命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull &#x2F;system&#x2F;bin&#x2F; E:\app_workstation\BIN</span><br></pre></td></tr></table></figure><p>导出之后，可以看一下<code>am</code>命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;system&#x2F;bin&#x2F;sh</span><br><span class="line"></span><br><span class="line">if [ &quot;$1&quot; !&#x3D; &quot;instrument&quot; ] ; then</span><br><span class="line">    cmd activity &quot;$@&quot;</span><br><span class="line">else</span><br><span class="line">    base&#x3D;&#x2F;system</span><br><span class="line">    export CLASSPATH&#x3D;$base&#x2F;framework&#x2F;am.jar</span><br><span class="line">    exec app_process $base&#x2F;bin com.android.commands.am.Am &quot;$@&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>其实就是shell脚本</p><ul><li>服务启停<br>停：<code>adb kill-server</code><br>启：<code>adb start-server</code><br>一般设备连接异常时，adb devices未显示设备，可以先停再重启服务</li></ul><h4 id="pm"><a href="#pm" class="headerlink" title="pm"></a>pm</h4><ul><li><p>列出安装在设备上的应用<br><code>adb shell pm list package</code></p></li><li><p>列出系统应用<br><code>adb shell pm list package -s</code></p></li><li><p>列出第三方应用<br><code>adb shell pm list package -3</code></p></li><li><p>列出包名及对应的apk名和存放路径<br><code>adb shell pm list package -f</code></p></li><li><p>组合查找，过滤(查找相机包名及安装路径)<br><code>adb shell pm list package -f -i camera</code></p></li><li><p>列出对应包名的.apk位置<br><code>adb shell pm path com.android.camera</code></p></li><li><p>列出对应包名的dump信息（可重定向到本地）<br><code>adb shell pm dump com.android.camera &gt; E:\app_workstation\android_files\camera.dump</code></p></li></ul><h4 id="am"><a href="#am" class="headerlink" title="am"></a>am</h4><ul><li><p>启动activity<br><code>adb shell am start -n package/activity</code><br>例如：<code>adb shell am start -n com.android.camera/.Camera</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell am start -n com.android.camera&#x2F;.Camera</span><br><span class="line">Starting: Intent &#123; cmp&#x3D;com.android.camera&#x2F;.Camera &#125;</span><br></pre></td></tr></table></figure></li><li><p>先停止应用再启动<br><code>adb shell am start -S com.android.camera/.Camera</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell am start -S com.android.camera&#x2F;.Camera</span><br><span class="line">Stopping: com.android.camera</span><br><span class="line">Starting: Intent &#123; act&#x3D;android.intent.action.MAIN cat&#x3D;[android.intent.category.LAUNCHER] cmp&#x3D;com.android.camera&#x2F;.Camera &#125;</span><br></pre></td></tr></table></figure></li><li><p>启动默认浏览器并打开网页<br><code>adb shell am start -a android.intent.action.VIEW -d https://www.baidu.com</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell am start -a android.intent.action.VIEW -d https:&#x2F;&#x2F;www.baidu.com</span><br><span class="line">Starting: Intent &#123; act&#x3D;android.intent.action.VIEW dat&#x3D;https:&#x2F;&#x2F;www.baidu.com&#x2F;... &#125;</span><br></pre></td></tr></table></figure></li><li><p>停止应用<br><code>adb shell am force-stop package</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb shell am force-stop com.android.camera</span><br></pre></td></tr></table></figure><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4></li><li><p>截图<br><code>adb shell screencap -p /sdcard/screen.png</code></p></li><li><p>录制<br><code>adb shell screenrecord sdcard/record.mp4</code></p></li><li><p>查看设备信息（如Android版本号）<br><code>adb shell getprop</code><br>示例：获取sdk版本：<code>adb shell getprop ro.build.version.sdk</code></p></li><li><p>查看分辨率<br><code>adb shell wm size</code></p></li><li><p>查看屏幕密度<br><code>adb shell wm density</code></p></li></ul><p>当设备root后，其实能获取的就更多了，例如MAC 地址啥的</p><h3 id="获取当前页面activity"><a href="#获取当前页面activity" class="headerlink" title="获取当前页面activity"></a>获取当前页面activity</h3><p>用于手上没有apk反编译，也没开发可以问，直接手机打开app，adb shell获取activity</p><p>通过<code>adb shell dumpsys window |findstr mCurrent</code>，捕获当前页面的activity<br>通过<code>adb shell dumpsys activity|findstr realActivity</code>, 捕获到当前页面的activity</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> adb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记cmder/git一个报错解决</title>
      <link href="2019/04/09/%E8%AE%B0cmder-git%E4%B8%80%E4%B8%AA%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/"/>
      <url>2019/04/09/%E8%AE%B0cmder-git%E4%B8%80%E4%B8%AA%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>记cmder/git一个报错解决</p><a id="more"></a><h3 id="Couldn’t-reserve-space-for-cygwin’s-heap-Win32-error-0"><a href="#Couldn’t-reserve-space-for-cygwin’s-heap-Win32-error-0" class="headerlink" title="Couldn’t reserve space for cygwin’s heap, Win32 error 0"></a>Couldn’t reserve space for cygwin’s heap, Win32 error 0</h3><p>早上开机想试试adb工具，由于是在Windows机器，第一个想到的还是用<code>cmder</code>来命令行操作，然后不知道是昨天系统自动更新强制杀了昨天的cmder进程造成文件损坏还是什么鬼，<code>ls</code>直接报错（普通用户打开cmder就可以执行ls，用管理员打开，就不行），具体报错信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; ls</span><br><span class="line">      0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487</span><br><span class="line">AllocationBase 0x0, BaseAddress 0x68570000, RegionSize 0x450000, State 0x10000</span><br><span class="line">D:\dev\cmder\vendor\msysgit\bin\ls.exe: *** Couldn&#39;t reserve space for cygwin&#39;s heap, Win32 error 0</span><br></pre></td></tr></table></figure><p>同样的报错也可能出现在使用<code>git</code>时候：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Git\bin\git.exe pull --progress &quot;origin&quot; </span><br><span class="line">Done</span><br><span class="line">    0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487</span><br><span class="line">AllocationBase 0x0, BaseAddress 0x68560000, RegionSize 0x390000, State 0x10000</span><br><span class="line">C:\Program Files\Git\bin\sh.exe: *** Couldn&#39;t reserve space for cygwin&#39;s heap, Win32 error 0</span><br></pre></td></tr></table></figure><h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><h4 id="重装cmder"><a href="#重装cmder" class="headerlink" title="重装cmder"></a>重装cmder</h4><p>首先以为是昨天系统自动升级时候强制杀了cmder进程造成文件损坏，就尝试重装了次，为了避免注册表问题，还选了其他的地址，安装完毕之后管理员打开cmder，ls还是报那个错，失败</p><h4 id="rebase-exe-b"><a href="#rebase-exe-b" class="headerlink" title="rebase.exe -b"></a>rebase.exe -b</h4><p>这个办法，原理不知道。。。在stackoverflow翻到的，不过是真解决了</p><ol><li><p>首先是进<code>路径\msysgit\bin</code>查看是否有<code>rebase.exe</code>该程序</p></li><li><p>命令行进入<code>路径\msysgit\bin</code>目录，执行<code>rebase.exe -b 0x50000000 msys-1.0.dll</code>即可，正常情况下执行该命令没任何响应，重启cmder或者git即解决</p></li></ol><h5 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h5><ol><li><code>rebase.exe</code>文件所在路径不固定，可能在<code>路径\msysgit\bin</code>下，也可能在<code>C:\Program Files (x86)\Git\bin</code>下</li><li>在执行<code>rebase</code>之前，需要确保<code>msys-1.0.dll</code>不是运行状态，<br> 查看方法，启动命令行，执行<code>tasklist /m msys-1.0.dll</code></li><li>养成好习惯，在执行rebase之前，先备份：<code>copy msys-1.0.dll msys-1.0.dll.bak</code>，如果执行失败<code>ReBaseImage (msys-1.0.dll) failed with last error = 6</code><br>考虑按以下步骤：</li></ol><ul><li>把dll文件拷贝到其他的目录下</li><li>重新复制生成备份文件</li><li>用副本替换原文件<br>另外，考虑用管理员身份运行</li></ul><p>以上，完~</p><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><blockquote><p><a href="http://jakob.engbloms.se/archives/1403">初始解决：jakob</a><br><a href="https://stackoverflow.com/questions/18502999/git-extensions-win32-error-487-couldnt-reserve-space-for-cygwins-heap-win32">stackoverflow问题解决</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cmder </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站性能杂货</title>
      <link href="2019/04/08/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%9D%82%E8%B4%A7/"/>
      <url>2019/04/08/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%9D%82%E8%B4%A7/</url>
      
        <content type="html"><![CDATA[<p>页面性能优化参考</p><a id="more"></a><h3 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h3><p>很多时候，会打开chrome F12的network栏，查看页面信息，页面底部会有三个时间：<br><code>DOMContentLoaded </code>,<code>Load</code>,<code>Finish</code></p><h4 id="DOMContentLoaded-和-Load"><a href="#DOMContentLoaded-和-Load" class="headerlink" title="DOMContentLoaded 和 Load"></a>DOMContentLoaded 和 Load</h4><p>DOMContentLoaded 和 Load 分别对应 页面 DOMContentLoaded 和 Load 事件触发的时间点，即：</p><p><code>DOMContentLoaded</code>：DOM树构建完成。即HTML页面由上向下解析HTML结构到末尾封闭标签</html> 。</p><p><code>Load</code>:页面加载完毕。 DOM树构建完成后，继续加载html/css 中的图片资源等外部资源，加载完成后视为页面加载完毕。</p><p>DOMContentLoaded 会比 Load 时间小，两者时间差大致等于外部资源加载的时间。</p><h4 id="Finish"><a href="#Finish" class="headerlink" title="Finish"></a>Finish</h4><p><code>Finish</code> 时间是页面上所有 http 请求发送到响应完成的时间，HTTP1.0/1.1 协议限定，单个域名的请求并发量是 6 个，即Finish是所有请求（不只是XHR请求，还包括DOC，img，js，css等资源的请求）在并发量为6的限制下完成的时间。</p><h3 id="优化实践"><a href="#优化实践" class="headerlink" title="优化实践"></a>优化实践</h3><h4 id="Make-fewer-HTTP-requests-（最大限度地减少HTTP请求）"><a href="#Make-fewer-HTTP-requests-（最大限度地减少HTTP请求）" class="headerlink" title="Make fewer HTTP requests （最大限度地减少HTTP请求）"></a>Make fewer HTTP requests （最大限度地减少HTTP请求）</h4><p>终端用户响应的时间中，有80%用于下载各项内容。这部分时间包括下载页面中的图像、样式表、脚本、Flash等。通过减少页面中的元素可以减少HTTP请求的次数。这是提高网页速度的关键步骤。<br>     减少页面组件的方法其实就是简化页面设计。那么有没有一种方法既能保持页面内容的丰富性又能达到加快响应时间的目的呢？这里有几条减少HTTP请求次数同时又可能保持页面内容丰富的技术。</p><p>合并文件是通过把所有的脚本放到一个文件中来减少HTTP请求的方法，如可以简单地把所有的CSS文件都放入一个样式表中。当脚本或者样式表在不同页面中使用时需要做不同的修改，这可能会相对麻烦点，但即便如此也要把这个方法作为改善页面性能的重要一步。</p><p>CSS Sprites是减少图像请求的有效方法。把所有的背景图像都放到一个图片文件中，然后通过CSS的background-image和background-position属性来显示图片的不同部分；</p><p>图片地图是把多张图片整合到一张图片中。虽然文件的总体大小不会改变，但是可以减少HTTP请求次数。图片地图只有在图片的所有组成部分在页面中是 紧挨在一起的时候才能使用，如导航栏。确定图片的坐标和可能会比较繁琐且容易出错，同时使用图片地图导航也不具有可读性，因此不推荐这种方法；</p><p>内联图像是使用data:URL scheme的方法把图像数据加载页面中。这可能会增加页面的大小。把内联图像放到样式表（可缓存）中可以减少HTTP请求同时又避免增加页面文件的大小。但是内联图像现在还没有得到主流浏览器的支持。</p><h4 id="Use-a-Content-Delivery-Network-CDN-（使用内容分发网络）"><a href="#Use-a-Content-Delivery-Network-CDN-（使用内容分发网络）" class="headerlink" title="Use a Content Delivery Network (CDN)（使用内容分发网络）"></a>Use a Content Delivery Network (CDN)（使用内容分发网络）</h4><p>用户与你网站服务器的接近程度会影响响应时间的长短。把你的网站内容分散到多个、处于不同地域位置的服务器上可以加快下载速度。但是首先我们应该做些什么呢？</p><p>按地域布置网站内容的第一步并不是要尝试重新架构你的网站让他们在分发服务器上正常运行。根据应用的需求来改变网站结构，这可能会包括一些比较复杂的任 务，如在服务器间同步Session状态和合并数据库更新等。要想缩短用户和内容服务器的距离，这些架构步骤可能是不可避免的。</p><p>要记住，在终端用户的响应时间中有80%到90%的响应时间用于下载图像、样式表、脚本、Flash等页面内容。这就是网站性能黄金守则。和重新设计你的 应用程序架构这样比较困难的任务相比，首先来分布静态内容会更好一点。这不仅会缩短响应时间，而且对于内容分发网络来说它更容易实现。</p><p>内容分发网络（Content Delivery Network，CDN）是由一系列分散到各个不同地理位置上的Web服务器组成的，它提高了网站内容的传输速度。用于向用户传输内容的服务器主要是根据 和用户在网络上的靠近程度来指定的。例如，拥有最少网络跳数（network hops）和响应速度最快的服务器会被选定。</p><p>一些大型的网络公司拥有自己的CDN，但是使用像Akamai Technologies，Mirror Image Internet， 或者Limelight Networks这样的CDN服务成本却非常高。对于刚刚起步的企业和个人网站来说，可能没有使用CDN的成本预算，但是随着目标用户群的不断扩大和更加 全球化，CDN就是实现快速响应所必需的了。以Yahoo来说，他们转移到CDN上的网站程序静态内容节省了终端用户20%以上的响应时间。使用CDN是 一个只需要相对简单地修改代码实现显著改善网站访问速度的方法。</p><h4 id="Add-Expires-headers添加一个Expires或Cache-Control头"><a href="#Add-Expires-headers添加一个Expires或Cache-Control头" class="headerlink" title="Add Expires headers添加一个Expires或Cache-Control头"></a>Add Expires headers添加一个Expires或Cache-Control头</h4><p>这条守则包括两方面的内容：<br>对于静态内容：设置文件头过期时间Expires的值为“Never expire”（永不过期）<br>对于动态内容：使用恰当的Cache-Control文件头来帮助浏览器进行有条件的请求</p><p>网页内容设计现在越来越丰富，这就意味着页面中要包含更多的脚本、样式表、图片和Flash。第一次访问你页面的用户就意味着进行多次的HTTP请求，但 是通过使用Expires文件头就可以使这样内容具有缓存性。它避免了接下来的页面访问中不必要的HTTP请求。Expires文件头经常用于图像文件， 但是应该在所有的内容都使用他，包括脚本、样式表和Flash等。</p><p>浏览器（和代理）使用缓存来减少HTTP请求的大小和次数以加快页面访问速度。Web服务器在HTTP响应中使用Expires文件头来告诉客户端内容需 要缓存多长时间。</p><h4 id="Compress-components-with-gzip-用gzip的压缩内容"><a href="#Compress-components-with-gzip-用gzip的压缩内容" class="headerlink" title="Compress components with gzip  用gzip的压缩内容"></a>Compress components with gzip  用gzip的压缩内容</h4><p>网络传输中的HTTP请求和应答时间可以通过前端机制得到显著改善。的确，终端用户的带宽、互联网提供者、与对等交换点的靠近程度等都不是网站开发者所能决定的。但是还有其他因素影响着响应时间。通过减小HTTP响应的大小可以节省HTTP响应时间。</p><p>从HTTP/1.1开始，web客户端都默认支持HTTP请求中有Accept-Encoding文件头的压缩格式<br> Accept-Encoding: gzip, deflate</p><p>如果web服务器在请求的文件头中检测到上面的代码，就会以客户端列出的方式压缩响应内容。Web服务器把压缩方式通过响应文件头中的Content-Encoding来返回给浏览器<br> Content-Encoding: gzip</p><p>Gzip是目前最流行也是最有效的压缩方式。这是由GNU项目开发并通过RFC 1952来标准化的。另外仅有的一个压缩格式是deflate，但是它的使用范围有限效果也稍稍逊色。</p><h4 id="Reduce-DNS-lookups（减少DNS查找）"><a href="#Reduce-DNS-lookups（减少DNS查找）" class="headerlink" title="Reduce DNS lookups（减少DNS查找）"></a>Reduce DNS lookups（减少DNS查找）</h4><p>域名系统（DNS）提供了域名和IP的对应关系，就像电话本中人名和他们的电话号码的关系一样。当你在浏览器地址栏中输入<a href="http://www.dudo.org时,dns解析服务器就会返回这个域名对应的ip地址.dns解析的过程同样也是需要时间的.一般情况下返回给定域名对应的ip地址会花费20到120毫秒的时间.而且在这个过程中浏览器什么都不会做直到dns查找完毕./">www.dudo.org时，DNS解析服务器就会返回这个域名对应的IP地址。DNS解析的过程同样也是需要时间的。一般情况下返回给定域名对应的IP地址会花费20到120毫秒的时间。而且在这个过程中浏览器什么都不会做直到DNS查找完毕。</a></p><p> 缓存DNS查找可以改善页面性能。这种缓存需要一个特定的缓存服务器，这种服务器一般属于用户的ISP提供商或者本地局域网控制，但是它同样会在用户使用 的计算机上产生缓存。DNS信息会保留在操作系统的DNS缓存中（微软Windows系统中DNS Client Service）。大多数浏览器有独立于操作系统以外的自己的缓存。由于浏览器有自己的缓存记录，因此在一次请求中它不会受到操作系统的影响。</p><p>Internet Explorer默认情况下对DNS查找记录的缓存时间为30分钟，它在注册表中的键值为DnsCacheTimeout。Firefox对DNS的查找 记录缓存时间为1分钟，它在配置文件中的选项为network.dnsCacheExpiration（Fasterfox把这个选项改为了1小时）</p><p>当客户端中的DNS缓存都为空时（浏览器和操作系统都为空），DNS查找的次数和页面中主机名的数量相同。这其中包括页面中URL、图片、脚本文件、样式表、Flash对象等包含的主机名。减少主机名的数量可以减少DNS查找次数。</p><p>减少主机名的数量还可以减少页面中并行下载的数量。减少DNS查找次数可以节省响应时间，但是减少并行下载却会增加响应时间。我的指导原则是把这些页面中 的内容分割成至少两部分但不超过四部分。这种结果就是在减少DNS查找次数和保持较高程度并行下载两者之间的权衡了</p><h4 id="Reduce-the-number-of-DOM-elements（减少DOM元素的数量）"><a href="#Reduce-the-number-of-DOM-elements（减少DOM元素的数量）" class="headerlink" title="Reduce the number of DOM elements（减少DOM元素的数量）"></a>Reduce the number of DOM elements（减少DOM元素的数量）</h4><p>一个复杂的页面意味着需要下载更多数据，同时也意味着JavaScript遍历DOM的效率越慢。比如当你增加一个事件句柄时在500和5000个DOM元素中循环效果肯定是不一样的。</p><p>  大量的DOM元素的存在意味着页面中有可以不用移除内容只需要替换元素标签就可以精简的部分。你在页面布局中使用表格了吗？你有没有仅仅为了布局而引入更多的<div>元素呢？也许会存在一个适合或者在语意是更贴切的标签可以供你使用。</p><p>DOM元素数量很容易计算出来，只需要在Firebug的控制台内输入：<br>document.getElementsByTagName(‘*’).length</p><h4 id="Reduce-cookie-size-（减少Cookie的大小）"><a href="#Reduce-cookie-size-（减少Cookie的大小）" class="headerlink" title="Reduce cookie size （减少Cookie的大小）"></a>Reduce cookie size （减少Cookie的大小）</h4><p>HTTP coockie可以用于权限验证和个性化身份等多种用途。coockie内的有关信息是通过HTTP文件头来在web服务器和浏览器之间进行交流的。因此保持coockie尽可能的小以减少用户的响应时间十分重要。</p><p>有关更多信息可以查看Tenni Theurer和Patty Chi的文章“When the Cookie Crumbles”。这们研究中主要包括：<br>去除不必要的coockie<br>使coockie体积尽量小以减少对用户响应的影响<br>注意在适应级别的域名上设置coockie以便使子域名不受影响<br>设置合理的过期时间。较早地Expire时间和不要过早去清除coockie，都会改善用户的响应时间。</p><h4 id="Use-cookie-free-domains使用无Cookie的域名"><a href="#Use-cookie-free-domains使用无Cookie的域名" class="headerlink" title="Use cookie-free domains使用无Cookie的域名"></a>Use cookie-free domains使用无Cookie的域名</h4><p>当浏览器在请求中同时请求一张静态的图片和发送coockie时，服务器对于这些coockie不会做任何地使用。因此他们只是因为某些负面因素而创建的 网络传输。所有你应该确定对于静态内容的请求是无coockie的请求。创建一个子域名并用他来存放所有静态内容</p><p>如果你的域名是<a href="http://www.example.org,你可以在static.example.org上存在静态内容.但是,如果你不是在www.example.org上/">www.example.org，你可以在static.example.org上存在静态内容。但是，如果你不是在www.example.org上</a> 而是在顶级域名example.org设置了coockie，那么所有对于static.example.org的请求都包含coockie。在这种情况 下，你可以再重新购买一个新的域名来存在静态内容，并且要保持这个域名是无coockie的。Yahoo!使用的是ymig.com，YouTube使用 的是ytimg.com，Amazon使用的是images-anazon.com等等。</p><p>使用无coockie域名存在静态内容的另外一个好处就是一些代理（服务器）可能会拒绝对coockie的内容请求进行缓存。一个相关的建议就是，如果你想确定应该使用example.org还是<a href="http://www.example.org作/">www.example.org作</a> 为你的一主页，你要考虑到coockie带来的影响。忽略掉www会使你除了把coockie设置到*.example.org（*是泛域名解析，代表了 所有子域名译者dudo注）外没有其它选择，因此出于性能方面的考虑最好是使用带有www的子域名并且在它上面设置coockie。</p><h3 id="…-…"><a href="#…-…" class="headerlink" title="… …"></a>… …</h3><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><blockquote><p><a href="http://www.cnblogs.com/jiahaohk/archive/2009/08/29/1556330.html">加快您的网站的最佳实践（Best Practices for Speeding Up Your Web Site）</a><br><a href="http://developer.yahoo.com/performance/rules.html">英文原文</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>伪·influxdb删除数据</title>
      <link href="2019/04/08/%E4%BC%AA%C2%B7influxdb%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/"/>
      <url>2019/04/08/%E4%BC%AA%C2%B7influxdb%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>伪 influxdb删除数据</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>大早上的，一大佬跟我说grafan登不上了，让帮忙看看啥情况，登录服务器一通乱看，磁盘满了，因为那台服务器还装了个influxdb，估计也就是数据写的，没空间了。</p><p>influxdb作为时序数据库的一种，是不提供类似mysql的delete操作，也就是，原则上，你删不了数据，除非删库。</p><p>但是，influxdb提供了数据保留策略<code>policies</code>，通过对<code>policies</code>操作，可以达到删除数据的效果</p><h3 id="数据保存策略（Retention-Policies）"><a href="#数据保存策略（Retention-Policies）" class="headerlink" title="数据保存策略（Retention Policies）"></a>数据保存策略（Retention Policies）</h3><p>influxdb的数据保存策略<code>policies</code>主要是用于指定数据的保留时间，超过指定时间，就会删除这部分数据。</p><h4 id="查询策略"><a href="#查询策略" class="headerlink" title="查询策略"></a>查询策略</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; show retention policies on exceptionless;</span><br><span class="line">name    duration shardGroupDuration replicaN default</span><br><span class="line">----    -------- ------------------ -------- -------</span><br><span class="line">autogen 0s       168h0m0s           1        true</span><br></pre></td></tr></table></figure><ul><li>name: 策略名称</li><li>duration： 保留时间，0s表示永久保存</li><li>shardGroupDuration：shardGroup的存储时间，shardGroup是InfluxDB的一个基本储存结构，个人理解为时间分区</li><li>replicaN：全称是REPLICATION，副本个数</li><li>default：是否是默认策略</li></ul><h4 id="新建策略"><a href="#新建策略" class="headerlink" title="新建策略"></a>新建策略</h4><p>语法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE RETENTION POLICY ON &lt;retention_policy_name&gt; </span><br><span class="line">ON &lt;database_name&gt; </span><br><span class="line">DURATION &lt;duration&gt; </span><br><span class="line">REPLICATION &lt;n&gt; [SHARD DURATION &lt;duration&gt; ] [DEFAULT]</span><br></pre></td></tr></table></figure><h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE RETENTION POLICY &quot;3_day&quot; ON &quot;exceptionless&quot; DURATION 3d REPLICATION 1 SHARD DURATION 3h DEFAULT;</span><br></pre></td></tr></table></figure><p>为库exceptionless创建了一个名称为3_day的策略，其中数据保存时间为3天，SHARDDURATION为3h。</p><h4 id="ShardGroup"><a href="#ShardGroup" class="headerlink" title="ShardGroup"></a>ShardGroup</h4><p>shardgroup是InfluxDB中一个重要的逻辑概念，它负责指定时间跨度的数据存储，这个时间跨度在创建RP时指定。如果没有指定，系统将通过RP的数据保留时间来计算：</p><table><thead><tr><th>Retention Policy‘s DURATION</th><th>Shard Group Duration</th></tr></thead><tbody><tr><td>&lt; 2days</td><td>1h</td></tr><tr><td>&gt;= 2days and &lt;= 6months</td><td>24h</td></tr><tr><td>&gt; 6months</td><td>168h</td></tr></tbody></table><p>不同shardgroup的时间跨度不会重叠。shardgroup实现了数据按时间分区，这样的设计可以：</p><ol><li>一定程度上缓解数据写入热点问题</li><li>加快数据删除效率(将数据按照时间分割成小的粒度会使得数据过期实现非常简单，InfluxDB中数据过期删除的执行粒度就是Shard Group，系统会对每一个Shard Group判断是否过期，而不是一条一条记录判断。InfluxDB没有提供删除和更新数据的接口，数据只能通过RP进行删除)</li><li>加快数据按时间维度查找的效率(实现了将数据按照时间分区的特性。将时序数据按照时间分区是时序数据库一个非常重要的特性，基本上所有时序数据查询操作都会带有时间的过滤条件，比如查询最近一小时或最近一天，数据分区可以有效根据时间维度选择部分目标分区，淘汰部分分区)</li></ol><h4 id="修改及删除策略"><a href="#修改及删除策略" class="headerlink" title="修改及删除策略"></a>修改及删除策略</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改策略</span><br><span class="line">alter retention policy &quot;autogen&quot; on &quot;exceptionless&quot; duration 72h0m0s default;</span><br><span class="line"></span><br><span class="line"># 删除策略</span><br><span class="line">drop retention POLICY &quot;2_hours&quot; ON &quot;exceptionless&quot;</span><br></pre></td></tr></table></figure><h3 id="后序"><a href="#后序" class="headerlink" title="后序"></a>后序</h3><p>说回大佬的问题，连接进influxdb：<code>influx -host ip:port -precision rfc3339</code>之后，查看当前库的存储策略：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; show retention policies on exceptionless;</span><br><span class="line">name    duration shardGroupDuration replicaN default</span><br><span class="line">----    -------- ------------------ -------- -------</span><br><span class="line">autogen 0s       168h0m0s           1        true</span><br></pre></td></tr></table></figure><p>嗯，保存时间是永久。。再新建一个7天的策略，把原策略删除即可。</p><p>以上，完~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Influxdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux垃圾清理</title>
      <link href="2019/02/27/Linux%E5%9E%83%E5%9C%BE%E6%B8%85%E7%90%86/"/>
      <url>2019/02/27/Linux%E5%9E%83%E5%9C%BE%E6%B8%85%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>linux垃圾清理</p><a id="more"></a><p>起因是阿里云上面一台很穷的机器，大早上来看了下，搭在那服务器上面的grafana直接就登不上了，登服务器看了下日志，磁盘满了，因为就50G的空间，上面还有个influxdb占了大头，在重新申请扩充磁盘空间之前，只能先看看能删啥了。</p><h3 id="Linux垃圾"><a href="#Linux垃圾" class="headerlink" title="Linux垃圾"></a>Linux垃圾</h3><p>坊间有句话：Linux不像windows，Linux没有垃圾。对这句话，只能笑笑。。</p><p>首先<code>df -h</code>看一下哪个分区满了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf633r5fhkmlfxl47zbkz log]# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;vda1        50G   43G  28M  100% &#x2F;</span><br><span class="line">devtmpfs        3.9G     0  3.9G   0% &#x2F;dev</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs           3.9G  500K  3.9G   1% &#x2F;run</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">tmpfs           783M     0  783M   0% &#x2F;run&#x2F;user&#x2F;1002</span><br></pre></td></tr></table></figure><p>可以看到<code>/dev/vda1</code>分区基本已经使用100%了，这个分区是挂载在<code>/</code>目录下，所以，需要清理的也就是<code>/</code>目录下的垃圾。</p><p>进根目录，一层一层的看文件大小并按文件大小倒序排列：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;</span><br><span class="line"></span><br><span class="line">du -sh * | sort -h</span><br></pre></td></tr></table></figure><p>找到最大的文件夹/文件，进入对应的文件夹，一层一层的筛选<br>基本上可以找到<code>/var/log</code>这个文件夹，这个文件夹中有很大的日志文件，尤其是<code>/var/log/messages</code>文件以及<code>/var/log/journal</code>文件夹，这两个都是系统操作日志的记录，尤其是<code>journal</code>文件夹，里面存的大量的日志，这台服务器的日志有4G，需要清理的就是这个文件夹了。</p><h3 id="journalctl"><a href="#journalctl" class="headerlink" title="journalctl"></a>journalctl</h3><p>linux继承unix，也有类似syslog的记录，linux有个journald的日志解决方案，说实话，我对linux底层不是非常了解，所以这个日志系统当前也没多少时间去深究，只能停留在使用上。<br>journald日志系统有个读取日志的工具：<code>journalctl</code>，这个工具应该算是经常用到的一个，经常搭建环境时候出错需要：<code>journalctl -xe</code>查看详细日志</p><p>关于<code>journalctl</code>这个工具的详细介绍这边不说，提供官方地址，不行就直接<code>--help</code></p><blockquote><p><a href="https://www.freedesktop.org/software/systemd/man/journalctl.html">journalctl各参数详细介绍</a></p></blockquote><p>其中可以找到一个参数：<code>--vacuum-size=, --vacuum-time=, --vacuum-files=</code><br>官方解释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Removes the oldest archived journal files until the disk space they use falls below the specified size (specified with the usual &quot;K&quot;, &quot;M&quot;, &quot;G&quot; and &quot;T&quot; suffixes), or all archived journal files contain no data older than the specified timespan (specified with the usual &quot;s&quot;, &quot;m&quot;, &quot;h&quot;, &quot;days&quot;, &quot;months&quot;, &quot;weeks&quot; and &quot;years&quot; suffixes), or no more than the specified number of separate journal files remain. Note that running --vacuum-size&#x3D; has only an indirect effect on the output shown by --disk-usage, as the latter includes active journal files, while the vacuuming operation only operates on archived journal files. Similarly, --vacuum-files&#x3D; might not actually reduce the number of journal files to below the specified number, as it will not remove active journal files.</span><br></pre></td></tr></table></figure><p>这三个参数，可以帮助我们删除journald的日志</p><p>用法：<br><code>journalctl --vacuum-size=1G</code>  指定日志文件最大占据空间为1G<br><code>journalctl --vacuum-time=1years</code> 指定日志文件保存时间为1年</p><p>更多用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">#查看所有日志（默认情况下 ，只保存本次启动的日志）</span><br><span class="line">$ sudo journalctl</span><br><span class="line"></span><br><span class="line">#查看内核日志（不显示应用日志）</span><br><span class="line">$ sudo journalctl -k</span><br><span class="line"></span><br><span class="line">#查看系统本次启动的日志</span><br><span class="line">$ sudo journalctl -b</span><br><span class="line">$ sudo journalctl -b -0</span><br><span class="line"></span><br><span class="line">#查看上一次启动的日志（需更改设置）</span><br><span class="line">$ sudo journalctl -b -1</span><br><span class="line"></span><br><span class="line">#查看指定时间的日志</span><br><span class="line">$ sudo journalctl --since&#x3D;&quot;2012-10-30 18:17:16&quot;</span><br><span class="line">$ sudo journalctl --since &quot;20 min ago&quot;</span><br><span class="line">$ sudo journalctl --since yesterday</span><br><span class="line">$ sudo journalctl --since &quot;2015-01-10&quot; --until &quot;2015-01-11 03:00&quot;</span><br><span class="line">$ sudo journalctl --since 09:00 --until &quot;1 hour ago&quot;</span><br><span class="line"></span><br><span class="line">#显示尾部的最新10行日志</span><br><span class="line">$ sudo journalctl -n</span><br><span class="line"></span><br><span class="line">#显示尾部指定行数的日志</span><br><span class="line">$ sudo journalctl -n 20</span><br><span class="line"></span><br><span class="line">#实时滚动显示最新日志</span><br><span class="line">$ sudo journalctl -f</span><br><span class="line"></span><br><span class="line">#查看指定服务的日志</span><br><span class="line">$ sudo journalctl &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;systemd</span><br><span class="line"></span><br><span class="line">#查看指定进程的日志</span><br><span class="line">$ sudo journalctl _PID&#x3D;1</span><br><span class="line"></span><br><span class="line">#查看某个路径的脚本的日志</span><br><span class="line">$ sudo journalctl &#x2F;usr&#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">#查看指定用户的日志</span><br><span class="line">$ sudo journalctl _UID&#x3D;33 --since today</span><br><span class="line"></span><br><span class="line">#查看某个 Unit 的日志</span><br><span class="line">$ sudo journalctl -u nginx.service</span><br><span class="line">$ sudo journalctl -u nginx.service --since today</span><br><span class="line"></span><br><span class="line">#实时滚动显示某个 Unit 的最新日志</span><br><span class="line">$ sudo journalctl -u nginx.service -f</span><br><span class="line"></span><br><span class="line">#合并显示多个 Unit 的日志</span><br><span class="line">$ journalctl -u nginx.service -u php-fpm.service --since today</span><br><span class="line"></span><br><span class="line">#查看指定优先级（及其以上级别）的日志，共有8级</span><br><span class="line"># 0: emerg</span><br><span class="line"># 1: alert</span><br><span class="line"># 2: crit</span><br><span class="line"># 3: err</span><br><span class="line"># 4: warning</span><br><span class="line"># 5: notice</span><br><span class="line"># 6: info</span><br><span class="line"># 7: debug</span><br><span class="line">$ sudo journalctl -p err -b</span><br><span class="line"></span><br><span class="line">#日志默认分页输出，--no-pager 改为正常的标准输出</span><br><span class="line">$ sudo journalctl --no-pager</span><br><span class="line"></span><br><span class="line">#以 JSON 格式（单行）输出</span><br><span class="line">$ sudo journalctl -b -u nginx.service -o json</span><br><span class="line"></span><br><span class="line">#以 JSON 格式（多行）输出，可读性更好</span><br><span class="line">$ sudo journalctl -b -u nginx.serviceqq</span><br><span class="line"> -o json-pretty</span><br><span class="line"></span><br><span class="line">#显示日志占据的硬盘空间</span><br><span class="line">$ sudo journalctl --disk-usage</span><br><span class="line"></span><br><span class="line">#指定日志文件占据的最大空间</span><br><span class="line">$ sudo journalctl --vacuum-size&#x3D;1G</span><br><span class="line"></span><br><span class="line">#指定日志文件保存多久</span><br><span class="line">$ sudo journalctl --vacuum-time&#x3D;1years</span><br></pre></td></tr></table></figure><p>附上一篇关于<code>systemd</code>命令介绍的博客：</p><blockquote><p><a href="https://www.linuxprobe.com/systemd-command.html">systemd命令</a></p></blockquote><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> journalctl </tag>
            
            <tag> systemd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7安装pip3</title>
      <link href="2019/01/29/Centos7%E5%AE%89%E8%A3%85pip3/"/>
      <url>2019/01/29/Centos7%E5%AE%89%E8%A3%85pip3/</url>
      
        <content type="html"><![CDATA[<p>centos7安装pip3</p><a id="more"></a><p>当前基本拿到手的centos安装的可能都是python2.7，对应的pip版本也很低，很多后面的工具包都安装不了，所以，需要安装个pip3</p><blockquote><p><a href="http://tokyle.com/2018/04/20/Centos%E4%B8%8B%E5%8D%87%E7%BA%A7python2-7%E5%88%B03-6/">python2.7和python3共存</a></p></blockquote><p>安装完python3之后，就可以安装pip</p><h3 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget --no-check-certificate  https:&#x2F;&#x2F;pypi.python.org&#x2F;packages&#x2F;source&#x2F;p&#x2F;pip&#x2F;pip-8.0.2.tar.gz#md5&#x3D;3a73c4188f8dbad6a1e6f6d44d117eeb</span><br><span class="line"></span><br><span class="line">tar -zxvf pip-8.0.2.tar.gz</span><br><span class="line"></span><br><span class="line">mv pip-8.0.2  &#x2F;usr&#x2F;local&#x2F;pip3</span><br><span class="line"></span><br><span class="line">cd  &#x2F;usr&#x2F;local&#x2F;pip3</span><br><span class="line"></span><br><span class="line">python3 setup.py build</span><br><span class="line"></span><br><span class="line">python3 setup.py install</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>测试：<code>pip3 install xmind</code></p><p>需要注意的是的，当前安装的pip3不是最新版本，需要升级：<code>pip3 install --upgrade pip</code></p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pip3 </tag>
            
            <tag> Centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019年关将至有感</title>
      <link href="2019/01/24/2019%E5%B9%B4%E5%85%B3%E5%B0%86%E8%87%B3%E6%9C%89%E6%84%9F/"/>
      <url>2019/01/24/2019%E5%B9%B4%E5%85%B3%E5%B0%86%E8%87%B3%E6%9C%89%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<p>2019农历年来临之际有感</p><a id="more"></a><p>年关将近，发发牢骚…<br>近几天“百度已死”的文章铺天盖地，随之而来的很多分析互联网的文章出现，年末了，也扯扯自己感受。最大的感触就是“中国互联网”的确是不再互联。曾经还在百度搜音乐，搜商品..而今，基本都是对应网站（网易云，淘宝）直接搜索。可能也有近几年百度搜索结果太烂的原因，然后呢，不是很关注这行的可能不怎么知道，当前国内互联网，巨头分地，彼此吃像都不怎么样，说到底都是数据，隐私，流量，具体点就是钱。</p><p>微信公众号的内容，普通搜索引擎的爬虫无法收录；<br>淘宝为代表的网购平台, 长时间的封杀搜索引擎爬虫（结果就是搜商品只能淘宝、京东站内搜索）；<br>app之间互转越来越困难（抖音转微信等）<br>加上前段时间的马桶MT，聊天宝，多闪被微信封杀…<br>巨头圈地，彼此不互联貌似已经越来越具象；相比之下，国外谷歌搜索结果仍然可以直连亚马逊…无话可说..</p><p>最后，还是扯到搜索上，当前百度基本我是放弃了，必应最近日子也不好过；最最推荐的方式，就是有能力就买台服务器，自己搭个梯子吧，万里长城永不倒啊（直接买VPN不怎么推荐，有点手段的能把你祖宗辈信息都截到）；科学上网做不到，推荐几个小众的搜索网站：</p><p>无隐私搜索（chrome有插件，地址栏直接输搜索项，实测非常干净）：<br><code>https://www.duckduckgo.com/</code></p><p>类似网站查询网站，可查用户覆盖率和用户标签，其他功能自行体会（有chrome插件）：<br><code>https://www.similarweb.com/</code></p><p>在线问答系统（类似百科）：<br><code>https://www.wolframalpha.com/</code></p><p>（以上网站可能都需要至少科学上网一次装完插件..所以，还是赶紧会科学上网现实，直接Google多方便）</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>jmeter吞吐量几个插件介绍</title>
      <link href="2019/01/18/jmeter%E5%90%9E%E5%90%90%E9%87%8F%E5%87%A0%E4%B8%AA%E6%8F%92%E4%BB%B6%E4%BB%8B%E7%BB%8D/"/>
      <url>2019/01/18/jmeter%E5%90%9E%E5%90%90%E9%87%8F%E5%87%A0%E4%B8%AA%E6%8F%92%E4%BB%B6%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<p>几个jmeter吞吐量相关插件</p><a id="more"></a><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>测试接口：获取系统时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http:&#x2F;&#x2F;192.168.0.1:8080&#x2F;api&#x2F;v1&#x2F;Other&#x2F;GetServiceTime</span><br></pre></td></tr></table></figure><p>jmeter脚本结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 线程组</span><br><span class="line">-- HTTP信息头管理器</span><br><span class="line">    -- Throughput Controller 1</span><br><span class="line">    -- GetService Time 1</span><br><span class="line">    -- Throughput Controller 2</span><br><span class="line">    -- GetService Time 2</span><br><span class="line">    -- 查看结果树</span><br></pre></td></tr></table></figure><h3 id="吞吐量控制器（Throughput-Controller）"><a href="#吞吐量控制器（Throughput-Controller）" class="headerlink" title="吞吐量控制器（Throughput Controller）"></a>吞吐量控制器（Throughput Controller）</h3><p>这个组件，其实按照我们的理解，不应该翻译成吞吐量控制器，这个组件的作用是控制子节点执行频率，有两个控制方式：</p><ol><li>Total Executions(执行总次数):控制执行次数</li><li>Percent Executions(执行百分比)：执行设置的测试计划的总测试次数的百分比</li></ol><ul><li>测试计划总测试次数在线程组处设置，总次数=（Number of Threaders(users) * Loop Count）</li></ul><p>这两个很好理解，选择模式为总次数，设置几次，就执行几次；选模式为百分比，执行次数就是总次数的百分之n</p><p>这个组件，还有个<code>per user</code>选项</p><ul><li><p>勾选：会按照每个线程单独计算吞吐量，如线程组设置了5个线程，循环次数为2的情况，吞吐量为1时，吞吐量的子节点每个线程执行一次，总共会执行5次。</p></li><li><p>不勾选：按照全局的执行数次进行计数，如线程组设置了5个线程，循环次数为2的情况，吞吐量为1时，吞吐量的子节点仅会执行一次。</p></li></ul><h4 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h4><p>线程组：5个线程，循环次数2次（测试计划总次数为10）</p><ol><li><p>没有 Throughput Controller 这个组件，直接执行，在查看结果树种会有<strong>10</strong>条记录；</p></li><li><p>有Throughput Controller，模式选择Total Executions，Throughput设置为1，不勾选<code>Per User</code>，点击执行，查看结果树会有<strong>1</strong>条记录；（设置的throughput）</p></li><li><p>有Throughput Controller，模式选择Total Executions，Throughput设置为1，<strong>勾选</strong><code>Per User</code>，点击执行，查看结果树会有<strong>5</strong>条记录；（线程数*设置的throughput）</p></li><li><p>有Throughput Controller，模式选择Percent Executions，Throughput设置为40，不勾选<code>Per User</code>，点击执行，查看结果树会有<strong>4</strong>条记录；（设置的throughput% * 总次数）</p></li><li><p>有Throughput Controller，模式选择Percent Executions，Throughput设置为40，<strong>勾选</strong><code>Per User</code>，点击执行，查看结果树会有<strong>5</strong>条记录；（一个用户的吞吐量（1<em>循环次数）</em>设置的throurhput%，四舍五入之后，相加 ）（注意会有四舍五入，所以，当百分比设置为20%时候，一个用户的吞吐量的20%就是 1<em>2</em>20%，直接四舍五入成了0，最后在查看结果树，就看不见执行记录）</p></li></ol><h3 id="Constant-Timer"><a href="#Constant-Timer" class="headerlink" title="Constant Timer"></a>Constant Timer</h3><p>这个就可以理解为  思考时间（thinktime），单位是毫秒</p><p><strong>作用域为当前线程组</strong></p><h4 id="实验-1"><a href="#实验-1" class="headerlink" title="实验"></a>实验</h4><p>jmeter测试脚本层级：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 线程组</span><br><span class="line">-- HTTP信息头管理器</span><br><span class="line">    -- GetServiceTim1-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- Constant Timer（3000 ms）</span><br><span class="line">    -- GetServiceTim2-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- GetServiceTim3-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- GetServiceTim4-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- 查看结果树</span><br></pre></td></tr></table></figure><p>点击执行，在点击执行后3s，GetServiceTim1开始执行，再过3s，GetServiceTim2执行，以此类推</p><h3 id="Constant-Throughput-Timer（固定QPS）"><a href="#Constant-Throughput-Timer（固定QPS）" class="headerlink" title="Constant Throughput Timer（固定QPS）"></a>Constant Throughput Timer（固定QPS）</h3><p>这个组件就是给需要特定QPS的场景，组件里有两个菜单：<br>Target throughput(in samples per minute)：目标QPS，单位是分钟，1200/min -&gt; 20/s<br>Calculate Throughput based on：计算基准，有五种</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">This thread only ：分别控制每个线程的吞吐量，选择这种模式时，总的吞吐量为设置的 target Throughput 乘以线程的数量</span><br><span class="line"></span><br><span class="line">All active threads ： 设置的target Throughput 将分配在每个活跃线程上，每个活跃线程在上一次运行结束后等待合理的时间后再次运行。活跃线程指同一时刻同时运行的线程。</span><br><span class="line"></span><br><span class="line">All active threads in current thread group ：设置的target Throughput将分配在当前线程组的每一个活跃线程上，当测试计划中只有一个线程组时，该选项和All active threads选项的效果完全相同。</span><br><span class="line"></span><br><span class="line">All active threads （shared ）：与All active threads 的选项基本相同，唯一的区别是，每个活跃线程都会在所有活跃线程上一次运行结束后等待合理的时间后再次运行。</span><br><span class="line"></span><br><span class="line">All cative threads in current thread group （shared ）：与All active threads in current thread group 基本相同，唯一的区别是，每个活跃线程都会在所有活跃线程的上一次运行结束后等待合理的时间后再次运行。</span><br></pre></td></tr></table></figure><h4 id="实验-2"><a href="#实验-2" class="headerlink" title="实验"></a>实验</h4><p>线程数设置为10，循环次数：永远，持续时间90s<br>jmeter 脚本层级结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 线程组</span><br><span class="line">-- HTTP信息头管理器</span><br><span class="line">    -- Constant Throughput Timer</span><br><span class="line">    -- GetServiceTime接口</span><br><span class="line">    -- 查看结果树</span><br><span class="line">    -- 聚合报告</span><br><span class="line">    -- jp@gc - Transactions per Second</span><br></pre></td></tr></table></figure><ol><li><p>target throughput设置：1200/m（20/s），模式选择：this thread only，点击执行，当前QPS为 <code>20*10（线程数）=200/s</code></p></li><li><p>target throughput设置：1200/m（20/s），模式选择: All active threads，点击执行，当前QPS为 <code>20/s</code><br>(All active threads （shared ）和All cative threads in current thread group （shared ）没怎么实验，感觉至少没怎么用到。。。主要是懒。。)</p></li></ol><p>完~</p>]]></content>
      
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter压测关联接口</title>
      <link href="2019/01/16/Jmeter%E5%8E%8B%E6%B5%8B%E5%85%B3%E8%81%94%E6%8E%A5%E5%8F%A3/"/>
      <url>2019/01/16/Jmeter%E5%8E%8B%E6%B5%8B%E5%85%B3%E8%81%94%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p>jmeter关联接口性能测试</p><a id="more"></a><h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>进行接口性能测试时候，尤其是登录类接口，经常需要先进行登录，然后拿到登录返回的token，比如sessionid，来作为参数传给下一个接口作为入参</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>测试接口：<br>登录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">POST http:&#x2F;&#x2F;192.168.0.1:8080&#x2F;api&#x2F;Login</span><br><span class="line"></span><br><span class="line">POST data:</span><br><span class="line">&#123;</span><br><span class="line">    &quot;mobileId&quot;:&quot;ad9ec085&quot;,</span><br><span class="line">    &quot;loginUrl&quot;:&quot;P00019452&quot;,</span><br><span class="line">    &quot;simId&quot;:&quot;|&quot;,</span><br><span class="line">    &quot;phoneModel&quot;:&quot;vivo vivo X6SPlus D&quot;,</span><br><span class="line">    &quot;phoneSysVersion&quot;:&quot;5.1.1&quot;,</span><br><span class="line">    &quot;appVersion&quot;:&quot;4.2.0&quot;,</span><br><span class="line">    &quot;language&quot;:&quot;ZH-CN&quot;,</span><br><span class="line">    &quot;isClearGesturePwd&quot;:0,</span><br><span class="line">    &quot;companyCode&quot;:&quot;test&quot;,</span><br><span class="line">    &quot;registrationId&quot;:&quot;120c83f7601a92735ae&quot;,</span><br><span class="line">    &quot;isAutoLogin&quot;:&quot;0&quot;,</span><br><span class="line">    &quot;sign&quot;:&quot;a8a922d705c15686232d963e3ce9461aa96df4689420e5abab76535c00532417&quot;,</span><br><span class="line">    &quot;timeStamp&quot;:&quot;20181029101835&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接口返回信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;result&quot;:true,</span><br><span class="line">    &quot;data&quot;:&#123;</span><br><span class="line">        &quot;sysPara&quot;:&#123;</span><br><span class="line">            &quot;CancelAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;CustomerIsVisible&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;ExceptionAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;IsAllowRevoke&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;IsNeedApproveComment&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;IsNeedOTReason&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;IsNeedRejectComment&quot;:&quot;Y&quot;,</span><br><span class="line">            &quot;IsShowOTType&quot;:&quot;1&quot;,</span><br><span class="line">            &quot;LeaveAttachmentAmount&quot;:&quot;2&quot;,</span><br><span class="line">            &quot;OTAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;OTDayTypeIsVisible&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;ShiftAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;isNeedOTExplain&quot;:&quot;1&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;userInfo&quot;:&#123;</span><br><span class="line">            &quot;BackGroundVersion&quot;:&quot;Y1&quot;,</span><br><span class="line">            &quot;GesturePwd&quot;:&quot;&quot;,</span><br><span class="line">            &quot;IsValid&quot;:true,</span><br><span class="line">            &quot;LoginName&quot;:&quot;P00019452&quot;,</span><br><span class="line">            &quot;ModuleList&quot;:Array[9],</span><br><span class="line">            &quot;PersonID&quot;:&quot;www-2f7f-4203-23212-5cc00acbcd0a&quot;,</span><br><span class="line">            &quot;ServiceTime&quot;:&quot;11:37&quot;,</span><br><span class="line">            &quot;SessionId&quot;:&quot;19431489-f4df-4143-b254-15b2f74f449a,a13b648f-6d81-4307-8ee1-b04c5b976246&quot;,</span><br><span class="line">            &quot;TimeClassE&quot;:&quot;&quot;,</span><br><span class="line">            &quot;TimeClassS&quot;:&quot;&quot;,</span><br><span class="line">            &quot;UserID&quot;:&quot;112dcs-6d81-ewew-8ee1-b04c5b976246&quot;,</span><br><span class="line">            &quot;Uuid&quot;:&quot;darcc75332-A4E2-4FB1-AFCF-C6EB07647825&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;user&quot;:&#123;</span><br><span class="line">            &quot;BirthDay&quot;:&quot;&quot;,</span><br><span class="line">            &quot;CompanyEngName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;CompanyName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;DeptId&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;DeptName&quot;:&quot;测试部&quot;,</span><br><span class="line">            &quot;EmpID&quot;:&quot;P00019452&quot;,</span><br><span class="line">            &quot;EmpName&quot;:&quot;虚拟主管&quot;,</span><br><span class="line">            &quot;EnglishName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;Gender&quot;:&quot;&quot;,</span><br><span class="line">            &quot;HeadImgUrl&quot;:&quot;&quot;,</span><br><span class="line">            &quot;LoginName&quot;:&quot;P00019452&quot;,</span><br><span class="line">            &quot;Position&quot;:&quot;测试总经理&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取用户信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.0.1:8080&#x2F;api&#x2F;History&#x2F;GetUserInfo?sessionId&#x3D;7f959f6d-4b63-4d2d-8f88-025dc80e40f9,a13b648f-6d81-4307-8ee1-b04c5b976246</span><br></pre></td></tr></table></figure><p>其中获取用户信息接口，需要传<code>sessionId</code>字段，该字段为登录接口的返回字段</p><p>所以需要先登录，再获取sessionid，再传给获取用户信息接口</p><h4 id="jmeter实现"><a href="#jmeter实现" class="headerlink" title="jmeter实现"></a>jmeter实现</h4><p>jmeter也是正常的创建线程组，添加http请求头，添加http请求，添加响应断言，添加查看结果树和聚合报告</p><p>不同的是，在一个线程组中会有两个接口，第一个是登录，第二个是获取用户信息，并且在登录接口后需要添加一个组件：<code>JSON Extractor</code>作用就是提取登录返回的sessionid</p><p>JSON Extractor内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Name of created variables:  变量名（后面参数化的变量名称，这边是sessionid）</span><br><span class="line"></span><br><span class="line">JSON Path expressions:  json提取表达式</span><br></pre></td></tr></table></figure><p>根据登录接口返回的层级结构，json表达式可以写成：<code>$.data.userInfo.SessionId</code><br>需要注意的是$后有一个.，表示当前路径</p><p>JSON表达式可以实现，只需要在登录接口后添加一个查看结果树，显示模式切换成<code>JSON Path Tester</code>，右下角就有<code>JSON Path Expression</code>测试</p><p>jmeter关联接口的层级结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- 线程组</span><br><span class="line">  - - CSV数据文件设置</span><br><span class="line">  - - HTTP信息头管理器</span><br><span class="line">  - - 登录接口（http请求）</span><br><span class="line">    - - 查看结果树</span><br><span class="line">    - - 响应断言</span><br><span class="line">    - - JSON Extractor</span><br><span class="line">  - - 获取用户信息接口</span><br><span class="line">  - - 响应断言</span><br><span class="line">  - - 查看结果树</span><br><span class="line">  - - 聚合报告</span><br></pre></td></tr></table></figure><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SqlServer清理事务日志</title>
      <link href="2019/01/13/SqlServer%E6%B8%85%E7%90%86%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97/"/>
      <url>2019/01/13/SqlServer%E6%B8%85%E7%90%86%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<p>SqlServer事务日志已满解决办法</p><a id="more"></a><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>压测时候，web对接了SqlServer，时间长，SqlServer报了错，事务日志已满，无法查询</p><h3 id="事务日志"><a href="#事务日志" class="headerlink" title="事务日志"></a>事务日志</h3><p>事务日志是一个与数据库文件分开的文件。它存储对数据库进行的所有更改，并全部记录插入、更新、删除、提交、回退和数据库模式变化。事务日志还称作前滚日志或重做日志。</p><p>事务日志是备份和恢复的重要组件，也是使用 SQL Remote 或 [复制代理] 复制数据所必需的。</p><p>在缺省情况下，所有数据库都使用事务日志。事务日志的使用是可选的，但是，除非您因特殊原因而不使用，否则您应始终使用它。运行带有事务日志的数据库可提供更强的故障保护功能、更好的性能以及数据复制功能。</p><h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1，数据库属性-选项-恢复模式-选择简单-点击确定</span><br><span class="line"></span><br><span class="line">2，右键数据库-任务-收缩-文件-文件类型-选择日志-收缩操作-选择在释放未使用的空间前重新组织页，选择1M-点击确定</span><br><span class="line"></span><br><span class="line">3，数据库属性-选项-恢复模式-选择完整-点击确定</span><br></pre></td></tr></table></figure><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SqlServer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix触发器函数介绍</title>
      <link href="2019/01/07/zabbix%E8%A7%A6%E5%8F%91%E5%99%A8%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/"/>
      <url>2019/01/07/zabbix%E8%A7%A6%E5%8F%91%E5%99%A8%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<p>zabbix触发器函数说明</p><a id="more"></a><blockquote><p><a href="https://www.zabbix.com/documentation/3.4/zh/manual/appendix/triggers/functions">触发器函数官方文档</a></p></blockquote><p><strong>函数</strong></p><h3 id="abschange"><a href="#abschange" class="headerlink" title="abschange"></a>abschange</h3><p>描述：最近获取值与之前获取值差的绝对值。</p><p>参数：</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">(最近获取值;之前获取值&#x3D;abschange)</span><br><span class="line">1;5&#x3D;4</span><br><span class="line">3;1&#x3D;2</span><br><span class="line">0;-2.5&#x3D;2.5</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 两值相等</span><br><span class="line">1 - 两值不等</span><br></pre></td></tr></table></figure><h3 id="avg-sec-num"><a href="#avg-sec-num" class="headerlink" title="avg (sec|#num,)"></a>avg (sec|#num,<time_shift>)</h3><p>描述：指定评估期内一个项目的平均值</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line"></span><br><span class="line">time_shift （可选） - 时间偏移</span><br></pre></td></tr></table></figure><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ avg(#5) → 五个最新值的平均值</span><br><span class="line">⇒ avg(1h) → 一个小时的平均值</span><br><span class="line">⇒ avg(1h,1d) → 一天前一个小时的平均值。</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持time_shift参数。当需要比较当前平均值和指定时间之前的平均值（由time_shift参数指定）时，它就很有用了。</span><br></pre></td></tr></table></figure><h3 id="band-sec-num-mask"><a href="#band-sec-num-mask" class="headerlink" title="band (sec|#num,mask,)"></a>band (sec|#num,mask,<time_shift>)</h3><p>描述：项目值和掩码的按位与值。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sec (可省略) or #num - 最新的第N个值</span><br><span class="line">mask (必须有) - 64位无符号整数 (0 - 18446744073709551615)</span><br><span class="line">time_shift (可选) - 参照 avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: int</span><br><span class="line"></span><br><span class="line">注意此处的 #num 参数和其它一些函数的作用不用 (参照 last()).</span><br><span class="line"></span><br><span class="line">尽管以二进制方式进行比较，但是所有的参数和返回值都是十进制数。 例如, 检查第三位是和4做比较而不是100。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ band(,12)&#x3D;8 or band(,12)&#x3D;4 → 第三位和第四位被设置，但不是同时</span><br><span class="line">⇒ band(,20)&#x3D;16 → 第三位没有被设置但是第五位被设置了。</span><br><span class="line"></span><br><span class="line">从Zabbix 2.2.0开始支持该函数。</span><br></pre></td></tr></table></figure><h3 id="change"><a href="#change" class="headerlink" title="change"></a>change</h3><p>描述：最近获取值与之前获取值的差。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持的值类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">(最近获取值;之前获取值&#x3D;change)</span><br><span class="line">1;5&#x3D;+4</span><br><span class="line">3;1&#x3D;-2</span><br><span class="line">0;-2.5&#x3D;-2.5</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 两值相等</span><br><span class="line">1 - 两值不等</span><br></pre></td></tr></table></figure><h3 id="count-sec-num"><a href="#count-sec-num" class="headerlink" title="count (sec|#num,,,)"></a>count (sec|#num,<pattern>,<operator>,<time_shift>)</h3><p>描述：指定评估期内值的个数。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">pattern (可选) - 所需模式 (整型项目 - 精确匹配; 浮点型项目 - 误差值0.000001内)</span><br><span class="line">operator (可选)</span><br><span class="line"></span><br><span class="line">支持的 operators:</span><br><span class="line">eq - 相等</span><br><span class="line">ne - 不相等</span><br><span class="line">gt - 大于</span><br><span class="line">ge - 大于等于</span><br><span class="line">lt - 小于</span><br><span class="line">le - 小于等于</span><br><span class="line">like - 只要包含pattern (区分大小写)就被匹配</span><br><span class="line">band - 按位与</span><br><span class="line">regexp - 给定 pattern 的正则表达式，区分大小写</span><br><span class="line">iregexp - 给定 pattern 的正则表达式，不区分大小写</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">eq (默认), ne, gt, ge, lt, le, band, regexp, iregexp 支持整数型项目</span><br><span class="line">eq (默认), ne, gt, ge, lt, le, regexp, iregexp 支持浮点型项目</span><br><span class="line">like (默认), eq, ne, regexp, iregexp支持string, text and log 型项目</span><br><span class="line"></span><br><span class="line">time_shift (可选) - 参照 avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">band 做第三个参数时，第二个 pattern 参数可以用两个数字表示， 以&#39;&#x2F;&#39;分隔: number_to_compare_with&#x2F;mask。 count() 计算项目值和掩码的按位与，再和 number_to_compare_with 比较的结果。如果按位与值等于 number_to_compare_with ，则计数。</span><br><span class="line">如果掩码值等于 number_to_compare_with, 只需要指定掩码值。</span><br><span class="line"></span><br><span class="line">regexp 或 iregexp 做为第三个参数时，第二个 pattern 参数可以是一个普通的或 global ( &#39;@&#39; 开头)的正则表达式。 避免全局表达式大小写敏感从全局表达式设置中继承。为了方便正则匹配，浮点型数值通常以四位小数方式表示。也应该注意大数值在以十进制（存储在数据库中）和二进制（zabbix server中使用）表示中的区别，可能会影响十进制的第四位小数。 </span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ count(10m) → 过去10分钟值的个数</span><br><span class="line">⇒ count(10m,12) → 过去10分钟值等于12的个数</span><br><span class="line">⇒ count(10m,12,&quot;gt&quot;) → 过去10分钟值大于12的个数</span><br><span class="line">⇒ count(#10,12,&quot;gt&quot;) → 最新10个值，它们的值大于12的个数</span><br><span class="line">⇒ count(10m,12,&quot;gt&quot;,1d) → 一天前的前十分钟值大于12的个数</span><br><span class="line">⇒ count(10m,6&#x2F;7,&quot;band&quot;) → 过去10分钟值最低三个有效位是 &#39;110&#39; (十进制)的个数。</span><br><span class="line">⇒ count(10m,,,1d) → 一天前的前十分钟值的个数</span><br><span class="line"></span><br><span class="line">从Zabbix 1.6.1开始支持#num参数。</span><br><span class="line">从Zabbix 1.8.2开始支持time_shift参数和字符串运算符。</span><br><span class="line">从Zabbix 2.2.0开始支持band运算符。</span><br><span class="line">从Zabbix 3.2.0开始支持regexp, iregexp运算符。</span><br></pre></td></tr></table></figure><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>描述：    当前日期，以YYYYMMDD格式表示。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">返回值如: 20150731</span><br></pre></td></tr></table></figure><h3 id="dayofmonth"><a href="#dayofmonth" class="headerlink" title="dayofmonth"></a>dayofmonth</h3><p>描述：当前是本月的第几天，取值范围从1到31。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.5开始支持该函数。</span><br></pre></td></tr></table></figure><h3 id="dayofweek"><a href="#dayofweek" class="headerlink" title="dayofweek"></a>dayofweek</h3><p>描述：当前是本周的第几天，取值范围从1到7 (周一 - 1, 周日 - 7)。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br></pre></td></tr></table></figure><h3 id="delta-sec-num"><a href="#delta-sec-num" class="headerlink" title="delta (sec|#num,)"></a>delta (sec|#num,<time_shift>)</h3><p>描述：指定评估期内最大值和最小值的差(‘max()’ 减去 ‘min()’)。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持time_shift参数。</span><br></pre></td></tr></table></figure><h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><p>描述：比较最近获取值与之前获取值是否相同。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 两值不等</span><br><span class="line">0 - 两值相等</span><br></pre></td></tr></table></figure><h3 id="forecast-sec-num-time"><a href="#forecast-sec-num-time" class="headerlink" title="forecast (sec|#num,,time,,)"></a>forecast (sec|#num,<time_shift>,time,<fit>,<mode>)</h3><p>描述：项目的未来值，最大值，最小值，差值或平均值。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br><span class="line">time - 需要进行估计的指定时间</span><br><span class="line">fit (可选) - 用于匹配历史数据的函数</span><br><span class="line"></span><br><span class="line">支持的fits:</span><br><span class="line">linear - 线性函数</span><br><span class="line">polynomialN - n次多项式 (1 &lt;&#x3D; N &lt;&#x3D; 6)</span><br><span class="line">exponential - 指数函数</span><br><span class="line">logarithmic - 对数函数</span><br><span class="line">power - 幂函数</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">默认是linear , polynomial1 等同于 linear</span><br><span class="line"></span><br><span class="line">mode (可选) - demanded output</span><br><span class="line"></span><br><span class="line">支持的 modes:</span><br><span class="line">value - 值 (默认)</span><br><span class="line">max - 最大值</span><br><span class="line">min - 最小值</span><br><span class="line">delta - 最大值-最小值</span><br><span class="line">avg - 平均值</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">value 估计项目值在此刻now + time</span><br><span class="line">max, min, delta and avg 根据now 和 now + time 时间段估计的项目值确定结果</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">如果返回值大于 999999999999.9999 或者小于 -999999999999.9999, 返回值相应被设置为999999999999.9999 或 -999999999999.9999 。</span><br><span class="line"></span><br><span class="line">只有在表达式被误用时才不被支持（错误的项目类型，无效的参数），出现错误时返回-1。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ forecast(#10,,1h) → 根据最新的十个值估计一小时后的项目值</span><br><span class="line">⇒ forecast(1h,,30m) → 根据过去一小时的值估计三十分钟后的项目值</span><br><span class="line">⇒ forecast(1h,1d,12h) → 根据一天前的一个小时值估计十二个小时后的项目值</span><br><span class="line">⇒ forecast(1h,,10m,exponential) → 根据过去一小时并按照指数函数方式估计十分钟后的项目值</span><br><span class="line">⇒ forecast(1h,,2h,polynomial3,max) → 根据过去一小时并按照三次多项式方式估计两小时的最大项目值</span><br><span class="line">⇒ forecast(#​2,,​-20m) → 根据最新的两个值估计二十分钟前的项目值 （比使用last()或prev()函数更加精确, 特别是项目很少更新的时候, 比如说, 一小时一次）</span><br><span class="line"></span><br><span class="line">从Zabbix 3.0.0开始支持该函数。</span><br><span class="line">​从Zabbix 3.0.6 和 3.2.2开始支持负的​time值。</span><br><span class="line">通过 predictive trigger functions查看扩展信息。</span><br></pre></td></tr></table></figure><h3 id="fuzzytime-sec"><a href="#fuzzytime-sec" class="headerlink" title="fuzzytime (sec)"></a>fuzzytime (sec)</h3><p>描述：检查项目时间戳和zabbix服务器时间相差多大。</p><p>说明：sec - 秒数</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 如果项目时间戳和zabbix服务器时间戳之间相差超过指定的时间</span><br><span class="line">1 - 其它。</span><br><span class="line"></span><br><span class="line">常使用system.localtime来检查本地时间是否与zabbix服务器的时间相同。</span><br><span class="line">也可以使用vfs.file.time[&#x2F;path&#x2F;file,modify]键值检测文件是否长时间未更新。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ fuzzytime(60)&#x3D;0 → 如果时间差超过60秒，就会检测到一个问题</span><br></pre></td></tr></table></figure><h3 id="iregexp-pattern-lt-sec-num-gt"><a href="#iregexp-pattern-lt-sec-num-gt" class="headerlink" title="iregexp (pattern,&lt;sec|#num&gt;)"></a>iregexp (pattern,&lt;sec|#num&gt;)</h3><p>描述：该函数和 regexp() 类似，只是不区分大小写。</p><p>说明：see regexp()</p><p>参数：支持值的类型: str, log, text</p><h3 id="last-sec-num"><a href="#last-sec-num" class="headerlink" title="last (sec|#num,)"></a>last (sec|#num,<time_shift>)</h3><p>描述：最近的值。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec (可省略) or #num - 最新的第N个值</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">注意此处的 #num 参数和其它一些函数的作用不用。</span><br><span class="line">例如:</span><br><span class="line">last() 通常等同于 last(#1)</span><br><span class="line">last(#3) - 第三个最新值 (不是三个最新值)</span><br><span class="line"></span><br><span class="line">如果在history中同一秒有多个值存在，Zabbix不能保证值的精确顺序。</span><br><span class="line"></span><br><span class="line">从Zabbix 1.6.2开始支持 #num 参数。</span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure><h3 id="logeventid-pattern"><a href="#logeventid-pattern" class="headerlink" title="logeventid (pattern)"></a>logeventid (pattern)</h3><p>描述：检查最近日志记录的EventID是否匹配正则表达式。</p><p>说明：pattern - 使用正则表达式表示需要匹配的模式， POSIX extended 类型。</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 不匹配</span><br><span class="line">1 - 匹配</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.5开始支持该函数</span><br></pre></td></tr></table></figure><h3 id="logseverity"><a href="#logseverity" class="headerlink" title="logseverity"></a>logseverity</h3><p>描述：最近日志记录的日志等级。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 默认等级</span><br><span class="line">N - 对应的等级 (整数，常用语Windows event logs: 1 - Information, 2 - Warning, 4 - Error, 7 - Failure Audit, 8 - Success Audit, 9 - Critical, 10 - Verbose).</span><br><span class="line">Zabbix从Windows event log Information域获取日志等级。</span><br></pre></td></tr></table></figure><h3 id="logsource-pattern"><a href="#logsource-pattern" class="headerlink" title="logsource (pattern)"></a>logsource (pattern)</h3><p>描述：检查最近的日志记录是否匹配参数的日志来源。</p><p>说明：pattern - string类型</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 不匹配</span><br><span class="line">1 - 匹配</span><br><span class="line">通常用于Windows event logs. 例如, logsource(&quot;VMware Server&quot;).</span><br></pre></td></tr></table></figure><h3 id="max-sec-num"><a href="#max-sec-num" class="headerlink" title="max (sec|#num,)"></a>max (sec|#num,<time_shift>)</h3><p>描述：    指定评估期内一个项目的最大值。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure><h3 id="min-sec-num"><a href="#min-sec-num" class="headerlink" title="min (sec|#num,)"></a>min (sec|#num,<time_shift>)</h3><p>描述：指定评估期内一个项目的最小值。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg(</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure><h3 id="nodata-sec"><a href="#nodata-sec" class="headerlink" title="nodata (sec)"></a>nodata (sec)</h3><p>描述：检查是否没有接收到数据。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sec - 评估期以秒值表示。</span><br><span class="line">时间不应该少于30秒，因为timer处理器每30秒计算一次该函数。</span><br><span class="line"></span><br><span class="line">nodata(0) 不被允许.</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 指定评估期没有接收到数据</span><br><span class="line">0 - 其它</span><br><span class="line"></span><br><span class="line">注意，如果在第一个参数指定的时间内出现以下问题，该函数会报错:</span><br><span class="line">- 没有数据以及Zabbix server被重启</span><br><span class="line">- 没有数据以及修复完成</span><br><span class="line">- 没有数据以及项目被添加或重新激活</span><br><span class="line">错误显示在触发器configuration的 Info 列 .</span><br></pre></td></tr></table></figure><h3 id="now"><a href="#now" class="headerlink" title="now"></a>now</h3><p>描述：距离Epoch (00:00:00 UTC, January 1, 1970)时间的秒数。</p><p>说明：</p><p>参数：支持值的类型: any</p><h3 id="percentile-sec-num-percentage"><a href="#percentile-sec-num-percentage" class="headerlink" title="percentile (sec|#num,,percentage)"></a>percentile (sec|#num,<time_shift>,percentage)</h3><p>描述：P-th 一段时间的百分值， P (percentage) 做为第三个参数。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br><span class="line">percentage - 0 and 100 (包括)之间的一个浮点数，小数点后最多四位</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 3.0.0开始支持该函数。</span><br></pre></td></tr></table></figure><h3 id="prev"><a href="#prev" class="headerlink" title="prev"></a>prev</h3><p>描述：前一个值。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">返回值和 last(#2)相同。</span><br></pre></td></tr></table></figure><h3 id="regexp-pattern-lt-sec-num-gt"><a href="#regexp-pattern-lt-sec-num-gt" class="headerlink" title="regexp (pattern,&lt;sec|#num&gt;)"></a>regexp (pattern,&lt;sec|#num&gt;)</h3><p>描述：检查最近的值是否匹配正则表达式。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern - 正则表达式, POSIX extended 样式。</span><br><span class="line">sec or #num (可选) - 评估期以秒值或最新值个数（跟在#号后）表示。 这种情况下，可处理一个值以上。</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: str, text, log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 找到</span><br><span class="line">0 - 其它</span><br><span class="line"></span><br><span class="line">该函数区分大小写。</span><br></pre></td></tr></table></figure><h3 id="str-pattern-lt-sec-num-gt"><a href="#str-pattern-lt-sec-num-gt" class="headerlink" title="str (pattern,&lt;sec|#num&gt;)"></a>str (pattern,&lt;sec|#num&gt;)</h3><p>描述：从最新值中查找一个字符串。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern - string型</span><br><span class="line">sec or #num (可选) - 评估期以秒值或最新值个数（跟在#号后）表示。 这种情况下，可处理一个值以上。</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: str, text, log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 找到</span><br><span class="line">0 - 其它</span><br><span class="line"></span><br><span class="line">该函数区分大小写。</span><br></pre></td></tr></table></figure><h3 id="strlen-sec-num"><a href="#strlen-sec-num" class="headerlink" title="strlen (sec|#num,)"></a>strlen (sec|#num,<time_shift>)</h3><p>描述：最新值的字符长度（而不是字节数）。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec (可省略) or #num - 最新的第N个值</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: str, text, log</span><br><span class="line"></span><br><span class="line">注意此处的 #num 参数和其它一些函数的作用不用。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ strlen()(等同于 strlen(#1)) → 最新值的长度</span><br><span class="line">⇒ strlen(#3) → 最新的第三个值的长度</span><br><span class="line">⇒ strlen(,1d) → 一天前最新值的长度。</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.4开始支持该函数。</span><br></pre></td></tr></table></figure><h3 id="sum-sec-num"><a href="#sum-sec-num" class="headerlink" title="sum (sec|#num,)"></a>sum (sec|#num,<time_shift>)</h3><p>描述：指定评估期内项目值的和。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示。</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure><h3 id="time"><a href="#time" class="headerlink" title="time"></a>time</h3><p>描述：当前时间，以HHMMSS格式表示。</p><p>说明：</p><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">返回值如: 123055</span><br></pre></td></tr></table></figure><h3 id="timeleft-sec-num-threshold"><a href="#timeleft-sec-num-threshold" class="headerlink" title="timeleft (sec|#num,,threshold,)"></a>timeleft (sec|#num,<time_shift>,threshold,<fit>)</h3><p>描述：达到阀值需要多久时间。</p><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示。</span><br><span class="line">time_shift (可选) - see avg()</span><br><span class="line">threshold - 阀值</span><br><span class="line">fit (可选) - see forecast()</span><br></pre></td></tr></table></figure><p>参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">如果返回值大于 999999999999.9999, 则被设置为999999999999.9999.</span><br><span class="line"></span><br><span class="line">如果达不到阀值则将返回值设置为999999999999.9999。</span><br><span class="line"></span><br><span class="line">只有在表达式被误用时才不被支持（错误的项目类型，无效的参数），出现错误时返回-1。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ timeleft(#10,,0) → 根据最新的十个值估计项目值达到0需要的时间</span><br><span class="line">⇒ timeleft(1h,,100) → 根据过去一小时的值估计项目值达到100需要的时间</span><br><span class="line">⇒ timeleft(1h,1d,0) → 根据一天前的一个小时值估计项目值达到0需要的时间</span><br><span class="line">⇒ timeleft(1h,,200,polynomial2) → 根据过去一小时并按照二次多项式方式估计项目值达到200需要的时间</span><br><span class="line"></span><br><span class="line">从Zabbix 3.0.0开始支持该函数。</span><br><span class="line">从Zabbix 3.0.6 和 3.2.2开始支持Unit symbols 的 ​threshold 参数。</span><br><span class="line">通过 predictive trigger functions查看扩展信息。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix3.4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix监控磁盘使用率</title>
      <link href="2018/12/29/zabbix%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E7%8E%87/"/>
      <url>2018/12/29/zabbix%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E7%8E%87/</url>
      
        <content type="html"><![CDATA[<p>zabbix各种键值</p><a id="more"></a><p>做grafana对接zabbix展示磁盘指定分区当前使用百分比时候，找到了一篇总结了zabbix各种键值的博客，搬运来做记录</p><h3 id="监控磁盘"><a href="#监控磁盘" class="headerlink" title="监控磁盘"></a>监控磁盘</h3><p>zabbix监控linux不用分区磁盘使用量百分比方式：<br>配置-模板-Template OS Linux-自动发现规则-Mounted filesystem discovery-监控项原型，添加两个监控项，used以及pused（百分比）</p><p>used</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">名称：Used disk space on $1</span><br><span class="line"></span><br><span class="line">类型：zabbix客户端</span><br><span class="line"></span><br><span class="line">键值：“vfs.fs.size[&#x2F;elasticsearch,used]”</span><br><span class="line"></span><br><span class="line">信息类型：数字（无正负）</span><br><span class="line"></span><br><span class="line">单位：B</span><br></pre></td></tr></table></figure><p>pused</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">名称：Used disk space on $1 (percentage)</span><br><span class="line"></span><br><span class="line">类型：zabbix客户端</span><br><span class="line"></span><br><span class="line">键值：“vfs.fs.size[&#x2F;elasticsearch,pused]”</span><br><span class="line"></span><br><span class="line">信息类型：浮点型</span><br><span class="line"></span><br><span class="line">单位：%</span><br></pre></td></tr></table></figure><p>然后将图加进去：<code>图形原型</code>,”Disk space usage /elasticsearch”，选择<code>添加原型</code>，选择”Template OS Linux: Used disk space on /elasticsearch”保存，完成。</p><h3 id="各键值"><a href="#各键值" class="headerlink" title="各键值"></a>各键值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br></pre></td><td class="code"><pre><span class="line">以下表格是zabbix agent所支持的所有key列表，添加一项监控的时候，首先想到的应该是zabbix agent是否已经有相关的key存在，而不是自己去写脚本来获取key。</span><br><span class="line"></span><br><span class="line">agent.hostname</span><br><span class="line">返回被监控端名称(字符串)</span><br><span class="line"></span><br><span class="line">agent.ping</span><br><span class="line">检测被监控端是否存活(1:运行中 其他:未运行)-使用函数 nodata()检测客户端是否正在运行</span><br><span class="line"></span><br><span class="line">agent.version</span><br><span class="line">zabbix agent版本字符串</span><br><span class="line"></span><br><span class="line">kernel.maxfiles</span><br><span class="line">系统支持最大的open files整数</span><br><span class="line"></span><br><span class="line">kernel.maxproc</span><br><span class="line">系统支持最大的进程数量整数</span><br><span class="line"></span><br><span class="line">log[file,&lt;regexp&gt;,&lt;encoding&gt;,&lt;maxlines&gt;,&lt;mode&gt;,&lt;output&gt;]</span><br><span class="line">监控日志文件</span><br><span class="line">file - 文件详细路径</span><br><span class="line">regexp - 正则</span><br><span class="line">encoding - 编码</span><br><span class="line">maxlines - zabbix agent向server或者proxy发送最大的行数。</span><br><span class="line">  这个参数覆盖配置文件zabbxi_agentd.conf中的’MaxLinesPerSecond’</span><br><span class="line">mode - 可选值:all (默认), skip (跳过处理老数据).mode参数从2.0版本开始支持</span><br><span class="line">output - 可选项，输出格式模板.</span><br><span class="line">示例: log[&#x2F;var&#x2F;log&#x2F;syslog] log[&#x2F;var&#x2F;log&#x2F;syslog,error] log[&#x2F;home&#x2F;zabbix&#x2F;logs&#x2F;logfile,,,100]</span><br><span class="line"></span><br><span class="line">logrt[file_pattern,&lt;regexp&gt;,&lt;encoding&gt;,&lt;maxlines&gt;,&lt;mode&gt;,&lt;output&gt;]</span><br><span class="line">Monitoring of log file with log rotation support.</span><br><span class="line">file_pattern - 文件绝对路径</span><br><span class="line"></span><br><span class="line">net.dns[&lt;ip&gt;,zone,&lt;type&gt;,&lt;timeout&gt;,&lt;count&gt;]</span><br><span class="line">检测DNS服务是否开启0 – DNS挂了  1 - DNS运行中</span><br><span class="line">ip - DNS服务器的ip地址(留空表示使用本地DNS, ignored onWindows)</span><br><span class="line">zone - 需要测试的域名</span><br><span class="line">type - 记录类型 (默认为 SOA),type可选值:  ANY, A, NS, CNAME, MB, MG, MR, PTR, MD, MF, MX, SOA, NULL, WKS (除了windows), HINFO, MINFO, TXT, SRV SRV</span><br><span class="line">timeout (ignored on Windows) – 超时时间(默认1秒)</span><br><span class="line">count (ignored on Windows) – 重试次数 (默认值2)</span><br><span class="line">示例key: net.dns[8.8.8.8,zabbix.com,MX,2,1]</span><br><span class="line"></span><br><span class="line">net.dns.record[&lt;ip&gt;,zone,&lt;type&gt;,&lt;timeout&gt;,&lt;count&gt;]</span><br><span class="line">执行一个DNS查询获取DNS查询数据.</span><br><span class="line">ip - DNS服务器的ip地址(留空表示使用本地DNS, ignored on Windows)</span><br><span class="line">zone - 需要测试的域名</span><br><span class="line">type - 记录类型 (默认SOA,可选值同net.dns)</span><br><span class="line">timeout (ignored on Windows) – 超时时间(默认1秒)</span><br><span class="line">count (ignored on Windows) – 重试次数 (默认值2)</span><br><span class="line">示例key: net.dns.record[8.8.8.8,ttlsa.com,MX,2,1]</span><br><span class="line"></span><br><span class="line">net.if.collisions[if]</span><br><span class="line">Out-of-window collision.Number of collisions. Integer.if - 网卡</span><br><span class="line"></span><br><span class="line">net.if.discovery</span><br><span class="line">列出网卡.通常用于低级别的discovery.JSON对象</span><br><span class="line"></span><br><span class="line">net.if.in[if,&lt;mode&gt;]</span><br><span class="line">网卡入口流量整数.</span><br><span class="line">if - 网卡名称</span><br><span class="line">mode - 可用值: bytes - 字节数 (默认)</span><br><span class="line">packets - 包数量</span><br><span class="line">errors - 错误数量</span><br><span class="line">dropped - 丢包数量</span><br><span class="line">示例keys: net.if.in[eth0,errors] net.if.in[eth0]</span><br><span class="line"></span><br><span class="line">net.if.out[if,&lt;mode&gt;]</span><br><span class="line">网卡出口流量（参数参见net.if.in）</span><br><span class="line"></span><br><span class="line">net.if.total[if,&lt;mode&gt;]</span><br><span class="line">网卡进&#x2F;出流量的总和（参数参见net.if.in）</span><br><span class="line"></span><br><span class="line">net.tcp.listen[port]</span><br><span class="line">检测端口是否开启0 – （not listen） 1 –  in LISTEN stateport</span><br><span class="line">示例: net.tcp.listen[80]</span><br><span class="line"></span><br><span class="line">net.tcp.port[&lt;ip&gt;,port]</span><br><span class="line">是否可以连接到指定的TCP端口0 – cannot connect 1 – can connect</span><br><span class="line">   ip - IP地址(默认是 127.0.0.1)</span><br><span class="line">   port - 端口</span><br><span class="line">范例: net.tcp.port[,80] 检测web服务器端口是否运行中</span><br><span class="line"></span><br><span class="line">net.tcp.service[service,&lt;ip&gt;,&lt;port&gt;]</span><br><span class="line">检测服务是否开启，并且端口可用0 – 服务挂了 1 – 服务运行中</span><br><span class="line">    service - 如下:ssh, ntp, ldap, smtp, ftp, http, pop, nntp,imap, tcp, https, telnet</span><br><span class="line">    ip - IP地址 (默认127.0.0.1)</span><br><span class="line">    port - 端口 (默认情况为标准端口号)</span><br><span class="line">示例key: net.tcp.service[ftp,,45]</span><br><span class="line"></span><br><span class="line">net.tcp.service.perf[service,&lt;ip&gt;,&lt;port&gt;]</span><br><span class="line">检测服务器性能0 – 服务挂了; seconds – 链接到服务器端口消耗的时间</span><br><span class="line">service - 如下:ssh, ntp, ldap, smtp, ftp, http, pop, nntp,imap, tcp, https, telnet</span><br><span class="line">ip - IP地址 (默认127.0.0.1)</span><br><span class="line">port - 端口 (默认情况为标准端口号)</span><br><span class="line">示例key: net.tcp.service.perf[ssh]</span><br><span class="line"></span><br><span class="line">         net.udp.listen[port]</span><br><span class="line"></span><br><span class="line">proc.mem[&lt;name&gt;,&lt;user&gt;,&lt;mode&gt;,&lt;cmdline&gt;]</span><br><span class="line">用户进程消耗的内存内存使用量 (字节单位).</span><br><span class="line">name - 进程名 (默认值 “all processes”)</span><br><span class="line">user - 用户名 (默认值“all users”)</span><br><span class="line">mode - 可选值: avg, max, min, sum (默认)</span><br><span class="line">cmdline - 命令行过滤(正则表达时)</span><br><span class="line">示例keys: proc.mem[,root] – root的进程消耗了多少内存</span><br><span class="line">    proc.mem[zabbix_server,zabbix] – zabbix用户运行的zabbix_server使用了多少内存</span><br><span class="line">    proc.mem[,oracle,max,oracleZABBIX]</span><br><span class="line"></span><br><span class="line">proc.num[&lt;name&gt;,&lt;user&gt;,&lt;state&gt;,&lt;cmdline&gt;]</span><br><span class="line">某用户某些状态的进程的数量进程数量</span><br><span class="line">name - 进程名称 (默认“all processes”)</span><br><span class="line">user - 用户名 (默认 “all users”)</span><br><span class="line">state - 可用值: all (默认), run,sleep, zomb</span><br><span class="line">cmdline - 命令行过滤(正则表达时)</span><br><span class="line">示例keys: proc.num[,mysql] – MySQL用户运行的进程数量</span><br><span class="line">proc.num[apache2,www-data] – www-data运行了多少个apache2进程</span><br><span class="line">proc.num[,oracle,sleep,oracleZABBIX]</span><br><span class="line">备注：Windows系统只支持name和user两个参数</span><br><span class="line"></span><br><span class="line">sensor[device,sensor,&lt;mode&gt;]</span><br><span class="line">读取硬件传感器</span><br><span class="line">device - 设备名称</span><br><span class="line">sensor - 传感器名称</span><br><span class="line">mode - 可选值:avg, max, min</span><br><span class="line">示例key: sensor[w83781d-i2c-0-2d,temp1] Prior to Zabbix 1.8.4, the sensor[temp1] format was used. On Linux 2.6+, 读取&#x2F;sys&#x2F;class&#x2F;hwmon. On OpenBSD, 读取hw.sensors MIB.示例keys: sensor[cpu0,temp0] – CPU0的温度 sensor[cpu[0-2]$,temp,avg] – cpu平均温度Zabbix 1.8.4开始支持OpenBSD</span><br><span class="line"></span><br><span class="line">system.boottime</span><br><span class="line">系统启动的时间戳整数.unix时间戳</span><br><span class="line"></span><br><span class="line">system.cpu.intr</span><br><span class="line">设备中断整数</span><br><span class="line"></span><br><span class="line">system.cpu.load[&lt;cpu&gt;,&lt;mode&gt;]</span><br><span class="line">CPU负载浮点数</span><br><span class="line">cpu - 可用值: all (默认), percpu (所有在线cpu的负载)</span><br><span class="line">mode - 可用值:avg1 (1分钟 默认值), avg5(5分钟平均), avg15 (15分钟平均值)</span><br><span class="line">范例key: system.cpu.load[,avg5]</span><br><span class="line"></span><br><span class="line">system.cpu.num[&lt;type&gt;]</span><br><span class="line">CPU数量处理器个数type - 可用值: online (默认值), max范例: system.cpu.num</span><br><span class="line"></span><br><span class="line">system.cpu.switches</span><br><span class="line">上下文交换交换次数老命名方式: system[switches]</span><br><span class="line"></span><br><span class="line">system.cpu.util[&lt;cpu&gt;,&lt;type&gt;,&lt;mode&gt;]</span><br><span class="line">CPU利用率百分比</span><br><span class="line">cpu - cpu数量 (默认是所有cpu)</span><br><span class="line">type - 可用值: idle, nice, user (默认), system (windows系统默认值）, iowait, interrupt, softirq,steal</span><br><span class="line">mode - 可用值: avg1 (一分钟平均，默认值), avg5(5分钟平均, avg15 (15分钟平均值)</span><br><span class="line">范例key: system.cpu.util[0,user,avg5]</span><br><span class="line"></span><br><span class="line">system.hostname[&lt;type&gt;]</span><br><span class="line">返回主机名字符串</span><br><span class="line">type (仅用于windows系统) – 可用值: netbios(默认) or host</span><br><span class="line"></span><br><span class="line">system.hw.chassis[&lt;info&gt;]</span><br><span class="line">返回机架信息字符串</span><br><span class="line">info - full (默认), model, serial, type 或vendor</span><br><span class="line">例如: system.hw.chassis</span><br><span class="line">Hewlett-Packard HP Pro 3010 Small Form Factor PC CZXXXXXXXX Desktop]</span><br><span class="line">备注：要root权限，因为这些信息是从内存中读取的。</span><br><span class="line"></span><br><span class="line">system.hw.cpu[&lt;cpu&gt;,&lt;info&gt;]</span><br><span class="line">返回CPU信息字符&#x2F;数字</span><br><span class="line">cpu - cpu数量或者all (默认)</span><br><span class="line">info - full (默认), curfreq, maxfreq, model 或者vendor</span><br><span class="line">例如: system.hw.cpu[0,vendor] AuthenticAMD 从&#x2F;proc&#x2F;cpuinfo、&#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu&#x2F;[cpunum]&#x2F;cpufreq&#x2F;cpuinfo_max_freq获取信息. 如果指定了CPU数量和 curfreq或者maxfreq, 将会返回数值(Hz).</span><br><span class="line"></span><br><span class="line">system.hw.devices[&lt;type&gt;]</span><br><span class="line">列出PCI或者USB文本值</span><br><span class="line">type - pci (默认) or usb</span><br><span class="line">范例: system.hw.devices[pci] 00:00.0 Host bridge: Advanced Micro Devices [AMD] RS780 Host Bridge [..] 返回lspci或者lsusb (不带参数)</span><br><span class="line"></span><br><span class="line">system.hw.macaddr[&lt;interface&gt;,&lt;format&gt;]</span><br><span class="line">列出MAC地址字符串</span><br><span class="line">interface - all (默认) 或者正则表达式</span><br><span class="line">format - full (默认) 、short</span><br><span class="line">范例: system.hw.macaddr[&quot;eth0$&quot;,full] [eth0] 00:11:22:33:44:55 列出指定接口mac地址 如果format指定为short，MAC地址相同的将会被忽略掉</span><br><span class="line"></span><br><span class="line">system.localtime[&lt;type&gt;]</span><br><span class="line">系统时间.数字或者字符串</span><br><span class="line"></span><br><span class="line">system.run[command,&lt;mode&gt;]</span><br><span class="line">在制定的主机上运行命令文本</span><br><span class="line">command - 命令</span><br><span class="line">mode - wait (默认值, 执行超时时间), nowait (不等待)最大可用返回512KB数据，包含空白数据。 命令输出数据必须是文本</span><br><span class="line">例如: system.run[ls -l &#x2F;] – 列出&#x2F;的文件和目录.</span><br><span class="line">Note: 启用这个方法, agent配置文件必须配置 EnableRemoteCommands&#x3D;1选项</span><br><span class="line"></span><br><span class="line">system.stat[resource,&lt;type&gt;]</span><br><span class="line">虚拟内存状态数字ent</span><br><span class="line"></span><br><span class="line">system.sw.arch</span><br><span class="line">返回软件信息字符串</span><br><span class="line">范例: system.sw.arch i686</span><br><span class="line"></span><br><span class="line">system.sw.os[&lt;info&gt;]</span><br><span class="line">返回系统信息字符串</span><br><span class="line">info - full (default), short ,name</span><br><span class="line">范例: system.sw.os[short] Ubuntu 2.6.35-28.50-generic 2.6.35.11</span><br><span class="line">信息来自如下文件：</span><br><span class="line">&#x2F;proc&#x2F;version [short]</span><br><span class="line">&#x2F;proc&#x2F;version_signature [name]</span><br><span class="line">&#x2F;etc&#x2F;issue.net</span><br><span class="line"></span><br><span class="line">system.sw.packages[&lt;package&gt;,&lt;manager&gt;,&lt;format&gt;]</span><br><span class="line">已安装软件列表文本值</span><br><span class="line">package - all (默认)或者正则表达式</span><br><span class="line">manager - all (默认) or a package manager</span><br><span class="line">format - full (默认) ，short</span><br><span class="line">范例: system.sw.packages[mini,dpkg,short]</span><br><span class="line"></span><br><span class="line">system.swap.in[&lt;device&gt;,&lt;type&gt;]</span><br><span class="line">交换分区IN（磁盘交换到内存）数字</span><br><span class="line">device - 交换分区设备 (默认all)</span><br><span class="line">type - 可选值: count (swapins数量), sectors(sectors swapped in), pages (pages swapped in).</span><br><span class="line">示例key: system.swap.in[,pages]</span><br><span class="line">数据采集自: Linux 2.4: &#x2F;proc&#x2F;swaps, &#x2F;proc&#x2F;partitions, &#x2F;proc&#x2F;stat</span><br><span class="line">            Linux 2.6: &#x2F;proc&#x2F;swaps, &#x2F;proc&#x2F;diskstats, &#x2F;proc&#x2F;vmstat</span><br><span class="line"></span><br><span class="line">system.swap.out[&lt;device&gt;,&lt;type&gt;]</span><br><span class="line">Swap out (f内存到磁盘) .数字</span><br><span class="line">device - swap设备 (默认all)</span><br><span class="line">type - count (number of swapouts), sectors(sectors swapped out), pages (pages swapped out). 示</span><br><span class="line">例key: system.swap.out[,pages]</span><br><span class="line">数据采集自: Linux 2.4: &#x2F;proc&#x2F;swaps, &#x2F;proc&#x2F;partitions, &#x2F;proc&#x2F;stat</span><br><span class="line">            Linux 2.6: &#x2F;proc&#x2F;swaps, &#x2F;proc&#x2F;diskstats, &#x2F;proc&#x2F;vmstat</span><br><span class="line"></span><br><span class="line">system.swap.size[&lt;device&gt;,&lt;type&gt;]</span><br><span class="line">交换分区大小字节或者百分比</span><br><span class="line">device - 交换分区 (默认值 all)</span><br><span class="line">type - free (free swap space, default), pfree (free swap space, in percent), pused (used swap space, in percent), total (total swap space), used (used swap space)</span><br><span class="line">示例 system.swap.size[,pfree] – 空闲swap百分比</span><br><span class="line"></span><br><span class="line">system.uname</span><br><span class="line">返回主机相信信息.字符串</span><br><span class="line"></span><br><span class="line">system.uptime</span><br><span class="line">系统运行时长(秒)多少秒使用s&#x2F;uptime来获取</span><br><span class="line"></span><br><span class="line">system.users.num</span><br><span class="line">登陆用户数量多少用户agent使用who命令获取</span><br><span class="line"></span><br><span class="line">vfs.dev.read[&lt;device&gt;,&lt;type&gt;,&lt;mode&gt;]</span><br><span class="line">磁盘读取状态整数，浮点数（如果type为如下）</span><br><span class="line">device - 磁盘设备 (默认值 “all”)  </span><br><span class="line">type - 可选值:sectors, operations, bytes, sps, ops, bps(必须指定, 不同操作系统下不同).  sps, ops, bps stand for: sectors, operations, bytes per second, respectively</span><br><span class="line">mode - 可选值: avg1, avg5, avg15.  </span><br><span class="line">备注: 只有type为sps, ops, bps的时候，第三个参数才被支持。</span><br><span class="line">不同操作系统的TYPE参数： FreeBSD – bps Linux – sps OpenBSD – operations Solaris – bytes</span><br><span class="line">示例key: vfs.dev.read[,operations]</span><br><span class="line"></span><br><span class="line">vfs.dev.write[&lt;device&gt;,&lt;type&gt;,&lt;mode&gt;]</span><br><span class="line">磁盘写入状态整数，</span><br><span class="line">device - 磁盘设备 (默认 all)  </span><br><span class="line">type - sectors, operations, bytes, sps, ops, bps</span><br><span class="line">mode - one of avg1 (default),avg5 , avg15.</span><br><span class="line">example: vfs.dev.write[,operations] Old naming: io</span><br><span class="line"></span><br><span class="line">vfs.file.cksum[file]</span><br><span class="line">计算文件校验 UNIX cksum.</span><br><span class="line">file - 文件完整路径</span><br><span class="line"></span><br><span class="line">vfs.file.contents[file,&lt;encoding&gt;]</span><br><span class="line">获取文本内容若为空，只返回 LF&#x2F;CR characters.</span><br><span class="line">file - 文件完整路径</span><br><span class="line">例如: vfs.file.contents[&#x2F;etc&#x2F;passwd] 文件不可以超过64KB.  </span><br><span class="line"></span><br><span class="line">vfs.file.exists[file]</span><br><span class="line">检测文件是否存在1 – 存在 0 – 不存在</span><br><span class="line">    file - 文件完整路径</span><br><span class="line"></span><br><span class="line">vfs.file.md5sum[file]</span><br><span class="line">文件MD5校验码文件MD5哈希值</span><br><span class="line">file - 完整路径</span><br><span class="line"></span><br><span class="line">vfs.file.regexp[file,regexp,&lt;encoding&gt;,&lt;start line&gt;,&lt;end line&gt;,&lt;output&gt;]</span><br><span class="line">文件中搜索字符串包含字符串的行，或者为空</span><br><span class="line">file - 文件完整路径</span><br><span class="line">regexp - GNU正则表达式</span><br><span class="line">encoding - 编码</span><br><span class="line">start line - 从哪一行开始，默认第一行</span><br><span class="line">end line - 从哪一行结束，默认最后一行</span><br><span class="line">如: vfs.file.regexp[&#x2F;etc&#x2F;passwd,zabbix]</span><br><span class="line">    vfs.file.regexp[&#x2F;path&#x2F;to&#x2F;some&#x2F;file,”([0-9]+)$”,,3,5,\1]</span><br><span class="line">    vfs.file.regexp[&#x2F;etc&#x2F;passwd,^zabbix:.:([0-9]+),,,,\1]</span><br><span class="line"></span><br><span class="line">vfs.file.regmatch[file,regexp,&lt;encoding&gt;,&lt;start line&gt;,&lt;end line&gt;]</span><br><span class="line">文件中搜索字符串0 – 未找到 1 – 找到</span><br><span class="line">file - 文件完整路径</span><br><span class="line">regexp - GNU 正则表达式</span><br><span class="line">encoding - 编码</span><br><span class="line">start line - 哪行开始，默认第一行</span><br><span class="line">end line - 哪行结束，默认最后一行</span><br><span class="line">例如: vfs.file.regmatch[&#x2F;var&#x2F;log&#x2F;app.log,error]</span><br><span class="line"></span><br><span class="line">vfs.file.size[file]</span><br><span class="line">文件大小字节fzabbix必须有可读此文件的权限</span><br><span class="line"></span><br><span class="line">vfs.file.time[file,&lt;mode&gt;]</span><br><span class="line">文件时间信息Unix 时间戳.</span><br><span class="line">mode -  modify (默认, 修改时间), access – 最后访问时间, change – 最后改变时间</span><br><span class="line">例如: vfs.file.time[&#x2F;etc&#x2F;passwd,modify] 备注：文件大小有限制</span><br><span class="line"></span><br><span class="line">vfs.fs.discovery</span><br><span class="line">列出挂载的文件系统 用于lld.JSON对象</span><br><span class="line"></span><br><span class="line">vfs.fs.inode[fs,&lt;mode&gt;]</span><br><span class="line">inodes数量数字</span><br><span class="line">fs - 文件系统</span><br><span class="line">mode - total (默认), free, used, pfree (空闲百分比), pused (使用百分比)</span><br><span class="line">例如: vfs.fs.inode[&#x2F;,pfree]</span><br><span class="line"></span><br><span class="line">vfs.fs.size[fs,&lt;mode&gt;]</span><br><span class="line">磁盘空间，返回本地文件系统的使用量字节</span><br><span class="line">fs - 文件系统</span><br><span class="line">mode -  total (默认), free, used, pfree (空闲百分比), pused (使用百分比).</span><br><span class="line">例如: vfs.fs.size[&#x2F;tmp,free]</span><br><span class="line"></span><br><span class="line">vm.memory.size[&lt;mode&gt;]</span><br><span class="line">内存大小字节或百分比</span><br><span class="line">mode - total (默认), active, anon, buffers, cached, exec, file, free, inactive, pinned, shared, wired, used, pused, available</span><br><span class="line">监控项vm.memory.size[] 允许三种类型的参数：</span><br><span class="line">第一类：包含total - 总内存</span><br><span class="line">第二类： 系统指定内存类型:active, anon, buffers, cached, exec, file, free, inactive,pinned, shared, wired. 第三类：用户级别，一共使用了多少内存，还有多少内存可用: used, pused, available,pavailable.</span><br><span class="line"></span><br><span class="line">web.page.get[host,&lt;path&gt;,&lt;port&gt;]</span><br><span class="line">获取网页内容网页源代码</span><br><span class="line">host - 主机名&#x2F;域名</span><br><span class="line">path - 文件地址，默认&#x2F;</span><br><span class="line">port - 端口，默认80返回空字符串表示失败. 例如: web.page.get[</span><br><span class="line"></span><br><span class="line">web.page.perf[host,&lt;path&gt;,&lt;port&gt;]</span><br><span class="line">获取完全加载网页消耗的时长秒，返回0表示失败</span><br><span class="line">host - 主机名&#x2F;域名</span><br><span class="line">path - html地址，默认是&#x2F;</span><br><span class="line">port - 端口,默认80</span><br><span class="line"></span><br><span class="line">web.page.regexp[host,&lt;path&gt;,&lt;port&gt;,&lt;regexp&gt;,&lt;length&gt;,&lt;output&gt;]</span><br><span class="line">在网页中搜索字符串  失败则返回空字符 (不匹配).</span><br><span class="line">host - 主机名</span><br><span class="line">path - html文件路径 (默认值 &#x2F;)</span><br><span class="line">port - 端口 (默认80)</span><br><span class="line">regexp - GNU正则表达式</span><br><span class="line">length - 返回的最大的字符串数量</span><br><span class="line">output - 输出格式模板可选项. </span><br></pre></td></tr></table></figure><h3 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h3><blockquote><p><a href="https://blog.csdn.net/chuang3344/article/details/74081682">参考博客</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix3.4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL启用弱口令</title>
      <link href="2018/12/25/MySQL%E5%90%AF%E7%94%A8%E5%BC%B1%E5%8F%A3%E4%BB%A4/"/>
      <url>2018/12/25/MySQL%E5%90%AF%E7%94%A8%E5%BC%B1%E5%8F%A3%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>MySQL启动弱口令</p><p>有的时候，有点懒，测试环境就想数据库密码简单点，不用什么大小写，特殊字符各种组合</p><a id="more"></a><p>root用户登录<br><code>mysql -uroot -p</code></p><p>查看密码策略：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#39;validate_password%&#39;;</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;validate_password%&quot;;</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">| Variable_name                        | Value  |</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">| validate_password_check_user_name    | OFF    |</span><br><span class="line">| validate_password_dictionary_file    |        |</span><br><span class="line">| validate_password_length             | 8      |</span><br><span class="line">| validate_password_mixed_case_count   | 1      |</span><br><span class="line">| validate_password_number_count       | 1      |</span><br><span class="line">| validate_password_policy             | MEDIUM |</span><br><span class="line">| validate_password_special_char_count | 1      |</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>主要修改两个即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_policy&#x3D;0;</span><br></pre></td></tr></table></figure><p>值含义：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 or LOW Length</span><br><span class="line">1 or MEDIUMLength; numeric, lowercase&#x2F;uppercase, and special characters</span><br><span class="line">2 or STRONGLength; numeric, lowercase&#x2F;uppercase, and special characters; dictionary file</span><br></pre></td></tr></table></figure><p>另一个：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_length&#x3D;6;</span><br></pre></td></tr></table></figure><p>这个值有最小值限制：<code>validate_password_number_count + validate_password_special_char_count + (2 * validate_password_mixed_case_count)</code><br>所以默认的validate_password_length最小值是4</p>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux几个变量</title>
      <link href="2018/12/24/Linux%E5%87%A0%E4%B8%AA%E5%8F%98%E9%87%8F/"/>
      <url>2018/12/24/Linux%E5%87%A0%E4%B8%AA%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<p>linux shell中部分变量的含义</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$0：脚本名</span><br><span class="line"></span><br><span class="line">$1：传给脚本的第一个参数</span><br><span class="line"></span><br><span class="line">$2：传给脚本的第二个参数</span><br><span class="line"></span><br><span class="line">$$：脚本运行的PID</span><br><span class="line"></span><br><span class="line">$@：传给脚本的所有参数列表（list形式）</span><br><span class="line"></span><br><span class="line">$*：传给脚本的所有参数列表（字符串形式）</span><br><span class="line"></span><br><span class="line">$#：传给脚本的参数个数</span><br><span class="line"></span><br><span class="line">$?：上个已执行命令的退出状态码，成功为0</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"># test linux variables</span><br><span class="line"># 20181224 by kyle</span><br><span class="line"></span><br><span class="line"># 使用basename获取脚本名，避免输出脚本名时候带上命令:.&#x2F;test1.sh</span><br><span class="line">name&#x3D;$(basename $0)</span><br><span class="line"></span><br><span class="line">echo </span><br><span class="line">echo &quot;number of variables is：$#&quot;</span><br><span class="line">echo &quot;the first variable is: $1&quot;</span><br><span class="line">echo &quot;the second is: $2&quot;</span><br><span class="line">echo &quot;the scrip&#39;s name is: $name&quot;</span><br><span class="line">echo &quot;the script&#39;s PID is: $$&quot;</span><br><span class="line">echo &quot;the parameters are: $@&quot;</span><br><span class="line">echo &quot;the parameter list is: $*&quot;</span><br><span class="line">echo &quot;show script stat: $?&quot;</span><br><span class="line">echo</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mountTest]# .&#x2F;VariablesTest.sh </span><br><span class="line"></span><br><span class="line">number of variables is：0</span><br><span class="line">the first variable is: </span><br><span class="line">the second is: </span><br><span class="line">the scrip&#39;s name is: VariablesTest.sh</span><br><span class="line">the script&#39;s PID is: 4829</span><br><span class="line">the parameters are: </span><br><span class="line">the parameter list is: </span><br><span class="line">show script stat: 0</span><br></pre></td></tr></table></figure><p>*<em>比较“$@”和“$<em>”</em></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"># compare $@ with $*</span><br><span class="line"># 20181224 by kyle</span><br><span class="line"></span><br><span class="line">echo </span><br><span class="line">echo &quot;followed by \$*&quot;</span><br><span class="line">count&#x3D;1</span><br><span class="line">#</span><br><span class="line">for param in &quot;$*&quot;</span><br><span class="line">do</span><br><span class="line">  echo &quot;\$* Parameter #$count &#x3D; $param&quot;</span><br><span class="line">  count&#x3D;$[ $count + 1 ]</span><br><span class="line">done</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">echo </span><br><span class="line">echo &quot;Here is \$@&quot;</span><br><span class="line">count&#x3D;1</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">for param in &quot;$@&quot;</span><br><span class="line">do</span><br><span class="line">  echo &quot;\$@ Parameter #$count &#x3D; $param&quot;</span><br><span class="line">  count&#x3D;$[ $count + 1 ]</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mountTest]# .&#x2F;ShellTest.sh 1 2 3 4 5 </span><br><span class="line"></span><br><span class="line">followed by $*</span><br><span class="line">$* Parameter #1 &#x3D; 1 2 3 4 5</span><br><span class="line"></span><br><span class="line">Here is $@</span><br><span class="line">$@ Parameter #1 &#x3D; 1</span><br><span class="line">$@ Parameter #2 &#x3D; 2</span><br><span class="line">$@ Parameter #3 &#x3D; 3</span><br><span class="line">$@ Parameter #4 &#x3D; 4</span><br><span class="line">$@ Parameter #5 &#x3D; 5</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix监控磁盘IO</title>
      <link href="2018/12/21/zabbix%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98IO/"/>
      <url>2018/12/21/zabbix%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98IO/</url>
      
        <content type="html"><![CDATA[<p>zabbix监控Linux磁盘IO</p><a id="more"></a><h3 id="前置准备"><a href="#前置准备" class="headerlink" title="前置准备"></a>前置准备</h3><p>首先是查询磁盘类型</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost script]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk &#x2F;dev&#x2F;vda: 214.7 GB, 214748364800 bytes, 419430400 sectors</span><br></pre></td></tr></table></figure><p>服务器上，基本是在vda盘上进行的IO，所以本次就监控vda就可以了<br>或者直接<code>iostat -dxk 2</code>看一下效果，哪个设备是需要进行监控的，直接grep即可</p><p>附linux硬件设备概览(/dev目录下)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ide硬盘：&#x2F;dev&#x2F;hd[a-d]</span><br><span class="line"></span><br><span class="line">SCSI&#x2F;SATA&#x2F;USB硬盘：&#x2F;dev&#x2F;sd[a-p]</span><br><span class="line"></span><br><span class="line">u盘：&#x2F;dev&#x2F;sd[a-p]</span><br><span class="line"></span><br><span class="line">软驱：&#x2F;dev&#x2F;fd[0-1]</span><br><span class="line"></span><br><span class="line">打印机：25针：&#x2F;dev&#x2F;lp[0-2]；USB: &#x2F;dev&#x2F;usb&#x2F;lp[0-15]</span><br><span class="line"></span><br><span class="line">鼠标：usb: &#x2F;dev&#x2F;usb&#x2F;mouse[0-15]；ps2: &#x2F;dev&#x2F;psaux</span><br><span class="line"></span><br><span class="line">当前cd rom&#x2F;dvd rom：&#x2F;dev&#x2F;cdrom</span><br><span class="line"></span><br><span class="line">当前鼠标：&#x2F;dev&#x2F;mouse</span><br></pre></td></tr></table></figure><h3 id="获取item值"><a href="#获取item值" class="headerlink" title="获取item值"></a>获取item值</h3><p>使用zabbix监控磁盘IO，只需要在服务器装一个zabbix_agent就，配置完监控脚本即可，这边也就不多说怎么装，怎么配置了，直接上脚本：</p><p><code>userparameter_mysql.conf</code>(/etc/zabbix/zabbix_agentd.d)添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserParameter&#x3D;disk.status[*],&#x2F;etc&#x2F;zabbix&#x2F;script&#x2F;disk-status.sdisk-status.sh $1</span><br></pre></td></tr></table></figure><p>相应的，在<code>/etc/zabbix/script</code>文件下，创建磁盘信息获取脚本<code>disk-status.sh</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim disk-status.sh</span><br></pre></td></tr></table></figure><p>内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line"># 参数是否正确</span><br><span class="line">if [ $# -ne &quot;1&quot; ];then</span><br><span class="line">    echo &quot;arg error!&quot; </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line"></span><br><span class="line">    rrqm)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda|tail -1 |awk &#39;&#123;print $2&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    wrqm)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $3&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    rps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $4&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    wps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $5&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    rKBps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $6&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    wKBps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $7&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    avgrq-sz)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $8&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    avgqu-sz)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $9&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    await)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $10&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line">    svctm)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $13&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    util)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &#39;&#123;print $14&#125;&#39;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    *)</span><br><span class="line">        echo &quot;Usage:$0(rrqm|wrqm|rps|wps|rKBps|wKBps|avgqu-sz|avgrq-sz|await|svctm|util)&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>配置完成，重启zabbix_agent：<code>systemctl restart zabbix-agent</code></p><p>验证：<br>使用zabbix_get来验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost script]# zabbix_get -s 192.168.0.110 -k disk.status[util]</span><br><span class="line">3.77</span><br></pre></td></tr></table></figure><p>util%当前是3.77%，表明zabbix_agent监控配置成功。</p><h3 id="zabbix-web配置"><a href="#zabbix-web配置" class="headerlink" title="zabbix web配置"></a>zabbix web配置</h3><p>在zabbix web界面，配置-&gt; 模板，创建模板，Disk IO<br>在创建的模板中，选择监控项，点击创建监控项，以<code>await</code>为例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">名称：await IO等待时间</span><br><span class="line">类型：zabbix客户端</span><br><span class="line">键值：disk.status[await]</span><br><span class="line">信息类型：浮点数</span><br><span class="line">应用集：Disk IO(自建)</span><br></pre></td></tr></table></figure><p>保存即可</p><h3 id="Grafana展示"><a href="#Grafana展示" class="headerlink" title="Grafana展示"></a>Grafana展示</h3><p>zabbix自己的监控图，说实话，有点别扭，可以截止grafana做展示。<br>配置datasource：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: Zabbix test</span><br><span class="line">Type：Zabbix</span><br><span class="line">URL： http:&#x2F;&#x2F;IP&#x2F;zabbix&#x2F;api_jsonrpc.php(IP为zabbix server机器的IP)</span><br><span class="line">Access：Browser</span><br></pre></td></tr></table></figure><p>配置Zabbix API details  用户名/密码。是否使用直连数据库的数据，有配置zabbix的数据量的话可以选，不然不选也行；是否启用告警，选启用好了。</p><p>监控的dashboard，创建很简单，也可以直接找做好的导入即可。</p><p>其实挺简单，dashboard设置里面：<br>General，就你dashboard的名字，描述，tag简单的信息；<br>Variables，配置变量，这样既不用写死一个host了：<br>$group</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Name:group</span><br><span class="line">Type:Query</span><br><span class="line">Data source: zabbix test</span><br><span class="line">Refresh On Dashboard Load</span><br><span class="line">Query:*</span><br><span class="line">Multi-value和include all option勾上</span><br></pre></td></tr></table></figure><p>一个变量就结束了<br>第二个变量$host:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Name:host</span><br><span class="line">Type:Query</span><br><span class="line">Data source: zabbix test</span><br><span class="line">Refresh On Dashboard Load</span><br><span class="line">Query:$group.*</span><br><span class="line">Multi-value和include all option勾上</span><br></pre></td></tr></table></figure><p>保存，这样dashboard的设置就完成了。</p><h4 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h4><p>进入dashboard，点击<code>Add graph</code>新增图形<br>选择Graph，主要就是设置<code>Metrics</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Data source:zabbix test</span><br><span class="line">Query Mode:Metrics</span><br><span class="line">Group: $group</span><br><span class="line">Host: $host</span><br><span class="line">Application: Disk io</span><br><span class="line">item: 选择想展示项即可</span><br></pre></td></tr></table></figure><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix3.4 </tag>
            
            <tag> IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux磁盘IO监控工具-iostat</title>
      <link href="2018/12/21/Linux%E7%A3%81%E7%9B%98IO%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7-iostat/"/>
      <url>2018/12/21/Linux%E7%A3%81%E7%9B%98IO%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7-iostat/</url>
      
        <content type="html"><![CDATA[<p>Linux磁盘IO监控工具-iostat</p><p>因为使用zabbix监控linux磁盘IO的需求，又折腾了会iostat</p><a id="more"></a><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>iostat安装，直接用<code>yum install iostat</code>这是肯定会报错的，包不存在；iostat是包含在<code>sysstat</code>工具包中的一个工具，使用安装也就是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install sysstat</span><br></pre></td></tr></table></figure><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>直接iostat输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# iostat</span><br><span class="line">Linux 3.10.0-862.11.6.el7.x86_64 (localhost.localdomain) 12&#x2F;21&#x2F;2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           0.20    0.00    0.19    0.40    0.00   99.20</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read&#x2F;s    kB_wrtn&#x2F;s    kB_read    kB_wrtn</span><br><span class="line">sda               6.00         0.56       118.51    1200547  254018670</span><br><span class="line">scd0              0.00         0.00         0.00       1028          0</span><br><span class="line">dm-0              6.00         0.38       118.46     822151  253921784</span><br><span class="line">dm-1              0.00         0.00         0.00       2228          0</span><br><span class="line">dm-2              0.01         0.16         0.04     348695      9471</span><br></pre></td></tr></table></figure><p>可以看见系统的基本信息，hostname，CPU数目，系统位数，以及：<br>一些CPU的信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%user：用户程序占用CPU时间百分比</span><br><span class="line"></span><br><span class="line">%system：系统进程占CPU时间百分比</span><br><span class="line"></span><br><span class="line">%nice：切换优先级的进程占CPU时间百分比</span><br><span class="line"></span><br><span class="line">%iowait：CPU等待输入输出完成时间的百分比</span><br><span class="line"></span><br><span class="line">%steal：管理程序(hypervisor)为另一个虚拟进程提供服务而等待虚拟CPU的百分比</span><br></pre></td></tr></table></figure><p>说实话，我是不太理解%steal…有个解释：<code>Steal time is the percentage of time a virtual CPU waits for a real CPU while the hypervisor is servicing another virtual processor</code>，差不多意思是你的虚拟机（VM）会与虚拟环境的宿主机上的多个虚拟机实例共享物理资源。其中之一共享的就是CPU时间切片。如果你的VM的物理机虚拟比是1/4， 那么它的CPU使用率不会限制于25%的CPU时间切片－它能够使用超过它设置的虚拟比。</p><p>通常我们会关注的部分：%iowait的值过高，表示硬盘存在I/O瓶颈，%idle值高，表示CPU较空闲，如果%idle值高但系统响应慢时，有可能是CPU等待分配内存，此时应加大内存容量。%idle值如果持续低于10，那么系统的CPU处理能力相对较低，表明系统中最需要解决的资源是CPU</p><p>磁盘属性：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tps: 该设备每秒的传输次数（Indicate the number of transfers per second that were issued to the device.）。“一次传输”意思是“一次I&#x2F;O请求”。多个逻辑请求可能会被合并为“一次I&#x2F;O请求”</span><br><span class="line"></span><br><span class="line">kB_read&#x2F;s：每秒从设备（drive expressed）读取的数据量</span><br><span class="line"></span><br><span class="line">kB_wrtn&#x2F;s：每秒向设备（drive expressed）写入的数据量</span><br><span class="line"></span><br><span class="line">kB_read：读取的总数据量</span><br><span class="line"></span><br><span class="line">kB_wrtn：写入的总数量数据量</span><br></pre></td></tr></table></figure><h3 id="iostat语法"><a href="#iostat语法" class="headerlink" title="iostat语法"></a>iostat语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# iostat --help</span><br><span class="line">Usage: iostat [ options ] [ &lt;interval&gt; [ &lt;count&gt; ] ]</span><br><span class="line">Options are:</span><br><span class="line">[ -c ] [ -d ] [ -h ] [ -k | -m ] [ -N ] [ -t ] [ -V ] [ -x ] [ -y ] [ -z ]</span><br><span class="line">[ -j &#123; ID | LABEL | PATH | UUID | ... &#125; ]</span><br><span class="line">[ [ -T ] -g &lt;group_name&gt; ] [ -p [ &lt;device&gt; [,...] | ALL ] ]</span><br><span class="line">[ &lt;device&gt; [...] | ALL ]</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-c    只显示CPU利用率</span><br><span class="line">-d    只显示磁盘利用率</span><br><span class="line">-p    可以报告出每块磁盘的每个分区的使用情况</span><br><span class="line">-k    以 KB&#x2F;秒 为单位显示磁盘利用率报告</span><br><span class="line">-x    显示详细信息</span><br><span class="line">-n    显示NFS（network filesystem）报告</span><br></pre></td></tr></table></figure><h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# iostat -d -k -x 2</span><br><span class="line">Linux 3.10.0-862.11.6.el7.x86_64 (localhost.localdomain) 12&#x2F;21&#x2F;2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">Device:         rrqm&#x2F;s   wrqm&#x2F;s     r&#x2F;s     w&#x2F;s    rkB&#x2F;s    wkB&#x2F;s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">sda               0.00     0.01    0.02    5.98     0.56   118.53    39.70     0.12   20.63    5.10   20.69   6.29   3.77</span><br><span class="line">scd0              0.00     0.00    0.00    0.00     0.00     0.00   114.22     0.00   37.06   37.06    0.00  36.56   0.00</span><br><span class="line">dm-0              0.00     0.00    0.01    5.99     0.38   118.48    39.59     0.12   20.72    6.26   20.76   6.28   3.77</span><br><span class="line">dm-1              0.00     0.00    0.00    0.00     0.00     0.00    47.40     0.00    8.22    8.22    0.00   7.71   0.00</span><br><span class="line">dm-2              0.00     0.00    0.01    0.00     0.16     0.04    50.37     0.00   55.11    3.29  178.62   2.30   0.00</span><br></pre></td></tr></table></figure><p>参数含义：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rrqm&#x2F;s： 每秒进行 merge 的读操作数目.即 delta(rmerge)&#x2F;s</span><br><span class="line">wrqm&#x2F;s： 每秒进行 merge 的写操作数目.即 delta(wmerge)&#x2F;s</span><br><span class="line">r&#x2F;s： 每秒完成的读 I&#x2F;O 设备次数.即 delta(rio)&#x2F;s</span><br><span class="line">w&#x2F;s： 每秒完成的写 I&#x2F;O 设备次数.即 delta(wio)&#x2F;s</span><br><span class="line">rsec&#x2F;s： 每秒读扇区数.即 delta(rsect)&#x2F;s</span><br><span class="line">wsec&#x2F;s： 每秒写扇区数.即 delta(wsect)&#x2F;s</span><br><span class="line">rkB&#x2F;s：  每秒读K字节数.是 rsect&#x2F;s 的一半,因为每扇区大小为512字节.(需要计算)</span><br><span class="line">wkB&#x2F;s：  每秒写K字节数.是 wsect&#x2F;s 的一半.(需要计算)</span><br><span class="line">avgrq-sz：平均每次设备I&#x2F;O操作的数据大小 (扇区).delta(rsect+wsect)&#x2F;delta(rio+wio)</span><br><span class="line">avgqu-sz：平均I&#x2F;O队列长度.即 delta(aveq)&#x2F;s&#x2F;1000 (因为aveq的单位为毫秒).</span><br><span class="line">await：   平均每次设备I&#x2F;O操作的等待时间 (毫秒).即 delta(ruse+wuse)&#x2F;delta(rio+wio)</span><br><span class="line">svctm：   平均每次设备I&#x2F;O操作的服务时间 (毫秒).即 delta(use)&#x2F;delta(rio+wio)</span><br><span class="line">%util：  在 I&#x2F;O 请求发送到设备期间，占用 CPU 时间的百分比。用于体现设备的带宽利用率。</span><br></pre></td></tr></table></figure><p>当%util接近100%时，设备宽带已满</p><h3 id="参考blog"><a href="#参考blog" class="headerlink" title="参考blog"></a>参考blog</h3><p><a href="https://blog.csdn.net/m0_37814112/article/details/80661481">iostat 监视I/O子系统</a></p><p><a href="https://blog.csdn.net/sunansheng/article/details/51942281">Linux磁盘I/O性能监控之iostat详解</a></p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> iostat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>loadrunner压测exchange邮箱</title>
      <link href="2018/12/14/loadrunner%E5%8E%8B%E6%B5%8Bexchange%E9%82%AE%E7%AE%B1/"/>
      <url>2018/12/14/loadrunner%E5%8E%8B%E6%B5%8Bexchange%E9%82%AE%E7%AE%B1/</url>
      
        <content type="html"><![CDATA[<p>loadrunner压测exchange邮箱服务</p><p>神需求，折腾半天</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>boss有个需求，公司自建邮箱，用的是<code>exchange 2016</code>，为了评估当前硬件配置是否足以支撑500+人的收发，需要做性能测试；刚开始接到这个需求时候，觉得不是很难，网上一堆邮箱压测的例子，jmeter有<code>SMTP Sampler</code>、<code>Mail reader Sampler</code>支持smtp，pop3邮箱各种情况，附件都是随便加；就是用loadrunner写脚本也不复杂。</p><p>万万没想到，需求是邮箱服务使用<code>exchange</code>不开pop3和imap，smtp也没有、、、</p><h3 id="OWA"><a href="#OWA" class="headerlink" title="OWA"></a>OWA</h3><p>没办法，jmeter基本是废了，只能用loadrunner了，刚开始想的是loadrunner通过录制outlook客户端来完成脚本，然后，华丽的失败了，压根行不通，outlook直接崩了。。。想到第二种方法，直接用exchange的owa，也就是邮箱的web端录、写脚本。</p><p>这个，最后是实现了，需要说一下的是，OWA是真的坑啊，每个请求，回放时候基本都需要从上一个请求关联cookie，再手动加进去，加了三十个，简直要疯了，以下为最终LR脚本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br></pre></td><td class="code"><pre><span class="line">Action()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">web_set_sockets_option(&quot;SSL_VERSION&quot;, &quot;2&amp;3&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;*Possible OAUTH authorization was detected. It is recommended to correlate the authorization parameters.*&#x2F;</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_auto_header(&quot;DNT&quot;,</span><br><span class="line">&quot;1&quot;);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t1.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;logon.aspx&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;auth&#x2F;logon.aspx?replaceCurrent&#x3D;1&amp;url&#x3D;https%3a%2f%2femail.emailtest.cn%2fowa&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t2.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;15.1.1531&#x2F;themes&#x2F;resources&#x2F;segoeui-regular.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;auth&#x2F;logon.aspx?replaceCurrent&#x3D;1&amp;url&#x3D;https%3a%2f%2femail.emailtest.cn%2fowa&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;15.1.1531&#x2F;themes&#x2F;resources&#x2F;segoeui-semilight.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;auth&#x2F;logon.aspx?replaceCurrent&#x3D;1&amp;url&#x3D;https%3a%2f%2femail.emailtest.cn%2fowa&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_start_transaction(&quot;login&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_1&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_submit_form(&quot;auth.owa&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t3.inf&quot;, </span><br><span class="line">ITEMDATA, </span><br><span class="line">&quot;Name&#x3D;username&quot;, &quot;Value&#x3D;test4@emailtest.cn&quot;, ENDITEM, </span><br><span class="line">&quot;Name&#x3D;password&quot;, &quot;Value&#x3D;Test@123&quot;, ENDITEM, </span><br><span class="line">&quot;Name&#x3D;passwordText&quot;, &quot;Value&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;sessiondata.ashx&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;sessiondata.ashx?appcacheclient&#x3D;0&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;x-javascript&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t5.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;boot.worldwide.mouse.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;boot.owaframe.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;sprite1.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;globalize&#x2F;globalize.culture.zh-cn.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;ping.owa?UA&#x3D;0&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_1&#125;&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_2&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;ev.owa2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;ev.owa2?ns&#x3D;PendingRequest&amp;ev&#x3D;FinishNotificationRequest&amp;UA&#x3D;0&amp;Fn&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t6.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;text&#x2F;plain;charset&#x3D;UTF-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*增加head*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_2&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetFavorites&quot;);</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_3&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">web_custom_request(&quot;service.svc&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetFavorites&amp;EP&#x3D;1&amp;ID&#x3D;-1&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t7.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_3&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetFolderMruConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetFolderMruConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-2&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t8.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_4&quot;,</span><br><span class="line">&quot;LB&#x3D;X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_3&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetOtherMailboxConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_3&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetOtherMailboxConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-3&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t9.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;themes&#x2F;base&#x2F;images&#x2F;0&#x2F;headerbgmaing2.gif&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;themes&#x2F;base&#x2F;images&#x2F;0&#x2F;headerbgmaing2.png&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;plt1.ashx&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;plt1.ashx?cId&#x3D;C696115C3ECB481BADFEEBB71DC3DA12&amp;msg&#x3D;success;200&amp;caTy&#x3D;0&amp;tg&#x3D;&amp;MDB&#x3D;86f42157-91d9-4366-ac62-de53d1dee6e1&amp;nId&#x3D;0000000000000000&amp;MBX&#x3D;0df790ce-6185-4b88-af3c-41a33f8b8ce1&amp;sdCoId&#x3D;C696115C3ECB481BADFEEBB71DC3DA12_1544675566286&amp;sds&#x3D;200&amp;fe&#x3D;EXCHANGE001&amp;be&#x3D;EXCHANGE001&amp;cbe&#x3D;exchange001.emailtest.cn&amp;dag&#x3D;DAG&amp;cver&#x3D;15.1.1531.3&amp;sdver&#x3D;15.1.1531.3&amp;rpo&#x3D;0&amp;off&#x3D;0&amp;pal&#x3D;0&amp;rfe&#x3D;0&amp;te&#x3D;0&amp;PLT&#x3D;uES,506,uEE,506,reds,23,redE,157,fS,157,dLS,0,dLE,0,cS,0,cE,0,reqS,2,resS,50,resE,345,domL,50&quot;</span><br><span class="line">&quot;,domCLES,1668,domCLEE,1668,domC,1675,lES,1676,lEE,1676,sdR,1482,pEab,1453,pE,1662,rSt,1707,now,2637,nowNoTim,2248,rStNoTim,1318&amp;nowTS&#x3D;1544675568534&amp;navtp&#x3D;0&amp;rdct&#x3D;2&amp;tcd&#x3D;339&amp;lbv&#x3D;undefined&amp;icv&#x3D;undefined&amp;iacr&#x3D;undefined&amp;lcver&#x3D;undefined&amp;accu&#x3D;undefined&amp;acth&#x3D;undefined&amp;acdc&#x3D;undefined&amp;lhn&#x3D;undefined&amp;chn&#x3D;email.emailtest.cn&amp;acs&#x3D;1&amp;mf&#x3D;nf&amp;fc&#x3D;undefined&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;1&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;image&#x2F;gif&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t10.inf&quot;, </span><br><span class="line">&quot;EncType&#x3D;text&#x2F;plain;charset&#x3D;UTF-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&amp;bt&#x3D;BootStrap.1,tim&#x3D;st,-1544675564025,end,-1544675563980&amp;bt&#x3D;OwaStart.2,tim&#x3D;st,-1544675563964&amp;bt&#x3D;ProcessUserConfig.6,tim&#x3D;st,-1544675563924&amp;bt&#x3D;MMVMInit.7,tim&#x3D;st,-1544675563879,end,-1544675563723&amp;bt&#x3D;MLVMInit.20,tim&#x3D;st,-1544675563766,end,-1544675563739&amp;bt&#x3D;FoldersInit.43,tim&#x3D;st,-1544675563739,end,-1544675563726&amp;bt&#x3D;VMFactory.48,tim&#x3D;st,-1544675563679,end,-1544675563096&amp;bt&#x3D;OWAShellActF.51,tim&#x3D;st,-1544675563679,end,-1544675563651&amp;bt&#x3D;OWAShellAct.53,tim&#x3D;st,-1544675563650,end,-1544675563096&amp;bt&#x3D;PMVActF.55&quot;</span><br><span class="line">&quot;,tim&#x3D;st,-1544675563644,end,-1544675563553&amp;bt&#x3D;PMVAct.56,tim&#x3D;st,-1544675563553,end,-1544675563100&amp;bt&#x3D;MMVActF.58,tim&#x3D;st,-1544675563536,end,-1544675563448&amp;bt&#x3D;MMVAct.59,tim&#x3D;st,-1544675563448,end,-1544675563109&amp;bt&#x3D;MLVActF.61,tim&#x3D;st,-1544675563322,end,-1544675563290&amp;bt&#x3D;MLVAct.62,tim&#x3D;st,-1544675563290,end,-1544675563257&amp;Res&#x3D;boot.owaframe.0.mouse.js,tim&#x3D;st,504,fS,3,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,87,resE,535,pE,994&amp;Res&#x3D;boot.owaframe.1.mouse.js,tim&#x3D;st,506,fS,34,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,81,resE,&quot;</span><br><span class="line">&quot;501,pE,1311&amp;Res&#x3D;boot.owaframe.2.mouse.js,tim&#x3D;st,529,fS,12,dLS,8,dLE,8,cS,8,cE,514,reqS,514,resS,632,resE,874,pE,1366&amp;Res&#x3D;boot.owaframe.3.mouse.js,tim&#x3D;st,537,fS,4,dLS,0,dLE,0,cS,0,cE,385,reqS,385,resS,454,resE,840,pE,1453&amp;Res&#x3D;sprite1.mouse.png,tim&#x3D;st,539,fS,2,dLS,0,dLE,0,cS,0,cE,498,reqS,498,resS,582,resE,621&amp;Res&#x3D;sessiondata.ashx,tim&#x3D;st,550,fS,145,dLS,0,dLE,0,cS,0,cE,930,reqS,930,resS,930,resE,935&amp;Res&#x3D;office365icons.eot,tim&#x3D;st,736,fS,5,dLS,0,dLE,0,cS,0,cE,0,reqS,287,resS,343,resE,634&amp;Res&#x3D;&quot;</span><br><span class="line">&quot;boot.worldwide.mouse.strings.localized.min.js,tim&#x3D;st,1617,fS,2,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,56,resE,81,pE,1613&amp;Res&#x3D;sprite1.mouse.css,tim&#x3D;st,1620,fS,3,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,53,resE,58&amp;Res&#x3D;boot.owaframe.mouse.css,tim&#x3D;st,1623,fS,2,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,50,resE,107&amp;Res&#x3D;globalize.culture.zh-cn.js,tim&#x3D;st,1772,fS,2,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,36,resE,38,pE,1658&amp;refUrl&#x3D;https%3A%2F%2Femail.emailtest.cn%2Fowa%2F&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*增加消息头*&#x2F;</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_4&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;ev.owa2_2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;ev.owa2?ns&#x3D;PendingRequest&amp;ev&#x3D;FinishNotificationRequest&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t11.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;text&#x2F;plain;charset&#x3D;UTF-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_5&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_4&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_4&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;UA&#x3D;0&amp;ID&#x3D;-4&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t12.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;request\&quot;:&#123;\&quot;__type\&quot;:\&quot;NotificationSubscribeJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2013\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;&#125;,\&quot;subscriptionData\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;HierarchyNotification\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;:\&quot;HierarchyNotification\&quot;,\&quot;subscriptionIdSuffix\&quot;:\&quot;\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEMAAA&#x3D;_true_ConversationLastDeliveryOrRenewTime_Descending_ConversationLastDeliveryTime_Descending_All_renew\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;&quot;</span><br><span class="line">&quot;:\&quot;RowNotification\&quot;,\&quot;FolderId\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEMAAA&#x3D;\&quot;,\&quot;IsConversation\&quot;:true,\&quot;SortBy\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;ConversationLastDeliveryOrRenewTime\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;&quot;</span><br><span class="line">&quot;ConversationLastDeliveryTime\&quot;&#125;&#125;],\&quot;Filter\&quot;:\&quot;All\&quot;,\&quot;CategoryFilter\&quot;:null,\&quot;FocusedViewFilter\&quot;:-1,\&quot;ConversationShapeName\&quot;:null,\&quot;subscriptionIdSuffix\&quot;:\&quot;renew\&quot;,\&quot;GroupBy\&quot;:null,\&quot;ChannelId\&quot;:null&#125;&#125;]&#125;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;jquery.owa.bundle.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.boot.deferred.jquery.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.boot.deferred.webservices.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.boot.deferred.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.controls.extended.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.coredeferredstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.nonboot.webservices.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.owa.boot.deferredstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_end_transaction(&quot;login&quot;,LR_AUTO);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_6&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_5&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22ValidateAggregatedConfigurationRequest%3A%23Exchange%22%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;ValidateAggregatedConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_5&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;ValidateAggregatedConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-5&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t13.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.controls.extended.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.boot.deferred.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.boot.deferred.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;appCacheManifestHandler.ashx&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t14.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_7&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_5&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetUserVoiceData&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_6&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetUserVoiceData&amp;EP&#x3D;1&amp;ID&#x3D;-6&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t15.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;manifests&#x2F;appCacheManifestHandler.ashx?owamanifest&#x3D;1&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.pcstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_8&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_7&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22OwaVersionChangeNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22OwaVersionChangeNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_7&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;EP&#x3D;1&amp;UA&#x3D;0&amp;ID&#x3D;-7&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t16.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t17.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;&#x2F;owa&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.prefetch.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;&#x2F;owa&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.common.compose.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;&#x2F;owa&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.core.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_3&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t18.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_9&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_8&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetOwaNonBootUserConfiguration&quot;);</span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line">web_custom_request(&quot;service.svc_8&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetOwaNonBootUserConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-8&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t19.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.surface.core.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.meetingmsgstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.surface.v2.desktop.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.surface.core.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.calsurfacestrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.webservices.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;calendarsurface.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.controls.core.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.controls.v2.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.calcorestrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;1x1.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.application.textboys.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.personacontrol.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_4&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;?layout&#x3D;mouse&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t20.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.livepersonacard.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.personacontrol.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_5&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;?realm&#x3D;emailtest.cn&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t21.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;emailtest.cn&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;emailtest.cn&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t22.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.mecard.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;nbsprite1.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.mail.common.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.findpeople.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;emailtest.cn_2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;emailtest.cn&#x2F;&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t23.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.controls.editorbase.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.nonbootstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.commonstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.mecard.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;appCacheManifestHandler.ashx_2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t24.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;bg_gradient.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;calendarcolumnerroroverlay.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.findpeople.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.mail.common.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.controls.editorbase.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;dotsrepeater.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;favicon.ico&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.recipientwell.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.findpeople.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.recipientwell.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;folderpane_bg.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;inlineimageplaceholder.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;loading_blackbg.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.recipientwell.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;loading_whitebg.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.attachments.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;o365shellg2coreowa.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.attachments.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.o365.shellg2.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;olk_logo_white_cropped.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;owa_brand.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;pulse.png&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.lightning.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.calendar.controls.v2.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;striperepeater.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.owa.lightning.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking16_blue.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.lightning.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking16_grey.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking16_white.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.triageshared.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.mail.compose.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.application.readingpane.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking24.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.moderngroups.calendar.shared.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.application.readingpane.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.edgepromotion.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.options.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking32_blue.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.calendar.core.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.core.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.mail.compose.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking32_grey.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.triageshared.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking32_white.gif&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;fonts&#x2F;office365icons.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;fonts&#x2F;office365icons.svg&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.triageshared.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.application.readingpane.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.mail.compose.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.calendar.addroom.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.calarstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;fonts&#x2F;office365icons.ttf&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.addroom.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;..&#x2F;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.popout.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_10&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_9&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetMailboxMessageConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_9&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetMailboxMessageConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-9&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t25.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_11&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_10&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetMailboxJunkEmailConfiguration&quot;);</span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_10&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetMailboxJunkEmailConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-10&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t26.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.locationcommon.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.calendar.locationwell.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;fonts&#x2F;office365icons.woff&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.callwstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.locationwell.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.locationwell.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-light.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-light.ttf&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-light.woff&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.nonboot.controls.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.controls.emojiresources.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking32_grey.gif&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;nbsprite1.mouse.png&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_12&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_11&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindPeople&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_11&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;FindPeople&amp;ID&#x3D;-11&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t27.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;__type\&quot;:\&quot;FindPeopleJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2013\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;FindPeopleRequest:#Exchange\&quot;,\&quot;IndexedPageItemView\&quot;:&#123;\&quot;__type\&quot;:\&quot;IndexedPageView:#Exchange\&quot;,\&quot;BasePoint\&quot;:\&quot;Beginning\&quot;,\&quot;Offset\&quot;:0,\&quot;MaxEntriesReturned\&quot;&quot;</span><br><span class="line">&quot;:1000&#125;,\&quot;QueryString\&quot;:null,\&quot;AggregationRestriction\&quot;:&#123;\&quot;__type\&quot;:\&quot;RestrictionType:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Or:#Exchange\&quot;,\&quot;Items\&quot;:[&#123;\&quot;__type\&quot;:\&quot;Exists:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaEmailAddress\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;IsEqualTo:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaType\&quot;&#125;,\&quot;FieldURIOrConstant\&quot;:&#123;\&quot;__type\&quot;:\&quot;FieldURIOrConstantType:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Constant:#Exchange\&quot;,\&quot;Value&quot;</span><br><span class="line">&quot;\&quot;:\&quot;DistributionList\&quot;&#125;&#125;&#125;]&#125;&#125;,\&quot;ParentFolderId\&quot;:&#123;\&quot;__type\&quot;:\&quot;TargetFolderId:#Exchange\&quot;,\&quot;BaseFolderId\&quot;:&#123;\&quot;__type\&quot;:\&quot;FolderId:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAABH4AAA&#x3D;\&quot;&#125;&#125;,\&quot;PersonaShape\&quot;:&#123;\&quot;__type\&quot;:\&quot;PersonaResponseShape:#Exchange\&quot;,\&quot;BaseShape\&quot;:\&quot;Default\&quot;,\&quot;AdditionalProperties\&quot;:[&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaAlias\&quot;&#125;,&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;FieldURI\&quot;:\&quot;PersonaRelevanceScore\&quot;&#125;]&#125;,\&quot;SortOrder\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Ascending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaRelevanceScore\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Ascending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaDisplayNameFirstLast\&quot;&#125;&#125;],\&quot;ShouldResolveOneOffEmailAddress\&quot;:false,\&quot;SearchPeopleSuggestionIndex\&quot;:false&#125;&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_13&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_12&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetComplianceConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_12&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetComplianceConfiguration&amp;EP&#x3D;1&amp;ID&#x3D;-12&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t28.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-regular.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;ewsprite1.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.attachments.extendedattachmentwell.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.infotips.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-regular.ttf&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.extstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-regular.woff&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.owa.core.editor.emoji.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.readingpaneshared.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.people.personcard.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_14&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_13&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindPeople&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindPeopleJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindPeopleRequest%3A%23Exchange%22%2C%22IndexedPageItemView%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A1000%7D%2C%22QueryString%22%3Anull%2C%22ParentFolderId%22%3A%7B%22__type%22%3A%22TargetFolderId%3A%23Exchange%22%2C%22BaseFolderId%22%3A%7B%22__type%22%3A%22FolderId%3A%23Exchange%22%2C%22Id%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEkAAA%3D%22%7D%7D%2C%22PersonaShape%22%3A%7B%22__type%22%3A%22PersonaResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22Default%22%2C%22AdditionalProperties%22%3A%5B%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaAlias%22%7D%2C%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaRelevanceScore%22%7D%5D%7D%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Ascending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaRelevanceScore%22%7D%7D%2C%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Ascending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaDisplayNameFirstLast%22%7D%7D%5D%2C%22ShouldResolveOneOffEmailAddress%22%3Afalse%2C%22SearchPeopleSuggestionIndex%22%3Afalse%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_13&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;FindPeople&amp;EP&#x3D;1&amp;ID&#x3D;-13&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t29.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-semibold.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-semibold.ttf&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.linkpreview.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.infotips.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;suiteextensions.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.readingpaneshared.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.nonboot.controls.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-semibold.woff&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.moderngroups.search.shared.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.personcardstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;suiteextensionscontrols.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.controls.emojiresources.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.personcard.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.attachments.extendedattachmentwell.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-semilight.eot&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;owa.clientnext.common.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.calendar.meetingforms.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.instantsearch.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.calmfstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.instantsearch.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-semilight.ttf&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;owa.clientnext.application.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.meetingforms.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.attachments.extendedattachmentwell.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.instantsearch.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.personacardfacade.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;fonts&#x2F;segoeui-semilight.woff&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;projection.aspx&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;projection.aspx&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t30.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.search.suggestions.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.search.suggestions.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;manifests&#x2F;appCacheManifestHandler.ashx?owamanifest&#x3D;1&quot;, &quot;Referer&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;manifests&#x2F;appCacheManifestHandler.ashx?manifest&#x3D;0&amp;layout&#x3D;mouse&amp;UA&#x3D;0&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.nav.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.navigation.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;o365shellg2plusowa.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.o365.shellg2.settingstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.clientnext.framework.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.models.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;locale&#x2F;zh-hans&#x2F;owa-calendar-strings.json&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;locale&#x2F;zh-hans&#x2F;owa-groups-strings.json&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.extensibilitynext.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;adal.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;msrcrypto-aes.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;owa.clientnext.extensibility.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;msrcrypto-aes-fix.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.o365.suiteserviceproxycommon.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;locale&#x2F;zh-hans&#x2F;owa-extensibility-strings.json&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.o365.suiteserviceproxy.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;osfruntime.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.suiteapinotifications.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.o365.suiteapi.owa.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.extensibilitynext.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&#x2F;&#x2F;&quot;Url&#x3D;service.svc&#x2F;s&#x2F;GetPersonaPhoto?email&#x3D;test3%40emailtest.cn&amp;personId&#x3D;AAQkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAQANSG92XBk%2F5Kh1qWIYKw8%2Bw%3D&amp;UA&#x3D;0&amp;adObjectId&#x3D;65f786d4-93c1-4afe-875a-962182b0f3ec&amp;size&#x3D;HR96x96&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.o365.suiteapiskypeintegration.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.extensibility.common.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.o365.shellg2.owa.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.o365.shellg2.owa.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.shellplusg2.o365.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.extendedmaillistview.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_15&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_14&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetExtensibilityContext&quot;);</span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22GetExtensibilityContextParameters%3A%23Exchange%22%2C%22FormFactor%22%3A3%2C%22ClientLanguage%22%3A%22zh-CN%22%2C%22IncludeDisabledExtensions%22%3Afalse%2C%22ApiVersionSupported%22%3A%221.5%22%2C%22ClientOverrideVersion%22%3A%221.1%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_14&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetExtensibilityContext&amp;EP&#x3D;1&amp;ID&#x3D;-14&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t31.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;meidp.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.extendedmaillistview.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;cardmetadata.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.extendedmaillistview.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.im.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_16&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_15&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetReminders&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetRemindersJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetRemindersRequest%3A%23Exchange%22%2C%22EndTime%22%3A%222018-12-23T12%3A32%3A56%22%2C%22MaxItems%22%3A0%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_15&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetReminders&amp;EP&#x3D;1&amp;ID&#x3D;-15&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t32.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.lyncintegration.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_17&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_16&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetDaysUntilPasswordExpiration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_16&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetDaysUntilPasswordExpiration&amp;ID&#x3D;-16&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t33.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;&#125;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.im.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.immanager.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;service.svc&#x2F;s&#x2F;GetPersonaPhoto?email&#x3D;test4%40emailtest.cn&amp;UA&#x3D;0&amp;size&#x3D;HR96x96&amp;sc&#x3D;1544675576580&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_18&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_17&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22ReminderNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22ReminderNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%2C%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22NewMailNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22NewMailNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%2C%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22SuiteNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22SuiteNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_17&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;EP&#x3D;1&amp;UA&#x3D;0&amp;ID&#x3D;-17&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t34.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_19&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_18&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetAllowedOptions&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetAllowedOptionsRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_18&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetAllowedOptions&amp;EP&#x3D;1&amp;ID&#x3D;-18&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t35.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_20&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_19&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetCalendarView&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetCalendarViewJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetCalendarViewRequest%3A%23Exchange%22%2C%22CalendarId%22%3A%7B%22__type%22%3A%22TargetFolderId%3A%23Exchange%22%2C%22BaseFolderId%22%3A%7B%22__type%22%3A%22FolderId%3A%23Exchange%22%2C%22Id%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAENAAA%3D%22%2C%22ChangeKey%22%3A%22AgAAAA%3D%3D%22%7D%7D%2C%22RangeStart%22%3A%222018-11-26T00%3A00%3A00.001%22%2C%22RangeEnd%22%3A%222019-01-07T00%3A00%3A00.000%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_19&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetCalendarView&amp;EP&#x3D;1&amp;ID&#x3D;-19&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t36.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_21&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_20&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetCalendarFolders&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_20&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetCalendarFolders&amp;EP&#x3D;1&amp;ID&#x3D;-20&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t37.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_22&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_21&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22CalendarItemNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAENAAA%3D%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22CalendarItemNotification%22%2C%22FolderId%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAENAAA%3D%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line">web_custom_request(&quot;service.svc_21&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;EP&#x3D;1&amp;UA&#x3D;0&amp;ID&#x3D;-21&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t38.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_23&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_22&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindItemJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2016%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindItemRequest%3A%23Exchange%22%2C%22ItemShape%22%3A%7B%22__type%22%3A%22ItemResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22IdOnly%22%7D%2C%22ParentFolderIds%22%3A%5B%7B%22__type%22%3A%22DistinguishedFolderId%3A%23Exchange%22%2C%22Id%22%3A%22deleteditems%22%7D%5D%2C%22Traversal%22%3A%22Shallow%22%2C%22Paging%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A25%7D%2C%22ViewFilter%22%3A%22All%22%2C%22IsWarmUpSearch%22%3Afalse%2C%22FocusedViewFilter%22%3A-1%2C%22Grouping%22%3Anull%2C%22ShapeName%22%3A%22MailListItem%22%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22DateTimeReceived%22%7D%7D%5D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_22&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;FindItem&amp;EP&#x3D;1&amp;ID&#x3D;-22&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t39.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_24&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_23&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindItemJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2016%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindItemRequest%3A%23Exchange%22%2C%22ItemShape%22%3A%7B%22__type%22%3A%22ItemResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22IdOnly%22%7D%2C%22ParentFolderIds%22%3A%5B%7B%22__type%22%3A%22DistinguishedFolderId%3A%23Exchange%22%2C%22Id%22%3A%22drafts%22%7D%5D%2C%22Traversal%22%3A%22Shallow%22%2C%22Paging%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A25%7D%2C%22ViewFilter%22%3A%22All%22%2C%22IsWarmUpSearch%22%3Afalse%2C%22FocusedViewFilter%22%3A-1%2C%22Grouping%22%3Anull%2C%22ShapeName%22%3A%22MailListItem%22%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22DateTimeCreated%22%7D%7D%5D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_23&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;FindItem&amp;EP&#x3D;1&amp;ID&#x3D;-23&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t40.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;web_url(&quot;ev.owa2_3&quot;, </span><br><span class="line">&#x2F;&#x2F;&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;ev.owa2?ns&#x3D;PendingRequest&amp;ev&#x3D;PendingNotificationRequest&amp;UA&#x3D;0&amp;cid&#x3D;234c1b94-bba1-4bde-a1d5-8752f83d7308&amp;ecnsq&#x3D;1&amp;X-OWA-CANARY&#x3D;Luc7D0HRhkGsUCsuUrQc73Dpsw-0YNYI-bN4sOFPtzkQoWYsmsQdVMyJSEX-XlmtFRT3CGTjYEI.&quot;, </span><br><span class="line">&#x2F;&#x2F;&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&#x2F;&#x2F;&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&#x2F;&#x2F;&quot;Referer&#x3D;&quot;, </span><br><span class="line">&#x2F;&#x2F;&quot;Snapshot&#x3D;t41.inf&quot;, </span><br><span class="line">&#x2F;&#x2F;&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&#x2F;&#x2F;LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_25&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_24&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_24&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;UA&#x3D;0&amp;ID&#x3D;-24&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t42.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;request\&quot;:&#123;\&quot;__type\&quot;:\&quot;NotificationSubscribeJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2013\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;&#125;,\&quot;subscriptionData\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;&quot;</span><br><span class="line">&quot;RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEKAAA&#x3D;_false_DateTimeReceived_Descending_All\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;:\&quot;RowNotification\&quot;,\&quot;FolderId\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEKAAA&#x3D;\&quot;,\&quot;IsConversation\&quot;:false,\&quot;SortBy\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order&quot;</span><br><span class="line">&quot;\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;DateTimeReceived\&quot;&#125;&#125;],\&quot;Filter\&quot;:\&quot;All\&quot;,\&quot;CategoryFilter\&quot;:null,\&quot;FocusedViewFilter\&quot;:-1,\&quot;ConversationShapeName\&quot;:null,\&quot;subscriptionIdSuffix\&quot;:null,\&quot;GroupBy\&quot;:null,\&quot;ChannelId\&quot;:\&quot;234c1b94-bba1-4bde-a1d5-8752f83d7308\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;&quot;</span><br><span class="line">&quot;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAAA&#x3D;_false_DateTimeCreated_Descending_All\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;:\&quot;RowNotification\&quot;,\&quot;FolderId\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v&#x2F;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAAA&#x3D;\&quot;,\&quot;IsConversation\&quot;:false,\&quot;SortBy\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;&quot;</span><br><span class="line">&quot;DateTimeCreated\&quot;&#125;&#125;],\&quot;Filter\&quot;:\&quot;All\&quot;,\&quot;CategoryFilter\&quot;:null,\&quot;FocusedViewFilter\&quot;:-1,\&quot;ConversationShapeName\&quot;:null,\&quot;subscriptionIdSuffix\&quot;:null,\&quot;GroupBy\&quot;:null,\&quot;ChannelId\&quot;:\&quot;234c1b94-bba1-4bde-a1d5-8752f83d7308\&quot;&#125;&#125;]&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_26&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_25&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindConversationJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22V2016_02_03%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindConversationRequest%3A%23Exchange%22%2C%22ParentFolderId%22%3A%7B%22__type%22%3A%22TargetFolderId%3A%23Exchange%22%2C%22BaseFolderId%22%3A%7B%22__type%22%3A%22DistinguishedFolderId%3A%23Exchange%22%2C%22Id%22%3A%22sentitems%22%7D%7D%2C%22ConversationShape%22%3A%7B%22__type%22%3A%22ConversationResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22IdOnly%22%7D%2C%22ShapeName%22%3A%22ConversationSentItemsListView%22%2C%22Paging%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A25%7D%2C%22ViewFilter%22%3A%22All%22%2C%22FocusedViewFilter%22%3A-1%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22ConversationLastDeliveryTime%22%7D%7D%5D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindConversation&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_25&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;FindConversation&amp;EP&#x3D;1&amp;ID&#x3D;-25&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t43.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_27&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_26&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEJAAA%3D_true_ConversationLastDeliveryTime_Descending_All%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22RowNotification%22%2C%22FolderId%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEJAAA%3D%22%2C%22IsConversation%22%3Atrue%2C%22SortBy%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22ConversationLastDeliveryTime%22%7D%7D%5D%2C%22Filter%22%3A%22All%22%2C%22CategoryFilter%22%3Anull%2C%22FocusedViewFilter%22%3A-1%2C%22ConversationShapeName%22%3Anull%2C%22subscriptionIdSuffix%22%3Anull%2C%22GroupBy%22%3Anull%2C%22ChannelId%22%3A%22234c1b94-bba1-4bde-a1d5-8752f83d7308%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_26&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;EP&#x3D;1&amp;UA&#x3D;0&amp;ID&#x3D;-26&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t44.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;service.svc&#x2F;s&#x2F;GetPersonaPhoto?email&#x3D;test3%40emailtest.cn&amp;UA&#x3D;0&amp;size&#x3D;HR96x96&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_28&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_27&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetMailTipsJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22V2016_11_07%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetMailTipsRequest%3A%23Exchange%22%2C%22SendingAs%22%3A%7B%22__type%22%3A%22EmailAddress%3A%23Exchange%22%2C%22EmailAddress%22%3A%22Test4%40emailtest.cn%22%2C%22Name%22%3A%22Test4%22%7D%2C%22Recipients%22%3A%5B%7B%22__type%22%3A%22EmailAddress%3A%23Exchange%22%2C%22EmailAddress%22%3A%22test3%40emailtest.cn%22%2C%22Name%22%3A%22test3%40emailtest.cn%22%7D%5D%2C%22MailTipsRequested%22%3A1%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetMailTips&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_27&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetMailTips&amp;EP&#x3D;1&amp;ID&#x3D;-27&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t45.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;https:&#x2F;&#x2F;static2.sharepointonline.com&#x2F;files&#x2F;fabric&#x2F;assets&#x2F;icons&#x2F;fabricmdl2icons.woff&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;https:&#x2F;&#x2F;appsforoffice.microsoft.com&#x2F;lib&#x2F;1&#x2F;hosted&#x2F;en-us&#x2F;outlook_strings.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;https:&#x2F;&#x2F;appsforoffice.microsoft.com&#x2F;lib&#x2F;1&#x2F;hosted&#x2F;outlook-web-16.01.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;https:&#x2F;&#x2F;appsforoffice.microsoft.com&#x2F;lib&#x2F;1&#x2F;hosted&#x2F;en-us&#x2F;office_strings.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;https:&#x2F;&#x2F;appsforoffice.microsoft.com&#x2F;lib&#x2F;1&#x2F;hosted&#x2F;office.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_29&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_28&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22CreateItemJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22V2015_10_15%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22CreateItemRequest%3A%23Exchange%22%2C%22Items%22%3A%5B%7B%22__type%22%3A%22Message%3A%23Exchange%22%2C%22Subject%22%3A%22Attchment%20pert%22%2C%22Body%22%3A%7B%22__type%22%3A%22BodyContentType%3A%23Exchange%22%2C%22BodyType%22%3A%22HTML%22%2C%22Value%22%3A%22%3Chtml%3E%3Chead%3E%3Cmeta%20http-equiv%3D%5C%22Content-Type%5C%22%20content%3D%5C%22text%2Fhtml%3B%20charset%3DUTF-8%5C%22%3E%3Cstyle%20type%3D%5C%22text%2Fcss%5C%22%20style%3D%5C%22display%3Anone%3B%5C%22%3E%3C!--%20P%20%7Bmargin-top%3A0%3Bmargin-bottom%3A0%3B%7D%20--%3E%3C%2Fstyle%3E%3C%2Fhead%3E%3Cbody%20dir%3D%5C%22ltr%5C%22%3E%3Cdiv%20id%3D%5C%22divtagdefaultwrapper%5C%22%20style%3D%5C%22font-size%3A12pt%3Bcolor%3A%23000000%3Bfont-family%3ACalibri%2CHelvetica%2Csans-serif%3B%5C%22%20dir%3D%5C%22ltr%5C%22%3E%3Cp%3Eperfor%3Cbr%3E%3C%2Fp%3E%3C%2Fdiv%3E%3C%2Fbody%3E%3C%2Fhtml%3E%22%2C%22DataUriCount%22%3A0%2C%22CustomDataUriCount%22%3A0%7D%2C%22Importance%22%3A%22Normal%22%2C%22From%22%3Anull%2C%22ToRecipients%22%3A%5B%7B%22__type%22%3A%22EmailAddress%3A%23Exchange%22%2C%22MailboxType%22%3A%22OneOff%22%2C%22RoutingType%22%3A%22SMTP%22%2C%22EmailAddress%22%3A%22test3%40emailtest.cn%22%2C%22Name%22%3A%22%22%7D%5D%2C%22CcRecipients%22%3A%5B%5D%2C%22BccRecipients%22%3A%5B%5D%2C%22Sensitivity%22%3A%22Normal%22%2C%22IsDeliveryReceiptRequested%22%3Afalse%2C%22IsReadReceiptRequested%22%3Afalse%7D%5D%2C%22ClientSupportsIrm%22%3Atrue%2C%22OutboundCharset%22%3A%22AutoDetect%22%2C%22MessageDisposition%22%3A%22SaveOnly%22%2C%22ComposeOperation%22%3A%22newMail%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;CreateItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_28&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;CreateItem&amp;EP&#x3D;1&amp;ID&#x3D;-28&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t46.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;thinking16_grey.gif&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_30&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_29&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;CreateAttachmentFromLocalFile&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_29&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;CreateAttachmentFromLocalFile&amp;ID&#x3D;-29&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t47.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">body_variable_1, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_think_time(10);</span><br><span class="line"></span><br><span class="line">lr_start_transaction(&quot;post&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_31&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_30&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;UpdateItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_30&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;UpdateItem&amp;ID&#x3D;-30&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t48.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;__type\&quot;:\&quot;UpdateItemJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2015\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;UpdateItemRequest:#Exchange\&quot;,\&quot;ItemChanges\&quot;:[&#123;\&quot;__type\&quot;:\&quot;ItemChange:#Exchange\&quot;,\&quot;Updates\&quot;:[&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;&quot;</span><br><span class="line">&quot;:\&quot;ExtendedPropertyUri:#Exchange\&quot;,\&quot;PropertyId\&quot;:35356,\&quot;DistinguishedPropertySetId\&quot;:\&quot;Sharing\&quot;,\&quot;PropertyType\&quot;:\&quot;CLSID\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;From\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;CcRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;CcRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri&quot;</span><br><span class="line">&quot;:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;BccRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;BccRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;ToRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;ToRecipients\&quot;:[&#123;\&quot;__type\&quot;:\&quot;EmailAddress:#Exchange\&quot;,\&quot;MailboxType\&quot;:\&quot;OneOff\&quot;,\&quot;RoutingType\&quot;:\&quot;SMTP\&quot;,\&quot;EmailAddress\&quot;:\&quot;test3@emailtest.cn\&quot;,\&quot;Name\&quot;:\&quot;\&quot;&#125;]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsReadReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;IsReadReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsDeliveryReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;IsDeliveryReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Subject\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message&quot;</span><br><span class="line">&quot;:#Exchange\&quot;,\&quot;Subject\&quot;:\&quot;Attchment pert\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Importance\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Importance\&quot;:\&quot;Normal\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Body\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;BodyContentType:#Exchange\&quot;,\&quot;BodyType\&quot;:\&quot;HTML\&quot;,\&quot;Value\&quot;:\&quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv&#x3D;\\\&quot;&quot;</span><br><span class="line">&quot;Content-Type\\\&quot; content&#x3D;\\\&quot;text&#x2F;html; charset&#x3D;UTF-8\\\&quot;&gt;&lt;style type&#x3D;\\\&quot;text&#x2F;css\\\&quot; style&#x3D;\\\&quot;display:none;\\\&quot;&gt;&lt;!-- P &#123;margin-top:0;margin-bottom:0;&#125; --&gt;&lt;&#x2F;style&gt;&lt;&#x2F;head&gt;&lt;body dir&#x3D;\\\&quot;ltr\\\&quot;&gt;&lt;div id&#x3D;\\\&quot;divtagdefaultwrapper\\\&quot; style&#x3D;\\\&quot;font-size:12pt;color:#000000;font-family:Calibri,Helvetica,sans-serif;\\\&quot; dir&#x3D;\\\&quot;ltr\\\&quot;&gt;&lt;p&gt;performance Exchange &lt;br&gt;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;\&quot;,\&quot;DataUriCount\&quot;:0,\&quot;CustomDataUriCount\&quot;:0&#125;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Sensitivity\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Sensitivity\&quot;:\&quot;Normal\&quot;&#125;&#125;],\&quot;ItemId\&quot;:&#123;\&quot;__type\&quot;:\&quot;ItemId:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQBGAAAAAABu95v&#x2F;jzADTIfi8X89MXTNBwCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAACecFqQtFpNQYRSIDhkk5BMAAAAAB+MAAA&#x3D;\&quot;,\&quot;ChangeKey\&quot;:\&quot;CQAAABYAAACecFqQtFpNQYRSIDhkk5BMAAAAACLe\&quot;&#125;&#125;],\&quot;ConflictResolution\&quot;:\&quot;AlwaysOverwrite\&quot;,\&quot;ClientSupportsIrm\&quot;:true,\&quot;&quot;</span><br><span class="line">&quot;SendCalendarInvitationsOrCancellations\&quot;:\&quot;SendToNone\&quot;,\&quot;MessageDisposition\&quot;:\&quot;SaveOnly\&quot;,\&quot;SuppressReadReceipts\&quot;:false,\&quot;ComposeOperation\&quot;:\&quot;newMail\&quot;,\&quot;OutboundCharset\&quot;:\&quot;AutoDetect\&quot;,\&quot;PromoteInlineAttachments\&quot;:false,\&quot;SendOnNotFoundError\&quot;:true&#125;&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_32&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_31&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;UpdateItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_31&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;UpdateItem&amp;ID&#x3D;-31&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t49.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;__type\&quot;:\&quot;UpdateItemJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2015\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;UpdateItemRequest:#Exchange\&quot;,\&quot;ItemChanges\&quot;:[&#123;\&quot;__type\&quot;:\&quot;ItemChange:#Exchange\&quot;,\&quot;Updates\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;DocLinks\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;DocLinks\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;ExtendedPropertyUri:#Exchange\&quot;,\&quot;PropertyId\&quot;:35356,\&quot;DistinguishedPropertySetId\&quot;:\&quot;Sharing\&quot;,\&quot;PropertyType\&quot;:\&quot;CLSID\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;From\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,&quot;</span><br><span class="line">&quot;\&quot;FieldURI\&quot;:\&quot;CcRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;CcRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;BccRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;BccRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;ToRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;ToRecipients\&quot;:[&#123;\&quot;__type\&quot;:\&quot;EmailAddress:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;MailboxType\&quot;:\&quot;OneOff\&quot;,\&quot;RoutingType\&quot;:\&quot;SMTP\&quot;,\&quot;EmailAddress\&quot;:\&quot;test3@emailtest.cn\&quot;,\&quot;Name\&quot;:\&quot;\&quot;&#125;]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsReadReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;IsReadReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsDeliveryReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;IsDeliveryReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Subject\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Subject\&quot;:\&quot;Attchment pert\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Importance\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Importance\&quot;:\&quot;Normal\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;FieldURI\&quot;:\&quot;Body\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;BodyContentType:#Exchange\&quot;,\&quot;BodyType\&quot;:\&quot;HTML\&quot;,\&quot;Value\&quot;:\&quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv&#x3D;\\\&quot;Content-Type\\\&quot; content&#x3D;\\\&quot;text&#x2F;html; charset&#x3D;UTF-8\\\&quot;&gt;&lt;style type&#x3D;\\\&quot;text&#x2F;css\\\&quot; style&#x3D;\\\&quot;display:none;\\\&quot;&gt;&lt;!-- P &#123;margin-top:0;margin-bottom:0;&#125; --&gt;&lt;&#x2F;style&gt;&lt;&#x2F;head&gt;&lt;body dir&#x3D;\\\&quot;ltr\\\&quot;&gt;&lt;div id&#x3D;\\\&quot;divtagdefaultwrapper\\\&quot; style&#x3D;\\\&quot;font-size:12pt;color:#000000;font-family:Calibri,Helvetica,sans-serif;\\\&quot; dir&#x3D;&quot;</span><br><span class="line">&quot;\\\&quot;ltr\\\&quot;&gt;&lt;p&gt;performance Exchange &lt;br&gt;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;\&quot;,\&quot;DataUriCount\&quot;:0,\&quot;CustomDataUriCount\&quot;:0&#125;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Sensitivity\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Sensitivity\&quot;:\&quot;Normal\&quot;&#125;&#125;],\&quot;ItemId\&quot;:&#123;\&quot;__type\&quot;:\&quot;ItemId:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQBGAAAAAABu95v&#x2F;jzADTIfi8X89MXTNBwCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAACecFqQtFpNQYRSIDhkk5BMAAAAAB&quot;</span><br><span class="line">&quot;+MAAA&#x3D;\&quot;,\&quot;ChangeKey\&quot;:\&quot;CQAAABYAAACecFqQtFpNQYRSIDhkk5BMAAAAACLf\&quot;&#125;&#125;],\&quot;ConflictResolution\&quot;:\&quot;AlwaysOverwrite\&quot;,\&quot;ClientSupportsIrm\&quot;:true,\&quot;SendCalendarInvitationsOrCancellations\&quot;:\&quot;SendToNone\&quot;,\&quot;MessageDisposition\&quot;:\&quot;SendAndSaveCopy\&quot;,\&quot;SuppressReadReceipts\&quot;:false,\&quot;ComposeOperation\&quot;:\&quot;newMail\&quot;,\&quot;OutboundCharset\&quot;:\&quot;AutoDetect\&quot;,\&quot;PromoteInlineAttachments\&quot;:false,\&quot;SendOnNotFoundError\&quot;:true&#125;&#125;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.contactmanagement.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.photoupload.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.people.composepersonacard.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.bootcommonstrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.strings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.composepersonacard.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.composepersonacard.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;images&#x2F;0&#x2F;mmsprite1.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;meetingmessage.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.calendar.meetingmessage.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.options.core.models.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.people.webservices.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;microsoft.owa.core.peoplehub.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.peoplehub.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.peoplehub.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.storage.framework.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.storage.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.offline.boot.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.sync.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.moderngroups.shared.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;resources&#x2F;styles&#x2F;0&#x2F;nonboot.mouse.css&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;zh-hans&#x2F;microsoft.exchange.clients.owa2.client.oobestrings.localized.min.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.viewmodels.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.views.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.core.views.mouse.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.application.viewmodels.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">&quot;Url&#x3D;prem&#x2F;15.1.1531.3&#x2F;scripts&#x2F;microsoft.owa.application.views.js&quot;, &quot;Referer&#x3D;&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_end_transaction(&quot;post&quot;,LR_AUTO);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_33&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_32&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;ConnectedAccountsNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_32&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;ConnectedAccountsNotification&amp;ID&#x3D;-32&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t50.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;isOWALogon\&quot;:true&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_34&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_33&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetReminders&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetRemindersJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetRemindersRequest%3A%23Exchange%22%2C%22EndTime%22%3A%222018-12-23T12%3A33%3A56%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_33&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;GetReminders&amp;EP&#x3D;1&amp;ID&#x3D;-33&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t51.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_35&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_34&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22SuiteNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22SuiteNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_34&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;EP&#x3D;1&amp;UA&#x3D;0&amp;ID&#x3D;-34&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t52.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*关联cookie*&#x2F;</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_36&quot;,</span><br><span class="line">&quot;LB&#x3D;Set-Cookie: X-OWA-CANARY&#x3D;&quot;,</span><br><span class="line">&quot;RB&#x3D;;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;*添加请求头*&#x2F;</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_35&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEBAAA%3D%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22RowNotification%22%2C%22FolderId%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEBAAA%3D%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_35&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;service.svc?action&#x3D;SubscribeToNotification&amp;EP&#x3D;1&amp;UA&#x3D;0&amp;ID&#x3D;-35&amp;AC&#x3D;1&quot;, </span><br><span class="line">&quot;Method&#x3D;POST&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t53.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;logoff.owa&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;logoff.owa&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t54.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;logon.aspx_2&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;email.emailtest.cn&#x2F;owa&#x2F;auth&#x2F;logon.aspx?replaceCurrent&#x3D;1&amp;url&#x3D;https%3a%2f%2femail.emailtest.cn%2fowa&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;text&#x2F;html&quot;, </span><br><span class="line">&quot;Referer&#x3D;&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t55.inf&quot;, </span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最终，OWA实现了脚本发邮件，但是并发跑场景时候，问题就来了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X-OWA-Error Microsoft.Exchange.Data.Directory.SystemConfiguration.OverBudgetException...</span><br></pre></td></tr></table></figure><p>然后接口就500了，微软官网看了下，貌似是OWA的问题，用outlook客户端就没这个问题，所以，基本OWA的方式也就是废了，并发根本上不去，20左右就挂了，结果没法出。</p><h3 id="JetStress"><a href="#JetStress" class="headerlink" title="JetStress"></a>JetStress</h3><p>然后又搜了什么exchange的官方压测工具，有两个，一个是Jetstress，另一个是Exchange Load Generator，由于基本没资料，Jetstress还好试一点，走到加载数据库才挂：加载动态链接库失败。。另一个就比较坑，基本是走不下去，第一步就挂了。</p><h3 id="MAPI"><a href="#MAPI" class="headerlink" title="MAPI"></a>MAPI</h3><p>实在没办法，就想到了换协议，在loadrunner中自己写脚本。也是找到了exchange的协议，MAPI，脚本也不难写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Actions()</span><br><span class="line">&#123;</span><br><span class="line">mapi_logon(&quot;Logon&quot;,</span><br><span class="line">&quot;ProfileName&#x3D;John Smith&quot;,</span><br><span class="line">&quot;ProfilePass&#x3D;Tiger&quot;,</span><br><span class="line">LAST);</span><br><span class="line">&#x2F;&#x2F;Send a Sticky Note message</span><br><span class="line">mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">&quot;To&#x3D;user1@techno.merc-int.com&quot;,</span><br><span class="line">&quot;Cc&#x3D;user0002t@techno.merc-int.com&quot;,</span><br><span class="line">&quot;Subject&#x3D;&lt;GROUP&gt;:&lt;VUID&gt; @ &lt;DATE&gt;&quot;,</span><br><span class="line">&quot;Type&#x3D;Ipm.StickyNote&quot;,</span><br><span class="line">&quot;Body&#x3D;Please update your profile today.&quot;,</span><br><span class="line">LAST);</span><br><span class="line">mapi_logout();</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还有其他的例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Send a simple mail message</span><br><span class="line">    mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">            &quot;To&#x3D;user0001t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Subject&#x3D;&lt;GROUP&gt;:&lt;VUID&gt; @ &lt;DATE&gt;&quot;,</span><br><span class="line">            &quot;Body&#x3D;Test Message! Please ignore.&quot;,</span><br><span class="line">            LAST );</span><br><span class="line">            </span><br><span class="line">&#x2F;&#x2F;Send a Sticky Note message</span><br><span class="line">    mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">            &quot;To&#x3D;user1@techno.merc-int.com,user2@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Cc&#x3D;user0002t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Bcc&#x3D;user0003t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Subject&#x3D;&lt;GROUP&gt;:&lt;VUID&gt; @ &lt;DATE&gt;&quot;,</span><br><span class="line">            &quot;Type&#x3D;IPM.StickyNote&quot;,</span><br><span class="line">            &quot;Body&#x3D;Please update your profile today.&quot;,</span><br><span class="line">            LAST );</span><br><span class="line">            </span><br><span class="line">&#x2F;&#x2F;Send mail with Attachments</span><br><span class="line">    mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">            &quot;To&#x3D;user0001t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Subject&#x3D;Attach Test @ &lt;DATE&gt;&quot;,</span><br><span class="line">            &quot;Body&#x3D;Test Message!&quot;,</span><br><span class="line">            &quot;ATTACHMENTS&quot;,</span><br><span class="line">                &quot;File&#x3D;E:\\QA\\for_dcom\\vbj_readme.txt&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">                &quot;File&#x3D;E:\\QA\\for_dcom\\vbj_readme.txt&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">            LAST );</span><br><span class="line">            </span><br><span class="line">&#x2F;&#x2F;Send mail with Attachment within body</span><br><span class="line">    mapi_send_mail(&quot;Mail1&quot;,</span><br><span class="line">        &quot;To&#x3D;user0001t@techno.merc-int.com&quot;,</span><br><span class="line">        &quot;Subject&#x3D;This is a my subject &quot;,</span><br><span class="line">        &quot;Body&#x3D;This is a sample mail. This is the outfile.&quot;,</span><br><span class="line">        &quot;Type&#x3D;IPM.StickyNote&quot;,</span><br><span class="line">        &quot;ATTACHMENTS&quot;,</span><br><span class="line">        &quot;Name&#x3D;AutoExec.bat&quot;, &quot;File&#x3D;c:\\autoexec.bat&quot;, &quot;Position&#x3D;5&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">        &quot;Name&#x3D;Outfile.txt&quot;, &quot;File&#x3D;c:\\tmp\\outfile.txt&quot;, &quot;Position&#x3D;30&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">        LAST );</span><br></pre></td></tr></table></figure><p>脚本是不难，运行脚本坑就来了。</p><h4 id="坑一"><a href="#坑一" class="headerlink" title="坑一"></a>坑一</h4><p>首先，用loadrunner创建脚本时候，默认是:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Actions()</span><br><span class="line">&#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后补全脚本，运行时候，就开始了：<code>Error: C interpreter run time error:  Error -- Unresolved symbol : Action.</code></p><p>这个稍微好解决一点，把<code>Actions()</code>改成<code>Action()</code>就没这个报错了</p><h4 id="坑二"><a href="#坑二" class="headerlink" title="坑二"></a>坑二</h4><p>上面一步改完之后运行脚本，直接弹出了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">没有默认的邮件客户端，或者当前的邮件客户端无法实现该邮件请求。请运行Microsoft Outlook并将其设为默认邮件客户端</span><br></pre></td></tr></table></figure><p>这么个神坑问题。然后，第一步，装了个outlook，然后修改成默认邮件客户端，运行，继续报错；然后修改注册表，把outlook的内容删掉，运行安装程序，点修复，继续报错；然后卸载outlook重装，继续报错。。。</p><p>基本是奔溃状态，翻墙，各种搜<code>MAPI loadrunner</code>，<code>MAPI there is no default mail client</code>… stackoverfolw都翻烂了，绝望。。。最后是在某个名字都没记住的网站上，找到一个关于无法打卡.msg文件的回答，才试试看的，回答是建议把outlook换成32位版本，不能用64位，不然第三方调不通。。。</p><blockquote><p><a href="https://support.microsoft.com/zh-cn/help/3189902/can-t-preview-msg-files-in-windows-file-explorer-with-64-bit-outlook">微软官方support回答</a></p></blockquote><p>最终，重装了整个office到32位版本，这个报错解决！</p><h4 id="坑三"><a href="#坑三" class="headerlink" title="坑三"></a>坑三</h4><p><code>Fail to logon for test@test.cn （rc=3）</code>报了个这个错，这个错看起来也就是登录失败，登录信息无效。。<br>然后就是各种试密码，各种试用户名/密码组合，域账号各种试，发现都没用。。</p><p>然后就想着，直接删账号重登outlook走一遍得了，这次outlook的账号配置文件，学乖了，名字用了test1，之前随便输了个，后面的账号和用户名密码也是很正常的，这次，登上了！！！脚本正常了！！！具体解决的原理实在没精力去研究了，只是将邮件的配置文件的名称和之后登录的用户名统一了，配置文件位置：<br><code>控制面板-用户账户-邮件-配置文件</code></p><h4 id="坑四"><a href="#坑四" class="headerlink" title="坑四"></a>坑四</h4><p>这个，不太知道怎么解决了，每次用脚本发邮件，用<code>mapi_send()</code>函数时候，系统就会弹窗</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有一个程序正试图访问存储在outlook中的电子邮件地址信息。如果。。。</span><br></pre></td></tr></table></figure><p>按照帮助里面说的，已经将信任设置里面设成了不通知，还是每次都通知，也不知道解决了，难道是我的outlook没激活？不让我保存设置?搞不懂，反正，这个exchange的性能测试，是头非常疼</p><p>完！</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> loadrunner </tag>
            
            <tag> exchange </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux小工具推荐</title>
      <link href="2018/12/05/Linux%E5%B0%8F%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"/>
      <url>2018/12/05/Linux%E5%B0%8F%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/</url>
      
        <content type="html"><![CDATA[<p>Linux实用小工具推荐</p><p>偶然发现几个挺有意思的小工具，推荐下</p><a id="more"></a><h3 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h3><p>首先是top的替代品，个人感觉比top好用，界面更好看，支持键盘方向键左右移动，支持一键增减任务优先级（nice%）</p><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install htop</span><br></pre></td></tr></table></figure><p>和top一样用，直接<code>htop</code>即可</p><h3 id="mycli"><a href="#mycli" class="headerlink" title="mycli"></a>mycli</h3><p>一个可以在控制台里面进行SQL联想的客户端工具，界面也更好看，比普通在控制台敲SQL爽多了</p><p>效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql root@localhost:accrual_minth&gt; show databases; </span><br><span class="line">                                            databases         </span><br><span class="line">                                            create database   </span><br><span class="line">                                            procedure status  </span><br></pre></td></tr></table></figure><p>安装：<br>首先是服务器上要有python，如果是python3更好，装了pip最好；python2.7也行，下面演示python2.7安装<br><strong>安装gcc，更新yum</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update &amp;&amp; yum -y install gcc </span><br></pre></td></tr></table></figure><p><strong>安装pip</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py</span><br><span class="line"></span><br><span class="line">python get-pip.py &amp;&amp; yum -y install python-devel</span><br></pre></td></tr></table></figure><p><strong>安装mycli</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mycli</span><br></pre></td></tr></table></figure><p>可能会有报错：<br><code>Cannot uninstall &#39;configobj&#39;. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall</code></p><p>那就把安装命令替换成：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --ignore-installed mycli</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mycli -uroot</span><br></pre></td></tr></table></figure><h3 id="thefuck"><a href="#thefuck" class="headerlink" title="thefuck"></a>thefuck</h3><p>这个工具，个人觉得是最有意思，简直就是在抒发敲命令的人的心声。想一下，当你敲一个命令，然后提示你<code>xxx command not found</code>是不是很想骂街，然后，国外的某团队就做了个这玩意，当你敲错命令时候，敲个<code>fuck</code>自动帮你纠正命令</p><p>效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yun install aaa</span><br><span class="line">-bash: yun: command not found</span><br><span class="line">[root@localhost ~]# fuck</span><br><span class="line">​​​​​​​​​​yum install aaa [enter&#x2F;↑&#x2F;↓&#x2F;ctrl+c]</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.aliyun.com</span><br><span class="line"> * epel: mirrors.tuna.tsinghua.edu.cn</span><br><span class="line"> * extras: mirrors.aliyun.com</span><br><span class="line"> * updates: mirrors.aliyun.com</span><br></pre></td></tr></table></figure><p>上述实例，原来敲的是<code>yun install</code>很明显是手残敲错了，然后敲个<code>fuck</code>，自动纠正成了<code>yum install</code>直接回车就可以执行了</p><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install thefuck</span><br></pre></td></tr></table></figure><p>配置：<br><strong>编辑bashrc配置文件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line"></span><br><span class="line">vim .bashrc</span><br><span class="line"></span><br><span class="line">#在文件尾加入一行给thefuck重命名为fuck</span><br><span class="line">eval &quot;$(thefuck --alias fuck)&quot;</span><br></pre></td></tr></table></figure><p>隐藏文件，可以<code>ls -al</code>看见</p><p><strong>文件生效</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure><p>完成~</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx简单配置</title>
      <link href="2018/11/20/Nginx%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE/"/>
      <url>2018/11/20/Nginx%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>nginx简单配置及简单说明</p><a id="more"></a><p>nginx安装就不说了，直接上配置文件，改改就可以了：</p><h3 id="nginx-conf"><a href="#nginx-conf" class="headerlink" title="nginx.conf"></a>nginx.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  8;</span><br><span class="line">worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;</span><br><span class="line">worker_rlimit_nofile 2000000;</span><br><span class="line">error_log   &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log;</span><br><span class="line">#error_log  logs&#x2F;error.log  notice;</span><br><span class="line">#error_log  logs&#x2F;error.log  info;</span><br><span class="line"></span><br><span class="line">#pid        logs&#x2F;nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  2000000;</span><br><span class="line">    use epoll;</span><br><span class="line">    multi_accept on;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application&#x2F;octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span><br><span class="line">                      &#39;$http_x_forwarded_for &#39;                       </span><br><span class="line">                      &#39;$upstream_addr &#39;                        </span><br><span class="line">                      &#39;ups_resp_time: $upstream_response_time &#39;                        </span><br><span class="line">                      &#39;request_time: $request_time&#39;</span><br><span class="line">                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span><br><span class="line">                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span><br><span class="line">    access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log  main;</span><br><span class="line">    client_max_body_size 5000m;</span><br><span class="line">    client_body_buffer_size 512k;</span><br><span class="line">    proxy_connect_timeout 3000;</span><br><span class="line">    proxy_send_timeout 3000;</span><br><span class="line">    proxy_read_timeout 3000;</span><br><span class="line">    proxy_buffer_size 512k;</span><br><span class="line">    proxy_buffers 8 512k;</span><br><span class="line">    proxy_busy_buffers_size 512k;</span><br><span class="line">    proxy_temp_file_write_size 512k;</span><br><span class="line">    proxy_next_upstream error timeout invalid_header http_500 http_503 http_404;</span><br><span class="line">    proxy_max_temp_file_size 128m;</span><br><span class="line">    fastcgi_read_timeout 3000;</span><br><span class="line">    fastcgi_buffers 8 5125;</span><br><span class="line">    send_timeout 3000;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_disable none;</span><br><span class="line">    keepalive_timeout   120;</span><br><span class="line">    keepalive_requests  65535;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line">    </span><br><span class="line">    charset             utf-8;</span><br><span class="line">    server_names_hash_bucket_size 128;</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line">    large_client_header_buffers 4 32k;</span><br><span class="line">    reset_timedout_connection on; </span><br><span class="line"></span><br><span class="line">    gzip  on;</span><br><span class="line">    gzip_min_length 1k;</span><br><span class="line">    gzip_buffers 4 16k;</span><br><span class="line">    gzip_comp_level 2;</span><br><span class="line">    gzip_types text&#x2F;plain application&#x2F;x-javascript text&#x2F;css application&#x2F;xml text&#x2F;javascript application&#x2F;x-httpd-php image&#x2F;jpeg image&#x2F;gif image&#x2F;png application&#x2F;json;</span><br><span class="line">    gzip_vary off;</span><br><span class="line">    gzip_disable &quot;MSIE [1-6]\.&quot;;  </span><br><span class="line">    </span><br><span class="line">    include       conf.d&#x2F;*.conf;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="APP-conf"><a href="#APP-conf" class="headerlink" title="APP.conf"></a>APP.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">upstream apitest&#123;</span><br><span class="line">       # ip_hash;</span><br><span class="line">#    least_conn;</span><br><span class="line">        server 192.168.0.1:8080;</span><br><span class="line">        server 192.168.0.2:8080;</span><br><span class="line">        server 192.168.0.3:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs&#x2F;host.access.log  main;</span><br><span class="line"></span><br><span class="line">        #location &#x2F; &#123;</span><br><span class="line">        #    root   html;</span><br><span class="line">        #    index  index.html index.htm;</span><br><span class="line">        #     proxy_pass http:&#x2F;&#x2F;apitest;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">location ^~ &#x2F;api&#x2F; &#123;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">           proxy_set_header  Connection  &quot;&quot;;</span><br><span class="line">            #proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            #proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">            #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http:&#x2F;&#x2F;apitest&#x2F;api&#x2F;;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ^~ &#x2F;auth&#x2F; &#123;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_set_header  Connection  &quot;&quot;;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http:&#x2F;&#x2F;apitest&#x2F;auth&#x2F;;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              &#x2F;404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page &#x2F;50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  &#x2F;50x.html;</span><br><span class="line">        location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http:&#x2F;&#x2F;127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  &#x2F;scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&#39;s document root</span><br><span class="line">        # concurs with nginx&#39;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ &#x2F;\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h3><h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><p>配置负载均衡，只要就是使用了节点<code>upstream</code>，参考格式如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#配置多台服务器（这里只在一台服务器上的不同端口）</span><br><span class="line"> upstream mysvr &#123;   </span><br><span class="line">　　　　#权重比设置为1  ： 3  意思为  用户请求四次服务器，平均访问8082端口3次，8081端口一次，以此达到服务器均衡的作用（高并发）  </span><br><span class="line">      server 127.0.0.1:8081 weight&#x3D;1;</span><br><span class="line">      server 127.0.0.1:8082 weight&#x3D;3; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h4><p>反向代理只要就是用来将请求发送给其他主机的ap服务器，简单来说就是，nginx收到请求后，将请求转发给对应的ap服务器。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;apitest&#x2F; &#123;</span><br><span class="line">            proxy_pass http:&#x2F;&#x2F;192.168.0.1:8080;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>当请求收到以<code>apitest/</code>开头的请求，就会转发到<code>http://192.168.0.1:8080</code>；所以如果有个请求是<code>http://192.168.3.2/apitest/getusername</code>，通过nginx就会转到<code>http://192.168.0.1:8080/apitest/getusername</code>达到转发的效果，配合之前的负载均衡，就可以实现请求一个ip的接口，转到<code>upstream</code>中定义的多个ip的接口。</p><h5 id="proxy-pass末尾“-”问题"><a href="#proxy-pass末尾“-”问题" class="headerlink" title="proxy_pass末尾“/”问题"></a>proxy_pass末尾“/”问题</h5><p>在nginx配置proxy_pass代理转发时，如果proxy_pass后面的URL加了<code>/</code>，表示绝对根路径；如果没有<code>/</code>，表示相对路径，把匹配的路径部分也代理走。</p><p>假设都访问<em><a href="http://192.168.2.1:8082/apitest/login.html">http://192.168.2.1:8082/apitest/login.html</a></em></p><p><em>第一种</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;apitest&#x2F; &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1&#x2F;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代理到URL: <code>http://127.0.0.1/apitest/login.html</code></p><p><em>第二种</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;apitest&#x2F; &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二种相对于第一种，proxy_pass后面的url少了<code>/</code>，代理到URL:<code>http://127.0.0.1/apitest/login.html</code></p><p><em>第三种</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;apitest&#x2F; &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1&#x2F;aaa&#x2F;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三种相对于第一种，proxy_pass后面的url加了一层<code>aaa/</code>，代理到URL:<code>http://127.0.0.1/aaa/login.html</code></p><p><em>第四种</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;apitest&#x2F; &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1&#x2F;aaa;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第四种相对于第一种，proxy_pass后面的url加了一层<code>aaa</code>，代理到URL:<code>http://127.0.0.1/aaalogin.html</code></p><p>完~</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次精疲力尽的压测</title>
      <link href="2018/11/19/%E4%B8%80%E6%AC%A1%E7%B2%BE%E7%96%B2%E5%8A%9B%E5%B0%BD%E7%9A%84%E5%8E%8B%E6%B5%8B/"/>
      <url>2018/11/19/%E4%B8%80%E6%AC%A1%E7%B2%BE%E7%96%B2%E5%8A%9B%E5%B0%BD%E7%9A%84%E5%8E%8B%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<p>记一次精疲力尽的无语压测经历</p><a id="more"></a><p>平台改版，需要新的登录，平台组挑选了red hat开源的keycloak，一个针对现代应用程序和服务的开源身份和访问管理解决方案。</p><p>压测主要是进行了接口的压测。<br>正常流程，脚本编写，执行，监控服务器资源，报告。</p><p>但是，这个神奇的接口，每次都是线程到300时候，有一瞬间QPS到达峰值，然后瞬间下降，之后持续一个很稳定的值一直下去，并且伴随着一堆的<code>socket timeout</code>报错。</p><p>于是乎，正常的，重测，看CPU<br><code>top</code>，<code>vmstat</code>，<code>uptime</code>没啥用，CPU根本没什么反应，三台AP都是50%左右</p><p>看内存<br><code>free -m</code>也没啥用，一堆限制内存</p><p>看磁盘<br><code>iostat -dxk 2</code>没怎么写。。</p><p>看网络：<br>看连接<br><code>netstat -an | grep 端口 | wc -l</code>貌似也正常的很。。</p><p>没办法，继续看内存，定位JVM问题：<br><code>jstat PID &gt; 1.log</code>导出dump文件，看一下，有很多block的，暂时不用优化<br><code>jmap -dump:live,format=b,file=dump.hprof PID</code>生成堆栈的完整文件，没啥用。。。<br><code>jmap -heap PID</code>看当前堆内存使用情况，GC正常，没用。。</p><p>然后开始怀疑是自己压测工具的问题，做了jmeter分布式，每台压力机起100个线程，也没什么用。</p><p>最后快绝望了，抱着试试看的心态，切到内网地址，那个到峰值之后降下来的情况终于没了（之所以开始不用内网地址测试，是因为之后上正式环境，提供出去的是外网地址，所以测试中，肯定是用外网地址来模拟）。找到了是内外网的区别之后，找运维同事看了网络的区别，得出的结果是外网地址限制了流量。。。阿里云ECS服务器，限制了外网流量是100Mb/s，我们的接口，一个请求大概数据包是2k，并发情况下，流量超出了限制，直接被阿里云服务器限制了访问。。。服气！</p><p>所以，压测，不止要关注服务器自己的CPU，内存，磁盘，网络连接，还要看服务器提供商的外部限制。。。</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVM内存性能问题定位</title>
      <link href="2018/11/02/JVM%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/"/>
      <url>2018/11/02/JVM%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<p>JVM内存性能定位</p><p>有点乱的一篇记录，想到哪敲到哪了。。。</p><a id="more"></a><h3 id="堆和栈"><a href="#堆和栈" class="headerlink" title="堆和栈"></a>堆和栈</h3><p>首先，栈（stack）和堆（heap）都是Java用来在RAM中存放数据的地方。根据 JVM 规范，JVM 内存共分为java栈（虚拟机栈VM Stack）、堆（Heap）、方法区（Method Area）、程序计数器（Program Counter Register）、本地方法栈（Native Method Stack）五个部分。</p><p><strong>堆</strong>：用来存储程序中的一些对象，比如你用new关键字创建的对象，它就会被存储在堆内存中，但是这个对象在堆内存中的首地址会存储在栈中</p><p><strong>栈</strong>：在jvm中栈用来存储一些对象的引用、局部变量以及计算过程的中间数据，在方法退出后那么这些变量也会被销毁。它的存储比堆快得多，只比CPU里的寄存器慢</p><p>栈内存在JVM中默认是1M，可以通过参数进行设置：<code>-Xss</code><br>最小堆内存在JVM中默认物理内存的64分之1，最大堆内存在JVM中默认物理内存4分之一，且建议最大堆内存不大于4G，并且设置-Xms=-Xmx避免每次GC后，调整堆的大小，减少系统内存分配开销:<code>-Xms</code>、<code>-Xmx</code>.</p><h3 id="JVM堆内存与GC"><a href="#JVM堆内存与GC" class="headerlink" title="JVM堆内存与GC"></a>JVM堆内存与GC</h3><p>在JVM里的内存空间，从大的层面划分，主要有新生代空间（Young）和老年代空间（Old），其中Young空间，又有1个Egen区，和2个Survivor区</p><ol><li><p>Eden区域是用来存放使用new或者newInstance等方式创建的对象，默认都是存放在Eden区，除非这个对象太大，或者超过了设定的阈值-XX:PretenureSizeThresold,这样的对象会被直接分配到Old区域。</p></li><li><p>2个Survivor（幸存）区，一般称S0，S1，理论上他们是一样大的，解释一下，他们是如何工作的：<br>在不断创建对象的过程中，Eden区会满，这时候会开始做Young G也叫Minor GC，而Young空间的第一次GC就是找出Eden区中，幸存活着的对象，然后将这些对象，放到S0，或S1区中的其中一个， 假设第一次选择了S0，它会逐步将活着的对象拷贝到S0区域，但是如果S0区域满了，剩下活着的对象只能放old区域了，接下来要做的是，将Eden区域 清空，此时时候S1区域也是空的。</p></li></ol><p>当第二次Eden区域满的时候，就将Eden区域中活着的对象+S0区域中活着的对象，迁移到S1中，如果S1放不下，就会将剩下的部门，放到Old区域中，只是这次对象来源区域增加了S0，最后会将Eden区+S0区域，清空。</p><p>第三次和第四次依次类推，始终保证S0和S1有一个是空的，用来存储临时对象，用于交换空间的目的，反反复复多次没有被淘汰的对象，将会放入old区域中，默认是15次。具体的交换过程就和上图中的信息相似。</p><h4 id="S0和S1一般多大，靠什么参数来控制，有什么变化？"><a href="#S0和S1一般多大，靠什么参数来控制，有什么变化？" class="headerlink" title="S0和S1一般多大，靠什么参数来控制，有什么变化？"></a>S0和S1一般多大，靠什么参数来控制，有什么变化？</h4><p>一般来说很小，我们大概知道它与Young差不多相差一倍的比例，设置的的参数主要有两个：<br>-XX:SurvivorRatio=8<br>-XX:InitialSurvivorRatio=8 </p><p>第一个参数是Eden和Survivor区域比重，注意是一个Survivor的的大小，如果将其设置为8，则说明Eden区是一个Survivor区的8倍，换句话说S0或S1空间是整个Young空间的1/10，剩余的80%由Eden区域来使用。 </p><p>第二个参数是Young/S0的比值，当其设置为8时，表示s0或s1占整个Young空间的12.5%。</p><h4 id="一个对象每次Minor-Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor-GC多少次后，会进入Old区域呢？"><a href="#一个对象每次Minor-Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor-GC多少次后，会进入Old区域呢？" class="headerlink" title="一个对象每次Minor Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor GC多少次后，会进入Old区域呢？"></a>一个对象每次Minor Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor GC多少次后，会进入Old区域呢？</h4><p>默认是15次，参数设置-XX:MaxTenuringThreshold=15,计数器会在对象的头部记录它交换的次数 </p><h4 id="FULL-GC"><a href="#FULL-GC" class="headerlink" title="FULL GC"></a>FULL GC</h4><p>发生FULL GC的时候，意味着JVM会安全的暂停所有正在执行的线程（Stop The World），来回收内存空间，在这个时间段内，所有除了回收垃圾的线程外，其他有关JAVA的程序，代码都会静止，反映到系统上，就会出现系统响应大幅度变慢，卡机等状态。 </p><h3 id="内存分析"><a href="#内存分析" class="headerlink" title="内存分析"></a>内存分析</h3><h4 id="线程阻塞"><a href="#线程阻塞" class="headerlink" title="线程阻塞"></a>线程阻塞</h4><p>关于线程阻塞，在之前定位linux最耗CPU时已经有提过：<a href="http://tokyle.com/2018/10/17/Linux%E5%AE%9A%E4%BD%8D%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B/#more">Jstack定位线程阻塞</a></p><p>这边提供一个分析工具，当使用<code>jstack pid &gt; 1.log</code>生成堆栈日志之后，使用<code>tda</code>工具进行分析</p><blockquote><p><a href="https://pan.baidu.com/s/19Gv_rTBdGrFD4Tm6F9IY5w">tda度娘盘地址（提取码：fut9）</a></p></blockquote><h4 id="jstat查看gc"><a href="#jstat查看gc" class="headerlink" title="jstat查看gc"></a>jstat查看gc</h4><p><code>jstat -gccause pid 5000</code>，每隔5s刷新一次，查看GC信息，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@iZuf61um4k0dww403xbmgpZ ~]# jstat -gccause 1270 5000</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                 </span><br><span class="line">  0.00   0.00  28.12  99.96  87.59  80.39    610   21.693    31   61.932   83.625 G1 Evacuation Pause  No GC               </span><br><span class="line">  0.00   0.00  28.12  99.96  87.59  80.39    610   21.693    31   61.932   83.625 G1 Evacuation Pause  No GC</span><br></pre></td></tr></table></figure><p>其中<code>FGC</code>代表程序启动至今的FULL GC次数</p><h4 id="jmap分析GC"><a href="#jmap分析GC" class="headerlink" title="jmap分析GC"></a>jmap分析GC</h4><p><code>jmap -heap PID</code>可以直接看到当前堆内存信息，包含各区域使用率</p><p><code>jmap -histo:live PID | head -10</code>打印当前java堆活跃的各个对象的数量、大小</p><p><code>jmap -dump:live,format=b,file=dump.hprof PID</code>生成dump文件（堆栈）<br>生成的dump文件（dump.hprof），可以用<strong>MAT</strong>（<code>MemoryAnalyzer</code>）工具进行堆栈分析</p><blockquote><p><a href="https://pan.baidu.com/s/1mF70g1IyS8wYIuXaNx7vaQ">MAT度娘盘地址（提取码：jidc）</a></p></blockquote><h4 id="打印GC日志"><a href="#打印GC日志" class="headerlink" title="打印GC日志"></a>打印GC日志</h4><p>最后，可以通过启动应用时加上GC打印的设置，直接将GC打印到文件中进行分析：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xloggc:&#x2F;root&#x2F;log&#x2F;gclogs</span><br></pre></td></tr></table></figure><p>分析用工具：<strong>gcviewer-1.36-SNAPSHOT</strong></p><blockquote><p><a href="https://pan.baidu.com/s/10JMnrTqw-82TuTw-__677w">gcviewer度娘盘地址（提取码：cvhs）</a><br>工具启动方式：<code>java -jar gcviewer-1.36-SNAPSHOT.jar</code>(文件目录下执行)</p></blockquote><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://blog.csdn.net/xingkongtianma01/article/details/80689928">JDK8 JVM性能优化</a></p><h4 id="工具使用教程"><a href="#工具使用教程" class="headerlink" title="工具使用教程"></a>工具使用教程</h4><p><a href="https://blog.csdn.net/u011649536/article/details/50817454">利用mat定位内存泄漏原因</a><br><a href="https://blog.csdn.net/nokiaisacat/article/details/52123904">java GC日志查看gcviewer</a><br><a href="https://blog.csdn.net/everlasting_188/article/details/51943095">TDA进行java线程dump分析</a><br><a href="http://www.cnblogs.com/nexiyi/p/java_thread_jstack.html">java线程Dump分析工具–jstack</a><br><a href="https://www.cnblogs.com/qlqwjy/p/7929414.html">Java GC日志查看</a></p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux定位最耗CPU的线程</title>
      <link href="2018/10/17/Linux%E5%AE%9A%E4%BD%8D%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B/"/>
      <url>2018/10/17/Linux%E5%AE%9A%E4%BD%8D%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>定位Linux耗CPU较高的线程</p><a id="more"></a><p>压测过程，经常遇见服务器CPU非常高，只是单纯的top，也只能看到是哪个进程比较耗CPU，不能进一步定位具体的线程。</p><h3 id="Linux定位CPU瓶颈几种方式"><a href="#Linux定位CPU瓶颈几种方式" class="headerlink" title="Linux定位CPU瓶颈几种方式"></a>Linux定位CPU瓶颈几种方式</h3><h4 id="系统查看"><a href="#系统查看" class="headerlink" title="系统查看"></a>系统查看</h4><h5 id="查看物理CPU个数："><a href="#查看物理CPU个数：" class="headerlink" title="查看物理CPU个数："></a>查看物理CPU个数：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;cpuinfo |grep &quot;physical id&quot;|sort|uniq|wc -l</span><br></pre></td></tr></table></figure><h5 id="查看每个物理CPU中的core个数"><a href="#查看每个物理CPU中的core个数" class="headerlink" title="查看每个物理CPU中的core个数:"></a>查看每个物理CPU中的core个数:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;cpuinfo |grep &quot;cpu cores&quot;|wc -l</span><br></pre></td></tr></table></figure><h5 id="逻辑CPU个数"><a href="#逻辑CPU个数" class="headerlink" title="逻辑CPU个数"></a>逻辑CPU个数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;cpuinfo |grep &quot;procetestr&quot;|wc -l</span><br></pre></td></tr></table></figure><p>物理cpu个数*核数=逻辑cpu个数（不支持超线程技术的情况下）</p><h4 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6a1s9ws9726xatwn47z tools]# uptime</span><br><span class="line">10:15:33 up 54 days, 18:01,  1 user,  load average: 1.02, 0.56, 0.30</span><br></pre></td></tr></table></figure><ul><li>load average三值大小一般不能大于系统CPU的个数。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统有8个CPU,如load average三值长期大于8，说明CPU很繁忙，负载很高，可能会影响系统性能。</span><br></pre></td></tr></table></figure></li><li>但偶尔大于8，一般不会影响系统性能。</li><li>如load average输出值小于CPU个数，则表示CPU有空闲时间片，比如本例中的输出，CPU是非常空闲的</li></ul><h4 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# vmstat 2 3</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 3  0      0 12267888 166640 1863724    0    0     1    41   72   88  3  1 96  0  0</span><br><span class="line"> 2  0      0 12267872 166640 1863724    0    0     0     0 66000 163918 15 17 68  0  0</span><br><span class="line"> 2  0      0 12267872 166640 1863724    0    0     0   158 18689 43630 40  5 55  0  0</span><br></pre></td></tr></table></figure><p>r–运行和等待cpu时间片的进程数，这个值如果长期大于系统CPU的个数，说明CPU不足，需要增加CPU<br>b–在等待资源的进程数，比如正在等待I/O、或者内存交换等。<br>CPU<br>us<br>用户进程消耗的CPU时间百分比<br>us的值比较高时，说明用户进程消耗的cpu时间多，但是如果长期大于50%，就需要考虑优化程序或算法。</p><p>sy<br>内核进程消耗的CPU时间百分比，Sy的值较高时，说明内核消耗的CPU资源很多<br>根据经验，us+sy的参考值为80%，如果大于80%可能存在CPU资源不足。</p><h4 id="sar"><a href="#sar" class="headerlink" title="sar"></a>sar</h4><p>sar对系统每个方面进行单独统计，但会增加系统开销，不过开销可以评估，对系统的统计结果不会有很大影响</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# sar -u 3 5</span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izuf6b0a7e5agj4lm7aj3mz) 08&#x2F;29&#x2F;2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">03:05:20 PM     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">03:05:23 PM     all      0.08      0.00      0.08      0.08      0.00     99.75</span><br><span class="line">03:05:26 PM     all      0.08      0.00      0.00      0.00      0.00     99.92</span><br><span class="line">03:05:29 PM     all      0.08      0.00      0.08      0.00      0.00     99.83</span><br><span class="line">03:05:32 PM     all      0.33      0.00      0.08      0.00      0.00     99.58</span><br><span class="line">03:05:35 PM     all      0.08      0.00      0.08      0.00      0.00     99.83</span><br><span class="line">Average:        all      0.13      0.00      0.07      0.02      0.00     99.78</span><br></pre></td></tr></table></figure><p>解释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%user列显示了用户进程消耗的CPU 时间百分比。</span><br><span class="line">%nice列显示了运行正常进程所消耗的CPU 时间百分比。</span><br><span class="line">%system列显示了系统进程消耗的CPU时间百分比。</span><br><span class="line">%iowait列显示了IO等待所占用的CPU时间百分比</span><br><span class="line">%steal列显示了在内存相对紧张的环境下pagein强制对不同的页面进行的steal操作 。</span><br><span class="line">%idle列显示了CPU处在空闲状态的时间百分比。</span><br></pre></td></tr></table></figure><h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">top - 10:20:34 up 54 days, 18:06,  1 user,  load average: 0.14, 0.30, 0.26</span><br><span class="line">Tasks: 101 total,   1 running, 100 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  1.3 us,  0.5 sy,  0.0 ni, 98.2 id,  0.1 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem : 16267724 total,  3338792 free,  6439248 used,  6489684 buff&#x2F;cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  9492508 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br></pre></td></tr></table></figure><p>第一行为当前时间，系统运行时间，当前登录用户数，系统1/5/15分钟平均负载</p><p>第二、三行为进程和CPU的信息。当有多个CPU时，这些内容可能会超过两行。内容如下：<br>Tasks:</p><p>total   进程总数<br>running   正在运行的进程数<br>sleeping   睡眠的进程数<br>stopped   停止的进程数<br>zombie   僵尸进程数 </p><p>Cpu(s): </p><p>us   用户空间占用CPU百分比<br>sy   内核空间占用CPU百分比<br>ni   用户进程空间内改变过优先级的进程占用CPU百分比<br>id   空闲CPU百分比<br>wa   等待输入输出的CPU时间百分比<br>hi   硬中断（Hardware IRQ）占用CPU的百分比<br>si   软中断（Software Interrupts）占用CPU的百分比</p><p>st   (Steal time) 是当 hypervisor 服务另一个虚拟处理器的时候，虚拟 CPU 等待实际 CPU 的时间的百分比。</p><p>最后两行为内存信息。内容如下：<br>Mem: </p><p>total   物理内存总量<br>used   使用的物理内存总量<br>free   空闲内存总量<br>buffers   用作内核缓存的内存量 </p><p>Swap: </p><p>total   交换区总量<br>used   使用的交换区总量<br>free   空闲交换区总量<br>cached   缓冲的交换区总量。<br>内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，<br>该数值即为这些内容已存在于内存中的交换区的大小。<br>相应的内存再次被换出时可不必再对交换区写入。 </p><p>进程信息区<br>统计信息区域的下方显示了各个进程的详细信息。首先来认识一下各列的含义。<br>序号 列名 含义<br>PID 进程id<br>PPID 父进程id<br>RUSER Real user name<br>d UID 进程所有者的用户id<br>e USER 进程所有者的用户名<br>f GROUP 进程所有者的组名<br>g TTY 启动进程的终端名。不是从终端启动的进程则显示为 ?<br>h PR 优先级<br>i NI nice值。负值表示高优先级，正值表示低优先级<br>j P 最后使用的CPU，仅在多CPU环境下有意义<br>k %CPU 上次更新到现在的CPU时间占用百分比<br>l TIME 进程使用的CPU时间总计，单位秒<br>m TIME+ 进程使用的CPU时间总计，单位1/100秒<br>n %MEM 进程使用的物理内存百分比<br>o VIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES<br>p SWAP 进程使用的虚拟内存中，被换出的大小，单位kb。<br>q RES 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA<br>r CODE 可执行代码占用的物理内存大小，单位kb<br>s DATA 可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb<br>t SHR 共享内存大小，单位kb<br>u nFLT 页面错误次数<br>v nDRT 最后一次写入到现在，被修改过的页面数。<br>w S 进程状态。<br>D=不可中断的睡眠状态<br>R=运行<br>S=睡眠<br>T=跟踪/停止<br>Z=僵尸进程<br>x COMMAND 命令名/命令行<br>y WCHAN 若该进程在睡眠，则显示睡眠中的系统函数名<br>z Flags 任务标志，参考 sched.h<br>默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND 列。可以通过下面的快捷键来更改显示内容。<br>更改显示内容<br>通过 f 键可以选择显示的内容。按 f 键之后会显示列的列表，按 a-z 即可显示或隐藏对应的列，最后按回车键确定。<br>按 o 键可以改变列的显示顺序。按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z 可以将相应的列向左移动。最后按回车键确定。<br>按大写的 F 或 O 键，然后按 a-z 可以将进程按照相应的列进行排序。而大写的 R 键可以将当前的排序倒转。</p><h3 id="定位具体线程"><a href="#定位具体线程" class="headerlink" title="定位具体线程"></a>定位具体线程</h3><h4 id="top-c"><a href="#top-c" class="headerlink" title="top -c"></a>top -c</h4><p>通过<code>top -c</code>获得当前系统资源总览，键盘输入<code>P</code>(大写)，根据对CPU消耗倒序排列，获得最耗CPU的进程PID</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Tasks: 122 total,   1 running, 121 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s): 90.3 us,  1.6 sy,  0.0 ni,  6.6 id,  0.0 wa,  0.0 hi,  1.5 si,  0.0 st</span><br><span class="line">KiB Mem : 16267200 total,  7578856 free,  6915592 used,  1772752 buff&#x2F;cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  9038816 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                                              </span><br><span class="line"> 4209 testadmin  20   0 15.470g 5.913g  23928 S 745.5 38.1 209:33.97 &#x2F;home&#x2F;testadmin&#x2F;jdk1.8.0_191&#x2F;bin&#x2F;java -D[Server:server-one] -D[pcid:499421770] -Xms7168m -Xmx13312m -server -XX:Metas+</span><br><span class="line">    9 root      20   0       0      0      0 S   0.3  0.0   0:08.16 [rcu_sched]                                                                                                          </span><br><span class="line">   18 root      20   0       0      0      0 S   0.3  0.0   0:00.06 [ksoftirqd&#x2F;2]                                                                                                        </span><br><span class="line"> 1264 root      20   0 2517268  69256  10948 S   0.3  0.4   4:53.38 &#x2F;usr&#x2F;local&#x2F;cloudmonitor&#x2F;jre&#x2F;bin&#x2F;java -Djava.compiler&#x3D;none -XX:-UseGCOverheadLimit -XX:NewRatio&#x3D;1 -XX:SurvivorRatio&#x3D;8+</span><br><span class="line">    1 root      20   0   43660   4076   2492 S   0.0  0.0   0:01.79 &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;systemd --switched-root --system --deserialize 21</span><br></pre></td></tr></table></figure><p>以上例子，最耗CPU的进程PID为<code>4209</code></p><h4 id="top-Hp-PID"><a href="#top-Hp-PID" class="headerlink" title="top -Hp PID"></a>top -Hp PID</h4><p><code>top -Hp PID</code>获得该PID的线程列表，通过大写P，倒序排列，获取最耗CPU的线程PID：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">%Cpu(s): 91.3 us,  1.9 sy,  0.0 ni,  5.5 id,  0.0 wa,  0.0 hi,  1.4 si,  0.0 st</span><br><span class="line">KiB Mem : 16267200 total,  7266940 free,  7226952 used,  1773308 buff&#x2F;cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  8727236 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                               </span><br><span class="line">10185 testadmin  20   0 15.470g 6.208g  23928 S  8.2 40.0   0:12.15 java                                                                                                                  </span><br><span class="line">10148 testadmin  20   0 15.470g 6.208g  23928 S  6.8 40.0   0:12.21 java                                                                                                                  </span><br><span class="line">10149 testadmin  20   0 15.470g 6.208g  23928 R  6.8 40.0   0:12.18 java   </span><br></pre></td></tr></table></figure><p>例如上述例子，获得最耗CPU的线程PID为<code>10185</code></p><h4 id="printf-“-x”"><a href="#printf-“-x”" class="headerlink" title="printf “%x”"></a>printf “%x”</h4><p>通过<code>printf “%x” 线程PID</code>，将PID转换为16进制：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[testadmin@izuf6bp7m03kbyap05zr6gz themes]$ printf “%x” 10185</span><br><span class="line">“27c9”</span><br></pre></td></tr></table></figure><p>获得16进制的PID<code>27c9</code></p><h4 id="jstack-进程PID-grep-16进制线程PID-C5-–color"><a href="#jstack-进程PID-grep-16进制线程PID-C5-–color" class="headerlink" title="jstack 进程PID | grep 16进制线程PID -C5 –color"></a>jstack 进程PID | grep 16进制线程PID -C5 –color</h4><p>通过<code>jstack 进程PID | grep 16进制线程PID -C5 --color</code>，获得耗CPU的线程详情：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[testadmin@izuf6bp7m03kbyap05zr6gz themes]$ jstack 4209 | grep 27c9 -C5 --color</span><br><span class="line">at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)</span><br><span class="line">at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)</span><br><span class="line">at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1364)</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">&quot;default task-417&quot; #605 prio&#x3D;5 os_prio&#x3D;0 tid&#x3D;0x00000000053cf800 nid&#x3D;0x27c9 waiting on condition [0x00007f19f68f6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">- parking to wait for  &lt;0x000000048002c208&gt; (a java.util.concurrent.Semaphore$FairSync)</span><br><span class="line">at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1037)</span><br></pre></td></tr></table></figure><p>上述例子，可以获取最耗CPU的线程名称:<code>default task-417</code>，以及该线程执行的代码堆栈：<code>0x27c9</code></p><p>以上，完！</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CPU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>胡言乱语</title>
      <link href="2018/10/17/%E8%83%A1%E8%A8%80%E4%B9%B1%E8%AF%AD/"/>
      <url>2018/10/17/%E8%83%A1%E8%A8%80%E4%B9%B1%E8%AF%AD/</url>
      
        <content type="html"><![CDATA[<p>有事没事一点杂念</p><a id="more"></a><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>这段时间我的小破爪机不间断的给我推送“国航”和“南方航空”的优惠，挠的我都又想出去浪了；想想，今年基本没什么出行，实在是有点 人到“中年”，俗事繁多的无奈~~~<br>迎接新生命到来的日子里，胡思乱想，水平有限，脚踩西瓜皮，遛哪写哪~</p><h3 id="一个简单的测试人"><a href="#一个简单的测试人" class="headerlink" title="一个简单的测试人"></a>一个简单的测试人</h3><p>很多时候，自觉还是个比较懒的人，一个没事喜欢思绪天马行空，而不是脚踏实地的做眼前的测试工作，最近想的比较多的，还是老生常谈的测试的职业生涯发展，个人在测试这条路上怎么走下去。</p><p>说实话，测试在业内的固有看法就是入门门槛低（实际上也是这样），在体量不是很大，技术氛围不是非常成熟的企业，我想，当前的状态，很多测试的同仁或多或少是不被开发看的起的吧，“没什么技术含量”，“不必要的工种”，“随便拉个人都能做”等等，唉，没办法，一句话是“开发是先天的，测试是后天的”，很多测试小伙伴（包括我自己），都是后天转到了测试这一行，或多或少的同仁是期待这个行业相对较好的薪资以及又不像开发的那么“找段代码过一生”的职业定位才从事的软件测试职业，如果没事时候问问自己，除却生活因素，软件测试这份职业，真的是你愿意从事的工作吗？真的是你的兴趣所在吗？我想是不是会打个问号。当你自己都不确定自己是否是愿意从事这门职业，坚守测试操守，也别去指望开发看的起你了呗。</p><p>当然，测试也真的没开发看的那么的糟糕，的确，一个根本没接触过软件测试方法论的人，很可能是会点啊点的就点出一个经过N多轮测试之后的系统的BUG，但是个人觉得这是无法避免的，0 bug的系统，个人觉得是个悖论；同样的，绝对安全的系统，根本也是不存在的。那么我们低端的测试人员怎么体现自己的价值，个人觉得，最简单的，业务的通盘理解程度，刚入行时候就听过，测试做得好，比产品还要懂产品。当你作为一个测试，比产品经理还要精通产品的业务，那你在平常的即使是黑盒测试过程中，也一定能很轻松就能发现很多的缺陷，甚至是预见系统在即使是开发严格按照产品文档开发之后也会出现的逻辑上的缺陷，这点，随便街上拉个人，应该做不到吧。之前参加公司一个培训时候，领导说过一句话，大致意思是在团队中做个有标签的人，当一个测试人员在团队中被打上了“这个人对业务最熟，不懂问他/她”，那我想，至少你是一个合格的测试了，开发，没有理由看不上你的工作。</p><h3 id="是不是该学点技术了"><a href="#是不是该学点技术了" class="headerlink" title="是不是该学点技术了"></a>是不是该学点技术了</h3><p>在进行了n久的功能测试之后，很多测试同仁会去转，可能是管理，可能是产品，也可能是其他。另外的，可能就是技术方向了，性能测试，自动化测试，安全测试等等；个人见识浅薄，目前只接触过性能测试和自动化测试，身边也有做安全测试的同事，我呢，自知能力尚欠，还没接触。</p><h4 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h4><p>说到这四个字，是有点心累。找工作上，这四个字一输，敲个回车，就没几个职位放出来。进了企业，进行性能测试工作，我想我们这些底层的测试人员，很多也就是jmeter和loadrunner来回打转，写个脚本，测个结果，就算完成了。入门更是神奇，网上随便搜索《loadrunnerxxx入门到实践》，《Jmeterxxx实战系列》等等，教程一搜一堆，照着也是很简单就能完成一个脚本，然后就像模像样的找台压测机，点开始执行，没事到linux敲个top、vmstat或者iostat来看看资源，两只眼睛盯着聚合报告或者TPS图像，一有风吹草动就风风火火的在群里@谁谁谁，系统不行啊，并发才这么点，CPU就这么高，你这要优化啊。好一点的，还会mysql -uroot -p；show processlist;show OPEN TABLES where In_use &gt; 0;tail -f -n 300 slow.log;mysqlbinlog xxxx来看看数据库，也到头了。脸红的说，我差不多就这个层次，好不到哪去。所以有的时候，真的挺无语的，自己能力真的挺差的，作为一个性能测试人员，我能提供的最大的帮助就是定位是不是内存泄漏，是不是有慢SQL，再多也只能explain一下SQL，提供一点优化建议了。自觉，真的能力好低，对于程序出现CPU爆表，根本不能给开发提供节省他们时间的信息。</p><p>理想中的性能测试，通盘理解结构，精通语言，能大致定位到代码块，精简开发的优化时间，个人觉得，欠缺：</p><ul><li>网络知识（TCP/IP，HTTP）</li><li>操作系统底层知识（代码执行原理，CPU、内存、磁盘等配合过程）</li><li>编程语言（Java特性，JVM原理、调优）</li><li>数据库（Mysql，Redis等）</li><li>监控系统</li><li>日志系统</li></ul><p>最后，尽量不依赖工具，至少最后往不记得有工具这回事这方向走。</p><h4 id="自动化测试"><a href="#自动化测试" class="headerlink" title="自动化测试"></a>自动化测试</h4><p>国内目前的环境也还是推崇自动化，毕竟解放提升测试效率，解放人力嘛，可以理解。自动化测试的好处就不列举了，随随便便能列出一堆，但是，有的时候我们要“抬杠”，自动化测试不好的地方。最近看了篇<code>James Bach</code>的访谈，这位大仙关于自动化测试的一些观念，个人觉得，是很有道理的。摘一段：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">自动化是用某个具体的方法发现些具体的问题。而人类应该有能力去用更加开阔性的方法发现更多问题</span><br><span class="line"></span><br><span class="line">你知道，我不喜欢用“测试自动化”这个词，因为我觉得测试不能被自动化。当大家说测试自动化的时候，大家的意思其实是自动事实检查fact checking。这些用例在检查特定的事物，所以他们寻找特定事物的失败或者成功。这就是自动检查，但是它完全没有自动化任何人们所做的真正的测试。当作为一个人去做测试的时候，我们不单单的看特定的东西，我们还会看一些线索。我们会去探索一些奇怪的事物和现象。一旦，我觉得有什么蹊跷，我就会深入下去，仔细研究。然后，当然研究会让我发现一些新的在开始的时候我没曾想过的缺陷。机器永远做不到这点，只有人可以。</span><br></pre></td></tr></table></figure><p>大仙的意思，我个凡人揣摩的是，自动化测试的确是一个很有效的提升测试效率，尤其是在繁重的重复性测试上的效率，非常有价值，可以给企业节省出好几个劳动力去从事其他的价值。但是现在也有过分追求自动化的情况，接触过自动化测试的人应该都清楚自动化测试的原理，主要的验证方式就是断言，想想，既然可以在自动化脚本中写出了明确的断言结果，是不是也就意味着，这是你执行过不止一次的，思维定式般的测试思路；这样，如果对于测试数据也不维护，是不是就会出现一直跑着同样的结果，机械的验证着你固定的思维。自动化测试有个有名的理论“杀虫剂效应”，如果你用一种特定的方法去发现一种类型的缺陷，那就只能发现这种类型的缺陷了。</p><p>自己也做过一点点的自动化，感觉，自动化对企业是必须的工作，但是个人觉得，也不能过分的去追求自动化， 而且，自动化的从业人员，有的时候应该停下来，好好想想用例设计，好好想想自动化怎么才能更大的价值。</p><h3 id="测试理论"><a href="#测试理论" class="headerlink" title="测试理论"></a>测试理论</h3><p>也忘了是在哪边看到的一句话，测试用例设计方法，一下午就可以全部学完。看起来貌似有点道理，一般日常使用的较多的等价类、边界值、判定变、正交等等，一下午好像是学完了，发现自己是无力反驳。。。然后看到“季哥”的博客，有这么一段话：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多次和其他公司的测试同学交流，发现很多同学说自己都说自己是工作2-3年的人，已经遇到瓶颈了，感觉测试很单调和无味。我给的建议其实很简单，那就是真正的理解和掌握所有的黑盒测试方法。怎么来验证呢？我自己就是这样：给你一个白板，你能把所有测试方法的5W2H(What、Why、When、Where、Who、How、How Much)都能非常清晰明了的演讲出来了吗？记住是不需要参考ppt或其他资料的情况下。</span><br></pre></td></tr></table></figure><p>对照着看，发现自己的确是懂得相当的少。我们现在所日常使用的测试方法，都是前人沉淀下来的，既然现在入门测试还需要学，那就一定有我们没有掌握的部分，用例设计方法就那么多个，背一下很简单，用起来，自问，差太远了。</p><h4 id="懒一点"><a href="#懒一点" class="headerlink" title="懒一点"></a>懒一点</h4><p>我还是想说，有的时候，需要“懒”一点，停下来，不动手，好好想想；一直的在做做做，很多时候，我们就被限制住了，忘掉了很多原本很简单，很真的想法，忘掉了真正的工作。想想怎么提升测试效率，怎么帮助团队提高产品质量，怎么优化我们的测试工作等等。</p><p>最近想过一些问题：<br><code>如果测试时间不够，是否可以只测试客户关心的比较常用的功能？</code><br><code>怎么用技术手段去提高测试效率</code><br><code>离开了工具，我还会不会测试</code><br><code>测试的初衷是什么</code></p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>人生苦短，“好好享受”，稍微“懒”一点，想尽办法去“偷懒”。另外，做个“独立”的个体，减少依赖，自带技能盔甲加身，工具只是锦上添花并不是生活必须品（的确，提升效率上功不可没）。</p><p>最后，以上，皆为胡言乱语，没有一点点参考价值，结束！</p>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Grafana一点简单使用</title>
      <link href="2018/10/17/Grafana%E4%B8%80%E7%82%B9%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>2018/10/17/Grafana%E4%B8%80%E7%82%B9%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Grafana一些简单使用的记录</p><a id="more"></a><h3 id="Dashboards"><a href="#Dashboards" class="headerlink" title="Dashboards"></a>Dashboards</h3><p>Grafana的Dashboards是可以自己手工创建的，当然，也支持导入，官网上有模板，在官网的基础上稍微改了点<code>QA Monitor.json</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br><span class="line">2219</span><br><span class="line">2220</span><br><span class="line">2221</span><br><span class="line">2222</span><br><span class="line">2223</span><br><span class="line">2224</span><br><span class="line">2225</span><br><span class="line">2226</span><br><span class="line">2227</span><br><span class="line">2228</span><br><span class="line">2229</span><br><span class="line">2230</span><br><span class="line">2231</span><br><span class="line">2232</span><br><span class="line">2233</span><br><span class="line">2234</span><br><span class="line">2235</span><br><span class="line">2236</span><br><span class="line">2237</span><br><span class="line">2238</span><br><span class="line">2239</span><br><span class="line">2240</span><br><span class="line">2241</span><br><span class="line">2242</span><br><span class="line">2243</span><br><span class="line">2244</span><br><span class="line">2245</span><br><span class="line">2246</span><br><span class="line">2247</span><br><span class="line">2248</span><br><span class="line">2249</span><br><span class="line">2250</span><br><span class="line">2251</span><br><span class="line">2252</span><br><span class="line">2253</span><br><span class="line">2254</span><br><span class="line">2255</span><br><span class="line">2256</span><br><span class="line">2257</span><br><span class="line">2258</span><br><span class="line">2259</span><br><span class="line">2260</span><br><span class="line">2261</span><br><span class="line">2262</span><br><span class="line">2263</span><br><span class="line">2264</span><br><span class="line">2265</span><br><span class="line">2266</span><br><span class="line">2267</span><br><span class="line">2268</span><br><span class="line">2269</span><br><span class="line">2270</span><br><span class="line">2271</span><br><span class="line">2272</span><br><span class="line">2273</span><br><span class="line">2274</span><br><span class="line">2275</span><br><span class="line">2276</span><br><span class="line">2277</span><br><span class="line">2278</span><br><span class="line">2279</span><br><span class="line">2280</span><br><span class="line">2281</span><br><span class="line">2282</span><br><span class="line">2283</span><br><span class="line">2284</span><br><span class="line">2285</span><br><span class="line">2286</span><br><span class="line">2287</span><br><span class="line">2288</span><br><span class="line">2289</span><br><span class="line">2290</span><br><span class="line">2291</span><br><span class="line">2292</span><br><span class="line">2293</span><br><span class="line">2294</span><br><span class="line">2295</span><br><span class="line">2296</span><br><span class="line">2297</span><br><span class="line">2298</span><br><span class="line">2299</span><br><span class="line">2300</span><br><span class="line">2301</span><br><span class="line">2302</span><br><span class="line">2303</span><br><span class="line">2304</span><br><span class="line">2305</span><br><span class="line">2306</span><br><span class="line">2307</span><br><span class="line">2308</span><br><span class="line">2309</span><br><span class="line">2310</span><br><span class="line">2311</span><br><span class="line">2312</span><br><span class="line">2313</span><br><span class="line">2314</span><br><span class="line">2315</span><br><span class="line">2316</span><br><span class="line">2317</span><br><span class="line">2318</span><br><span class="line">2319</span><br><span class="line">2320</span><br><span class="line">2321</span><br><span class="line">2322</span><br><span class="line">2323</span><br><span class="line">2324</span><br><span class="line">2325</span><br><span class="line">2326</span><br><span class="line">2327</span><br><span class="line">2328</span><br><span class="line">2329</span><br><span class="line">2330</span><br><span class="line">2331</span><br><span class="line">2332</span><br><span class="line">2333</span><br><span class="line">2334</span><br><span class="line">2335</span><br><span class="line">2336</span><br><span class="line">2337</span><br><span class="line">2338</span><br><span class="line">2339</span><br><span class="line">2340</span><br><span class="line">2341</span><br><span class="line">2342</span><br><span class="line">2343</span><br><span class="line">2344</span><br><span class="line">2345</span><br><span class="line">2346</span><br><span class="line">2347</span><br><span class="line">2348</span><br><span class="line">2349</span><br><span class="line">2350</span><br><span class="line">2351</span><br><span class="line">2352</span><br><span class="line">2353</span><br><span class="line">2354</span><br><span class="line">2355</span><br><span class="line">2356</span><br><span class="line">2357</span><br><span class="line">2358</span><br><span class="line">2359</span><br><span class="line">2360</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2366</span><br><span class="line">2367</span><br><span class="line">2368</span><br><span class="line">2369</span><br><span class="line">2370</span><br><span class="line">2371</span><br><span class="line">2372</span><br><span class="line">2373</span><br><span class="line">2374</span><br><span class="line">2375</span><br><span class="line">2376</span><br><span class="line">2377</span><br><span class="line">2378</span><br><span class="line">2379</span><br><span class="line">2380</span><br><span class="line">2381</span><br><span class="line">2382</span><br><span class="line">2383</span><br><span class="line">2384</span><br><span class="line">2385</span><br><span class="line">2386</span><br><span class="line">2387</span><br><span class="line">2388</span><br><span class="line">2389</span><br><span class="line">2390</span><br><span class="line">2391</span><br><span class="line">2392</span><br><span class="line">2393</span><br><span class="line">2394</span><br><span class="line">2395</span><br><span class="line">2396</span><br><span class="line">2397</span><br><span class="line">2398</span><br><span class="line">2399</span><br><span class="line">2400</span><br><span class="line">2401</span><br><span class="line">2402</span><br><span class="line">2403</span><br><span class="line">2404</span><br><span class="line">2405</span><br><span class="line">2406</span><br><span class="line">2407</span><br><span class="line">2408</span><br><span class="line">2409</span><br><span class="line">2410</span><br><span class="line">2411</span><br><span class="line">2412</span><br><span class="line">2413</span><br><span class="line">2414</span><br><span class="line">2415</span><br><span class="line">2416</span><br><span class="line">2417</span><br><span class="line">2418</span><br><span class="line">2419</span><br><span class="line">2420</span><br><span class="line">2421</span><br><span class="line">2422</span><br><span class="line">2423</span><br><span class="line">2424</span><br><span class="line">2425</span><br><span class="line">2426</span><br><span class="line">2427</span><br><span class="line">2428</span><br><span class="line">2429</span><br><span class="line">2430</span><br><span class="line">2431</span><br><span class="line">2432</span><br><span class="line">2433</span><br><span class="line">2434</span><br><span class="line">2435</span><br><span class="line">2436</span><br><span class="line">2437</span><br><span class="line">2438</span><br><span class="line">2439</span><br><span class="line">2440</span><br><span class="line">2441</span><br><span class="line">2442</span><br><span class="line">2443</span><br><span class="line">2444</span><br><span class="line">2445</span><br><span class="line">2446</span><br><span class="line">2447</span><br><span class="line">2448</span><br><span class="line">2449</span><br><span class="line">2450</span><br><span class="line">2451</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;__inputs&quot;: [],</span><br><span class="line">  &quot;__requires&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;grafana&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;grafana&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Grafana&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;5.2.2&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;panel&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;grafana-piechart-panel&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Pie Chart&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;1.3.3&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;panel&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Graph&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;5.0.0&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;panel&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;singlestat&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Singlestat&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;5.0.0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;annotations&quot;: &#123;</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;builtIn&quot;: 1,</span><br><span class="line">        &quot;datasource&quot;: &quot;-- Grafana --&quot;,</span><br><span class="line">        &quot;enable&quot;: true,</span><br><span class="line">        &quot;hide&quot;: true,</span><br><span class="line">        &quot;iconColor&quot;: &quot;rgba(0, 211, 255, 1)&quot;,</span><br><span class="line">        &quot;name&quot;: &quot;Annotations &amp; Alerts&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;dashboard&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;description&quot;: &quot;GaiaTest&quot;,</span><br><span class="line">  &quot;editable&quot;: true,</span><br><span class="line">  &quot;gnetId&quot;: null,</span><br><span class="line">  &quot;graphTooltip&quot;: 1,</span><br><span class="line">  &quot;id&quot;: null,</span><br><span class="line">  &quot;iteration&quot;: 1539735409965,</span><br><span class="line">  &quot;links&quot;: [],</span><br><span class="line">  &quot;panels&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;collapsed&quot;: false,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 1,</span><br><span class="line">        &quot;w&quot;: 24,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 2,</span><br><span class="line">      &quot;panels&quot;: [],</span><br><span class="line">      &quot;repeat&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Overview&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;row&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;cacheTimeout&quot;: null,</span><br><span class="line">      &quot;colorBackground&quot;: false,</span><br><span class="line">      &quot;colorValue&quot;: true,</span><br><span class="line">      &quot;colors&quot;: [</span><br><span class="line">        &quot;#f9d9f9&quot;,</span><br><span class="line">        &quot;#e5ac0e&quot;,</span><br><span class="line">        &quot;#447ebc&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;format&quot;: &quot;rpm&quot;,</span><br><span class="line">      &quot;gauge&quot;: &#123;</span><br><span class="line">        &quot;maxValue&quot;: 100,</span><br><span class="line">        &quot;minValue&quot;: 0,</span><br><span class="line">        &quot;show&quot;: false,</span><br><span class="line">        &quot;thresholdLabels&quot;: false,</span><br><span class="line">        &quot;thresholdMarkers&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 8,</span><br><span class="line">        &quot;w&quot;: 5,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 6,</span><br><span class="line">      &quot;interval&quot;: null,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;mappingType&quot;: 1,</span><br><span class="line">      &quot;mappingTypes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;value to text&quot;,</span><br><span class="line">          &quot;value&quot;: 1</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;range to text&quot;,</span><br><span class="line">          &quot;value&quot;: 2</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;maxDataPoints&quot;: 100,</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;nullText&quot;: null,</span><br><span class="line">      &quot;postfix&quot;: &quot;&quot;,</span><br><span class="line">      &quot;postfixFontSize&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;prefix&quot;: &quot;&quot;,</span><br><span class="line">      &quot;prefixFontSize&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;rangeMaps&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;from&quot;: &quot;null&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;N&#x2F;A&quot;,</span><br><span class="line">          &quot;to&quot;: &quot;null&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;sparkline&quot;: &#123;</span><br><span class="line">        &quot;fillColor&quot;: &quot;#0a50a1&quot;,</span><br><span class="line">        &quot;full&quot;: true,</span><br><span class="line">        &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,</span><br><span class="line">        &quot;show&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;tableColumn&quot;: &quot;&quot;,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__transactions&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate1m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: &quot;&quot;,</span><br><span class="line">      &quot;title&quot;: &quot;Throughput&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;singlestat&quot;,</span><br><span class="line">      &quot;valueFontSize&quot;: &quot;80%&quot;,</span><br><span class="line">      &quot;valueMaps&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;op&quot;: &quot;&#x3D;&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;N&#x2F;A&quot;,</span><br><span class="line">          &quot;value&quot;: &quot;null&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;valueName&quot;: &quot;current&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;cacheTimeout&quot;: null,</span><br><span class="line">      &quot;colorBackground&quot;: false,</span><br><span class="line">      &quot;colorValue&quot;: true,</span><br><span class="line">      &quot;colors&quot;: [</span><br><span class="line">        &quot;#299c46&quot;,</span><br><span class="line">        &quot;rgba(237, 129, 40, 0.89)&quot;,</span><br><span class="line">        &quot;#bf1b00&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;decimals&quot;: 4,</span><br><span class="line">      &quot;format&quot;: &quot;percent&quot;,</span><br><span class="line">      &quot;gauge&quot;: &#123;</span><br><span class="line">        &quot;maxValue&quot;: 100,</span><br><span class="line">        &quot;minValue&quot;: 0,</span><br><span class="line">        &quot;show&quot;: false,</span><br><span class="line">        &quot;thresholdLabels&quot;: false,</span><br><span class="line">        &quot;thresholdMarkers&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 8,</span><br><span class="line">        &quot;w&quot;: 5,</span><br><span class="line">        &quot;x&quot;: 5,</span><br><span class="line">        &quot;y&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 8,</span><br><span class="line">      &quot;interval&quot;: null,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;mappingType&quot;: 1,</span><br><span class="line">      &quot;mappingTypes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;value to text&quot;,</span><br><span class="line">          &quot;value&quot;: 1</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;range to text&quot;,</span><br><span class="line">          &quot;value&quot;: 2</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;maxDataPoints&quot;: 100,</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;nullText&quot;: null,</span><br><span class="line">      &quot;postfix&quot;: &quot;&quot;,</span><br><span class="line">      &quot;postfixFontSize&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;prefix&quot;: &quot;&quot;,</span><br><span class="line">      &quot;prefixFontSize&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;rangeMaps&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;from&quot;: &quot;null&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;N&#x2F;A&quot;,</span><br><span class="line">          &quot;to&quot;: &quot;null&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;sparkline&quot;: &#123;</span><br><span class="line">        &quot;fillColor&quot;: &quot;#7eb26d&quot;,</span><br><span class="line">        &quot;full&quot;: true,</span><br><span class="line">        &quot;lineColor&quot;: &quot;#629e51&quot;,</span><br><span class="line">        &quot;show&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;tableColumn&quot;: &quot;&quot;,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__one_minute_error_percentage_rate&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: &quot;&quot;,</span><br><span class="line">      &quot;title&quot;: &quot;Error %&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;singlestat&quot;,</span><br><span class="line">      &quot;valueFontSize&quot;: &quot;80%&quot;,</span><br><span class="line">      &quot;valueMaps&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;op&quot;: &quot;&#x3D;&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;N&#x2F;A&quot;,</span><br><span class="line">          &quot;value&quot;: &quot;null&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;valueName&quot;: &quot;current&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 8,</span><br><span class="line">        &quot;w&quot;: 7,</span><br><span class="line">        &quot;x&quot;: 10,</span><br><span class="line">        &quot;y&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 10,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: false,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;active httprequest&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__active&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Active Requests&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 8,</span><br><span class="line">        &quot;w&quot;: 7,</span><br><span class="line">        &quot;x&quot;: 17,</span><br><span class="line">        &quot;y&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 12,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: true,</span><br><span class="line">        &quot;current&quot;: false,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__apdex&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;score&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;colorMode&quot;: &quot;critical&quot;,</span><br><span class="line">          &quot;fill&quot;: true,</span><br><span class="line">          &quot;line&quot;: true,</span><br><span class="line">          &quot;op&quot;: &quot;lt&quot;,</span><br><span class="line">          &quot;value&quot;: 0.5,</span><br><span class="line">          &quot;yaxis&quot;: &quot;left&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;colorMode&quot;: &quot;warning&quot;,</span><br><span class="line">          &quot;fill&quot;: true,</span><br><span class="line">          &quot;line&quot;: true,</span><br><span class="line">          &quot;op&quot;: &quot;gt&quot;,</span><br><span class="line">          &quot;value&quot;: 0.5,</span><br><span class="line">          &quot;yaxis&quot;: &quot;left&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;colorMode&quot;: &quot;ok&quot;,</span><br><span class="line">          &quot;fill&quot;: true,</span><br><span class="line">          &quot;line&quot;: true,</span><br><span class="line">          &quot;op&quot;: &quot;gt&quot;,</span><br><span class="line">          &quot;value&quot;: 0.85,</span><br><span class="line">          &quot;yaxis&quot;: &quot;left&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Apdex score&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: &quot;apdex&quot;,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: &quot;1&quot;,</span><br><span class="line">          &quot;min&quot;: &quot;0&quot;,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: false</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 9</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 14,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;$col&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;hide&quot;: false,</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__transactions&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate1m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;1 min rate&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate5m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;5 min rate&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate15m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;15 min rate&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Throughput&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;rpm&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 12,</span><br><span class="line">        &quot;y&quot;: 9</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 16,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;$col&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__transactions&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;p95&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;95th Percentile&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;p98&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;98th Percentile&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;p99&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;99th Percentile&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Response Time&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;ms&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;</span><br><span class="line">        &quot;active websocket connections&quot;: &quot;#e5ac0e&quot;,</span><br><span class="line">        &quot;all websocket connections&quot;: &quot;#447ebc&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 18</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 18,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;active websocket connections&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application__active_websocket_connections&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;all websocket connections&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application__all_websocket_connections&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;B&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Websocket Connections&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;decimals&quot;: 2,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 12,</span><br><span class="line">        &quot;y&quot;: 18</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 20,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;$col&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__error_rate&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate1m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;1min rate&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate5m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;5min rate&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;rate15m&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;15min rate&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;alias&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Error Rate&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;rpm&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 9,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 27</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 22,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;1min error%&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__one_minute_error_percentage_rate&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Error Rate %&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;percent&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: &quot;100&quot;,</span><br><span class="line">          &quot;min&quot;: &quot;0&quot;,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 9,</span><br><span class="line">        &quot;x&quot;: 9,</span><br><span class="line">        &quot;y&quot;: 27</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 26,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;post size&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__post_size&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;last&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;httprequest post size&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: &quot;0&quot;,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;breakPoint&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;cacheTimeout&quot;: null,</span><br><span class="line">      &quot;combine&quot;: &#123;</span><br><span class="line">        &quot;label&quot;: &quot;Others&quot;,</span><br><span class="line">        &quot;threshold&quot;: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fontSize&quot;: &quot;80%&quot;,</span><br><span class="line">      &quot;format&quot;: &quot;percent&quot;,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 6,</span><br><span class="line">        &quot;x&quot;: 18,</span><br><span class="line">        &quot;y&quot;: 27</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 24,</span><br><span class="line">      &quot;interval&quot;: null,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;percentage&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;legendType&quot;: &quot;Right side&quot;,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;maxDataPoints&quot;: 3,</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;pieType&quot;: &quot;pie&quot;,</span><br><span class="line">      &quot;strokeWidth&quot;: 1,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;$tag_http_status_code&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;http_status_code&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;tag&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application.httprequests__errors&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;title&quot;: &quot;Errors&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;grafana-piechart-panel&quot;,</span><br><span class="line">      &quot;valueName&quot;: &quot;current&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;collapsed&quot;: false,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 1,</span><br><span class="line">        &quot;w&quot;: 24,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 36</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 28,</span><br><span class="line">      &quot;panels&quot;: [],</span><br><span class="line">      &quot;repeat&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;Event Post&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;row&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 37</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 30,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;eventpost count&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application__eventpost.count&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;eventpost count&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 12,</span><br><span class="line">        &quot;y&quot;: 37</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 32,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;eventpost deadletter&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application__eventpost.deadletter&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;eventpost deadletter&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 46</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 34,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;eventpost enqueued&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application__eventpost.enqueued&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;eventpost enqueued&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 12,</span><br><span class="line">        &quot;y&quot;: 46</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 36,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: true,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;null&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;eventpost working&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;groupBy&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;$__interval&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;time&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;params&quot;: [</span><br><span class="line">                &quot;null&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;type&quot;: &quot;fill&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;measurement&quot;: &quot;application__eventpost.working&quot;,</span><br><span class="line">          &quot;orderByTime&quot;: &quot;ASC&quot;,</span><br><span class="line">          &quot;policy&quot;: &quot;default&quot;,</span><br><span class="line">          &quot;rawSql&quot;: &quot;SELECT\n  UNIX_TIMESTAMP(&lt;time_column&gt;) as time_sec,\n  &lt;value column&gt; as value,\n  &lt;series name column&gt; as metric\nFROM &lt;table name&gt;\nWHERE $__timeFilter(time_column)\nORDER BY &lt;time_column&gt; ASC\n&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;resultFormat&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;select&quot;: [</span><br><span class="line">            [</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [</span><br><span class="line">                  &quot;value&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;type&quot;: &quot;field&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                &quot;params&quot;: [],</span><br><span class="line">                &quot;type&quot;: &quot;last&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          ],</span><br><span class="line">          &quot;tags&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;key&quot;: &quot;app&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$application$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;env&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$environment$&#x2F;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;condition&quot;: &quot;AND&quot;,</span><br><span class="line">              &quot;key&quot;: &quot;server&quot;,</span><br><span class="line">              &quot;operator&quot;: &quot;&#x3D;~&quot;,</span><br><span class="line">              &quot;value&quot;: &quot;&#x2F;^$server$&#x2F;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;eventpost working&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;yaxis&quot;: &#123;</span><br><span class="line">        &quot;align&quot;: false,</span><br><span class="line">        &quot;alignLevel&quot;: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;refresh&quot;: &quot;30s&quot;,</span><br><span class="line">  &quot;schemaVersion&quot;: 16,</span><br><span class="line">  &quot;style&quot;: &quot;dark&quot;,</span><br><span class="line">  &quot;tags&quot;: [</span><br><span class="line">    &quot;influxdb&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;templating&quot;: &#123;</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: false,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;multi&quot;: false,</span><br><span class="line">        &quot;name&quot;: &quot;environment&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;SHOW TAG VALUES WITH KEY &#x3D; \&quot;env\&quot;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 1,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: false,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;multi&quot;: false,</span><br><span class="line">        &quot;name&quot;: &quot;application&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;SHOW TAG VALUES WITH KEY &#x3D; \&quot;app\&quot;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 1,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;current&quot;: &#123;</span><br><span class="line">          &quot;selected&quot;: false,</span><br><span class="line">          &quot;tags&quot;: [],</span><br><span class="line">          &quot;text&quot;: &quot;Exceptionless&quot;,</span><br><span class="line">          &quot;value&quot;: &quot;Exceptionless&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;name&quot;: &quot;datasource&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;influxdb&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;datasource&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;auto&quot;: false,</span><br><span class="line">        &quot;auto_count&quot;: 30,</span><br><span class="line">        &quot;auto_min&quot;: &quot;10s&quot;,</span><br><span class="line">        &quot;current&quot;: &#123;</span><br><span class="line">          &quot;text&quot;: &quot;5s&quot;,</span><br><span class="line">          &quot;value&quot;: &quot;5s&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;name&quot;: &quot;summarize&quot;,</span><br><span class="line">        &quot;options&quot;: [</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: true,</span><br><span class="line">            &quot;text&quot;: &quot;5s&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;5s&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;10s&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;10s&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;30s&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;30s&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;1m&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;1m&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;10m&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;10m&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;30m&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;30m&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;1h&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;1h&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;6h&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;6h&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;12h&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;12h&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;1d&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;1d&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;7d&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;7d&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;14d&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;14d&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;selected&quot;: false,</span><br><span class="line">            &quot;text&quot;: &quot;30d&quot;,</span><br><span class="line">            &quot;value&quot;: &quot;30d&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;query&quot;: &quot;5s,10s,30s,1m,10m,30m,1h,6h,12h,1d,7d,14d,30d&quot;,</span><br><span class="line">        &quot;refresh&quot;: 2,</span><br><span class="line">        &quot;type&quot;: &quot;interval&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$datasource&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: true,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;multi&quot;: true,</span><br><span class="line">        &quot;name&quot;: &quot;server&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;SHOW TAG VALUES WITH KEY &#x3D; \&quot;server\&quot;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;time&quot;: &#123;</span><br><span class="line">    &quot;from&quot;: &quot;now-6h&quot;,</span><br><span class="line">    &quot;to&quot;: &quot;now&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;timepicker&quot;: &#123;</span><br><span class="line">    &quot;refresh_intervals&quot;: [</span><br><span class="line">      &quot;5s&quot;,</span><br><span class="line">      &quot;10s&quot;,</span><br><span class="line">      &quot;30s&quot;,</span><br><span class="line">      &quot;1m&quot;,</span><br><span class="line">      &quot;5m&quot;,</span><br><span class="line">      &quot;15m&quot;,</span><br><span class="line">      &quot;30m&quot;,</span><br><span class="line">      &quot;1h&quot;,</span><br><span class="line">      &quot;2h&quot;,</span><br><span class="line">      &quot;1d&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;time_options&quot;: [</span><br><span class="line">      &quot;5m&quot;,</span><br><span class="line">      &quot;15m&quot;,</span><br><span class="line">      &quot;1h&quot;,</span><br><span class="line">      &quot;6h&quot;,</span><br><span class="line">      &quot;12h&quot;,</span><br><span class="line">      &quot;24h&quot;,</span><br><span class="line">      &quot;2d&quot;,</span><br><span class="line">      &quot;7d&quot;,</span><br><span class="line">      &quot;30d&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;timezone&quot;: &quot;browser&quot;,</span><br><span class="line">  &quot;title&quot;: &quot;QA Monitor&quot;,</span><br><span class="line">  &quot;uid&quot;: &quot;AOUXkRxmz&quot;,</span><br><span class="line">  &quot;version&quot;: 37</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>直接拷下来保存json格式即可。</p><h4 id="导入Dashboard"><a href="#导入Dashboard" class="headerlink" title="导入Dashboard"></a>导入Dashboard</h4><p>点击<code>manage dashboard</code>，选择<code>Import</code>，点击<code>Upload .json File</code>即可（或者直接把json内容粘进<code>paste JSON</code>文本框）。</p><h3 id="告警"><a href="#告警" class="headerlink" title="告警"></a>告警</h3><p>Grafana现在有告警的功能，需要自己改点配置来开启，配置文件位置：<code>/etc/grafana/grafana.ini</code>（Centos路径，其他应该大同小异，不行就find / -name “grafana.ini”搜一下）<br>修改内容(修改之前养成好习惯，先cp一个备份)(文件行数和修改完内容，linux下vim显示行数，键盘直接敲 “:set nu”，跳转到指定行，不加冒号直接行数G，例如跳转到15行，键盘直接敲”15G”（非编辑模式下，没有按i）)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">302 [smtp]</span><br><span class="line">303 enabled &#x3D; true</span><br><span class="line">304 host &#x3D; smtp.exmail.qq.com:465(发送服务器)</span><br><span class="line">305 user &#x3D; ****@xx.com（账号）</span><br><span class="line">306 # If the password contains # or ; you have to wrap it with trippel quotes. Ex &quot;&quot;&quot;#password;&quot;&quot;&quot;</span><br><span class="line">307 password &#x3D; grafanaTest（邮箱密码）</span><br><span class="line">308 ;cert_file &#x3D;</span><br><span class="line">309 ;key_file &#x3D;</span><br><span class="line">310 skip_verify &#x3D; true</span><br><span class="line">311 from_address &#x3D; kyle@xxxx.com(发件邮箱)</span><br><span class="line">312 ;from_name &#x3D; Grafana</span><br><span class="line">313 # EHLO identity in SMTP dialog (defaults to instance_name)</span><br><span class="line">314 ;ehlo_identity &#x3D; dashboard.example.com</span><br></pre></td></tr></table></figure><p>同时开启alert:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">377 [alerting]</span><br><span class="line">378 # Disable alerting engine &amp; UI features</span><br><span class="line">379 enabled &#x3D; true</span><br><span class="line">380 # Makes it possible to turn off alert rule execution but alerting UI is visible</span><br><span class="line">381 execute_alerts &#x3D; true</span><br></pre></td></tr></table></figure><p>保存退出，重启grafana：<code>systemctl restart grafana-server</code></p><h4 id="告警配置"><a href="#告警配置" class="headerlink" title="告警配置"></a>告警配置</h4><p>进入Grafana web页面，点击Alerting，配置告警，配置<code>Notification channels</code>，很简单，输入一个Name，Type选择Eamil，可以勾选<code>Include image</code>，输入收件人地址，多个收件人中间用英文分号隔开<code>;</code>，可以点击<code>Send Test</code>测试一下，一切正常就可以收到测试的邮件了。</p><h4 id="图像开启告警"><a href="#图像开启告警" class="headerlink" title="图像开启告警"></a>图像开启告警</h4><p>在Dashboard中添加图形时，编辑图形，有一个告警菜单<code>Alert</code>，点击create alert进入新增告警页面，自定义Condition即可，完了<code>Test Rule</code>测试查看。</p><h5 id="Template-variables-are-not-supported-in-alert-queries"><a href="#Template-variables-are-not-supported-in-alert-queries" class="headerlink" title="Template variables are not supported in alert queries"></a>Template variables are not supported in alert queries</h5><p>这个坑是因为配置图形时候，<code>Metrics</code>配置的是变量，例如<code>$dashboard</code>，grafanan的告警不能用变量，换成写死的具体参数就可以了</p><h5 id="Failed-to-test-rule-method-POST-path-api-alerts-test-status-500"><a href="#Failed-to-test-rule-method-POST-path-api-alerts-test-status-500" class="headerlink" title="Failed to test rule   method=POST path=/api/alerts/test status=500"></a>Failed to test rule   method=POST path=/api/alerts/test status=500</h5><p>这个坑，其实和上面一个是一个道理，我出现这个坑，是因为修改成常量时候，只是把表，服务，应用修改成了常量，数据库选择的还是变量形式，就一直报这个错，连github都上去看提的issue了，折腾半天，记住，设置告警，不能出现变量！全用常量即可！</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>很乱的一篇博客，估计就我自己看得懂；这段时间断断续续的都在折腾APM的东西，到现在终于基本有雏形了。</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grafana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7搭建Grafana</title>
      <link href="2018/10/12/Centos7%E6%90%AD%E5%BB%BAGrafana/"/>
      <url>2018/10/12/Centos7%E6%90%AD%E5%BB%BAGrafana/</url>
      
        <content type="html"><![CDATA[<p>Centos7安装Grafana</p><a id="more"></a><p>差点忘了 ，还是记录下吧</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>官网上其实有：</p><blockquote><p><a href="https://grafana.com/grafana/download?platform=linux">官方安装教程</a></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;s3-us-west-2.amazonaws.com&#x2F;grafana-releases&#x2F;release&#x2F;grafana-5.3.0-1.x86_64.rpm </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum localinstall grafana-5.3.0-1.x86_64.rpm </span><br></pre></td></tr></table></figure><p>然后这样就安装完成了</p><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>看一下当前默认安装了什么插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grafana-cli plugins list-remote</span><br></pre></td></tr></table></figure><p>没有zabbix，装一个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grafana-cli plugins install alexanderzobnin-zabbix-app</span><br></pre></td></tr></table></figure><p>当然，如果出现“不可抗力”，下载安装不了，直接下zip包，然后解压到<code>/var/lib/grafana/plugins</code>目录下即可（grafana插件的默认安装路径）</p><p>zip包在官网上对应插件<code>Installation</code>页，有一个<code>download the .zip file</code>点击下载即可</p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>然后就可以启动服务了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">systemctl start grafana-server</span><br><span class="line"></span><br><span class="line">systemctl status grafana-server</span><br></pre></td></tr></table></figure><p>再然后，怎么用Grafana，说实话，我也只会简单的，还是看官网的教程吧。。</p><blockquote><p><a href="http://docs.grafana.org/features/datasources/elasticsearch/#using-elasticsearch-in-grafana">Grafana使用</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> grafana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】linux系统内存基础知识</title>
      <link href="2018/10/11/%E3%80%90%E8%BD%AC%E3%80%91linux%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>2018/10/11/%E3%80%90%E8%BD%AC%E3%80%91linux%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<p>计算机基础之:Linux内存基础，转自来自万能的互联网网友，我只是搬运工，感谢原作者！</p><a id="more"></a><p>在Linux系统中，我们经常用free命令来查看系统内存的使用状态。类似：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff&#x2F;cache   available</span><br><span class="line">Mem:          15885        3898        1069           7       10917       11584</span><br><span class="line">Swap:          6143         178        5965</span><br></pre></td></tr></table></figure><p>显示的单位是M，当然也可以<code>free -g</code>显示单位是G而已。这个命令几乎是每一个使用过Linux的人必会的命令，但越是这样的命令，似乎真正明白的人越少（我是说比例越少）。一般情况下，对此命令输出的理解可以分这几个层次：</p><ol><li><p>不了解。这样的人的第一反应是：天啊，内存用了好多，70个多G，可是我几乎没有运行什么大程序啊？为什么会这样？Linux好占内存！</p></li><li><p>自以为很了解。这样的人一般评估过会说：嗯，根据我专业的眼光看的出来，内存才用了17G左右，还有很多剩余内存可用。buffers/cache占用的较多，说明系统中有进程曾经读写过文件，但是不要紧，这部分内存是当空闲来用的。</p></li><li><p>真的很了解。这种人的反应反而让人感觉最不懂Linux，他们的反应是：free显示的是这样，好吧我知道了。神马？你问我这些内存够不够，我当然不知道啦！我特么怎么知道你程序怎么写的？</p></li></ol><p>根据目前网络上技术文档的内容，我相信绝大多数了解一点Linux的人应该处在第二种层次。大家普遍认为，buffers和cached所占用的内存空间是可以在内存压力较大的时候被释放当做空闲空间用的。但真的是这样么？在论证这个题目之前，我们先简要介绍一下buffers和cached是什么意思：</p><h3 id="什么是buffer-cache？"><a href="#什么是buffer-cache？" class="headerlink" title="什么是buffer/cache？"></a>什么是buffer/cache？</h3><p>buffer和cache是两个在计算机技术中被用滥的名词，放在不通语境下会有不同的意义。在Linux的内存管理中，这里的buffer指Linux内存的：Buffer cache。这里的cache指Linux内存中的：Page cache。翻译成中文可以叫做缓冲区缓存和页面缓存。在历史上，它们一个（buffer）被用来当成对io设备写的缓存，而另一个（cache）被用来当作对io设备的读缓存，这里的io设备，主要指的是块设备文件和文件系统上的普通文件。但是现在，它们的意义已经不一样了。在当前的内核中，page cache顾名思义就是针对内存页的缓存，说白了就是，如果有内存是以page进行分配管理的，都可以使用page cache作为其缓存来管理使用。当然，不是所有的内存都是以页（page）进行管理的，也有很多是针对块（block）进行管理的，这部分内存使用如果要用到cache功能，则都集中到buffer cache中来使用。（从这个角度出发，是不是buffer cache改名叫做block cache更好？）然而，也不是所有块（block）都有固定长度，系统上块的长度主要是根据所使用的块设备决定的，而页长度在X86上无论是32位还是64位都是4k。</p><p>明白了这两套缓存系统的区别，就可以理解它们究竟都可以用来做什么了。</p><h4 id="什么是page-cache？"><a href="#什么是page-cache？" class="headerlink" title="什么是page cache？"></a>什么是page cache？</h4><p>Page cache主要用来作为文件系统上的文件数据的缓存来用，尤其是针对当进程对文件有read／write操作的时候。如果你仔细想想的话，作为可以映射文件到内存的系统调用：mmap是不是很自然的也应该用到page cache？在当前的系统实现里，page cache也被作为其它文件类型的缓存设备来用，所以事实上page cache也负责了大部分的块设备文件的缓存工作。</p><h4 id="什么是buffer-cache"><a href="#什么是buffer-cache" class="headerlink" title="什么是buffer cache"></a>什么是buffer cache</h4><p>Buffer cache则主要是设计用来在系统对块设备进行读写的时候，对块进行数据缓存的系统来使用。这意味着某些对块的操作会使用buffer cache进行缓存，比如我们在格式化文件系统的时候。一般情况下两个缓存系统是一起配合使用的，比如当我们对一个文件进行写操作的时候，page cache的内容会被改变，而buffer cache则可以用来将page标记为不同的缓冲区，并记录是哪一个缓冲区被修改了。这样，内核在后续执行脏数据的回写（writeback）时，就不用将整个page写回，而只需要写回修改的部分即可。</p><h3 id="如何回收cache？"><a href="#如何回收cache？" class="headerlink" title="如何回收cache？"></a>如何回收cache？</h3><p>Linux内核会在内存将要耗尽的时候，触发内存回收的工作，以便释放出内存给急需内存的进程使用。一般情况下，这个操作中主要的内存释放都来自于对buffer／cache的释放。尤其是被使用更多的cache空间。既然它主要用来做缓存，只是在内存够用的时候加快进程对文件的读写速度，那么在内存压力较大的情况下，当然有必要清空释放cache，作为free空间分给相关进程使用。所以一般情况下，我们认为buffer/cache空间可以被释放，这个理解是正确的。</p><p>但是这种清缓存的工作也并不是没有成本。理解cache是干什么的就可以明白清缓存必须保证cache中的数据跟对应文件中的数据一致，才能对cache进行释放。所以伴随着cache清除的行为的，一般都是系统IO飙高。因为内核要对比cache中的数据和对应硬盘文件上的数据是否一致，如果不一致需要写回，之后才能回收。</p><p>在系统中除了内存将被耗尽的时候可以清缓存以外，我们还可以使用下面这个文件来人工触发缓存清除的操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat &#x2F;proc&#x2F;sys&#x2F;vm&#x2F;drop_caches </span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>方法是：</p><p><code>echo 1 &gt; /proc/sys/vm/drop_caches</code></p><p>当然，这个文件可以设置的值分别为1、2、3。它们所表示的含义为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo 1 &gt; &#x2F;proc&#x2F;sys&#x2F;vm&#x2F;drop_caches:表示清除pagecache。</span><br><span class="line"></span><br><span class="line">echo 2 &gt; &#x2F;proc&#x2F;sys&#x2F;vm&#x2F;drop_caches:表示清除回收slab分配器中的对象（包括目录项缓存和inode缓存）。slab分配器是内核中管理内存的一种机制，其中很多缓存数据实现都是用的pagecache。</span><br><span class="line"></span><br><span class="line">echo 3 &gt; &#x2F;proc&#x2F;sys&#x2F;vm&#x2F;drop_caches:表示清除pagecache和slab分配器中的缓存对象。</span><br></pre></td></tr></table></figure><h3 id="参考blog"><a href="#参考blog" class="headerlink" title="参考blog"></a>参考blog</h3><blockquote><p><a href="https://www.cnblogs.com/rocky-AGE-24/p/7629500.html">Linux中Cache内存占用过高解决办法</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> buff/cache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】聊一聊职业发展</title>
      <link href="2018/10/09/%E3%80%90%E8%BD%AC%E3%80%91%E8%81%8A%E4%B8%80%E8%81%8A%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/"/>
      <url>2018/10/09/%E3%80%90%E8%BD%AC%E3%80%91%E8%81%8A%E4%B8%80%E8%81%8A%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<p>【转】老生常谈，再谈谈测试职业发展</p><p>转自Testerhome，看的挺有感触，感谢作者！转来自己blog，时时共勉。</p><a id="more"></a><p>有这么个普遍现象<br>测试招聘者，特别是一、二线互联网公司的招聘者最苦恼的事儿就是招人。想找到一个合适的人难于上青天，每天各种撒网，简历看几百份，面大几十人，能捞到一个中意的小伙伴就谢天谢地了。但同时很多测试小伙伴发现找工作很难，特别是进大一点的厂，他们特别挑：代码要会写，要有软件架构能力，问一大坨平时根本用不到的技术问题，还挑经验，挑沟通能力，挑这挑那，有时候还特么挑学历、挑年龄。。。 供求总难以匹配起来，造成了双方都很痛苦。</p><h3 id="Why？"><a href="#Why？" class="headerlink" title="Why？"></a>Why？</h3><p>能力要求不匹配是最核心的问题。软件、互联网近20年来飞速成长，其实也经历了很多阶段。行业软件兴盛阶段和外包兴盛阶段（2000-2010年）行业进入了大量的测试人员，当时最主流的测试实践是：重心放在系统验收阶段。测试人员的主要工作基本都投入在了基于业务的黑盒测试上，对代码能力、系统理解的能力要求不多。2010年后，互联网行业的真正兴起让国内软件开发模式开始缓慢调头，快速迭代的模式逐步兴起，开发周期越来越短，迭代越来越快，但系统越来越越庞大、复杂。原来的测试工作模式和工作范围越来越无法满足要求了。但大量从业人员技能范围转变是一件很难的事情，行业是有巨大惯性的。从宏观上看大量QA技能转变跟不上需求转变是造成市场供求不匹配的主要原因。</p><h3 id="So-What"><a href="#So-What" class="headerlink" title="So What?"></a>So What?</h3><p>三个观点：1. 只做手工测试，不懂系统实现的测试工程师的职业发展会越来越受限。2. 能够转型成适应市场需求的同学将在近几年的时间获得超额回报（因为市场供不应求，企业不得不抬高价格来寻找这样的人）。3.对于个体来说，自我成长永远最重要，自己永远要对自己的发展负责，别依赖外部环境，自己想办法变成市场的香饽饽才靠谱。</p><h3 id="到底什么样的人抢手？"><a href="#到底什么样的人抢手？" class="headerlink" title="到底什么样的人抢手？"></a>到底什么样的人抢手？</h3><p>按照我一点理解讲一讲什么样子的人会抢手吧，限于篇幅会偏重技术角度来讲。个人之见，欢迎讨论和拍砖。</p><h4 id="测试的底子-项目经验"><a href="#测试的底子-项目经验" class="headerlink" title="测试的底子-项目经验"></a>测试的底子-项目经验</h4><p>有比较复杂系统的测试实战经验，你就超过了50%以上的应聘者。什么叫做比较复杂系统呢？投入50人年开发出来的系统就可以称作一个复杂系统了。因此，复杂系统并不是很罕见。但是，如果你只接触一个简单的模块，甚至只是测试一个稳定模块的维护性开发，而不是通盘理解，不能说是测试过复杂系统。有从头到尾接触一个完整项目的经历很宝贵。</p><h4 id="测试的底子-基础知识"><a href="#测试的底子-基础知识" class="headerlink" title="测试的底子-基础知识"></a>测试的底子-基础知识</h4><p>对照三本书：《ISTQB基础教程》 《高级软件测试设计》 《高级软件测试管理》（后两本是ISTQB的高级认证教程）。这里边的内容你都能熟练应用（真的是熟练应用，而不只是有概念），你就能超过80%以上的应聘者了。面试过数百人，我经常会问几个问题：如果测试时间不够，你会怎么办？ 如果让你去测试一个你完全不熟悉的系统，你会怎么办？你平时会使用那些测试设计方法？ 看似很稀松平常的问题，非常考验人。因为大部分从业者都没有经受过系统训练和学习，工作多年，依然技能不足，意识跑偏。</p><h4 id="熟练使用一门主语言"><a href="#熟练使用一门主语言" class="headerlink" title="熟练使用一门主语言"></a>熟练使用一门主语言</h4><p>满足这条，你就超过了70%的应聘者。什么叫做熟练呢？拿Java来说吧：系统学习过Java的教程，高频面试50题 这样的题可以自测一下，可以回答上35个以上；熟悉最主流的Spring框架，能够写出一个简单的网站，实现基础的Restful 服务；读懂过一个测试框架，如mockito或者Junit的源码；能够熟练实施接口测试（基于一些测试框架 如：rest-assured+Junit）；能够读懂开发的业务代码，对他们的代码进行Code Review；</p><h4 id="对一门语言有比较深入了解"><a href="#对一门语言有比较深入了解" class="headerlink" title="对一门语言有比较深入了解"></a>对一门语言有比较深入了解</h4><p>满足这条，你就超过了90%的应聘者。什么叫有深入了解呢？还拿Java来说吧：熟练使用Java的常见API；深入理解基于语言特性/系统特性的知识，如Collections的实现机制、类型系统、I/O、网络、多线程等；熟知设计模式（广义范围的设计模式，不局限于GOF的设计模式）；熟悉JVM的工作模式；熟练使用调试排查工具解决性能问题；熟练掌握市面上常见的脚手架；熟练掌握周边知识（OPs相关，网络知识相关）有不错的实战开发经验（做过真正被生产检验的东西）；对于测试开发，AOP，Java字节码技术是很重要的知识。。。 这是一个很长的学习list，需要几年时间来养成。做到这点，其实你可以胜任普通的开发岗位了，这也是高级测试开发岗位的技术底子。</p><h4 id="在一个领域知识有不错的了解"><a href="#在一个领域知识有不错的了解" class="headerlink" title="在一个领域知识有不错的了解"></a>在一个领域知识有不错的了解</h4><p>人不可能什么都懂，但工作几年之后，会在工作的域内一定要有积累才行。<br>例如，你测试一个核心电商系统的交易模块三年了，业务上你一定要熟练讲出来：商品列表、购物车、下单、退单、废单、支付、发货、库存、退款、优惠使用等等一坨业务流程，和可能出现的常见的坑（各类问题产生的资损、各类问题产生的服务不可用、逻辑矛盾），不然根本无法体现你经验沉淀和深入思考；技术角度上，你要能够画得出来系统的交互图，熟悉最核心的接口和最核心的参数，能够读懂开发的代码，熟练使用trace和监控工具，诊断定位线上问题到代码行。</p><h4 id="用技术保障质量的能力"><a href="#用技术保障质量的能力" class="headerlink" title="用技术保障质量的能力"></a>用技术保障质量的能力</h4><p>测试开发岗一定会问到一个问题：你能够举一个你用技术手段提高测试效率，增强测试能力的例子么？这是面试时最大的一个坎。 很多人会讲一些自动化测试回归的例子，但是真正成功的例子非常少，因为为什么做，怎么做都没有想好就照网上一个教程攒了一个，结果变成了玩具。 做好自动化，不仅仅是会使用工具、框架，其实要对被测物特性，软件生命周期有很深的理解并且有很强的开发知识才行。实际上，在环境、CI、数据、测试用例生成、数据比对的很小的一些点上，都能有不错的提效产出，从这些点能够做得好，会得到不错的加分。有一个不错的成功案例，你胜出的几率就超过了80%，没有短板，就十拿九稳了。</p><h4 id="技能以外的东西-实战案例"><a href="#技能以外的东西-实战案例" class="headerlink" title="技能以外的东西- 实战案例"></a>技能以外的东西- 实战案例</h4><p>以前的工作印证了你的能力。能够讲清楚一件特别拿得出手的工作，证明你能力的工作能力是面试时候最有用的投名状。</p><h4 id="技能意外的东西-你的个人特质"><a href="#技能意外的东西-你的个人特质" class="headerlink" title="技能意外的东西 - 你的个人特质"></a>技能意外的东西 - 你的个人特质</h4><p>一般有如下特质会大大加分：快速学习、系统性学习、学以致用、系统性思考、强大的推动力、技术思维、突出的沟通能力、条理性、抗压性、乐观精神、抗挫折能力、迅速调整的能力、迭代改进的意识、ownership、愿景和规划。 这些特性体现人的内核，有强大内核的人，做什么都行，技能暂时不足，也一定能补足。所以，在招聘的时候往往对是否录用的判断起决定性作用</p><h4 id="高段位要求（高级职位需求）"><a href="#高段位要求（高级职位需求）" class="headerlink" title="高段位要求（高级职位需求）"></a>高段位要求（高级职位需求）</h4><p>计算机领域知识的通盘理解<br>这条范围非常大，人不可能什么都懂。但最最基础的知识是不能有盲点的：<br>操作系统工作基础原理与基础操作：如linux，要通读过linux操作系统的书，熟悉最基本的概念，基本命令要熟悉，shell要能写和读；<br>网络知识特别是TCP/IP, HTTP知识：推荐两本书 《图解tcp/ip》 《图解Http》这两本书里的东西要懂。<br>数据库知识：市面常见数据库（redis，mysql，oracle）的常见DBA操作，问题排查；SQL的熟练使用；<br>Web及移动端知识：能够懂HTML，CSS，能够读懂Javascript代码，能够读懂Android或者iOS的代码，做简单开发最好。<br>安全知识：常见的安全防护方法、工具使用；基本的安全攻防原理；<br>软件工程/开发过程管理：实战中各种磨练，建议系统的学习PMP，敏捷开发的一些认证课程。</p><h4 id="在一个域的深耕"><a href="#在一个域的深耕" class="headerlink" title="在一个域的深耕"></a>在一个域的深耕</h4><p>人不可能什么都懂，但在一个领域是需要深耕的。比如，在做了四、五年移动端测试以后。android和iOS都要具备一定的开发能力了，能读懂开发的业务代码是最基础的，能够代替开发实现部分业务功能，完成部分组件开发是个非常好的自检点。能够对移动端自动化工具栈、监控工具栈（如友盟、bugly、newrelic等）、内存泄露检测、卡顿检测、耗电量、弱网、流量、埋点、灰度、版本控制、兼容性、用户体验、安全等等的质量保障方案有通盘搞定能力。<br>什么叫搞定呢？举个例子：比如，使用多种手段把崩溃率降低到千分之一以下。对于一个小团队，这是个很不容易实现的坎。做到这点，你需要了解如何收集崩溃率，如何使用一系列工具来定位核心问题，如何推动开发改动，并且预防（静态代码扫描工具引入，阻止乱用第不成熟的第三方插件，代码reivew防止常见pattern如空指针引发的崩溃，推动开发养成良好的log习惯，推动移动端防御性编程编程开发习惯，推动后端开发按照规范吐接口，帮助开发引入内存泄露、卡顿工具，趋势报表，警钟长鸣，各种灰度方式设置，线上监控。。。一个数据的改观，背后要有大量的质量相关工作）。</p><h4 id="使用综合手段来保障软件质量提升效能的能力。"><a href="#使用综合手段来保障软件质量提升效能的能力。" class="headerlink" title="使用综合手段来保障软件质量提升效能的能力。"></a>使用综合手段来保障软件质量提升效能的能力。</h4><p>听起来很抽象，举几个例子吧。<br><strong>例子1</strong>：你所在的team总在被开发抱怨测试用的时间太长。如何能缩短一下测试时间呢？<br>通过调研，发现测试小伙伴诟病的最多的就是环境不可用。环境到底多不可用呢？<br>你基于Grafana和Prometheus做了一个环境可用的监控报表，使用后，发现环境在工作日整体可用率只有35%左右，主要原因是：几个核心热点应用经常挂了没人管。<br>你拉了整个team，明确了部署责任人，约定了部署规则：只能中午饭和晚饭时间部署，并且部署后要自己看一下是不是OK。<br>一周后，环境可用度上升到了65%。再深入分析，发现2个同学不守规矩，总是他们在破坏规则，你去找他们单独谈话。<br>一周后，环境可用度上升到了80%。还是有少量人不守规矩。<br>你找SRE的同学提需求，做了部署卡点，非部署时间部署必须TL审批。<br>一周后，环境可用度上升到了85%。有些TL也不守规矩。<br>你建了个报警，环境乱部署，坏掉了，在大团队的群里@全体，告知谁搞坏了环境。<br>一周后，环境可用度达到了92%。<br>你加了一个feature：应用挂了一段时间无人响应，自动重启服务功能，仍然有问题，就自动回滚上一版本。<br>你推动了开发解决了某个应用启动时间过长的问题。<br>你推动了环境分组。<br>你推动了测试环境版本上线的规范流程实施。<br>你推动了冒烟自动化用例卡点。<br>你推动了环境部署人备份机制。<br>你推动了全员基础环境部署培训。<br>你总结了部署手册。<br>你做了。。。。。<br>最后，环境可用度稳定到了97%以上。你为测试节省了60%以上block时间（原来可用度未35%）</p><p><strong>例子2</strong>：上面的问题，除了环境，还有一个槽点：开发提测质量不高。测试的头几天，很多主流程都走不通，导致测试总是在等待，或者是跟着开发一起联调。而这段时间，已经被习惯性的认为是测试时间了，因为：提测了。</p><p>你推动了：测试提供冒烟用例，开发必须完成一定程度的自测才能提测。<br>你推动了：测试和开发做自动化同期共建，在开发过程中，核心功能就被自动化用例保护起来了。<br>你推动了：开发切分feature提测，而不是攒一个大招一下子提一坨。<br>你推动了：代码Codereview变成团队常规活动，QA在早期跟进核心代码，把问题坑杀在萌芽阶段。<br>你推动了：外部资源联调非常早的进行，不会让它在测试后期成为测试blocker。<br>。。。</p><p><strong>例子3</strong>：你发现测试时间长，QA自己也有问题。</p><p>你推动了：有明确的测试计划，并让所有干系人都有明确的预期。<br>你推动了：测试依据风险测试，最大的风险得到最快的cover，科学分配时间，明显缩短bug反馈时间弧。<br>你推动了：bug严格管理，所有重要bug都及时修复。<br>你推动了：良好的沟通和汇报机制，每天让团队主要干系人清晰的知道，距离发布还差多远。<br>你推动了。。。。</p><p>你能讲出自己做过5个以上这样的成功例子，我敢保障，你会被1线大厂疯抢。职级基本都是专家起。</p><h4 id="持续学习能力和复杂问题解决能力"><a href="#持续学习能力和复杂问题解决能力" class="headerlink" title="持续学习能力和复杂问题解决能力"></a>持续学习能力和复杂问题解决能力</h4><p><strong>例子1</strong>：<br>你近期的工作是帮助团队提升后台服务稳定性。你看到了netflix内部使用一个叫做ChaosMonkey的东西来随机对生产服务期进行攻击，而逼迫工程师提高稳定性，所以，你也实现了类似（更温和）的内部机制，推动团队稳定性的提高。<br>你怎么知道这个叫做ChaosMonkey的东西呢？ 因为你会习惯性浏览一线厂商的技术博客，参与行业大会，关注各类新技术。持续性的养成习惯。</p><p><strong>例子2</strong>：<br>做大规模接口自动化好难，外部数据依赖太难搞，参数构造太费劲，assert太难写。如果能够简单的录制回放就好了。<br>但是，外部依赖是个天坑，写操作mock也是个天坑，assert也是个天坑。<br>实际的案例是，经过几年多个团队持续不屑的填坑，阿里内部已经有应用级的录制回放工具了，数百个应用成功的是用了它，把不可能回归的任务变成了可能（上万数量级的case当天生成，当天投入使用，并可以分析覆盖率），自动化测试实施需要付出的工作时间革命性降低（不足原来付出时间的10%）。</p><p>你能讲出自己做过5个以上这样的成功例子，我敢保障，你也会被1线大厂疯抢。职级基本都是专家起。</p><h4 id="其它能力"><a href="#其它能力" class="headerlink" title="其它能力"></a>其它能力</h4><p>测试是个万金油，高阶一些的职位需要什么都要会一些 ，因为越高阶的职位需要解决的问题越综合，需要打交道的人的种类越多。不然很容易变成你职业短板，做个list吧（一定不全）：<br>很好的项目管理能力，至少与开发经理能力同级，甚至要强于他。<br>一定的软件架构能力。<br>一定的产品sense：可以跟一个资深的产品经理能够顺畅的交流，明白知道他为什么会这么想，所要实现产品的意义，路径；从产品质量方面的考虑要超过产品经理，给他输出。<br>极好的沟通能力。<br>团队管理能力（这个太重要）<br>目标管理能力<br>有一个好的内核（上面提到过）</p><h3 id="怎么转型-怎么进阶？"><a href="#怎么转型-怎么进阶？" class="headerlink" title="怎么转型/怎么进阶？"></a>怎么转型/怎么进阶？</h3><p>其实不难，没有什么高端的方法。下面这4条就够了，核心秘密就是坚持不懈。</p><p><strong>熟悉你的被测系统，熟悉你的被测系统，熟悉你的被测系统。</strong> </p><p>能够从技术、业务角度做到对被测系统熟悉是做一个好QA的最基本职业素养，也是能力提升的最主要源泉。<br>自检点：我能够画出系统的架构图么？我能够读懂开发的代码么？我熟悉常见的业务监控系统么？熟悉日志系统么？知道开发是如何调试和定位问题的么？给我一个线上问题，我能定位么？我能给别人完整的介绍这个域的核心业务么？我能自己直接动手发布上线一个系统么？知道如何回滚么？灰度是如何做的？ 我知道所有关键的技术点么，如一个交易的幂等性是如何实现的？我在团队中有：“这家伙对系统最熟”的口碑么？<br>如果自检点全部是否定答案。。。 花一年时间把它全变成肯定答案。这一过程，你一定被迫学到了很多很多，并且获得了极为长足的成长，这是进阶的必由之路，也是卡了很多人的地方。 如果说做不到，后面不用看了，前面的也全部忘掉吧。<br>方法：通读所有文档，强迫自己读代码，积极参与开发所有讨论，不懂的狂问，观察开发如何上线，如何排查问题，模仿，学习，善用搜索引擎，总结。。。</p><p><strong>找到问题解决问题，找到问题解决问题，找到问题解决问题。</strong> </p><p>你一定有一堆问题，如果你觉得自己做得挺好，没有问题要解决，那必然是你自己有巨大的问题！<br>自检点：找一支笔，写出你觉得质量方面，你的team的10个问题，做排序。排出最重要的3个。<br>方法：找到top3的问题，选一个，列个接话，去解决。如果找不出来，使劲去观察，然后去看看做的好的同行，比比你比人家差在哪里。尝试去解决这些问题，从小问题，能够见到效果的问题入手，设置一个时间点。你真正解决了5个以上问题以后，感觉一定会有。</p><p><strong>系统学习，系统学习，系统学习</strong></p><p>自检点：我系统的学过一门知识么？我能讲清楚我这么操作，我写的这行代码的原理么？<br>方法：从工作出发，确认你需要补足哪些知识。从网上找一个具体知识的学习路线图，订个计划，照着来。 参加学习小组，找到帮你解决难题的人，多请他吃饭，多请教他。获取知识后，马上回到工作中做检验。还是学以致用才能有所增长。结合工作来系统学习的效果是最好的。<br>再举个例子：<br>上家公司有个小伙伴（他应该也会泡这个社区），开始应聘的时候，他说熟悉jenkins，用的很多。所以第一份工作是：把所有CI的日常工作交给了他，并告知2个月内要全部搞定。 他一下懵逼了，原来那些不深入的理解支撑不了工作要求。后来他每天死磕，看了jenkins所有的文档（对，几乎所有文档通读了一遍），翻了无数问题的解决帖子，记录了上百个问题解决的过程，写了上百篇jenkins的小blog（现在还没公布出来）。几个月以后，他比我熟了，他的一项基础能力成长为：可以独自给一个小公司完整的搞定前端、后端、移动端的一整套CI解决方案。其实单凭这一套，就能找到不错的工作了。这是依托工作，系统性学习的结果。</p><p>看到有同学说要裸辞，去接受培训。我的建议是，别这样。裸辞你就失去了学以致用的阵地，失去了真正解决问题的机会，还失去了资金来源。依托工作，自主学习是王道。自己饶过不去坎，其实有很多网上教程和脱产培训班啊。</p><p><strong>选择有挑战的团队，选择有挑战的团队</strong> </p><p>自检点：在团队里有很多人比我强么？周围的同事都是我佩服的么？我做的事儿有挑战么？ 方法：如果这三点都是否定的，并且你处于职业生涯的早期。也许（只是也许），你该考虑一下换个团队了。<br>总结<br>偏重技能角度讲了讲市场的需求和QA如何做如何满足市场需求。行文仓促，认识有限，其实也并没有什么新东西。欢迎讨论拍砖啊：）</p><p>最后放一篇老文，前google测试总监写的，写了快10年了，但我觉得常读常新。</p><p>———————————————————–我是分割线——————————————–</p><p>经营成功的测试职业生涯<br>(James A. Whittaker）</p><h3 id="你是如何开始做测试工作的？"><a href="#你是如何开始做测试工作的？" class="headerlink" title="你是如何开始做测试工作的？"></a>你是如何开始做测试工作的？</h3><p>1989年，我在田纳西大学读研究生的时候，完成了从软件开发人员到软件测试人员的转型。而这一转型并非出于我自己的选择。我命运的改变发生在一个早晨，我的教授质问我为什么缺席那么多开发会议。我解释说因为会议被安排在星期六早上，很不方便。</p><p>而怍为一个生平第一次离开家的新入校的研究生，这个时间段有些麻烦。十分有意思的是，等待我的惩罚并不是一纸解聘通知书，而是被判罚为该小组的唯一一个测试人员，且不能与开发团队有任何交流。</p><p>对于我的职业生涯来说，这是一个意义多么重大的决定啊！正是这个决定最终成就了几十篇关于测试的论文，构建了多得连我自己也记不清的各种工具，出版了五本书，带来了无尽的快乐工作时间。测试一直就是我拥有的那份具有创造性和技术挑战性的快乐职业。不过，并不是所有人都喜欢这样。可以说我最早接触测试是在攻读研究生期问，不可否认，那时的高强度学习和工作确实让我受益匪浅。另外，我认为从初学者阶段到专家阶段之间存在着一个“测试的山峰”，人们需要通过一系列个人辅导、获取信息和接受常规指导来翻越山峰。成为一个测试初学者是很容易的，成为职业的测试人员也并不艰难。本章的重点正是讨论如何翻越那座位于职业测试人员和测试专家之间的山峰。</p><h3 id="回到未来"><a href="#回到未来" class="headerlink" title="回到未来"></a>回到未来</h3><p>在软件测试领域，时间似乎已经停滞了。我们在21世纪做事的方法与上个世纪几乎完全相同。Bill Hetzel在1972年出版的测试知识丛书至今仍然相当有价值。而我自己所写，于2002年首次出版的How to Break Software(如何攻破软件)系列，到今天仍被作为实用软件测试技术主要资源的代名词。</p><p>确实，如果我们可以把20世纪70年代的测试人员转换时空用在今日，我猜想他们的的技巧足够应付现代软件的测试。当然，他们需要学习网络和各种网络协议，但是他们拥有的实际测试技术将能得到很好的应用。如果从20世纪90年代找一个测试人员，则不几乎不需要任何训练。</p><p>对于开发人员来说，却不是这样，他们所掌握的那些上世纪的技巧几乎已经完全过 时。让一个有一段时间不写代码的人重新开始编程，看看会有什么样的反应。让我感到很不安的是，我们可以从马路上直接雇用人手，而雇来的这些人从第一天起就能够测试，就能够有收获。事情真的有那么简单吗？或者是我们的期望值只有那么低？让我更加不安的是，我们没有任何可预测的方式将合适的测试人才从胜任工作状态训练为测试专。测试真的就那么困难吗？</p><p>这又是那个山峰了。门槛很低，但通往精通的道路却很艰难。</p><p>在通往测试山峰的入口，我们倚仗的是这样一个事实：测试的很多方面都很容易掌握。大多数人都可以学得有模有样。甚至只要将一点点常识应用于输入的选择,就可以找出缺陷。这个层次的测试就如同在桶里钓鱼，简单到足以让任何人都认为自己很聪明。然而过了入口以后，道路迅速陡峭起来，而测试知识变得越来越晦涩难懂。我们发现有人擅长于此，我们称这些人为“有天赋的人”，并欣赏他们的本能。</p><p>难道一定要依靠本能么？对于那些看起来不具备特长的人们，是否存在着一条翻越山峰的途径？是否可以以某种方法传授测试技能以培养出更多的专家呢？为认为这座山峰是可以通行的，而这一章正是我关于应该如何走这条路的笔记，你可以在自己的职业生涯中加以应用。这并不是一份食谱配方，一份职业生涯烹调书。不过你可以做一些事情来加速你的职业成长。但是，正如你可能已经猜到的，真正是说来容易，做起来难。</p><h4 id="上山"><a href="#上山" class="headerlink" title="上山"></a>上山</h4><p>测试职业的早期阶段主要是为征服测试山峰的漫长攀登做准备。我所能给出的最好的建议是从两个方面来思考问题。对于你参与的每一个项目，都有两部分（不一定相等）的任务。第一部分的任务是保证当前的测试项目获得成功。而第二部分的任务是学习你应该做些什么以便使下一个测试项目更加容易。我把它称为“测试今天的项目，准备明天的项目”。如果你做每一个项目把它都分割成为上述的两半，那么几乎可以保证你能持续获得进步。这样，你就可以随着每一个参与的项目逐渐成长为更优秀的测试人员。</p><p>现在就让我们来关注第二部分的任务——为下一个项目做准备。我们需要注意三个概念：重复、技术和漏洞。</p><h5 id="重复"><a href="#重复" class="headerlink" title="重复"></a>重复</h5><p>做任何一件事，绝不要重复两次而不意识到或质疑这其实是个问题。我希望所有年轻的测试人员都牢记这一点。我见过很多初学者，他们在单调的任务上浪费了太多的时间，比如，设置测试机器，配置测试环境，在实验室里安装待测试的应用程序，选择一个产品版本来测试-这些任务列表可以变得很长，最后你会发现真正花在测试软件上的时间少得可怜。</p><p>这是许多新手常犯的错误。他们没能看到他们日复一日所做的工作的重复本质，儿当他们意识到这种重复时，几个小时已经过去了，而在这几个小时内他们没有做任何实际的测试工作。关注这些重复劳动，并且留意由此造成的真正的软件测试工作时间的流逝。为了能翻过测试的山峰，必须做一个测试人员应该做的工作，而不是实验室管理员或者测试机管理员的工作。</p><p>测试自动化是解决重复劳动的方案，也是本章稍后的主题。</p><h5 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h5><p>测试人员常常会对软件失效进行分析。分析缺陷时，我们从开发人员的失败中学习如何编写可靠的代码。我们也分析那些被我们忽略的缺陷。在应用程序上市以后，客户就会开始报告缺陷，我们将要面对处理一大堆失效的情形并寻找其中的重要缺陷。用户报告的每一个缺陷都说明我们的流程有问题，我们的测试知识还不够完善。</p><p>但是分析我们的成功也同样重要，儿许多新入职的测试人员却没能利用这个唾手可得的资源。我们在测试中找到的每一个缺陷都说明我们的的测试流程正在有效工作，都是一次成功。我们需要紧紧抓住这种绝好的机会，只有这样才能使成功不断的重复下去。</p><p>运动队常常这样做，他们会观看比赛录像，并分析每一个动作为什么奏效或者为什么不奏效。我清楚地记得一个小故事，我的一个朋友拍下了我儿子踢足球的一些照片。其中一张照片记录了她踢球的瞬间，那个球超过对方守门员成功进球了。当我把它给我儿子看时，我之处他站立的那条腿的姿势非常完美，他踢球的脚尖紧绷且出球点在鞋带间恰到好处的位置上。他盯着那张照片很长时间，从那以后他很少用不正确的姿势踢球。他那次得分可能只是碰巧做对了，但从此以后他有意识的运用这些技术使之接近完美。</p><p>现在回到新手测试人员的课程上来。我们每一个人都会有得意的时刻。我们找到重要的漏洞或发现优先级很高的缺陷，并为此雀跃不已。不过先花点时间考虑一下整体状况。我们使用什么技术找到了那个缺陷？我们是否可以创建一种方法来找到更多这类缺陷？我们是否可以记住…些实际的测试经验并不断地加以应用来帮助提高我们的工作效率？软件的哪些症状可以提示我们它具有缺陷？我们将来能否从那些症状中得到更多的警示？换句话说，这不仅仅是一个缺陷或是一次成功，这个缺陷教会了我们什么，是否使得我们将来成为更好的测试人员正如我儿子的进球一样，尽管第一个缺陷是偶然间发现的，但它不代表其余的成功都是偶然。理解我们成功的原因很重要，只有这样做，成功才能被复制。对于测试人员来说，这种保证成功的原因就是一系列的测试技术、建议和工具，它们可以提高我们在未来项目中的工作效率。</p><h5 id="漏洞"><a href="#漏洞" class="headerlink" title="漏洞"></a>漏洞</h5><p>测试人员最终都会变得很擅长寻找缺陷，但是要翻过测试的高峰，我们必须更快并且更有效率：高速低阻。换句话说，我们必须拥有一种本身不含缺陷的缺陷查找技术！</p><p>我喜欢这样来考虑问题：测试人员检视自己的工作时也需要发挥那种寻找缺陷的能力。我们必须使用和寻找产品缺陷一样的流程来寻找我们自己的测试流程，测试过程中的缺陷。我的测试流程是不是有问题？这里面是否有缺陷？这里是否存在着妨碍我提高效率的障碍？</p><p>你必须一直寻找更好的方法。有意识地去确定那些限制能力、阻碍前进、减缓速度的东西。就像缺陷限制了软件满足用户需求的能力一样，是什么限制了测试的能力？使用你拥有的测试能力来最优化自己的测试流程，这会帮助你在测试的山峰上快速攀登并增加你翻越山峰后成为专家的机会。</p><p>测试山峰的巅峰处是一个美好的地方。如果你成功地到了那里，恭喜你．但这并不是最终日标。这表示你已经成为一个杰出的测试人员。而此时的下坡路就是用你的洞察力和专家知识来帮助周围的人也成为优秀的测试人员。自己一个人登顶是一回事，帮助其他人（那些能力不如你的人）登顶却完全是另外一回事。</p><p>一般来说，那些成功登上测试巅峰的人会成为使用工具的大师。那些商业工具、开开源免费工具,和自己写的工具（我个人最喜欢的工具）是极好地提高工作产出、增加工作成效的方法。不过，工具只是实现该目标的一种方法，但在许多其他方面它反而是一种限制，因为太多的人看不到工具的功能之外的东西。他们被限制在工具能为他们所做的事情中，没能看到或理解对工具还有更多的需求。登顶需要真正掌握的是“信息”。因为很多工具能处理信息，并使得信息的获取更加容易，所以测试人员变得过于依赖于他们的工具。但是信息本身以及如何利用这些信息才是真正的成功关键。</p><p>熟练掌握信息，指理解有哪些信息，这些信息将如何影响测试，保证最大限度地利用这些影响。有几类信息是测试登顶者必须关注的。这里我要谈的是其中两种：来自应用程序的信息和来自之前测试的信息。</p><p>来自应用程序的信息包括需求、体系结构、代码结构、源代码……甚至是关于应用程序在执行时做了哪些事情的运行信息。在编写和执行测试用例时，需要考虑这类信息，但信息的多寡在很大程度上取决于测试人员的能力，这是一种能够使测试更高效的能力。在测试中使用这类信息越多，测试就越偏向于工程而不是猜测。</p><p>在微软，我们有一个游戏测试组织（Games Test Organization,GTO），负责Xbox和PC游戏的测试。谈到利用应用程序的信息，他们是最优秀的。游戏是难以想象的丰富，测试起来非常复杂。游戏中很多可测试的内容都是隐藏的（因为让那些玩家找寻可以交换的物品正是游戏的乐趣之一）o如果GTO的测试人员所做的仅仅是玩游戏，那么他们找到的问题不会比最终用户更多。为了能做得更好，他们与游戏的开发人员合作创建了一些信息控制板，这些控制板暴露了一些基本上可以算得上作弊的信息给测试人员。这样，测试人员就能提前知道怪物会被投放在何处、物品被隐藏在哪里，他们可以看到墙的另一边，可以控制敌方的某些行为。他们的作弊工具（即测试工具）基本上使他们成为游戏里的神，让他们可以控制看到的信息以便更快更巧妙地测试。这个例子给有测试人员都上了一课。</p><p>来自测试的信息意味着你必须关注在测试时所做的一切，并使用获得的信息来影响今后的测试。你是否知道你的测试是如何与需求结合的，知道何时某一特定需求已经得到足够的测试？你是否使用代码覆盖率来影响未来的测试？你知道当代码更新或缺陷修复时那些测试会受到影响，还是知识重新运行所有的测试？理解测试进行到什么程度并随着测试调整测试策略，这是测试成熟的标志。</p><p>我以前曾在微软的Visual Studio的一个小组工作过，我们大量使用代码改动量（由于添加新特性或修复缺陷而改变的代码）和代码覆盖来影响我们的测试。我们花了很大的力气将代码覆盖和代码改动量通知测试人员，帮助他们理解哪些测试用例对覆盖率有贡献，帮助他们测试改动过的或修改过的组件。最终的结果是在代码确实被改动时，我们清楚地知道哪些测试会被影响而只重新运行那些测试。我们还知道每个新的测试用例是如何对总体的接口，特性和代码覆盖率产生作用的，从而指导我们的测试人员，让团队中的每个人在他们所创建的所有测试用例基础上，写出更有意义的测试。</p><p>你用哪些信息来指导你的测试？你如何保证信息是可获取的，以便在测试中随时可以得到？你如何使得信息变得有用，以便它能以良好的方式影响你的测试？这些问题的答案将决定你在走下专家测试山峰时的前进速度。</p><h4 id="下山"><a href="#下山" class="headerlink" title="下山"></a>下山</h4><p>到达测试山峰的顶峰的时候，你已经成为一个十分能干的测试人员了，能力也许相当于你组里所有同事能力的总和。无论你在做什么，请不要试图做得比你的整个团队都好，不管你对此感觉有多好，或是你的老板对你遏得有多紧。一旦你走在下坡的路上，就不要再去争取“找到最多缺陷的人”或是“找到最有意义缺陷的人”这样的荣誉头衔。反而我推荐你减少花在测试上的时间，而把创新作为你的首要任务。</p><p>在测试上创新指不急于向前，而是仔细观察、洞察先机、找到瓶颈并改进团队中所有其他人的工作方式。你的工作变为帮助其他人进步。在微软，我们有一个专门为此而设的正式职位——测试架构师。不过，不要因为缺少一个很酷的头衔而让你沮丧。无论别人怎么称呼你，当你在“下坡的路上，你能做的最好的事就是尽量保证更多的人能成功地爬上山峰的另一侧。</p><h3 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a>原文地址</h3><blockquote><p><a href="https://testerhome.com/topics/16354">聊一聊职业发展</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 测试之道 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Grafana展示Jmeter数据</title>
      <link href="2018/09/27/%E4%BD%BF%E7%94%A8Grafana%E5%B1%95%E7%A4%BAJmeter%E6%95%B0%E6%8D%AE/"/>
      <url>2018/09/27/%E4%BD%BF%E7%94%A8Grafana%E5%B1%95%E7%A4%BAJmeter%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>Jmeter对接Grafana</p><a id="more"></a><p>使用jmeter进行压测，压测过程中的测试结果，直接使用<code>聚合报告</code>的话，看的不是很直观，jmeter自带的插件，出的图和zabbix原生的图一样的很丑。。。所以，在万能的互联网上找了找使用<code>Grafana</code>展示jmeter结果的方案</p><h3 id="Jmeter-Influxdb-Grafana"><a href="#Jmeter-Influxdb-Grafana" class="headerlink" title="Jmeter + Influxdb + Grafana"></a>Jmeter + Influxdb + Grafana</h3><p>整个方案，就是讲jmeter产出的结果，存储到Influxdb中，然后用Grafana展示Influxdb的数据。</p><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>Influxdb和Grafana的安装就不说了，之前写过；直接说配置</p><h5 id="Influxdb"><a href="#Influxdb" class="headerlink" title="Influxdb"></a>Influxdb</h5><p>Influxdb配置文件在<code>/etc/influxdb</code>下，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;influxdb&#x2F;influxdb.conf</span><br></pre></td></tr></table></figure><p>找到<code>graphite</code>项，修改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[[graphite]]</span><br><span class="line">  # Determines whether the graphite endpoint is enabled.</span><br><span class="line">  enabled &#x3D; true</span><br><span class="line">  database &#x3D; &quot;jmeter&quot;</span><br><span class="line">  # retention-policy &#x3D; &quot;&quot;</span><br><span class="line">  bind-address &#x3D; &quot;:2003&quot;</span><br><span class="line">  protocol &#x3D; &quot;tcp&quot;</span><br><span class="line">  consistency-level &#x3D; &quot;one&quot;</span><br></pre></td></tr></table></figure><p>重启influxdb,<code>systemctl restart influxd</code></p><p>新建jmeter数据库，在<code>chronograf</code>中或者进服务器，<code>influx</code>进influxdb控制台手工创建：<code>CREATE DATABASE &quot;jmeter&quot;</code>,<br>在grafana中添加上这个influxdb即可</p><h5 id="Jmeter"><a href="#Jmeter" class="headerlink" title="Jmeter"></a>Jmeter</h5><p>Jmeter其他脚本步骤和之前一样，线程组中添加一个组件：<code>监听器-Backend Listener</code>，修改<code>graphiteHost</code>地址为influxdb的IP，其他值可以默认</p><h5 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h5><p>执行一次请求，可以到influxdb数据库中查看是否生效<br><code>use jmeter;</code>,<code>show measurements</code>即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zabbix_agentd.d]# influx</span><br><span class="line">Connected to http:&#x2F;&#x2F;localhost:8086 version 1.6.1</span><br><span class="line">InfluxDB shell version: 1.6.1</span><br><span class="line">&gt; use jmeter;</span><br><span class="line">Using database jmeter</span><br><span class="line">&gt; </span><br><span class="line">&gt; </span><br><span class="line">&gt; </span><br><span class="line">&gt; show measurements;</span><br><span class="line">name: measurements</span><br><span class="line">name</span><br><span class="line">----</span><br><span class="line">jmeter.all.a.avg</span><br><span class="line">jmeter.all.a.count</span><br><span class="line">jmeter.all.a.max</span><br><span class="line">jmeter.all.a.min</span><br><span class="line">jmeter.all.a.pct90</span><br><span class="line">jmeter.all.a.pct95</span><br><span class="line">jmeter.all.a.pct99</span><br><span class="line">jmeter.all.h.count</span><br><span class="line">jmeter.all.ko.count</span><br><span class="line">jmeter.all.ok.avg</span><br><span class="line">jmeter.all.ok.count</span><br><span class="line">jmeter.all.ok.max</span><br><span class="line">jmeter.all.ok.min</span><br><span class="line">jmeter.all.ok.pct90</span><br><span class="line">jmeter.all.ok.pct95</span><br><span class="line">jmeter.all.ok.pct99</span><br><span class="line">jmeter.test.endedT</span><br><span class="line">jmeter.test.maxAT</span><br><span class="line">jmeter.test.meanAT</span><br><span class="line">jmeter.test.minAT</span><br><span class="line">jmeter.test.startedT</span><br></pre></td></tr></table></figure><p>这样就成功将数据加到influxdb里了</p><h5 id="grafana配置"><a href="#grafana配置" class="headerlink" title="grafana配置"></a>grafana配置</h5><p>添加dashboard，正常添加图形，数据库选择influxdb中jmeter的数据库,SELECT项选择想要展现的栏即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jmeter.all.h.count所有请求的TPS</span><br><span class="line">jmeter.&lt;请求名称&gt;.h.count 对应&lt;请求名称&gt;的TPS</span><br><span class="line">jmeter.all.ok.pct9090%的请求响应时间</span><br><span class="line">jmeter.&lt;请求名称&gt;.ok.pct99 对应&lt;请求名称&gt;99%的请求响应时间</span><br><span class="line">jmeter.all.test.startedT线程数</span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/yyhh/p/5990228.html">参考Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7搭建单机Redis</title>
      <link href="2018/09/26/Centos7%E6%90%AD%E5%BB%BA%E5%8D%95%E6%9C%BARedis/"/>
      <url>2018/09/26/Centos7%E6%90%AD%E5%BB%BA%E5%8D%95%E6%9C%BARedis/</url>
      
        <content type="html"><![CDATA[<p>Centos7搭建单机版Redis</p><a id="more"></a><p>工作需要，需要一个redis服务器来做缓存数据库，作为一个当下风靡的工具，至少还是应该知道怎么搭建<br>本次介绍内容为单机版搭建过程，集群部分，还没实践过，，</p><h3 id="工具准备"><a href="#工具准备" class="headerlink" title="工具准备"></a>工具准备</h3><p>首先Centos7服务器，然后装个<code>wget</code>，开始</p><h4 id="安装包下载"><a href="#安装包下载" class="headerlink" title="安装包下载"></a>安装包下载</h4><p><code>https://redis.io/download</code>官网下有很多版本，正常下载稳定版即可，当然，Beta版可能也有很多优化可以装了试试。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-4.0.11.tar.gz</span><br></pre></td></tr></table></figure><h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf redis-4.0.11.tar.gz</span><br><span class="line"></span><br><span class="line">cd redis-4.0.11</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装完之后，根据内部既定的shell脚本，会在<code>/usr/bin</code>目录下自动创建好redis的可执行文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-rwxr-xr-x. 1 root root 2450840 Sep 26 16:04 redis-benchmark</span><br><span class="line">-rwxr-xr-x. 1 root root 5742360 Sep 26 16:04 redis-check-aof</span><br><span class="line">-rwxr-xr-x. 1 root root 5742360 Sep 26 16:04 redis-check-rdb</span><br><span class="line">-rwxr-xr-x. 1 root root 2605120 Sep 26 16:04 redis-cli</span><br><span class="line">lrwxrwxrwx. 1 root root      12 Sep 26 16:04 redis-sentinel -&gt; redis-server</span><br><span class="line">-rwxr-xr-x. 1 root root 5742360 Sep 26 16:04 redis-server</span><br></pre></td></tr></table></figure><p>redis的启动和很简单，在<code>/usr/bin</code>目录下执行<code>redis-server</code>即可启动；<code>redis-cli SHUTDOWN</code>即可停止</p><h3 id="服务化"><a href="#服务化" class="headerlink" title="服务化"></a>服务化</h3><p>通常在Linux下启动都原因是使用服务的方式启动，比如启动nginx和MySQL：<code>systemctl start nginx</code>和<code>systemctl start mysql</code>那也可以把redis配置到服务中，使用类似的方式来启动redis</p><h4 id="chkconfig"><a href="#chkconfig" class="headerlink" title="chkconfig"></a>chkconfig</h4><p>linux的服务通过<code>chkconfig</code>来管理，可以先执行下<code>chkconfig</code>来查看当前系统已有的服务：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf65tvx7it01x88bzbp5z ~]# chkconfig</span><br><span class="line"></span><br><span class="line">Note: This output shows SysV services only and does not include native</span><br><span class="line">      systemd services. SysV configuration data might be overridden by native</span><br><span class="line">      systemd configuration.</span><br><span class="line"></span><br><span class="line">      If you want to list systemd services use &#39;systemctl list-unit-files&#39;.</span><br><span class="line">      To see services enabled on particular target use</span><br><span class="line">      &#39;systemctl list-dependencies [target]&#39;.</span><br><span class="line"></span><br><span class="line">aegis          0:off1:off2:on3:on4:on5:on6:off</span><br><span class="line">agentwatch     0:off1:off2:on3:on4:on5:on6:off</span><br><span class="line">cloudmonitor   0:off1:off2:on3:on4:on5:on6:off</span><br><span class="line">netconsole     0:off1:off2:off3:off4:off5:off6:off</span><br><span class="line">network        0:off1:off2:on3:on4:on5:on6:off</span><br></pre></td></tr></table></figure><h4 id="redis服务化"><a href="#redis服务化" class="headerlink" title="redis服务化"></a>redis服务化</h4><p>想要将redis服务化，就需要将redis 的启动脚本加到系统服务中去，而系统服务的脚本存储路径是<code>/etc/init.d</code>，也就是，只需要将redis的启动脚本加到<code>/etc/init.d</code>文件夹下，再添加到<code>chkconfig</code>即可。</p><p>在之前下载的redis源码下有个初始化脚本文件<code>redis_init_script</code>（路径：路径/redis-4.0.11/utils），将这个文件拷贝到<code>/etc/init.d</code>下并且命名为<code>redis_自定义的端口</code>（例如redis_6379）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp &#x2F;路径&#x2F;redis-4.0.11&#x2F;utils&#x2F;redis_init_script &#x2F;etc&#x2F;init.d&#x2F;redis_6379</span><br></pre></td></tr></table></figure><p>然后进入<code>/etc/init.d</code>目录，修改初始化脚本<code>vim redis_6379</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">增加（头部，第3行后增加即可）</span><br><span class="line"></span><br><span class="line"># chkconfig: 2345 90 10 </span><br><span class="line"># description: Redis is a persistent key-value database</span><br><span class="line"></span><br><span class="line">修改</span><br><span class="line"></span><br><span class="line">REDISPORT&#x3D;6379   （大约第六行）</span><br></pre></td></tr></table></figure><p>效果差不多是这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line">#</span><br><span class="line"># Simple Redis init.d script conceived to work on Linux systems</span><br><span class="line"># chkconfig: 2345 90 10 </span><br><span class="line"># description: Redis is a persistent key-value database</span><br><span class="line"># as it does use of the &#x2F;proc filesystem.</span><br><span class="line"></span><br><span class="line">REDISPORT&#x3D;6379</span><br></pre></td></tr></table></figure><h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><p>首先创建放置配置文件的文件夹：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;etc&#x2F;redis</span><br><span class="line"></span><br><span class="line">cd &#x2F;var</span><br><span class="line">mkdir -p .&#x2F;redis&#x2F;6379(端口号)</span><br></pre></td></tr></table></figure><p>将源文件下配置文件模板<code>路径/redis-4.0.11/redis.conf</code>复制到<code>/etc/redis</code>目录下，并且以端口号重命名：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp 路径&#x2F;redis-4.0.11&#x2F;redis.conf &#x2F;etc&#x2F;redis&#x2F;6379.conf</span><br></pre></td></tr></table></figure><p>修改配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">port 6636  （第92行）</span><br><span class="line">daemonize yes  （第136行）</span><br><span class="line">pidfile &#x2F;var&#x2F;run&#x2F;redis_6636.pid  （第158行）</span><br><span class="line">dir &#x2F;var&#x2F;redis&#x2F;6379   (第263行)</span><br></pre></td></tr></table></figure><p>保存退出。</p><h4 id="添加服务"><a href="#添加服务" class="headerlink" title="添加服务"></a>添加服务</h4><p>一条命令即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig redis_6379 on</span><br></pre></td></tr></table></figure><p>这样就可以使用<code>service redis_6379 start</code>来启动redis了，同样<code>service redis_6379 stop</code></p><p>效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis]# service redis_6636 start</span><br><span class="line">Starting Redis server...</span><br><span class="line">120037:C 26 Sep 16:18:04.701 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">120037:C 26 Sep 16:18:04.701 # Redis version&#x3D;4.0.2, bits&#x3D;64, commit&#x3D;00000000, modified&#x3D;0, pid&#x3D;120037, just started</span><br><span class="line">120037:C 26 Sep 16:18:04.701 # Configuration loaded</span><br></pre></td></tr></table></figure><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>其实，用服务启动redis，就是使用将启动脚本加到chkconfig，启动<code>/etc/init.d</code>下的<code>redis_6379</code>脚本，根据脚本中的配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EXEC&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;redis-server</span><br><span class="line">CLIEXEC&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;redis-cli</span><br><span class="line"></span><br><span class="line">PIDFILE&#x3D;&#x2F;var&#x2F;run&#x2F;redis_$&#123;REDISPORT&#125;.pid</span><br><span class="line">CONF&#x3D;&quot;&#x2F;etc&#x2F;redis&#x2F;$&#123;REDISPORT&#125;.conf&quot;</span><br></pre></td></tr></table></figure><p>真正的server启动目录：/usr/local/bin/redis-server<br>配置文件路径：/etc/redis/${REDISPORT}.conf<br>再根据<code>/etc/redis/6379.conf</code>内的配置，启动相应的端口，保存到相应的目录等</p><h3 id="参考文件"><a href="#参考文件" class="headerlink" title="参考文件"></a>参考文件</h3><blockquote><p><a href="https://www.jellythink.com/archives/379">Redis集群搭建</a><br><a href="https://www.cnblogs.com/renzhicai/p/7773080.html">Centos下redis搭建</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux查看端口使用情况</title>
      <link href="2018/09/20/Linux%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/"/>
      <url>2018/09/20/Linux%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/</url>
      
        <content type="html"><![CDATA[<p>Linux 查看监听端口</p><a id="more"></a><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p>netstat命令常用参数说明（有事没事<code>man netstat</code>查看完整参数）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-n：直接使用ip地址，而不通过域名服务器</span><br><span class="line"></span><br><span class="line">-l：仅显示监控中的服务器的Socket</span><br><span class="line"></span><br><span class="line">-p：显示进程PID和进程名称</span><br><span class="line"></span><br><span class="line">-t：显示TCP端口</span><br><span class="line"></span><br><span class="line">-u：显示UDP端口</span><br></pre></td></tr></table></figure><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p>配合grep可以很方便查看当前服务器上监听的端口，方便查询服务是否正常启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -npl | grep 5001</span><br></pre></td></tr></table></figure><p>查看<code>5001</code>端口使用情况</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -nplt</span><br></pre></td></tr></table></figure><p>查看所所有TCP协议端口使用情况</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> netstat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter分布式环境搭建</title>
      <link href="2018/09/17/Jmeter%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>2018/09/17/Jmeter%E5%88%86%E5%B8%83%E5%BC%8F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>Jmeter分布式环境搭建</p><a id="more"></a><p>本地机器配置限制，并发线程数达不到性能要求时候，就要考虑搭建jmeter分布式环境来进行压测</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>1、Jmeter分布式测试时，选择其中一台作为调度机(master)，其它机器做为执行机(slave)。</p><p>2、执行时，master会把脚本发送到每台slave上，slave 拿到脚本后就开始执行，slave执行时不需要启动GUI，我理解它应该是通过命令行模式执行的。</p><p>3、执行完成后，slave会把结果回传给master，master会收集所有slave的信息并汇总。</p><p>示例有三台机器，ip分别为：192.168.3.1,192.168.3.2,192.168.3.3；其中192.168.3.3作为调度机，启动GUI界面</p><h3 id="执行机（slave）配置"><a href="#执行机（slave）配置" class="headerlink" title="执行机（slave）配置"></a>执行机（slave）配置</h3><p>前提条件是执行机所在服务器已经搭建好jmeter执行环境，并且有安装jmeter（建议执行机和调度机jmeter版本完全一致，省的麻烦）<br>进行执行机中（192.168.3.1,192.168.3.2）jmeter安装目录<br>1，编辑<code>jmeter.properties</code>，找到<code>server_port=1099</code>，以及<code>server.rmi.localport=1099</code>修改端口,修改<code>server.rmi.ssl.disable=true</code>；该端口就是启动<code>jmeter-server.bat</code>之后，控制台显示的端口，也是调度机调度的端口</p><p>2，启动<code>jmeter-server.bat</code>，控制台打印信息类似：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Created remote object: UnicastServerRef2 [liveRef: [endpoint:[192.168.3.1:1099]</span><br><span class="line">local),objID:[1bfcefd1:165e6dc02e3:-7fff, 2154557740781192439]]]</span><br></pre></td></tr></table></figure><h3 id="调度机（master）配置"><a href="#调度机（master）配置" class="headerlink" title="调度机（master）配置"></a>调度机（master）配置</h3><p>1，找到bin目录下的<code>jmeter.properties</code>，修改配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">remote_hosts&#x3D;192.168.3.1:1099,192.168.3.2:1099</span><br><span class="line">server_port&#x3D;1099</span><br><span class="line">server.rmi.port&#x3D;1099</span><br><span class="line">server.rmi.localport&#x3D;1099</span><br><span class="line">server.rmi.ssl.disable&#x3D;true</span><br></pre></td></tr></table></figure><p>保存退出<br>2，启动GUI（jmeter.bat），打开测试脚本，点击菜单栏的运行，选择远程启动全部（或者指定某台执行机）</p><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>1，如果进行了参数化，需要在执行机上和调度机一模一样的路径放置参数化文件</p><p>2，启动执行机时候如果有报错：<code>rmi-keystore.jks（系统找不到指定文件）</code><br>解决办法：编辑<code>jmeter.properties</code>，修改参数：<code>server.rmi.ssl.disable=true</code>即可</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql开启全SQL执行记录</title>
      <link href="2018/09/13/Mysql%E5%BC%80%E5%90%AF%E5%85%A8SQL%E6%89%A7%E8%A1%8C%E8%AE%B0%E5%BD%95/"/>
      <url>2018/09/13/Mysql%E5%BC%80%E5%90%AF%E5%85%A8SQL%E6%89%A7%E8%A1%8C%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>MySQL记录全执行SQL语句</p><a id="more"></a><p>遇到性能问题时候，排查到数据库部分，一般都是看慢sql，但是有的时候慢sql也看不出什么东西，这个时候，如果可以有办法记录所有执行的sql，那排查起来可以更方便点。</p><h3 id="开启日志查询功能"><a href="#开启日志查询功能" class="headerlink" title="开启日志查询功能"></a>开启日志查询功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#39;general%&#39;;</span><br></pre></td></tr></table></figure><p>返回结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------------------+----------------------------------------------+</span><br><span class="line">| Variable_name    | Value                                        |</span><br><span class="line">+------------------+----------------------------------------------+</span><br><span class="line">| general_log      | OFF                                          |</span><br><span class="line">| general_log_file | &#x2F;data&#x2F;mysql_data&#x2F;izuf65tvx7it01x88bzbp4z.log |</span><br><span class="line">+------------------+----------------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>可以看出，当前是关闭状态，开启即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set GLOBAL general_log&#x3D;&#39;ON&#39;;</span><br></pre></td></tr></table></figure><p>再查一下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#39;general%&#39;;</span><br></pre></td></tr></table></figure><p>返回结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------------------+----------------------------------------------+</span><br><span class="line">| Variable_name    | Value                                        |</span><br><span class="line">+------------------+----------------------------------------------+</span><br><span class="line">| general_log      | ON                                           |</span><br><span class="line">| general_log_file | &#x2F;data&#x2F;mysql_data&#x2F;izuf65tvx7it01x88bzbp4z.log |</span><br><span class="line">+------------------+----------------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>搞定，这下，调接口之后就会有完成的sql看了。</p><h3 id="binlog"><a href="#binlog" class="headerlink" title="binlog"></a>binlog</h3><p>嗯，这个方式，怎么说呢，自己level太低，不是很看得懂里面记录的，不过binlog文件里记录的的确是全部的sql，最全。<br>binlog使用<code>mysqlbinlog</code>工具来查看。<br>查看binlog状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;%log_bin%&quot;;</span><br></pre></td></tr></table></figure><p>返回结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---------------------------------+----------------------------------+</span><br><span class="line">| Variable_name                   | Value                            |</span><br><span class="line">+---------------------------------+----------------------------------+</span><br><span class="line">| log_bin                         | ON                               |</span><br><span class="line">| log_bin_basename                | &#x2F;data&#x2F;mysql_data&#x2F;mysql-bin       |</span><br><span class="line">| log_bin_index                   | &#x2F;data&#x2F;mysql_data&#x2F;mysql-bin.index |</span><br><span class="line">| log_bin_trust_function_creators | ON                               |</span><br><span class="line">| log_bin_use_v1_row_events       | OFF                              |</span><br><span class="line">| sql_log_bin                     | ON                               |</span><br><span class="line">+---------------------------------+----------------------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>就能看见binlog状态以及保存路径了</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter+Ant+Jenkins接口自动化搭建</title>
      <link href="2018/09/12/Jmeter-Ant-Jenkins%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA/"/>
      <url>2018/09/12/Jmeter-Ant-Jenkins%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%8C%96%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>Jenkins+Ant+Jmeter接口自动化实践</p><a id="more"></a><p>虽然之前就搭过了，也用word写过手册，blog因为不放图片就一直没更新，想想还是稍微记录点简单的过程，方便自己以后想起来。</p><p>这边记录的只有Ant+Jmeter，jenkins部分，还是有图比较直观，就不写了，不过那部分也很简单。</p><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>搭建环境不限，linux，Windows都可以</p><h3 id="需要工具"><a href="#需要工具" class="headerlink" title="需要工具"></a>需要工具</h3><p>ant–下载地址：<a href="http://ant.apache.org/bindownload.cgi">http://ant.apache.org/bindownload.cgi</a><br>jmeter–下载地址：<a href="http://jmeter.apache.org/download_jmeter.cgi">http://jmeter.apache.org/download_jmeter.cgi</a><br>jenkins–下载地址：<a href="https://jenkins.io/">https://jenkins.io/</a><br>jdk—下载地址<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><h3 id="工具安装"><a href="#工具安装" class="headerlink" title="工具安装"></a>工具安装</h3><p>1，    Jenkins也就解压缩，tomcat或者jar启动<br>2，    Jdk安装，配环境变量（JAVA_HOME,path,classpath）<br>(验证：java –version/javac)<br>3，    Ant配环境变量（ANT_HOME,path,classpath）<br>(验证：ant –version/ant)</p><h3 id="Jmeter-Ant"><a href="#Jmeter-Ant" class="headerlink" title="Jmeter+Ant"></a>Jmeter+Ant</h3><p>首先是扩展包<br>将jmeter\extras下ant-jmeter-1.1.1.jar的jar包拷到ant的lib目录下</p><h4 id="配置Ant"><a href="#配置Ant" class="headerlink" title="配置Ant"></a>配置Ant</h4><p>本地创建接口自动化项目保存路径，例如：E:\InterfaceAutoTestCode\Quartz<br>进入路径目录，手工创建build.xml(ant按照build.xml文件内容执行)<br><code>build.xml文件内容</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;project name&#x3D;&quot;ant-jmeter-test&quot; default&#x3D;&quot;run&quot; basedir&#x3D;&quot;.&quot;&gt;</span><br><span class="line">    &lt;tstamp&gt;</span><br><span class="line">        &lt;format property&#x3D;&quot;time&quot; pattern&#x3D;&quot;yyyyMMddhhmm&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;tstamp&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 需要改成自己本地的 Jmeter 目录--&gt;  </span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.home&quot; value&#x3D;&quot;D:\QA\apache-jmeter-4.0&quot; &#x2F;&gt;</span><br><span class="line">&lt;property name&#x3D;&quot;report.title&quot; value&#x3D;&quot;接口测试&quot;&#x2F;&gt;</span><br><span class="line">    &lt;!-- jmeter生成jtl格式的结果报告的路径--&gt; </span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.result.jtl.dir&quot; value&#x3D;&quot;E:\InterfaceAutoTestCode\Quartz\report\jtl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;!-- jmeter生成html格式的结果报告的路径--&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.result.html.dir&quot; value&#x3D;&quot;E:\InterfaceAutoTestCode\Quartz\report\html&quot; &#x2F;&gt;</span><br><span class="line">    </span><br><span class="line">&lt;!--详细报告--&gt;</span><br><span class="line">&lt;property name&#x3D;&quot;detail&quot; value&#x3D;&quot;_detail&quot; &#x2F;&gt;</span><br><span class="line">&lt;!-- 生成的报告的前缀--&gt;  </span><br><span class="line">    &lt;property name&#x3D;&quot;ReportName&quot; value&#x3D;&quot;SmokeReport&quot; &#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.result.jtlName&quot; value&#x3D;&quot;$&#123;jmeter.result.jtl.dir&#125;&#x2F;$&#123;ReportName&#125;$&#123;time&#125;.jtl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.result.htmlName&quot; value&#x3D;&quot;$&#123;jmeter.result.html.dir&#125;&#x2F;$&#123;ReportName&#125;$&#123;time&#125;.html&quot; &#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.result.jtlNamedetail&quot; value&#x3D;&quot;$&#123;jmeter.result.jtl.dir&#125;&#x2F;$&#123;ReportName&#125;$&#123;time&#125;.jtl&quot; &#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jmeter.result.htmlNamedetail&quot; value&#x3D;&quot;$&#123;jmeter.result.html.dir&#125;&#x2F;$&#123;ReportName&#125;$&#123;time&#125;$&#123;detail&#125;.html&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;target name&#x3D;&quot;run&quot;&gt;</span><br><span class="line">        &lt;antcall target&#x3D;&quot;test&quot; &#x2F;&gt;</span><br><span class="line">        &lt;antcall target&#x3D;&quot;report&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;target&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;target name&#x3D;&quot;test&quot;&gt;</span><br><span class="line">        &lt;taskdef name&#x3D;&quot;jmeter&quot; classname&#x3D;&quot;org.programmerplanet.ant.taskdefs.jmeter.JMeterTask&quot; &#x2F;&gt;</span><br><span class="line">        &lt;jmeter jmeterhome&#x3D;&quot;$&#123;jmeter.home&#125;&quot; resultlog&#x3D;&quot;$&#123;jmeter.result.jtlName&#125;&quot;&gt;</span><br><span class="line">             &lt;!-- 声明要运行的脚本。&quot;*.jmx&quot;指包含此目录下的所有jmeter脚本--&gt;</span><br><span class="line">            &lt;testplans dir&#x3D;&quot;E:\InterfaceAutoTestCode\Quartz&quot; includes&#x3D;&quot;*.jmx&quot; &#x2F;&gt;</span><br><span class="line">            &lt;property name&#x3D;&quot;jmeter.save.saveservice.output_format&quot; value&#x3D;&quot;xml&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;jmeter&gt;</span><br><span class="line">    &lt;&#x2F;target&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;path id&#x3D;&quot;xslt.classpath&quot;&gt;</span><br><span class="line">        &lt;fileset dir&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;lib&quot; includes&#x3D;&quot;xalan*.jar&quot;&#x2F;&gt;</span><br><span class="line">        &lt;fileset dir&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;lib&quot; includes&#x3D;&quot;serializer*.jar&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;path&gt; </span><br><span class="line">    </span><br><span class="line">    &lt;target name&#x3D;&quot;report&quot;&gt;</span><br><span class="line">        &lt;tstamp&gt; &lt;format property&#x3D;&quot;report.datestamp&quot; pattern&#x3D;&quot;yyyy&#x2F;MM&#x2F;dd HH:mm&quot; &#x2F;&gt;&lt;&#x2F;tstamp&gt;</span><br><span class="line">        &lt;xslt </span><br><span class="line">              classpathref&#x3D;&quot;xslt.classpath&quot;</span><br><span class="line">              force&#x3D;&quot;true&quot;</span><br><span class="line">              in&#x3D;&quot;$&#123;jmeter.result.jtlName&#125;&quot;</span><br><span class="line">              out&#x3D;&quot;$&#123;jmeter.result.htmlName&#125;&quot;</span><br><span class="line">              style&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;extras&#x2F;jmeter-results-detail-report_21.xsl&quot;&gt;</span><br><span class="line">              &lt;param name&#x3D;&quot;dateReport&quot; expression&#x3D;&quot;$&#123;report.datestamp&#125;&quot;&#x2F;&gt;</span><br><span class="line">       &lt;&#x2F;xslt&gt;</span><br><span class="line">       &lt;xslt </span><br><span class="line">              classpathref&#x3D;&quot;xslt.classpath&quot;</span><br><span class="line">              force&#x3D;&quot;true&quot;</span><br><span class="line">              in&#x3D;&quot;$&#123;jmeter.result.jtlNamedetail&#125;&quot;</span><br><span class="line">              out&#x3D;&quot;$&#123;jmeter.result.htmlNamedetail&#125;&quot;</span><br><span class="line">              style&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;extras&#x2F;jmeter-results-shanhe-me.xsl&quot;&gt;</span><br><span class="line">              &lt;param name&#x3D;&quot;dateReport&quot; expression&#x3D;&quot;$&#123;report.datestamp&#125;&quot;&#x2F;&gt;</span><br><span class="line">       &lt;&#x2F;xslt&gt;</span><br><span class="line">                &lt;!-- 因为上面生成报告的时候，不会将相关的图片也一起拷贝至目标目录，所以，需要手动拷贝 --&gt; </span><br><span class="line">        &lt;copy todir&#x3D;&quot;$&#123;jmeter.result.html.dir&#125;&quot;&gt;</span><br><span class="line">            &lt;fileset dir&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;extras&quot;&gt;</span><br><span class="line">                &lt;include name&#x3D;&quot;collapse.png&quot; &#x2F;&gt;</span><br><span class="line">                &lt;include name&#x3D;&quot;expand.png&quot; &#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;fileset&gt;</span><br><span class="line">        &lt;&#x2F;copy&gt;</span><br><span class="line">    &lt;&#x2F;target&gt;</span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure><p>将需要运行的jmeter脚本，拷到该目录下，cmd，进入该目录，执行ant即可</p><blockquote><p><a href="https://testerhome.com/topics/13389">更详细教程</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
            <tag> Ant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】Linux性能监控与分析</title>
      <link href="2018/08/29/%E3%80%90%E8%BD%AC%E3%80%91Linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/"/>
      <url>2018/08/29/%E3%80%90%E8%BD%AC%E3%80%91Linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>Linux性能监控与分析</p><a id="more"></a><h2 id="Linux服务器性能查看"><a href="#Linux服务器性能查看" class="headerlink" title="Linux服务器性能查看"></a>Linux服务器性能查看</h2><h3 id="CPU性能查看"><a href="#CPU性能查看" class="headerlink" title="CPU性能查看"></a>CPU性能查看</h3><h4 id="查看物理CPU个数："><a href="#查看物理CPU个数：" class="headerlink" title="查看物理CPU个数："></a>查看物理CPU个数：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;cpuinfo |grep &quot;physical id&quot;|sort|uniq|wc -l</span><br></pre></td></tr></table></figure><h4 id="查看每个物理CPU中的core个数："><a href="#查看每个物理CPU中的core个数：" class="headerlink" title="查看每个物理CPU中的core个数："></a>查看每个物理CPU中的core个数：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;cpuinfo |grep &quot;cpu cores&quot;|wc -l</span><br></pre></td></tr></table></figure><h4 id="逻辑CPU个数"><a href="#逻辑CPU个数" class="headerlink" title="逻辑CPU个数"></a>逻辑CPU个数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;cpuinfo |grep &quot;processor&quot;|wc -l</span><br></pre></td></tr></table></figure><p>物理cpu个数*核数=逻辑cpu个数（不支持超线程技术的情况下）</p><h3 id="内存查看"><a href="#内存查看" class="headerlink" title="内存查看"></a>内存查看</h3><h4 id="查看内存使用情况"><a href="#查看内存使用情况" class="headerlink" title="查看内存使用情况"></a>查看内存使用情况</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#free -m</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:          3949       2519       1430          0        189       1619</span><br><span class="line">-&#x2F;+ buffers&#x2F;cache:        710       3239</span><br><span class="line">Swap:         3576          0       3576</span><br><span class="line"></span><br><span class="line">total：内存总数</span><br><span class="line">used：已经使用的内存数</span><br><span class="line">free：空闲内存数</span><br><span class="line">shared：多个进程共享的内存总额</span><br><span class="line">- buffers&#x2F;cache：(已用)的内存数，即used-buffers-cached</span><br><span class="line">+ buffers&#x2F;cache：(可用)的内存数，即free+buffers+cached</span><br><span class="line"></span><br><span class="line">Buffer Cache用于针对磁盘块的读写；</span><br><span class="line">Page Cache用于针对文件inode的读写，这些Cache能有效地缩短I&#x2F;O系统调用的时间。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">对操作系统来说free&#x2F;used是系统可用&#x2F;占用的内存；</span><br><span class="line">对应用程序来说-&#x2F;+ buffers&#x2F;cache是可用&#x2F;占用内存,因为buffers&#x2F;cache很快就会被使用。</span><br></pre></td></tr></table></figure><h3 id="硬盘查看"><a href="#硬盘查看" class="headerlink" title="硬盘查看"></a>硬盘查看</h3><h4 id="查看硬盘及分区信息"><a href="#查看硬盘及分区信息" class="headerlink" title="查看硬盘及分区信息"></a>查看硬盘及分区信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><h4 id="查看文件系统的磁盘空间占用情况："><a href="#查看文件系统的磁盘空间占用情况：" class="headerlink" title="查看文件系统的磁盘空间占用情况："></a>查看文件系统的磁盘空间占用情况：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure><h4 id="查看硬盘的I-O性能（每隔一秒显示一次，显示五次）"><a href="#查看硬盘的I-O性能（每隔一秒显示一次，显示五次）" class="headerlink" title="查看硬盘的I/O性能（每隔一秒显示一次，显示五次）"></a>查看硬盘的I/O性能（每隔一秒显示一次，显示五次）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x 1 5</span><br></pre></td></tr></table></figure><p>iostat是含在套装systat中的,可以用yum -y install systat来安装<br>常关注的参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如%util接近100%,说明产生的I&#x2F;O请求太多，I&#x2F;O系统已经满负荷，该磁盘可能存在瓶颈。</span><br><span class="line">如idle小于70%，I&#x2F;O的压力就比较大了，说明读取进程中有较多的wait。</span><br></pre></td></tr></table></figure><h4 id="查看linux下某目录的大小"><a href="#查看linux下某目录的大小" class="headerlink" title="查看linux下某目录的大小"></a>查看linux下某目录的大小</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh 目录</span><br></pre></td></tr></table></figure><p>如发现某个分区空间接近用完，可以进入该分区的挂载点，用以下命令找出<code>占用空间最多的文件或目录</code>，然后按照从达到小的顺序，找出系统中占用最多空间的前10个文件或目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -cksh *|sort -rn|head -n 10</span><br></pre></td></tr></table></figure><h3 id="查看平均负载"><a href="#查看平均负载" class="headerlink" title="查看平均负载"></a>查看平均负载</h3><p>有时候系统响应很慢，又找不到原因，这是就要查看平均负载，看它是否有大量的进程在排队等待<br>最简单的命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime--查看过去的1分钟、5分钟和15分钟内进程队列中的平均进程数量。</span><br></pre></td></tr></table></figure><p>还有动态命令top<br>我们只关心以下部分：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">top - 21:33:09 up  1:00,  1 user,  load average: 0.00, 0.01, 0.05</span><br><span class="line"></span><br><span class="line">如果每个逻辑cpu当前的活动进程不大于3，则系统性能良好；</span><br><span class="line">如果每个逻辑cpu当前的活动进程不大于4，表示可以接受；</span><br><span class="line">如果每个逻辑cpu当前的活动进程大于5，则系统性能问题严重。</span><br></pre></td></tr></table></figure><p>一般计算方法：负载值/逻辑CPU个数<br>还可以结合<code>vmstat</code>命令来判断是否繁忙，其中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">procs</span><br><span class="line">r：等待运行的进程数。</span><br><span class="line">b：处在非中断睡眠状态的进程数。</span><br><span class="line">w：被交换出去的可运行的进程数。</span><br><span class="line"></span><br><span class="line">memeory</span><br><span class="line">swpd：虚拟内存使用情况，单位为KB。</span><br><span class="line">free：空闲的内存，单位为KB。</span><br><span class="line">buff：被用来作为缓存的内存数，单位为KB。</span><br><span class="line"></span><br><span class="line">swap</span><br><span class="line">si：从磁盘交换到内存的交换页数量，单位为KB。</span><br><span class="line">so：从内存交换到磁盘的交换页数量，单位为KB。</span><br><span class="line"></span><br><span class="line">io</span><br><span class="line">bi：发送到块设备的块数，单位为KB。</span><br><span class="line">bo：从块设备接受的块数，单位为KB。</span><br><span class="line"></span><br><span class="line">system</span><br><span class="line">in：每秒的中断数，包括时钟中断。</span><br><span class="line">cs：每秒的环境切换次数。</span><br><span class="line"></span><br><span class="line">cpu</span><br><span class="line">按cpu的总使用百分比来显示。</span><br><span class="line">us：cpu使用时间。</span><br><span class="line">sy：cpu系统使用时间。</span><br><span class="line">id：闲置时间。</span><br></pre></td></tr></table></figure><h3 id="其他参数"><a href="#其他参数" class="headerlink" title="其他参数"></a>其他参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">查看内核版本号：</span><br><span class="line">uname -a</span><br><span class="line"></span><br><span class="line">简化命令：uname -r</span><br><span class="line"></span><br><span class="line">查看系统是32位还是64位的：</span><br><span class="line">file &#x2F;sbin&#x2F;init</span><br><span class="line"></span><br><span class="line">查看发行版：</span><br><span class="line">cat &#x2F;etc&#x2F;issue</span><br><span class="line">或lsb_release -a</span><br><span class="line"></span><br><span class="line">查看系统已载入的相关模块：</span><br><span class="line">lsmod</span><br><span class="line"></span><br><span class="line">查看pci设置：</span><br><span class="line">lspci</span><br></pre></td></tr></table></figure><h2 id="Linux-服务器性能评估"><a href="#Linux-服务器性能评估" class="headerlink" title="Linux 服务器性能评估"></a>Linux 服务器性能评估</h2><h3 id="影响Linux服务器性能的因素"><a href="#影响Linux服务器性能的因素" class="headerlink" title="影响Linux服务器性能的因素"></a>影响Linux服务器性能的因素</h3><h4 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CPU</span><br><span class="line">内存</span><br><span class="line">磁盘I&#x2F;O带宽</span><br><span class="line">网络I&#x2F;O带宽</span><br></pre></td></tr></table></figure><h4 id="程序应用级"><a href="#程序应用级" class="headerlink" title="程序应用级"></a>程序应用级</h4><h5 id="系统性能评估标准"><a href="#系统性能评估标准" class="headerlink" title="系统性能评估标准"></a>系统性能评估标准</h5><table><thead><tr><th>影响性能因素</th><th>好</th><th>坏</th><th>糟糕</th></tr></thead><tbody><tr><td>CPU</td><td>user% + sys%&lt; 70%</td><td>user% + sys%= 85%</td><td>user% + sys% &gt;=90%</td></tr><tr><td>内存</td><td>Swap In（si）＝0 Swap Out（so）＝0</td><td>Per CPU with 10 page/s</td><td>More Swap In &amp; Swap Out</td></tr><tr><td>磁盘</td><td>iowait % &lt; 20%</td><td>iowait % =35%</td><td>iowait % &gt;= 50%</td></tr></tbody></table><p>其中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%user：表示CPU处在用户模式下的时间百分比。</span><br><span class="line">%sys：表示CPU处在系统模式下的时间百分比。</span><br><span class="line">%iowait：表示CPU等待输入输出完成时间的百分比。</span><br><span class="line">swap in：即si，表示虚拟内存的页导入，即从SWAP DISK交换到RAM</span><br><span class="line">swap out：即so，表示虚拟内存的页导出，即从RAM交换到SWAP DISK</span><br></pre></td></tr></table></figure><h5 id="系统性能分析工具"><a href="#系统性能分析工具" class="headerlink" title="系统性能分析工具"></a>系统性能分析工具</h5><p>常用系统命令：<code>vmstat</code>,<code>sar</code>,<code>iostat</code>,<code>netstat</code>,<code>free</code>,<code>top</code><br>常用组合方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vmstat、sar、iostat检测是否是CPU瓶颈</span><br><span class="line">free、vmstat检测是否是内存瓶颈</span><br><span class="line">iostat检测是否是磁盘I&#x2F;O瓶颈</span><br><span class="line">netstat检测是否是网络带宽瓶颈</span><br></pre></td></tr></table></figure><h5 id="Linux性能评估与优化"><a href="#Linux性能评估与优化" class="headerlink" title="Linux性能评估与优化"></a>Linux性能评估与优化</h5><p>系统整体性能评估（uptime命令）<br><code>uptime</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">16:38:00 up 118 days, 3:01, 5 users,load average: 1.22, 1.02, 0.91</span><br></pre></td></tr></table></figure><p>注意：</p><ul><li>load average三值大小一般不能大于系统CPU的个数。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统有8个CPU,如load average三值长期大于8，说明CPU很繁忙，负载很高，可能会影响系统性能。</span><br></pre></td></tr></table></figure></li><li>但偶尔大于8，一般不会影响系统性能。</li><li>如load average输出值小于CPU个数，则表示CPU有空闲时间片，比如本例中的输出，CPU是非常空闲的</li></ul><h5 id="CPU性能评估"><a href="#CPU性能评估" class="headerlink" title="CPU性能评估"></a>CPU性能评估</h5><h6 id="vmstat监控CPU"><a href="#vmstat监控CPU" class="headerlink" title="vmstat监控CPU"></a>vmstat监控CPU</h6><p>显示系统各资源之间相关性能简要信息，主要看CPU负载情况<br>下面是vmstat输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# vmstat 2 3</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 3  0      0 12267888 166640 1863724    0    0     1    41   72   88  3  1 96  0  0</span><br><span class="line"> 2  0      0 12267872 166640 1863724    0    0     0     0 66000 163918 15 17 68  0  0</span><br><span class="line"> 2  0      0 12267872 166640 1863724    0    0     0   158 18689 43630 40  5 55  0  0</span><br></pre></td></tr></table></figure><p>r–运行和等待cpu时间片的进程数，这个值如果长期大于系统CPU的个数，说明CPU不足，需要增加CPU<br>b–在等待资源的进程数，比如正在等待I/O、或者内存交换等。<br><em>CPU</em><br><em>us</em><br>用户进程消耗的CPU时间百分比<br>us的值比较高时，说明用户进程消耗的cpu时间多，但是如果长期大于50%，就需要考虑优化程序或算法。</p><p><em>sy</em><br>内核进程消耗的CPU时间百分比，Sy的值较高时，说明内核消耗的CPU资源很多<br>根据经验，us+sy的参考值为80%，如果大于80%可能存在CPU资源不足。</p><h6 id="sar命令监控系统CPU"><a href="#sar命令监控系统CPU" class="headerlink" title="sar命令监控系统CPU"></a>sar命令监控系统CPU</h6><p><code>sar</code>对系统每个方面进行单独统计，但会增加系统开销，不过开销可以评估，对系统的统计结果不会有很大影响<br>下面是sar命令对系统CPU的统计输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# sar -u 3 5</span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izuf6b0a7e5agj4lm7aj3mz) 08&#x2F;29&#x2F;2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">03:05:20 PM     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">03:05:23 PM     all      0.08      0.00      0.08      0.08      0.00     99.75</span><br><span class="line">03:05:26 PM     all      0.08      0.00      0.00      0.00      0.00     99.92</span><br><span class="line">03:05:29 PM     all      0.08      0.00      0.08      0.00      0.00     99.83</span><br><span class="line">03:05:32 PM     all      0.33      0.00      0.08      0.00      0.00     99.58</span><br><span class="line">03:05:35 PM     all      0.08      0.00      0.08      0.00      0.00     99.83</span><br><span class="line">Average:        all      0.13      0.00      0.07      0.02      0.00     99.78</span><br></pre></td></tr></table></figure><p>输出解释如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%user列显示了用户进程消耗的CPU 时间百分比。</span><br><span class="line">%nice列显示了运行正常进程所消耗的CPU 时间百分比。</span><br><span class="line">%system列显示了系统进程消耗的CPU时间百分比。</span><br><span class="line">%iowait列显示了IO等待所占用的CPU时间百分比</span><br><span class="line">%steal列显示了在内存相对紧张的环境下pagein强制对不同的页面进行的steal操作 。</span><br><span class="line">%idle列显示了CPU处在空闲状态的时间百分比。</span><br></pre></td></tr></table></figure><p>问题：你是否遇到过系统CPU整体利用率不高，而应用缓慢的现象？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在一个多CPU的系统中，如果程序使用了单线程，会出现一个现象，CPU的整体使用率不高，但是系统应用却响应缓慢，这可能是由于程序使用单线程的原因，单线程只使用一个CPU，导致这个CPU占用率为100%，无法处理其他请求，而其他CPU却闲置，这就导致了整体CPU使用率不是很高，而应用缓慢</span><br></pre></td></tr></table></figure><h5 id="内存性能评估"><a href="#内存性能评估" class="headerlink" title="内存性能评估"></a>内存性能评估</h5><h6 id="free监控内存"><a href="#free监控内存" class="headerlink" title="free监控内存"></a>free监控内存</h6><p>free是监控Linux内存使用情况的最常用指令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# free -m</span><br><span class="line">              total        used        free      shared  buff&#x2F;cache   available</span><br><span class="line">Mem:          15886        1925       11977           0        1983       13651</span><br><span class="line">Swap:             0           0           0</span><br></pre></td></tr></table></figure><p>经验公式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">应用程序可用内存&#x2F;系统物理内存&gt;70%，表示系统内存资源非常充足，不影响系统性能;</span><br><span class="line">应用程序可用内存&#x2F;系统物理内存&lt;20%，表示系统内存资源紧缺，需要增加系统内存;</span><br><span class="line">20% &lt; 应用程序可用内存&#x2F;系统物理内存 &lt; 70%，表示系统内存资源基本能满足应用需求，暂时不影响系统性能</span><br></pre></td></tr></table></figure><h6 id="vmstat-监控内存"><a href="#vmstat-监控内存" class="headerlink" title="vmstat 监控内存"></a>vmstat 监控内存</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# vmstat 2 3</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 1  0      0 12264516 166640 1864120    0    0     1    41   73   89  3  1 96  0  0</span><br><span class="line"> 0  0      0 12264624 166640 1864120    0    0     0     6  489  459  0  0 99  1  0</span><br><span class="line"> 0  0      0 12264624 166640 1864120    0    0     0     0  466  434  0  0 100  0  0</span><br></pre></td></tr></table></figure><p><em>memory</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">swpd--切换到内存交换区的内存数量（k为单位)。如swpd值偶尔非0，不影响系统性能</span><br><span class="line">free--当前空闲的物理内存数量（k为单位）</span><br><span class="line">buff--buffers cache的内存数量，一般对块设备的读写才需要缓冲</span><br><span class="line">cache--page cached的内存数量</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一般作为文件系统cached，频繁访问的文件都会被cached，如cache值较大，说明cached的文件数较多，如果此时IO中bi比较小，说明文件系统效率比较好。</span><br></pre></td></tr></table></figure><p><em>swap</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">si--由磁盘调入内存，也就是内存进入内存交换区的数量。</span><br><span class="line">so--由内存调入磁盘，也就是内存交换区进入内存的数量。</span><br></pre></td></tr></table></figure><p>si、so的值长期不为0，表示系统内存不足。需增加系统内存。</p><h5 id="磁盘I-O性能评估"><a href="#磁盘I-O性能评估" class="headerlink" title="磁盘I/O性能评估"></a>磁盘I/O性能评估</h5><h6 id="磁盘存储基础"><a href="#磁盘存储基础" class="headerlink" title="磁盘存储基础"></a>磁盘存储基础</h6><p>频繁访问的文件或数据尽可能用<code>内存读写</code>代替<code>直接磁盘I/O</code>，效率高千倍。<br>将经常进行读写的文件与长期不变的文件独立出来，分别放置到不同的磁盘设备上。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对于写操作频繁的数据，可以考虑使用裸设备代替文件系统</span><br></pre></td></tr></table></figure><p>裸设备优点：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据可以直接读写，不需要经过操作系统级缓存，节省内存资源，避免内存资源争用；</span><br><span class="line">避免文件系统级维护开销，如文件系统需维护超级块、I-node等；</span><br><span class="line">避免操作系统cache预读功能，减少了I&#x2F;O请求</span><br></pre></td></tr></table></figure><p>裸设备缺点：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据管理、空间管理不灵活，需要很专业的人来操作</span><br></pre></td></tr></table></figure><h6 id="iostat-评估磁盘性能"><a href="#iostat-评估磁盘性能" class="headerlink" title="iostat 评估磁盘性能"></a>iostat 评估磁盘性能</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# iostat -d 2 3</span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izuf6b0a7e5agj4lm7aj3mz) 08&#x2F;29&#x2F;2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read&#x2F;s    kB_wrtn&#x2F;s    kB_read    kB_wrtn</span><br><span class="line">vda              21.91         2.71       161.83     243237   14531624</span><br><span class="line">vdb               0.00         0.02         0.00       2080          0</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read&#x2F;s    kB_wrtn&#x2F;s    kB_read    kB_wrtn</span><br><span class="line">vda               0.00         0.00         0.00          0          0</span><br><span class="line">vdb               0.00         0.00         0.00          0          0</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read&#x2F;s    kB_wrtn&#x2F;s    kB_read    kB_wrtn</span><br><span class="line">vda               0.00         0.00         0.00          0          0</span><br><span class="line">vdb               0.00         0.00         0.00          0          0</span><br></pre></td></tr></table></figure><p>字段解释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Blk_read&#x2F;s--每秒读取数据块数</span><br><span class="line">Blk_wrtn&#x2F;s--每秒写入数据块数</span><br><span class="line">Blk_read--读取的所有块数</span><br><span class="line">Blk_wrtn--写入的所有块数</span><br></pre></td></tr></table></figure><p>可通过Blk_read/s和Blk_wrtn/s值对磁盘的读写性能有一个基本的了解<br>如Blk_wrtn/s值很大，表示磁盘写操作很频繁，考虑优化磁盘或程序<br>如Blk_read/s值很大，表示磁盘直接读操作很多，可将读取的数据放入内存</p><p>规则遵循：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">长期的、超大的数据读写，肯定是不正常的，这种情况一定会影响系统性能</span><br></pre></td></tr></table></figure><h6 id="sar-评估磁盘性能"><a href="#sar-评估磁盘性能" class="headerlink" title="sar 评估磁盘性能"></a>sar 评估磁盘性能</h6><p><code>sar -d</code>，可以对系统的磁盘IO做一个基本的统计：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# sar -d 2 3</span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izuf6b0a7e5agj4lm7aj3mz) 08&#x2F;29&#x2F;2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">03:24:10 PM       DEV       tps  rd_sec&#x2F;s  wr_sec&#x2F;s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">03:24:12 PM  dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">03:24:12 PM dev253-16      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">03:24:12 PM       DEV       tps  rd_sec&#x2F;s  wr_sec&#x2F;s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">03:24:14 PM  dev253-0      0.50      0.00     16.00     32.00      0.00      0.00      0.00      0.00</span><br><span class="line">03:24:14 PM dev253-16      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">03:24:14 PM       DEV       tps  rd_sec&#x2F;s  wr_sec&#x2F;s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">03:24:16 PM  dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">03:24:16 PM dev253-16      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">Average:          DEV       tps  rd_sec&#x2F;s  wr_sec&#x2F;s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">Average:     dev253-0      0.17      0.00      5.33     32.00      0.00      0.00      0.00      0.00</span><br><span class="line">Average:    dev253-16      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br></pre></td></tr></table></figure><p>参数含义：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">await--平均每次设备I&#x2F;O操作等待时间（毫秒）</span><br><span class="line">svctm--平均每次设备I&#x2F;O操作的服务时间（毫秒）</span><br><span class="line">%util--一秒中有百分之几的时间用于I&#x2F;O操作</span><br></pre></td></tr></table></figure><p>对磁盘IO性能评判标准：<br>正常svctm应小于await值，而svctm和磁盘性能有关，CPU、内存符合也会对svctm值造成影响，过多的情趣也会间接导致svctm值的增加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">await值取决于svctm和I&#x2F;O队列长度以及I&#x2F;O请求模式</span><br><span class="line">如果svctm的值与await很接近，表示几乎没有I&#x2F;O等待，磁盘性能很好，</span><br><span class="line">如果await的值远高于svctm的值，则表示I&#x2F;O队列等待太长，系统上运行的应用程序将变慢，</span><br><span class="line">此时可以通过更换更快的硬盘来解决问题。</span><br></pre></td></tr></table></figure><p><code>%util</code>–衡量磁盘I/O重要指标：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如%util接近100%，表示磁盘产生的I&#x2F;O请求太多，I&#x2F;O系统已经满符合工作，该磁盘可能存在瓶颈</span><br></pre></td></tr></table></figure><p>可优化程序或者通过更换更高、更快的磁盘</p><h5 id="网络性能评估"><a href="#网络性能评估" class="headerlink" title="网络性能评估"></a>网络性能评估</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（1）通过ping命令检测网络的连通性</span><br><span class="line">（2）通过netstat –i组合检测网络接口状况</span><br><span class="line">（3）通过netstat –r组合检测系统的路由表信息</span><br><span class="line">（4）通过sar –n组合显示系统的网络运行状态</span><br></pre></td></tr></table></figure><h2 id="Linux服务器性能调优"><a href="#Linux服务器性能调优" class="headerlink" title="Linux服务器性能调优"></a>Linux服务器性能调优</h2><h3 id="为磁盘I-O调整Linux内核电梯算法"><a href="#为磁盘I-O调整Linux内核电梯算法" class="headerlink" title="为磁盘I/O调整Linux内核电梯算法"></a>为磁盘I/O调整Linux内核电梯算法</h3><p>选择文件系统之后，该算法可以平衡低延时需求，搜集足够数据，有效组织对磁盘读写请求</p><h3 id="禁用不必要的守护进程，节省内存和CPU资源"><a href="#禁用不必要的守护进程，节省内存和CPU资源" class="headerlink" title="禁用不必要的守护进程，节省内存和CPU资源"></a>禁用不必要的守护进程，节省内存和CPU资源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">许多守护进程或服务通常非必需，消耗宝贵内存和CPU时间，将服务器置于险地。</span><br><span class="line">禁用可加快启动时间，释放内存</span><br><span class="line">减少CPU要处理的进程数</span><br></pre></td></tr></table></figure><p>一些被禁用的Linux守护进程，默认自动启动：<br>Apmd 高级电源管理守护进程<br>Nfslock 用于NFS文件锁定<br>Isdn ISDN Moderm支持<br>Autofs 在后台自动挂载文件系统(如自动挂载CD-ROM)<br>Sendmail 邮件传输代理<br>Xfs X Window的字体服务器</p><h3 id="关掉GUI"><a href="#关掉GUI" class="headerlink" title="关掉GUI"></a>关掉GUI</h3><h3 id="清理不需要的模块或功能"><a href="#清理不需要的模块或功能" class="headerlink" title="清理不需要的模块或功能"></a>清理不需要的模块或功能</h3><p>服务器软件包中太多被启动的功能或模块实际上是不需要的（如Apache中的许多功能模块），禁用掉有助于提高系统内存可用量，腾出资源给哪些真正需要的软件</p><h3 id="禁用控制面板"><a href="#禁用控制面板" class="headerlink" title="禁用控制面板"></a>禁用控制面板</h3><p>在Linux中，有许多流行的控制面板，如Cpanel，Plesk，Webmin和phpMyAdmin等，禁用释放出大约120MB内存</p><h3 id="改善Linux-Exim服务器性能"><a href="#改善Linux-Exim服务器性能" class="headerlink" title="改善Linux Exim服务器性能"></a>改善Linux Exim服务器性能</h3><p>使用DNS缓存守护进程，可降低解析DNS记录需要的带宽和CPU时间，DNS缓存通过消除每次都从根节点开始查找DNS记录的需求，从而改善网络性能。</p><p>Djbdns是一个非常强大的DNS服务器，它具有DNS缓存功能，Djbdns比BIND DNS服务器更安全，性能更好，可以直接通过<a href="http://cr.yp.to/%E4%B8%8B%E8%BD%BD%EF%BC%8C%E6%88%96%E9%80%9A%E8%BF%87Red">http://cr.yp.to/下载，或通过Red</a> Hat提供的软件包获得。</p><h3 id="使用AES256增强gpg文件加密安全"><a href="#使用AES256增强gpg文件加密安全" class="headerlink" title="使用AES256增强gpg文件加密安全"></a>使用AES256增强gpg文件加密安全</h3><p>为提高备份文件或敏感信息安全，许多Linux系统管理员都使用gpg进行加密，在使用gpg时，最好指定gpg使用AES256加密算法，AES256使用256位密钥，它是一个开放的加密算法，美国国家安全局(NSA)使用它保护绝密信息</p><h3 id="远程备份服务安全"><a href="#远程备份服务安全" class="headerlink" title="远程备份服务安全"></a>远程备份服务安全</h3><p>安全是选择远程备份服务最重要的因素，大多数系统管理员都害怕两件事：(黑客)可以删除备份文件，不能从备份恢复系统。</p><p>为了保证备份文件100%的安全，备份服务公司提供远程备份服务器，使用scp脚本或RSYNC通过SSH传输数据，这样，没有人可以直接进入和访问远程系统，因此，也没有人可以从备份服务删除数据。在选择远程备份服务提供商时，最好从多个方面了解其服务强壮性，如果可以，可以亲自测试一下。</p><h3 id="更新默认内核参数设置"><a href="#更新默认内核参数设置" class="headerlink" title="更新默认内核参数设置"></a>更新默认内核参数设置</h3><p>为了顺利和成功运行企业应用程序，如数据库服务器，可能需要更新一些默认的内核参数设置，例如，2.4.x系列内核消息队列参数msgmni有一个默认值(例如，共享内存，或shmmax在Red Hat系统上默认只有33554432字节)，它只允许有限的数据库并发连接，下面为数据库服务器更好地运行提供了一些建议值(来自IBM DB2支持网站)：</p><p>kernel.shmmax=268435456 (32位)<br>kernel.shmmax=1073741824 (64位)<br>kernel.msgmni=1024<br>fs.file-max=8192<br>kernel.sem=”250 32000 32 1024″</p><h3 id="优化TCP"><a href="#优化TCP" class="headerlink" title="优化TCP"></a>优化TCP</h3><p>优化TCP协议有助于提高网络吞吐量，跨广域网的通信使用的带宽越大，延迟时间越长时，建议使用越大的TCP Linux大小，以提高数据传输速率，TCP Linux大小决定了发送主机在没有收到数据传输确认时，可以向接收主机发送多少数据</p><h3 id="选择正确的文件系统"><a href="#选择正确的文件系统" class="headerlink" title="选择正确的文件系统"></a>选择正确的文件系统</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用ext4文件系统代替ext3</span><br></pre></td></tr></table></figure><ul><li>Ext4是ext3文件系统的增强版，扩展了存储限制</li><li>具有日志功能，保证高水平的数据完整性(在非正常关闭事件中)</li><li>非正常关闭和重启时，它不需要检查磁盘(这是一个非常耗时的动作)</li><li>更快的写入速度，ext4日志优化了硬盘磁头动作</li></ul><h3 id="使用noatime文件系统挂载选项"><a href="#使用noatime文件系统挂载选项" class="headerlink" title="使用noatime文件系统挂载选项"></a>使用noatime文件系统挂载选项</h3><p>在文件系统启动配置文件fstab中使用noatime选项，如果使用了外部存储，这个挂载选项可以有效改善性能。</p><h3 id="调整Linux文件描述符限制"><a href="#调整Linux文件描述符限制" class="headerlink" title="调整Linux文件描述符限制"></a>调整Linux文件描述符限制</h3><p>Linux限制了任何进程可以打开的文件描述符数量，默认限制是每进程1024，这些限制可能会阻碍基准测试客户端(如httperf和apachebench)和Web服务器本身获得最佳性能，Apache每个连接使用一个进程，因此不会受到影响，但单进程Web服务器，如Zeus是每连接使用一个文件描述符，因此很容易受默认限制的影响。</p><p>打开文件限制是一个可以用ulimit命令调整的限制，ulimit -aS命令显示当前的限制，ulimit -aH命令显示硬限制(在未调整/proc中的内核参数前，你不能增加限制)。</p><p>Linux第三方应用程序性能技巧</p><p>对于运行在Linux上的第三方应用程序，一样有许多性能优化技巧，这些技巧可以帮助你提高Linux服务器的性能，降低运行成本。</p><h3 id="正确配置Mysql"><a href="#正确配置Mysql" class="headerlink" title="正确配置Mysql"></a>正确配置Mysql</h3><p>为了给MySQL分配更多的内存，可设置MySQL缓存大小，要是MySQL服务器实例使用了更多内存，就减少缓存大小，如果MySQL在请求增多时停滞不动，就增加MySQL缓存。</p><h3 id="正确配置Apache"><a href="#正确配置Apache" class="headerlink" title="正确配置Apache"></a>正确配置Apache</h3><p>检查Apache使用了多少内存，再调整StartServers和MinSpareServers参数，以释放更多的内存</p><h3 id="分析Linux服务器性能"><a href="#分析Linux服务器性能" class="headerlink" title="分析Linux服务器性能"></a>分析Linux服务器性能</h3><p>提高系统效率最好的办法是找出导致整体速度下降的瓶颈并解决掉，下面是找出系统关键瓶颈的一些基本技巧：</p><ul><li>当大型应用程序，如OpenOffice和Firefox同时运行时，计算机可能会开始变慢，内存不足的出现几率更高</li><li>如果启动时真的很慢，可能是应用程序初次启动需要较长的加载时间，一旦启动好后运行就正常了，否则很可能是硬盘太慢了。</li><li>CPU负载持续很高，内存也够用，但CPU利用率很低，可以使用CPU负载分析工具监控负载时间。</li></ul><h3 id="学习5个linux性能命令"><a href="#学习5个linux性能命令" class="headerlink" title="学习5个linux性能命令"></a>学习5个linux性能命令</h3><p>使用几个命令就可以管理Linux系统的性能了，下面列出了5个最常用的Linux性能命令，包括<br><code>top</code>、<code>vmstat</code>、<code>iostat</code>、<code>free</code>和<code>sar</code>，它们有助于系统管理员快速解决性能问题。</p><h3 id="将日志文件转移到内存中"><a href="#将日志文件转移到内存中" class="headerlink" title="将日志文件转移到内存中"></a>将日志文件转移到内存中</h3><p>当一台机器处于运行中时，最好是将系统日志放在内存中，当系统关闭时再将其复制到硬盘，当你运行一台开启了syslog功能的笔记本电脑或移动设备时，ramlog可以帮助你提高系统电池或移动设备闪存驱动器的寿命，使用ramlog的一个好处是，不用再担心某个守护进程每隔30秒向syslog发送一条消息，放在以前，硬盘必须随时保持运转，这样对硬盘和电池都不好。</p><h3 id="先打包，后写入"><a href="#先打包，后写入" class="headerlink" title="先打包，后写入"></a>先打包，后写入</h3><p>在内存中划分出固定大小的空间保存日志文件，这意味着笔记本电脑硬盘不用一直保持运转，只有当某个守护进程需要写入日志时才运转，注意ramlog使用的内存空间大小是固定的，否则系统内存会很快被用光，如果笔记本使用固态硬盘，可以分配50-80MB内存给ramlog使用，ramlog可以减少许多写入周期，极大地提高固态硬盘的使用寿命</p><h3 id="一般调优技巧"><a href="#一般调优技巧" class="headerlink" title="一般调优技巧"></a>一般调优技巧</h3><p>尽可能使用静态内容替代动态内容，如果你在生成天气预告，或其它每隔1小时就必须更新的数据，最好是写一个程序，每隔1小时生成一个静态的文件，而不是让用户运行一个CGI动态地生成报告。</p><p>为动态应用程序选择最快最合适的API，CGI可能最容易编程，但它会为每个请求产生一个进程，通常，这是一个成本很高，且不必要的过程，FastCGI是更好的选择，和Apache的mod_perl一样，都可以极大地提高应用程序的性能。</p><blockquote><p><a href="https://www.cnblogs.com/ace-lee/p/6628079.html">转自原博客</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7搭建SonarQube</title>
      <link href="2018/08/23/Centos7%E6%90%AD%E5%BB%BASonarQube/"/>
      <url>2018/08/23/Centos7%E6%90%AD%E5%BB%BASonarQube/</url>
      
        <content type="html"><![CDATA[<p>Centos7搭建代码质量管理平台SonarQube</p><a id="more"></a><p>SonarQube是当前比较热门的代码质量管理平台，平台开源，支持多种语言。</p><h3 id="搭建之前"><a href="#搭建之前" class="headerlink" title="搭建之前"></a>搭建之前</h3><p>首先，要确保当前安装服务器已经安装了jdk（最好1.8+），以及MySQL数据库<br>安装jdk：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-1.8.0-openjdk* -y</span><br></pre></td></tr></table></figure><p>安装MySQL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">下载源包：</span><br><span class="line">wget http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-8.noarch.rpm</span><br><span class="line"></span><br><span class="line">安装mysql源:</span><br><span class="line">yum localinstall mysql57-community-release-el7-8.noarch.rpm</span><br><span class="line"></span><br><span class="line">检查是否安装成功：</span><br><span class="line">yum repolist enabled | grep &quot;mysql.*-community.*&quot;</span><br><span class="line"></span><br><span class="line">安装</span><br><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure><h4 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h4><blockquote><p><a href="https://www.sonarqube.org/downloads/">sonarqube下载地址</a><br><a href="https://link.jianshu.com/?t=http://repo1.maven.org/maven2/org/codehaus/sonar/runner/sonar-runner-dist/2.4/sonar-runner-dist-2.4.zip">sonar-runner下载地址</a><br><a href="https://sonarsource.bintray.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-3.0.3.778-linux.zip">sonar-scanner下载扫描器地址</a></p></blockquote><h3 id="搭建SonarQube"><a href="#搭建SonarQube" class="headerlink" title="搭建SonarQube"></a>搭建SonarQube</h3><p>首先：SonarQube是服务器端，它主要有两个功能：1.分析源代码；2.因为它内嵌了Apache模块，所以提供Web端的界面访问。<br>SonarQube Runner是一个利用SonarQube服务端分析代码的命令行工具，可以把它简单理解为客户端。<br>所以，为了安装和调试方便，建议SonarQube和SonarQube Runner都下载。</p><h4 id="创建sonar数据库"><a href="#创建sonar数据库" class="headerlink" title="创建sonar数据库"></a>创建sonar数据库</h4><p><code>mysql -uroot -p</code>进入控制台，创建sonar用户及数据库：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE sonar CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br><span class="line"></span><br><span class="line">CREATE USER &#39;sonar&#39; IDENTIFIED BY &#39;Sonar_1234&#39;;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON &#96;sonar&#96;.* TO &#39;sonar&#39;@&#39;%&#39; IDENTIFIED BY &#39;Sonar_1234&#39;;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON &#96;sonar&#96;.* TO &#39;sonar&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;Sonar_1234&#39;;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><h4 id="安装SonarQube"><a href="#安装SonarQube" class="headerlink" title="安装SonarQube"></a>安装SonarQube</h4><p>进入安装目录，这边用的是<code>/usr/local</code>，<code>rz</code>（yum install lrzsz）将下载的<code>sonarqube-6.7.5.zip</code>,<code>sonar-runner-dist-2.4.zip</code>,<code>sonar-scanner-cli-3.0.3.778-linux.zip</code>上传到服务器，解压<code>sonarqube-6.7.5.zip</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip sonarqube-6.7.5.zip</span><br></pre></td></tr></table></figure><p>顺便其他两个也解压了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unzip sonar-runner-dist-2.4.zip</span><br><span class="line"></span><br><span class="line">unzip sonar-scanner-cli-3.0.3.778-linux.zip</span><br></pre></td></tr></table></figure><h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4><p><code>vim /etc/profile</code>，到文件底部，添加环境变量：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export SONAR_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;sonarqube-6.7.5</span><br><span class="line">export SONAR_RUNNER_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;sonar-runner-2.4</span><br><span class="line">PATH&#x3D;$PATH:$SONAR_HOME&#x2F;bin:$SONAR_RUNNER_HOME&#x2F;bin</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure><p>生效配置：<code>source /etc/profile</code></p><p>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sonar-runner -v</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost workflow]# sonar-runner -v</span><br><span class="line">SonarQube Runner 2.4</span><br><span class="line">Java 1.8.0_181 Oracle Corporation (64-bit)</span><br><span class="line">Linux 3.10.0-862.9.1.el7.x86_64 amd64</span><br></pre></td></tr></table></figure><h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><h5 id="配置SonarQube"><a href="#配置SonarQube" class="headerlink" title="配置SonarQube"></a>配置SonarQube</h5><p>进入配置文件mulu：<code>cd /usr/local/sonarqube-6.7.5/conf</code><br>修改配置文件：<code>vim  sonar.properties</code>，修改内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sonar.jdbc.username&#x3D;sonar（第16行）</span><br><span class="line">sonar.jdbc.password&#x3D;Sonar_1234（第17行）</span><br><span class="line"></span><br><span class="line">sonar.jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;sonar?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;rewriteBatchedStatements&#x3D;true&amp;useConfigs&#x3D;maxPerformance&amp;useSSL&#x3D;false（第26行）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sonar.web.host&#x3D;192.168.0.91（第105行）</span><br><span class="line"></span><br><span class="line">sonar.web.port&#x3D;9000（第111行）</span><br></pre></td></tr></table></figure><h5 id="配置-sonar-runner"><a href="#配置-sonar-runner" class="headerlink" title="配置 sonar-runner"></a>配置 sonar-runner</h5><p>进入目录<code>cd /usr/local/sonar-runner-2.4/conf</code>，修改配置文件：<code>vim sonar-runner.properties</code><br>修改内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#Configure here general information about the environment, such as SonarQube DB details for example</span><br><span class="line"> 2 #No information about specific project should appear here</span><br><span class="line"> 3 </span><br><span class="line"> 4 #----- Default SonarQube server</span><br><span class="line"> 5 sonar.host.url&#x3D;http:&#x2F;&#x2F;192.168.0.91:9000</span><br><span class="line"> 6 </span><br><span class="line"> 7 #----- PostgreSQL</span><br><span class="line"> 8 #sonar.jdbc.url&#x3D;jdbc:postgresql:&#x2F;&#x2F;localhost&#x2F;sonar</span><br><span class="line"> 9 </span><br><span class="line">10 #----- MySQL</span><br><span class="line">11 sonar.jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;sonar?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8</span><br><span class="line">12 </span><br><span class="line">13 #----- Oracle</span><br><span class="line">14 #sonar.jdbc.url&#x3D;jdbc:oracle:thin:@localhost&#x2F;XE</span><br><span class="line">15 </span><br><span class="line">16 #----- Microsoft SQLServer</span><br><span class="line">17 #sonar.jdbc.url&#x3D;jdbc:jtds:sqlserver:&#x2F;&#x2F;localhost&#x2F;sonar;SelectMethod&#x3D;Cursor</span><br><span class="line">18 </span><br><span class="line">19 #----- Global database settings</span><br><span class="line">20 sonar.jdbc.username&#x3D;sonar</span><br><span class="line">21 sonar.jdbc.password&#x3D;Sonar_1234</span><br><span class="line">22 </span><br><span class="line">23 #----- Default source code encoding</span><br><span class="line">24 #sonar.sourceEncoding&#x3D;UTF-8</span><br><span class="line">25 </span><br><span class="line">26 #----- Security (when &#39;sonar.forceAuthentication&#39; is set to &#39;true&#39;)</span><br><span class="line">27 sonar.login&#x3D;admin</span><br><span class="line">28 sonar.password&#x3D;admin</span><br></pre></td></tr></table></figure><h4 id="启动sonarqube"><a href="#启动sonarqube" class="headerlink" title="启动sonarqube"></a>启动sonarqube</h4><p>sonarqube需要普通用户才能启动，不能使用root用户，这个比较好办，新建用户和组，更改属组就可以：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -g elasticsearch elasticsearch（前一个elasticsearch是组，后一个是用户）</span><br><span class="line">chown -R elasticsearch：elasticsearch sonarqube-6.7.5</span><br></pre></td></tr></table></figure><h5 id="修改elasticsearch配置"><a href="#修改elasticsearch配置" class="headerlink" title="修改elasticsearch配置"></a>修改elasticsearch配置</h5><p><code>cd /usr/local/sonarqube-6.7.5/elasticsearch/config</code>，修改配置为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line">network.host: 192.168.0.91</span><br><span class="line">#</span><br><span class="line"># Set a custom port for HTTP:</span><br><span class="line">#</span><br><span class="line">http.port: 9200</span><br></pre></td></tr></table></figure><h5 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h5><p><code>cd  /usr/local/sonarqube-6.7.5/bin/linux-x86-64</code><br><code>./sonar.sh start</code><br>启动完成~</p><h3 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h3><p>在没有用到jenkins以及git情况下，只有手动将代码上传到服务器进行打分，后期再弄CI，这边介绍的也就是最简单的上传代码的形式。<br>首先，有一个项目需要sonar进行分析，将代码上传到sonar服务器自定义存放代码的位置，例如<code>/root/sourceCode</code>，上传的项目为<code>QATest</code>，然后在项目根目录创建sonar-runner的配置文件<code>sonar-project.properties</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim sonar-project.properties</span><br></pre></td></tr></table></figure><p>内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># must be unique in a given SonarQube instance</span><br><span class="line">sonar.projectKey&#x3D;my:project</span><br><span class="line"># this is the name displayed in the SonarQube UI</span><br><span class="line">sonar.projectName&#x3D;My project</span><br><span class="line">sonar.projectVersion&#x3D;1.0</span><br><span class="line"> </span><br><span class="line"># Path is relative to the sonar-project.properties file. Replace &quot;\&quot; by &quot;&#x2F;&quot; on Windows.</span><br><span class="line"># Since SonarQube 4.2, this property is optional if sonar.modules is set. </span><br><span class="line"># If not set, SonarQube starts looking for source code from the directory containing </span><br><span class="line"># the sonar-project.properties file.</span><br><span class="line">sonar.sources&#x3D;.</span><br><span class="line"> </span><br><span class="line"># Encoding of the source code. Default is default system encoding</span><br><span class="line">#sonar.sourceEncoding&#x3D;UTF-8</span><br></pre></td></tr></table></figure><p>保存退出。</p><p>启动sonar-runner：<code>sonar-runner -e -X</code>(打印详细日志)</p><p>进入SonarQube查看分析结果：<br><code>http://192.168.0.91:9000/projects</code>（账密：admin/admin）</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> SonarQube </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7搭建influxdb+chronograf</title>
      <link href="2018/08/20/Centos7%E6%90%AD%E5%BB%BAinfluxdb-chronograf/"/>
      <url>2018/08/20/Centos7%E6%90%AD%E5%BB%BAinfluxdb-chronograf/</url>
      
        <content type="html"><![CDATA[<p>Centos7搭建influxdb+Chronograf</p><p>elasticsearch实验过后，今天尝试了另一种时序数据库<code>influxdb</code></p><a id="more"></a><h3 id="安装Influxdb"><a href="#安装Influxdb" class="headerlink" title="安装Influxdb"></a>安装Influxdb</h3><p>centos7 64位：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dl.influxdata.com&#x2F;influxdb&#x2F;releases&#x2F;influxdb-1.6.1.x86_64.rpm</span><br><span class="line">sudo yum localinstall influxdb-1.6.1.x86_64.rpm</span><br></pre></td></tr></table></figure><p>(附卸载方式，曾经想卸载东西，找半天：<br>ipm包：<br>rpm -qa xxxx(查询安装包)<br>rpm -e xxxx（卸载）</p><p>yum install 安装的包：<br>yum remove xxx)</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>安装完成后，相应配置文件位于：<br><code>/usr/bin</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">influxd          influxdb服务器</span><br><span class="line">influx           influxdb命令行客户端</span><br><span class="line">influx_inspect   查看工具</span><br><span class="line">influx_stress    压力测试工具</span><br><span class="line">influx_tsm       数据库转换工具（将数据库从b1或bz1格式转换为tsm1格式）</span><br></pre></td></tr></table></figure><p>数据文件夹：<code>/var/lib/influxdb</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data            存放最终存储的数据，文件以.tsm结尾</span><br><span class="line">meta            存放数据库元数据</span><br><span class="line">wal             存放预写日志文件</span><br></pre></td></tr></table></figure><p>以及，配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;influxdb&#x2F;influxdb.conf</span><br></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">加自启动：</span><br><span class="line">systemctl enable influxdb</span><br><span class="line">启服务：</span><br><span class="line">systemctl start influxdb</span><br></pre></td></tr></table></figure><p>非服务方式启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost influxdb]# influx</span><br><span class="line">Connected to http:&#x2F;&#x2F;localhost:8086 version 1.6.1</span><br><span class="line">InfluxDB shell version: 1.6.1</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure><h3 id="安装Chronograf"><a href="#安装Chronograf" class="headerlink" title="安装Chronograf"></a>安装Chronograf</h3><p>好像是1.4版本（具体不记得了），influxdb就去掉了自带的web页面（influxdb.conf中没有admin栏），想要从web页面查看数据，可以安装官方配套的展示工具<code>Chronograf</code>，用着感觉和<code>grafana</code>很像。</p><p>Cnetos 7下安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dl.influxdata.com&#x2F;chronograf&#x2F;releases&#x2F;chronograf-1.6.1.x86_64.rpm</span><br><span class="line">sudo yum localinstall chronograf-1.6.1.x86_64.rpm</span><br></pre></td></tr></table></figure><p>启动：<code>systemctl start chronograf</code><br>默认开启8888端口，浏览器访问<code>http://IP:8888</code>即可（若是在虚拟机安装，打不开，可以尝试用nginx转服务）</p><h3 id="简单语法"><a href="#简单语法" class="headerlink" title="简单语法"></a>简单语法</h3><h4 id="influxdb与传统数据库的比较"><a href="#influxdb与传统数据库的比较" class="headerlink" title="influxdb与传统数据库的比较"></a>influxdb与传统数据库的比较</h4><table><thead><tr><th>influxdb</th><th>MySQL</th></tr></thead><tbody><tr><td>database</td><td>数据库</td></tr><tr><td>measurement</td><td>数据库中的表</td></tr><tr><td>points</td><td>表里面的一行数据</td></tr></tbody></table><p>influxdb数据的构成：<br>Point由时间戳（time）、数据（field）、标签（tags）组成。</p><table><thead><tr><th>Point属性</th><th>传统数据库中的概念</th></tr></thead><tbody><tr><td>time</td><td>每个数据记录时间，是数据库中的主索引(会自动生成)</td></tr><tr><td>fields</td><td>各种记录值（没有索引的属性）也就是记录的值：温度， 湿度</td></tr><tr><td>tags</td><td>各种有索引的属性：地区，海拔</td></tr></tbody></table><h4 id="简单操作"><a href="#简单操作" class="headerlink" title="简单操作"></a>简单操作</h4><p><code>influx</code>进入命令行模式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#创建数据库</span><br><span class="line">create database &quot;db_name&quot;</span><br><span class="line"></span><br><span class="line">#显示所有的数据库</span><br><span class="line">show databases</span><br><span class="line"></span><br><span class="line">#删除数据库</span><br><span class="line">drop database &quot;db_name&quot;</span><br><span class="line"></span><br><span class="line">#使用数据库</span><br><span class="line">use db_name</span><br><span class="line"></span><br><span class="line">#显示该数据库中所有的表</span><br><span class="line">show measurements</span><br><span class="line"></span><br><span class="line">#创建表，直接在插入数据的时候指定表名</span><br><span class="line">insert test,host&#x3D;127.0.0.1,monitor_name&#x3D;test count&#x3D;1</span><br><span class="line"></span><br><span class="line">#删除表</span><br><span class="line">drop measurement &quot;measurement_name&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT cpu,host&#x3D;serverA,region&#x3D;us_west value&#x3D;0.64  &#x2F;&#x2F;在cpu表中插入相关的数据</span><br><span class="line">SELECT * FROM cpu ORDER BY time DESC LIMIT 3  &#x2F;&#x2F;查询最近的三条数据</span><br><span class="line">delete from cpu where time&#x3D;1480235366557373922  &#x2F;&#x2F;删除某条数据</span><br></pre></td></tr></table></figure><p>用户操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用户管理</span><br><span class="line">可以通过Chronograf页面做操作，也可以命令行。</span><br><span class="line">#显示用户  </span><br><span class="line">show users</span><br><span class="line"></span><br><span class="line">#创建用户</span><br><span class="line">create user &quot;username&quot; with password &#39;password&#39;</span><br><span class="line"></span><br><span class="line">#创建管理员权限用户</span><br><span class="line">create user &quot;username&quot; with password &#39;password&#39; with all privileges</span><br><span class="line"></span><br><span class="line">#删除用户</span><br><span class="line">drop user &quot;username&quot;</span><br></pre></td></tr></table></figure><h3 id="导入测试数据"><a href="#导入测试数据" class="headerlink" title="导入测试数据"></a>导入测试数据</h3><p><code> CREATE DATABASE NOAA_water_database</code><br>下载官方数据集：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https:&#x2F;&#x2F;s3.amazonaws.com&#x2F;noaa.water-database&#x2F;NOAA_data.txt -o NOAA_data.txt</span><br></pre></td></tr></table></figure><p>写数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">influx -import -path&#x3D;.&#x2F;NOAA_data.txt -precision&#x3D;s -database&#x3D;NOAA_water_database</span><br></pre></td></tr></table></figure><h3 id="配置文件参考"><a href="#配置文件参考" class="headerlink" title="配置文件参考"></a>配置文件参考</h3><blockquote><p><a href="https://www.cnblogs.com/shhnwangjian/p/6893862.html">influxdb.conf</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Influxdb </tag>
            
            <tag> Chronograf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些常用网站</title>
      <link href="2018/08/15/%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/"/>
      <url>2018/08/15/%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<p>记一些常用的网站</p><a id="more"></a><h3 id="zabbix-模板大全"><a href="#zabbix-模板大全" class="headerlink" title="zabbix 模板大全"></a>zabbix 模板大全</h3><blockquote><p><a href="https://monitoringartist.github.io/zabbix-searcher/#">zabbix各模板</a></p></blockquote><h3 id="APM鼻祖论文"><a href="#APM鼻祖论文" class="headerlink" title="APM鼻祖论文"></a>APM鼻祖论文</h3><blockquote><p><a href="http://bigbully.github.io/Dapper-translation/">APM平台的鼻祖</a></p></blockquote><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><blockquote><p><a href="https://regexr.com/">在线正则表达式工具</a></p></blockquote><h3 id="网页测试工具"><a href="#网页测试工具" class="headerlink" title="网页测试工具"></a>网页测试工具</h3><blockquote><p><a href="http://www.webpagetest.org/">WebPagetest</a></p></blockquote><blockquote><p><a href="https://tools.pingdom.com/">Pingdom</a></p></blockquote><h3 id="论坛"><a href="#论坛" class="headerlink" title="论坛"></a>论坛</h3><blockquote><p><a href="https://stackoverflow.com/">stackoverflow</a></p></blockquote><blockquote><p><a href="https://testerhome.com/">testerhome</a></p></blockquote><blockquote><p><a href="http://www.51cto.com/">51CTO</a></p></blockquote><blockquote><p><a href="https://juejin.im/">掘金</a></p></blockquote><blockquote><p><a href="https://segmentfault.com/">思否（segmentfault）</a></p></blockquote><h3 id="电子书网站"><a href="#电子书网站" class="headerlink" title="电子书网站"></a>电子书网站</h3><blockquote><p><a href="https://www.ckook.com/">稀酷客</a><br><a href="http://www.gutenberg.org/">Project Gutenberg</a></p></blockquote><h3 id="数据科学项目练习"><a href="#数据科学项目练习" class="headerlink" title="数据科学项目练习"></a>数据科学项目练习</h3><blockquote><p><a href="https://www.kaggle.com/">Kaggle</a></p></blockquote><h3 id="python-3-cookbook"><a href="#python-3-cookbook" class="headerlink" title="python 3 cookbook"></a>python 3 cookbook</h3><blockquote><p><a href="http://python3-cookbook.readthedocs.io/zh_CN/latest/index.html">Python3 cookbook</a></p></blockquote><h3 id="Hacker-News"><a href="#Hacker-News" class="headerlink" title="Hacker News"></a>Hacker News</h3><blockquote><p><a href="https://news.ycombinator.com/news">Hacker News</a></p></blockquote><h3 id="免费图片"><a href="#免费图片" class="headerlink" title="免费图片"></a>免费图片</h3><blockquote><p><a href="https://pixabay.com/">Pixabay</a></p></blockquote><h3 id="运维"><a href="#运维" class="headerlink" title="运维"></a>运维</h3><blockquote><p><a href="http://www.ttlsa.com/">运维生存时间</a></p></blockquote><blockquote><p><a href="https://www.iyunv.com/">运维网</a></p></blockquote><h3 id="Rancher"><a href="#Rancher" class="headerlink" title="Rancher"></a>Rancher</h3><blockquote><p><a href="https://rancher.com/docs/rancher/latest/zh/">Rancher</a></p></blockquote><h3 id="娱乐部分"><a href="#娱乐部分" class="headerlink" title="娱乐部分"></a>娱乐部分</h3><blockquote><p><a href="http://www.acgsou.com/1.html">ACG动漫种子</a></p></blockquote><blockquote><p><a href="https://www.52pojie.cn/">52破解</a></p></blockquote><blockquote><p><a href="http://www.fengniao.com/">蜂鸟摄影</a></p></blockquote><h3 id="TO-BE-CONTINUED-…"><a href="#TO-BE-CONTINUED-…" class="headerlink" title="TO BE CONTINUED …"></a>TO BE CONTINUED …</h3>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7开启nginx status</title>
      <link href="2018/08/15/Centos7%E5%BC%80%E5%90%AFnginx-status/"/>
      <url>2018/08/15/Centos7%E5%BC%80%E5%90%AFnginx-status/</url>
      
        <content type="html"><![CDATA[<p>Centos 7开启nginx status</p><a id="more"></a><p>这段时间需要研究APM相关，整理到中间件部分，想到用zabbix来监控Nginx，一般情况下，中间件都有自己的计数器，我们只需要获取计数器的数值即可完成监控。</p><h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><p>还是啰嗦一下，安装nginx，一条命令即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><p>配置文件路径：<br>默认配置：<code>/etc/nginx/nginx.conf</code><br>可自建配置:<code>/etc/nginx/conf.d/yourAPP.conf</code>(需要修改nginx.conf最后的配置文件路径)</p><h3 id="开启nginx-status"><a href="#开启nginx-status" class="headerlink" title="开启nginx status"></a>开启nginx status</h3><p>开启很简单，在配置中增加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;ngx_status</span><br><span class="line">    &#123;</span><br><span class="line">        stub_status on;</span><br><span class="line">        access_log off;</span><br><span class="line">        allow 127.0.0.1;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>即可；<br>由于之前有帮开发搭建了.net core的环境，就直接在之前搭建的配置文件（LiabTest.conf）里面改了：<br>原文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;localhost:5000;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection keep-alive;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_cache_bypass $http_upgrade;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>增加status之后：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;localhost:5000;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection keep-alive;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_cache_bypass $http_upgrade;</span><br><span class="line">    &#125;</span><br><span class="line">    location &#x2F;ngx_status</span><br><span class="line">    &#123;</span><br><span class="line">        stub_status on;</span><br><span class="line">        access_log off;</span><br><span class="line">        allow 127.0.0.1;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="查看效果"><a href="#查看效果" class="headerlink" title="查看效果"></a>查看效果</h3><p>重启nginx：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure><p>查看status:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http:&#x2F;&#x2F;127.0.0.1&#x2F;ngx_status</span><br></pre></td></tr></table></figure><p>看到信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@gtp1 conf.d]# curl http:&#x2F;&#x2F;127.0.0.1&#x2F;ngx_status</span><br><span class="line">Active connections: 1199 </span><br><span class="line">server accepts handled requests</span><br><span class="line"> 158761 158761 158757 </span><br><span class="line">Reading: 0 Writing: 1195 Waiting: 4</span><br></pre></td></tr></table></figure><h3 id="nginx-status详解"><a href="#nginx-status详解" class="headerlink" title="nginx status详解"></a>nginx status详解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">active connections – 活跃的连接数量</span><br><span class="line">server accepts handled requests — 总共处理了158761个连接 , 成功创建158761次握手, 总共处理了158757个请求</span><br><span class="line">reading — 读取客户端的连接数.</span><br><span class="line">writing — 响应数据到客户端的数量</span><br><span class="line">waiting — 开启 keep-alive 的情况下,这个值等于 active – (reading+writing), 意思就是 Nginx 已经处理完正在等候下一次请求指令的驻留连接.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ELK环境搭建及测试数据导入</title>
      <link href="2018/08/09/ELK%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%8F%8A%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5/"/>
      <url>2018/08/09/ELK%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%8F%8A%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p>ELK一些前期准备</p><a id="more"></a><p>前面已经搭建过elasticsearch了，和它配套的，L和K：Logstash，Kibana<br>三者关系：Logstash搜集日志，elasticsearch存储，kibana展示</p><h3 id="搭建Logstash、kibana"><a href="#搭建Logstash、kibana" class="headerlink" title="搭建Logstash、kibana"></a>搭建Logstash、kibana</h3><p>首先是官网下载安装包：</p><blockquote><p><a href="https://www.elastic.co/products">elasic.co</a></p></blockquote><p>下载对应的安装包：<br><code>kibana-6.3.2-linux-x86_64.tar.gz</code><br><code>logstash-6.3.2.tar.gz</code></p><h4 id="安装logstash"><a href="#安装logstash" class="headerlink" title="安装logstash"></a>安装logstash</h4><p>解压缩下载的安装包<code>logstash-6.3.2.tar.gz</code>，进入<code>logstash-6.3.2/config</code>目录，创建配置文件<code>logstash.conf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim logstash.conf</span><br></pre></td></tr></table></figure><p>内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">     file &#123;</span><br><span class="line">        type &#x3D;&gt; &quot;log&quot;</span><br><span class="line">        path &#x3D;&gt; &quot;&#x2F;logs&#x2F;*.log&quot;</span><br><span class="line">        start_position &#x3D;&gt; &quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">  stdout &#123;</span><br><span class="line">   codec &#x3D;&gt; rubydebug &#123; &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">    hosts &#x3D;&gt; &quot;es地址IP，例如192.168.0.91&quot;</span><br><span class="line">    index &#x3D;&gt; &quot;log-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>保存退出，进入<code>bin</code>目录，启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;logstash -f ..&#x2F;config&#x2F;logstash.conf</span><br></pre></td></tr></table></figure><h4 id="安装Kibana"><a href="#安装Kibana" class="headerlink" title="安装Kibana"></a>安装Kibana</h4><p>解压缩安装包，修改<code>config</code>下配置文件：<code>kibana.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">server.host: &quot;192.168.0.91&quot;</span><br><span class="line"></span><br><span class="line"># Enables you to specify a path to mount Kibana at if you are running behind a proxy.</span><br><span class="line"># Use the &#96;server.rewriteBasePath&#96; setting to tell Kibana if it should remove the basePath</span><br><span class="line"># from requests it receives, and to prevent a deprecation warning at startup.</span><br><span class="line"># This setting cannot end in a slash.</span><br><span class="line">#server.basePath: &quot;&quot;</span><br><span class="line"></span><br><span class="line"># Specifies whether Kibana should rewrite requests that are prefixed with</span><br><span class="line"># &#96;server.basePath&#96; or require that they are rewritten by your reverse proxy.</span><br><span class="line"># This setting was effectively always &#96;false&#96; before Kibana 6.3 and will</span><br><span class="line"># default to &#96;true&#96; starting in Kibana 7.0.</span><br><span class="line">#server.rewriteBasePath: false</span><br><span class="line"></span><br><span class="line"># The maximum payload size in bytes for incoming server requests.</span><br><span class="line">#server.maxPayloadBytes: 1048576</span><br><span class="line"></span><br><span class="line"># The Kibana server&#39;s name.  This is used for display purposes.</span><br><span class="line">#server.name: &quot;your-hostname&quot;</span><br><span class="line"></span><br><span class="line"># The URL of the Elasticsearch instance to use for all your queries.</span><br><span class="line">elasticsearch.url: &quot;http:&#x2F;&#x2F;192.168.0.91:9200&quot;</span><br></pre></td></tr></table></figure><p>需要更改的是两个地方：server.host和elasticsearch.url，更改保存退出~<br>进<code>bin</code>目录，启动服务~</p><h3 id="添加测试数据"><a href="#添加测试数据" class="headerlink" title="添加测试数据"></a>添加测试数据</h3><p><a href="https://www.elastic.co/guide/en/kibana/current/tutorial-load-dataset.html">官方教程</a></p><p>ElasticSearch的sample data：</p><blockquote><p><a href="https://download.elastic.co/demos/kibana/gettingstarted/accounts.zip">account.zip</a><br><a href="https://download.elastic.co/demos/kibana/gettingstarted/shakespeare_6.0.json">shakespeare.json</a><br><a href="https://download.elastic.co/demos/kibana/gettingstarted/logs.jsonl.gz">logs.json1.gz</a></p></blockquote><p>首先加载account数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H &quot;Content-Type: application&#x2F;json&quot; -XPOST &#39;localhost:9200&#x2F;bank&#x2F;account&#x2F;_bulk?pretty&amp;refresh&#39; --data-binary &quot;@accounts.json&quot;</span><br></pre></td></tr></table></figure><p>shaekspeare和logs，先做mapping</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT &quot;192.168.0.91:9200&#x2F;shakespeare&quot; -H &#39;Content-Type: application&#x2F;json&#39; -d&#39;</span><br><span class="line">&#123;</span><br><span class="line"> &quot;mappings&quot;: &#123;</span><br><span class="line">  &quot;doc&quot;: &#123;</span><br><span class="line">   &quot;properties&quot;: &#123;</span><br><span class="line">    &quot;speaker&quot;: &#123;&quot;type&quot;: &quot;keyword&quot;&#125;,</span><br><span class="line">    &quot;play_name&quot;: &#123;&quot;type&quot;: &quot;keyword&quot;&#125;,</span><br><span class="line">    &quot;line_id&quot;: &#123;&quot;type&quot;: &quot;integer&quot;&#125;,</span><br><span class="line">    &quot;speech_number&quot;: &#123;&quot;type&quot;: &quot;integer&quot;&#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#39;</span><br></pre></td></tr></table></figure><p>logs</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT &quot;localhost:9200&#x2F;logstash-2015.05.18&quot; -H &#39;Content-Type: application&#x2F;json&#39; -d&#39;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    &quot;log&quot;: &#123;</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;geo&quot;: &#123;</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;coordinates&quot;: &#123;</span><br><span class="line">              &quot;type&quot;: &quot;geo_point&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#39;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT &quot;localhost:9200&#x2F;logstash-2015.05.19&quot; -H &#39;Content-Type: application&#x2F;json&#39; -d&#39;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    &quot;log&quot;: &#123;</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;geo&quot;: &#123;</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;coordinates&quot;: &#123;</span><br><span class="line">              &quot;type&quot;: &quot;geo_point&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#39;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT &quot;localhost:9200&#x2F;logstash-2015.05.20&quot; -H &#39;Content-Type: application&#x2F;json&#39; -d&#39;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    &quot;log&quot;: &#123;</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;geo&quot;: &#123;</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;coordinates&quot;: &#123;</span><br><span class="line">              &quot;type&quot;: &quot;geo_point&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#39;</span><br></pre></td></tr></table></figure><p>导入数据一样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -H &#39;Content-Type: application&#x2F;x-ndjson&#39; -XPOST &#39;localhost:9200&#x2F;bank&#x2F;account&#x2F;_bulk?pretty&#39; --data-binary @accounts.json</span><br><span class="line">curl -H &#39;Content-Type: application&#x2F;x-ndjson&#39; -XPOST &#39;localhost:9200&#x2F;shakespeare&#x2F;doc&#x2F;_bulk?pretty&#39; --data-binary @shakespeare_6.0.json</span><br><span class="line">curl -H &#39;Content-Type: application&#x2F;x-ndjson&#39; -XPOST &#39;localhost:9200&#x2F;_bulk?pretty&#39; --data-binary @logs.jsonl</span><br></pre></td></tr></table></figure><p>结束~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> elasticsearch </tag>
            
            <tag> logstash </tag>
            
            <tag> kibana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>elasticsearch 6变更记录</title>
      <link href="2018/08/01/elasticsearch-6%E5%8F%98%E6%9B%B4%E8%AE%B0%E5%BD%95/"/>
      <url>2018/08/01/elasticsearch-6%E5%8F%98%E6%9B%B4%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>elasticsearch 6变更内容记录</p><a id="more"></a><p>原来没怎么接触过es，找了个教程，本来是按着教程上敲的练练手的，然后就我靠了，又回到当初碰Django时候的懵逼状态，新版本改好多。。</p><h3 id="No-handler-for-type-string-declared-on-field"><a href="#No-handler-for-type-string-declared-on-field" class="headerlink" title="No handler for type [string] declared on field"></a>No handler for type [string] declared on field</h3><p>本来练手练得好好的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PUT http:&#x2F;&#x2F;192.168.0.91:9200&#x2F;index_test</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">&quot;settings&quot;: &#123;</span><br><span class="line">&quot;number_of_shards&quot;: 3,</span><br><span class="line">&quot;number_of_replicas&quot;: 2</span><br><span class="line">&#125;,</span><br><span class="line">&quot;mappings&quot;: &#123;</span><br><span class="line">&quot;Testlog&quot;: &#123;</span><br><span class="line">&quot;properties&quot;: &#123;</span><br><span class="line">&quot;logType&quot;: &#123;</span><br><span class="line">&quot;type&quot;: &quot;string&quot;,</span><br><span class="line">&quot;index&quot;: &quot;not_analyzed&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后就是悲剧：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;error&quot;: &#123;</span><br><span class="line">       &quot;root_cause&quot;: [</span><br><span class="line">           &#123;</span><br><span class="line">               &quot;type&quot;: &quot;mapper_parsing_exception&quot;,</span><br><span class="line">               &quot;reason&quot;: &quot;No handler for type [string] declared on field [logType]&quot;</span><br><span class="line">           &#125;</span><br><span class="line">       ],</span><br></pre></td></tr></table></figure><p>研究半天，JSON没啥错啊，教程里就是这么干的啊，回忆起Django的版本悲剧，搜了下版本变更，唉~`ElasticSearch 5.x开始就取消了string类型，取代的事text和keyward，text用于全文搜索的, 而keyword用于关键词搜索`</p><p>找了段网上的解释：<br>这个变动的根本原因是string类型会给我们带来很多困惑: 因为ElasticSearch对字符串拥有两种完全不同的搜索方式. 你可以按照整个文本进行匹配, 即关键词搜索(keyword search), 也可以按单个字符匹配, 即全文搜索(full-text search). 对ElasticSearch稍有了解的人都知道, 前者的字符串被称为not-analyzed字符, 而后者被称作analyzed字符串.</p><p>事实上, 同一种类型用于应对两种不同的使用场景是会让人崩溃的, 因为有些选项只对其一的场景设置有效.例如position_increment_gap对not-analyzed字符就不会起作用, 而像ignore_above对于analyzed字符串就很难区分它到底是对整个字符串的值有效还是对单独的每个分词有效(在这种场景, ignore_above确实只对整个字符串值有效, 而对单个分词的限制可以使用limit设置)，同样，<code>index</code>现在也只需要boolean的两种状态，所以可以修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;settings&quot;: &#123;</span><br><span class="line">&quot;number_of_shards&quot;: 3,</span><br><span class="line">&quot;number_of_replicas&quot;: 2</span><br><span class="line">&#125;,</span><br><span class="line">&quot;mappings&quot;: &#123;</span><br><span class="line">&quot;gaialog&quot;: &#123;</span><br><span class="line">&quot;properties&quot;: &#123;</span><br><span class="line">&quot;logType&quot;: &#123;</span><br><span class="line">&quot;type&quot;: &quot;text&quot;,</span><br><span class="line">&quot;index&quot;: &quot;false&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="as-the-final-mapping-would-have-more-than-1-type"><a href="#as-the-final-mapping-would-have-more-than-1-type" class="headerlink" title="as the final mapping would have more than 1 type"></a>as the final mapping would have more than 1 type</h3><p>原因是6.x开始，取消了mapping type…<br>具体原因可以看官方的解释：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.0/removal-of-types.html">removal of mapping type</a><br>需要的一些解释是：<br>首先，很多人会把es和关系型数据库进行类比；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">index ——&gt; 数据库（database）</span><br><span class="line">type ——&gt; 表（table）</span><br><span class="line">document ——&gt; 数据记录（data）</span><br><span class="line">filed ——&gt; 列（column）</span><br></pre></td></tr></table></figure><p>其实这样理解是有问题的，在关系型数据库中，每个表的列都是相互独立的，即使是同样列名的列，也毫无关系；但是在像es这样的映射型数据库中，即使是在不同的type下的field，只要field名字一样，它们所指向的Lucene字段都是同一个，所以是有影响的。在ES中，之前有type的情况下，在不同的type下可以建同样名字的field，比如test，type1下的field是<code>string</code>类型，type2下的field是<code>boolean</code>类型，由于同一个名字的field对应的Lucene字段一样，所以在进行field删除时，系统就会出错，不知道具体应该删的是哪个field。<br>官方为了避免这样的情况，就直接开始了不要<code>type</code>~~~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos 7安装elasticsearch head</title>
      <link href="2018/08/01/Centos-7%E5%AE%89%E8%A3%85elasticsearch-head/"/>
      <url>2018/08/01/Centos-7%E5%AE%89%E8%A3%85elasticsearch-head/</url>
      
        <content type="html"><![CDATA[<p>ElasticSearch安装可视化插件ElasticSearch head</p><a id="more"></a><h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><h4 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h4><p>首先是安装<code>node.js</code></p><h5 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h5><p>可以用yum装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nodejs</span><br></pre></td></tr></table></figure><p>再装npm：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h5 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h5><p>或者是源码安装<br>首先安装gcc用于编译：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ kernel-devel</span><br></pre></td></tr></table></figure><p>开始安装node.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;nodejs.org&#x2F;dist&#x2F;v4.5.0&#x2F;node-v4.5.0.tar.gz</span><br><span class="line">tar -xf node-v4.5.0.tar.gz</span><br></pre></td></tr></table></figure><p>解压缩之后，进入目录，编译：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd node-v4.5.0</span><br><span class="line">.&#x2F;configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>完成！<br>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm</span><br></pre></td></tr></table></figure><p>安装完成的是4.5的版本，升级：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g n</span><br><span class="line">n stable</span><br></pre></td></tr></table></figure><h4 id="安装grunt"><a href="#安装grunt" class="headerlink" title="安装grunt"></a>安装grunt</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g grunt</span><br></pre></td></tr></table></figure><p>可以查看版本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grunt -version</span><br></pre></td></tr></table></figure><h3 id="安装ES-head"><a href="#安装ES-head" class="headerlink" title="安装ES head"></a>安装ES head</h3><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><p>git下载源码，可以直接到github下，也可以命令行weg或者git clone下载<br>源码地址|：<a href="https://github.com/mobz/elasticsearch-head/">https://github.com/mobz/elasticsearch-head/</a><br>建议要是在本地下载的zip包，传服务器时候，切换到es用户操作，使得head文件属主是es用户。<br>然后解压：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip elasticsearch-head-master.zip</span><br><span class="line">cd elasticsearch-head-master</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>首先要停掉ES服务</p><h4 id="配置http对外服务"><a href="#配置http对外服务" class="headerlink" title="配置http对外服务"></a>配置http对外服务</h4><p>修改elasticsearch.yml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim config&#x2F;elasticsearch.yml</span><br></pre></td></tr></table></figure><p>添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http.cors.enabled: true</span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br></pre></td></tr></table></figure><h4 id="修改host"><a href="#修改host" class="headerlink" title="修改host"></a>修改host</h4><p>进入<code>elasticsearch-head</code>文件夹，修改<code>Gruntfile.js</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim Gruntfile.js</span><br></pre></td></tr></table></figure><p>找到<code>connect：server</code>，添加hostname为你的静态IP，完成~</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">connect: &#123;</span><br><span class="line">                       server: &#123;</span><br><span class="line">                               options: &#123;</span><br><span class="line">                                       hostname: &#39;192.168.0.91&#39;,</span><br><span class="line">                                       port: 9100,</span><br><span class="line">                                       base: &#39;.&#39;,</span><br><span class="line">                                       keepalive: true</span><br><span class="line">                               &#125;</span><br><span class="line">                       &#125;</span><br><span class="line">               &#125;</span><br></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>先启动ES，再起ES head<br>ES head有两种启动方式：</p><pre><code>grunt server或者进入es head目录npm run start``浏览器访问:http://IP:9100即可打开页面</code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> elasticsearch </tag>
            
            <tag> elasticsearch head </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos下搭建ElasticSearch</title>
      <link href="2018/07/31/Centos%E4%B8%8B%E6%90%AD%E5%BB%BAElasticSearch/"/>
      <url>2018/07/31/Centos%E4%B8%8B%E6%90%AD%E5%BB%BAElasticSearch/</url>
      
        <content type="html"><![CDATA[<p>Centos 7下搭建ElasticSearch</p><a id="more"></a><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><p>首先，ES是java开发的，所以，通性，懂得，装JDK，好在linux下一条命令行就可以解决：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装1.8.0的所有文件</span><br><span class="line">yum install java-1.8.0-openjdk* -y</span><br></pre></td></tr></table></figure><p>校验：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br><span class="line">javac</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openjdk version &quot;1.8.0_181&quot;</span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_181-b13)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.181-b13, mixed mode)</span><br></pre></td></tr></table></figure><p>很正常，完成。</p><h3 id="ElasticSearch"><a href="#ElasticSearch" class="headerlink" title="ElasticSearch"></a>ElasticSearch</h3><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><p>下载很简单：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;artifacts.elastic.co&#x2F;downloads&#x2F;elasticsearch&#x2F;elasticsearch-6.3.2.zip</span><br></pre></td></tr></table></figure><p>然后解压缩就可以了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip elasticsearch-6.3.2.zip</span><br></pre></td></tr></table></figure><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd elasticsearch-6.3.2&#x2F;bin</span><br><span class="line">.&#x2F;elasticsearch</span><br></pre></td></tr></table></figure><p>嗯，然后问题就开始了~</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>用<code>root</code>用户登录的系统，启es，会报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[2018-01-28T22:00:31,358][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]</span><br><span class="line">org.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:125) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:85) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">Caused by: java.lang.RuntimeException: can not run elasticsearch as root</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:104) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:171) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:322) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-6.1.2.jar:6.1.2]</span><br><span class="line">... 6 more</span><br></pre></td></tr></table></figure><p>很明显，人家不让你用root启服务</p><h4 id="创建es用户"><a href="#创建es用户" class="headerlink" title="创建es用户"></a>创建es用户</h4><p>不让用root就创建一个es的用户：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 创建es组</span><br><span class="line">groupadd elasticsearch</span><br><span class="line"># 在es组下创建es用户，并设置密码为elasticsearch</span><br><span class="line">useradd elasticsearch -g elasticsearch -p elasticsearch</span><br></pre></td></tr></table></figure><p>然后将前面下载的<code>elasticsearch-6.3.2.zip</code>包拷贝到es家目录下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp elasticsearch-6.3.2.zip &#x2F;home&#x2F;elasticsearch</span><br></pre></td></tr></table></figure><p>解压缩：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip elasticsearch-6.3.2.zip</span><br></pre></td></tr></table></figure><p>更改文件夹属主和属组：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R elasticsearch:elasticsearch elasticsearch-6.1.2&#x2F;</span><br></pre></td></tr></table></figure><p>然后切换到es用户，启服务：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su - elasticsearch</span><br><span class="line">.&#x2F;bin&#x2F;elasticsearch</span><br></pre></td></tr></table></figure><p>然后就可以看见服务基本是正常起来了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[2018-07-31T22:11:06,918][INFO ][o.e.n.Node               ] [] initializing ...</span><br><span class="line">[2018-07-31T22:11:07,161][INFO ][o.e.e.NodeEnvironment    ] [qR5cyzh] using [1] data paths, mounts [[&#x2F; (rootfs)]], net usable_space [12.5gb], net total_space [17.6gb], types [rootfs]</span><br><span class="line">[2018-07-31T22:11:07,162][INFO ][o.e.e.NodeEnvironment    ] [qR5cyzh] heap size [1015.6mb], compressed ordinary object pointers [true]</span><br><span class="line">[2018-07-31T22:11:07,163][INFO ][o.e.n.Node               ] node name [qR5cyzh] derived from node ID [qR5cyzhRQUix7PbCNFViTw]; set [node.name] to override</span><br><span class="line">[2018-07-31T22:11:07,163][INFO ][o.e.n.Node               ] version[6.1.2], pid[7200], build[5b1fea5&#x2F;2018-01-10T02:35:59.208Z], OS[Linux&#x2F;3.10.0-514.el7.x86_64&#x2F;amd64], JVM[Oracle Corporation&#x2F;Java HotSpot(TM) 64-Bit Server VM&#x2F;1.8.0_141&#x2F;25.141-b15]</span><br><span class="line">[2018-07-31T22:11:07,163][INFO ][o.e.n.Node               ] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction&#x3D;75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless&#x3D;true, -Dfile.encoding&#x3D;UTF-8, -Djna.nosys&#x3D;true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe&#x3D;true, -Dio.netty.noKeySetOptimization&#x3D;true, -Dio.netty.recycler.maxCapacityPerThread&#x3D;0, -Dlog4j.shutdownHookEnabled&#x3D;false, -Dlog4j2.disable.jmx&#x3D;true, -XX:+HeapDumpOnOutOfMemoryError, -Des.path.home&#x3D;&#x2F;home&#x2F;elasticsearch&#x2F;elasticsearch-6.1.2, -Des.path.conf&#x3D;&#x2F;home&#x2F;elasticsearch&#x2F;elasticsearch-6.1.2&#x2F;config]</span><br><span class="line">[2018-07-31T22:11:09,295][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [aggs-matrix-stats]</span><br><span class="line">[2018-07-31T22:11:09,295][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [analysis-common]</span><br><span class="line">[2018-07-31T22:11:09,295][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [ingest-common]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [lang-expression]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [lang-mustache]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [lang-painless]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [mapper-extras]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [parent-join]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [percolator]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [reindex]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [repository-url]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [transport-netty4]</span><br><span class="line">[2018-07-31T22:11:09,296][INFO ][o.e.p.PluginsService     ] [qR5cyzh] loaded module [tribe]</span><br><span class="line">[2018-07-31T22:11:09,297][INFO ][o.e.p.PluginsService     ] [qR5cyzh] no plugins loaded</span><br><span class="line">[2018-07-31T22:11:13,791][INFO ][o.e.d.DiscoveryModule    ] [qR5cyzh] using discovery type [zen]</span><br><span class="line">[2018-07-31T22:11:14,926][INFO ][o.e.n.Node               ] initialized</span><br><span class="line">[2018-07-31T22:11:14,927][INFO ][o.e.n.Node               ] [qR5cyzh] starting ...</span><br><span class="line">[2018-07-31T22:11:15,582][INFO ][o.e.t.TransportService   ] [qR5cyzh] publish_address &#123;127.0.0.1:9300&#125;, bound_addresses &#123;[::1]:9300&#125;, &#123;127.0.0.1:9300&#125;</span><br><span class="line">[2018-07-31T22:11:15,598][WARN ][o.e.b.BootstrapChecks    ] [qR5cyzh] max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]</span><br><span class="line">[2018-07-31T22:11:15,598][WARN ][o.e.b.BootstrapChecks    ] [qR5cyzh] max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span><br><span class="line">[2018-07-31T22:11:18,915][INFO ][o.e.c.s.MasterService    ] [qR5cyzh] zen-disco-elected-as-master ([0] nodes joined), reason: new_master &#123;qR5cyzh&#125;&#123;qR5cyzhRQUix7PbCNFViTw&#125;&#123;wRzc-CVaRmmdLNnPfT_LTA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;</span><br><span class="line">[2018-07-31T22:11:18,920][INFO ][o.e.c.s.ClusterApplierService] [qR5cyzh] new_master &#123;qR5cyzh&#125;&#123;qR5cyzhRQUix7PbCNFViTw&#125;&#123;wRzc-CVaRmmdLNnPfT_LTA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;, reason: apply cluster state (from master [master &#123;qR5cyzh&#125;&#123;qR5cyzhRQUix7PbCNFViTw&#125;&#123;wRzc-CVaRmmdLNnPfT_LTA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125; committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)]])</span><br><span class="line">[2018-07-31T22:11:19,028][INFO ][o.e.g.GatewayService     ] [qR5cyzh] recovered [0] indices into cluster_state</span><br><span class="line">[2018-07-31T22:11:19,097][INFO ][o.e.h.n.Netty4HttpServerTransport] [qR5cyzh] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;[::1]:9200&#125;, &#123;127.0.0.1:9200&#125;</span><br><span class="line">[2018-07-31T22:11:19,097][INFO ][o.e.n.Node               ] [qR5cyzh] started</span><br></pre></td></tr></table></figure><p>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl &quot;127.0.0.1:9200&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot; : &quot;snZNWBu&quot;,</span><br><span class="line">  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot; : &quot;9k1xyJl4S6uoosA_Ua0XEQ&quot;,</span><br><span class="line">  &quot;version&quot; : &#123;</span><br><span class="line">    &quot;number&quot; : &quot;6.3.2&quot;,</span><br><span class="line">    &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class="line">    &quot;build_type&quot; : &quot;zip&quot;,</span><br><span class="line">    &quot;build_hash&quot; : &quot;053779d&quot;,</span><br><span class="line">    &quot;build_date&quot; : &quot;2018-07-20T05:20:23.451332Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot; : false,</span><br><span class="line">    &quot;lucene_version&quot; : &quot;7.3.1&quot;,</span><br><span class="line">    &quot;minimum_wire_compatibility_version&quot; : &quot;5.6.0&quot;,</span><br><span class="line">    &quot;minimum_index_compatibility_version&quot; : &quot;5.0.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="更改静态IP"><a href="#更改静态IP" class="headerlink" title="更改静态IP"></a>更改静态IP</h4><p>本地是可以用，但是试了下，由于centos是在虚拟机里面，在外面机器，访问虚拟机ip就打不开es了，没办法，将es设置成静态IP<br>修改配置文件<code>/confif/elasticsearch.yml</code>，修改IP为静态IP：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------- Network -----------------------------------</span><br><span class="line">#</span><br><span class="line"># Set the bind address to a specific IP (IPv4 or IPv6):</span><br><span class="line">#</span><br><span class="line">network.host: 192.168.0.91</span><br><span class="line">#</span><br><span class="line"># Set a custom port for HTTP:</span><br><span class="line">#</span><br><span class="line">http.port: 9200</span><br><span class="line">#</span><br><span class="line"># For more information, consult the network module documentation.</span><br></pre></td></tr></table></figure><p>然后重启es，发现，嗯，还是起不来，又报了俩错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR: [2] bootstrap checks failed</span><br><span class="line">[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]</span><br><span class="line">[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span><br></pre></td></tr></table></figure><h4 id="max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65536"><a href="#max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65536" class="headerlink" title="max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]"></a>max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]</h4><p>切到root下，修改对应配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;etc&#x2F;security&#x2F;</span><br><span class="line"># 日常备份</span><br><span class="line">cp limits.conf limits.conf.bak</span><br><span class="line"># 修改配置</span><br><span class="line">vim limits.conf</span><br></pre></td></tr></table></figure><p>增加内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># elasticsearch config start</span><br><span class="line">* soft nofile 65536</span><br><span class="line">* hard nofile 131072</span><br><span class="line">* soft nproc 2048</span><br><span class="line">* hard nproc 4096</span><br><span class="line"># elasticsearch config end</span><br></pre></td></tr></table></figure><h4 id="max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"><a href="#max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144" class="headerlink" title="max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]"></a>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</h4><p>也是切root改配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;etc</span><br><span class="line">cp sysctl.conf sysctl.conf.bak</span><br><span class="line">vim sysctl.conf</span><br></pre></td></tr></table></figure><p>增加内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># elasticsearch config start</span><br><span class="line">vm.max_map_count&#x3D;262144</span><br><span class="line"># elasticsearch config end</span><br></pre></td></tr></table></figure><p><strong>重启系统</strong></p><p>然后切到es用户，重启服务，完成~<br>可以到本地浏览器试试访问”<a href="http://IP:9200&quot;">http://IP:9200&quot;</a></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>海贼王TV版目录</title>
      <link href="2018/07/19/%E6%B5%B7%E8%B4%BC%E7%8E%8BTV%E7%89%88%E7%9B%AE%E5%BD%95/"/>
      <url>2018/07/19/%E6%B5%B7%E8%B4%BC%E7%8E%8BTV%E7%89%88%E7%9B%AE%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>来点和技术无关的~<br>作为最爱的动漫，没有之一，整理的一点TV版目录，大海贼！</p><a id="more"></a><p>一 海贼和小偸（BOSS：小丑巴基。SPECIAL：海军克比）新船员：路飞 索隆 娜美</p><p>1:我是路飞,未来的海贼王.<br>2:大剑客现身.海贼猎人_罗罗亚索隆.<br>3:蒙卡VS路飞,神秘的美少年是谁?<br>4:路飞的过去。红发登场!<br>5:恐怖.神奇的力量,海贼小丑巴基船长.<br>6:史上最厉害的怪人.催眠师杰克斯.<br>7:绝命追杀.骑兽师摩奇VS路飞.<br>8:壮烈战斗.剑客索隆VS杂技卡巴吉.</p><p>9:谁是胜者.恶魔果实能力者大对决.</p><p>二 不虚假的事（BOSS：船长洛克。SPECIAL：可雅）新船员：骗人布 梅利</p><p>10:正义的骗子?骗人布船长.<br>11:揭发阴谋.海贼管家洛克船长<br>12:正面冲突!黑猫海贼团斜坡大攻防<br>13:恐怖2人组,黑猫兄弟VS索隆<br>14:路飞复活.可雅小姐冒死奋战<br>15:打倒洛克.骗人布男子的决心<br>16:保护可雅.骗人布海贼团大展身手<br>17:怒气冲天.洛克VS路飞<br>18:你就是珍禽异兽.卡蒙和奇妙的伙伴.<br>19:3刀流的过去.索隆与克伊娜的誓言.</p><p>三 ALL  BLUE之梦（BOSS：克利克。SPECIAL：红脚哲普）新船员：山治</p><p>20:招牌厨师.海上餐厅的山治<br>21:不速之客.山治的饭与啊金的恩.<br>22:最强海贼滥队.克利克提督<br>23:保卫芭拉缔.大海贼_红脚哲普.<br>24:鹰眼米霍克.剑豪索隆命丧大海.<br>25:必杀足技招爆发,山治VS铁壁帕路<br>26:路飞和山治的梦想.梦幻般的ALL BIUE<br>27:冷酷无情的鬼人.海贼滥队总队长啊金<br>28:不会死的.路飞VS克利克的激战<br>29:死斗的结果!肚皮里的一把枪<br>30:起程.海上厨师和路飞他们一起出发</p><p>四 橘子和风车（BOSS：鱼人阿龙。SPECIAL：贝尔梅尔）新船员：娜美</p><p>31:东海最坏的男人.鱼人海贼恶龙<br>32:可可亚西存的魔女.恶龙的女干部<br>33:骗人布死了?路飞还没登陆吗.<br>34:全员集合,骗人布道出娜美的实情<br>35:不为人知的过去.女战士_贝尔梅尔<br>36:求生.妈妈贝尔梅尔与娜美的亲情.<br>37:路飞站出来.食言的结果<br>38:路飞危险.鱼人VS路飞海贼团<br>39:路飞沉入海底.索隆VS章鱼小八<br>40:伟大的战士.激战山治与骗人布.<br>41:路飞动力全开.娜美的决心与草帽<br>42:爆裂.鱼人恶龙来自海底的猛攻.<br>43:终结鱼人帝国.娜美是我的伙伴<br>44:带着笑容的起航.再见了故乡可可亚西村.<br>45:悬赏犯.草帽路飞闻名全世界</p><p>番外编  小巴基大冒险</p><p>46:追捕草帽小子.小丑巴基的大冒险.<br>47:久等咯.巴基船长复活.</p><p>五 伟大的传说开始（SPECIAL：达斯琪）</p><p>48:开始与结束的镇.登陆罗格镇.<br>49:3代鬼撤和雪走.索隆的新刀和女上士.<br>50:骗人布对带小孩的达迪.正午的决斗<br>51:炽热的料理比赛!香吉士VS美人厨师<br>52:巴其复仇!在死刑台上笑的男人<br>Special:路飞落下!秘境.海肚脐之大冒险<br>53:传说开始!目标伟大的航路</p><p>TV原创 千年龙的传说</p><p>54:全新冒险的预感!神秘少女阿碧丝<br>55:奇迹般的生物!阿碧丝的秘密和传说之岛<br>56:艾力克出击!突破重围冲出军舰岛<br>57:绝海孤岛!传说中的失落之岛<br>58:废墟的决斗!紧张的索隆VS艾力克<br>59:路飞完全包围!尼尔森提督的秘招<br>60:在天空中飞舞!苏醒的千年传说</p><p>六 进入伟大航路 开端（SPECIAL：鲸鱼拉布）新船员：薇薇公主 超卡鲁鸭卡鲁</p><p>61:愤怒的决斗!跨越红土大陆<br>62:第一道难关!出现巨大的鲸鱼拉布<br>63:男人的约定!路飞与鲸鱼再会的誓言<br>64:欢迎海贼的小镇!登陆威士忌山峰<br>65:三刀流爆发!索隆VS巴洛克工作社<br>66:一决胜负!路飞VS索隆谜样的大决斗<br>67:护送薇薇公主!路飞海贼团出航</p><p>番外编  海军奋斗记</p><p>68:加油!克比,贝鲁梅伯海军奋斗记<br>69:克比,贝鲁梅伯的决心!格普中将的父母心</p><p>七 巨人的小花园 （BOSS：MR.3。SPECIAL：巨人东利 布洛基）</p><p>70:太古之岛!潜藏在小花园的黑影<br>71:巨人的决斗!巨人东利与布洛基<br>72:路飞生气了!神圣决斗中的卑鄙陷阱<br>73:布洛基胜利狂哭!艾尔帕布决战<br>74:魔鬼蜡烛!不甘心的眼泪与愤怒的泪水<br>75:袭击路飞的魔法!颜色调配的陷阱<br>76:毅然反击!乌索普的机智与火炎星<br>77:再见了,巨人岛!朝阿拉巴斯坦出发<br>78:娜美生病了!朝海上之雪前进</p><p>八 没有名字的国家（BOSS：瓦尔波。SPECIAL：多尔顿）新船员：驯鹿乔巴</p><p>79:奇袭!布里基克号与布里基的瓦尔波<br>80:没有医生的岛!在没有名字的国家冒险<br>81:开心吗?人称魔女的医生<br>82:多尔顿的觉悟!瓦尔波军团登陆<br>83:雪之岛!登上磁鼓山顶<br>84:蓝鼻子的驯鹿!乔巴的秘密<br>85:痴人说梦话!庸医西尔尔克<br>86:西尔尔克的樱花与继承的遗志<br>87:VS瓦尔波军团!吞吞果实的实力<br>88:动物系恶魔果实!乔巴的七段变形<br>89:王国的支配终将结束!旗子的信念直到永远<br>90:西尔尔克的樱花!磁鼓炮射的奇迹<br>91:再见了磁鼓岛!我要向大海出发了</p><p>九 沙漠的鳄鱼（BOSS：七武海沙鳄鱼。SPECIAL：火拳艾斯 上校斯摩格）新船员：罗宾</p><p>92:阿拉巴斯坦的英雄和船上的芭蕾女伶<br>93:朝着沙漠之国前进!呼唤雨之粉与叛乱军<br>94:各路英雄的再次相遇!他的名字叫火拳艾斯<br>95:艾斯和路飞!热情的理想与兄弟情谊<br>96:绿之城!爱尔马尔与功夫海牛<br>97:沙之国的冒险!住在炎热大地的怪物<br>98:沙漠海贼团登场!为自由而生的男人们<br>99:冒牌货的骨气!真心的叛乱军卡缪<br>100:叛乱军战士窥沙!对薇薇发誓的梦<br>101:艳阳的决斗!艾斯VS蝎子男<br>102:遗迹里迷路!薇薇,同伴和国家生存之道<br>103:蜘蛛人咖啡店!8点敌方特务集合<br>104:路飞VS薇薇!赌下同伴之泪的誓言<br>105:阿拉巴斯坦战线!梦之城雨地<br>106:一筹莫展的陷阱!突人雨宴当中<br>107:理想乡作战开始!开始活动的叛乱<br>108:恐怖的香蕉鳄鱼与Mr.王子<br>109:通过逆转大逃亡的关键!蜡烛球<br>110:无情的死斗!路飞VS克洛克达尔<br>111:向着奇迹奔跑!阿拉巴斯坦动物岛<br>112:叛乱军VS国王军!决战在阿尔巴那<br>113:叹息的阿尔巴那!激斗,跑得快队长<br>114:为了同伴的梦想发誓!决斗鼹鼠土堆第四街<br>115:本日大公开!模仿模仿合成脸<br>116:变身为娜美!冯.克雷连打芭蕾拳法<br>117:娜美的旋风注意报告!天候棒炸裂<br>118:皇族的秘宝!古代兵器冥王<br>119:豪剑的精髓!斩钢铁之力与万物的呼吸<br>120:战争结束了!窥沙举起了白旗<br>121:薇薇声音的归宿!英雄从天而降<br>122:沙鳄鱼VS水路飞!决斗第二回合<br>123:鳄鱼!向着王家之墓飞奔吧,路飞<br>124:恶梦之时逼近!这里是沙沙团秘密基地<br>125:伟大之翼!我的名字是国家守护神贝尔<br>126:超越!雨水降落在阿拉巴斯坦<br>127:放下武器吧!海贼和坚守的正义<br>128:海贼的宴会!阿拉巴斯坦逃出计划<br>129:离别的日子!薇薇的冒险结束了<br>130:危险的香气!第七位伙伴-妮可.罗宾</p><p>TV原创 彩虹色的雾</p><p>131:第一个患者!蓝波球的秘密<br>132:航海士的反乱!为了不曾割舍的梦想<br>133:被继承的梦想!咖哩的铁人香吉士<br>134:让花朵绽放!男子汉乌索普的八尺烟花<br>135:传说中的海贼猎人!流浪的剑士索隆<br>136:羊之岛的赛尼和山中的海贼船<br>137:赚了一笔啊!高利货赛尼的野心<br>138:岛上宝物的线索!赛尼海贼团出击<br>139:彩虹颜色雾的传说!露露嘉岛的老人半藏<br>140:永远之国的居民!盘普今海贼团<br>141:回想故乡!逃离不出的海贼墓场<br>142:乱战必死!贝特的野心与彩虹之塔<br>143:就这样传说开始了!去彩虹的那面</p><p>十 空海漫游（BOSS：神艾尼路。SPECIAL：库力克 战鬼瓦夷帕 原神科尔）</p><p>144:被夺走的记录!打捞之王人猿<br>145:怪物登场!别对白胡子出手<br>146:别小看梦想!嘲笑之镇”魔谷镇”<br>147:海贼的最高峰!谈梦想的男人和海底探索王<br>148:传说的一族!大话王诺兰德<br>149:向云大满驼!追击南南见鸟<br>150:梦想已完结了吗?贝拉密VS猿山联合军<br>151:一亿的男人!世界最高权力和黑胡子海贼<br>152:让船航向天空!搭上突激的海流<br>153:这里是空之海!空之骑士和天国之门<br>154:神之国!住在云上的天使们<br>155:禁断的大地!神所居住的岛屿和天的制裁<br>156:这么快就成罪犯了!SKYPIEA的执法者<br>157:要逃跑吗!已经开始进行的神的试练<br>158:可爱大道的陷阱!万能的神.艾涅尔<br>159:向前,乌鸦丸号!目标活祭坛<br>160:生存率10%!心网使者的神官大悟<br>161:球的试练的威协!迷失森林的死斗<br>162:乔巴危险!原来的神VS神官修罗<br>163:越来越不可思议!绳的试练和爱的试练<br>164:点燃香朵拉的灯吧!战士瓦夷帕<br>165:天空的黄金乡加雅!目标神之社<br>166:寻找黄金前夜的祭尊!对”大地”的想法<br>167:神.艾涅尔登场!生存战斗的夜鸣曲<br>168:长牙蟒蛇!终于到了生存者游戏的时间<br>169:舍命的排击!(战鬼)瓦夷帕的觉悟<br>170:空中的激战!海贼索隆VS战士布拉哈姆<br>171:呼叫的燃烧炮!路飞VS战鬼瓦夷帕<br>172:沼的试练!乔巴VS神官涅磐<br>173:无敌的能力!艾涅尔的真面目<br>174:幻之都市!雄伟的香多拉遗迹<br>175:生存率0%!乔巴VS神官欧姆<br>176:登上”巨大豆蔓”!上层遗迹的死斗<br>177:铁的试练的重头戏!白荆死亡决斗<br>178:迸出火花的斩击!索隆VS神官欧姆<br>179:崩溃的上层遗迹!走向曲终的五重奏<br>180:古代遗迹的对决!神.艾涅尔的目的<br>181:前往无边无际大地的野心!方舟箴言</p><p>182 最后的激战!海贼路飞对神艾尼路!!<br>183 MAXIM浮出水面!起动Despair<br>184 路飞落下!神之载决和娜美的愿望!!<br>185 苏醒的二人！燃烧吧爱情的救援前线！！<br>186 走向绝望的狂想曲，空岛灭亡迫在眉睫！！<br>187 钟声的引导！大战士与探险家的故事</p><p>188 从诅咒的束缚中解放！大战士流下热泪！！<br>189 你是我永远的挚友！响彻广阔无边大海的誓约之钟<br>190 天使岛毁灭！雷迎降临的恐怖！！<br>191 放倒巨大豆蔓！逃出空岛的最后希望！<br>192 神之国的奇迹！响彻天堂的岛之歌<br>193 战争结束！响彻远方 充满自豪地幻想曲<br>194 我来到了这里！历史正文的编织者<br>195 走吧，回青海去！！编织出幻想的最终乐章</p><p>TV原创 G8要塞</p><p>196:发布非常事态命令!恶名昭著海贼船潜人<br>197:料理人香吉士!在海军食堂发挥厨师的真正价值<br>198:被囚的索隆与乔巴的紧急手术<br>199:逼近的海军搜查网!第二名被囚者<br>200:拼命的路飞和香吉士!救出大作战<br>201:热血特种部队参战!桥上的攻防战<br>202:突破包围网!夺回黄金梅利号<br>203:消失的海贼船!要塞攻防第二回合<br>204:黄金夺回作战与威霸回收作战<br>205:一网打尽计划!强纳森自信的秘策<br>206:别了海军要塞!逃出的最后攻防战</p><p>十一 长链岛冒险（BOSS：银狐福克西。）</p><p>207:长链岛的大冒险<br>208:福克西海贼团与DAVY BACK FIGHT争霸战<br>209:第一回战!环岛皮划艇赛<br>210:银狐福克西!猛烈的干扰攻势<br>211:第二回合!GROGGY RING赛<br>212:连续的红牌!GROGGY RING<br>213:第三回战!滚轴溜冰追逐战<br>214:白热化爆走比赛!突人最终轮<br>215:轰鸣的热球刚球!海贼躲避球赛<br>216:悬崖的决战!不倒翁摔倒了<br>217:船长对决!最终战单挑格斗<br>218:迟缓攻击全开VS不死身的路飞<br>219:壮绝激烈的单挑对决!命运何去何从</p><p>TV原创 失忆岛</p><p>220:失去了,被夺走了!你是谁?<br>221:抱着笛子的谜之少年和罗宾的推理<br>222:出击,夺回记忆!海贼团上陆<br>223:露出獠牙的索隆!堵在面前的野兽<br>224:原形毕露!记忆小偷最后的攻击<br>225:自尊心强大的男人!银狐福克西<br>226:最接近无敌的男人!最危险的男人</p><p>十二 水之都（BOSS：CP9路奇。SPECIAL：冰山 帕裏 青雉）新船员：罗宾 弗兰奇 阳光万里号</p><p>227:海军总部大将青雉!最强战斗力的威胁<br>228:橡胶与冰的决斗!路飞VS青雉<br>229:飞驰的海列车与水之都WATER SEWEW<br>230:水上都市的冒险!目标巨大的造船厂<br>231:福兰克一家与冰山先生<br>232:格雷勒公司!壮观的一号船坞<br>233:海贼诱拐事件与等待死亡的海贼船<br>234:救出伙伴!猛攻福兰克屋<br>235:月下的大干戈!悲伤下飘动的海贼旗<br>236:路飞VS乌索普!男儿气魄的大碰撞<br>237 激震水之都!被袭击的冰山!<br>238 橡皮人对喷火的改造人<br>239 犯人是草帽海贼团?水之都的护卫<br>240 永远的离别?招来黑暗的女子尼可.罗宾<br>241 抓住罗宾!草帽海贼团的决议<br>242 信号伴随着炮击！开始行动的CP9<br>243 取下面具的CP9！惊人的真面目<br>244:隐藏的羁绊！冰山与福兰奇<br>245:回来吧罗宾！与CP9的对决<br>246:草帽海贼团全灭？豹型的威胁！<br>247:被船所爱的男人！乌索普的眼泪！<br>248:福兰奇的过去！海列车起航之日<br>249:斯潘达姆的阴谋！海列车颠簸之日<br>250:传说男人的末日！海列车哭泣之日<br>251:背叛后面的真相！罗宾悲伤的决意！<br>252:分离同伴的汽笛！飞驰而去的海列车<br>253:香吉士突入！暴风雨中的海列车大战！<br>254:娜美的全力呼唤！草帽小子路飞复活！<br>255:另一辆海列车？火箭人出击！<br>256.拯救同伴！向拳头发誓的敌我之羁绊！<br>257.击碎大浪！路飞和索隆的最强合体技<br>258.谜之男登场！？他的名为狙击王！<br>259.厨师间的对决！香吉士对拉面拳法！<br>260.车顶上的决斗！福兰奇对内罗<br>261.鬼斩索隆对斩船人T骨<br>262.罗宾争夺战！狙击王的奇策！！<br>263.司法之岛！Eneas Lobby的全貌！<br>264.登陆作战开始！突击！草帽小子海贼团！<br>265.路飞猛冲！司法之岛的大决战！<br>266.与巨人族的攻防！打开第二道门！<br>267.杀出活路！腾空而起的火箭人！<br>268.跟上路飞的步伐！草帽小子一伙全力作战<br>269.路飞海贼团奔向新的战场！<br>270.还我罗宾！路飞对布鲁诺！<br>271.不要停止脚步！点起反击的狼烟！<br>272.路飞就在眼前！前往法院前广场集结<br>273.为了捍卫同伴!二档发动<br>274.回答我罗宾!草帽小子海贼团的呼唤!<br>275.罗宾的过去！被称为恶魔的少女！<br>276.宿命的母女！母亲之名奥尔维亚！<br>277.奥哈拉的悲剧<br>278.说你想活下去!<br>279,跳下瀑布吧！路飞的信念!<br>280.男人的生存之道！索隆的野心和乌索普的梦想！<br>281.泪水编织而成的同伴的羁绊！娜美的世界地图！<br>282.离别造就了男子汉！香吉与乔巴.<br>283.一切都为了伙伴！黑暗中的女人罗宾！<br>284.绝不交出设计图！福兰奇的决断！<br>285.夺取五把钥匙！草帽海贼团 VS CP9！<br>286.恶魔果实的能力！卡库加布拉大变身<br>287.死也不踢女人！男子汉香吉的骑士道！<br>288.猫头鹰的失算！我的可乐是生命之水！<br>289.索隆的新招炸裂登场！剑名：狙击王！<br>290.无法控制！乔巴的蓝波球大变身!<br>291.捕头路飞再登场！是梦境还是现实彩票大骚动！<br>292.城内的散年糕大竞赛！大红鼻子的阴谋！<br>293.泡沫使用者卡里法！逼近娜美的肥皂危机！<br>294.凶报传来,屠魔令发动<br>295.五个娜美？伴随幻象的反击！<br>296.娜美的决断,攻击暴走的乔巴<br>297.猎人香吉登场？赠送给谎言狼的挽歌<br>298.灼热的足技,SANJI的反击<br>299.白刃之间的猛袭!ZORO和KAKU强力斩击对决<br>300.鬼神索隆,气势逼人的阿修罗化身<br>301.斯潘达姆惊愕！屹立于司法塔上的英雄<br>302.罗宾解放！路飞与路奇的激战<br>303.犯人是捕头路飞？追寻消失的大樱花<br>304.不战胜对手就保护不了任何人!3档发动<br>305.战栗的过去！黑暗的正义与罗布·路奇<br>306.梦幻的人鱼出现？在渐渐失去意识之时<br>307.炮火中沉没的岛屿！福兰奇绝望的呼喊！<br>308.等待路飞！踌躇之桥上的死斗！<br>309.充满愿望之拳！路飞拼尽全力的[机关枪]！<br>310.来自大海的朋友！草帽小子一伙最深的友情<br>311.全员大逃亡!海贼的胜利之道<br>312.感谢你,梅利!朦胧之雪中的离别之海<br>313.打破宁静！持有爱之拳的海军中将<br>314.最强的家族!路飞父亲的惊人身份<br>315.新世界!伟大航路的去向<br>316.香克斯的行动!连接暴走时代的纽带<br>317.寻找箭鱼的少女！水之都大搜查<br>318.坚强的妈妈！索隆家务活闹剧！</p><p>319.山治惊愕！谜之老头与超美味料理<br>320.终于全体悬赏！超过6亿的一伙人！<br>321.君临大海的百兽之王！梦想之船终于完成！<br>322.再见了亲爱的小弟们！弗兰奇起航<br>323.走出水之都！男子汉乌索普决斗的了断</p><p>324.巡回的悬赏令！欢声雀跃的故乡 向前迈进的船！</p><p>番外篇 艾斯被秒</p><p>325.最凶险的能力！袭击艾斯的黑胡子的黑暗 </p><p>TV原创 海贼旗猎人（BOSS：爸爸？）</p><p>326.谜一般的海贼一行！阳光号和危险的陷井<br>327.SUNNY号大难当前！咆哮的超速秘密机器<br>328.沉没于新世界中的梦想！失意的海贼帕泽鲁<br>329.袭击而来的刺客们！冰上的大决斗<br>330 草帽一伙陷入苦战！嵌入旗帜的海贼魂<br>331 酷热全开!迫近的双子磁力量<br>332.混乱不堪的公馆！发怒的首领与被囚的一伙人<br>333.重生的不死鸟！向同伴许下的誓言海贼旗之梦<br>334.炽热的决战！路飞VS灼热的首领<br>335.相会新世界！与勇猛的海贼的告别</p><p>TV 原创</p><p>336.乔巴人出动！保卫海滨的电视台 </p><p>十三僵尸岛（BOSS：奥兹 月光莫利亚。 SPECIAL：罗拉）新船员：音乐家布鲁克</p><p>337 闯进魔之海！ 浮现于浓雾中的迷之骷髅<br>338 遇见人的喜悦！骷髅绅士的真面目<br>339 怪现象频发！登录[Thriller Bark]<br>340 被称作天才的男人！霍古巴克现身<br>341 娜美千钧一发！僵尸宅院和透明人<br>342 僵尸之迷!恶梦般的霍古巴克研究所<br>343 他的名字是莫里亚！操纵影子的大海贼设下的陷阱<br>344 僵尸歌的飨宴！夜袭钟的黑暗声音<br>345 全是动物！贝罗娜的不可思议的花园<br>346 消失的草帽一伙！出现了神秘的剑客<br>347 残余的骑士道<br>348 从天而降的男人!剑侠鼻歌<br>349 路飞紧急事态!最强影子的去向<br>350 被称为魔人的战士奥兹复活<br>351 500年后的苏醒!!奥兹开眼<br>352 信念的祈求!! 死守爆炸头的布鲁克<br>353 男子汉不灭的誓言！！在远方的天空下等待的朋友<br>354 定将再会!!布鲁克许下誓言的海岬<br>355 食物 娜美和影子！！路飞愤怒的大反击<br>356 乌索普最强?消极之灵就交给我了<br>357 将军僵尸被秒杀!奥兹的冒险心情<br>358 炎之骑士山治！！踢毁虚假的婚礼<br>359 透明的恩怨?山治被夺走的梦<br>360 救命啊英雄 不死之身的敌人幽灵公主<br>361 吓破胆的佩罗纳！！名副其实的牛皮大王乌索普<br>362 屋顶上飞舞的斩击 索隆与龙马的决斗<br>363 激怒的乔巴！霍古巴克魔鬼般的医术<br>364 奥滋的巨吼！死出来草帽小子一伙<br>365 敌人是路飞？最强僵尸对草帽小子一伙<br>366 受死吧阿布萨罗姆！娜美的友情雷击<br>367 扳回一城！必杀草帽合体技<br>368 无声无息的袭击！迷之访问者暴君熊！<br>369 奥滋加莫里亚！力量与智慧的最凶合体<br>370 逆转战局的秘策！梦魇 路飞登场<br>371 草帽小子一伙全军覆没！影影能力全开<br>372 超绝战斗开始！路飞VS路飞<br>373 决战迫近 重撞 最后的一击<br>374 身体消失 照射在恶魔之岛上的朝阳<br>375 永不完结的危机 草帽小子以获得抹杀命令<br>376 全部弹开 熊的肉垫果实能力<br>377 伙伴的痛苦就是我的痛苦 佐隆奋不顾身的战斗<br>378 遥远的誓言 海贼之歌与小鲸鱼<br>379 布鲁克的过去 欢乐的伙伴悲伤的离别<br>380 宾克斯的美酒 连接过去和现在的歌<br>381 新的伙伴音乐家鼻歌布鲁克</p><p>TV原创</p><p>382 迟缓果实的威胁 银狐福克西再现<br>383 宝藏争夺战 崩溃的SPA ISLAND号<br>384 布鲁克大奋斗 成为真正伙伴的艰辛道路？</p><p>十四（香波地群岛篇）</p><p>385 环绕伟大航路半圈！到达！红土大陆<br>386 憎恨草帽小子一伙的男人！铁面男迪巴鲁登场！<br>387 再次相会！救出被囚的鱼人<br>388 悲剧！隐藏在面具下的迪巴鲁的真面目<br>389 爆炸！桑尼号超级秘密武器狮吼炮<br>390 目标直指鱼人岛！肥皂泡群岛登陆<br>391 暴虐！香波迪群岛的支配者天龙人<br>392 全新的对手集结！超新星11人<br>393 目标是凯米！！人贩子的魔手迫近<br>394 救出凯米 群岛上残留着黑暗的历史<br>395 UTIME LIMIT 人类拍卖会开幕<br>396 铁拳炸裂！勇闯竞拍场<br>397 特大恐慌！拍卖会场的死斗！<br>398 大将黄猿出动！ 香波迪群岛的骚乱！<br>399 突破包围网！ 海军VS三名船长！<br>400 罗杰和雷利   海贼王和他的右手腕<br>401 无法回避？大将黄猿的光速踢！<br>402 压倒性优势！海军战斗兵器和平主义者<br>403 新的强敌出现！挑着斧头的战桃丸<br>404 大将黄猿的猛攻 草帽一伙一筹莫展！<br>405 消失的伙伴们 草帽小子一伙的末日<br>406 时代剧特别篇 捕头路飞再次登场<br>407 时代剧特别篇 打破！斯里拉商会的圈套<br>408 登陆！男子禁忌之岛 亚马逊·百合<br>409 急迫！伙伴们的去向 女人岛的冒险<br>410 全体一塌糊涂！海贼女帝汉库克<br>411 后背隐藏的秘密 路飞遭遇蛇姬<br>412 无情的判决！被石化的玛格雷特<br>413 路飞大苦战！蟒蛇姐妹霸气的力量！！<br>414 全力以赴的战斗！橡胶VS蛇蛇<br>415 汉库克的告白 姐妹们难言的过去<br>416 拯救艾斯！新的目的地是大监狱<br>417 恋爱就象暴风雨！婀娜的汉库克<br>418 伙伴们的行踪 气象科学与机关岛<br>419 伙伴们的行踪 巨鸟之岛与桃色乐园！<br>420 伙伴们的行踪 连接岛屿的桥与食人植物<br>421 伙伴们的行踪 消极公主与恶魔王</p><p>推进城 Impel Down</p><p>422 决死的潜入！海底监狱 Impel Down<br>423 地狱里重逢！？四分五裂果实的能力者！<br>424 粉碎！红莲地狱 巴基的华丽大作战<br>425 监狱最强的男人！毒人·麦哲伦登场<br>426 剧场版联动特别篇 蠢蠢欲动 金狮子的野心<br>427 剧场版联动特别篇 被盯上的小东海<br>428 剧场版联动特别篇 阿密格海贼团的猛攻<br>429 剧场版联动特别篇 激战！路飞VS拉鲁格<br>430 被囚禁的王下七武海！海侠甚平<br>431 牢头萨鲁德得斯的陷阱 LV3·饥饿地狱<br>432 解放的白鸟！再会！冯·克雷<br>433 署长麦哲伦出动 完成！草帽小子包围网<br>434 全部战力集合！LV4·灼热地狱的决战<br>435 麦哲伦够强！冯·克雷临阵逃亡<br>436 一决雌雄！路飞孤注一掷的最后一击<br>437因为是朋友！冯?克雷拼死的营救行动！<br>438  地狱中的乐园！因佩尔LV5.5（2010年2月14日放送）<br>439「路飞治疗开始 伊万小姐奇迹的力量!!」<br>440 相信奇迹！冯·克雷魂的声援<br>441「路飞复活伊娃的越狱计划启动」<br>442 艾斯压送开始 最下层的LV6攻防<br>443 最强小队结成 震憾！推进城<br>444 更加混乱 黑胡子蒂奇袭来<br>445 危险的相遇 黑胡子和雨之希留<br>446 凭意志也不能倒下 认真起来的汉尼拔<br>447 愤怒的JET手枪 路飞VS黑胡子<br>448 阻止麦哲伦！伊万小姐绽放奥义<br>449 麦哲伦的奇策 受阻的越狱计划<br>450 越狱小队 危在旦夕 禁断招术 毒之巨兵<br>451 发生吧 最后的奇迹 突破正义之门<br>452 目标海军本部 营救艾斯之旅<br>453 同伴的下落 空岛报告和改造动物<br>454 伙伴们的下落!巨岛的比奈与桃色的对决<br>455 伙伴们的行踪 革命军和暴食森林的陷阱<br>456 伙伴们的行踪 巨大的墓碑与内裤的恩情</p><p>海军本部篇（顶上战争）</p><p>457 到达海军总部之前的回想特别篇 兄弟的誓言（动画原创）<br>458 到达海军总部之前的回想特别篇 集合！三大将（动画原创）<br>459 决战临近 海军最强布阵完成<br>460 巨大舰队出现 袭来！白胡子海贼团<br>461 决战拉开帷幕 艾斯和白胡子的过去<br>462 毁灭世界的力量！地震果实的能力<br>463 燃尽一切！大将赤犬的能力<br>464 恶魔的后代！小奥兹 Jr. 勇往直前！<br>465 只有胜者才是正义 发动！战国的作战<br>466 草帽小队登场!风云突变的战场<br>467 就算死也要救你！路飞VS海军 战斗开始<br>468 激战的连续！能力者军团VS能力者军团<br>469 熊发生的异变 伊万愤怒的一击<br>470 剑豪米霍克 逼近路飞的黑刀的斩击<br>471 歼灭作战启动 和平主义者军团的威力<br>472 赤犬的谋略！被陷害的白胡子<br>473 包围作战运作！白胡子海贼团陷入危机！<br>474 处刑执行命令下达　突破包围壁！<br>475 突入最终局面 白胡子起死回生的一招<br>476 路飞拼尽全力 奥里斯广场的全力一战<br>477 消减生命的力量 兴奋·荷尔蒙再次使用<br>478 为了约定！！激斗！路飞与可比<br>479 处刑台就在眼前！开启通往艾斯的道路<br>480 各自选择的道路 路飞VS卡普<br>481 艾斯救出!四皇白胡子最后的船长命令！<br>482 烧尽火焰的能力!赤犬无情的追击!<br>483 寻找答案 火拳艾斯死于战场<br>484 海军本部崩溃 白胡子无言的愤怒！<br>485 一决胜负 白胡子VS黑胡子海贼团<br>486 演出开幕 黑胡子显示出的真正目的<br>487 大将赤犬的执着 袭向路飞的岩浆铁拳<br>488 拼命的呐喊 改变命运的充满勇气的数秒<br>489 香克斯出现！巅峰对决终于结束</p><p>大事件后篇</p><p>490 群雄割据 新时代开始！<br>491 登陆女儿岛 逼近路飞的残酷现实</p><p>海贼王×美食猎人 特别联合篇</p><p>492 最强组合！奋斗 路飞和阿虏（1小时特别篇）</p><p>兄弟相遇的回忆篇</p><p>493 路飞和艾斯 兄弟相遇的故事！<br>494 萨博登场 不确定之物终点站的少年<br>495 我不会逃！艾斯拼死的营救作战<br>496 有朝一日要出海！三顽童推杯换盏结兄弟！<br>497 告别达旦一家？建成！秘密基地（动画原创）<br>498 路飞拜师？和海贼王交锋过的男人（动画原创）<br>499 和巨虎的决战 成为船长的人是谁？（动画原创）<br>500 被夺去的自由！逼近三兄弟的贵族的陷阱！<br>501 被释放的火炎 Gray terminal的危机<br>502 自由在哪里? 少年悲剧的出航!<br>503 拜托你了！兄弟寄来的信<br>504 为了兑现约定 各自开始旅程！<br>505 好想见他们！路飞泪的呼喊！<br>506 草帽一伙儿 震惊！传来的噩耗</p><p>修行与两年后</p><p>第507话 和冥王雷利重逢 路飞决断之时<br>第508话 回到船长身边！空岛逃离与浮游岛的案件<br>第509话 接触！大剑豪米霍克 索隆 意气用事的决斗！<br>第510话 山治受难，返回王国的女王！<br>第511话 竟然再次登陆！路飞来到海军本部！<br>第512话 传达给伙伴们 四处传播的大新闻！<br>第513话 海贼们开始行动！惊天动地的新世界！<br>第514话 地狱中求生还 山治，赌上男人尊严的一战！<br>第515话 还要变得更强 索隆向船长的发誓！<br>第516话 路飞开始修行 2年后前往约定之地<br>第517话 新章开幕 草帽一伙再集结！<br>第518话 一触即发！路飞VS伪路飞<br>第519话 被阻击的草帽一伙<br>第520话 假草帽一伙的威胁<br>第521话 见识修行的成果 </p><p>鱼人岛篇</p><p>第522话 路飞踏上前往新世界的航程<br>第523话 守卫桑尼号的男人！<br>第524话 大海原的恶魔现身<br>第525话 失散的草帽一伙<br>第526话 海底火山喷发<br>第527话 登陆鱼人岛！美丽的人鱼们<br>第528话 香吉士生命垂危<br>第529话 鱼人岛灭亡？夏利的预言<br>第530话 鱼人岛之王 海神尼普顿<br>第531话 龙宫城 被所救的鲨鱼带过来<br>第532话 爱哭的胆小鬼！硬塔壳的人鱼公主<br>第533话 发生紧急事态 被占领的龙宫城<br>第534话 龙宫城震动 白星诱拐事件<br>第535话 霍迪袭来 复仇计划开始<br>第536话 龙宫城的决战 卓洛VS霍迪<br>第537话 守护白星！邓肯的追击<br>第538话 草帽一伙战败？霍迪掌控龙宫城<br>第539话 复苏的因缘 娜美和鱼人海贼团<br>第540话 解放奴隶的英雄 冒险家泰格<br>第541话 黄猿登场！瞄准泰格的陷阱 </p><p>美食的俘虏特别篇<br>第542话 再会 阿虏和路飞 寻找海鲜果实（46分钟特别篇） </p><p>继续============================================</p><p>第543话 英雄的末路 泰格令人震惊的真相<br>第544话 海贼团分裂 甚平VS阿龙<br>第545话 鱼人岛震动！漂流而来的天龙人<br>第546话 突然的悲剧！封闭未来的凶杀<br>第547话 再回到现在 霍迪开始行动<br>第548话 王国震惊 尼普顿处刑命令<br>第549话 产生的裂痕！路飞VS甚平<br>第550话 霍迪的异变 凶药真正的力量<br>第551话 决战开始 乔克尔特广场<br>第552话 震惊的告白 乙姬暗杀的真相<br>第553话 白星的眼泪！路飞终于登场<br>第554话 大激战！草帽小子一伙VS10万敌人<br>第555话 绝招炸裂！索隆、香吉出击！<br>第556话 初次亮相！桑尼号的秘密武器！<br>第557话 钢铁海贼！弗兰奇将军登场<br>第558话 诺亚接近！鱼人岛毁灭的危机<br>第559话 快点！路飞！白星危在旦夕！<br>第560话 激斗开始！路飞VS霍迪！<br>第561话 大乱站！草帽小子一伙VS新鱼人海贼团！<br>第562话 路飞败北！？霍迪复仇的时刻<br>第563话 令人震惊的真相！霍迪的真实身份！<br>第564话 一切归零！对路飞强烈的愿望！<br>第565话 路飞全力的一击！火拳枪炸裂<br>第566话 终于了结！与霍迪的最终决战<br>第567话 停下诺亚！拼命的橡皮机关枪！<br>第568话 迈向未来！通向太阳的道路！<br>第569话 被揭开的秘密 古代兵器的真相<br>第570话 草帽小子一伙惊愕！新的海军元帅！<br>第571话 最爱糖果！四皇毕古麻姆<br>第572话 前途多艰 新世界的陷阱<br>第573话 终于出航！再见鱼人岛<br>第574话 迈向新世界！目标最强海域</p><p>Z的野心篇<br>第575话 Z的野心篇 小小巨人莉莉！<br>第576话 Z的野心篇 谜之最强军团登场！<br>第577话 Z的野心篇 决死的大脱逃作战！<br>第578话 Z的野心篇 路飞VS修佐！</p><p>燃烧岛篇（庞克哈扎德）</p><p>第579话 登陆！燃烧岛庞克哈萨德<br>第580话 灼热的战斗！路飞VS巨大龙！<br>第581话 一伙人骚然！令人震惊的独头武士登场！<br>第582话 惊愕！终于显露出的岛上的秘密<br>第583话 救出孩子们！全员战斗开始<br>第584话 剑术对决 布鲁克VS神秘的躯体武士<br>第585话 七武海！托拉法尔加·劳<br>第586话 大危机 路飞沉入极寒之湖<br>第587话 激斗！劳VS斯摩格中将<br>第588话 2年后的重逢！路飞与劳<br>第589话 世界最邪恶 恐怖科学家凯撒</p><p>TV原创（联合篇）<br>第590话 奔跑吧最强军团！阿虏和路飞和悟空！</p><p>继续================================</p><p>第591话 乔巴震怒 主人惨无人道的实验<br>第592话 全部抹杀！传说中的杀手袭来！<br>第593话 拯救娜美！路飞的雪山之战<br>第594话 结成！路飞·劳的海贼同盟！<br>第595话 抓住MASTER 海贼同盟开始作战！<br>第596话 全灭危机 死亡怪物飞来<br>第597话 大激战 凯撒发动真正的能力！<br>第598话 劈开火海的武士！狐火锦卫门<br>第599话 冲击！神秘男人 维尔戈真正的身份<br>第600话 守护孩子们！袭来的Master的魔爪<br>第601话 震惊新世界 凯撒恶梦的实验<br>第602话 史上最邪恶的杀戮武器！死亡国度<br>第603话 反击开始！路飞?劳全部逃出<br>第604话 目标R栋！海贼同盟急行军！<br>第605话 达斯琪的泪 G-5的决死作战<br>第606话 背叛的中将！鬼竹之维尔戈<br>第607话 白热化激战！路飞对凯撒<br>第608话 幕后黑手 多福朗明哥出手<br>第609话 路飞冻死？恐怖的雪女</p><p>第610话 碰撞的双拳！两中将之战</p><p>第611话 小龙！桃之助现身</p><p>第612话 暴风雨中的死斗！草帽一伙儿VS雪女</p><p>第613话 奥义爆发！索隆最强的一刀流</p><p>第614话 保护朋友！莫查拼死奔逃</p><p>第615话 茶胡子的悲痛！路飞愤怒的一击</p><p>第616话 令人震惊的决斗！白猎VS维尔戈</p><p>第617话 击败凯撒！最强的灰熊铳</p><p>第618话 袭来！来自德雷斯罗萨的刺客</p><p>第619话 大爆发！无敌的弗兰奇将军<br>第620话 穷途末路！PUNK HAZARD大爆炸</p><p>第621话 捕获凯撒！将军炮炸裂</p><p>第622话 感动再会！桃之助与锦卫门</p><p>第623话 离别之时 庞克哈萨德出航</p><p>第624话 G5全灭！多佛朗明哥急袭<br>第625话 紧迫！青雉VS多弗朗明哥<br>第626话 消失的凯撒！海贼同盟出击<br>第627话 路飞命丧大海？海贼同盟瓦解<br>第628话 炸裂！路飞愤怒的铁拳</p><p>德雷斯罗萨篇</p><p>第629话 激震！撼动新世界的超级新闻<br>第630话 冒险！爱与热情的国度 德雷斯罗萨<br>第631话 狂热的漩涡 斗牛竞技场<br>第632话 危险的恋情 舞女维奥莱特<br>第633话 最强的无名战士！路西登场<br>第634话 海贼贵公子 卡文迪许<br>第635话 命运的再会 鬣狗贝拉米<br>第636话 超级新星！吃人的巴托洛米奥<br>第637话 群雄割据！B组白热化！<br>第638话 一击必杀！惊愕的国王之拳<br>第639话 斗鱼袭来！突破死亡铁桥<br>第640话 冒险！妖精之岛Green Bit<br>第641话 不为人知的世界 冬塔塔王国<br>第642话 世纪的谋略 多弗朗明哥行动！<br>第643话 惊天动地！大将滕虎的实力<br>第644话 愤怒的一击！巨人VS路西<br>第645话 破坏炮炸裂！路西命悬一线<br>第646话 传说中的海贼 首领青椒！<br>第647话 光与影 潜藏于德雷斯罗萨的阴影！<br>第648话 出击！传说中的英雄乌索兰德<br>第649话 激战之胜负 路西对青椒<br>第650话 路飞与 宿命的剑斗士蕾贝卡<br>第651话 守护到底！蕾贝卡和玩具军人<br>第652话 最后的激战区 D组开战<br>第653话 决战！乔拉对草帽一伙<br>第654话 美剑！白马的卡文迪许！<br>第655话 激烈冲突！香吉士VS多福朗明哥<br>第656话 蕾贝卡必杀剑！背水的剑舞<br>第657话 最强的战士 罗根VS蕾贝卡<br>第658话 震惊！玩具士兵的真正身份<br>第659话 战栗的过去！德雷斯罗萨的秘密<br>第660话 噩梦！德雷斯罗萨悲剧的一夜<br>第661话    七武海对决 罗VS多弗朗明哥    2014-09-14<br>第662话    两雄对峙！草帽VS天夜叉    2014-09-21<br>第663话    路飞惊愕 继承艾斯意志之人    2014-09-28<br>第664话    SOP作战开始 乌索兰度突击    2014-10-05<br>第665话    心潮澎湃 蕾贝卡VS斯雷曼    2014-10-12<br>第666话    决出胜者！？D区令人震惊的结果    2014-10-19<br>第667话    大将的决断 藤虎VS多弗朗明哥    2014-10-26<br>第668话    决赛开始 英雄迪亚曼蒂登场    2014-11-02<br>第669话    移动的城堡！最高干部琵卡出现！    2014-11-09<br>第670话    龙之爪炸裂！路西使出惊人一击！    2014-11-16<br>第671话    打倒砂糖 小人军突击！    2014-11-23<br>第672话    最后的光明 我们队长的秘密！    2014-11-30<br>第673话    破裂人 古拉迪乌斯大爆炸！    2014-12-07<br>第674话    骗子乌索兰度正在逃亡！    2014-12-14<br>第675话    命运中的邂逅 居鲁士和力库王    2014-12-21<br>第676话    作战失败！英雄乌索兰度逝世！？    2014-12-28<br>第677话    传说复活！居鲁士的全力一击    2015-01-11<br>第678话    火拳炸裂！烧烧果实力量复活    2015-01-18<br>第679话    飒爽登场 革命军参谋总长萨博！    2015-01-25<br>第680话    恶魔的陷阱 德雷斯罗萨歼灭作战    2015-02-01<br>第681话    悬赏5亿的男人 被盯上的乌索兰度！    2015-02-08<br>第682话    突破敌阵 路飞索隆开始反击    2015-02-15<br>第683话    大地轰鸣 破坏神巨大琵卡降临    2015-03-01<br>第684话    大集结！路飞和凶恶战士军团    2015-03-15<br>第685话    突飞猛进！路飞军团VS琵卡！    2015-03-22<br>第686话    冲击告白！罗对灵魂的热血誓言！    2015-03-29<br>第687话    大冲突！参谋总长萨博VS大将藤虎    2015-04-05<br>第688话    命悬一线 中了圈套的路飞！    2015-04-12<br>第689话    奋力逃脱！路飞起死回生的象枪    2015-04-19<br>第690话    共同战线 路飞通往胜利的突破口    2015-04-26<br>第691话    第二位武士 阵雨勘十郎登场    2015-05-03<br>第692话    激战琵卡战 索隆必杀一击！    2015-05-10<br>第693话    小人族的公主 被抓的曼雪莉    2015-05-17<br>第694话    不死之身！恐怖的人头玩具军团    2015-05-24<br>第695话    拼上性命！路飞是获胜的王牌    2015-05-31<br>第696话    泪眼相逢 蕾贝卡和居鲁士！    2015-06-07<br>第697话    一击必杀 拯救德雷斯罗萨的男人    2015-06-14<br>第698话    愤怒爆发 路飞和罗最强的秘计    2015-06-21<br>第699话    高贵一族 多弗朗明哥的真正身份！    2015-06-28<br>第700话    究极的力量 手术果实的秘密！    2015-07-05<br>第701话    悲伤的记忆 白色城镇的少年罗！    2015-07-12<br>第702话    天龙人！多弗壮绝的过去    2015-07-19<br>第703话    苦难之路 罗和柯拉松的命之旅程    2015-08-02<br>第704话    时限迫近！夺取手术果实！    2015-08-09<br>第705话    觉悟之时 柯拉松告别的笑容！    2015-08-16<br>第706话    冲吧 罗 温柔男人最后的战斗！    2015-08-23<br>第707话    冲向自由！罗 注射射击爆发    2015-08-30<br>第708话    狂热之战 罗VS多弗朗明哥    2015-09-06<br>第709话    干部决斗 崇高的海尔丁    2015-09-13<br>第710话    爱之决战 新栋梁老蔡 VS BABY5    2015-09-20<br>第711话    男子汉的坚持 贝拉米最后的突击！    2015-09-27<br>第712话    疾风怒涛 哈库巴VS德林杰    2015-10-04<br>第713话    致敬神拳 屏障屏障手枪发动！    2015-10-11<br>第714话    拯救治愈公主 曼雪莉！    2015-10-18<br>第715话    男子汉的决斗 赛尼奥尔爱的挽歌    2015-10-25<br>第716话    死亡星屑 迪亚曼蒂疾风骤雨般的猛攻    2015-11-01<br>第717话    雷之破坏剑！居鲁士愤怒的一击！    2015-11-08<br>第718话    大地横断 巨像琵卡的奇袭战！    2015-11-15<br>第719话    空中决战 索隆新必杀奥义爆发！    2015-11-22<br>第720话    永别了！贝拉米 告别的一击！    2015-11-29<br>第721话    罗战死 路飞愤怒的猛攻！    2015-12-06<br>第722话    执念之刃 逆袭的伽马刀！    2015-12-13<br>第723话    霸气冲突 路飞VS多弗朗明哥    2015-12-20<br>第724话    无法攻击 托雷波尔冲击的秘密    2015-12-27<br>第725话    愤怒爆发 全部由我来承担    2016-01-10<br>第726话    四档！惊异的弹力人！    2016-01-17<br>第727话    大逆袭！多弗朗明哥的觉醒！    2016-01-24<br>第728话    路飞！使尽全力的狮子火箭炮    2016-01-31<br>第729话    火焰龙王 将路飞的性命守护到底    2016-02-14<br>第730话    奇迹之泪 曼雪莉的战斗！    2016-02-21<br>第731话    生命的极限 阻止死之鸟笼！    2016-02-28<br>第732话    或生或死 命运的倒计时    2016-03-06<br>第733话    讨伐天 路飞愤怒的大猿王枪    2016-03-20<br>第734话    朝着自由！喜悦的德雷斯罗萨！    2016-03-27<br>第735话    前所未闻 大将藤虎冲击的决断！    2016-04-03<br>第736话    激烈暴走 极恶的世代出动！    2016-04-10<br>第737话    传说诞生 革命战士萨博的冒险！    2016-04-17<br>第738话    兄弟的羁绊 路飞?萨博重逢密谈    2016-04-24<br>第739话    最强的生物 四皇?百兽凯多    2016-05-01<br>第740话    藤虎出动 草帽一伙完全包围网    2016-05-08<br>第741话    非常事态 被拐走的蕾贝卡！    2016-05-15<br>第742话    父女的羁绊 居鲁士和蕾贝卡！    2016-05-22<br>第743话    男子汉的坚持 路飞VS藤虎 决一雌雄    2016-05-29<br>第744话    无处可逃 大将藤虎无情的追击！    2016-06-05<br>第745话    接纳酒 草帽大船团成立！    2016-06-12<br>第746话    群雄割据 狂暴的新世界怪物们    2016-06-19<br>第747话    动画原创　银之要塞 路飞和巴托的大冒险    2016-06-26<br>第748话    动画原创　地下迷宫 路飞VS推车人    2016-07-03<br>第749话    动画原创　剑技白热 罗?索隆终于登场！    2016-07-10<br>第750话    动画原创　绝体绝命 路飞极限的灼热决战    2016-07-17</p><p>18th 佐乌篇<br>第751话    冒险开幕 到达梦幻之岛佐乌岛！    2016-07-31<br>第752话    新七武海 传说?白胡子的儿子登场    2016-08-07<br>第753话    拼死登象 巨象背上的大冒险！    2016-08-21<br>第754话    战斗开始 路飞VS毛皮族！    2016-08-21<br>第755话    卡鲁秋！草帽一伙重新团聚    2016-09-04<br>第756话    反击开始 卷眉毛一伙大活跃！    2016-09-11<br>第757话    威胁来袭 百兽海贼团杰克！    2016-09-25<br>第758话    日间之王 犬岚公爵登场！    2016-10-02<br>第759话    夜间之王 猫蝮蛇老大登场    2016-10-09<br>第760话    首都毁灭 卷眉毛一伙登陆！    2016-10-16<br>第761话    极限逼近 毛皮族和一伙的羁绊！    2016-10-23<br>第762话    恶童返乡 四皇BIG MOM的刺客    2016-10-30<br>第763话    失踪的真相 山治惊愕的请贴    2016-11-06<br>第764话    给伙计们 山治离别的纸条    2016-11-13<br>第765话    去见猫蝮蛇老大    2016-11-20<br>第766话    路飞决断 山治退出的危机！    2016-11-27<br>第767话    一触即发 犬和猫和武士！    2016-12-04<br>第768话    第三个人！忍者?雾之雷藏登场    2016-12-11<br>第769话    赤之石！通往大秘宝的路标    2016-12-18<br>第770话    和之国的秘密 光月家和历史正文    2016-12-25<br>第771话    男人的誓言 路飞和光月桃之助    2017-01-08<br>第772话    传说中的航海 犬和猫和海贼王！    2017-01-15<br>第773话    恶梦重现 不死之身杰克强袭    2017-01-22<br>第774话    佐乌防卫战 路飞和象主！    2017-01-29<br>第775话    拯救巨象 草帽急救大作战！    2017-02-05<br>第776话    离别的下象 夺回山治的出海！    2017-02-12<br>第777话    参加世界会议 薇薇公主和白星公主    2017-02-19<br>第778话    参加世界会议 蕾贝卡和樱花王国    2017-02-26<br>第779话    凯多再次来袭 威胁重重极恶的世代！    2017-03-05<br>第780话    动画原创　空腹战线 路飞和海军超新星！    2017-03-19<br>第781话    动画原创　执着的3人 草帽一伙大追击战！    2017-03-26<br>第782话    动画原创　恶魔之拳 决战！路飞VS古兰特    2017-04-02</p><p>19th 蛋糕岛篇<br>第783话    山治还乡 去BIG?MOM海域！    2017-04-09<br>第784话    0和4 遭遇！杰尔玛66    2017-04-16<br>第785话    剧毒的危机 路飞和蕾玖！    2017-04-23<br>第786话    万国！四皇BIG?MOM登场    2017-04-30<br>第787话    四皇之女 山治的未婚妻布琳    2017-05-07<br>第788话    大进击！思食病的MOM    2017-05-14<br>第789话    首都崩溃 BIG MOM和甚平    2017-05-21<br>第790话    四皇之城 到达蛋糕岛    2017-05-28<br>第791话    点心森林 路飞VS路飞！？    2017-06-04<br>第792话    妈妈的刺客 路飞和诱惑森林！    2017-06-11<br>第793话    海游国家 杰尔玛之王伽治    2017-06-18<br>第794话    父子对决 伽治VS山治！    2017-06-25<br>第795话    巨大的野心 BIG MOM与凯撒    2017-07-02<br>第796话    万国的真相 妈妈的恐怖能力！    2017-07-09<br>第797话    大干部！三将星克力架登场    2017-07-16<br>第798话    8亿之敌 路飞VS千手克力架    2017-07-23<br>第799话    全力对决 四档VS饼干果实能力    2017-07-30<br>第800话    1和2集合 文斯莫克家    2017-08-06<br>第801话    恩人之命 山治与主厨哲普    2017-08-13<br>第802话    恩人之命 山治与主厨哲普    2017-08-20<br>第803话    丢弃的过去 文斯莫克?山治    2017-08-27<br>第804话    向着东海出发 山治下定决心出海    2017-09-03<br>第805话    极限对决 路飞和无限饼干    2017-09-17<br>第806话    饱食之力 新4档坦克人！    2017-09-24<br>第807话    悲哀的决斗 路飞VS山治（前篇）    2017-10-01<br>第808话    悲哀的决斗 路飞VS山治（后篇）    2017-10-01<br>第809话    复仇的暴风雨 愤怒军团袭来！    2017-10-15<br>第810话    冒险结束 山治下定决心的求婚    2017-10-22<br>第811话    在此等待 路飞VS愤怒军团    2017-10-29<br>第812话    潜入城堡内 抢夺！路标历史正文    2017-11-05<br>第813话    因缘的对决 路飞与BIG MOM    2017-11-12<br>第814话    灵魂的呐喊 布鲁克 佩德洛 闪电作战    2017-11-19<br>第815话    再见了 布琳泪的决心    2017-11-26<br>第816话    左眼的渊源 佩德洛VS蛋蛋男爵    2017-12-03<br>第817话    烟蒂 山治的结婚前夜    2017-12-10<br>第818话    不屈的灵魂 布鲁克 VS BIG MOM    2017-12-17<br>第819话 母亲的愿望 杰尔玛的失败作品山治<br>第820话 狂奔向山治身边 路飞开始逆袭!<br>第821话 城内动乱 路飞前往约定之地<br>第822话 离别的决心 山治和草帽便当<br>第823话 四皇翻身 拯救布鲁克大作战<br>第824话 约定之地 路飞极限的单枪匹马厮杀<br>第825话 骗子 路飞和山治<br>第826话 山治复活 破坏吧 地狱的茶会<br>第827话 密会 路飞VS火焰坦克海贼团<br>第828话 死之协定 路飞 贝基联合军<br>第829话 路飞暗中行动 茶会即将开始 阴谋的结婚仪式<br>第830话 家人集结 宴会开始 地狱的茶会<br>第831话 假面夫妻 山治 布琳 登场<br>第832话 死亡之吻 四皇暗杀作战开始<br>第833话 归还酒杯 侠客甚平的了断<br>第834话 作战失败 发起反击的BIG MOM海贼团<br>第835话 奔跑吧山治 SOS 杰尔马66<br>第845话：布琳的决心 大起火!诱惑的森林<br>第846话：反击之雷，娜美和雷云宙斯<br>第847话：偶然的再会，山治和陷入恋爱的坏布琳<br>第848话：守护桑尼号 奋战！乔巴&amp;布鲁克</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> One Piece </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>loadrunner判断接口返回</title>
      <link href="2018/07/11/loadrunner%E5%88%A4%E6%96%AD%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E/"/>
      <url>2018/07/11/loadrunner%E5%88%A4%E6%96%AD%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E/</url>
      
        <content type="html"><![CDATA[<p>loadrunner判断前一个接口返回，执行第二个接口</p><a id="more"></a><p>Action()<br>{</p><pre><code>/*关联获取接口返回结果，true或者false*/web_reg_save_param(&quot;Text&quot;,&quot;LB=\&quot;result\&quot;:&quot;,&quot;RB=,&quot;,LAST);/*开始事务*/lr_start_transaction(&quot;01_api_1&quot;);web_custom_request(&quot;api_1&quot;,             &quot;URL=https://webapp-n2.test.com/api/test&quot;,              &quot;Method=GET&quot;,             &quot;TargetFrame=&quot;,             &quot;Resource=0&quot;,             &quot;Snapshot=t2.inf&quot;,            &quot;RecContentType=text/html&quot;,              LAST);     lr_end_transaction(&quot;01_api_1&quot;,LR_AUTO);/*测试一下输出，用error只是因为会标红。。*/lr_error_message(lr_eval_string(&quot;&#123;Text&#125;&quot;));/*判断第一个接口返回是否为true*/if (strcmp(lr_eval_string(&quot;&#123;Text&#125;&quot;),&quot;true&quot;) == 0)&#123;    lr_start_transaction(&quot;01_api_2&quot;);        web_reg_find(&quot;Text=false&quot;,            LAST);        web_custom_request(&quot;api_2&quot;,             &quot;URL=https://webapp-n2.test.com/api/test&quot;,              &quot;Method=GET&quot;,             &quot;TargetFrame=&quot;,             &quot;Resource=0&quot;,             &quot;Snapshot=t2.inf&quot;,            &quot;RecContentType=text/html&quot;,              LAST);        lr_end_transaction(&quot;01_api_2&quot;,LR_AUTO);        lr_output_message(&quot;第二接口完&quot;);&#125;else&#123;        lr_error_message(&quot;请求失败&quot;);        return 0;&#125;;return 0;</code></pre><p>}</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> loadrunner </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter压测socket close异常</title>
      <link href="2018/07/06/Jmeter%E5%8E%8B%E6%B5%8Bsocket-close%E5%BC%82%E5%B8%B8/"/>
      <url>2018/07/06/Jmeter%E5%8E%8B%E6%B5%8Bsocket-close%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<p>jmeter压测执行过程中报错：java.net.SocketException: Socket operation on nonsocket: connect</p><a id="more"></a><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>使用jmeter进行接口压测，<code>http请求</code>，默认是勾选了<code>use keepAlive</code>，但是在<code>Jmeter.properties</code>配置文件中的时间设置默认是注释的状态，也就是说，一旦发生连接空闲，则立刻断开，导致压测过程中出现事务失败。</p><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>在网上直接搜这个报错，有几个解决办法，说实话，有点懒，没看原理，就都照样该了下，重启jmeter之后就报错了。</p><h4 id="Jmeter-properties"><a href="#Jmeter-properties" class="headerlink" title="Jmeter.properties"></a>Jmeter.properties</h4><p>取消注释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hc.parameters.file&#x3D;hc.parameters</span><br></pre></td></tr></table></figure><p>取消注释并修改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpclient4.retrycount&#x3D;1</span><br></pre></td></tr></table></figure><p>取消注释并修改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpclient4.idletimeout&#x3D;300</span><br></pre></td></tr></table></figure><p>单位毫秒</p><h4 id="hc-parameters"><a href="#hc-parameters" class="headerlink" title="hc.parameters"></a>hc.parameters</h4><p>取消注释并修改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.connection.stalecheck$Boolean&#x3D;true</span><br></pre></td></tr></table></figure><p>网上普遍的说法是<code>httpclient4.idletimeout=300</code>，其他几个是科学上网，在外网找到的。</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><blockquote><p><a href="https://wiki.apache.org/jmeter/JMeterSocketClosed">Jmeter Wiki</a><br><a href="https://blog.csdn.net/miss_hua/article/details/50549606">Jmeter-Socket closed</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vultr安装锐速</title>
      <link href="2018/07/05/Vultr%E5%AE%89%E8%A3%85%E9%94%90%E9%80%9F/"/>
      <url>2018/07/05/Vultr%E5%AE%89%E8%A3%85%E9%94%90%E9%80%9F/</url>
      
        <content type="html"><![CDATA[<p>Vultr专用破解版锐速安装</p><a id="more"></a><p>因为Vultr机房都位于国外，当上网高峰期来临时，连接速度会比较慢，所以就需要安装锐速来加速连接。</p><h3 id="安装shadowsocks"><a href="#安装shadowsocks" class="headerlink" title="安装shadowsocks"></a>安装shadowsocks</h3><p>因为SSR搭建完成之后，在手机和mac上都找不到对应的客户端用，没办法，降级到比较老的<code>shadowsocks</code><br>安装方式类似：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;teddysun&#x2F;shadowsocks_install&#x2F;master&#x2F;shadowsocks.sh</span><br><span class="line">chmod +x shadowsocks.sh</span><br><span class="line">.&#x2F;shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log</span><br></pre></td></tr></table></figure><p>这次只要配置个密码和端口，再选个加密方式即可~</p><h3 id="配置TCP-Fast-Open"><a href="#配置TCP-Fast-Open" class="headerlink" title="配置TCP Fast Open"></a>配置TCP Fast Open</h3><p>搭建完成shadowsocks之后，为了优化连接，可以增加一点配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;rc.local</span><br></pre></td></tr></table></figure><p>最后一行增加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 3 &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;tcp_fastopen</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;sysctl.conf</span><br></pre></td></tr></table></figure><p>最后一行增加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_fastopen &#x3D; 3</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;shadowsocks.json</span><br></pre></td></tr></table></figure><p>修改<code>&quot;fast_open&quot;:true</code></p><h3 id="多端口配置"><a href="#多端口配置" class="headerlink" title="多端口配置"></a>多端口配置</h3><p>修改<code>/etc/shadowsocks.json</code>文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;port_password&quot;:&#123;</span><br><span class="line">        &quot;8088&quot;:&quot;xxx&quot;,</span><br><span class="line">        &quot;8089&quot;:&quot;xxx&quot;,</span><br><span class="line">        &quot;32123&quot;:&quot;xxx&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;:true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启：<code>/etc/init.d/shadowsocks restart</code></p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>1、安装锐速需降级系统内核，而安装 Google BBR 则需升级系统内核，故两者不能同时安装。</p><p>2、安装锐速需降级系统内核，有可能造成系统不稳定，故不建议将其应用在重要的生产环境中。</p><p>3、本教程只支持 CentOS6 x64 及 CentOS7 x64 系统，不支持任何 Debian &amp; Ubuntu 系统！</p><h3 id="系统判断"><a href="#系统判断" class="headerlink" title="系统判断"></a>系统判断</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><p>1、结果以 2 开头，例如 2.6.32-696.18.7.el6.x86_64。</p><p>这种输出结果说明我们的服务器为 CentOS6 x64 系统，大家直接查看第三步进行锐速安装即可。</p><p>2、结果以 3 开头，例如 3.10.0-693.11.6.el7.x86_64。</p><p>这种输出结果说明我们的服务器为 CentOS7 x64 系统，大家直接查看第四步进行锐速安装即可。</p><p>3、结果以 4 开头，例如 4.12.10-1.el7.elrepo.x86_64。</p><p>这种输出结果说明我们的服务器已经安装 Google BBR 拥塞控制算法，此时已经无法继续安装锐速。</p><h3 id="Centos-X64安装锐速"><a href="#Centos-X64安装锐速" class="headerlink" title="Centos X64安装锐速"></a>Centos X64安装锐速</h3><p>执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O rskernel.sh https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;uxh&#x2F;shadowsocks_bash&#x2F;master&#x2F;rskernel.sh &amp;&amp; bash rskernel.sh</span><br></pre></td></tr></table></figure><p>直接回车，安装完成系统会自动重启<br>系统重启之后，重新连接服务器，执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install net-tools -y &amp;&amp; wget --no-check-certificate -O appex.sh https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;0oVicero0&#x2F;serverSpeeder_Install&#x2F;master&#x2F;appex.sh &amp;&amp; bash appex.sh install</span><br></pre></td></tr></table></figure><p>遇到选择直接回车，完成安装，并且开机启动</p><p><a href="https://www.vultrcn.com/7.html">参考连接</a></p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vultr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix3.4配置邮件告警</title>
      <link href="2018/06/28/zabbix3-4%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E5%91%8A%E8%AD%A6/"/>
      <url>2018/06/28/zabbix3-4%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E5%91%8A%E8%AD%A6/</url>
      
        <content type="html"><![CDATA[<p>zabbix3.4配置邮件告警<br>使用zabbix配置邮件告警，当系统资源到达触发器设定阈值，邮件报警</p><a id="more"></a><h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><h4 id="添加监控项"><a href="#添加监控项" class="headerlink" title="添加监控项"></a>添加监控项</h4><p>测试用模板是zabbix自带的<code>Template OS Linux</code>模板，模板中原先就有监控CPU的监控项，这边测试就用<code>CPU idle time</code>（获取服务器空闲CPU百分比），如果当前安装的zabbix没有该监控项，就新建一个：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">名称： CPU $2 time</span><br><span class="line">类型：Zabbix 客户端</span><br><span class="line">键值：system.cpu.util[,idle]</span><br><span class="line">信息类型：浮点数</span><br><span class="line">单位：%</span><br><span class="line">更新间隔：1m</span><br><span class="line">自定义时间间隔：灵活</span><br></pre></td></tr></table></figure><p>保存即可</p><h4 id="添加触发器"><a href="#添加触发器" class="headerlink" title="添加触发器"></a>添加触发器</h4><p>添加完监控项之后，就要为该监控项添加触发器，当达到设定的阈值时，报警。<br>配置-模板-找到Template OS Linux，点击触发器，创建新触发器。测试想要监控服务器的空闲CPU，当空闲CPU小于50%，时就会告警（为了效果明显，设大点。。）触发器信息如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">名称：CPU usr% gt 50%</span><br><span class="line">严重性：严重</span><br><span class="line">表达式：&#123;Template OS Linux:system.cpu.util[,idle].avg(1m)&#125;&lt;50（表达式可以自己写，也可以用构造器，格式挺简单）</span><br></pre></td></tr></table></figure><p>其他默认即可</p><h4 id="添加图形"><a href="#添加图形" class="headerlink" title="添加图形"></a>添加图形</h4><p>为了方便观察，添加一个cpu空闲率的图形：<br>配置-模板-选择Template OS Linux-图形，创建图形；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">名称：CPU空闲百分比</span><br><span class="line">纵轴Y最小值MIN：可计算的</span><br><span class="line">纵轴最大值：可计算的</span><br><span class="line">监控项：Template OS Linux：CPU idle time</span><br></pre></td></tr></table></figure><p>保存，完成。<br>可以试验下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;scale&#x3D;5000; 4*a(1)&quot; | bc -l -q</span><br></pre></td></tr></table></figure><p>计算圆周率后5000位，手工在服务器top可以看到cpu使用率到80%以上（小破虚拟机，纯试验用，1C），在<code>监测中-仪表板-问题</code>可以看见该问题告警。</p><h3 id="邮件配置"><a href="#邮件配置" class="headerlink" title="邮件配置"></a>邮件配置</h3><h4 id="sendmail"><a href="#sendmail" class="headerlink" title="sendmail"></a>sendmail</h4><p>邮件发送需要安装几个小工具（可能本地装系统就已经装完了）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install sendmail</span><br><span class="line">systemctl start sendmail.service</span><br></pre></td></tr></table></figure><h4 id="mailx"><a href="#mailx" class="headerlink" title="mailx"></a>mailx</h4><p>安装邮件发送工具</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mailx</span><br></pre></td></tr></table></figure><h4 id="配置zabbix服务外部邮箱"><a href="#配置zabbix服务外部邮箱" class="headerlink" title="配置zabbix服务外部邮箱"></a>配置zabbix服务外部邮箱</h4><p>编辑文件<code>/etc/mail.rc</code>（没有就新建），添加以下内容(以163邮箱为例)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set from&#x3D;xxx@163.com               #邮箱账号</span><br><span class="line">set smtp&#x3D;smtp.163.com              #smtp服务器</span><br><span class="line">set smtp-auth-user&#x3D;xxx@163.com     #邮箱帐号</span><br><span class="line">set smtp-auth-password&#x3D;xxx      #邮箱密码(163邮箱密码是你客户端登录的密码，不是mail.163.com登录的密码)</span><br><span class="line">set smtp-auth&#x3D;login</span><br></pre></td></tr></table></figure><p>配置完成，测试一下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;zabbix test...&quot; |mail -s &quot;zabbixssss&quot; xxx@163.com</span><br></pre></td></tr></table></figure><p>进入邮箱，可以看见收到一封测试邮件~</p><h4 id="文件发送脚本"><a href="#文件发送脚本" class="headerlink" title="文件发送脚本"></a>文件发送脚本</h4><p>zabbix提供了几种方式来发送告警信息，这边选择用脚本，在<code>zabbix_server.conf</code>文件中有定义脚本保存路径，例如我的测试服务器上的<code>/etc/zabbix_server.conf</code>中大约在第490行有定义（你也可以注释掉，自己加）:<code>AlertScriptsPath=/usr/lib/zabbix/alertscripts</code></p><p>进入<code>/usr/lib/zabbix/alertscripts</code>文件夹，创建邮件发送脚本<code>sendmail.sh</code>，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">messages&#x3D;&#96;echo $3 | tr &#39;\r\n&#39; &#39;\n&#39;&#96;</span><br><span class="line">subject&#x3D;&#96;echo $2 | tr &#39;\r\n&#39; &#39;\n&#39;&#96;</span><br><span class="line">echo &quot;$&#123;messages&#125;&quot; | mail -s &quot;$&#123;subject&#125;&quot; $1 &gt;&gt;&#x2F;tmp&#x2F;sendmail.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>需要注意的是<code>/tmp/sendmail.log</code>这个日志文件，需要有写和执行的权限，如果不放心，直接chmod 777 /tmp/sendmail.log即可。</p><p>可以用脚本测试一下邮件发送：<code>sh sendmail.sh xxxx@163.com &quot;zabbix  cesscdssss&quot; &quot;这是内容。。。&quot;</code></p><h3 id="告警设置"><a href="#告警设置" class="headerlink" title="告警设置"></a>告警设置</h3><h4 id="报警媒介类型"><a href="#报警媒介类型" class="headerlink" title="报警媒介类型"></a>报警媒介类型</h4><p>进入zabbix web，管理-报警媒介类型，点击创建媒体类型，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">名称： sendmail</span><br><span class="line">类型：脚本</span><br><span class="line">脚本名称：sendmail.sh</span><br><span class="line">脚本参数：  </span><br><span class="line">&#123;ALERT.SENDTO&#125;</span><br><span class="line">&#123;ALERT.SUBJECT&#125;</span><br><span class="line">&#123;ALERT.MESSAGE&#125;</span><br><span class="line">勾选已启用</span><br></pre></td></tr></table></figure><p>点击新增。</p><h4 id="用户添加媒介"><a href="#用户添加媒介" class="headerlink" title="用户添加媒介"></a>用户添加媒介</h4><p>管理-用户，可以使用原来的管理员账号，也可以创建一个用户：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">别名：user</span><br><span class="line">群组：zabbix administrators</span><br></pre></td></tr></table></figure><p>报警媒介，点击添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类型：sendmail</span><br><span class="line">收件人：xxxx@163.com</span><br><span class="line">当启用时：1-7,00:00-24:00（24小时全年无休~）</span><br><span class="line">剩下全勾上结束</span><br></pre></td></tr></table></figure><p>点击添加，保存用户。</p><h4 id="创建动作"><a href="#创建动作" class="headerlink" title="创建动作"></a>创建动作</h4><p>配置-动作，创建动作：<br>动作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">名称：自己起，monitor cpu</span><br></pre></td></tr></table></figure><p>操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">默认操作步骤持续时间：1h</span><br><span class="line">默认标题：故障&#123;TRIGGER.STATUS&#125;,服务器:&#123;HOSTNAME1&#125;发生: &#123;TRIGGER.NAME&#125;故障!</span><br><span class="line">消息内容：</span><br><span class="line">告警主机:&#123;HOSTNAME1&#125;</span><br><span class="line">告警时间:&#123;EVENT.DATE&#125; &#123;EVENT.TIME&#125;</span><br><span class="line">告警等级:&#123;TRIGGER.SEVERITY&#125;</span><br><span class="line">告警信息: &#123;TRIGGER.NAME&#125;</span><br><span class="line">告警项目:&#123;TRIGGER.KEY1&#125;</span><br><span class="line">问题详情:&#123;ITEM.NAME&#125;:&#123;ITEM.VALUE&#125;</span><br><span class="line">当前状态:&#123;TRIGGER.STATUS&#125;:&#123;ITEM.VALUE1&#125;</span><br><span class="line">事件ID:&#123;EVENT.ID&#125;</span><br><span class="line">操作，新增发送消息给用户，选择之前创建的user，点击新增</span><br></pre></td></tr></table></figure><p>恢复操作（系统恢复之后的邮件提示）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">默认标题：恢复&#123;TRIGGER.STATUS&#125;, 服务器:&#123;HOSTNAME1&#125;: &#123;TRIGGER.NAME&#125;已恢复!</span><br><span class="line">消息内容：</span><br><span class="line">告警主机:&#123;HOSTNAME1&#125;</span><br><span class="line">告警时间:&#123;EVENT.DATE&#125; &#123;EVENT.TIME&#125;</span><br><span class="line">告警等级:&#123;TRIGGER.SEVERITY&#125;</span><br><span class="line">告警信息: &#123;TRIGGER.NAME&#125;</span><br><span class="line">告警项目:&#123;TRIGGER.KEY1&#125;</span><br><span class="line">问题详情:&#123;ITEM.NAME&#125;:&#123;ITEM.VALUE&#125;</span><br><span class="line">当前状态:&#123;TRIGGER.STATUS&#125;:&#123;ITEM.VALUE1&#125;</span><br><span class="line">事件ID:&#123;EVENT.ID&#125;</span><br><span class="line">操作，添加发送消息给用户，选择创建的user，点击新增</span><br></pre></td></tr></table></figure><p>这样就完工了！！！</p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>在服务器，执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;scale&#x3D;10000; 4*a(1)&quot; | bc -l -q</span><br></pre></td></tr></table></figure><p>配置的邮箱就会收到邮件告警：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">故障PROBLEM,服务器:Zabbix server发生: CPU user% gt 50故障!</span><br><span class="line"></span><br><span class="line">告警主机:Zabbix server </span><br><span class="line">告警时间:2018.06.28 10:23:19</span><br><span class="line">告警等级:High</span><br><span class="line">告警信息: CPU user% gt 50</span><br><span class="line">告警项目:system.cpu.util[,idle]</span><br><span class="line">问题详情:CPU idle time:3.64 %</span><br><span class="line">当前状态:PROBLEM:3.64 %</span><br><span class="line">事件ID:110</span><br></pre></td></tr></table></figure><p>在<code>报表-动作日志</code>，可以看见报警日志；<br>服务器恢复之后，会收到恢复的邮件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">恢复OK, 服务器:Zabbix server: CPU user% gt 50已恢复!</span><br><span class="line"></span><br><span class="line">告警主机:Zabbix server</span><br><span class="line">告警时间:2018.06.28 10:23:19</span><br><span class="line">告警等级:High</span><br><span class="line">告警信息: CPU user% gt 50</span><br><span class="line">告警项目:system.cpu.util[,idle]</span><br><span class="line">问题详情:CPU idle time:90.08 %</span><br><span class="line">当前状态:OK:90.08 %</span><br><span class="line">事件ID:110</span><br></pre></td></tr></table></figure><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p><a href="https://blog.csdn.net/weixin_37998647/article/details/78931163">zabbix配置监控项，触发器</a><br><a href="http://blog.51cto.com/12098963/2092762">zabbix3.2.6部署邮件报警</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> zabbix3.4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix3.4监控linux内存</title>
      <link href="2018/06/27/zabbix3-4%E7%9B%91%E6%8E%A7linux%E5%86%85%E5%AD%98/"/>
      <url>2018/06/27/zabbix3-4%E7%9B%91%E6%8E%A7linux%E5%86%85%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<p>zabbix3.4监控linux内存情况</p><a id="more"></a><h3 id="linux内存"><a href="#linux内存" class="headerlink" title="linux内存"></a>linux内存</h3><p>在linux下命令行可以直接获取当前系统的内存信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;meminfo</span><br></pre></td></tr></table></figure><p>展示如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">MemTotal:         997948 kB</span><br><span class="line">MemFree:           82436 kB</span><br><span class="line">MemAvailable:     122756 kB</span><br><span class="line">Buffers:               0 kB</span><br><span class="line">Cached:           155512 kB</span><br><span class="line">SwapCached:        62072 kB</span><br><span class="line">Active:           352832 kB</span><br><span class="line">Inactive:         354784 kB</span><br><span class="line">Active(anon):     271604 kB</span><br><span class="line">Inactive(anon):   284732 kB</span><br><span class="line">Active(file):      81228 kB</span><br><span class="line">Inactive(file):    70052 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">SwapTotal:       2097148 kB</span><br><span class="line">SwapFree:        1329916 kB</span><br><span class="line">Dirty:                12 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:        503976 kB</span><br><span class="line">Mapped:            34672 kB</span><br><span class="line">Shmem:              4232 kB</span><br><span class="line">Slab:              81628 kB</span><br><span class="line">SReclaimable:      33496 kB</span><br><span class="line">SUnreclaim:        48132 kB</span><br><span class="line">KernelStack:        8432 kB</span><br><span class="line">PageTables:        43468 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     2596120 kB</span><br><span class="line">Committed_AS:   10619316 kB</span><br><span class="line">VmallocTotal:   34359738367 kB</span><br><span class="line">VmallocUsed:      190780 kB</span><br><span class="line">VmallocChunk:   34359310332 kB</span><br><span class="line">HardwareCorrupted:     0 kB</span><br><span class="line">AnonHugePages:     38912 kB</span><br><span class="line">CmaTotal:              0 kB</span><br><span class="line">CmaFree:               0 kB</span><br><span class="line">HugePages_Total:       0</span><br><span class="line">HugePages_Free:        0</span><br><span class="line">HugePages_Rsvd:        0</span><br><span class="line">HugePages_Surp:        0</span><br><span class="line">Hugepagesize:       2048 kB</span><br><span class="line">DirectMap4k:       89984 kB</span><br><span class="line">DirectMap2M:      958464 kB</span><br></pre></td></tr></table></figure><h3 id="zabbix自定义监控项"><a href="#zabbix自定义监控项" class="headerlink" title="zabbix自定义监控项"></a>zabbix自定义监控项</h3><p>zabbix在<code>/etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf</code>中增加监控内存的item：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 获取内存</span><br><span class="line">UserParameter&#x3D;memory.usage[*],&#x2F;bin&#x2F;cat &#x2F;proc&#x2F;meminfo | awk &#39;&#x2F;^$1:&#x2F;&#123;print $$2&#125;&#39;</span><br></pre></td></tr></table></figure><p>重启zabbix-agent：<code>systemctl restart zabbix-agent</code><br>使用zabbix_get查看数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zabbix_get -s 192.168.85.132 -k memory.usage[Active]</span><br></pre></td></tr></table></figure><p>可以获取到当前active内存：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zabbix_agentd.d]# zabbix_get -s 192.168.85.132 -k memory.usage[Active]</span><br><span class="line">337468</span><br></pre></td></tr></table></figure><h3 id="zabbix-web配置"><a href="#zabbix-web配置" class="headerlink" title="zabbix web配置"></a>zabbix web配置</h3><p>进入zabbix web页面，配置-模板，创建模板，创建一个<code>linux meninfo</code>的模板，群组选择<code>Linux servers</code>;<br>点击监控项，创建该模板下面的监控项，示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">名称：Meminfo Active memory</span><br><span class="line">类型：Zabbix 客户端</span><br><span class="line">键值：memory.usage[Active]</span><br><span class="line">信息类型：数值（无正负）</span><br><span class="line">更新间隔：1m</span><br></pre></td></tr></table></figure><p>类似的创建几个你需要关注的监控项；<br>点击图形，创建图形，输入图形名称，添加监控项，完成。</p><h3 id="添加模板"><a href="#添加模板" class="headerlink" title="添加模板"></a>添加模板</h3><p>配置-主机，选择主机，点击模板，在<code>链接指示器</code>中搜索上步创建的模板，点击添加，点击更新。<br>监测中-最新数据，可以查看到前面创建的监控项的最新数据；检测中-图形，图形选择创建的图形，可以看见实时的内存信息。</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix3.4 </tag>
            
            <tag> memory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix3.4监控mysql5.7</title>
      <link href="2018/06/27/zabbix3-4%E7%9B%91%E6%8E%A7mysql5-7/"/>
      <url>2018/06/27/zabbix3-4%E7%9B%91%E6%8E%A7mysql5-7/</url>
      
        <content type="html"><![CDATA[<p>zabbix3.4监控mysql5.7</p><a id="more"></a><h3 id="zabbix-agent"><a href="#zabbix-agent" class="headerlink" title="zabbix_agent"></a>zabbix_agent</h3><p>尝试使用zabbix3.4监控mysql5.7，首先需要在mysql所在服务器，安装agent，安装方法很简单：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zabbix-agent</span><br></pre></td></tr></table></figure><p>安装完成之后在本地服务器下会有zabbix-agent的配置相关生成（本地测试用的centos7，生成目录在<code>/etc/zabbix</code>下）</p><h3 id="配置MySQL"><a href="#配置MySQL" class="headerlink" title="配置MySQL"></a>配置MySQL</h3><p>首先，为了避免接下来可能出现的把数据库账号密码写死在命令行中的情况，可以先在MySQL配置文件中配置一下，<code>/etc/my.cnf</code>文件中新增配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqladmin] </span><br><span class="line">user&#x3D;zabbix</span><br><span class="line">password&#x3D;11111</span><br></pre></td></tr></table></figure><p>这样在执行<code>/usr/bin/mysqladmin -uuser -ppwd -Pport -hhost ping</code>时候就不用加上用户名密码了，由于zabbix-agent也是安装在本机，所以该命令在配置完mysql账密之后可以简化为<code>mysqladmin ping</code></p><h3 id="配置zabbix-agent"><a href="#配置zabbix-agent" class="headerlink" title="配置zabbix-agent"></a>配置zabbix-agent</h3><h4 id="zabbix-agentd-conf"><a href="#zabbix-agentd-conf" class="headerlink" title="zabbix_agentd.conf"></a>zabbix_agentd.conf</h4><p>配置zabbix-agent的文件是<code>/etc/zabbix/zabbix_agentd.conf</code>，所有需要的修改都在这里面执行，列一下可能用到的修改项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Server&#x3D;192.168.85.132(大约97行)</span><br><span class="line">ServerActive&#x3D;192.168.85.132（大约138行）</span><br><span class="line">Hostname&#x3D;Zabbix server（大约149行）</span><br><span class="line">Include&#x3D;&#x2F;etc&#x2F;zabbix&#x2F;zabbix_agentd.d&#x2F;*.conf（大约269行（如果是注释状态，释放即可））</span><br><span class="line">UnsafeUserParameters&#x3D;1（大约288行，默认是0，修改为1）</span><br></pre></td></tr></table></figure><h4 id="userparameter-mysql-conf"><a href="#userparameter-mysql-conf" class="headerlink" title="userparameter_mysql.conf"></a>userparameter_mysql.conf</h4><p>在上步<code>Include=/etc/zabbix/zabbix_agentd.d/*.conf</code>释放之后，zabbix-agent可以从指定的文件夹（zabbix_agentd.d）中读取配置，该文件夹中默认就有<code>userparameter_mysql.conf</code>文件，里面就是zabbix用到的监控的item（监控项），每个监控项写一行，创建监控项格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UserParameter&#x3D;&lt;key&gt;,&lt;shell command&gt;</span><br><span class="line">或者 </span><br><span class="line">UserParameter&#x3D;&lt;key&gt;,&lt;script dir&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UserParameter&#x3D;mysql.version,mysql -V</span><br><span class="line">UserParameter&#x3D;mysql.status[*],&#x2F;etc&#x2F;zabbix&#x2F;script&#x2F;mysql&#x2F;chk_mysql.sh $1</span><br></pre></td></tr></table></figure><p>第一条item，key是mysql.version，意思就是这是监控MySQL版本的一个item，后面的<code>mysql -V</code>是具体执行的shell命令，通过执行该命令获取MySQL的版本；<br>第二个item，key是mysql.status[*]，意思是该监控项监控的是，mysql的状态，通过执行<code>/etc/zabbix/script/mysql/chk_mysql.sh</code>shell 脚本来获取MySQL的各状态。</p><p>附上我的<code>userparameter_mysql.conf</code>配置（网上一堆这样的配置，我也是参考的）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UserParameter&#x3D;mysql.version,mysql -V</span><br><span class="line">UserParameter&#x3D;mysql.status[*],&#x2F;etc&#x2F;zabbix&#x2F;script&#x2F;mysql&#x2F;chk_mysql.sh $1</span><br><span class="line">UserParameter&#x3D;mysql.ping,mysqladmin ping | grep -c alive</span><br></pre></td></tr></table></figure><h4 id="chk-mysql-sh"><a href="#chk-mysql-sh" class="headerlink" title="chk_mysql.sh"></a>chk_mysql.sh</h4><p>上步，配置项中配置的是脚本文件的，就是将获取监控项的各个脚本写在一个文件中，避免userparameter_mysql.conf文件太杂太乱，如上步配置的，获取MySQL状态的脚本是<code>/etc/zabbix/script/mysql/chk_mysql.sh</code>默认安装的zabbix是没有该文件的，需要手动创建<br><code>mkdir -p /etc/zabbix/script/mysql</code>,<br><code>cd /etc/zabbix/script/mysql</code>,<br><code>vim chk_mysql.sh</code><br>完成创建脚本，编辑，附上我的脚本（来自互联网）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"># -------------------------------------------------------------------------------</span><br><span class="line"># FileName:    check_mysql.sh</span><br><span class="line"># Revision:    1.0</span><br><span class="line"># Date:        2018&#x2F;06&#x2F;20</span><br><span class="line"># Author:      kyle</span><br><span class="line"># Email:       </span><br><span class="line"># Website:     </span><br><span class="line"># Description: </span><br><span class="line"># Notes:       ~</span><br><span class="line"># -------------------------------------------------------------------------------</span><br><span class="line"># Copyright:   </span><br><span class="line"># License:     GPL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 主机地址&#x2F;IP</span><br><span class="line">MYSQL_HOST&#x3D;&#39;192.168.85.132&#39;</span><br><span class="line"></span><br><span class="line"># 端口</span><br><span class="line">MYSQL_PORT&#x3D;&#39;3306&#39;</span><br><span class="line"></span><br><span class="line"># 数据连接</span><br><span class="line">MYSQL_CONN&#x3D;&quot;&#x2F;usr&#x2F;bin&#x2F;mysqladmin&quot;</span><br><span class="line"></span><br><span class="line"># 参数是否正确</span><br><span class="line">if [ $# -ne &quot;1&quot; ];then</span><br><span class="line">    echo &quot;arg error!&quot; </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 获取数据</span><br><span class="line">case $1 in</span><br><span class="line">    Uptime)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; status|cut -f2 -d&quot;:&quot;|cut -f1 -d&quot;T&quot;&#96;</span><br><span class="line">        echo $result </span><br><span class="line">        ;;</span><br><span class="line">    Com_update)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_update&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">        echo $result </span><br><span class="line">        ;;</span><br><span class="line">    Slow_queries)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; status |cut -f5 -d&quot;:&quot;|cut -f1 -d&quot;O&quot;&#96;</span><br><span class="line">        echo $result </span><br><span class="line">        ;;</span><br><span class="line">    Com_select)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_select&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">        echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Com_rollback)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_rollback&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Questions)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; status|cut -f4 -d&quot;:&quot;|cut -f1 -d&quot;S&quot;&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Com_insert)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_insert&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Com_delete)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_delete&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Com_commit)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_commit&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Bytes_sent)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Bytes_sent&quot; |cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Bytes_received)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Bytes_received&quot; |cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line">    Com_begin)</span><br><span class="line">        result&#x3D;&#96;$&#123;MYSQL_CONN&#125; extended-status |grep -w &quot;Com_begin&quot;|cut -d&quot;|&quot; -f3&#96;</span><br><span class="line">                echo $result </span><br><span class="line">                ;;</span><br><span class="line"></span><br><span class="line">        *)</span><br><span class="line">        echo &quot;Usage:$0(Uptime|Com_update|Slow_queries|Com_select|Com_rollback|Questions|Com_insert|Com_delete|Com_commit|Bytes_sent|Bytes_received|Com_begin)&quot; </span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>脚本其实很简单，通过mysqladmin获取MySQL自带的计数器数值即可~</p><h3 id="zabbix-server"><a href="#zabbix-server" class="headerlink" title="zabbix-server"></a>zabbix-server</h3><p>进入zabbix web页面，Configuration-Hosts，选择主机，打开主机的配置页面，选择<code>Templates</code>（模板），在<code>Link new templates</code>栏输入MySQL，在跳转出的模板中选择<code>Template DB MySQL</code>，点击<code>add</code>，完成模板配置，然后回到服务器，重启agent端：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart zabbix-agent</span><br></pre></td></tr></table></figure><p>测试数据获取：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zabbix_get -s yourHostIp -k mysql.status[Com_insert]</span><br></pre></td></tr></table></figure><p>可以成功获取到数据。</p><h4 id="图形查看"><a href="#图形查看" class="headerlink" title="图形查看"></a>图形查看</h4><p>返回zabbix web端，在Monitoring-Graphs下可以看见配置完成的监控项的实时图形。</p><h3 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h3><p>以下是可能会遇见的问题：</p><h4 id="Using-a-password-on-the-command-line-interface-can-be-insecure"><a href="#Using-a-password-on-the-command-line-interface-can-be-insecure" class="headerlink" title="Using a password on the command line interface can be insecure."></a>Using a password on the command line interface can be insecure.</h4><p>首先是这个[warning]，这是因为在命令行中写死了数据库的用户名和密码，所以有这个不安全的提示；解决办法，只需要将数据库的账密添加到<code>/etc/my.cnf</code>中，并且在命令行中去掉账密即可。</p><h4 id="2539”-of-type-“string”-cannot-convert-value-to-numeric-type"><a href="#2539”-of-type-“string”-cannot-convert-value-to-numeric-type" class="headerlink" title="2539” of type “string”: cannot convert value to numeric type"></a>2539” of type “string”: cannot convert value to numeric type</h4><p>这个问题，很明显，是字符格式的问题，shell脚本获取的监控项数据，设置的为string类型，但是选择的zabbix绘图要求的item的数据类型是numeric类型，只要转换下格式即可；解决办法，Configuration-Templtes，点击items，跳转到item页面，选择item，点击开，编辑类型<code>Type of information</code>；具体的类型可以先通过<code>Configuration-Templtes-Graphs</code>查看。</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> zabbix3.4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix配置</title>
      <link href="2018/06/26/zabbix%E9%85%8D%E7%BD%AE/"/>
      <url>2018/06/26/zabbix%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>zabbix的一些常用配置</p><a id="more"></a><h3 id="zabbix-agent"><a href="#zabbix-agent" class="headerlink" title="zabbix-agent"></a>zabbix-agent</h3><p>首先，安装完zabbix-web之后，想要监控系统，还需要在系统安装一个<code>agent</code>端：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zabbix-agent</span><br></pre></td></tr></table></figure><p>命令行安装即可，安装完成之后，可以在本地服务器下找到配置文件，我的是在:<code>/etx/zabbix</code>在：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zabbix_agentd.conf</span><br><span class="line">zabbix_agentd.d</span><br></pre></td></tr></table></figure><p>其中<code>zabbix_agentd.d</code>是文件夹，里面是具体的监控配置文件<code>userparameter_mysql.conf</code>，这个文件里面就是一系列zabbix可用的监控指标的配置，这个后面再专门写写zabbix的配置。</p><p>如果找不到包：</p><p>一. 配置yum源<br>rpm -i <a href="http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm">http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm</a><br>二．安装zabbix agent<br>yum -y install zabbix-agent</p><h3 id="zabbix-get"><a href="#zabbix-get" class="headerlink" title="zabbix_get"></a>zabbix_get</h3><p>zabbix有个工具：zabbix_get，可以用来获取监控指标，用法示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zabbix_get -s IP -k mysql.status[Com_insert]</span><br></pre></td></tr></table></figure><p>上面这条命令在配置文件配置完成的情况下，可以用来获取服务器上MySQL执行的insert数量。</p><h3 id="图像乱码问题"><a href="#图像乱码问题" class="headerlink" title="图像乱码问题"></a>图像乱码问题</h3><p>在第一次使用zabbix，图形显示，中文是一个个的方框，也就是乱码，这是因为zabbix的汉化不是很完全，可以手工替换字体来解决乱码问题。<br>首先在本地windows机器下拿到中文字体，例如楷体:<code>simkai.ttf</code>(文件路径：<code>C:\Windows\Fonts</code>)<br>然后把windows上下载完成的字体上传到zabbix服务器中，路径：<code>/usr/share/zabbix/fonts</code><br>该目录下本来有一个系统字体，并且软链接到zabbix-web，也就是页面显示的字体，现在要做的就是用自己上传的楷体替换到系统原来的字体</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost fonts]# ll</span><br><span class="line">total 11512</span><br><span class="line">lrwxrwxrwx. 1 root root       33 Jun 26 15:46 graphfont.ttf -&gt; &#x2F;etc&#x2F;alternatives&#x2F;zabbix-web-font</span><br></pre></td></tr></table></figure><p>首先是将系统原字体备份<code>mv graphfont.ttf graphfont.ttf.back</code><br>然后修改配置文件<code>/usr/share/zabbix/include/defines.inc.php </code><br>将文件中的<code>FONT_NAME</code>从原来的graphfont修改为<code>simkai</code>，一共有两处，修改完成之后页面上就可以看见乱码解决了~</p><p>（关于zabbix的东西，后面肯定是要写一个监控配置的，待续~~~）</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> zabbix3.4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机基础知识系列（一）</title>
      <link href="2018/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2018/06/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>程序员基础，性能测试需要知道的一些底层概念（一）</p><a id="more"></a><h3 id="进程、线程、程序"><a href="#进程、线程、程序" class="headerlink" title="进程、线程、程序"></a>进程、线程、程序</h3><p><code>对操作系统来说，线程是最小的执行单元，进程是最小的资源管理单元</code>，线程和进程都是由系统内核管理。</p><h4 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>程序被加载到内存中并准备执行，就是一个进程，它是操作系统动态执行的基本单元，在传统的操作系统中，进程既是基本的分配单元，也是基本的执行单元。<br>关于进程有两点需要注意：<br><strong>一、</strong>进程是一个实体。每一个进程都有它自己的地址空间，一般情况下，包括文本区域（text region）、数据区域（data region）和堆栈（stack region）。文本区域存储处理器执行的代码；数据区域存储变量和进程执行期间使用的动态分配的内存；堆栈区域存储着活动过程调用的指令和本地变量；<br><strong>二、</strong>进程是一个“执行中的程序”。程序是一个没有生命的实体，只有处理器赋予程序生命时，它才能成为一个活动的实体，我们称其为进程。</p><h5 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h5><p>进程有三个状态，<code>就绪-运行-阻塞</code>。就绪状态其实就是获取除CPU之外的所有资源，只要处理器分配资源就可以马上执行；运行状态就是获取了处理器分配的资源，开始运行程序；阻塞状态，当程序条件不够时，需要等待条件满足才能继续执行，例如I/O。</p><h4 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h4><p>程序其实本身没有任何运行的含义，程序是指令和数据的有序集合。</p><h4 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h4><h5 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h5><p>单个进程中执行中的每个任务就是一个线程，线程是进程中执行运算的最小单位。一个线程只能属于一个进程，但是一个进程可以拥有多个线程。多线程处理就是允许一个进程中在同一时刻执行多个任务。</p><h4 id="进程与线程的区别"><a href="#进程与线程的区别" class="headerlink" title="进程与线程的区别"></a>进程与线程的区别</h4><p>1，线程没有地址空间，线程包含在进程的地址空间中。线程上下文只包含一个堆栈、一个寄存器、一个优先权，线程文本包含在他的进程的文本片段中。同一进程中的多个线程共享代码段(代码和常量)，数据段(全局变量和静态变量)，扩展段(堆存储)。但是每个线程拥有自己的栈段，寄存器的内容（栈段又叫运行时段，用来存放所有局部变量和临时变量）。<br>2，线程在执行过程中与进程还是有区别的。每个独立的进程有一个程序运行的入口、顺序执行序列和程序的出口。但是线程不能够独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。<br>3，从逻辑角度来看，多线程的意义在于一个应用程序中，有多个执行部分可以同时执行。但操作系统并没有将多个线程看做多个独立的应用，来实现进程的调度和管理以及资源分配。<br>4，线程和进程在使用上各有优缺点：线程执行开销小，但不利于资源的管理和保护；而进程正相反。<br>（进程就像火车，线程就是火车的车厢）</p><h3 id="多进程与多线程"><a href="#多进程与多线程" class="headerlink" title="多进程与多线程"></a>多进程与多线程</h3><h4 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h4><p>多线程，顾名思义，同时运行多个线程；多任务可以由多进程完成，也可以由一个进程内的多线程完成。</p><h5 id="线程状态"><a href="#线程状态" class="headerlink" title="线程状态"></a>线程状态</h5><p>首先，线程大致有五种状态:初始化，就绪，运行，阻塞，死亡；</p><h5 id="线程锁"><a href="#线程锁" class="headerlink" title="线程锁"></a>线程锁</h5><p>在多线程中，每个线程都有自己的资源，但是代码区是共享的，即每个线程都可以执行相同的函数。这可能带来的问题就是几个线程同时执行一个函数，导致数据的混乱，产生不可预料的结果，因此我们必须避免这种情况的发生。例如：有两个线程，同时操作一个列表， 列表中数值都是0，一个线程是更新（update），操作为从前往后顺序更新值为1；线程二为打印（print），操作为从后往前倒序打印列表，当两个线程同时操作列表时就会出现打印时一半0，一半1，出现了数据不同步，为了避免这样的情况，就引进了线程锁的概念。</p><p>锁有两种状态——锁定和未锁定。每当一个线程比如”update”要访问共享数据时，必须先获得锁定；如果已经有别的线程比如”print”获得锁定了，那么就让线程”update”暂停，也就是同步阻塞；等到线程”print”访问完毕，释放锁以后，再让线程”update”继续。经过这样的处理，打印列表时要么全部输出0，要么全部输出1，不会再出现一半0一半1的混乱数据。</p><h5 id="线程通信（条件变量）"><a href="#线程通信（条件变量）" class="headerlink" title="线程通信（条件变量）"></a>线程通信（条件变量）</h5><p>列表并不是一开始就有的；而是通过线程”create”创建的。如果”update”或者”print” 在”create”还没有运行的时候就访问列表，将会出现一个异常。使用锁可以解决这个问题，但是”update”和”print”将需要一个无限循环——他们不知道”create”什么时候会运行，让”create”在运行后通知”update”和”print”显然是一个更好的解决方案。于是，引入了条件变量。</p><p>条件变量允许线程比如”update”和”print”在条件不满足的时候（列表为None时）等待，等到条件满足的时候（列表已经创建）发出一个通知，告诉”update” 和”print”条件已经有了，你们该起床干活了；然后”update”和”print”才继续运行。</p><h5 id="线程运行和阻塞状态转换"><a href="#线程运行和阻塞状态转换" class="headerlink" title="线程运行和阻塞状态转换"></a>线程运行和阻塞状态转换</h5><p>阻塞有三种状态：<br>同步阻塞（锁定池）是指处于竞争锁定的状态，线程请求锁定时将进入这个状态，一旦成功获得锁定又恢复到运行状态；<br>等待阻塞（等待池）是指等待其他线程通知的状态，线程获得条件锁定后，调用“等待”将进入这个状态，一旦其他线程发出通知，线程将进入同步阻塞状态，再次竞争条件锁定；<br>而其他阻塞是指调用time.sleep()、anotherthread.join()或等待IO时的阻塞，这个状态下线程不会释放已获得的锁定。</p><h4 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h4><p>为啥会想看多进程这么个东西，那是因为，python说实话，有点坑的地方是，实质上python没有多线程。python虽然可以通过<code>threading</code>模块来实现多线程编程，但是Python的线程虽然是真正的线程，但解释器执行代码时，有一个GIL锁：Global Interpreter Lock，任何Python线程执行前，必须先获得GIL锁，然后，每执行100条字节码，解释器就自动释放GIL锁，让别的线程有机会执行。这个GIL全局锁实际上把所有线程的执行代码都给上了锁，所以，多线程在Python中只能交替执行，即使100个线程跑在100核CPU上，也只能用到1个核。而通常我们用的解释器是官方实现的CPython，要真正利用多核，除非重写一个不带GIL的解释器。所以使用python实现并发多线程，不太现实。。</p><p>不过即使如此，我们也可以使用多进程来实现多核任务，毕竟当前多核处理器满大街都是。</p><h5 id="实现多进程"><a href="#实现多进程" class="headerlink" title="实现多进程"></a>实现多进程</h5><p>首先，unix中有个fork()函数，这玩意就可以实现多进程，这函数产生的效果就是把当前进程复制一份，普通的函数调用，调用一次，返回一次，但是fork()调用一次，返回两次，因为操作系统自动把当前进程（称为父进程）复制了一份（称为子进程），然后，分别在父进程和子进程内返回。子进程永远返回0，而父进程返回子进程的ID。这样做的理由是，一个父进程可以fork出很多子进程，所以，父进程要记下每个子进程的ID，而子进程只需要调用getppid()就可以拿到父进程的ID。</p><p>python的os模块封装了fork()，可以很简单就实现创建子进程；但是由于windows系统没有fork()，在windows上就不能执行包含fork()调用的脚本，在windows上就用<code>multiprocessing</code>替代。</p><h5 id="multiprocessing-示例"><a href="#multiprocessing-示例" class="headerlink" title="multiprocessing 示例"></a>multiprocessing 示例</h5><p>使用<code>multiprocessing</code>模块进行多进程编程，可以支持跨平台。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@Auther Kyle</span><br><span class="line">@Time 2018&#x2F;6&#x2F;19 13:10</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from multiprocessing import Pool</span><br><span class="line">import os, time, random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def LongTimeTask(name):</span><br><span class="line">    print(&quot;Run task&#123;0&#125; &#123;1&#125;&quot;.format(name, os.getpid()))</span><br><span class="line">    start &#x3D; time.time()</span><br><span class="line">    time.sleep(random.random() * 3)</span><br><span class="line">    end &#x3D; time.time()</span><br><span class="line">    print(&quot;Task &#123;0&#125; runs &#123;1&#125; seconds.&quot;.format(name, (end - start)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    print(&quot;Parent process &#123;0&#125;&quot;.format(os.getpid()))</span><br><span class="line">    p &#x3D; Pool(4)</span><br><span class="line">    for i in range(5):</span><br><span class="line">        p.apply_async(LongTimeTask, args&#x3D;(i, ))</span><br><span class="line">    print(&quot;Waiting for all subprocesses done...&quot;)</span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    print(&quot;All subprocess done&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Parent process 1692</span><br><span class="line">Waiting for all subprocesses done...</span><br><span class="line">Run task0 4464</span><br><span class="line">Run task1 5516</span><br><span class="line">Run task2 2388</span><br><span class="line">Run task3 8540</span><br><span class="line">Task 3 runs 0.22301292419433594 seconds.</span><br><span class="line">Run task4 8540</span><br><span class="line">Task 1 runs 0.463026762008667 seconds.</span><br><span class="line">Task 2 runs 1.3660781383514404 seconds.</span><br><span class="line">Task 4 runs 1.2180695533752441 seconds.</span><br><span class="line">Task 0 runs 1.7631008625030518 seconds.</span><br><span class="line">All subprocess done</span><br></pre></td></tr></table></figure><h5 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h5><p>multiprocessing提供多种方法来交换数据：<code>Queue</code>，<code>Pipes</code>等。<br>代码示例:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@Auther Kyle</span><br><span class="line">@Time 2018&#x2F;6&#x2F;19 14:56</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from multiprocessing import Process, Queue</span><br><span class="line">import os, time, random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def write(q):</span><br><span class="line">    &quot;&quot;&quot;写数据进程执行&quot;&quot;&quot;</span><br><span class="line">    print(&quot;Process to write: &#123;0&#125;&quot;.format(os.getpid()))</span><br><span class="line">    for value in [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]:</span><br><span class="line">        print(&quot;Put &#123;0&#125; to queue.&quot;.format(value))</span><br><span class="line">        q.put(value)</span><br><span class="line">        time.sleep(random.random())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def read(q):</span><br><span class="line">    &quot;&quot;&quot;读数据进程执行&quot;&quot;&quot;</span><br><span class="line">    print(&quot;Process to read: &#123;0&#125;&quot;.format(os.getpid()))</span><br><span class="line">    while True:</span><br><span class="line">        value &#x3D; q.get(True)</span><br><span class="line">        print(&quot;Get &#123;0&#125; from queue.&quot;.format(value))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    # 父进程创建Queue，传给各个子进程</span><br><span class="line">    q &#x3D; Queue()</span><br><span class="line">    pw &#x3D; Process(target&#x3D;write, args&#x3D;(q,))</span><br><span class="line">    pr &#x3D; Process(target&#x3D;read, args&#x3D;(q,))</span><br><span class="line">    # 启动子进程pw，写入</span><br><span class="line">    pw.start()</span><br><span class="line">    # 启动子进程pr，读取</span><br><span class="line">    pr.start()</span><br><span class="line">    # 等待写进程执行结束</span><br><span class="line">    pw.join()</span><br><span class="line">    # pr进程里是死循环，无法等待其结束，只能强行终止</span><br><span class="line">    pr.terminate()</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Process to read: 7616</span><br><span class="line">Process to write: 4948</span><br><span class="line">Put A to queue.</span><br><span class="line">Get A from queue.</span><br><span class="line">Put B to queue.</span><br><span class="line">Get B from queue.</span><br><span class="line">Put C to queue.</span><br><span class="line">Get C from queue.</span><br></pre></td></tr></table></figure><p>以上代码均来自于网络~</p><h3 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h3><p>协程，又称微线程，英文Coroutines，是一种比线程更加轻量级的存在。正如一个进程可以拥有多个线程一样，一个线程也可以拥有多个协程。（关于协程，真的不太懂，之后有空再研究，看到一句话:子程序就是协程的一种特例）多线程编程中，为了防止数据不同步，需要添加锁机制，但是协程应为就用了一个线程，在协程之间共享资源是不用加锁机制的，只需要判断状态。</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431927781401bb47ccf187b24c3b955157bb12c5882d000">廖雪峰关于多进程教程</a><br><a href="http://www.cnblogs.com/huxi/archive/2010/06/26/1765808.html">Python线程指南</a><br><a href="https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/0013868328689835ecd883d910145dfa8227b539725e5ed000">廖雪峰-协程教程</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> 进程 </tag>
            
            <tag> 线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos下切换MySQL数据到数据盘</title>
      <link href="2018/06/12/Centos%E4%B8%8B%E5%88%87%E6%8D%A2MySQL%E6%95%B0%E6%8D%AE%E5%88%B0%E6%95%B0%E6%8D%AE%E7%9B%98/"/>
      <url>2018/06/12/Centos%E4%B8%8B%E5%88%87%E6%8D%A2MySQL%E6%95%B0%E6%8D%AE%E5%88%B0%E6%95%B0%E6%8D%AE%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<p>centos 7对ECS进行挂载数据盘，并切换MySQL数据保存目录到数据盘</p><a id="more"></a><p>测试需要，申请了阿里云的ECS服务器，用来搭建MySQL，搭建时候没有注意，没想到运维大哥那么体贴的申请了数据盘，还是SSD的，这样也就需要把原来MySQL数据存储路径换到数据盘。</p><h3 id="操作数据盘"><a href="#操作数据盘" class="headerlink" title="操作数据盘"></a>操作数据盘</h3><p>首先查看当前服务器是否有数据盘：<code>fdisk -l</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Disk &#x2F;dev&#x2F;vda: 53.7 GB, 53687091200 bytes, 104857600 sectors</span><br><span class="line">Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes</span><br><span class="line">Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes</span><br><span class="line">I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0008d73a</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">&#x2F;dev&#x2F;vda1   *        2048   104855551    52426752   83  Linux</span><br><span class="line"></span><br><span class="line">Disk &#x2F;dev&#x2F;vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors</span><br><span class="line">Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes</span><br><span class="line">Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes</span><br><span class="line">I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes</span><br></pre></td></tr></table></figure><p>可以看到当前服务上面有两个盘<code>/dev/vda</code>和<code>/dev/vdb</code>，其中<code>/dev/vda</code>是系统盘，并且已经有分区<code>/dev/vda1</code>，经常使用的查看磁盘的命令是<code>df -h</code>，但是有个问题，如果你的数据盘没有分区、挂载，使用<code>df -h</code>是不会显示的，只会展示这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;vda1        50G  3.1G   44G   7% &#x2F;</span><br><span class="line">devtmpfs         16G     0   16G   0% &#x2F;dev</span><br><span class="line">tmpfs            16G     0   16G   0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs            16G  520K   16G   1% &#x2F;run</span><br><span class="line">tmpfs            16G     0   16G   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">tmpfs           3.2G     0  3.2G   0% &#x2F;run&#x2F;user&#x2F;0</span><br></pre></td></tr></table></figure><h4 id="数据盘分区"><a href="#数据盘分区" class="headerlink" title="数据盘分区"></a>数据盘分区</h4><p>查找到数据盘<code>/dev/vdb</code>之后，对它进行分区：<code>fdisk  /dev/vdb</code>，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x39e32289.</span><br></pre></td></tr></table></figure><p>接下来是有几个选项，选择适合的选项即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Command (m for help):   输入&#39;n&#39;，创建一个新分区</span><br><span class="line">Partition type:输入&#39;p&#39;，选择主分区</span><br><span class="line">Partition number (1-4, default 1):输入&#39;1&#39;，仅创建一个分区</span><br><span class="line">First sector (2048-209715199, default 2048): 我用的默认</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-209715199, default 209715199):  同样默认</span><br></pre></td></tr></table></figure><p>接下来<code>wq</code>保存退出即可。<br>然后这个时候<code>fdisk -l</code>，就能看见新的分区：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Disk &#x2F;dev&#x2F;vda: 53.7 GB, 53687091200 bytes, 104857600 sectors</span><br><span class="line">Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes</span><br><span class="line">Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes</span><br><span class="line">I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0008d73a</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">&#x2F;dev&#x2F;vda1   *        2048   104855551    52426752   83  Linux</span><br><span class="line"></span><br><span class="line">Disk &#x2F;dev&#x2F;vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors</span><br><span class="line">Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes</span><br><span class="line">Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes</span><br><span class="line">I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x39e32289</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">&#x2F;dev&#x2F;vdb1            2048   209715199   104856576   83  Linux</span><br></pre></td></tr></table></figure><h3 id="格式化分区"><a href="#格式化分区" class="headerlink" title="格式化分区"></a>格式化分区</h3><p>首先新建文件夹：<code>cd /home</code>、<code>mkdir mysql</code><br>挂载：<code>mount /dev/vdb1 /home/mysql</code><br>在新分区上创建文件系统：<code>mkfs.ext4 /dev/vdb1</code><br>备份<code>/etc/fstab</code>：<code>cp /etc/fstab /etc/fstab.bak</code><br>查找当前磁盘分区的UUID：<code>blkid</code><br>向 /etc/fstab 写入新分区信息:<code>vim /etc/fstab</code>，写入<code>UUID=ec7443b1-14e4-4174-ae8a-2194484a754b /home/mysql           ext4    defaults 0 0</code>(UUID是之前获得的)</p><h3 id="复制MySQL数据"><a href="#复制MySQL数据" class="headerlink" title="复制MySQL数据"></a>复制MySQL数据</h3><p>复制数据：<code>mv /var/lib/mysql/* /home/mysql</code><br>修改配置：<code>vim /etc/my.cnf</code>，修改数据文件到<code>/home/mysql</code><br>重启MySQL<br>OVER~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用fiddler抓iphone包</title>
      <link href="2018/06/07/%E4%BD%BF%E7%94%A8fiddler%E6%8A%93iphone%E5%8C%85/"/>
      <url>2018/06/07/%E4%BD%BF%E7%94%A8fiddler%E6%8A%93iphone%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<p>使用fiddler抓包iphone</p><a id="more"></a><p>亲测可用，系统及版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Fiddler: Telerik Fiddler Web Debugger (v2.6.3.48898)</span><br><span class="line">iphone 6s(ios 11.3.1)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Fiddler设置"><a href="#Fiddler设置" class="headerlink" title="Fiddler设置"></a>Fiddler设置</h3><p>首先，需要设置下fiddler，至于fiddler的下载安装就不说了。</p><h4 id="配置监听https"><a href="#配置监听https" class="headerlink" title="配置监听https"></a>配置监听https</h4><p>需要配置fiddler，使得允许监听<code>https</code>，因为fiddler默认是抓http格式的。<br>(再次声明，受不了七牛云之类的手持身份证实名认证的措施，由于之前工作做过征信相关，对这方面有点在乎，能少泄露一点就少一点。。。所以，基本blog中一直是无图片~)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tools ——&gt; （Telerik）Fiddler Options ——&gt; https</span><br></pre></td></tr></table></figure><p>勾选<code>Decrypt Https traffic</code>，此时系统会提示你是否要安装fiddler的证书之类的，安装一下即可~</p><h4 id="远程连接配置"><a href="#远程连接配置" class="headerlink" title="远程连接配置"></a>远程连接配置</h4><p>配置完https之后，需要设置允许远程连接，还是在<code>Tools ——&gt; （Telerik）Fiddler Options</code><br>选择<code>Connections</code>，监听端口使用默认的<code>8888</code>即可，勾选<code>Allow remote computers to connect</code>，此时会弹出一个warning，提示你会开启远程连接，并且需要重启fiddler才会生效，点击确定即可；</p><p><strong>重启fiddler</strong></p><h3 id="iphone设置"><a href="#iphone设置" class="headerlink" title="iphone设置"></a>iphone设置</h3><h4 id="获取PC端ip"><a href="#获取PC端ip" class="headerlink" title="获取PC端ip"></a>获取PC端ip</h4><p>这个就比较简单了，<code>cmd ——&gt; ipconfig</code>拿到ip即可，例如<code>192.168.100.10</code></p><h4 id="iphone安装证书"><a href="#iphone安装证书" class="headerlink" title="iphone安装证书"></a>iphone安装证书</h4><p>首先确保手机和PC处于同一网络（直接连接同一wifi最简单），然后在手机浏览器中输入上述步骤获取的ip和端口</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.100.10:8888</span><br></pre></td></tr></table></figure><p>页面会出现<code>Fiddler Echo Service</code>该页面，看到一条<code>You can download the FiddlerRoot certificate</code>，点击下载证书，然后信任安装证书即可（安装完的证书可以在iphone-设置-通用-描述文件中看到）（证书名字，我当时装的时候叫<strong>DO_NOT_TRUST_FiddlerRoot</strong>）</p><h4 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h4><p>安装完成证书，进入手机<code>设置-无限局域网</code>，选择连接的wifi，配置代理选择手动，输入服务器，端口，点击存储。<br>完成~</p><h3 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h3><p>手机浏览器访问页面，可以使用fiddler抓到包，看到请求和返回~以下抓到的示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Thu, 07 Jun 2018 03:07:22 GMT</span><br><span class="line">Content-Type: text&#x2F;html; charset&#x3D;UTF-8</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Powered-By: PHP&#x2F;7.1.5</span><br><span class="line">Set-Cookie: upv2&#x3D;20180607%2C4; expires&#x3D;Sat, 09-Jun-2018 03:07:22 GMT; Max-Age&#x3D;172800; path&#x3D;&#x2F;</span><br><span class="line">Content-Length: 7346</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;zh-CN&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;古墓丽影：源起之战迅雷下载,百度网盘,高清迅雷下载 - 97电影网&lt;&#x2F;title&gt;</span><br><span class="line">&lt;meta name&#x3D;&quot;keywords&quot; content&#x3D;&quot;古墓丽影：源起之战迅雷下载,古墓丽影：源起之战百度网盘资源,古墓丽影：源起之战高清迅雷下载 - 97电影网&quot; &#x2F;&gt;</span><br><span class="line">&lt;meta name&#x3D;&quot;description&quot; content&#x3D;&quot;这里有电影《古墓丽影：源起之战》的百度网盘资源，还有《古墓丽影：源起之战》的迅雷下载链接,演员：艾丽西亚·维坎德,多米尼克·威斯特,沃尔顿·戈金斯,吴彦祖,克里斯汀·斯科特·托马斯,汉娜·乔恩-卡门,尼克·弗罗斯特,德里克·雅各比,安东尼奥·阿克儿,亚历山大·维尧姆,杰美·温斯顿,迈克尔·奥拜奥拉,艾米丽·凯里,肯尼思·霍&quot; &#x2F;&gt;</span><br><span class="line">&lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1, maximum-scale&#x3D;1, user-scalable&#x3D;no&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;icon&quot; href&#x3D;&quot;http:&#x2F;&#x2F;www.id97.com&#x2F;favicon.ico&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;&#x2F;static&#x2F;css&#x2F;amazeui.min.css&quot;&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;http:&#x2F;&#x2F;libs.baidu.com&#x2F;jquery&#x2F;1.7.2&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;&#x2F;static&#x2F;js&#x2F;amazeui.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; rev&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; media&#x3D;&quot;all&quot; href&#x3D;&quot;http:&#x2F;&#x2F;www.id97.com&#x2F;static&#x2F;mobile&#x2F;mobile.css&quot;&gt;</span><br><span class="line">    &lt;!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --&gt;</span><br><span class="line">    &lt;!-- WARNING: Respond.js doesn&#39;t work if you view the page via file:&#x2F;&#x2F; --&gt;</span><br><span class="line">    &lt;!--[if lt IE 9]&gt;</span><br><span class="line">      &lt;script src&#x3D;&quot;http:&#x2F;&#x2F;cdn.bootcss.com&#x2F;html5shiv&#x2F;3.7.2&#x2F;html5shiv.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">      &lt;script src&#x3D;&quot;http:&#x2F;&#x2F;cdn.bootcss.com&#x2F;respond.js&#x2F;1.4.2&#x2F;respond.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    &lt;![endif]--&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class&#x3D;&quot;am-topbar-inverse&quot;&gt;</span><br><span class="line">    &lt;header class&#x3D;&quot;am-container&quot;&gt;</span><br><span class="line">        &lt;h1 class&#x3D;&quot;am-topbar-brand&quot;&gt;</span><br><span class="line">            &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.id97.com&#x2F;&quot;&gt;97电影网&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;h1&gt;</span><br><span class="line">        &lt;button class&#x3D;&quot;am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only&quot; data-am-collapse&#x3D;&quot;&#123;target: &#39;#doc-topbar-collapse&#39;&#125;&quot;&gt;&lt;span class&#x3D;&quot;am-sr-only&quot;&gt;97电影网&lt;&#x2F;span&gt; &lt;span class&#x3D;&quot;am-icon-bars&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;am-collapse am-topbar-collapse&quot; id&#x3D;&quot;doc-topbar-collapse&quot;&gt;</span><br><span class="line">        &lt;ul class&#x3D;&quot;am-nav am-nav-pills am-topbar-nav&quot;&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.id97.com&#x2F;&quot;&gt;首页&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.id97.com&#x2F;movie&quot;&gt;电影&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;am-topbar-right&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;form action&#x3D;&quot;&#x2F;search&quot; method&#x3D;&quot;GET&quot; class&#x3D;&quot;am-topbar-form am-topbar-left am-form-inline&quot; role&#x3D;&quot;search&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;am-form-group&quot;&gt;</span><br><span class="line">                &lt;input type&#x3D;&quot;text&quot; class&#x3D;&quot;am-form-field am-input-sm&quot; name&#x3D;&quot;q&quot; placeholder&#x3D;&quot;搜索&quot;&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;form&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div class&#x3D;&quot;am-dropdown&quot; data-am-dropdown&#x3D;&quot;&#123;boundary: &#39;.am-topbar&#39;&#125;&quot;&gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;am-btn am-btn-secondary am-topbar-btn am-btn-sm am-dropdown-toggle&quot; data-am-dropdown-toggle&gt;登入&#x2F;注册 &lt;span class&#x3D;&quot;am-icon-caret-down&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;ul class&#x3D;&quot;am-dropdown-content&quot;&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;signup&quot;&gt;注册&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href&#x3D;&quot;&#x2F;signin&quot;&gt;登入&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">                &lt;&#x2F;ul&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;header&gt;</span><br><span class="line">&lt;&#x2F;div&gt;&lt;div class&#x3D;&quot;am-container&quot;&gt;</span><br><span class="line">    &lt;h3 class&#x3D;&quot;am-article-title&quot;&gt;</span><br><span class="line">        古墓丽影：源起之战    &lt;&#x2F;h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;am-g&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;am-u-sm-5&quot;&gt;&lt;img class&#x3D;&quot;img-responsive&quot; width&#x3D;&quot;100%&quot; src&#x3D;&quot;http:&#x2F;&#x2F;img1.xmspc.com&#x2F;uploads&#x2F;movie-poster&#x2F;8ltxwirll3g7.jpg&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;am-u-sm-7&quot; style&#x3D;&quot;padding-left:0;font-size:14px;color:#666;&quot;&gt;</span><br><span class="line">&lt;strong&gt;主演：&lt;&#x2F;strong&gt;艾丽西亚·维坎德 &#x2F; 多米尼克·威斯特 &#x2F; 沃尔顿·戈金斯 ...&lt;br&#x2F;&gt;</span><br><span class="line">&lt;strong&gt;类型：&lt;&#x2F;strong&gt;动作 &#x2F; 冒险&lt;br&#x2F;&gt;</span><br><span class="line">&lt;strong&gt;上映：&lt;&#x2F;strong&gt;2018-03-16(美国&#x2F;中国大陆)&lt;br&#x2F;&gt;</span><br><span class="line">&lt;strong&gt;豆瓣：&lt;&#x2F;strong&gt;6.3分&lt;br&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;am-u-sm-12&quot; style&#x3D;&quot;padding-top:15px;font-size:14px;color:#666;&quot;&gt;&lt;strong&gt;简介：&lt;&#x2F;strong&gt;劳拉（艾丽西亚·维坎德 Alicia Vikander 饰）的父亲一生都致力于研究古墓，在劳拉尚且年幼的时候，父亲在一场冒险之中失踪了。一晃眼多年过去，劳拉一直拒绝承认父亲已死的消息，也拒绝接手父亲手下的商业帝国。&lt;br &#x2F;&gt;</span><br><span class="line">一次偶然中，劳拉发现了父亲遗留下的冒险笔记，父亲希望劳拉能把这些资料付之一炬，但为了寻找父亲的下落，劳拉决定寻找笔记中记载的岛屿。劳拉找到了名为陆仁（吴彦祖 饰）的男子，两人结伴踏上了旅途。刚一上岛，劳拉和陆仁就遇见了一直和父亲作对的马赛亚斯（沃特·戈金斯 Walton Goggins 饰）以及他的雇佣兵团队。马赛亚斯一心想要找到古墓的踪迹，不惜杀死了不肯透露半点消息的劳拉的父亲，如今，劳拉亦落入了他的魔爪之中，会遭遇怎样的命运呢？&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;h3 class&#x3D;&quot;res-h3&quot;&gt;资源列表：&lt;&#x2F;h3&gt;</span><br><span class="line">    &lt;ul class&#x3D;&quot;am-list res-list&quot;&gt;</span><br><span class="line">&lt;li class&#x3D;&quot;list-group-item&quot;&gt;&lt;&#x2F;li&gt;&lt;li&gt;&lt;p class&#x3D;&quot;text-break&quot; style&#x3D;&quot;margin:0;&quot;&gt;&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;14V_KvaJcMIzwY3Octe4WDQ&quot;&gt;古墓丽影：源起之战 - 百度云，网盘资源，密码：3xvh&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&lt;textarea style&#x3D;&quot;width:100%;&quot;&gt;https:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;14V_KvaJcMIzwY3Octe4WDQ&lt;&#x2F;textarea&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&lt;li&gt;&lt;p class&#x3D;&quot;text-break&quot; style&#x3D;&quot;margin:0;&quot;&gt;&lt;a href&#x3D;&quot;ed2k:&#x2F;&#x2F;|file|%E5%8F%A4%E5%A2%93%E4%B8%BD%E5%BD%B1.%E6%BA%90%E8%B5%B7%E4%B9%8B%E6%88%98.Tomb.Raider.2018.HD1080P.%E4%B8%AD%E8%8B%B1%E5%8F%8C%E5%AD%97.mp4|2207922795|225513B29378FAEC5871822A46DE2F8D|h&#x3D;NEFWJ3E5TL6ALZV2O63HVU5GALU6IGBI|&#x2F;&quot;&gt;古墓丽影.源起之战.Tomb.Raider.2018.HD1080P.中英双字.mp4&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&lt;textarea style&#x3D;&quot;width:100%;&quot;&gt;ed2k:&#x2F;&#x2F;|file|%E5%8F%A4%E5%A2%93%E4%B8%BD%E5%BD%B1.%E6%BA%90%E8%B5%B7%E4%B9%8B%E6%88%98.Tomb.Raider.2018.HD1080P.%E4%B8%AD%E8%8B%B1%E5%8F%8C%E5%AD%97.mp4|2207922795|225513B29378FAEC5871822A46DE2F8D|h&#x3D;NEFWJ3E5TL6ALZV2O63HVU5GALU6IGBI|&#x2F;&lt;&#x2F;textarea&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&lt;li&gt;&lt;p class&#x3D;&quot;text-break&quot; style&#x3D;&quot;margin:0;&quot;&gt;&lt;a href&#x3D;&quot;ed2k:&#x2F;&#x2F;|file|%E5%8F%A4%E5%A2%93%E4%B8%BD%E5%BD%B1.%E6%BA%90%E8%B5%B7%E4%B9%8B%E6%88%98.Tomb.Raider.2018.HD720P.%E4%B8%AD%E8%8B%B1%E5%8F%8C%E5%AD%97.mkv|1574630029|9D61330E39013720310FD4FBE83807FB|h&#x3D;35M7EUX7TERZMN4QCYGSWIGC7F5JS4ZV|&#x2F;&quot;&gt;古墓丽影.源起之战.Tomb.Raider.2018.HD720P.中英双字.mkv&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&lt;textarea style&#x3D;&quot;width:100%;&quot;&gt;ed2k:&#x2F;&#x2F;|file|%E5%8F%A4%E5%A2%93%E4%B8%BD%E5%BD%B1.%E6%BA%90%E8%B5%B7%E4%B9%8B%E6%88%98.Tomb.Raider.2018.HD720P.%E4%B8%AD%E8%8B%B1%E5%8F%8C%E5%AD%97.mkv|1574630029|9D61330E39013720310FD4FBE83807FB|h&#x3D;35M7EUX7TERZMN4QCYGSWIGC7F5JS4ZV|&#x2F;&lt;&#x2F;textarea&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;    &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;footer class&#x3D;&quot;footer&quot;&gt;</span><br><span class="line">    &lt;p&gt;免责声明：本网站将逐步删除和规避程序自动搜索采集到的不提供分享的版权影视。本站仅供测试和学习交流。请大家支持正版。&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;p&gt;唯一网址：&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.id97.com&#x2F;&quot;&gt;97电影网&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;footer&gt;&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;www.szshouzhai.com&#x2F;kdksd&#x2F;c-5270-22.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var _hmt &#x3D; _hmt || [];</span><br><span class="line">(function() &#123;</span><br><span class="line">  var hm &#x3D; document.createElement(&quot;script&quot;);</span><br><span class="line">  hm.src &#x3D; &quot;https:&#x2F;&#x2F;hm.baidu.com&#x2F;hm.js?a6cc69b245346a568ba6088ab53ff7ac&quot;;</span><br><span class="line">  var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0];</span><br><span class="line">  s.parentNode.insertBefore(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><p>OVER!</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fiddler </tag>
            
            <tag> iphone </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3.6安装basemap</title>
      <link href="2018/06/01/python3-6%E5%AE%89%E8%A3%85basemap/"/>
      <url>2018/06/01/python3-6%E5%AE%89%E8%A3%85basemap/</url>
      
        <content type="html"><![CDATA[<p>python3.6安装basemap</p><a id="more"></a><p>很久没碰matplotlib了，想看看有没有中国地图加人口，这样绘制一张图，找白天，貌似<code>basemap</code>里面有，basemap需要：<code>from mpl_toolkits.basemap import Basemap</code>，然后就尝试安装<code>mpl_toolkits</code>，不出所料，失败了。。。</p><p>折腾半天，附上windows下python3.6安装basemap步骤：</p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>首先，一个神奇的网站，经常逛：</p><blockquote><p><a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/">python包下载</a></p></blockquote><p>下载对应python版本的文件，cp36表示3.6版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">basemap‑1.1.0‑cp36‑cp36m‑win_amd64.whl </span><br><span class="line">pyproj‑1.9.5.1‑cp36‑cp36m‑win_amd64.whl</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>windows进入cmd模式，进入保存上述俩文件的路径，使用pip安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install pyproj‑1.9.5.1‑cp36‑cp36m‑win_amd64.whl</span><br><span class="line">pip install basemap‑1.1.0‑cp36‑cp36m‑win_amd64.whl </span><br></pre></td></tr></table></figure><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p>打开简单的世界地图：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from mpl_toolkits.basemap import Basemap</span><br><span class="line"></span><br><span class="line">plt.figure(figsize&#x3D;(16, 8))</span><br><span class="line">m &#x3D; Basemap()</span><br><span class="line">m.drawcoastlines()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】loadrunner请求三种格式API</title>
      <link href="2018/05/22/%E3%80%90%E8%BD%AC%E3%80%91loadrunner%E8%AF%B7%E6%B1%82%E4%B8%89%E7%A7%8D%E6%A0%BC%E5%BC%8FAPI/"/>
      <url>2018/05/22/%E3%80%90%E8%BD%AC%E3%80%91loadrunner%E8%AF%B7%E6%B1%82%E4%B8%89%E7%A7%8D%E6%A0%BC%E5%BC%8FAPI/</url>
      
        <content type="html"><![CDATA[<p>loadrunner请求API，http POST三种请求格式的脚本</p><a id="more"></a><p>本篇文章主要针对POST请求的三种数据请求格式，组织不同的脚本:</p><p>（1）、application/x-www-form-urlencoded 键值对</p><p>（2）、multipart/form-data 表单</p><p>（3）、application/json Json串</p><p>PS：loadrunner body参数中的引号，需要自己加<code>\</code>转义。</p><h3 id="application-x-www-form-urlencoded-键值对"><a href="#application-x-www-form-urlencoded-键值对" class="headerlink" title="application/x-www-form-urlencoded 键值对"></a>application/x-www-form-urlencoded 键值对</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Action()  </span><br><span class="line">&#123;  </span><br><span class="line">    lr_start_transaction(&quot;checkPerson&quot;);  </span><br><span class="line">    &#x2F;* 注册获取返回参数，该方法可以配合打印返回数据，检测数据内容 *&#x2F;  </span><br><span class="line">    web_reg_save_param(&quot;Para&quot;,  </span><br><span class="line">                       &quot;LB&#x3D;&quot;,  </span><br><span class="line">                       &quot;RB&#x3D;&quot;,  </span><br><span class="line">                       LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 注册断言： Text&#x3D;断言内容 *&#x2F;  </span><br><span class="line">    &#x2F;* 该方法会判断后面的web请求方法的返回值 *&#x2F;  </span><br><span class="line">    web_reg_find(&quot;Text&#x3D;成功&quot;,  </span><br><span class="line">             LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 汉字进行UTF-8编码 *&#x2F;  </span><br><span class="line">    lr_convert_string_encoding(&quot;需要进行UTF-8加密的中文字符串&quot;,LR_ENC_SYSTEM_LOCALE,LR_ENC_UTF8,&quot;result&quot;);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 向后面的web请求函数增加请求头 *&#x2F;  </span><br><span class="line">    &#x2F;* 如果web请求方法中已经设置了相同的头，则优先使用web请求方法中的头，例如web请求方法中的EncType参数，对应请求投中的Content-Type。由于下面的方法已经设置了EncType参数，所以这里的设置并没有什么X用 *&#x2F;  </span><br><span class="line">    &#x2F;* 表单直接使用方法自带参数，键值对和json建议使用该方法 *&#x2F;  </span><br><span class="line">    web_add_header(&quot;Content-Type&quot;,  </span><br><span class="line">               &quot;application&#x2F;x-www-form-urlencoded; charset&#x3D;utf-8&quot;);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 主要针对form表单和键值对两种格式的web请求 *&#x2F;  </span><br><span class="line">    web_submit_data(&quot;checkPerson&quot;,  </span><br><span class="line">        &quot;Action&#x3D;http:&#x2F;&#x2F;130.1.11.105:9080&#x2F;ibis&#x2F;faceService&#x2F;checkPerson&quot;,  </span><br><span class="line">        &quot;Method&#x3D;POST&quot;,  </span><br><span class="line">        &#x2F;* 该方法支持常见的两种请求数据格式 *&#x2F;  </span><br><span class="line">        &#x2F;* （1）&quot;EncType&#x3D;multipart&#x2F;form-data&quot;。form表单提交数据 *&#x2F;  </span><br><span class="line">        &#x2F;* （1）&quot;EncType&#x3D;application&#x2F;x-www-form-urlencoded&quot;。默认使用键值对提交数据 *&#x2F;  </span><br><span class="line">        &#x2F;&#x2F;&quot;EncType&#x3D;&quot;,  </span><br><span class="line">        &quot;TargetFrame&#x3D;&quot;,  </span><br><span class="line">        &quot;Referer&#x3D;&quot;,  </span><br><span class="line">        ITEMDATA,  </span><br><span class="line">        &quot;Name&#x3D;Name1&quot;, &quot;Value&#x3D;Value1&quot;, ENDITEM,  </span><br><span class="line">        &quot;Name&#x3D;Name2&quot;, &quot;Value&#x3D;Value2&quot;, ENDITEM,  </span><br><span class="line">        LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 打印相应结果 *&#x2F;  </span><br><span class="line">    &#x2F;* lr_eval_string(&quot;&#123;result&#125;&quot;) 使用loadrunner引用外部函数，只有这样才能取出上面web_reg_save_param方法的返回值 *&#x2F;  </span><br><span class="line">    lr_log_message(lr_eval_string(&quot;&#123;result&#125;&quot;));  </span><br><span class="line">  </span><br><span class="line">    lr_end_transaction(&quot;checkPerson&quot;, LR_AUTO);  </span><br><span class="line">  </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h3 id="multipart-form-data-表单"><a href="#multipart-form-data-表单" class="headerlink" title="multipart/form-data 表单"></a>multipart/form-data 表单</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Action()  </span><br><span class="line">&#123;  </span><br><span class="line">    lr_start_transaction(&quot;checkPerson&quot;);  </span><br><span class="line">    &#x2F;* 注册获取返回参数，该方法可以配合打印返回数据，检测数据内容 *&#x2F;  </span><br><span class="line">    web_reg_save_param(&quot;Para&quot;,  </span><br><span class="line">                       &quot;LB&#x3D;&quot;,  </span><br><span class="line">                       &quot;RB&#x3D;&quot;,  </span><br><span class="line">                       LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 注册断言： Text&#x3D;断言内容 *&#x2F;  </span><br><span class="line">    &#x2F;* 该方法会判断后面的web请求方法的返回值 *&#x2F;  </span><br><span class="line">    web_reg_find(&quot;Text&#x3D;成功&quot;,  </span><br><span class="line">             LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 汉字进行UTF-8编码 *&#x2F;  </span><br><span class="line">    lr_convert_string_encoding(&quot;需要进行UTF-8加密的中文字符串&quot;,LR_ENC_SYSTEM_LOCALE,LR_ENC_UTF8,&quot;result&quot;);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 向后面的web请求函数增加请求头 *&#x2F;  </span><br><span class="line">    &#x2F;* 如果web请求方法中已经设置了相同的头，则优先使用web请求方法中的头，例如web请求方法中的EncType参数，对应请求投中的Content-Type。由于下面的方法已经设置了EncType参数，所以这里的设置并没有什么X用 *&#x2F;  </span><br><span class="line">    &#x2F;* 表单直接使用方法自带参数，键值对和json建议使用该方法 *&#x2F;  </span><br><span class="line">    &#x2F;&#x2F;web_add_header(&quot;Content-Type&quot;,  </span><br><span class="line">    &#x2F;&#x2F;         &quot;multipart&#x2F;form-data; boundary &#x3D; --------BORN3QKNRTS4; charset&#x3D;UTF-8&quot;);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 主要针对form表单和键值对两种格式的web请求 *&#x2F;  </span><br><span class="line">    web_submit_data(&quot;checkPerson&quot;,  </span><br><span class="line">        &quot;Action&#x3D;http:&#x2F;&#x2F;130.1.11.105:9080&#x2F;ibis&#x2F;faceService&#x2F;checkPerson&quot;,  </span><br><span class="line">        &quot;Method&#x3D;POST&quot;,  </span><br><span class="line">        &#x2F;* 该方法支持常见的两种请求数据格式 *&#x2F;  </span><br><span class="line">        &#x2F;* （1）&quot;EncType&#x3D;multipart&#x2F;form-data&quot;。form表单提交数据 *&#x2F;  </span><br><span class="line">        &#x2F;* （1）&quot;EncType&#x3D;&quot;。默认使用键值对提交数据 *&#x2F;  </span><br><span class="line">        &quot;EncType&#x3D;multipart&#x2F;form-data&quot;,  </span><br><span class="line">        &quot;TargetFrame&#x3D;&quot;,  </span><br><span class="line">        &quot;Referer&#x3D;&quot;,  </span><br><span class="line">        ITEMDATA,  </span><br><span class="line">        &quot;Name&#x3D;Name1&quot;, &quot;Value&#x3D;Value1&quot;, ENDITEM,  </span><br><span class="line">        &quot;Name&#x3D;Name2&quot;, &quot;Value&#x3D;Value2&quot;, ENDITEM,  </span><br><span class="line">        LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 打印相应结果 *&#x2F;  </span><br><span class="line">    &#x2F;* lr_eval_string(&quot;&#123;result&#125;&quot;) 使用loadrunner引用外部函数，只有这样才能取出上面web_reg_save_param方法的返回值 *&#x2F;  </span><br><span class="line">    lr_log_message(lr_eval_string(&quot;&#123;result&#125;&quot;));  </span><br><span class="line">  </span><br><span class="line">    lr_end_transaction(&quot;checkPerson&quot;, LR_AUTO);  </span><br><span class="line">  </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h3 id="application-json-Json串"><a href="#application-json-Json串" class="headerlink" title="application/json Json串"></a>application/json Json串</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">Action()  </span><br><span class="line">&#123;  </span><br><span class="line">    lr_start_transaction(&quot;checkPerson&quot;);  </span><br><span class="line">    &#x2F;* 注册获取返回参数，该方法可以配合打印返回数据，检测数据内容 *&#x2F;  </span><br><span class="line">    web_reg_save_param(&quot;Para&quot;,  </span><br><span class="line">                       &quot;LB&#x3D;&quot;,  </span><br><span class="line">                       &quot;RB&#x3D;&quot;,  </span><br><span class="line">                       LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 注册断言： Text&#x3D;断言内容 *&#x2F;  </span><br><span class="line">    &#x2F;* 该方法会判断后面的web请求方法的返回值 *&#x2F;  </span><br><span class="line">    &#x2F;&#x2F; web_reg_find(&quot;Text&#x3D;成功&quot;,  </span><br><span class="line">    &#x2F;&#x2F;       LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 汉字进行UTF-8编码 *&#x2F;  </span><br><span class="line">    lr_convert_string_encoding(&quot;需要进行UTF-8加密的中文字符串&quot;,LR_ENC_SYSTEM_LOCALE,LR_ENC_UTF8,&quot;result&quot;);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 向后面的web请求函数增加请求头 *&#x2F;  </span><br><span class="line">    &#x2F;* 如果web请求方法中已经设置了相同的头，则优先使用web请求方法中的头，例如web请求方法中的EncType参数，对应请求投中的Content-Type。由于下面的方法已经设置了EncType参数，所以这里的设置并没有什么X用 *&#x2F;  </span><br><span class="line">    &#x2F;* 表单直接使用方法自带参数，键值对和json建议使用该方法 *&#x2F;  </span><br><span class="line">    web_add_header(&quot;Content-Type&quot;,  </span><br><span class="line">               &quot;application&#x2F;json; charset&#x3D;UTF-8&quot;);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 主要针对form表单和键值对两种格式的web请求 *&#x2F;  </span><br><span class="line">  </span><br><span class="line">    web_custom_request(&quot;web_custom_request&quot;,  </span><br><span class="line">        &quot;URL&#x3D;http:&#x2F;&#x2F;www.baidu.com&quot;,  </span><br><span class="line">        &quot;Method&#x3D;POST&quot;,  </span><br><span class="line">        &quot;TargetFrame&#x3D;&quot;,  </span><br><span class="line">        &quot;Resource&#x3D;0&quot;,  </span><br><span class="line">        &quot;Referer&#x3D;&quot;,  </span><br><span class="line">        &quot;Mode&#x3D;HTTP&quot;,  </span><br><span class="line">        &#x2F;* json和键值对数据格式，建议使用web_add_header方法添加Content-Type头 *&#x2F;  </span><br><span class="line">        &#x2F;&#x2F;&quot;EncType&#x3D;application&#x2F;json&quot;,  </span><br><span class="line">        &quot;Body&#x3D;&#123;\&quot;Name1\&quot;:\&quot;Value1\&quot;,\&quot;Name2\&quot;:\&quot;Value2\&quot;&#125;&quot;,  </span><br><span class="line">        LAST);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;* 打印相应结果 *&#x2F;  </span><br><span class="line">    &#x2F;* lr_eval_string(&quot;&#123;result&#125;&quot;) 使用loadrunner引用外部函数，只有这样才能取出上面web_reg_save_param方法的返回值 *&#x2F;  </span><br><span class="line">    lr_log_message(lr_eval_string(&quot;&#123;result&#125;&quot;));  </span><br><span class="line">  </span><br><span class="line">    lr_end_transaction(&quot;checkPerson&quot;, LR_AUTO);  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> loadrunner </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】windows性能监控指标</title>
      <link href="2018/05/16/%E3%80%90%E8%BD%AC%E3%80%91windows%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87/"/>
      <url>2018/05/16/%E3%80%90%E8%BD%AC%E3%80%91windows%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87/</url>
      
        <content type="html"><![CDATA[<p>使用loadrunner进行性能测试，需要监控服务器，当IIS和sqlserver位于windows服务器时，就需要使用windows自带的性能监控工具进行性能数据收集，之后进行分析，以下为各指标详解：</p><a id="more"></a><h3 id="内存分析"><a href="#内存分析" class="headerlink" title="内存分析"></a>内存分析</h3><p>内存分析需要使用的计数器：Memory性能对象和Physical Disk性能对象的计数器。<br>内存分析的主要方法和步骤：</p><h4 id="查看Memory-gt-Available-Mbytes指标"><a href="#查看Memory-gt-Available-Mbytes指标" class="headerlink" title="查看Memory-&gt;Available Mbytes指标"></a>查看Memory-&gt;Available Mbytes指标</h4><h5 id="Available-Mbytes："><a href="#Available-Mbytes：" class="headerlink" title="Available Mbytes："></a>Available Mbytes：</h5><p>描述：<br>Available MBytes 指能立刻分配给一个进程或系统使用的物理内存数量，以 MB 为单位表示。它等于分配给待机(缓存的)、空闲和零分页列表内存的总和。<br>建议指标：<br>该值不宜低于<strong>400</strong>。一般要保留10%的可用内存，假设系统有8G内存，则该值最好不要低于800M<br>说明：<br>过高说明内存资源即将耗尽，应考虑增加内存<br>如果该指标的数据比较小，系统可能出现了内存方面的问题，需要继续下面步骤进一步分析</p><h4 id="注意Memory-gt-Pages-sec、Memory-gt-Page-Reads-sec和Memory-gt-Page-Fault-sec的值"><a href="#注意Memory-gt-Pages-sec、Memory-gt-Page-Reads-sec和Memory-gt-Page-Fault-sec的值" class="headerlink" title="注意Memory-&gt;Pages/sec、Memory-&gt;Page Reads/sec和Memory-&gt;Page Fault/sec的值"></a>注意Memory-&gt;Pages/sec、Memory-&gt;Page Reads/sec和Memory-&gt;Page Fault/sec的值</h4><p>操作系统会利用磁盘较好的方式提高系统可用内存量或者提高内存的使用效率。这三个指标直接反应了操作系统进行磁盘交换的频度 </p><h5 id="Pages-sec："><a href="#Pages-sec：" class="headerlink" title="Pages/sec："></a>Pages/sec：</h5><p>描述：<br>Pages/sec 是指为解决硬页错误从磁盘读取或写入磁盘的速度。这个计数器是可以显示导致系统范围延缓类型错误的主要指示器。它是 Memory\Pages Input/sec 和 Memory\Pages Output/sec 的总和。是用页数计算的，以便在不用做转换的情况下就可以同其他页计数如: Memory\Page Faults/sec 做比较，这个值包括为满足错误而在文件系统缓存(通常由应用程序请求)的非缓存映射内存文件中检索的页<br>建议指标：<br>该值不宜超过**20 **<br>说明：<br>此值持续高于几百，说明内存中有很多东西需要与硬盘交换，可能有内存问题，应考虑增加内存或更换内存 </p><h5 id="Page-Fault-sec："><a href="#Page-Fault-sec：" class="headerlink" title="Page Fault/sec："></a>Page Fault/sec：</h5><p>说明：<br>每秒发生页面失效次数，页面失效次数越多，说明操作系统向内存读取的次数越多。此时需要查看Page Reads/sec的计数值，该计数器的阀值为<strong>5</strong>，如果计数值超过5，则可以判断存在内存方面的问题。</p><p>根据Physical Disk性能对象的计数器值分析性能瓶颈<br>对Physical Disk计数器对象的分析包括对Page Reads/sec和%Disk Time及Average Disk Queue Length的分析。如果Page Reads/sec很低，同时%Disk Time和Average Disk Queue Length的值很高，则可能有磁盘瓶颈。但是队列长度增加的同时Page Reads/sec并未降低，则是内存不足</p><h4 id="内存计数器阀值"><a href="#内存计数器阀值" class="headerlink" title="内存计数器阀值"></a>内存计数器阀值</h4><h5 id="Memory-gt-Available-Bytes"><a href="#Memory-gt-Available-Bytes" class="headerlink" title="Memory-&gt;Available Bytes"></a>Memory-&gt;Available Bytes</h5><p>建议的阀值：<br>对于具有较大内存的计算机&gt;=10%可用空间<br>对于较小内存也需要大于4MB空间可用<br>说明：<br>Available Bytes剩余的可用物理内存，单位是兆字节，表明进程当前可使用的内存字节数</p><h5 id="Memory-gt-Pages-sec"><a href="#Memory-gt-Pages-sec" class="headerlink" title="Memory-&gt;Pages/sec"></a>Memory-&gt;Pages/sec</h5><p>建议的阀值：<br>Pages/sec&lt;=**20**<br>说明：<br>操作系统经常会利用磁盘交换的方式提高系统的可用的内存量或是提高内存的使用效率。<br>Pages/sec是指为解决硬页错误从磁盘读取或写入磁盘的速度。这个计数器是可以显示导致系统范围延缓类型错误的主要计数器。它是Memory-&gt;Pages Input/sec和Pages Output/sec的总和。是用页数计算的，以便在不同做转换的情况下就可以同其他页计数，如：Memory-&gt;Pages Fault/sec做比较，这个值包括为错误而在文件系统缓存（通常由应用程序请求）的非缓存映射内存文件中检索的页。如果Pages/sec的值为20或更大，应进一步研究页交换活动。Pages/sec的值很大不一定表明内存有问题，而可能是运行使用内存映射文件的程序所致</p><h5 id="Memory-gt-Page-Faults-sec"><a href="#Memory-gt-Page-Faults-sec" class="headerlink" title="Memory-&gt;Page Faults/sec"></a>Memory-&gt;Page Faults/sec</h5><p>建议的阀值：<br><strong>5</strong><br>说明： </p><h5 id="Page-Fault-sec"><a href="#Page-Fault-sec" class="headerlink" title="Page Fault/sec"></a>Page Fault/sec</h5><p>Page Fault/sec值在这个进程中执行线程造成的页面错误出现的速度。当线程引用了不在主内存工作集中的虚拟内存页即会出现Page Fault。如果它在备用表中（即已经在主内存中）或另一个共享页的处理正在使用它，就会无法从磁盘中获取页</p><h5 id="Paging-File-gt-Usage"><a href="#Paging-File-gt-Usage" class="headerlink" title="Paging File-&gt;%Usage"></a>Paging File-&gt;%Usage</h5><p>建议的阀值：<br>70%以上<br>说明：<br>与Available Bytes和Pages/sec一起复查该值，了解计算机的页交换活动</p><h3 id="CPU监控"><a href="#CPU监控" class="headerlink" title="CPU监控"></a>CPU监控</h3><p>首先看<code>System-&gt;%Total Processor Time</code>性能计数器的计数值<br>该计数器的值体现服务器整体处理器利用率，对多处理器的系统而言，该计数器提醒所有CPU的平均利用率。如果该值持续超过**90%**，则说明整个系统面临着处理器方面的瓶颈，需要通过增加处理器来提高性能 </p><h5 id="Total-Processor-Time："><a href="#Total-Processor-Time：" class="headerlink" title="%Total Processor Time："></a>%Total Processor Time：</h5><p>描述：<br><strong>% Processor Time</strong> 指处理器用来执行非闲置线程时间的百分比。计算方法是，度量处理器用来执行空闲线程的时间，然后用 100% 减去该值。(每个处理器有一个空闲线程，该线程在没有其他线程可以运行时消耗周期)。此计数器是处理器活动的主要指示器，显示在采样间隔期间所观察的繁忙时间平均百分比。应注意，对处理器是否空闲的计算是在系统时钟的内部采样间隔期间(10ms)执行的。考虑到现在的处理器速度非常快，因此，在处理器可能会用大量时间为系统时钟采样间隔之间的线程提供服务时，% Processor Time 会低估处理器利用率。当恰好进行采样后即向计时器发出信号时，更可能对应用程序做出不准确地度量，基于工作负荷的计时器应用程序是一个这样的示例。<br>建议指标：<br>该监控内容不宜超过<strong>80%</strong><br>说明：<br>过高说明CPU资源即将耗尽，应增加CPU资源或实施分布式策略</p><p>查看每个CPU的Processor-&gt;%Processor Time和Processor-&gt;%User<br>Time和Processor-&gt;%Privileged Time<br>Processor-&gt;%User Time是系统非核心操作消耗的CPU时间，如果该值较大，可以考虑是否能够通过友好算法等方法降低这个值。如果该服务器时数据库服务器，Processor-&gt;%User Time值较大的原因很可能是数据库的排序或是函数操作消耗了过多的CPU时间，此时可以考虑对数据库系统进行优化</p><p>研究系统处理器瓶颈<br>查看<code>System-&gt;Processor Queue Length</code>计数器的值，当该计数器的值大于<strong>CPU数量的总数+1</strong>时，说明产生了处理器阻塞。在处理器的%Process Time很高时，一般都是处理器阻塞，但产生处理器阻塞时，<strong>Processor-&gt;%Process Time计数器的值不一定很大，此时就必须查找阻塞的原因</strong></p><h4 id="CPU计数器阀值"><a href="#CPU计数器阀值" class="headerlink" title="CPU计数器阀值"></a>CPU计数器阀值</h4><h5 id="Processor-gt-Processor-Time"><a href="#Processor-gt-Processor-Time" class="headerlink" title="Processor-&gt;%Processor Time"></a>Processor-&gt;%Processor Time</h5><p>建议的阀值：<br><strong>85%</strong><br>说明：<br>查找占用处理器时间高百分比的进程。升级到更快的处理器或安装其他处理器</p><p>Processor-&gt;Interrupts/sec<br>建议的阀值：<br>取决于处理器，每秒1000次中断是好的起点<br>说明：<br>此计数器的值是明显增加，而系统活动没有相应的增加则表明存在硬件问题。确定引起中断的网络适配器、磁盘或者其他硬件</p><h5 id="Server-gt-Bytes-Total-sec"><a href="#Server-gt-Bytes-Total-sec" class="headerlink" title="Server-&gt;Bytes Total/sec"></a>Server-&gt;Bytes Total/sec</h5><p>建议的阀值：<br>/<br>说明：<br>如果所有的服务器Bytes Total/sec和与网络的最大传送速度几乎相等，则可能需要将网络分段</p><h5 id="Server-gt-Work-Item-Shortages"><a href="#Server-gt-Work-Item-Shortages" class="headerlink" title="Server-&gt;Work Item Shortages"></a>Server-&gt;Work Item Shortages</h5><p>建议的阀值：<br><strong>3</strong><br>说明：<br>如果值达到该阀值，请考虑将DWORD项InitWorkItems（在启动期间分配给处理器的工作项数）或者MaxWorkItems（服务器可以分配的接收缓冲区的最大数）添加到注册表（在HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters 下面）。项InitWorkItems的范围可以是从1到512，同时MaxWorkItems的范围可以是从1到65535。以InitWorkItems的任何值以及MaxWorkItems的值4096开始，并一直加倍这些值，直到Server-&gt;Work Item Shortages阀值低于3</p><h5 id="Server-gt-Pool-Paged-Peak"><a href="#Server-gt-Pool-Paged-Peak" class="headerlink" title="Server-&gt;Pool Paged Peak"></a>Server-&gt;Pool Paged Peak</h5><p>建议的阀值：<br>物理RAM的数量<br>说明：<br>此值是最大页面文件大小和物理内存数量的指示器</p><h5 id="Server-Work-Queue-gt-Queue-Length"><a href="#Server-Work-Queue-gt-Queue-Length" class="headerlink" title="Server Work Queue-&gt;Queue Length"></a>Server Work Queue-&gt;Queue Length</h5><p>建议的阀值：<br><strong>4</strong><br>说明：<br>如果值达到此阀值，则可能存在处理器瓶颈。这是即时计数器；观察在多个间隔上的值</p><h3 id="磁盘监控"><a href="#磁盘监控" class="headerlink" title="磁盘监控"></a>磁盘监控</h3><p>与Processor-&gt;Privieged Time合并进行分析<br>如果在<code>Physical Disk</code>计数器中，只有<code>%Disk Time</code>比较大，其他值都比较适中，硬盘可能会是瓶颈。若几个值都比较大，且数值持续超过<strong>80%**，则可能是</strong>内存泄露**</p><h5 id="PhysicalDisk-Total-Disk-Time："><a href="#PhysicalDisk-Total-Disk-Time：" class="headerlink" title="\PhysicalDisk(_Total)% Disk Time："></a>\PhysicalDisk(_Total)% Disk Time：</h5><p>描述：<br>Disk Time 指所选磁盘驱动器忙于为读或写入请求提供服务所用的时间的百分比。<br>建议指标：<br>此值不宜超过<strong>10</strong><br>说明：<br>此值过高，说明硬盘响应效率较低，应换用更高性能的硬盘</p><p>根据<strong>Disk Transfers/sec</strong>进行分析<br>一般来说，定义该数值小于15ms为优秀，介于15<del>30ms之间为良好，30</del>60之间为可接受，超过<strong>60ms</strong>则需要考虑更换或是硬盘的RAID方式</p><p>磁盘计数器阀值</p><h5 id="Physical-Disk-gt-Free-Space和Logical-Disk-gt-Free-Space"><a href="#Physical-Disk-gt-Free-Space和Logical-Disk-gt-Free-Space" class="headerlink" title="Physical Disk-&gt;%Free Space和Logical Disk-&gt;%Free Space"></a>Physical Disk-&gt;%Free Space和Logical Disk-&gt;%Free Space</h5><p>建议的阀值：<br><strong>15%</strong></p><h5 id="Physical-Disk-gt-Disk-Time和Logical-Disk-gt-Disk-Time"><a href="#Physical-Disk-gt-Disk-Time和Logical-Disk-gt-Disk-Time" class="headerlink" title="Physical Disk-&gt;%Disk Time和Logical Disk-&gt;%Disk Time"></a>Physical Disk-&gt;%Disk Time和Logical Disk-&gt;%Disk Time</h5><p>建议的阀值：<br><strong>90%</strong></p><h5 id="Physical-Disk-gt-Disk-Reads-sec和Physical-Disk-gt-Disk-Writes-sec"><a href="#Physical-Disk-gt-Disk-Reads-sec和Physical-Disk-gt-Disk-Writes-sec" class="headerlink" title="Physical Disk-&gt;Disk Reads/sec和Physical Disk-&gt;Disk Writes/sec"></a>Physical Disk-&gt;Disk Reads/sec和Physical Disk-&gt;Disk Writes/sec</h5><p>建议的阀值：<br>取决于制造商的规格<br>说明：<br>检查磁盘的指定传送速度，以验证此速度没有超过规格。通常，Ultra Wide<br>SCSI磁盘每秒可以处理50到70次I/O操作。注意，无论I/O是顺序的还是随机的，都会对磁盘的每秒读写速率产生很大的影响</p><h5 id="Physical-Disk-gt-Current-Disk-Queue-Length"><a href="#Physical-Disk-gt-Current-Disk-Queue-Length" class="headerlink" title="Physical Disk-&gt;Current Disk Queue Length"></a>Physical Disk-&gt;Current Disk Queue Length</h5><p>建议的阀值：<br><strong>主轴数+2</strong><br>说明：<br>这是即时计数器，观察在多个间隔上的值。对于随时间变化的平均值，可试用Physicial Disk-&gt;Avg.Disk Queue Length</p><h2 id="进程分析方法"><a href="#进程分析方法" class="headerlink" title="进程分析方法"></a>进程分析方法</h2><h3 id="查看进程的Process-gt-Processor-Time值"><a href="#查看进程的Process-gt-Processor-Time值" class="headerlink" title="查看进程的Process-&gt;%Processor Time值"></a>查看进程的Process-&gt;%Processor Time值</h3><p>每个进程的%Processor Time反映进程所消耗的处理器时间。用不同进程所消耗的处理器时间进行对比，可以看出具体哪个进程在性能测试过程中消耗了最多的处理器时间，从而可以据此对应用进行优化</p><h3 id="查看每个进程产生的页面失效、"><a href="#查看每个进程产生的页面失效、" class="headerlink" title="查看每个进程产生的页面失效、"></a>查看每个进程产生的页面失效、</h3><p>可以用每个进程产生的页面失效（通过Process-&gt;Page Faults/sec计数器获得）和系统页面失效（通过Memory-&gt;Page Faults/sec计数器获得）的比值，来判断哪个进程产生了最多的页面失效，这个进程要么是需要大量内存的进程，要么是非常活跃的进程，可以对其进行重点分析</p><h3 id="了解进程的Process-gt-Private-Bytes"><a href="#了解进程的Process-gt-Private-Bytes" class="headerlink" title="了解进程的Process-&gt;Private Bytes"></a>了解进程的Process-&gt;Private Bytes</h3><p>Process-&gt;Private Bytes是指进程所分配的无法与其进程共享的当前字节数量。该计数器主要用来判断在性能测试过程中有无内存泄露。例如：对于一个IIS之上的Web应用，可以重点监控inetinfo进程的Private Bytes。如果在性能测试过程中，该进程的Private Bytes计数器值不断增加，或是性能测试停止一段时间，该进程的Private Bytes仍持续在高水平，则说明应用存在内存泄露</p><h2 id="网络分析方法"><a href="#网络分析方法" class="headerlink" title="网络分析方法"></a>网络分析方法</h2><h3 id="Network-Interface-gt-Bytes-Total-sec"><a href="#Network-Interface-gt-Bytes-Total-sec" class="headerlink" title="Network Interface-&gt;Bytes Total/sec"></a>Network Interface-&gt;Bytes Total/sec</h3><p>发送和接收字节的速率，可以通过该计数器值来判断网络链接速度是否是瓶颈，具体操作方法是用该计数器的值和当前网络的带宽进行比较</p><h3 id="与Processor-gt-Privileged-Time合并进行分析"><a href="#与Processor-gt-Privileged-Time合并进行分析" class="headerlink" title="与Processor-&gt;Privileged Time合并进行分析"></a>与Processor-&gt;Privileged Time合并进行分析</h3><p>如果在Physical Disk计数器中，只有%Disk Time比较大，其他值都比较适中，硬盘可能会是瓶颈。若几个值都比较大，且数值持续超过80%，则可能是内存泄露。</p><h2 id="ASP-NET监控"><a href="#ASP-NET监控" class="headerlink" title="ASP.NET监控"></a>ASP.NET监控</h2><h3 id="Request-Wait-Time"><a href="#Request-Wait-Time" class="headerlink" title="Request Wait Time"></a>Request Wait Time</h3><p>地址：<br>\ASP.NET\Request Wait Time<br>描述：<br>最近的请求在队列中等待的毫秒数。<br>建议指标：<br>此值不宜超过<strong>10000</strong><br>说明：<br>此值过高说明IIS已经无法承受更多的请求，应考虑实施分布式策略</p><blockquote><p><a href="https://blog.csdn.net/lluozh2015/article/details/50755480">原文地址</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7搭建zabbix</title>
      <link href="2018/05/11/centos7%E6%90%AD%E5%BB%BAzabbix/"/>
      <url>2018/05/11/centos7%E6%90%AD%E5%BB%BAzabbix/</url>
      
        <content type="html"><![CDATA[<p>centos7搭建zabbix3.4</p><a id="more"></a><p>zabbix安装环境要求：</p><blockquote><p><a href="https://www.zabbix.com/documentation/3.4/zh/manual/installation/requirements">zabbix安装要求</a></p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="前置操作"><a href="#前置操作" class="headerlink" title="前置操作"></a>前置操作</h3><p>关闭selinux</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &quot;s&#x2F;SELINUX&#x3D;enforcing&#x2F;SELINUX&#x3D;disabled&#x2F;g&quot; &#x2F;etc&#x2F;selinux&#x2F;config</span><br></pre></td></tr></table></figure><p>升级yum</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y update</span><br></pre></td></tr></table></figure><h3 id="切换iptables防火墙"><a href="#切换iptables防火墙" class="headerlink" title="切换iptables防火墙"></a>切换iptables防火墙</h3><p>查看防火墙状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd    --state</span><br></pre></td></tr></table></figure><p>关闭防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl  stop   firewalld.service</span><br></pre></td></tr></table></figure><p>禁止开机启动启动防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl   disable   firewalld.service</span><br></pre></td></tr></table></figure><p><strong>iptables设置</strong><br>安装iptables服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install  iptables-services</span><br></pre></td></tr></table></figure><p>开启iptables防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl  start  iptables.service</span><br></pre></td></tr></table></figure><p>开启特定端口：<br>编辑文件：/etc/sysconfig/iptables，加入想要开放的端口即可，例如开放10051端口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -p tcp -m tcp --dport 8090 -j ACCEPT</span><br></pre></td></tr></table></figure><p>保存退出，重启防火墙：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl  restart  iptables.service</span><br></pre></td></tr></table></figure><h3 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h3><p>下载源包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>安装mysql源:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall mysql57-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>检查是否安装成功：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist enabled | grep &quot;mysql.*-community.*&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql-connectors-community&#x2F;x86_64 MySQL Connectors Community                  51</span><br><span class="line">mysql-tools-community&#x2F;x86_64      MySQL Tools Community                       63</span><br><span class="line">mysql57-community&#x2F;x86_64          MySQL 5.7 Community Server                 267</span><br></pre></td></tr></table></figure><p>可以修改源配置，安装你喜欢的版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;yum.repos.d&#x2F;mysql-community.repo</span><br></pre></td></tr></table></figure><p>只需要把对应的enable改成1即可。<br><strong>安装</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure><p>启动服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br><span class="line">systemctl status mysqld#查看状态</span><br></pre></td></tr></table></figure><p>配置开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h4 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a>修改root密码</h4><p>查看默认密码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log</span><br></pre></td></tr></table></figure><p>修改密码很简单，mysql -uroot -p进入控制台，修改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;yourpwd&#39;;</span><br></pre></td></tr></table></figure><p>修改权限：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;pwd&#39; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure><p>配置防火墙，开放3306端口，即可在windows使用工具连接数据库。</p><h3 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install httpd</span><br><span class="line">systemctl start httpd.service #启动</span><br><span class="line">systemctl enable httpd.service #开机启动</span><br></pre></td></tr></table></figure><h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install php</span><br></pre></td></tr></table></figure><h4 id="安装php扩展"><a href="#安装php扩展" class="headerlink" title="安装php扩展"></a>安装php扩展</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install php-mysqlnd php-gd libjpeg* php-snmp php-ldap php-odbc php-pear php-xml php-xmlrpc php-mbstring php-bcmath php-mhash php-common php-ctype php-xml php-xmlreader php-xmlwriter php-session php-mbstring php-gettext php-ldap php-mysqli --skip-broken</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install wget telnet net-tools python-paramiko gcc gcc-c++ dejavu-sans-fonts python-setuptools python-devel sendmail mailx net-snmp net-snmp-devel net-snmp-utils freetype-devel libpng-devel perl unbound libtasn1-devel p11-kit-devel OpenIPMI unixODBC</span><br></pre></td></tr></table></figure><h3 id="修改一些配置"><a href="#修改一些配置" class="headerlink" title="修改一些配置"></a>修改一些配置</h3><h4 id="设置MySQL参数"><a href="#设置MySQL参数" class="headerlink" title="设置MySQL参数"></a>设置MySQL参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;my.cnf</span><br></pre></td></tr></table></figure><p>在文件最后添加以下内容（8G内存为例，根据自己配置适当修改）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">innodb_file_per_table &#x3D; 1</span><br><span class="line">innodb_status_file &#x3D; 1</span><br><span class="line">innodb_buffer_pool_size &#x3D; 6G</span><br><span class="line">innodb_flush_log_at_trx_commit &#x3D; 2</span><br><span class="line">innodb_log_buffer_size &#x3D; 16M</span><br><span class="line">innodb_log_file_size &#x3D; 64M</span><br><span class="line">innodb_support_xa &#x3D; 0</span><br><span class="line">default-storage-engine &#x3D; innodb</span><br><span class="line">bulk_insert_buffer_size &#x3D; 8M</span><br><span class="line">join_buffer_size &#x3D; 16M</span><br><span class="line">max_heap_table_size &#x3D; 32M</span><br><span class="line">tmp_table_size &#x3D; 32M</span><br><span class="line">max_tmp_tables &#x3D; 48</span><br><span class="line">read_buffer_size &#x3D; 32M</span><br><span class="line">read_rnd_buffer_size &#x3D; 16M</span><br><span class="line">key_buffer_size &#x3D; 32M</span><br><span class="line">thread_cache_size &#x3D; 32</span><br><span class="line">innodb_thread_concurrency &#x3D; 8</span><br><span class="line">innodb_flush_method &#x3D; O_DIRECT</span><br><span class="line">innodb_rollback_on_timeout &#x3D; 1</span><br><span class="line">query_cache_size &#x3D; 16M</span><br><span class="line">query_cache_limit &#x3D; 16M</span><br><span class="line">collation_server &#x3D; utf8_bin</span><br><span class="line">character_set_server &#x3D; utf8</span><br></pre></td></tr></table></figure><p>注：原则上 innodb_buffer_pool_size 需要设置为主机内存的 80%，如果主机内存不是 8GB，以上参数可依据相应比例进行调整，例如主机内存为 16GB，则 innodb_buffer_pool_size 建议设置为 12GB，innodb_log_buffer_size 建议设置为 32M，innodb_log_file_size 建议设置为 128M，以此类推。请注意innodb_buffer_pool_size的值必须是整数，例如主机内存是4G，那么innodb_buffer_pool_size可以设置为3G，而不能设置为3.2G</p><p>重启MySQL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><h4 id="创建zabbix数据库用户"><a href="#创建zabbix数据库用户" class="headerlink" title="创建zabbix数据库用户"></a>创建zabbix数据库用户</h4><p>进入mysql控制台</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create database zabbix character set utf8;</span><br><span class="line">create user zabbix@&#39;%&#39; identified by &#39;yourpwd&#39;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;zabbix&#39;@&#39;%&#39; IDENTIFIED BY &#39;yourpwd&#39; WITH GRANT OPTION;</span><br><span class="line">flush privileges;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><h3 id="安装zabbix源"><a href="#安装zabbix源" class="headerlink" title="安装zabbix源"></a>安装zabbix源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh http:&#x2F;&#x2F;repo.zabbix.com&#x2F;zabbix&#x2F;3.4&#x2F;rhel&#x2F;7&#x2F;x86_64&#x2F;zabbix-release-3.4-2.el7.noarch.rpm</span><br></pre></td></tr></table></figure><h3 id="安装zabbix"><a href="#安装zabbix" class="headerlink" title="安装zabbix"></a>安装zabbix</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install zabbix-server-mysql zabbix-web-mysql zabbix-java-gateway zabbix-web</span><br></pre></td></tr></table></figure><h3 id="配置zabbix"><a href="#配置zabbix" class="headerlink" title="配置zabbix"></a>配置zabbix</h3><h4 id="导入zabbix所需信息"><a href="#导入zabbix所需信息" class="headerlink" title="导入zabbix所需信息"></a>导入zabbix所需信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;share&#x2F;doc&#x2F;zabbix-server-mysql-3.4.3</span><br><span class="line">zcat create.sql.gz | mysql -uroot zabbix -p</span><br></pre></td></tr></table></figure><h4 id="配置zabbix参数"><a href="#配置zabbix参数" class="headerlink" title="配置zabbix参数"></a>配置zabbix参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;zabbix&#x2F;zabbix_server.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">DBPassword&#x3D;yourpwd</span><br><span class="line">(125行左右)</span><br><span class="line"></span><br><span class="line">CacheSize&#x3D;512M</span><br><span class="line">（在385行左右）</span><br><span class="line"></span><br><span class="line">HistoryCacheSize&#x3D;128M</span><br><span class="line">（在410行左右）</span><br><span class="line"></span><br><span class="line">HistoryIndexCacheSize&#x3D;128M</span><br><span class="line">（在419行左右）</span><br><span class="line"></span><br><span class="line">TrendCacheSize&#x3D;128M</span><br><span class="line">（在428行左右）</span><br><span class="line"></span><br><span class="line">ValueCacheSize&#x3D;256M</span><br><span class="line">（在438行左右）</span><br><span class="line"></span><br><span class="line">Timeout&#x3D;30</span><br><span class="line">（在448行左右）</span><br></pre></td></tr></table></figure><h4 id="配置Apache中的php参数"><a href="#配置Apache中的php参数" class="headerlink" title="配置Apache中的php参数"></a>配置Apache中的php参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;zabbix.conf</span><br><span class="line"></span><br><span class="line">php_value max_execution_time 600</span><br><span class="line">php_value memory_limit 256M</span><br><span class="line">php_value post_max_size 32M</span><br><span class="line">php_value upload_max_filesize 32M</span><br><span class="line">php_value max_input_time 600</span><br><span class="line">php_value always_populate_raw_post_data -1</span><br><span class="line">date.timezone 去掉注释符号#，并将值修改为 Asia&#x2F;Shanghai</span><br></pre></td></tr></table></figure><h3 id="启动zabbix"><a href="#启动zabbix" class="headerlink" title="启动zabbix"></a>启动zabbix</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart httpd &amp;&amp; systemctl restart zabbix-server</span><br></pre></td></tr></table></figure><p>在浏览器中输入<code>http://your_IP/zabbix</code>，进入zabbix页面进行初始化配置，单击两次<code>next step</code>，填写正确数据库信息，继续<code>next step</code>，填写zabbix detail（相当于起名字），端口不变！！！然后<code>finish</code>，完成安装。</p><h3 id="设置中文"><a href="#设置中文" class="headerlink" title="设置中文"></a>设置中文</h3><p>第一次登录zabbix监控系统，默认用户为<code>admin</code>，默认密码<code>zabbix</code>，正确登录系统。<br>选择<code>Administrator –&gt; Users –&gt; Admin</code>，在<code>Language</code>栏选择<code>Chinese(zh_CN)</code>完成汉化。</p><p>OVER!</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p><a href="https://www.centos.bz/2017/11/centos-7%E5%AE%89%E8%A3%85zabbix-3-4/">centos7安装zabbix3.4</a></p></blockquote><blockquote><p><a href="https://www.zabbix.com/documentation/4.0/zh/manual/installation/install_from_packages/rhel_centos">官网教程</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> zabbix3.4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos部署.net core</title>
      <link href="2018/05/10/centos%E9%83%A8%E7%BD%B2-net-core/"/>
      <url>2018/05/10/centos%E9%83%A8%E7%BD%B2-net-core/</url>
      
        <content type="html"><![CDATA[<p>Centos7部署.net core应用</p><a id="more"></a><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="dotnet产品提要"><a href="#dotnet产品提要" class="headerlink" title="dotnet产品提要"></a>dotnet产品提要</h4><p>首先需要注册Microsoft签名密钥并添加Microsoft产品提要，才能安装.net</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https:&#x2F;&#x2F;packages.microsoft.com&#x2F;keys&#x2F;microsoft.asc</span><br><span class="line">sh -c &#39;echo -e &quot;[packages-microsoft-com-prod]\nname&#x3D;packages-microsoft-com-prod \nbaseurl&#x3D; https:&#x2F;&#x2F;packages.microsoft.com&#x2F;yumrepos&#x2F;microsoft-rhel7.3-prod\nenabled&#x3D;1\ngpgcheck&#x3D;1\ngpgkey&#x3D;https:&#x2F;&#x2F;packages.microsoft.com&#x2F;keys&#x2F;microsoft.asc&quot; &gt; &#x2F;etc&#x2F;yum.repos.d&#x2F;dotnetdev.repo&#39;</span><br></pre></td></tr></table></figure><p>默认使用<code>root</code>用户操作</p><h4 id="安装-NET-SDK"><a href="#安装-NET-SDK" class="headerlink" title="安装.NET SDK"></a>安装.NET SDK</h4><p>首先更新yum</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><p>安装所需组件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install libunwind libicu</span><br></pre></td></tr></table></figure><p>安装.NET SDK</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dotnet-sdk-2.1.200</span><br></pre></td></tr></table></figure><p>完成安装，<code>dotnet --version</code>验证安装</p><h3 id="部署应用"><a href="#部署应用" class="headerlink" title="部署应用"></a>部署应用</h3><p>将你的.net core应用随意放置在某个目录，进入目录，执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet YourApp.WebApi.dll</span><br></pre></td></tr></table></figure><p>即可启动服务，默认启动端口为5000.</p><h4 id="nginx代理"><a href="#nginx代理" class="headerlink" title="nginx代理"></a>nginx代理</h4><h5 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h5><p>安装nginx需要添加EPEL仓库，然后再安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><h5 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h5><p>启动：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><h5 id="设置nginx开机启动"><a href="#设置nginx开机启动" class="headerlink" title="设置nginx开机启动"></a>设置nginx开机启动</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure><h5 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h5><p>将nginx的默认配置文件中的80端口内容注释掉，文件路径：<code>/etc/nginx/nginx.conf</code>,然后在nginx的配置加载目录下创建你需要代理的端口配置文件<code>yourapp.conf</code>，路径：<code>/etc/nginx/conf.d</code>，文件内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;localhost:5000;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection keep-alive;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_cache_bypass $http_upgrade;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启nginx即可通过80端口访问部署的.net core服务。</p><h3 id="配置守护进程"><a href="#配置守护进程" class="headerlink" title="配置守护进程"></a>配置守护进程</h3><p>由于.net core程序在linux上运行，一般都是需要在shell里运行，执行命令：<code>dotnet app.dll</code>，一旦窗口关闭了，程序就被杀了，所以需要配置个守护进程，微软推荐：<code>Supervisor</code></p><h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><p>安装很简单，一条命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install supervisor</span><br></pre></td></tr></table></figure><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>修改默认配置文件：<code>supervisord.conf</code>，找到最后：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[include]</span><br><span class="line">files &#x3D; supervisord.d&#x2F;*.ini</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[include]</span><br><span class="line">files &#x3D; supervisord.d&#x2F;*.conf</span><br></pre></td></tr></table></figure><p>进入<code>supervisord.d</code>文件夹，创建APP的配置文件<code>YourAPP.conf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd supervisord.d</span><br><span class="line">vim YourAPP.conf</span><br></pre></td></tr></table></figure><p>内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[program:HelloWebApp]</span><br><span class="line">command&#x3D;dotnet YourAPP.dll  #要执行的命令</span><br><span class="line">directory&#x3D;&#x2F;usr&#x2F;local&#x2F;YourAPP #命令执行的目录</span><br><span class="line">environment&#x3D;ASPNETCORE__ENVIRONMENT&#x3D;Production #环境变量</span><br><span class="line">user&#x3D;root  #进程执行的用户身份</span><br><span class="line">stopsignal&#x3D;INT</span><br><span class="line">autostart&#x3D;true #是否自动启动</span><br><span class="line">autorestart&#x3D;true #是否自动重启</span><br><span class="line">startsecs&#x3D;1 #自动重启间隔</span><br><span class="line">stderr_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;HelloWebApp.err.log #标准错误日志</span><br><span class="line">stdout_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;HelloWebApp.out.log #标准输出日志</span><br></pre></td></tr></table></figure><p>保存退出</p><p>运行supervisord</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">supervisord -c &#x2F;etc&#x2F;supervisord.conf</span><br><span class="line">ps -ef | grep APPName</span><br></pre></td></tr></table></figure><p>常用命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">supervisorctl shutdown #关闭所有任务</span><br><span class="line"></span><br><span class="line">supervisorctl stop|start program_name</span><br><span class="line"></span><br><span class="line">supervisorctl status #查看所有任务状态</span><br></pre></td></tr></table></figure><h4 id="加自启动"><a href="#加自启动" class="headerlink" title="加自启动"></a>加自启动</h4><p>文件路径：<code>/usr/lib/systemd/system/supervisord.service</code>，安装时候已经存在，如果没有，就自己创建一个：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Supervisor daemon</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type&#x3D;forking</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;supervisord -c &#x2F;etc&#x2F;supervisord.conf</span><br><span class="line">ExecStop&#x3D;&#x2F;usr&#x2F;bin&#x2F;supervisorctl shutdown</span><br><span class="line">ExecReload&#x3D;&#x2F;usr&#x2F;bin&#x2F;supervisorctl reload</span><br><span class="line">KillMode&#x3D;process</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line">RestartSec&#x3D;42s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br></pre></td></tr></table></figure><p>加载启动项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable supervisord</span><br><span class="line">验证</span><br><span class="line">systemctl is-enabled supervisord</span><br></pre></td></tr></table></figure><h3 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h3><p>由于安装在linux上，不同于windows，出现了一个现象，页面进行请求之后，消息队列中的消息一直无法被消费，查看日志，显示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The handler does not support custom handling of certificates with this combination of libcurl (7.29.0) and its SSL backend (&quot;NSS&#x2F;3.28.4&quot;).) ---&gt; System.PlatformNotSupportedException: The handler does not support custom handling of certificates with this combination of libcurl (7.29.0) and its SSL backend (&quot;NSS&#x2F;3.28.4&quot;).</span><br><span class="line">at System.Net.Http.CurlHandler.SslProvider.SetSslOptionsForUnsupportedBackend(EasyRequest easy, ClientCertificateProvider certProvider)</span><br><span class="line">at System.Net.Http.CurlHandler.SslProvider.SetSslOptions(EasyRequest easy, ClientCertificateOption clientCertOption</span><br></pre></td></tr></table></figure><p>原因就是linux不支持ssl（貌似是这样），搜了一堆答案，大部分是建议升级<code>curl</code></p><h4 id="解决linux-netcore-https请求使用自签名证书忽略安全检查方法"><a href="#解决linux-netcore-https请求使用自签名证书忽略安全检查方法" class="headerlink" title="解决linux netcore https请求使用自签名证书忽略安全检查方法"></a>解决linux netcore https请求使用自签名证书忽略安全检查方法</h4><p>开始：<br>首先安装openssl和gcc</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openssl-devel gcc</span><br></pre></td></tr></table></figure><p>然后是最新版本的curl：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;curl.haxx.se&#x2F;download&#x2F;curl-7.59.0.tar.gz</span><br><span class="line">tar -zxf curl-7.59.0.tar.gz</span><br><span class="line">cd curl-7.59.0</span><br><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;curl&#x2F; --without-nss --with-ssl&#x3D;&#x2F;usr&#x2F;local&#x2F;ssl&#x2F;</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>备份原来的curl：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;usr&#x2F;bin&#x2F;curl &#x2F;usr&#x2F;bin&#x2F;curl.bak</span><br></pre></td></tr></table></figure><p>新安装的curl创建软链接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;curl&#x2F;bin&#x2F;curl &#x2F;usr&#x2F;bin&#x2F;curl</span><br></pre></td></tr></table></figure><p>查看此时curl版本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --version</span><br></pre></td></tr></table></figure><p>编辑搜索目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;ld.so.conf</span><br></pre></td></tr></table></figure><p>增加一行：<code>/usr/local/curl/lib</code></p><p>重启服务，完成！</p><h3 id="Supervisor详细配置文件"><a href="#Supervisor详细配置文件" class="headerlink" title="Supervisor详细配置文件"></a>Supervisor详细配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">; Sample supervisor config file.</span><br><span class="line">;</span><br><span class="line">; For more information on the config file, please see:</span><br><span class="line">; http:&#x2F;&#x2F;supervisord.org&#x2F;configuration.html</span><br><span class="line">;</span><br><span class="line">; Notes:</span><br><span class="line">;  - Shell expansion (&quot;~&quot; or &quot;$HOME&quot;) is not supported.  Environment</span><br><span class="line">;    variables can be expanded using this syntax: &quot;%(ENV_HOME)s&quot;.</span><br><span class="line">;  - Quotes around values are not supported, except in the case of</span><br><span class="line">;    the environment&#x3D; options as shown below.</span><br><span class="line">;  - Comments must have a leading space: &quot;a&#x3D;b ;comment&quot; not &quot;a&#x3D;b;comment&quot;.</span><br><span class="line">;  - Command will be truncated if it looks like a config file comment, e.g.</span><br><span class="line">;    &quot;command&#x3D;bash -c &#39;foo ; bar&#39;&quot; will truncate to &quot;command&#x3D;bash -c &#39;foo &quot;.</span><br><span class="line"></span><br><span class="line">[unix_http_server]</span><br><span class="line">file&#x3D;&#x2F;tmp&#x2F;supervisor.sock   ; socket 文件路径</span><br><span class="line">;chmod&#x3D;0700                 ; socket 文件 模式 (默认 0700)</span><br><span class="line">;chown&#x3D;nobody:nogroup       ; socket file uid:gid owner</span><br><span class="line">;username&#x3D;user              ; 使用supervisorctl连接的用户</span><br><span class="line">;password&#x3D;123               ; 上条用户的密码</span><br><span class="line"></span><br><span class="line">;[inet_http_server]         ; Web Server和远程的supervisorctl 配置块(默认关闭)</span><br><span class="line">;port&#x3D;127.0.0.1:9001        ; 监听的地址和端口</span><br><span class="line">;username&#x3D;user              ; 登录时用的用户</span><br><span class="line">;password&#x3D;123               ; 上条用户的密码</span><br><span class="line"></span><br><span class="line">[supervisord]</span><br><span class="line">logfile&#x3D;&#x2F;tmp&#x2F;supervisord.log ; supervisord进程日志路径</span><br><span class="line">logfile_maxbytes&#x3D;50MB        ; supervisord进程日志的大小 当超过50M时，会生成一个新的日志( 0 表示不限制)</span><br><span class="line">logfile_backups&#x3D;10           ; 日志文件保持的数量，启动supervisor时 会自动创建10个buckup文件，用于log rotate ( 0 表示不限制)</span><br><span class="line">loglevel&#x3D;info                ; 日志级别</span><br><span class="line">pidfile&#x3D;&#x2F;tmp&#x2F;supervisord.pid ; supervisord的pid文件路径。</span><br><span class="line">nodaemon&#x3D;false               ; 如果是true，supervisord进程将在前台运行 默认为false(后台运行)</span><br><span class="line">minfds&#x3D;1024                  ; 这个是最少系统空闲的文件描述符，低于这个值supervisor将不会启动</span><br><span class="line">minprocs&#x3D;200                 ; 最小可用的进程描述符，低于这个值supervisor也将不会正常启动</span><br><span class="line">;umask&#x3D;022                   ; 进程创建文件的掩码 (默认 022)</span><br><span class="line">;user&#x3D;chrism                 ; 该参数指定的用户也可以对supervisord进行管理</span><br><span class="line">;identifier&#x3D;supervisor       ; supervisord的标识符</span><br><span class="line">;directory&#x3D;&#x2F;tmp              ; 当supervisord以守护进程运行的时候，启动supervisord进程之前，会先切换到这个目录</span><br><span class="line">;nocleanup&#x3D;true              ; false的时候 supervisord进程启动的时候 会在把以前子进程产生的日志文件(路径为AUTO的情况下)清除掉(true不清除)</span><br><span class="line">;childlogdir&#x3D;&#x2F;tmp            ; 当子进程日志路径为AUTO的时候，子进程日志文件的存放路径 (默认 $TMP)</span><br><span class="line">;environment&#x3D;KEY&#x3D;&quot;value&quot;     ; 这个是用来设置环境变量的，supervisord在linux中启动默认继承了linux的 环境变量，在这里可以设置supervisord进程特有的其他环境变量supervisord启动子进程时，子进程会拷贝父进程的内存空间内容。 所以设置的这些环境变量也会被子进程继承 (默认不设置)</span><br><span class="line">;strip_ansi&#x3D;false            ; 这个选项如果设置为true，会清除子进程日志中的所有ANSI(\n,\t) 序列</span><br><span class="line"></span><br><span class="line">[rpcinterface:supervisor]    ; 这个选项是给XML_RPC用的，果想使用supervisord或者web server 必须要开启</span><br><span class="line">supervisor.rpcinterface_factory &#x3D; supervisor.rpcinterface:make_main_rpcinterface</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[supervisorctl]</span><br><span class="line">serverurl&#x3D;unix:&#x2F;&#x2F;&#x2F;tmp&#x2F;supervisor.sock ; supervisorctl本地连接supervisord，本地UNIX socket</span><br><span class="line">;serverurl&#x3D;http:&#x2F;&#x2F;127.0.0.1:9001 ; supervisorctl远程连接supervisord的时候，用到的地址和端口</span><br><span class="line">;username&#x3D;chris              ; 连接登录的用户名</span><br><span class="line">;password&#x3D;123                ; 密码</span><br><span class="line">;prompt&#x3D;mysupervisor         ; 输入用户名密码时候的提示符 默认:mysupervisor </span><br><span class="line">;history_file&#x3D;~&#x2F;.sc_history  ; 指定历史命令的文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;[program:theprogramname]      ; 案例 [program:给要管理进程起的一个名字]</span><br><span class="line">;command&#x3D;&#x2F;bin&#x2F;cat              ; 要执行的进程 可带参数 $1 $2 $3  注意!! 执行的进程不能是守护进程 ! !</span><br><span class="line">;process_name&#x3D;%(program_name)s ; 进程名 下条numprocs参数为1，就不用管这个参数 默认值%(program_name)s也就是上面的那个program冒号后面的名字</span><br><span class="line">;numprocs&#x3D;1                    ; 启动进程的数目。当不为1时，就是进程池的概念，默认为1</span><br><span class="line">;directory&#x3D;&#x2F;tmp                ; 进程运行前，会前切换到这个目录</span><br><span class="line">;umask&#x3D;022                     ; 进程掩码 (default None)</span><br><span class="line">;priority&#x3D;999                  ; 子进程启动关闭优先级，优先级低的，最先启动，关闭的时候最后关闭 (default 999)</span><br><span class="line">;autostart&#x3D;true                ; 设置为true 子进程将在supervisord启动后被自动启动</span><br><span class="line">;startsecs&#x3D;1                   ; 设置子进程启动多少秒之后，此时状态如果是running，则我们认为启动成功了</span><br><span class="line">;startretries&#x3D;3                ; 进程启动失败后，最大尝试启动的次数 当超过3次后，supervisor将把此进程的状态置为FAIL</span><br><span class="line">;autorestart&#x3D;unexpected        ; 设置子进程挂掉后自动重启的情况，有三个选项，false,unexpected和true。如果为false的时候，无论什么情况下，都不会被重新启动，如果为unexpected，只有当进程的退出码不在上面的exitcodes里面定义的退出码的时候，&gt;才会被自动重启。当为true的时候，只要子进程挂掉，将会被无条件的重启</span><br><span class="line">;exitcodes&#x3D;0,2                 ; 注意和上面的的autorestart&#x3D;unexpected对应 exitcodes里面的定义的退出码是expected的。</span><br><span class="line">;stopsignal&#x3D;QUIT               ; 进程停止信号，可以为TERM, HUP, INT, QUIT, KILL, USR1, or USR2等信号 默认为TERM 当用设定的信号去杀掉进程，退出码会被认为是expected</span><br><span class="line">;stopwaitsecs&#x3D;10               ; 这个是当我们向子进程发送stopsignal信号后，到系统返回信息给supervisord，所等待的最大时间。 超过这个时间，supervisord会向该子进程发送一个强制kill的信号(默认10秒)</span><br><span class="line">;stopasgroup&#x3D;false             ; 这个东西主要用于，supervisord管理的子进程，这个子进程本身还有子进程 那么我们如果仅仅干掉supervisord的子进程的话，子进程的子进程有可能会变成孤儿进程 所以咱们可以设置可个选项，把整个该子进程的整个进程组都干掉  设置为true的话，一般killasgroup也会被设置为true 该选项发送的是stop信号(def false)</span><br><span class="line">;killasgroup&#x3D;false             ; 这个和上面的stopasgroup类似，不过发送的是kill信号(def false)</span><br><span class="line">;user&#x3D;chrism                   ; 如果supervisord是root启动，我们在这里设置这个非root用户，可以用来管理该program 默认不设置</span><br><span class="line">;redirect_stderr&#x3D;true          ; 为true，则stderr的日志会被写入stdout日志文件中 (default false)</span><br><span class="line">;stdout_logfile&#x3D;&#x2F;a&#x2F;path        ; 子进程的stdout的日志路径，可以指定路径，AUTO，none等三个选项 设置为none的话，将没有日志产生。设置为AUTO的话，将随机找一个地方成日志文件，而且当supervisord重新启动的时候，以前的日志文件会被清空。当 redirect_stderr&#x3D;true的时候，sterr也会写进这个日志文件</span><br><span class="line">;stdout_logfile_maxbytes&#x3D;1MB   ; 日志文件最大大小，和[supervisord]中定义的一样 (default 50MB)</span><br><span class="line">;stdout_logfile_backups&#x3D;10     ; 和[supervisord]定义的一样 (0 means none, default 10)</span><br><span class="line">;stdout_capture_maxbytes&#x3D;1MB   ; 这个东西是设定capture管道的大小，当值不为0的时候，子进程可以从stdout发送信息，而supervisor可以根据信息，发送相应的event  (default 0)</span><br><span class="line">;stdout_events_enabled&#x3D;false   ; 为ture的时候，当子进程由stdout向文件描述符中写日志的时候，将触发supervisord发送PROCESS_LOG_STDOUT类型的event(default false)</span><br><span class="line">;stderr_logfile&#x3D;&#x2F;a&#x2F;path        ; 设置stderr写的日志路径，当redirect_stderr&#x3D;true。这个就不用设置了，设置了也是白搭。因为它会被写入stdout_logfile的同一个文件中 default AUTO(随便找个地存，supervisord重启被清空)</span><br><span class="line">;stderr_logfile_maxbytes&#x3D;1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stderr_logfile_backups&#x3D;10     ; # of stderr logfile backups (0 means none, default 10)</span><br><span class="line">;stderr_capture_maxbytes&#x3D;1MB   ; number of bytes in &#39;capturemode&#39; (default 0)</span><br><span class="line">;stderr_events_enabled&#x3D;false   ; emit events on stderr writes (default false)</span><br><span class="line">;environment&#x3D;A&#x3D;&quot;1&quot;,B&#x3D;&quot;2&quot;       ; 这个是该子进程的环境变量，和别的子进程是不共享的</span><br><span class="line">;serverurl&#x3D;AUTO                ; override serverurl computation (childutils)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;[eventlistener:theeventlistenername] ;这个东西其实和program的地位是一样的，也是suopervisor启动的子进程，不过它干的活是订阅supervisord发送的event。他的名字就叫listener了。我们可以在listener里面做一系列处理，比如报警....</span><br><span class="line">;command&#x3D;&#x2F;bin&#x2F;eventlistener    ; 和上面的program一样，表示listener的可执行文件的路径</span><br><span class="line">;process_name&#x3D;%(program_name)s ; 这个也一样，进程名，当下面的numprocs为多个的时候，才需要。否则默认就OK了</span><br><span class="line">;numprocs&#x3D;1                    ; 相同的listener启动的个数</span><br><span class="line">;events&#x3D;EVENT                  ; event event事件的类型，也就是说，只有写在这个地方的事件类型。才会被发送</span><br><span class="line">;buffer_size&#x3D;10                ; event队列缓存大小 (default 10)</span><br><span class="line">;directory&#x3D;&#x2F;tmp                ; 进程执行前，会切换到这个目录下执行 (def no cwd)</span><br><span class="line">;umask&#x3D;022                     ; umask for process (default None)</span><br><span class="line">;priority&#x3D;-1                   ; 启动优先级 (default -1)</span><br><span class="line">;autostart&#x3D;true                ; true supervisord启动一起启动 (default: true)</span><br><span class="line">;startsecs&#x3D;1                   ; 设置子进程启动多少秒之后，此时状态如果是running，则我们认为启动成功了 (def. 1)</span><br><span class="line">;startretries&#x3D;3                ; 失败最大尝试次数 (default 3)</span><br><span class="line">;autorestart&#x3D;unexpected        ; 和program一样 (def: unexpected)</span><br><span class="line">;exitcodes&#x3D;0,2                 ; &#39;expected&#39; exit codes used with autorestart (default 0,2)</span><br><span class="line">;stopsignal&#x3D;QUIT               ; signal used to kill process (default TERM)</span><br><span class="line">;stopwaitsecs&#x3D;10               ; max num secs to wait b4 SIGKILL (default 10)</span><br><span class="line">;stopasgroup&#x3D;false             ; send stop signal to the UNIX process group (default false)</span><br><span class="line">;killasgroup&#x3D;false             ; SIGKILL the UNIX process group (def false)</span><br><span class="line">;user&#x3D;chrism                   ; setuid to this UNIX account to run the program</span><br><span class="line">;redirect_stderr&#x3D;false         ; redirect_stderr&#x3D;true is not allowed for eventlisteners</span><br><span class="line">;stdout_logfile&#x3D;&#x2F;a&#x2F;path        ; stdout log path, NONE for none; default AUTO</span><br><span class="line">;stdout_logfile_maxbytes&#x3D;1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stdout_logfile_backups&#x3D;10     ; # of stdout logfile backups (0 means none, default 10)</span><br><span class="line">;stdout_events_enabled&#x3D;false   ; emit events on stdout writes (default false)</span><br><span class="line">;stderr_logfile&#x3D;&#x2F;a&#x2F;path        ; stderr log path, NONE for none; default AUTO</span><br><span class="line">;stderr_logfile_maxbytes&#x3D;1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br><span class="line">;stderr_logfile_backups&#x3D;10     ; # of stderr logfile backups (0 means none, default 10)</span><br><span class="line">;stderr_events_enabled&#x3D;false   ; emit events on stderr writes (default false)</span><br><span class="line">;environment&#x3D;A&#x3D;&quot;1&quot;,B&#x3D;&quot;2&quot;       ; process environment additions</span><br><span class="line">;serverurl&#x3D;AUTO                ; override serverurl computation (childutils)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;[group:thegroupname]          ; 这个东西就是给programs分组，划分到组里面的program。我们就不用一个一个去操作了 我们可以对组名进行统一的操作。 注意：program被划分到组里面之后，就相当于原来的配置从supervisor的配置文件里消失了supervisor只会对组进行管理，而不再会对组里面的单个program进行管理了</span><br><span class="line">;programs&#x3D;progname1,progname2  ; 组成员，用逗号分开</span><br><span class="line">;priority&#x3D;999                  ; 优先级，相对于组和组之间 (default 999)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;[include]                     ; 跟Nginx虚拟主机一个样</span><br><span class="line">;files &#x3D; relative&#x2F;directory&#x2F;*.ini</span><br></pre></td></tr></table></figure><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p><a href="https://www.cnblogs.com/esofar/p/8043792.html">centos部署.net core</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> .net core </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用webpagetest测试不同国家登录响应</title>
      <link href="2018/05/08/%E4%BD%BF%E7%94%A8webpagetest%E6%B5%8B%E8%AF%95%E4%B8%8D%E5%90%8C%E5%9B%BD%E5%AE%B6%E7%99%BB%E5%BD%95%E5%93%8D%E5%BA%94/"/>
      <url>2018/05/08/%E4%BD%BF%E7%94%A8webpagetest%E6%B5%8B%E8%AF%95%E4%B8%8D%E5%90%8C%E5%9B%BD%E5%AE%B6%E7%99%BB%E5%BD%95%E5%93%8D%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<p>使用webpageTest模拟不同国家进行登录操作</p><a id="more"></a><p>产品boss提了个从不同国家测试系统访问响应时间的需求，目前完成的是不同国家登录操作。</p><p>先来个套话：网站的打开速度直接影响用户体验，据悉，网站若没有在4秒内读取出来，大多数的访客就会选择离开，而且网页的载入速度也会影响网站的排名，因此，网站的打开速度极其重要。根据不同的需求去分析网站的加载速度，有助于促进网站高效运行</p><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>拿到需求之后，上网搜过很多工具，接触了的有：</p><blockquote><p><a href="https://tools.pingdom.com/">Pingdom</a><br><a href="https://performance.sucuri.net/">sucuri</a></p></blockquote><p>以及正在使用的：</p><blockquote><p><a href="http://www.webpagetest.org/">webpagetest</a></p></blockquote><h3 id="webpagetest"><a href="#webpagetest" class="headerlink" title="webpagetest"></a>webpagetest</h3><p>其他的就不介绍了，只介绍怎么使用webpagetest进行不同国家的登录操作。<br>说实话，刚开始接触时候有点懵，webpagetest自己有个<code>Auth</code>模块，原以为可以直接通过这个来进行登录鉴权，结果可以预料，压根没用，后来就开始琢磨<code>Script</code>模块。看了n久官方文档之后，实验出来了，鼓励大家看官方文档啊。。。上链接：</p><blockquote><p><a href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/scripting">script模块</a></p></blockquote><p>webpagetest提供脚本的形式，帮助用户使用脚本来填充表单，达到登录的目的。这点看下来有点类似于自动化测试时候，先看页面源码，找到用户名/密码源码的唯一标识，在script代码框中使用该唯一标识来指代需要用到的元素，例如：登录页面源码展示的用户名：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input name&#x3D;&quot;username&quot; class&#x3D;&quot;ant-input ng-not-empty ng-dirty ng-valid-parse userInput ng-touched&quot; id&#x3D;&quot;username&quot; type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;用户名或邮箱&quot; ng-model&#x3D;&quot;model.username&quot; ng-change&#x3D;&quot;onChange()&quot;&gt;</span><br></pre></td></tr></table></figure><p>从上面的源码可以看出，使用<code>id</code>可以唯一标志该字段，在自动化测试中使用<code>find_element_by_id(&#39;username&#39;)</code>即可获得该页面元素，类比到webpagetest的script，也是如此：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setValue id&#x3D;username yourusername</span><br></pre></td></tr></table></figure><p>即可完成定位到用户名并且完成用户名输入，同样的，密码：<br>源码为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input id&#x3D;&quot;password&quot; name&#x3D;&quot;password&quot; type&#x3D;&quot;password&quot; class&#x3D;&quot;ant-input ant-input-lg ng-not-empty ng-dirty ng-valid-parse userInput ng-touched&quot; placeholder&#x3D;&quot;密码&quot; ng-model&#x3D;&quot;model.password&quot; autocomplete&#x3D;&quot;off&quot; focus-if&#x3D;&quot;model.username&quot; ng-change&#x3D;&quot;pwdOnChange()&quot;&gt;</span><br></pre></td></tr></table></figure><p>webpagetest定位：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setValue id&#x3D;password yourpassword</span><br></pre></td></tr></table></figure><p>当然，点击登录按钮也类似：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clickAndWait innerText&#x3D;Login</span><br></pre></td></tr></table></figure><p>以上演示的只是一种定位方式，更多的使用，还是去看官方文档吧，有各种情况可供选择~~</p><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><p>直接上我的登录脚本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">logData 0</span><br><span class="line">navigate https:&#x2F;&#x2F;test-login.com</span><br><span class="line">logData 1</span><br><span class="line">setValue name&#x3D;username yourusername</span><br><span class="line">setValue name&#x3D;password yourpassword</span><br><span class="line">clickAndWait type&#x3D;submit</span><br></pre></td></tr></table></figure><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p><code>logData</code>个人理解是是否开启数据记录的标志，类似开启缓存（可能理解不对），0为关闭，1为开启，对于登录之后的操作，可以在登录前设置<code>logData</code>为1，打开数据记录，这样在后续的操作中就可以使用登录之后的用户信息。</p><h3 id="官方示例"><a href="#官方示例" class="headerlink" title="官方示例"></a>官方示例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; load the account name and password</span><br><span class="line">loadVariablesaccounts.txt</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; bring up the login screen</span><br><span class="line">setEventNamelaunch</span><br><span class="line">navigatehttp:&#x2F;&#x2F;webmail.aol.com</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ignore any errors from here on (in case the mailbox is empty or we get image challenged)</span><br><span class="line">ignoreErrors1</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; log in</span><br><span class="line">setValuename&#x3D;loginId%AOLSN%</span><br><span class="line">setValuename&#x3D;password%AOLPW%</span><br><span class="line">setEventNameload</span><br><span class="line">submitFormname&#x3D;AOLLoginForm</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; only read and send a mail once an hour</span><br><span class="line">minIntervalAOLMail60</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; close the today curtain</span><br><span class="line">clickclassName&#x3D;backdrop</span><br><span class="line">sleep5</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Open the first message with a subject of &quot;test&quot;</span><br><span class="line">setEventNameread</span><br><span class="line">clickAndWaitinnerText&#x3D;test</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; delete the message</span><br><span class="line">clicktitle&#x3D;Delete (del)</span><br><span class="line">sleep5</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; open the compose mail form</span><br><span class="line">setEventNamecompose</span><br><span class="line">clickAndWaittitle&#x3D;Write mail (Alt + w)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; send a test message to myself</span><br><span class="line">sleep1</span><br><span class="line">setValuetabindex&#x3D;100%AOLSN%</span><br><span class="line">setValuename&#x3D;Subjecttest</span><br><span class="line">loadFilemsg.txt%MSG%</span><br><span class="line">setInnerTextcontentEditable&#x3D;true%MSG%</span><br><span class="line">sleep1</span><br><span class="line">setDOMElementclassName&#x3D;confirmMessage</span><br><span class="line">setEventNamesend</span><br><span class="line">clickAndWaitinnerText&#x3D;Send</span><br><span class="line"></span><br><span class="line">endInterval</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; sign off</span><br><span class="line">setEventNamelogout</span><br><span class="line">clickAndWaitclassName&#x3D;signOutLink</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpagetest </tag>
            
            <tag> response time </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7搭建Nitrate</title>
      <link href="2018/04/22/Centos7%E6%90%AD%E5%BB%BANitrate/"/>
      <url>2018/04/22/Centos7%E6%90%AD%E5%BB%BANitrate/</url>
      
        <content type="html"><![CDATA[<p>基于python+Django，测试用例管理平台<strong>Nitrate</strong>搭建</p><a id="more"></a><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>基于目前Jira+confluence已经成为日常流程管控，老大就琢磨着我们测试用例需要个专门的平台进行管控，所以也就产生了调研的需求，候选有俩：testlink和Nitrate，由于目前组内python氛围较活跃，自动化测试用例也是基于python，所以也就是希望能找到一个基于python写的系统，方便定制，二次开发嘛~</p><h2 id="开篇"><a href="#开篇" class="headerlink" title="开篇"></a>开篇</h2><p>在有搭建Nitrate这个任务之后，本着偷懒的心态，首先搜了一圈搭建教程，然而，一篇都没找到！！！也就是说，我得自己折腾了！！！没办法，直接上github找项目地址，说不定在说明里面有介绍呢</p><blockquote><p><a href="https://github.com/Nitrate/Nitrate">Nitrate项目地址</a></p></blockquote><p>里面的确是有介绍，搭建教程貌似也有，还是各种环境的搭建教程，好像看到些光辉啊..</p><blockquote><p><a href="http://nitrate.readthedocs.io/en/latest/">Nitrate Doc</a></p></blockquote><p>文档介绍了各种搭建教程，选你看着比较顺眼的，动手吧~</p><h2 id="坎坷的系统搭建"><a href="#坎坷的系统搭建" class="headerlink" title="坎坷的系统搭建"></a>坎坷的系统搭建</h2><p>平时Linux还算是比较顺手，直接选<code>Installing nitrate on RHEL6 with Apache and MySQL</code>，虽然介绍的Redhat的，不都涨一样嘛~开工：<br>由于自己电脑还是Windows的（别提了，测试嘛，需要太多工具，唉），首先就是搭个Centos7的虚拟机，轻车熟路了，非常迅速的完工，Xshell远程连上，开始愉快的黑窗口作业。。</p><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>由于搭建的centos7是所谓的<code>CentOS-7-x86_64-Everything-1611</code>版本，网卡什么的驱动都是装好了，如果你装的是最间版，那么<code>ifconfig</code>命令都敲不了。。。自己百度怎么开网吧。。</p><h4 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h4><p>由于是需要从github仓库直接拉项目，所以git就必须先搭个了:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><p>就完成了，如果遇到yum不让用，日志显示XX进程正在使用yum，那要么等，要么就是暴力点，直接杀：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf &#x2F;var&#x2F;run&#x2F;yum.pid</span><br></pre></td></tr></table></figure><p>然后就可以安心的yum install了。</p><h4 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h4><p>由于Nitrate是基于Django的，所以，必不可少的需要装个Django；装Django，有三种方法：</p><h5 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h5><p>最简单就是一条命令带走：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Django</span><br></pre></td></tr></table></figure><h5 id="setuptools"><a href="#setuptools" class="headerlink" title="setuptools"></a>setuptools</h5><p>使用setuptools安装，首先需要先装它：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install python-setuptools</span><br></pre></td></tr></table></figure><p>安装完成之后，再使用<code>easy_install </code>安装django：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">easy_install django</span><br></pre></td></tr></table></figure><h5 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h5><p>首先是上官网下载个tar.gz格式的源码包：</p><blockquote><p><a href="https://www.djangoproject.com/download/">官方源码下载地址</a></p></blockquote><p>然后就可以开始正常的解压安装了：</p><pre><code>cd your_pathrz    (windows拷包到linux)tar -zxvf Django-x.x.tar.gzpython setup.py install<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">即可完成安装，验证：</span><br></pre></td></tr></table></figure>django-admin.py<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正确安装会出现很多选项，类似这样：</span><br></pre></td></tr></table></figure>[root@localhost run]# django-admin.pyType &#39;django-admin.py help &lt;subcommand&gt;&#39; for help on a specific subcommand.Available subcommands:[django]    check    compilemessages    createcachetable    dbshell    diffsettings    dumpdata<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">好了，这这里来说说遇到的**第一个坑**，鬼知道是为了个什么，Nitrate限制Django版本，当你使用pip或者easy_install安装个2.0版本之后，后面编译安装Nitrate时候，就会开始报错给你了，到时候就知道是多么北京的事了,印象中Django版本要求是&#96;1.8&lt;&#x3D;Django版本&lt;1.11&#96; ，唉，所以，如果谁正准备装这个，或者偶尔看到我写的这玩意，真的，记住，还是源码安装Django吧。。。另外，强烈建议你就要你装完系统的python版本（多半是2.7.5），千万别升3.6，不然可能还要哭一会。</span><br><span class="line"></span><br><span class="line">#### pip</span><br><span class="line">上面说的可以使用pip来装Django，但是，貌似2.7.5的python压根就没自带个pip，好吧，反正后面还需要pip，还是先装上吧：</span><br><span class="line">首先安装epel扩展</span><br></pre></td></tr></table></figure>yum -y install epel-release<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">然后就可以装pip了：</span><br></pre></td></tr></table></figure>yum -y install python-pip<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">完了清个cache:</span><br></pre></td></tr></table></figure>yum clean all<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#### MySQL</span><br><span class="line">数据库选MySQL也没什么可纠结了，安装：</span><br><span class="line">下载源包：</span><br></pre></td></tr></table></figure>wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">安装mysql源:</span><br></pre></td></tr></table></figure>yum localinstall mysql57-community-release-el7-8.noarch.rpm<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">检查是否安装成功：</span><br></pre></td></tr></table></figure>yum repolist enabled | grep &quot;mysql.*-community.*&quot;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;</span><br><span class="line">mysql-connectors-community&#x2F;x86_64 MySQL Connectors Community                  51</span><br><span class="line">mysql-tools-community&#x2F;x86_64      MySQL Tools Community                       63</span><br><span class="line">mysql57-community&#x2F;x86_64          MySQL 5.7 Community Server                 267</span><br></pre></td></tr></table></figure>可以修改源配置，安装你喜欢的版本：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;yum.repos.d&#x2F;mysql-community.repo</span><br></pre></td></tr></table></figure>只需要把对应的enable改成1即可。##### 安装<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure>这里再次吐槽下公司的网，烂的不是一点半点，这个包印象中有近200M，公司网以20k速度给我下。。。直接流量开热点才下好。##### 启动服务systemctl start mysqld##### 查看状态systemctl status mysqld##### 配置开机启动<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>##### 修改root密码查看默认密码：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log</span><br></pre></td></tr></table></figure>修改密码很简单，`mysql -uroot -p`进入控制台，改：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;pwd&#39;;</span><br></pre></td></tr></table></figure>顺便改个权限：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;pwd&#39; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>再配个防火墙，3306端口打开，那么在Windows中就能使用工具连接数据库了。##### 修改字符编码编辑`/etc/my.cnf`，在[mysqld]下添加配置：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character_set_server&#x3D;utf8</span><br><span class="line">init_connect&#x3D;&#39;SET NAMES utf8&#39;</span><br></pre></td></tr></table></figure>重启mysql服务即可。### 开始搭建#### 项目clone首先是clone到本地：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;src</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;Nitrate&#x2F;Nitrate.git</span><br></pre></td></tr></table></figure>大概有这么些东西：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Nitrate]# ll</span><br><span class="line">total 160</span><br><span class="line">-rw-r--r--.  1 root root   609 Apr 22 12:23 AUTHORS</span><br><span class="line">drwxr-xr-x.  4 root root    43 Apr 22 12:41 build</span><br><span class="line">-rw-r--r--.  1 root root 66430 Apr 22 12:23 CHANGELOG.rst</span><br><span class="line">drwxr-xr-x.  4 root root    60 Apr 22 12:23 contrib</span><br><span class="line">drwxr-xr-x.  2 root root    35 Apr 22 12:41 dist</span><br><span class="line">drwxr-xr-x.  3 root root    76 Apr 22 12:23 docs</span><br><span class="line">-rw-r--r--.  1 root root 18092 Apr 22 12:23 LICENSE</span><br><span class="line">-rw-r--r--.  1 root root  1690 Apr 22 12:23 Makefile</span><br><span class="line">-rwxr-xr-x.  1 root root   279 Apr 22 12:23 manage.py</span><br><span class="line">-rw-r--r--.  1 root root   256 Apr 22 12:23 MANIFEST.in</span><br><span class="line">drwxr-xr-x.  2 root root   110 Apr 22 12:41 Nitrate.egg-info</span><br><span class="line">-rw-r--r--.  1 root root 25090 Apr 22 12:23 nitrate.spec</span><br><span class="line">-rw-r--r--.  1 root root  1753 Apr 22 12:23 README.rst</span><br><span class="line">-rw-r--r--.  1 root root  1127 Apr 22 12:23 requirements.txt</span><br><span class="line">-rw-r--r--.  1 root root   657 Apr 22 12:23 setup.cfg</span><br><span class="line">-rw-r--r--.  1 root root  2234 Apr 22 12:23 setup.py</span><br><span class="line">drwxr-xr-x. 19 root root  4096 Apr 22 12:23 tcms</span><br><span class="line">-rw-r--r--.  1 root root   827 Apr 22 12:23 tox.ini</span><br><span class="line">-rw-r--r--.  1 root root     4 Apr 22 12:23 VERSION.txt</span><br></pre></td></tr></table></figure>#### 安装开发包<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc python-devel mysql-devel krb5-devel libxml2-devel libxslt-devel</span><br></pre></td></tr></table></figure>安装完成之后，还要项目依赖#### 安装依赖进入项目目录：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;Nitrate</span><br></pre></td></tr></table></figure>开始安装：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install .</span><br></pre></td></tr></table></figure>这个过程会在你本地检查一个个的依赖，没有就装，其中就会检查Django，这破版本的问题，真的是害我又重装一遍。安装速度取决于你的网速和电脑硬件性能，安心等着successful。#### 源码安装Nitrate还是在这个目录，执行:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>使用源码安装Nitrate，等着就好，安装完成之后，可以到`/usr/lib/python2.7/site-packages`下找到你安装的Nitrate：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost site-packages]# ls | grep Nitrate</span><br><span class="line">Nitrate-4.1-py2.7.egg</span><br><span class="line">Nitrate-4.1-py2.7.egg-info</span><br></pre></td></tr></table></figure>看看里面有啥：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost site-packages]# cd Nitrate-4.1-py2.7.egg</span><br><span class="line">[root@localhost Nitrate-4.1-py2.7.egg]# ls</span><br><span class="line">EGG-INFO  tcms</span><br><span class="line">[root@localhost Nitrate-4.1-py2.7.egg]# ll</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x.  2 root root  130 Apr 22 14:52 EGG-INFO</span><br><span class="line">drwxr-xr-x. 18 root root 4096 Apr 22 14:52 tcms</span><br><span class="line">[root@localhost Nitrate-4.1-py2.7.egg]# cd tcms&#x2F;</span><br><span class="line">[root@localhost tcms]# ll</span><br><span class="line">total 56</span><br><span class="line">-rw-r--r--.  1 root root  307 Apr 22 14:52 celery.py</span><br><span class="line">-rw-r--r--.  1 root root  586 Apr 22 14:52 celery.pyc</span><br><span class="line">drwxr-xr-x. 11 root root 4096 Apr 22 14:52 core</span><br><span class="line">-rw-r--r--.  1 root root  301 Apr 22 14:52 __init__.py</span><br><span class="line">-rw-r--r--.  1 root root  422 Apr 22 14:52 __init__.pyc</span><br><span class="line">drwxr-xr-x.  4 root root   75 Apr 22 14:52 integration</span><br><span class="line">drwxr-xr-x.  4 root root   32 Apr 22 14:52 locale</span><br><span class="line">drwxr-xr-x.  3 root root  261 Apr 22 14:52 management</span><br><span class="line">drwxr-xr-x.  3 root root  228 Apr 22 14:52 profiles</span><br><span class="line">drwxr-xr-x.  2 root root  272 Apr 22 14:52 report</span><br><span class="line">drwxr-xr-x.  2 root root  241 Apr 22 14:52 search</span><br><span class="line">drwxr-xr-x.  2 root root  224 Apr 22 16:15 settings</span><br><span class="line">drwxr-xr-x.  8 root root   94 Apr 22 15:09 static</span><br><span class="line">drwxr-xr-x. 14 root root 4096 Apr 22 16:06 templates</span><br><span class="line">drwxr-xr-x.  6 root root 4096 Apr 22 14:52 testcases</span><br><span class="line">drwxr-xr-x.  6 root root 4096 Apr 22 14:52 testplans</span><br><span class="line">drwxr-xr-x.  6 root root 4096 Apr 22 14:52 testruns</span><br><span class="line">drwxr-xr-x.  2 root root   86 Apr 22 14:52 tests</span><br><span class="line">-rw-r--r--.  1 root root 2334 Apr 22 14:52 urls.py</span><br><span class="line">-rw-r--r--.  1 root root 2299 Apr 22 14:52 urls.pyc</span><br><span class="line">drwxr-xr-x.  2 root root  123 Apr 22 14:52 utils</span><br><span class="line">-rw-r--r--.  1 root root 1896 Apr 22 14:52 wsgi.py</span><br><span class="line">-rw-r--r--.  1 root root 1605 Apr 22 14:52 wsgi.pyc</span><br><span class="line">drwxr-xr-x.  4 root root 4096 Apr 22 14:52 xmlrpc</span><br></pre></td></tr></table></figure>记住`tcms/`这个文件夹，后面的配置，全都在这里面。### 配置#### 初始化数据首先是创建`nitrate`这数据库，然后创建用户，赋权限，初始化数据：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database nitrate;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;nitrate&#39;@&#39;%&#39; IDENTIFIED BY &#39;pwd&#39; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>#### 修改配置之前接触过Django的，应该都知道有个文件`setting.py`这里面是你app的一些重要配置，我们要改的，也就是它。Nitrate把传统意义上的`setting.py`分成了两个文件（其实是一个文件）：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">common.py</span><br><span class="line">project.py</span><br></pre></td></tr></table></figure>文件路径：`/usr/lib/python2.7/site-packages/Nitrate-4.1-py2.7.egg/tcms/settings`几乎所有配置都可以在`common.py`中完成，但是`project.py`在文件开头就是一句话：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from common import *</span><br></pre></td></tr></table></figure>所以，我们常用的配置，在`project.py`中完成即可。内容大概长这样，可以参考我的配：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"># Django settings for product env.</span><br><span class="line"></span><br><span class="line">from common import *</span><br><span class="line"></span><br><span class="line"># Debug settings</span><br><span class="line">DEBUG &#x3D; True</span><br><span class="line">TEMPLATE_DEBUG &#x3D; DEBUG</span><br><span class="line"></span><br><span class="line"># Database settings</span><br><span class="line">DATABASES &#x3D; &#123;</span><br><span class="line">    &#39;default&#39;: &#123;</span><br><span class="line">        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,</span><br><span class="line">        &#39;NAME&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;USER&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;PASSWORD&#39;: &#39;pwd&#39;,</span><br><span class="line">        &#39;HOST&#39;: &#39;192.168.98.133&#39;,</span><br><span class="line">        &#39;PORT&#39;: &#39;3306&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#39;slave_1&#39;: &#123;</span><br><span class="line">        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,</span><br><span class="line">        &#39;NAME&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;USER&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;PASSWORD&#39;: &#39;pwd&#39;,</span><br><span class="line">        &#39;HOST&#39;: &#39;192.168.98.133&#39;,</span><br><span class="line">        &#39;PORT&#39;: &#39;3306&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># add RemoteUserMiddleWare if kerberos authentication is enabled</span><br><span class="line">MIDDLEWARE_CLASSES +&#x3D; (</span><br><span class="line">#    &#39;django.contrib.auth.middleware.RemoteUserMiddleware&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># Remote kerberos authentication backends</span><br><span class="line">#AUTHENTICATION_BACKENDS &#x3D; (</span><br><span class="line">#    &#39;tcms.core.contrib.auth.backends.ModAuthKerbBackend&#39;,</span><br><span class="line">#)</span><br><span class="line"></span><br><span class="line">DATABASE_ROUTERS &#x3D; [&#39;tcms.core.utils.tcms_router.RWRouter&#39;]</span><br><span class="line"></span><br><span class="line"># Kerberos realm</span><br><span class="line">#KRB5_REALM &#x3D; &#39;EXAMPLE.COM&#39;</span><br><span class="line"></span><br><span class="line"># Bugzilla integration setttings</span><br><span class="line"># Config following settings if your want to integrate with bugzilla</span><br><span class="line">BUGZILLA3_RPC_SERVER &#x3D; &#39;&#39;</span><br><span class="line">BUGZILLA_URL &#x3D; &#39;&#39;</span><br><span class="line">BUGZILLA_USER &#x3D; &#39;&#39;</span><br><span class="line">BUGZILLA_PASSWORD &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># JIRA integration setttings</span><br><span class="line"># Config following settings if your want to integrate with JIRA</span><br><span class="line">JIRA_URL &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># Set the default send mail address</span><br><span class="line">EMAIL_HOST &#x3D; &#39;smtp.example.com&#39;</span><br><span class="line">EMAIL_FROM &#x3D; &#39;noreply@example.com&#39;</span><br><span class="line"></span><br><span class="line"># Site-specific messages</span><br><span class="line"></span><br><span class="line"># First run - to detemine need port user or not.</span><br><span class="line">FIRST_RUN &#x3D; False</span><br><span class="line"></span><br><span class="line"># You can add a help link on the footer of home page as following format:</span><br><span class="line"># (&#39;http:&#x2F;&#x2F;foo.com&#39;, &#39;foo&#39;)</span><br><span class="line">FOOTER_LINKS &#x3D; (</span><br><span class="line"> (&#39;&#x2F;xmlrpc&#x2F;&#39;, &#39;XML-RPC service&#39;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># added for nitrate3.4 compatibility</span><br><span class="line">DEFAULT_GROUPS &#x3D; [&#39;default&#39;]</span><br><span class="line">TESTOPIA_XML_VERSION &#x3D; &#39;1.0&#39;</span><br><span class="line"></span><br><span class="line"># admin settings</span><br><span class="line">ADMINS &#x3D; (</span><br><span class="line">    # (&#39;Your Name&#39;, &#39;your_email@domain.com&#39;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># user guide URL</span><br><span class="line">USER_GUIDE_URL &#x3D; &quot;&quot;</span><br><span class="line"></span><br><span class="line">DEFAULT_PAGE_SIZE &#x3D; 100</span><br></pre></td></tr></table></figure>基本需要修改的，一是DEBUG开关，第二个是数据库配置，开启DEBUG开关是为了后面初始化数据时候获取`staticfile`，开始**第二个坑**：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AUTHENTICATION_BACKENDS</span><br><span class="line">MIDDLEWARE_CLASSES</span><br></pre></td></tr></table></figure>注释别放开啊别放开，千万别手痒，惨痛的教训，就是手痒在不知道这俩什么含义就放开了，然后在搭建完成之后，登录都登录不了。。一直在报`jquery.min.js  404`，这个问题真的是折腾死，开始根本想不到是这边的问题，造成把`common.py`文件研究了个遍，环境重新又搭建两遍，一遍使用`venv`开启，一遍按原来的来，最终在万念俱灰，把注释又加上才解决，唉。。。#### 配置common.py首先，直接上我配完的，可参考:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">import django.conf.global_settings as DEFAULT_SETTINGS</span><br><span class="line">import os.path</span><br><span class="line"></span><br><span class="line">NITRATE_VERSION &#x3D; &#39;4.0.0&#39;</span><br><span class="line"></span><br><span class="line">DEBUG &#x3D; False</span><br><span class="line"></span><br><span class="line"># Administrators error report email settings</span><br><span class="line">ADMINS &#x3D; (</span><br><span class="line">    # (&#39;Your Name&#39;, &#39;your_email@example.com&#39;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">TCMS_ROOT_PATH &#x3D; os.path.abspath(os.path.join(os.path.dirname(__file__), &#39;..&#39;).replace(&#39;\\&#39;, &#39;&#x2F;&#39;))</span><br><span class="line"></span><br><span class="line">MANAGERS &#x3D; ADMINS</span><br><span class="line"></span><br><span class="line">DATABASES &#x3D; &#123;</span><br><span class="line">    # Master DB for writing</span><br><span class="line">    &#39;default&#39;: &#123;</span><br><span class="line">        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,</span><br><span class="line">        &#39;NAME&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;USER&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;PASSWORD&#39;: &#39;pwd&#39;,</span><br><span class="line">        &#39;HOST&#39;: &#39;192.168.98.133&#39;,</span><br><span class="line">        &#39;PORT&#39;: &#39;3306&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">    # First slave DB for reading</span><br><span class="line">    &#39;slave_1&#39;: &#123;</span><br><span class="line">        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,</span><br><span class="line">        &#39;NAME&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;USER&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;PASSWORD&#39;: &#39;pwd&#39;,</span><br><span class="line">        &#39;HOST&#39;: &#39;192.168.98.133&#39;,</span><br><span class="line">        &#39;PORT&#39;: &#39;3306&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">    # Second slave DB for reporting, optional</span><br><span class="line">    &#39;slave_report&#39;: &#123;</span><br><span class="line">        &#39;ENGINE&#39;: &#39;django.db.backends.3306&#39;,</span><br><span class="line">        &#39;NAME&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;USER&#39;: &#39;nitrate&#39;,</span><br><span class="line">        &#39;PASSWORD&#39;: &#39;pwd&#39;,</span><br><span class="line">        &#39;HOST&#39;: &#39;192.168.98.133&#39;,</span><br><span class="line">        &#39;PORT&#39;: &#39;3306&#39;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Hosts&#x2F;domain names that are valid for this site; required if DEBUG is False</span><br><span class="line"># See https:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;1.5&#x2F;ref&#x2F;settings&#x2F;#allowed-hosts</span><br><span class="line">ALLOWED_HOSTS &#x3D; [&#39;*&#39;]</span><br><span class="line"></span><br><span class="line"># Local time zone for this installation. Choices can be found here:</span><br><span class="line"># http:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_tz_zones_by_name</span><br><span class="line"># although not all choices may be available on all operating systems.</span><br><span class="line"># In a Windows environment this must be set to your system time zone.</span><br><span class="line">TIME_ZONE &#x3D; &#39;UTC&#39;</span><br><span class="line"></span><br><span class="line"># Language code for this installation. All choices can be found here:</span><br><span class="line"># http:&#x2F;&#x2F;www.i18nguy.com&#x2F;unicode&#x2F;language-identifiers.html</span><br><span class="line">LANGUAGE_CODE &#x3D; &#39;en-us&#39;</span><br><span class="line"></span><br><span class="line">SITE_ID &#x3D; 1</span><br><span class="line"></span><br><span class="line"># If you set this to False, Django will make some optimizations so as not</span><br><span class="line"># to load the internationalization machinery.</span><br><span class="line">USE_I18N &#x3D; True</span><br><span class="line"></span><br><span class="line"># If you set this to False, Django will not format dates, numbers and</span><br><span class="line"># calendars according to the current locale.</span><br><span class="line">USE_L10N &#x3D; True</span><br><span class="line"></span><br><span class="line"># If you set this to False, Django will not use timezone-aware datetimes.</span><br><span class="line">USE_TZ &#x3D; False</span><br><span class="line"></span><br><span class="line"># Absolute filesystem path to the directory that will hold user-uploaded files.</span><br><span class="line"># Example: &quot;&#x2F;var&#x2F;www&#x2F;example.com&#x2F;media&#x2F;&quot;</span><br><span class="line">MEDIA_ROOT &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># URL that handles the media served from MEDIA_ROOT. Make sure to use a</span><br><span class="line"># trailing slash.</span><br><span class="line"># Examples: &quot;http:&#x2F;&#x2F;example.com&#x2F;media&#x2F;&quot;, &quot;http:&#x2F;&#x2F;media.example.com&#x2F;&quot;</span><br><span class="line">MEDIA_URL &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># URL prefix for admin absolute URL</span><br><span class="line">ADMIN_PREFIX &#x3D; &#39;&#x2F;admin&#39;</span><br><span class="line"></span><br><span class="line">LOGIN_URL &#x3D; &#39;nitrate-login&#39;</span><br><span class="line">LOGIN_REDIRECT_URL &#x3D; &#39;user-profile-redirect&#39;</span><br><span class="line">LOGOUT_REDIRECT_URL &#x3D; &#39;nitrate-login&#39;</span><br><span class="line"></span><br><span class="line"># Absolute path to the directory static files should be collected to.</span><br><span class="line"># Don&#39;t put anything in this directory yourself; store your static files</span><br><span class="line"># in apps&#39; &quot;static&#x2F;&quot; subdirectories and in STATICFILES_DIRS.</span><br><span class="line"># Example: &quot;&#x2F;var&#x2F;www&#x2F;example.com&#x2F;static&#x2F;&quot;</span><br><span class="line">#BASE_DIR &#x3D; os.path.abspath(os.path.join(os.path.dirname(__file__), &#39;..&#39;).replace(&#39;\\&#39;, &#39;&#x2F;&#39;))</span><br><span class="line">#STATIC_ROOT &#x3D; &#39;&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;Nitrate-4.1-py2.7.egg&#x2F;tcms&#x2F;static&#x2F;&#39;</span><br><span class="line">STATIC_ROOT &#x3D; &#39;&#x2F;home&#x2F;nitrate&#x2F;projects&#x2F;site&#x2F;assets&#39;</span><br><span class="line">#STATIC_ROOT &#x3D; os.path.join(TCMS_ROOT_PATH, &#39;static&#39;)</span><br><span class="line"></span><br><span class="line"># URL prefix for static files.</span><br><span class="line"># Example: &quot;http:&#x2F;&#x2F;example.com&#x2F;static&#x2F;&quot;, &quot;http:&#x2F;&#x2F;static.example.com&#x2F;&quot;</span><br><span class="line">STATIC_URL &#x3D; &#39;&#x2F;static&#x2F;&#39;</span><br><span class="line"></span><br><span class="line"># Additional locations of static files</span><br><span class="line">STATICFILES_DIRS &#x3D; (</span><br><span class="line">    # Put strings here, like &quot;&#x2F;home&#x2F;html&#x2F;static&quot; or &quot;C:&#x2F;www&#x2F;django&#x2F;static&quot;.</span><br><span class="line">    # Always use forward slashes, even on Windows.</span><br><span class="line">    # Don&#39;t forget to use absolute paths, not relative paths.</span><br><span class="line">    os.path.join(TCMS_ROOT_PATH,&#39;static&#39;),</span><br><span class="line">    #&#39;&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;Nitrate-4.1-py2.7.egg&#x2F;tcms&#x2F;static&#x2F;&#39;,</span><br><span class="line">#    &#39;&#x2F;home&#x2F;nitrate&#x2F;projects&#x2F;site&#x2F;assets&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># List of finder classes that know how to find static files in</span><br><span class="line"># various locations.</span><br><span class="line">STATICFILES_FINDERS &#x3D; (</span><br><span class="line">    &#39;django.contrib.staticfiles.finders.FileSystemFinder&#39;,</span><br><span class="line">    &#39;django.contrib.staticfiles.finders.AppDirectoriesFinder&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># Make this unique, and don&#39;t share it with anybody.</span><br><span class="line">SECRET_KEY &#x3D; &#39;^8y!)$0t7yq2+65%&amp;_#@i^_o)eb3^q--y_$e7a_&#x3D;t$%$1i)zuv&#39;</span><br><span class="line"></span><br><span class="line">TEMPLATES &#x3D; [</span><br><span class="line">    &#123;</span><br><span class="line">        &#39;BACKEND&#39;: &#39;django.template.backends.django.DjangoTemplates&#39;,</span><br><span class="line">        &#39;DIRS&#39;: [</span><br><span class="line">            os.path.join(TCMS_ROOT_PATH, &#39;templates&#x2F;&#39;).replace(&#39;\\&#39;, &#39;&#x2F;&#39;),</span><br><span class="line">        ],</span><br><span class="line">        &#39;APP_DIRS&#39;: True,</span><br><span class="line">        &#39;OPTIONS&#39;: &#123;</span><br><span class="line">            &#39;debug&#39;: True,</span><br><span class="line">            &#39;context_processors&#39;: [</span><br><span class="line">                &#39;django.contrib.auth.context_processors.auth&#39;,</span><br><span class="line">                &#39;django.template.context_processors.debug&#39;,</span><br><span class="line">                &#39;django.template.context_processors.i18n&#39;,</span><br><span class="line">                &#39;django.template.context_processors.media&#39;,</span><br><span class="line">                &#39;django.template.context_processors.static&#39;,</span><br><span class="line">                &#39;django.template.context_processors.tz&#39;,</span><br><span class="line">                &#39;django.contrib.messages.context_processors.messages&#39;,</span><br><span class="line"></span><br><span class="line">                # Added for Nitrate</span><br><span class="line">                &#39;django.template.context_processors.request&#39;,</span><br><span class="line">                &#39;tcms.core.context_processors.admin_prefix_processor&#39;,</span><br><span class="line">                &#39;tcms.core.context_processors.auth_backend_processor&#39;,</span><br><span class="line">                &#39;tcms.core.context_processors.request_contents_processor&#39;,</span><br><span class="line">                &#39;tcms.core.context_processors.settings_processor&#39;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MIDDLEWARE_CLASSES &#x3D; (</span><br><span class="line">    &#39;django.contrib.sessions.middleware.SessionMiddleware&#39;,</span><br><span class="line">    &#39;django.middleware.locale.LocaleMiddleware&#39;,</span><br><span class="line">    &#39;django.middleware.common.CommonMiddleware&#39;,</span><br><span class="line">    &#39;tcms.core.middleware.CsrfDisableMiddleware&#39;,</span><br><span class="line">    &#39;django.middleware.csrf.CsrfViewMiddleware&#39;,</span><br><span class="line">    &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;,</span><br><span class="line">    &#39;django.contrib.messages.middleware.MessageMiddleware&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ROOT_URLCONF &#x3D; &#39;tcms.urls&#39;</span><br><span class="line"></span><br><span class="line"># Python dotted path to the WSGI application used by Django&#39;s runserver.</span><br><span class="line">WSGI_APPLICATION &#x3D; &#39;tcms.wsgi.application&#39;</span><br><span class="line"></span><br><span class="line">INSTALLED_APPS &#x3D; (</span><br><span class="line">    &#39;django.contrib.admin&#39;,</span><br><span class="line">    &#39;django.contrib.admindocs&#39;,</span><br><span class="line">    &#39;django.contrib.auth&#39;,</span><br><span class="line">    &#39;django.contrib.contenttypes&#39;,</span><br><span class="line">    &#39;django.contrib.messages&#39;,</span><br><span class="line">    &#39;django.contrib.sessions&#39;,</span><br><span class="line">    &#39;django.contrib.sites&#39;,</span><br><span class="line">    &#39;django.contrib.staticfiles&#39;,</span><br><span class="line"></span><br><span class="line">    &#39;django_comments&#39;,</span><br><span class="line">    &#39;kobo.django.xmlrpc&#39;,</span><br><span class="line">    &#39;tinymce&#39;,</span><br><span class="line"></span><br><span class="line">    &#39;tcms.core.contrib.auth.apps.AppConfig&#39;,</span><br><span class="line">    &#39;tcms.core.contrib.comments.apps.AppConfig&#39;,</span><br><span class="line">    &#39;tcms.core.contrib.linkreference&#39;,</span><br><span class="line">    &#39;tcms.core.logs&#39;,</span><br><span class="line">    &#39;tcms.integration.bugzilla&#39;,</span><br><span class="line">    &#39;tcms.integration.errata&#39;,</span><br><span class="line">    &#39;tcms.management&#39;,</span><br><span class="line">    &#39;tcms.profiles&#39;,</span><br><span class="line">    &#39;tcms.testcases&#39;,</span><br><span class="line">    &#39;tcms.testplans&#39;,</span><br><span class="line">    &#39;tcms.testruns&#39;,</span><br><span class="line">    &#39;tcms.xmlrpc.apps.AppConfig&#39;,</span><br><span class="line"></span><br><span class="line">    # core app must be here in order to use permissions created during creating</span><br><span class="line">    # modules for above apps.</span><br><span class="line">    &#39;tcms.core.apps.AppConfig&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">SESSION_SERIALIZER &#x3D; &#39;django.contrib.sessions.serializers.JSONSerializer&#39;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Default apps settings</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Define the custom comment app</span><br><span class="line"># http:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;dev&#x2F;ref&#x2F;contrib&#x2F;comments&#x2F;custom&#x2F;</span><br><span class="line"></span><br><span class="line">COMMENTS_APP &#x3D; &#39;tcms.core.contrib.comments&#39;  # &#39;nitrate_comments&#39;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># XML-RPC interface settings</span><br><span class="line">#</span><br><span class="line"># XML-RPC methods</span><br><span class="line"></span><br><span class="line">XMLRPC_METHODS &#x3D; &#123;</span><br><span class="line">    &#39;TCMS_XML_RPC&#39;: (</span><br><span class="line">        (&#39;tcms.xmlrpc.api.auth&#39;, &#39;Auth&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.build&#39;, &#39;Build&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.env&#39;, &#39;Env&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.product&#39;, &#39;Product&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.testcase&#39;, &#39;TestCase&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.testcaserun&#39;, &#39;TestCaseRun&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.testcaseplan&#39;, &#39;TestCasePlan&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.testopia&#39;, &#39;Testopia&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.testplan&#39;, &#39;TestPlan&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.testrun&#39;, &#39;TestRun&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.user&#39;, &#39;User&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.version&#39;, &#39;Version&#39;),</span><br><span class="line">        (&#39;tcms.xmlrpc.api.tag&#39;, &#39;Tag&#39;),</span><br><span class="line">    ),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">XMLRPC_TEMPLATE &#x3D; &#39;xmlrpc.html&#39;</span><br><span class="line"></span><br><span class="line"># Cache backend</span><br><span class="line">CACHES &#x3D; &#123;</span><br><span class="line">    &#39;default&#39;: &#123;</span><br><span class="line">        &#39;BACKEND&#39;: &#39;django.core.cache.backends.locmem.LocMemCache&#39;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SESSION_ENGINE &#x3D; &#39;django.contrib.sessions.backends.cached_db&#39;</span><br><span class="line"></span><br><span class="line"># Needed by django.core.context_processors.debug:</span><br><span class="line"># See http:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;dev&#x2F;ref&#x2F;templates&#x2F;api&#x2F;#django-core-context-processors-debug</span><br><span class="line">INTERNAL_IPS &#x3D; (&#39;127.0.0.1&#39;, )</span><br><span class="line"></span><br><span class="line"># Authentication backends</span><br><span class="line"># For the login&#x2F;register&#x2F;logout reaon, we only support the internal auth backends.</span><br><span class="line">AUTHENTICATION_BACKENDS &#x3D; (</span><br><span class="line">    &#39;tcms.core.contrib.auth.backends.DBModelBackend&#39;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Mail settings</span><br><span class="line">#</span><br><span class="line"># Set the default send mail address</span><br><span class="line"># See http:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;dev&#x2F;ref&#x2F;settings&#x2F;#email-backend</span><br><span class="line">EMAIL_HOST &#x3D; &#39;&#39;</span><br><span class="line">EMAIL_PORT &#x3D; 25</span><br><span class="line">EMAIL_FROM &#x3D; &#39;noreply@foo.com&#39;</span><br><span class="line">EMAIL_SUBJECT_PREFIX &#x3D; &#39;[TCMS] &#39;</span><br><span class="line"></span><br><span class="line">EMAILS_FOR_DEBUG &#x3D; []</span><br><span class="line">ENABLE_ASYNC_EMAIL &#x3D; True</span><br><span class="line"></span><br><span class="line">CELERY_BROKER_URL &#x3D; &#39;redis:&#x2F;&#x2F;&#39;</span><br><span class="line"></span><br><span class="line"># Celery worker settings</span><br><span class="line">CELERY_TASK_RESULT_EXPIRES &#x3D; 60 * 2</span><br><span class="line">CELERY_RESULT_BACKEND &#x3D; &#39;db+sqlite:&#x2F;&#x2F;&#x2F;celery-results.db&#39;</span><br><span class="line">CELERYD_TIMER_PRECISION &#x3D; 120</span><br><span class="line">CELERY_IGNORE_RESULT &#x3D; True</span><br><span class="line">CELERY_MAX_CACHED_RESULTS &#x3D; -1</span><br><span class="line">CELERY_DEFAULT_RATE_LIMIT &#x3D; &#39;250&#x2F;m&#39;</span><br><span class="line"></span><br><span class="line"># TCMS email behavior settings</span><br><span class="line">PLAN_EMAIL_TEMPLATE &#x3D; &#39;mail&#x2F;change_plan.txt&#39;</span><br><span class="line">PLAN_DELELE_EMAIL_TEMPLATE &#x3D; &#39;mail&#x2F;delete_plan.txt&#39;</span><br><span class="line">CASE_EMAIL_TEMPLATE &#x3D; &#39;mail&#x2F;edit_case.txt&#39;</span><br><span class="line">CASE_DELETE_EMAIL_TEMPLATE &#x3D; &#39;mail&#x2F;delete_case.txt&#39;</span><br><span class="line"></span><br><span class="line"># TCMS Bug System settings</span><br><span class="line"># Set default bug system to bugzilla</span><br><span class="line">DEFAULT_BUG_SYSTEM_ID &#x3D; 1</span><br><span class="line"></span><br><span class="line"># Maximum upload file size, default set to 5MB.</span><br><span class="line"># 2.5MB - 2621440</span><br><span class="line"># 5MB - 5242880</span><br><span class="line"># 10MB - 10485760</span><br><span class="line"># 20MB - 20971520</span><br><span class="line"># 50MB - 5242880</span><br><span class="line"># 100MB 104857600</span><br><span class="line"># 250MB - 214958080</span><br><span class="line"># 500MB - 429916160</span><br><span class="line">MAX_UPLOAD_SIZE &#x3D; 5242880</span><br><span class="line"></span><br><span class="line"># Pagination</span><br><span class="line">PLAN_RUNS_PAGE_SIZE &#x3D; 20</span><br><span class="line"></span><br><span class="line"># Site-specific messages</span><br><span class="line"></span><br><span class="line"># The site can supply optional &quot;message of the day&quot; style banners, similar to</span><br><span class="line"># &#x2F;etc&#x2F;motd. They are fragments of HTML.</span><br><span class="line"></span><br><span class="line"># This if set, is shown on the login&#x2F;registration screens.</span><br><span class="line"># MOTD_LOGIN &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># The URLS will be list in footer</span><br><span class="line"># Example:</span><br><span class="line">#FOOTER_LINKS &#x3D; (</span><br><span class="line">#   (&#39;mailto:nitrate-dev-list@example.com&#39;, &#39;Contact Us&#39;),</span><br><span class="line">#   (&#39;mailto:nitrate-admin@example.com&#39;, &#39;Request Permission&#39;),</span><br><span class="line">#   (&#39;http:&#x2F;&#x2F;foo.com&#39;, &#39;foo&#39;)</span><br><span class="line">#)</span><br><span class="line">FOOTER_LINKS &#x3D; ()</span><br><span class="line"></span><br><span class="line"># Attachement file download path</span><br><span class="line"># it could be spcified to a different out of MEDIA_URL</span><br><span class="line"># FILE_UPLOAD_DIR &#x3D; path.join(MEDIA_DIR, &#39;uploads&#39;).replace(&#39;\\&#39;,&#39;&#x2F;&#39;),</span><br><span class="line">FILE_UPLOAD_DIR &#x3D; &#39;&#x2F;var&#x2F;nitrate&#x2F;uploads&#39;</span><br><span class="line"></span><br><span class="line"># Enable the administrator delete permission</span><br><span class="line"># In another word it&#39;s set the admin to super user or not.</span><br><span class="line">SET_ADMIN_AS_SUPERUSER &#x3D; False</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Authentication backend settings</span><br><span class="line">#</span><br><span class="line"># Bugzilla author xmlrpc url</span><br><span class="line"># Required by bugzilla authentication backend</span><br><span class="line">BUGZILLA3_RPC_SERVER &#x3D; &#39;&#39;</span><br><span class="line">BUGZILLA_URL &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># JIRA URL</span><br><span class="line">JIRA_URL &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># Turn on&#x2F;off bugzilla external tracker</span><br><span class="line">BUGZILLA_EXTERNAL_TRACKER &#x3D; False</span><br><span class="line"></span><br><span class="line"># Turn on&#x2F;off listening signals sent by models.</span><br><span class="line">LISTENING_MODEL_SIGNAL &#x3D; True</span><br><span class="line"></span><br><span class="line"># Kerberos settings</span><br><span class="line"># Required by kerberos authentication backend</span><br><span class="line">KRB5_REALM &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># Integration with Errata system, used to linkify the Errata ID</span><br><span class="line"># A valid Errata URL:</span><br><span class="line"># https:&#x2F;&#x2F;errata.devel.example.com&#x2F;errata&#x2F;stateview&#x2F;&#123;Errata ID&#125;</span><br><span class="line">ERRATA_URL_PREFIX &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># user guide url:</span><br><span class="line">USER_GUIDE_URL &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># Default page size for showing each possible query result. This provides a</span><br><span class="line"># consistent user experiece to users.</span><br><span class="line">DEFAULT_PAGE_SIZE &#x3D; 20</span><br><span class="line"></span><br><span class="line"># Disable TCMS to produce test run progress info to consumers by qpid for</span><br><span class="line"># reducing unnecessary I&#x2F;O access and errata does not subscribe tcms msg now.</span><br><span class="line"># If you want to continue sending msg to qpid, please overwrite it in product</span><br><span class="line"># .py and make sure qpid config is correct.</span><br><span class="line">ENABLE_QPID &#x3D; False</span><br><span class="line"></span><br><span class="line"># TCMS use Piwik to track request.</span><br><span class="line">ENABLE_PIWIK_TRACKING &#x3D; False</span><br><span class="line"># Piwik site id, generate by eng-ops</span><br><span class="line">PIWIK_SITE_ID &#x3D; &#39;&#39;</span><br><span class="line"># Piwik api url without schema.</span><br><span class="line">PIWIK_SITE_API_URL &#x3D; &#39;&#39;</span><br><span class="line"># Piwik js lib url without schema</span><br><span class="line">PIWIK_SITE_JS_URL &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line"># A sample logging configuration. The only tangible logging</span><br><span class="line"># performed by this configuration is to send an email to</span><br><span class="line"># the site admins on every HTTP 500 error when DEBUG&#x3D;False.</span><br><span class="line"># See http:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;dev&#x2F;topics&#x2F;logging for</span><br><span class="line"># more details on how to customize your logging configuration.</span><br><span class="line">LOGGING &#x3D; &#123;</span><br><span class="line">    &#39;version&#39;: 1,</span><br><span class="line">    &#39;disable_existing_loggers&#39;: False,</span><br><span class="line">    &#39;formatters&#39;: &#123;</span><br><span class="line">        &#39;verbose&#39;: &#123;</span><br><span class="line">            &#39;format&#39;: &#39;%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;simple&#39;: &#123;</span><br><span class="line">            &#39;format&#39;: &#39;[%(asctime)s] %(levelname)s %(message)s&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;xmlrpc_log&#39;: &#123;</span><br><span class="line">            &#39;format&#39;: &#39;[%(asctime)s] %(levelname)s XMLRPC %(process)d &quot;%(message)s&quot;&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#39;filters&#39;: &#123;</span><br><span class="line">        &#39;require_debug_false&#39;: &#123;</span><br><span class="line">            &#39;()&#39;: &#39;django.utils.log.RequireDebugFalse&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#39;handlers&#39;: &#123;</span><br><span class="line">        &#39;console&#39;: &#123;</span><br><span class="line">            &#39;level&#39;: &#39;DEBUG&#39;,</span><br><span class="line">            &#39;class&#39;: &#39;logging.StreamHandler&#39;,</span><br><span class="line">            &#39;formatter&#39;: &#39;simple&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;xmlrpc&#39;: &#123;</span><br><span class="line">            &#39;level&#39;: &#39;DEBUG&#39;,</span><br><span class="line">            &#39;class&#39;: &#39;logging.StreamHandler&#39;,</span><br><span class="line">            &#39;formatter&#39;: &#39;xmlrpc_log&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;mail_admins&#39;: &#123;</span><br><span class="line">            &#39;level&#39;: &#39;ERROR&#39;,</span><br><span class="line">            &#39;filters&#39;: [&#39;require_debug_false&#39;],</span><br><span class="line">            &#39;class&#39;: &#39;django.utils.log.AdminEmailHandler&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#39;loggers&#39;: &#123;</span><br><span class="line">        &#39;django.request&#39;: &#123;</span><br><span class="line">            &#39;handlers&#39;: [&#39;mail_admins&#39;],</span><br><span class="line">            &#39;level&#39;: &#39;ERROR&#39;,</span><br><span class="line">            &#39;propagate&#39;: True,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;nitrate.xmlrpc&#39;: &#123;</span><br><span class="line">            &#39;handlers&#39;: [&#39;xmlrpc&#39;],</span><br><span class="line">            &#39;level&#39;: &#39;DEBUG&#39;,</span><br><span class="line">            &#39;propagate&#39;: True,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TINYMCE_DEFAULT_CONFIG &#x3D; &#123;</span><br><span class="line">    &#39;mode&#39;: &quot;exact&quot;,</span><br><span class="line">    &#39;theme&#39;: &quot;advanced&quot;,</span><br><span class="line">    &#39;language&#39;: &quot;en&quot;,</span><br><span class="line">    &#39;skin&#39;: &quot;o2k7&quot;,</span><br><span class="line">    &#39;browsers&#39;: &quot;gecko&quot;,</span><br><span class="line">    &#39;dialog_type&#39;: &quot;modal&quot;,</span><br><span class="line">    &#39;object_resizing&#39;: &#39;true&#39;,</span><br><span class="line">    &#39;cleanup_on_startup&#39;: &#39;true&#39;,</span><br><span class="line">    &#39;forced_root_block&#39;: &quot;p&quot;,</span><br><span class="line">    &#39;remove_trailing_nbsp&#39;: &#39;true&#39;,</span><br><span class="line">    &#39;theme_advanced_toolbar_location&#39;: &quot;top&quot;,</span><br><span class="line">    &#39;theme_advanced_toolbar_align&#39;: &quot;left&quot;,</span><br><span class="line">    &#39;theme_advanced_statusbar_location&#39;: &quot;none&quot;,</span><br><span class="line">    &#39;theme_advanced_buttons1&#39;: &quot;formatselect,&quot;</span><br><span class="line">                               &quot;bold,italic,&quot;</span><br><span class="line">                               &quot;underline,&quot;</span><br><span class="line">                               &quot;bullist,&quot;</span><br><span class="line">                               &quot;numlist,&quot;</span><br><span class="line">                               &quot;link,&quot;</span><br><span class="line">                               &quot;unlink,&quot;</span><br><span class="line">                               &quot;image,&quot;</span><br><span class="line">                               &quot;search,&quot;</span><br><span class="line">                               &quot;|,&quot;</span><br><span class="line">                               &quot;outdent,&quot;</span><br><span class="line">                               &quot;indent,&quot;</span><br><span class="line">                               &quot;hr,&quot;</span><br><span class="line">                               &quot;fullscreen,&quot;</span><br><span class="line">                               &quot;|,&quot;</span><br><span class="line">                               &quot;help&quot;,</span><br><span class="line">    &#39;theme_advanced_buttons2&#39;: &quot;tablecontrols&quot;,</span><br><span class="line">    &#39;theme_advanced_buttons3&#39;: &quot;&quot;,</span><br><span class="line">    &#39;theme_advanced_path&#39;: &#39;false&#39;,</span><br><span class="line">    &#39;theme_advanced_blockformats&#39;: &quot;p,h2,h3,h4,div,code,pre&quot;,</span><br><span class="line">    &#39;theme_advanced_styles&#39;: &quot;[all] clearfix&#x3D;clearfix;&quot;</span><br><span class="line">                             &quot;[p] summary&#x3D;summary;&quot;</span><br><span class="line">                             &quot;[div] code&#x3D;code;&quot;</span><br><span class="line">                             &quot;[img] img_left&#x3D;img_left;&quot;</span><br><span class="line">                             &quot;[img] img_left_nospacetop&#x3D;img_left_nospacetop;&quot;</span><br><span class="line">                             &quot;[img] img_right&#x3D;img_right;&quot;</span><br><span class="line">                             &quot;[img] img_right_nospacetop&#x3D;img_right_nospacetop;&quot;</span><br><span class="line">                             &quot;[img] img_block&#x3D;img_block;&quot;</span><br><span class="line">                             &quot;[img] img_block_nospacetop&#x3D;img_block_nospacetop;&quot;</span><br><span class="line">                             &quot;[div] column span-2&#x3D;column span-2;&quot;</span><br><span class="line">                             &quot;[div] column span-4&#x3D;column span-4;&quot;</span><br><span class="line">                             &quot;[div] column span-8&#x3D;column span-8&quot;,</span><br><span class="line">    &#39;height&#39;: &#39;300&#39;,</span><br><span class="line">    &#39;width&#39;: &#39;100%&#39;,</span><br><span class="line">    &#39;urlconverter_callback&#39;: &#39;myCustomURLConverter&#39;,</span><br><span class="line">    &#39;plugins&#39;: &quot;table,safari,&quot;</span><br><span class="line">               &quot;advimage,&quot;</span><br><span class="line">               &quot;advlink,&quot;</span><br><span class="line">               &quot;fullscreen,&quot;</span><br><span class="line">               &quot;visualchars,&quot;</span><br><span class="line">               &quot;paste,&quot;</span><br><span class="line">               &quot;media,&quot;</span><br><span class="line">               &quot;template,&quot;</span><br><span class="line">               &quot;searchreplace,&quot;</span><br><span class="line">               &quot;emotions,&quot;,</span><br><span class="line">    &#39;table_styles&#39;: &quot;Header 1&#x3D;header1;&quot;</span><br><span class="line">                    &quot;Header 2&#x3D;header2;&quot;</span><br><span class="line">                    &quot;Header 3&#x3D;header3&quot;,</span><br><span class="line">    &#39;table_cell_styles&#39;: &quot;Header 1&#x3D;header1;&quot;</span><br><span class="line">                         &quot;Header 2&#x3D;header2;&quot;</span><br><span class="line">                         &quot;Header 3&#x3D;header3;&quot;</span><br><span class="line">                         &quot;Table Cell&#x3D;tableCel1&quot;,</span><br><span class="line">    &#39;table_row_styles&#39;: &quot;Header 1&#x3D;header1;&quot;</span><br><span class="line">                        &quot;Header 2&#x3D;header2;&quot;</span><br><span class="line">                        &quot;Header 3&#x3D;header3;&quot;</span><br><span class="line">                        &quot;Table Row&#x3D;tableRow1&quot;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LOCALE_PATHS &#x3D; (</span><br><span class="line">    os.path.join(TCMS_ROOT_PATH, &#39;locale&#39;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">TESTOPIA_XML_VERSION &#x3D; &#39;1.1&#39;</span><br></pre></td></tr></table></figure>需要注意的：1. 检查`INSTALLED_APPS`中，是否有`django.contrib.staticfiles`，很重要！2. DEBUG开关3. 数据库配置4. `STATIC_ROOT`,`STATIC_URL`,`STATICFILES_DIRS`，这三个，真的真的很重要！并且很容易就出问题，看我注释了那么多行就知道我是试了多少种组合了前三条没什么可说的，关键就是第四条，先贴出个`第三个坑`:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django.core.exceptions.ImproperlyConfigured: The STATICFILES_DIRS setting should not contain the STATIC_ROOT setting</span><br></pre></td></tr></table></figure>这个是在进行数据初始化时候报的错，问题很好看，字面意思就是，然后我就开始各种尝试配置`STATIC_ROOT`和`STATICFILES_DIRS`，首先先解释一下这个配置的作用，首先，配置的是路径，文件夹的路径，作用就是存放静态文件，各种js,css等，在你页面加载的静态文件，都在这个文件夹里。在Django项目进行部署时：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py collectstatic</span><br></pre></td></tr></table></figure>命令就会把所有需要的静态文件都复制到你配置的`STATIC_ROOT`文件夹中。所以`STATIC_ROOT`配置的是你app级的静态文件保存地址。那么`STATICFILES_DIRS`呢，这个文件夹，可以看成是所有app公共的静态文件的保存地址，当需要加载静态文件时，django会首先在公共的文件中查找，然后去app级的文件夹查找。至于`STATIC_URL`这个配置其实就是为了映射`STATIC_ROOT`，值基本配`STATIC_URL = &#39;/static/&#39;`即可。### 开启服务首先是初始化数据：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin.py migrate --settings&#x3D;tcms.settings.product</span><br></pre></td></tr></table></figure>将Nitrate一些必须的数据，表初始化；然后是加载静态文件：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin.py collectstatic --settings&#x3D;tcms.settings.product</span><br></pre></td></tr></table></figure>根据你指定的配置，将静态文件拷贝到指定文件夹；然后是创建超级管理员：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin.py createsuperuser --settings&#x3D;tcms.settings.product</span><br></pre></td></tr></table></figure>最后，起服务：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin.py runserver --settings&#x3D;tcms.settings.product</span><br></pre></td></tr></table></figure>到浏览器上`http://127.0.0.1:8000`开始折腾吧~~~## 几个问题### debug-toolbar当打开DEBUG，在进行初始化时，可能会报错：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no module named debug-toolbar</span><br></pre></td></tr></table></figure>很明显，缺包，装包，不过包名不叫`debug-toolbar`,<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install django-debug-toolbar</span><br></pre></td></tr></table></figure>即可。### django.core.exceptions.ImproperlyConfigured: The STATICFILES_DIRS setting should not contain the STATIC_ROOT setting也是字面意思，STATIC_ROOT配置不能包含在STATICFILES_DIRS中，为什么会遇到这个问题，这玩意是我在第一次起服务没报错，但是页面静态文件一个都获取不到，整个页面朴素的不像话时候，尝试解决引发的另一个问题。先说说页面元素不加载，当初我配置是看网上有介绍`STATICFILES_DIRS`可以注释，不需要配，然后我就把`STATIC_ROOT`配成公共文件地址，结果在页面打开Nitrate时候，所有静态文件都是类似于：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;GET &#x2F;static&#x2F;media&#x2F;css&#x2F;bootstrap&#x2F;bootstrap.css HTTP&#x2F;1.1&quot; 404 5904</span><br></pre></td></tr></table></figure>这样的问题，整个页面就朴素的不行。。。然后又尝试把`STATIC_ROOT`注释，这次报的是代码中指明了app配置，STATIC_ROOT该项不能少这样的报错；然后两个都保留，这次就出现了上面那个错；再一次，在没看`setting.py`文件前，把`STATIC_ROOT`设置成了公共的，`STATICFILES_DIRS`设置成了app的，一如既往，静态文件全部加载不出来。。最后才修改成上述配置文件样（试过的组合不止这些，反正是折腾死，还怀疑过是copy静态文件时，少拷了个文件，都想改源码了，唉。。。）所以这个问题解决很简单，把`STATIC_ROOT`设置成了app的，`STATICFILES_DIRS`设置成了公共的。### DATABASES is improperly configured. Please supply the ENGINE value这个报错遇到过好几个，基本是俩原因：1. 改配置文件，输错了2. nitrate用户没有权限检查的改了即可。## 后记周五下午在公司没有搭建成功，搭的都心累了，成果就是一及其朴素的页面；周天早上6点钟开始折腾，一直弄到下午，才完完整整的搭完，唉，真的是个充实的周末...目前环境是搭建在虚拟机中，访问也是只能虚拟机中的Firefox输入`http://127.0.0.1:8000`才能访问，后面需要结合appach和wsgi，至少是完成公司局域网内访问，这个应该挺简单，再弄。。。### 参考文档&gt; [Collecting staticfiles throws ImproperlyConfigured](https://stackoverflow.com/questions/27213752/collecting-staticfiles-throws-improperlyconfigured/27213753)[Managing static files](https://docs.djangoproject.com/en/2.0/howto/static-files/)[Django 使用 Bootstrap，在 DEBUG = True 模式下，部分 js、css 提示 404 错误](https://www.v2ex.com/t/270503)[settings.py中的静态文件管理设置](https://www.jianshu.com/p/2e5515032db0)[django中的setting最佳配置小结](http://www.jb51.net/article/128678.htm)============================================================================================================================================================================================来更新接下来的部署了！******************************使用apache&amp;mod_wsgi部署django项目使用apache和mod_wsgi来部署Nitrate，使得不需要一直在虚拟机里面的浏览器才能打开Nitrate。### 安装httpd&amp;mod_wsgi<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd mod_wsgi</span><br></pre></td></tr></table></figure>### 创建上传文件夹创建长传文件夹，并且修改用户及属组：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;var&#x2F;nitrate&#x2F;uploads</span><br><span class="line">chown apache:apache &#x2F;var&#x2F;nitrate&#x2F;uploads</span><br></pre></td></tr></table></figure>### 配置mod_wsgi在`/etc/httpd/conf.d`文件夹下，创建文件`wsgi.conf`，修改内容：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule wsgi_module modules&#x2F;mod_wsgi.so</span><br></pre></td></tr></table></figure>### 配置Apache&amp;mod_wsgi在`/etc/httpd/conf.d`文件夹下创建nitrate的配置文件`nitrate-httpd.conf`，具体内容如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"># Deployment using mod_wsgi</span><br><span class="line">#</span><br><span class="line"># Useful documentation:</span><br><span class="line"># https:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;1.5&#x2F;howto&#x2F;deployment&#x2F;wsgi&#x2F;</span><br><span class="line"></span><br><span class="line"># Force the use of ssl:</span><br><span class="line">#&lt;IfModule mod_rewrite.c&gt;</span><br><span class="line">#    RewriteEngine on</span><br><span class="line">#    RewriteCond %&#123;HTTPS&#125; off</span><br><span class="line">#    RewriteRule ^(.*)$ https:&#x2F;&#x2F;%&#123;HTTP_HOST&#125;%&#123;REQUEST_URI&#125;</span><br><span class="line">#&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line"># Make sure static files collected to this dir</span><br><span class="line"># Ref https:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;1.5&#x2F;ref&#x2F;contrib&#x2F;staticfiles&#x2F;#django-admin-collectstatic</span><br><span class="line">#Alias &#x2F;static &#x2F;usr&#x2F;share&#x2F;nitrate&#x2F;statici</span><br><span class="line">Alias &#x2F;static &#x2F;home&#x2F;nitrate&#x2F;projects&#x2F;site&#x2F;assets</span><br><span class="line">#Alias &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;Nitrate-4.1-py2.7.egg&#x2F;tcms&#x2F;static</span><br><span class="line"></span><br><span class="line"># Limit threads forked:</span><br><span class="line"># prefork MPM </span><br><span class="line">StartServers 5</span><br><span class="line">MinSpareServers 5</span><br><span class="line">MaxSpareServers 10</span><br><span class="line">MaxClients 256</span><br><span class="line">MaxRequestsPerChild 0</span><br><span class="line"></span><br><span class="line"># Configurations for mod_wsgi</span><br><span class="line">WSGIScriptAlias &#x2F; &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;tcms&#x2F;wsgi.py</span><br><span class="line">WSGIPythonPath &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages</span><br><span class="line">WSGIPassAuthorization On</span><br><span class="line"></span><br><span class="line">&lt;Location &quot;&#x2F;&quot;&gt;</span><br><span class="line">    # &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">    # Handler for mod_wsgi</span><br><span class="line">    # &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">    SetHandler wsgi-script</span><br><span class="line"></span><br><span class="line">    Options All</span><br><span class="line">    AllowOverride All</span><br><span class="line">    Require all granted</span><br><span class="line">    LimitRequestBody 10485760</span><br><span class="line">    AddOutputFilterByType DEFLATE text&#x2F;html text&#x2F;plain text&#x2F;xml text&#x2F;javascript application&#x2F;x-javascript text&#x2F;css</span><br><span class="line"></span><br><span class="line">    ErrorDocument 401 &quot;Your request is unauthorization.&quot;</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br><span class="line"></span><br><span class="line">&lt;Location &quot;&#x2F;static&quot;&gt;</span><br><span class="line">    SetHandler None</span><br><span class="line"></span><br><span class="line">    # Disable auth on the static content, so that we&#39;re aren&#39;t forced to</span><br><span class="line">    # use Kerberos.  Doing so would remove &quot;Expires&quot; headers from the static</span><br><span class="line">    # content, which would lead to poor page-load times.</span><br><span class="line">    AuthType none</span><br><span class="line">    Satisfy Any</span><br><span class="line">    Allow from All</span><br><span class="line"></span><br><span class="line">    # Many file types are likely to benefit from compression</span><br><span class="line">    # Enable gzip compression on them:</span><br><span class="line">    AddOutputFilterByType DEFLATE text&#x2F;html text&#x2F;plain text&#x2F;xml text&#x2F;javascript application&#x2F;x-javascript text&#x2F;css</span><br><span class="line"></span><br><span class="line">    # Set far-future Expires headers on static content</span><br><span class="line">    # (trac 184):</span><br><span class="line">    ExpiresActive On</span><br><span class="line">    ExpiresDefault &quot;access plus 10 years&quot;</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br></pre></td></tr></table></figure>需要注意的几个配置：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alias &#x2F;static &#x2F;home&#x2F;nitrate&#x2F;projects&#x2F;site&#x2F;assets</span><br><span class="line">WSGIScriptAlias &#x2F; &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;tcms&#x2F;wsgi.py</span><br><span class="line">WSGIPythonPath &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages</span><br></pre></td></tr></table></figure>都修改成你自己的本地路径### httpd.conf说实话，我对这玩意是真的不熟悉，就基本没改，路径：`/etc/httpd/conf/httpd.conf`，只需要修改：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServerName example.com:80</span><br><span class="line">Listen ip_address:80</span><br></pre></td></tr></table></figure>我比较懒，直接一个改成`localhost`，另一个改为`80`，就完工了。然后就可以起服务了！！！<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd.service</span><br></pre></td></tr></table></figure>在本地windows下的浏览器应该就可以直接访问虚拟机的ip来访问nitrate了### 可能遇到的问题反正对我来说不是可能，全遇到了。。#### httpd服务启动失败这个问题，原因很多，直接看日志比较正常，我是因为端口配错了才出现#### 页面报错，无法连接mysql，报权限问题首先，检查是否有权限，在确定有权限情况下，基本是系统的问题了。解释一下，虚拟机装的是centos，centos在默认情况下SELinux是打开的，这玩意，是不允许远程连接MySQL资源的。。。所以简单的解决：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>网上有个建议做法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool httpd_can_network_connect_db 1</span><br></pre></td></tr></table></figure>允许Apache访问外部MySQL资源#### 浏览器访问虚拟机IP，静态文件不加载和之前碰到的配路径一样，所有静态文件加载都是403，加载不了，这次，确定不是路径配置的问题，那就是权限问题呗，给你`/static`目录下的文件赋权限，有可执行权限即可。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 755 &#x2F;static</span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Nitrate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos下升级python2.7到3.6</title>
      <link href="2018/04/20/Centos%E4%B8%8B%E5%8D%87%E7%BA%A7python2-7%E5%88%B03-6/"/>
      <url>2018/04/20/Centos%E4%B8%8B%E5%8D%87%E7%BA%A7python2-7%E5%88%B03-6/</url>
      
        <content type="html"><![CDATA[<p>Centos下，修改python版本，保留原2.7.5版本同时，更改默认版本为3.6</p><a id="more"></a><h3 id="保留原版本"><a href="#保留原版本" class="headerlink" title="保留原版本"></a>保留原版本</h3><p>由于yum中会配置python版本，在进行python版本更新时，需要先将yum的配置文件都更改了。<br>首先，切用户</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - root</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;usr&#x2F;bin&#x2F;python2.7 &#x2F;usr&#x2F;bin&#x2F;python2.7.5　　# 保留默认版本python为python2.7.5</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;usr&#x2F;bin&#x2F;python2.7.5 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python2.7.5　　# 创建软连接</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -al &#x2F;usr&#x2F;bin&#x2F;yum*　　# 查看&#x2F;usr&#x2F;bin&#x2F;目录下所有yum文件，共7个</span><br></pre></td></tr></table></figure><p>一个一个改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;python —&gt; #!&#x2F;usr&#x2F;bin&#x2F;python2.7.5</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;usr&#x2F;libexec&#x2F;urlgrabber-ext-down　　# 修改&#x2F;usr&#x2F;libexec&#x2F;目录下 urlgrabber-ext-down</span><br><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;python —&gt; #!&#x2F;usr&#x2F;bin&#x2F;python2.7.5</span><br></pre></td></tr></table></figure><h3 id="安装python3-6"><a href="#安装python3-6" class="headerlink" title="安装python3.6"></a>安装python3.6</h3><h4 id="安装配置环境"><a href="#安装配置环境" class="headerlink" title="安装配置环境"></a>安装配置环境</h4><h5 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h5><p>首先检查是否有安装wget，没有则需要安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install wget</span><br></pre></td></tr></table></figure><h4 id="准备编译环境"><a href="#准备编译环境" class="headerlink" title="准备编译环境"></a>准备编译环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall &#39;Development Tools&#39;</span><br><span class="line">yum install zlib-devel bzip2-devel openssl-devel ncurses-devel</span><br></pre></td></tr></table></figure><h4 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.6.2&#x2F;Python-3.6.2.tgz</span><br><span class="line">tar zxvf Python-3.6.2.tgz</span><br><span class="line">cd Python-3.6.2</span><br><span class="line">.&#x2F;configure</span><br><span class="line">make all</span><br><span class="line">make install</span><br><span class="line">make clean</span><br><span class="line">make distclean</span><br><span class="line">rm -rf &#x2F;usr&#x2F;bin&#x2F;python</span><br><span class="line">rm -rf &#x2F;usr&#x2F;bin&#x2F;python3</span><br><span class="line">rm -rf &#x2F;usr&#x2F;bin&#x2F;python3.6</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3.6 &#x2F;usr&#x2F;bin&#x2F;python</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3.6 &#x2F;usr&#x2F;bin&#x2F;python3</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3.6 &#x2F;usr&#x2F;bin&#x2F;python3.6</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;python -V</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;python3 -V</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;python3.6 -V</span><br><span class="line">rm -rf &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python</span><br><span class="line">rm -rf &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3.6 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3.6 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3</span><br><span class="line">python -V</span><br><span class="line">python3 -V</span><br><span class="line">python3.6 -V</span><br></pre></td></tr></table></figure><pre><code>[root@localhost Python-3.6.2]# python -VPython 3.6.2[root@localhost Python-3.6.2]# python3 -VPython 3.6.2[root@localhost Python-3.6.2]# python3.6 -VPython 3.6.2```安装成功~&gt; [参考链接](https://blog.csdn.net/hu19921016/article/details/72236966)</code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>切换163yum源</title>
      <link href="2018/04/19/%E5%88%87%E6%8D%A2163yum%E6%BA%90/"/>
      <url>2018/04/19/%E5%88%87%E6%8D%A2163yum%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p>来篇福利文</p><a id="more"></a><p>经常装环境的应该遇过下包基本没动静，基于这“伟大”的互联网环境，下包真的是很心累的一件事，好在国内有志之士还是弄了很多福利的，下面：<code>Centos切换国内163yum源</code></p><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>前提条件，linux服务器支持<code>wget</code>，没有则装一个：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br></pre></td></tr></table></figure><p>装好之后，开始切换yum源。</p><h4 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h4><p>首先，搭环境的必要素质，修改配置文件之前，一定要先备份！（踩了n多坑的教训）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo.backup</span><br></pre></td></tr></table></figure><h4 id="下载163源"><a href="#下载163源" class="headerlink" title="下载163源"></a>下载163源</h4><p>切换到<code>/etc/yum.repos.d</code>，wget下载163源配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;mirrors.163.com&#x2F;.help&#x2F;CentOS7-Base-163.repo</span><br></pre></td></tr></table></figure><h4 id="改名"><a href="#改名" class="headerlink" title="改名"></a>改名</h4><p>修改下载完成的文件的名称</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS7-Base-163.repo  &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo</span><br></pre></td></tr></table></figure><h4 id="生成缓存"><a href="#生成缓存" class="headerlink" title="生成缓存"></a>生成缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><p>完工~~~</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL之SQL优化系列（三）</title>
      <link href="2018/04/18/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>2018/04/18/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>MySQL精准分析执行时间</p><a id="more"></a><p>当进行sql性能瓶颈分析时，第一反应肯定是查看sql执行时间，那么当使用慢查询日志，以及explain都无法知晓具体信息时，怎么分析。</p><h3 id="Query-Profiler"><a href="#Query-Profiler" class="headerlink" title="Query Profiler"></a>Query Profiler</h3><p>Query Profiler是MYSQL自带的一种query诊断分析工具，通过它可以分析出一条SQL语句的性能瓶颈在什么地方。通过<code>show variables like &quot;%pro%&quot;;</code>可以查看该工具是否开启：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;%pro%&quot;;</span><br><span class="line">+------------------------------------------+-------+</span><br><span class="line">| Variable_name                            | Value |</span><br><span class="line">+------------------------------------------+-------+</span><br><span class="line">| check_proxy_users                        | OFF   |</span><br><span class="line">| have_profiling                           | YES   |</span><br><span class="line">| mysql_native_password_proxy_users        | OFF   |</span><br><span class="line">| performance_schema_max_program_instances | -1    |</span><br><span class="line">| profiling                                | OFF   |</span><br><span class="line">| profiling_history_size                   | 15    |</span><br><span class="line">| protocol_version                         | 10    |</span><br><span class="line">| proxy_user                               |       |</span><br><span class="line">| sha256_password_proxy_users              | OFF   |</span><br><span class="line">| slave_compressed_protocol                | OFF   |</span><br><span class="line">| stored_program_cache                     | 256   |</span><br><span class="line">+------------------------------------------+-------+</span><br><span class="line">11 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>发现当前为关闭状态，手动开启：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set profiling &#x3D; 1;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>首先执行几条sql，作为分析样本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sleep(3);</span><br><span class="line">+----------+</span><br><span class="line">| sleep(3) |</span><br><span class="line">+----------+</span><br><span class="line">|        0 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (3.00 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select 1;</span><br><span class="line">+---+</span><br><span class="line">| 1 |</span><br><span class="line">+---+</span><br><span class="line">| 1 |</span><br><span class="line">+---+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>查看执行情况：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profiles;</span><br><span class="line">+----------+------------+-----------------------------+</span><br><span class="line">| Query_ID | Duration   | Query                       |</span><br><span class="line">+----------+------------+-----------------------------+</span><br><span class="line">|        1 | 0.00325925 | show variables like &quot;%pro%&quot; |</span><br><span class="line">|        2 | 2.99971075 | select sleep(3)             |</span><br><span class="line">|        3 | 0.00051050 | select 1                    |</span><br><span class="line">+----------+------------+-----------------------------+</span><br><span class="line">3 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>可以看出具体执行时间，若想查看具体那一条SQL的具体信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profile for query 2;      </span><br><span class="line">+----------------------+----------+   </span><br><span class="line">| Status               | Duration |   </span><br><span class="line">+----------------------+----------+   </span><br><span class="line">| starting             | 0.000103 |   </span><br><span class="line">| checking permissions | 0.000008 |   </span><br><span class="line">| Opening tables       | 0.000006 |   </span><br><span class="line">| init                 | 0.000016 |   </span><br><span class="line">| optimizing           | 0.000008 |   </span><br><span class="line">| executing            | 0.000018 |   </span><br><span class="line">| User sleep           | 2.999385 |   </span><br><span class="line">| end                  | 0.000016 |   </span><br><span class="line">| query end            | 0.000009 |   </span><br><span class="line">| closing tables       | 0.000005 |   </span><br><span class="line">| freeing items        | 0.000115 |   </span><br><span class="line">| cleaning up          | 0.000023 |   </span><br><span class="line">+----------------------+----------+   </span><br><span class="line">12 rows in set, 1 warning (0.00 sec)  </span><br></pre></td></tr></table></figure><h4 id="对系统分析"><a href="#对系统分析" class="headerlink" title="对系统分析"></a>对系统分析</h4><p>查看执行sql中对系统的影响，例如，查看磁盘IO：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profile block io for query 2;</span><br><span class="line">+----------------------+----------+--------------+---------------+</span><br><span class="line">| Status               | Duration | Block_ops_in | Block_ops_out |</span><br><span class="line">+----------------------+----------+--------------+---------------+</span><br><span class="line">| starting             | 0.000103 |         NULL |          NULL |</span><br><span class="line">| checking permissions | 0.000008 |         NULL |          NULL |</span><br><span class="line">| Opening tables       | 0.000006 |         NULL |          NULL |</span><br><span class="line">| init                 | 0.000016 |         NULL |          NULL |</span><br><span class="line">| optimizing           | 0.000008 |         NULL |          NULL |</span><br><span class="line">| executing            | 0.000018 |         NULL |          NULL |</span><br><span class="line">| User sleep           | 2.999385 |         NULL |          NULL |</span><br><span class="line">| end                  | 0.000016 |         NULL |          NULL |</span><br><span class="line">| query end            | 0.000009 |         NULL |          NULL |</span><br><span class="line">| closing tables       | 0.000005 |         NULL |          NULL |</span><br><span class="line">| freeing items        | 0.000115 |         NULL |          NULL |</span><br><span class="line">| cleaning up          | 0.000023 |         NULL |          NULL |</span><br><span class="line">+----------------------+----------+--------------+---------------+</span><br><span class="line">12 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>可以完整的看出<code>select sleep(3);</code>该sql执行过程中对磁盘IO的影响。类似的还有：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profile cpu for query 2;</span><br><span class="line">mysql&gt; show profile memory for query 2;</span><br><span class="line">mysql&gt; show profile swaps for query 2;</span><br><span class="line">mysql&gt; show profile context switches for query 2;</span><br><span class="line">mysql&gt; show profile all for query 2;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL-SQL优化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> profiler </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>loadruner日常总结</title>
      <link href="2018/04/18/loadruner%E6%97%A5%E5%B8%B8%E6%80%BB%E7%BB%93/"/>
      <url>2018/04/18/loadruner%E6%97%A5%E5%B8%B8%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>日常工作中遇到的loadrunner的相关问题的总结：</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>首先，使用的环境（版本）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WIN7 企业版 Service Pack1</span><br><span class="line">loadrunner 12.50</span><br><span class="line">IE 11</span><br></pre></td></tr></table></figure><h4 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h4><p>本来用习惯了，到了新公司第一件事就是装了<code>WIN10</code>，loadrunner版本使用的也是<code>loadrunner 12.50</code>，然后，开始工作，录制脚本时候，开始了各种神坑问题，对了，先说一句，笔记本是<code>Thinkpad T430</code>（不是win 10系统的锅）。录制时候就开始了坑死人的经历，第一个是基本相当于不支持<code>chrome</code>，想用chrome录制，必须开代理或者<code>fiddle</code>，简直是愁；换成firefox，浏览器都打不开，用IE，各种的需要安全证书，或者就是压根浏览器直接未响应。<br>好不容易开着代理，用chrome录制好了，回放，70%的概率电脑会蓝屏，无语至极。</p><h4 id="艰难的环境搭建"><a href="#艰难的环境搭建" class="headerlink" title="艰难的环境搭建"></a>艰难的环境搭建</h4><p>没办法，日常工作现在就是在性能测试上，只好放弃win10，转用win7了（再次再次提醒，T430千万别用win10来搭配loadrunner！！！）<br>再次重装系统，这次用了什么鬼纯净版，也就是<code>ghost版</code>，是人为在官方原本基础上的优化版，唉，装是装好了，事又来了，众所周知，loadrunner和浏览器的兼容实在是个很深的坑尤其是64位的windows系统，更是能选用的很少。试了各种chrome，firefox，ie甚至什么遨游，世界之窗，基本是快奔溃的状态。实验半天，基本兼容性是:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IE &gt; firefox &gt; chrome</span><br></pre></td></tr></table></figure><p>IE最好，firefox网上基本是建议用25左右的版本，但是，没有64位的啊。。。chrome就别提了，老样子，要么是要开代理，要么是直接打开浏览器就未响应。所以，首选还是IE啊，但是，试了下，公司的测试网站，在IE8上压根就打不开（win7自带是IE8），版本太低了！必须要升级到IE11，升级是简单，找到<code>windows update</code>搜索下载，下载完更新即可，安装完成需要重启系统，然后坑来了：<strong>ghost版装的系统，直接帮你“优化了”权限，基本你是默认就是管理员，然后在安装windows更新时候，问题就来了，系统会在判断你权限时候，发现权限混乱，直接更新失败，返回还原点，windows——update failure，error code：80070005</strong>，唉，简直是半疯。在实验了其他n中手动更新IE的方法失败之后，只能放弃。<br>直接上<a href="https://msdn.itellyou.cn/">MSDN</a>下载官方镜像，重新安装系统，这次终于是成功将IE8更新到IE11了。</p><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="CV证书"><a href="#CV证书" class="headerlink" title="CV证书"></a>CV证书</h4><p>在录制时候，经常会遇到不适用loadrunner录制，网页可以打开，使用loadrunner录制，网页打开显示“无法此页”；可能在浏览器显示该页面之前，已经弹出了一个类似<code>该网站CV证书。。。</code>的弹窗提示，意思很明显，该测试网站，在你的浏览器安全证书中没有它的证书，所以浏览器的安全策略就过滤了该浏览器的连接，页面就打不开了。</p><h5 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h5><p>在录制时候：<br>点击Recoding Oftions，在Network栏，点击Mapping and Filtering，Port mapping选择WinINet level data，点击确定，录制即可。</p><h4 id="loadrunner未响应"><a href="#loadrunner未响应" class="headerlink" title="loadrunner未响应"></a>loadrunner未响应</h4><p>该问题，网上有很多解答，基本第一条就是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IE - Internet选项 - 高级 - 启用第三方软件扩展（取消勾选）</span><br></pre></td></tr></table></figure><p>然后，我是直接用管理员登录的系统，再进行录制就可以了。附上网上有个很全的回答：<br><a href="http://www.cnblogs.com/boheyixia/p/3758508.html">loadrunner点击录制不响应</a></p><h4 id="请求接口HTTP-CODE-500"><a href="#请求接口HTTP-CODE-500" class="headerlink" title="请求接口HTTP CODE 500"></a>请求接口HTTP CODE 500</h4><p>在排除接口异常，使用其他如postman，soupui等工具直接请求可以成功返回数据情况下，查看使用loadrunner录制的脚本，是否在传参的时候将参数进行格式化，以<code>JSON</code>格式传参，我是遇到过很多次，直接使用loadrunner录制脚本，录制出来的脚本中缺少格式化:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;EncType&#x3D;application&#x2F;json; charset&#x3D;utf-8&quot;, </span><br></pre></td></tr></table></figure><p>录制出来的脚本类似：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">web_custom_request(&quot;2018_1&quot;, </span><br><span class="line">&quot;URL&#x3D;https:&#x2F;&#x2F;www.test.com&#x2F;api&#x2F;config&#x2F;calendar&#x2F;1&#x2F;2018&quot;, </span><br><span class="line">&quot;Method&#x3D;PUT&quot;, </span><br><span class="line">&quot;Resource&#x3D;0&quot;, </span><br><span class="line">&quot;RecContentType&#x3D;application&#x2F;json&quot;, </span><br><span class="line">&quot;Referer&#x3D;https:&#x2F;&#x2F;www.test.com&#x2F;app&quot;, </span><br><span class="line">&quot;Snapshot&#x3D;t16.inf&quot;,</span><br><span class="line">&quot;Mode&#x3D;HTML&quot;, </span><br><span class="line">&quot;Body&#x3D;&#123;\&quot;2018-11-01\&quot;:1&#125;&quot;, </span><br><span class="line">LAST);</span><br></pre></td></tr></table></figure><p>这样请求，即使加上所有token，很可能还是会500，所以手工加上一句格式化json的即可。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>loadrunner作为付费软件，限制其实还是挺多的，日常生活中遇到什么问题，还需要继续记录。<br>P.S 做性能测试，真的是，能用Jmeter或者locust，真的，就转吧。。。破解个限制这么多的，实在是，唉。。。</p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> loadrunner </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOs7强制修改MySQL中root密码</title>
      <link href="2018/04/04/CentOs7%E5%BC%BA%E5%88%B6%E4%BF%AE%E6%94%B9MySQL%E4%B8%ADroot%E5%AF%86%E7%A0%81/"/>
      <url>2018/04/04/CentOs7%E5%BC%BA%E5%88%B6%E4%BF%AE%E6%94%B9MySQL%E4%B8%ADroot%E5%AF%86%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>centos7强制修改MySQL默认密码</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近需要搭建zabbix，需要在centos7上搭建MySQL服务器；这个很简单，直接命令：<br>获取MySQL源：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -Uvh https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-11.noarch.rpm</span><br></pre></td></tr></table></figure><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install mysql-* --skip-broken</span><br></pre></td></tr></table></figure><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>安装过程，由于公司网简直惨不忍睹，中间一度断掉了，都不知道哪边安装出错了。。。好不容易看着安装成功之后，查找默认的root密码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log</span><br></pre></td></tr></table></figure><p>然后就悲剧了，这个日志文件，压根就是空的，root密码跑哪玩去了！！！<br>然后试了试，貌似好像可以起服务。。见鬼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br><span class="line">systemctl status mysqld</span><br></pre></td></tr></table></figure><p>不过这样还是进不了控制台啊，没密码啊，没办法，只有强制修改root密码。</p><h3 id="强制修改密码"><a href="#强制修改密码" class="headerlink" title="强制修改密码"></a>强制修改密码</h3><p>首先强制修改配置文件，<code>/etc/my.cnf</code><br>添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-grant-tables&#x3D;1</span><br></pre></td></tr></table></figure><p>添加<code>skip-grant-tables=1</code>这行，然后重启MySQL服务。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><h4 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h4><p>进入MySQL控制台：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br></pre></td></tr></table></figure><p>打印：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.7.21 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><h4 id="修改密码-1"><a href="#修改密码-1" class="headerlink" title="修改密码"></a>修改密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">update user set authentication_string &#x3D; password(&quot;xxxx&quot;) where user&#x3D;&quot;root&quot;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>然后将<code>/etc/my.cnf</code>下<code>skip-grant-tables=1</code>注释掉，重启MySQL服务。</p><h3 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h3><p>使用修改完成的root密码登录MySQL控制台之后，可以进入控制台：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.7.21</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><p>但是有问题：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.</span><br></pre></td></tr></table></figure><p>按照提示，我们在修改root密码时候，应该使用的是alter而不是update来更新密码，所以，重新修改密码:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter user &#39;root&#39;@&#39;localhost&#39; identified by &#39;QWEqwe+342&#39;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>再次重启服务即可。</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yum安装软件失败</title>
      <link href="2018/04/04/yum%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%A4%B1%E8%B4%A5/"/>
      <url>2018/04/04/yum%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%A4%B1%E8%B4%A5/</url>
      
        <content type="html"><![CDATA[<p>centos运行yum报错解决办法</p><a id="more"></a><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>使用yum安装软件时，报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Another app is currently holding the yum lock; waiting for it to exit...</span><br><span class="line">  The other application is: PackageKit</span><br><span class="line">    Memory : 130 M RSS (1.0 GB VSZ)</span><br><span class="line">    Started: Wed Apr  4 10:44:50 2018 - 04:01 ago</span><br><span class="line">    State  : Sleeping, pid: 11199</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><p>该问题可能是由于系统目前处于自动升级状态，所以锁定了yum，只要强制关闭yum进程即可重新运行yum</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf &#x2F;var&#x2F;run&#x2F;yum.pid</span><br></pre></td></tr></table></figure><h3 id="优质yum源"><a href="#优质yum源" class="headerlink" title="优质yum源"></a>优质yum源</h3><p>Remi repository 是包含最新版本 PHP 和 MySQL 包的 Linux 源，由 Remi 提供维护。有个这个源之后，使用 YUM 安装或更新 PHP、MySQL、phpMyAdmin 等服务器相关程序的时候就非常方便了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;dl.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;epel-release-latest-7.noarch.rpm</span><br><span class="line">wget http:&#x2F;&#x2F;rpms.remirepo.net&#x2F;enterprise&#x2F;remi-release-7.rpm</span><br><span class="line">rpm -Uvh remi-release-7.rpm epel-release-latest-7.noarch.rpm</span><br><span class="line"># for RHEL only</span><br><span class="line">subscription-manager repos --enable&#x3D;rhel-7-server-optional-rpms</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://www.ttlsa.com/yum/linux-remi-repository/">参考文章</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Centos7 </tag>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL之SQL优化系列（二）</title>
      <link href="2018/04/03/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2018/04/03/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>通过explain分析低效SQL的执行计划</p><a id="more"></a><h3 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h3><p>使用的数据库依然是mysql示例库sakila<br>接着上篇的<a href="http://tokyle.com/2018/03/09/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/#more">MySQL之SQL优化系列（一）</a><br>当通过慢查询日志定位到执行效率较低的SQL之后，使用explain进行低效SQL的分析。</p><h3 id="使用EXPLAIN分析低效SQL的执行计划"><a href="#使用EXPLAIN分析低效SQL的执行计划" class="headerlink" title="使用EXPLAIN分析低效SQL的执行计划"></a>使用EXPLAIN分析低效SQL的执行计划</h3><p>使用EXPLAIN可以获取MySQL是如何执行SELECT语句的，包括在SELECT语句执行过程中表如何连接以及连接的顺序，如下示例SQL执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select sum(amount) from customer a,payment b where 1&#x3D;1 and a.customer_id &#x3D; b.customer_id and email&#x3D;&#39;JANE.BENNETT@sakilacustomer.org&#39;\G  </span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           id: 1</span><br><span class="line">  select_type: SIMPLE</span><br><span class="line">        table: a</span><br><span class="line">   partitions: NULL</span><br><span class="line">         type: ALL</span><br><span class="line">possible_keys: PRIMARY</span><br><span class="line">          key: NULL</span><br><span class="line">      key_len: NULL</span><br><span class="line">          ref: NULL</span><br><span class="line">         rows: 599</span><br><span class="line">     filtered: 10.00</span><br><span class="line">        Extra: Using where</span><br><span class="line">*************************** 2. row *************************** </span><br><span class="line">           id: 1                                               </span><br><span class="line">  select_type: SIMPLE                                          </span><br><span class="line">        table: b                                               </span><br><span class="line">   partitions: NULL                                            </span><br><span class="line">         type: ref                                             </span><br><span class="line">possible_keys: idx_fk_customer_id                              </span><br><span class="line">          key: idx_fk_customer_id                              </span><br><span class="line">      key_len: 2                                               </span><br><span class="line">          ref: sakila.a.customer_id                            </span><br><span class="line">         rows: 26                                              </span><br><span class="line">     filtered: 100.00                                          </span><br><span class="line">        Extra: NULL                                            </span><br><span class="line">2 rows in set, 1 warning (0.01 sec)                            </span><br></pre></td></tr></table></figure><p>字段解释：</p><ul><li>select_type:表示select的类型，常见取值有SIMPLE(简单表，不使用表连接或子查询)、PRIMARY(主查询，外层的查询)、UNION(UNION中的第二个或者后面的查询语句)、SUBQUERY(子查询中的第一个SELECT)</li><li>table:输出结果集的表</li><li>type:表示MySQL在表中找到所需行的方法，或者称为访问类型，常见的有：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALL —— index —— range —— ref —— eq_ref —— const,system —— NULL</span><br></pre></td></tr></table></figure>从做到右，性能由最差到最好。示例：</li></ul><ol><li>type=ALL，全表扫描，MySQL遍历全表来找到匹配行：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film limit 1\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           id: 1                                              </span><br><span class="line">  select_type: SIMPLE                                         </span><br><span class="line">        table: film                                           </span><br><span class="line">   partitions: NULL                                           </span><br><span class="line">         type: ALL                                            </span><br><span class="line">possible_keys: NULL                                           </span><br><span class="line">          key: NULL                                           </span><br><span class="line">      key_len: NULL                                           </span><br><span class="line">          ref: NULL                                           </span><br><span class="line">         rows: 1000                                           </span><br><span class="line">     filtered: 100.00                                         </span><br><span class="line">        Extra: NULL                                           </span><br><span class="line">1 row in set, 1 warning (0.00 sec)                            </span><br></pre></td></tr></table></figure></li><li>type=index，索引全扫描，MySQL遍历整个索引来查询匹配的行：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from film;</span><br></pre></td></tr></table></figure>获取得到film表的索引：<code>film_id(主键)</code>,<code>title</code>,<code>language_id</code>,<code>original_language_id</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;  explain select title from film\G</span><br><span class="line">*************************** 1. row *************************** </span><br><span class="line">           id: 1                                               </span><br><span class="line">  select_type: SIMPLE                                          </span><br><span class="line">        table: film                                            </span><br><span class="line">   partitions: NULL                                            </span><br><span class="line">         type: index                                           </span><br><span class="line">possible_keys: NULL                                            </span><br><span class="line">          key: idx_title                                       </span><br><span class="line">      key_len: 767                                             </span><br><span class="line">          ref: NULL                                            </span><br><span class="line">         rows: 1000                                            </span><br><span class="line">     filtered: 100.00                                          </span><br><span class="line">        Extra: Using index                                     </span><br><span class="line">1 row in set, 1 warning (0.00 sec)                             </span><br></pre></td></tr></table></figure></li><li>type=range,索引范围扫描，常见的有<code>between</code>,<code>&gt;</code>,<code>&lt;</code>等。</li><li>type=ref，使用非唯一索引扫描或唯一索引的前缀扫描，返回匹配单独值得记录行，例如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from payment where customer_id&#x3D;24\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           id: 1                                              </span><br><span class="line">  select_type: SIMPLE                                         </span><br><span class="line">        table: payment                                        </span><br><span class="line">   partitions: NULL                                           </span><br><span class="line">         type: ref                                            </span><br><span class="line">possible_keys: idx_fk_customer_id                             </span><br><span class="line">          key: idx_fk_customer_id                             </span><br><span class="line">      key_len: 2                                              </span><br><span class="line">          ref: const                                          </span><br><span class="line">         rows: 25                                             </span><br><span class="line">     filtered: 100.00                                         </span><br><span class="line">        Extra: NULL                                           </span><br><span class="line">1 row in set, 1 warning (0.00 sec)                            </span><br></pre></td></tr></table></figure>索引idx_fk_customer_id是非唯一索引，查询条件为等值查询条件customer_id=24，所以扫描索引的类型为ref。ref还经常出现在join操作中。</li><li>type=eq_ref，类似ref，区别在于使用的索引是唯一索引，对于每一个索引的键值，表中只有一条记录匹配。换句换说，就是在进行多表连接时，使用得失primary key或者unique index作为关联条件。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select * from film a,film_text b where a.film_id &#x3D; b.film_id\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           id: 1                                              </span><br><span class="line">  select_type: SIMPLE                                         </span><br><span class="line">        table: b                                              </span><br><span class="line">   partitions: NULL                                           </span><br><span class="line">         type: ALL                                            </span><br><span class="line">possible_keys: PRIMARY                                        </span><br><span class="line">          key: NULL                                           </span><br><span class="line">      key_len: NULL                                           </span><br><span class="line">          ref: NULL                                           </span><br><span class="line">         rows: 1000                                           </span><br><span class="line">     filtered: 100.00                                         </span><br><span class="line">        Extra: NULL                                           </span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">           id: 1                                              </span><br><span class="line">  select_type: SIMPLE                                         </span><br><span class="line">        table: a                                              </span><br><span class="line">   partitions: NULL                                           </span><br><span class="line">         type: eq_ref                                         </span><br><span class="line">possible_keys: PRIMARY                                        </span><br><span class="line">          key: PRIMARY                                        </span><br><span class="line">      key_len: 2                                              </span><br><span class="line">          ref: sakila.b.film_id                               </span><br><span class="line">         rows: 1                                              </span><br><span class="line">     filtered: 100.00                                         </span><br><span class="line">        Extra: Using where                                    </span><br><span class="line">2 rows in set, 1 warning (0.00 sec)                           </span><br></pre></td></tr></table></figure></li><li>type=const/system，表单中有最多一个匹配行，查询起来非常迅速，所以这个匹配行中的其他列的值可以被优化器在当前查询中当做常量来处理，例如，根据主键primary key或者唯一索引unique index进行的查询。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">alter table customer add unique index uk_email(email);</span><br><span class="line">mysql&gt; explain select * from (select * from customer where email&#x3D;&#39;LINDA.WILLIAMS@sakilacustomer.org&#39;) a\G</span><br><span class="line">*************************** 1. row *************************** </span><br><span class="line">           id: 1                                               </span><br><span class="line">  select_type: SIMPLE                                          </span><br><span class="line">        table: customer                                        </span><br><span class="line">   partitions: NULL                                            </span><br><span class="line">         type: const                                           </span><br><span class="line">possible_keys: uk_email                                        </span><br><span class="line">          key: uk_email                                        </span><br><span class="line">      key_len: 153                                             </span><br><span class="line">          ref: const                                           </span><br><span class="line">         rows: 1                                               </span><br><span class="line">     filtered: 100.00                                          </span><br><span class="line">        Extra: NULL                                            </span><br><span class="line">1 row in set, 1 warning (0.00 sec)                             </span><br></pre></td></tr></table></figure>通过唯一索引uk_email访问的时候，类型type为const。</li></ol><ul><li>possible_keys：表示查询时可能使用的索引</li><li>key：表示实际使用的索引</li><li>key_len：使用到索引字段的长度、</li><li>rows：扫描行的数量</li><li>Extra：执行情况的说明和描述，包含不适合在其他列中显示但是对执行计划非常重要的额外信息。</li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL-SQL优化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> explain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python性能测试框架locust（一）</title>
      <link href="2018/03/30/python%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6locust%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2018/03/30/python%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6locust%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>基于python的性能测试框架LOCUST系列一</p><a id="more"></a><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>首先，这个框架是做性能测试的，然后，基于python编写！！！所以，不可能不研究研究啊。<br>LOCUST英文意思是“蝗虫”，感受感受使用locust进行性能测试，并发请求就像铺天盖地的蝗虫一样攻击你的系统，嗯，想想都可怕。</p><p>在Locust测试框架中，测试场景是由纯python脚本编写，对于http以及https协议，可以使用python的requests库作为客户端。对于其他协议，locust也提供有接口。也就是说，只要我们使用python编写对应的请求，就能方便的用locust进行压力测试。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装locust很简单，日常操作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install locustio</span><br></pre></td></tr></table></figure><h3 id="demo示例"><a href="#demo示例" class="headerlink" title="demo示例"></a>demo示例</h3><p>官方demo：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle shi</span><br><span class="line">@time: 2018&#x2F;3&#x2F;30&#x2F;030 16:59</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from locust import HttpLocust, TaskSet, task</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class UserBehavior(TaskSet):</span><br><span class="line">    def on_start(self):</span><br><span class="line">        &quot;&quot;&quot; on_start is called when a Locust start before any task is scheduled &quot;&quot;&quot;</span><br><span class="line">        self.login()</span><br><span class="line"></span><br><span class="line">    def login(self):</span><br><span class="line">        self.client.post(&quot;&#x2F;login&quot;, &#123;&quot;username&quot;: &quot;ellen_key&quot;, &quot;password&quot;: &quot;education&quot;&#125;)</span><br><span class="line"></span><br><span class="line">    @task(2)</span><br><span class="line">    def index(self):</span><br><span class="line">        self.client.get(&quot;&#x2F;&quot;)</span><br><span class="line"></span><br><span class="line">    @task(1)</span><br><span class="line">    def profile(self):</span><br><span class="line">        self.client.get(&quot;&#x2F;profile&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class WebsiteUser(HttpLocust):</span><br><span class="line">    task_set &#x3D; UserBehavior</span><br><span class="line">    host &#x3D; &#39;http:&#x2F;&#x2F;example.com&#39;</span><br><span class="line">    min_wait &#x3D; 5000</span><br><span class="line">    max_wait &#x3D; 9000</span><br></pre></td></tr></table></figure><p>cmd进入该文件所在路径下，执行locust命令，即可开启locust web服务，默认端口8089</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">E:\py_workspace\LocustTest\codings\TestScripts &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; ls</span><br><span class="line">__init__.py  __pycache__  locustfile.py</span><br><span class="line"></span><br><span class="line">E:\py_workspace\LocustTest\codings\TestScripts &#123;git&#125;</span><br><span class="line">&#123;lamb&#125; locust</span><br><span class="line">[2018-03-30 17:22:44,919] 3HET0MVY93LITXF&#x2F;INFO&#x2F;locust.main: Starting web monitor at *:8089</span><br><span class="line">[2018-03-30 17:22:44,920] 3HET0MVY93LITXF&#x2F;INFO&#x2F;locust.main: Starting Locust 0.8.1</span><br></pre></td></tr></table></figure><p>打开浏览器，输入url:<code>http://localhost:8089</code>即可访问locust web。</p><p>tips：<br>使用<code>locust</code>打开服务前提是脚本名称是<code>locustfile.py</code>；否则需要执行指定脚本的命令：<br><code>locust -f mylocustFile.py -P 7070</code>指定文件和端口</p><h3 id="demo简单分析"><a href="#demo简单分析" class="headerlink" title="demo简单分析"></a>demo简单分析</h3><p>官方的demo对于<code>http://example.com</code>进行压测，随机访问首页（<code>/</code>）以及页面（<code>/profile</code>）比例为2:1，每次请求间隔为5~9s。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>locust现在还是刚刚开始接触，看着官方介绍的，功能相当齐全，尤其是我还是一个只有python编码能力的菜鸡。。。太对胃口了。。。好好研究！</p><blockquote><p><a href="https://locust.io/">官网</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Locust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>loadrunner监控Mysql</title>
      <link href="2018/03/30/loadrunner%E7%9B%91%E6%8E%A7Mysql/"/>
      <url>2018/03/30/loadrunner%E7%9B%91%E6%8E%A7Mysql/</url>
      
        <content type="html"><![CDATA[<p>使用loadrunner监控mysql</p><!-- more  --><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近工作需要研究怎么深度性能测试，使用的工具基本是loadrunner，jmeter或者基于python的框架locust。<br>近期一段时间应该和lr打交道会比较多，lr最为一个收费的专业性能测试软件，功能是毋庸置疑的相当强大，但是，貌似我没有找到监控mysql的模块。。sql server倒是有，也可能是我远离lr太长时间了。</p><h3 id="mysql性能监控"><a href="#mysql性能监控" class="headerlink" title="mysql性能监控"></a>mysql性能监控</h3><p>在日常性能测试过程中，除了需要对系统TPS，RT这样的参数进行监控以及各服务器的CPU，MEMORY，IO之外，还要实时对数据库进行监控，因为接触的多的是mysql，就以MySQL为例。</p><p>当mysql出现运行缓慢，或者出于某种原因无法响应查询，可以监控以下几个指标来获取解决：</p><ol><li>查询吞吐量</li><li>查询执行性能</li><li>连接情况</li><li>数据库缓冲池</li></ol><h4 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h4><p>由于本篇重点是介绍监控MySQL，对于mysql的性能指标就只解释一种，以吞吐量为例：<br>MySQL中有一个<code>Questions</code>的内部计数器，客户端每发送一个查询，改值加一。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &quot;Questions&quot;;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Questions     | 665   |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>所以对<code>Questions</code>该指标进行监控，当该指标发生突变，如骤降或者骤增，很可能数据库出现了问题。</p><h3 id="HP-SiteScope"><a href="#HP-SiteScope" class="headerlink" title="HP SiteScope"></a>HP SiteScope</h3><p>WIKIPEDIA给的解释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HP SiteScope is agentless monitoring software focused on monitoring the availability and performance of distributed IT infrastructures, including Servers, Network devices and services, Applications and application components, operating systems and various IT enterprise components.</span><br></pre></td></tr></table></figure><p>大致意思是：HP SiteScope是无代理监控软件，专注于监控分布式IT基础架构的可用性和性能，包括服务器，网络设备和服务，应用程序和应用程序组件，操作系统和各种IT企业组件。<br>所以，HP SiteScope很适合用来监控MySQL。</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>网上找一圈硬是没找到安装包，很怀疑对于mysql的监控有更简单的方法，或者就是压根没人做开源的。。直接梯子到官网下了个11.3的版本：</p><blockquote><p><a href="https://pan.baidu.com/s/1h3MZP0JM3TTTw8q9nbcG2A">度娘盘连接</a>  密码：7l99<br><a href="https://pan.baidu.com/s/1GpszOZXKS8od5barKx0c1g">mysql驱动</a>密码：y9i8</p></blockquote><p>安装很简单，压缩包打开，找到<code>HPSiteScope_11.30_setup.exe</code>一路next即可，mysql驱动放在<code>D:\HP\SiteScope\java\lib\ext</code>下。</p><h3 id="LR监控MySQL操作"><a href="#LR监控MySQL操作" class="headerlink" title="LR监控MySQL操作"></a>LR监控MySQL操作</h3><p>安装完成HP SiteScope后，在浏览器输入url：<code>http://127.0.0.1:8080/SiteScope</code>即可打开主页</p><h4 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h4><p>输入url之后，可能会遇见页面是空白的情况（我就遇到过），首先，别用chrome和firefox，这玩意貌似只能在IE上面打开；其次，你本地需要JDK环境（java -version）要求JDK1.6以上。最后，IE的internet选项中，把局域网设置里的代理勾掉。以上就是我解决的页面空白的三个办法（我全中过，折腾老半天）</p><p>进入HP SiteScope首页，在<code>SiteScope</code>上右键，<code>新建组</code>，输入组名之后，右键创建的组，<code>新建监控器</code>，选择<code>数据库计数器</code>，只需要配置几项：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">数据库连接URL:jdbc:mysql:&#x2F;&#x2F;localhost&#x2F;sakila</span><br><span class="line">查询：show status</span><br><span class="line">数据库驱动程序： org.gjt.mm.mysql.Driver</span><br><span class="line">凭据：输入数据库用户名及密码</span><br><span class="line">计数器：选择计数器：</span><br><span class="line">Com_insert_select&#x2F;Value</span><br><span class="line">Com_select&#x2F;Value</span><br><span class="line">counters in error</span><br><span class="line">Questions&#x2F;Value</span><br><span class="line">Select_scan&#x2F;Value</span><br></pre></td></tr></table></figure><p>点击验证保存，完成保存。</p><h4 id="lr配置监控"><a href="#lr配置监控" class="headerlink" title="lr配置监控"></a>lr配置监控</h4><p>打开LR Contraller，配置完场景，在run页面，可用图，选择<code>SiteScope图</code>，右键SiteScope，点击打开，右击打开的SiteScope图，点击<code>添加度量</code>，弹出的窗口有两个添加，上面一个是添加服务器，我添加的是<code>localhost</code>端口<code>8888</code>，下一个添加是选择添加的组件，选择需要的添加组件，点击确定，即可完成配置。<br>（没办法，图床都太坑了，所以全程无图。。。请原谅。。。）</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>官网下载的HP SiteScope是未破解版，有时间还是需要折腾个破解版的研究研究。工具是会用了，原理根本没去看，这是病，不懂原理就直接使用，总感觉不踏实。</p><blockquote><p><a href="https://www.jianshu.com/p/fce30e333578">参考地址</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> loadrunner </tag>
            
            <tag> SiteScope </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL之SQL优化系列（一）</title>
      <link href="2018/03/09/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2018/03/09/MySQL%E4%B9%8BSQL%E4%BC%98%E5%8C%96%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>作为一个不知道几分之几的程序员，日常性能测试的关注点之一就是SQL的执行效率，SQL优化。</p><a id="more"></a><h3 id="案例库"><a href="#案例库" class="headerlink" title="案例库"></a>案例库</h3><p>mysql提供有类似oracle的scott库（root/tiger，至今记得接触oracle时候这个趣闻，创始人是库名，猫的名字是密码）的案例库sakila，基本可以使用来完成SQL优化的测试。</p><blockquote><p><a href="http://downloads.mysql.com/docs/sakila-db.zip">sakila库下载地址</a></p></blockquote><p>压缩包中有三个文件：<code>sakila-schema.sql</code>，<code>sakila-data.sql</code>，<code>sakila.mwb</code>；sakila-schema.sql建库及表，sakila-data.sql插数据，sakila.mwb可以使用<code>mysql workbench</code>打开，是sakila的数据模型（MySQL Mode）</p><blockquote><p><a href="https://dev.mysql.com/downloads/workbench/">MySQL workbench官方下载地址</a><br><a href="https://pan.baidu.com/s/1uiiOk-O0h3O4dtiiQolXVg">度娘盘地址</a>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;密码：25y4</p></blockquote><p>安装完成：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use sakila;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------------------+</span><br><span class="line">| Tables_in_sakila           |</span><br><span class="line">+----------------------------+</span><br><span class="line">| actor                      |</span><br><span class="line">| actor_info                 |</span><br><span class="line">| address                    |</span><br><span class="line">| category                   |</span><br><span class="line">| city                       |</span><br><span class="line">| country                    |</span><br><span class="line">| customer                   |</span><br><span class="line">| customer_list              |</span><br><span class="line">| film                       |</span><br><span class="line">| film_actor                 |</span><br><span class="line">| film_category              |</span><br><span class="line">| film_list                  |</span><br><span class="line">| film_text                  |</span><br><span class="line">| inventory                  |</span><br><span class="line">| language                   |</span><br><span class="line">| nicer_but_slower_film_list |</span><br><span class="line">| payment                    |</span><br><span class="line">| rental                     |</span><br><span class="line">| sales_by_film_category     |</span><br><span class="line">| sales_by_store             |</span><br><span class="line">| staff                      |</span><br><span class="line">| staff_list                 |</span><br><span class="line">| store                      |</span><br><span class="line">+----------------------------+</span><br><span class="line">23 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="show-status查看SQL执行频率"><a href="#show-status查看SQL执行频率" class="headerlink" title="show status查看SQL执行频率"></a>show status查看SQL执行频率</h3><p>MySQL可以通过<code>show [session|global] status</code>命令来查看服务器状态信息；其中<code>session</code>，<code>global</code>为可选参数，session表示显示当前连接的统计结果，global表示统计自数据库上次启动至今的信息，不写默认为<code>session</code>。<br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like &#39;Com_%&#39;;        </span><br><span class="line">+-----------------------------+-------+ </span><br><span class="line">| Variable_name               | Value | </span><br><span class="line">+-----------------------------+-------+ </span><br><span class="line">| Com_admin_commands          | 0     | </span><br><span class="line">| Com_assign_to_keycache      | 0     | </span><br><span class="line">| Com_alter_db                | 0     | </span><br><span class="line">| Com_alter_db_upgrade        | 0     | </span><br><span class="line">| Com_alter_event             | 0     | </span><br><span class="line">| Com_alter_function          | 0     | </span><br><span class="line">| Com_alter_instance          | 0     | </span><br><span class="line">| Com_alter_procedure         | 0     | </span><br><span class="line">| Com_alter_server            | 0     | </span><br><span class="line">| Com_alter_table             | 2     | </span><br><span class="line">| Com_alter_tablespace        | 0     | </span><br><span class="line">| Com_alter_user              | 0     | </span><br><span class="line">| Com_analyze                 | 0     | </span><br><span class="line">| Com_begin                   | 0     | </span><br><span class="line">| Com_binlog                  | 0     | </span><br><span class="line">| Com_call_procedure          | 0     | </span><br><span class="line">| Com_change_db               | 3     | </span><br><span class="line">| Com_change_master           | 0     | </span><br><span class="line">| Com_change_repl_filter      | 0     | </span><br><span class="line">| Com_check                   | 0     | </span><br><span class="line">| Com_checksum                | 0     | </span><br><span class="line">| Com_commit                  | 15    | </span><br><span class="line">| Com_create_db               | 1     | </span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>统计当前连接下的信息。</p><h4 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h4><p>Com_xxx表示每个xxx语句执行的次数，通常比较关注的是以下几个：<br>◆&ensp;Com_select：&ensp;执行SELECT操作的次数，执行一次累加1；<br>◆&ensp;Com_insert：&ensp;执行INSERT操作的次数，对于批量插入的INSERT操作，只累加一次；<br>◆&ensp;Com_update：&ensp;执行UPDATE操作的次数。<br>◆&ensp;Com_delete：&ensp;执行DELETE操作的次数。<br>上述参数对于所有的存储引擎的表操作都会进行累计，下面的参数，只针对InnoDB存储引擎：<br>◆&ensp;Innodb_read：SELECT查询返回的<strong>行数</strong>。<br>◆&ensp;Innodb_rows_inserted：执行INSERT操作插入的<strong>行数</strong>。<br>◆&ensp;Innodb_rows_updated：执行UPDATE操作更新的<strong>行数</strong>。<br>◆&ensp;Innodb_rows_deleted：执行DELETE操作删除的<strong>行数</strong>。<br>通过以上参数，比较容易得出当前数据库的应用是插入更新为主还是查询操作为主，以及各种类型的SQL大致执行的比例是多少。（对于更新操作的技术，是对执行次数的技术，不论commit还是rollback都会累加）。<br>对于事务型应用，通过<code>Com_commit</code>和<code>Com_rollback</code>可以了解事务提交和回滚的情况，对于回滚操作很频繁的数据库，可能意味着应用编写存在问题。<br>另外，一下几个参数便于了解数据库的基本情况：<br>◆&ensp;Connections：尝试连接MySQL服务器的次数。<br>◆&ensp;Uptime：服务器工作时间。<br>◆&ensp;Slow_queried：慢查询次数</p><h3 id="定位执行效率低的SQL"><a href="#定位执行效率低的SQL" class="headerlink" title="定位执行效率低的SQL"></a>定位执行效率低的SQL</h3><p>我在工作中，使用过两种方式来查看当前执行效率低的SQL：<br>一：查看线程：<code>show processlist</code><br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show processlist;</span><br><span class="line">+----+------+-----------------+--------+---------+-------+----------+------------------+</span><br><span class="line">| Id | User | Host            | db     | Command | Time  | State    | Info             |</span><br><span class="line">+----+------+-----------------+--------+---------+-------+----------+------------------+</span><br><span class="line">|  6 | root | localhost:16830 | test1  | Sleep   | 18721 |          | NULL             |</span><br><span class="line">|  7 | root | localhost:17154 | test1  | Sleep   | 18721 |          | NULL             |</span><br><span class="line">| 18 | root | localhost:47691 | sakila | Query   |     0 | starting | show processlist |</span><br><span class="line">| 19 | root | localhost:49737 | NULL   | Sleep   |   393 |          | NULL             |</span><br><span class="line">| 20 | root | localhost:49738 | sakila | Sleep   |   393 |          | NULL             |</span><br><span class="line">+----+------+-----------------+--------+---------+-------+----------+------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>该命令可以查看当前MySQL在进行的线程，包括状态，信息（是否锁表）等，便于实时查看SQL执行情况</p><p>二：慢查询日志定位<br>MySQL的慢查询日志位置可以命令查看：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;%slow_query_log%&#39;;</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name       | Value                                                     |</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">| slow_query_log      | OFF                                                       |</span><br><span class="line">| slow_query_log_file | &#x2F;home&#x2F;data&#x2F;mysql&#x2F;centos7-db-slow.log          |</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">2 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>默认情况下慢查询是关闭的，慢查询日志保存路径可以看见。<br>只需要给<code>slow_query_log</code>设置值即可开启慢查询：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global slow_query_log&#x3D;1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#39;%slow_query_log%&#39;;</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name       | Value                                                     |</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">| slow_query_log      | ON                                                        |</span><br><span class="line">| slow_query_log_file | &#x2F;home&#x2F;data&#x2F;mysql&#x2F;centos7-db-slow.log  |</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">2 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>同时，可以配置慢查询时间，以及慢查询日志保存路径：<br>在mysql安装路径下找到<code>my.cnf</code>文件，在其中增加或者修改<code>long_query_time</code>和<code>slow_query_log_file</code>即可完成配置(需要注意保存慢查询日志文件的文件夹的权限，属主和属组是mysql)。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#[slowsql]</span><br><span class="line">slow_query_log &#x3D; on</span><br><span class="line">slow_query_log_file &#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;new_slow.log</span><br><span class="line">long_query_time &#x3D; 1</span><br><span class="line">log_output &#x3D; file</span><br></pre></td></tr></table></figure><p>或者命令行更改也可以：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;%long_query_time%&#39;;</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| long_query_time | 10.000000 |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">1 row in set, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set long_query_time&#x3D;2;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#39;long_query_time&#39;;</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| long_query_time | 2.000000 |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">1 row in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="慢查询示例"><a href="#慢查询示例" class="headerlink" title="慢查询示例"></a>慢查询示例</h4><p>当MySQL开启了慢查询，并且慢查询时间也根据自己情况进行了更改，下面实验下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;%slow_query_log%&#39;;</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name       | Value                                                     |</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">| slow_query_log      | ON                                                        |</span><br><span class="line">| slow_query_log_file | &#x2F;home&#x2F;data&#x2F;mysql&#x2F;centos7-db-slow.log  |</span><br><span class="line">+---------------------+-----------------------------------------------------------+</span><br><span class="line">2 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>可以看见，当前系统慢查询是开启状态，且一旦出现慢查询，会记录日志在<code>/home/data/mysql/centos7-db-slow.log</code>中。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#39;long_query_time&#39;;</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| long_query_time | 2.000000 |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">1 row in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>慢查询时间设置为2s，一旦有SQL执行时间超过2s，就会被认为是慢查询，记录在慢查询日志中。</p><p>执行4s查询：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sleep(4);</span><br><span class="line">+----------+</span><br><span class="line">| sleep(4) |</span><br><span class="line">+----------+</span><br><span class="line">|        0 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (4.00 sec)</span><br></pre></td></tr></table></figure><p>该SQL执行时间为固定的4s，按照设置，肯定是慢查询了，进入日志文件，查看日志：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MySQL, Version: 5.7.21 (MySQL Community Server (GPL)). started with:</span><br><span class="line">TCP Port: 3306, Named Pipe: MySQL</span><br><span class="line">Time                 Id Command    Argument</span><br><span class="line"># Time: 2018-03-09T08:34:16.502235Z</span><br><span class="line"># User@Host: root[root] @ localhost [::1]  Id:     2</span><br><span class="line"># Query_time: 4.000101  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0</span><br><span class="line">use sakila;</span><br><span class="line">SET timestamp&#x3D;1520584456;</span><br><span class="line">select sleep(4);</span><br></pre></td></tr></table></figure><p>以上就是慢查询内容，包含数据库，SQL执行时间，具体SQL，即定位到执行效率低的SQL，进行优化。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>定位到慢查询的SQL之后，接下来就是对低效SQL进行分析，后序再说…</p>]]></content>
      
      
      <categories>
          
          <category> MySQL-SQL优化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python基础之*args与**kwargs</title>
      <link href="2018/03/08/python%E5%9F%BA%E7%A1%80%E4%B9%8B-args%E4%B8%8E-kwargs/"/>
      <url>2018/03/08/python%E5%9F%BA%E7%A1%80%E4%B9%8B-args%E4%B8%8E-kwargs/</url>
      
        <content type="html"><![CDATA[<p>python基础之<code>*args</code>和<code>**kwargs</code>简单介绍</p><a id="more"></a><h3 id="认识-args和-kwargs"><a href="#认识-args和-kwargs" class="headerlink" title="认识 *args和 **kwargs"></a>认识 *<strong><strong>args和 **</strong></strong>kwargs</h3><p>首先，看看<code>*args</code>和<code>**kwargs</code>到底是个什么：<br>代码示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def foo(*args, **kwargs):</span><br><span class="line">    print(u&quot;args &#x3D; &quot;, args)</span><br><span class="line">    print(u&quot;kwargs &#x3D; &quot;, kwargs)</span><br><span class="line">    print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;我是分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(1, 2, 3, 4)</span><br><span class="line">    foo(a&#x3D;1, b&#x3D;2, c&#x3D;3)</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">args &#x3D;  (1, 2, 3, 4)</span><br><span class="line">kwargs &#x3D;  &#123;&#125;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;我是分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">args &#x3D;  ()</span><br><span class="line">kwargs &#x3D;  &#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3&#125;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;我是分割线&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><p>可以看出，这俩其实就是python的两个变量，<code>*args</code>是个元组（tuple）,<code>**kwargs</code>是个字典（dictionary）。</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>通过google各种解释，差不多是理解了，其实<code>*args</code>和<code>**kwargs</code>真正起作用的是<code>*</code>和<code>**</code>，而<code>args</code>以及<code>kwargs</code>其实就类似于<code>var</code>和<code>vars</code>；当python需要传递多个参数时，就将参数放在一个元组里，按照参数位置传递，以<code>*</code>开头；当需要传递多个键值对时，就把这些键值对放在一个字典里，按照关键字传递，以<code>**</code>开头。</p><p>示例一：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def foo(x, *args):</span><br><span class="line">    print(x)</span><br><span class="line">    print(args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(1, 2, 3, 4)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">(2, 3, 4)</span><br></pre></td></tr></table></figure><p>可以看出，python将（1,2,3,4），其中1，赋给默认参数x，（2,3,4）作为一个元组赋给args；</p><p>示例二：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def foo(x, **kwargs):</span><br><span class="line">    print(x)</span><br><span class="line">    print(kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(1, a&#x3D;2, b&#x3D;3, c&#x3D;4)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">&#123;&#39;a&#39;: 2, &#39;b&#39;: 3, &#39;c&#39;: 4&#125;</span><br></pre></td></tr></table></figure><p>python将(1, a=2, b=3, c=4)，其中1，赋值给默认参数x；(a=2, b=3, c=4)作为字典赋给kwargs。</p><h3 id="实参角度"><a href="#实参角度" class="headerlink" title="实参角度"></a>实参角度</h3><p>或者从实参角度来理解：<br><code>*args</code>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def foo(x, y, z):</span><br><span class="line">    print(x)</span><br><span class="line">    print(y)</span><br><span class="line">    print(z)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(*(1, 2, 3))</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><p>可以看出python将<code>*(1, 2, 3)</code>，按照位置将值赋给了x, y, z；</p><p><code>**kwargs</code>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def foo(x, y, z):</span><br><span class="line">    print(x)</span><br><span class="line">    print(y)</span><br><span class="line">    print(z)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(**&#123;&quot;x&quot;:1,&quot;y&quot;:2,&quot;z&quot;:3&#125;)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><p>python将<code>**&#123;&quot;x&quot;:1,&quot;y&quot;:2,&quot;z&quot;:3&#125;</code>，按照关键字<code>x,y,z</code>赋值给了x,y,z。</p><p><code>*args</code>其实可以理解为python需要调用的任意个没有关键字的参数（无名参数）组成的元组，<br>称之为<strong>Non-keyword Variable Arguments</strong>；<br><code>**kwargs</code>是python需要调用的任意个关键字参数（键值对）组成的字典，<br>称之为<strong>keyword Variable Arguments</strong></p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><h4 id="位置参数，-args，-kwargs混合使用顺序"><a href="#位置参数，-args，-kwargs混合使用顺序" class="headerlink" title="位置参数，*args，**kwargs混合使用顺序"></a>位置参数，*<strong><strong>args，**</strong></strong>kwargs混合使用顺序</h4><p>当函数参数中同时拥有<code>位置参数</code>，<code>*args</code>以及<code>**kwargs</code>时，顺序必须是<code>位置参数，*args，**kwargs</code>，否则会报错。<br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def foo(x, *args, **kwargs):</span><br><span class="line">    print(x)</span><br><span class="line">    print(args)</span><br><span class="line">    print(kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(1,2,3,4,a&#x3D;1, b&#x3D;2, c&#x3D;3)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">(2, 3, 4)</span><br><span class="line">&#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3&#125;</span><br></pre></td></tr></table></figure><h4 id="位置参数，默认参数，-kwargs混合使用顺序"><a href="#位置参数，默认参数，-kwargs混合使用顺序" class="headerlink" title="位置参数，默认参数，**kwargs混合使用顺序"></a>位置参数，默认参数，**kwargs混合使用顺序</h4><p>当需要同时使用位置参数，默认参数以及<code>**kwargs</code>时，顺序必须为<code>位置参数，默认参数，**kwargs</code>，否则会报错。<br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def foo(x, y&#x3D;2, **kwargs):</span><br><span class="line">    print(x)</span><br><span class="line">    print(y)</span><br><span class="line">    print(kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    foo(1,3,a&#x3D;1,b&#x3D;2,c&#x3D;3)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3</span><br><span class="line">&#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3&#125;</span><br></pre></td></tr></table></figure><p>其中，3将赋给y，替换默认值2。</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker使用简介</title>
      <link href="2018/03/05/docker%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/"/>
      <url>2018/03/05/docker%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>日常docker使用简介</p><a id="more"></a><p>由于日常测试的项目都是在云端，阿里云，AWS上，基本也都是使用了虚拟化技术，项目放在docker或者k8s中。我现在所在的公司，是把项目放在docker中，挂在阿里云上，所以日常使用比较多的就是docker了。</p><h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><h4 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h4><p>从跳转机进入指定的docker所在服务器中，想要查看目前运行的服务：<br>查看所有服务:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a </span><br></pre></td></tr></table></figure><p>和在linux下查看服务差不多，只是前面加了个<code>docker</code>；<br>查看指定的服务，例如想查看服务名为boss的服务:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a |grep boss</span><br></pre></td></tr></table></figure><p>看着还是和linux下查看服务一样。。</p><h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><p>一般进行测试时，习惯是开着日志，动态查看，因为有的错误，页面不会全部展示出来，我的习惯是进行测试时，浏览器开启开发者模式（F12），后台开启动态日志，执行操作之后进行数据库查询验证；那么docker下进行动态日志展示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail&#x3D;300 ContainerId</span><br></pre></td></tr></table></figure><p><strong>解释：</strong><br>首先在服务所在的服务器下，查询得到该服务当前开启的容器ID（containerId）<br><code>docker ps -a</code>该命令执行完成，会展示服务的基础信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@test-docker2 anmavadmin]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE   COMMAND    CREATED    STATUS   PORTS   NAMES</span><br></pre></td></tr></table></figure><p>即可以获取得到指定服务的containerid，动态查看日志和linux下类似，linux下普通的查看日志：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f -n 300 xxx.log</span><br></pre></td></tr></table></figure><p>即可动态显示日志文件后300行的日志，同样的，在docker下查看也是使用<code>-f</code>动态显示，显示行数用<code>--tail=行数</code>，再加上指定的<code>Container Id</code>即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail&#x3D;300 boss_container_id</span><br></pre></td></tr></table></figure><h3 id="进入Docker容器"><a href="#进入Docker容器" class="headerlink" title="进入Docker容器"></a>进入Docker容器</h3><p>docker说到底，其实就是个小型的linux环境，所以，和普通linux一样，也是可以直接进入docker内部，进入docker内部有四种方法，方法很多，日常熟练的掌握一l两种即可。:</p><blockquote><p><a href="https://www.cnblogs.com/xhyan/p/6593075.html">进入docker内部的四种方法</a></p></blockquote><p>我日常使用的是<code>docker exec</code>进入docker内部：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it ContainerId &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><p>即可进入容器内部，之后就可以和普通linux下一样操作。</p><h3 id="K8S（Kubernetes）-Docker"><a href="#K8S（Kubernetes）-Docker" class="headerlink" title="K8S（Kubernetes） + Docker"></a>K8S（Kubernetes） + Docker</h3><p>当前很多环境的搭建方案选择都是k8s+docker的混合搭建，这样的环境，进行测试工作的常用操作：</p><h4 id="查看服务所在节点"><a href="#查看服务所在节点" class="headerlink" title="查看服务所在节点"></a>查看服务所在节点</h4><p>首先是进入k8s所在的服务器，查看需要查看日志的服务所在docker节点（正常情况下都不会只有一台docker，负载均衡，都知道。。。）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods -o wide</span><br></pre></td></tr></table></figure><p>即可显示所有服务的基础信息，包括服务名称，状态，IP，docker节点：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7-k8s1 xxx]# kubectl get pods -o wide</span><br><span class="line">NAME    READY     STATUS    RESTARTS   AGE       IP             NODE</span><br><span class="line">test-boss-server-060b3cf86fa24bd7c9ce2548015e9b38-07qn1       1&#x2F;1       Running   0          12h       172.17.46.3    centos7-k8s1</span><br></pre></td></tr></table></figure><p>此时即可获取到服务所在节点，例如上述示例，服务在<code>centos7-k8s1</code>，即节点1上，所以进入节点1所在服务器，即可动态查看服务日志:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">进入节点1，sudo su root(或者就是sudo 命令)</span><br><span class="line">docker ps -a |grep boss</span><br><span class="line">docker logs -f --tail&#x3D;300 containerid</span><br></pre></td></tr></table></figure><h4 id="查看服务状态"><a href="#查看服务状态" class="headerlink" title="查看服务状态"></a>查看服务状态</h4><p>测试中也会遇见点击页面无响应，后台报服务连接超时的错误，此时，可以查看当前服务运行状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get rc -o wide</span><br></pre></td></tr></table></figure><p>获取到的信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7-k8s1 xxx]# kubectl get rc -o wide</span><br><span class="line">NAME   DESIRED   CURRENT   READY     AGE       CONTAINER(S)     IMAGE(S)          SELECTOR</span><br><span class="line">test-boss-server       2         2         2         12h       test-boss-server       registry.docker.test.cn:5000&#x2F;test-dev&#x2F;test-boss-server:20180304_215608       deployment&#x3D;060b3cf86fa24bd7c9ce2548015e9b38,name&#x3D;test-boss-server,version&#x3D;test</span><br></pre></td></tr></table></figure><p>可以看出boss服务，期望运行节点数是2，当前运行节点数也是2，所以该服务当前是正常状态。一旦出现<code>DESIRED</code>和<code>CURRENT</code>的值不一致，表明有服务出现问题。出现问题之后就需要对服务进行问题定位，重启等操作，就不多说了。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>自己对于虚拟化技术的掌握度基本是皮毛都算不上，现在还是满足最基本工作需要范围o(╥﹏╥)o，后期看来得好好补。。</p><p>3月3号时候，突然有个冲动，步行到西山岛上去，然后就说走就走。。。从<code>渔洋山</code>一直到<code>西山岛-金庭游客中心</code>,一个人默默的暴走了近1个小时40分钟，9.5km，走完全程3段<code>太湖大桥</code>，穿过岛两座，可惜天公不作美啊，太湖湖面上雾有点大，桥上风景还是有点朦胧，得找个天气晴朗的日志再走一遭！（再也不穿登山鞋去了，原本想爬山才穿的登山鞋，结果徒步差点没把脚走废掉。。。）</p><p>生命在于运动，恰逢一年一度的跑步黄金时期，该走出去，走走，跑跑，爬爬山~~~<br>(大早上来发现VPS又挂了，哎我的hexo可以搭在VPS上的，进不去还写个鬼博客，只好又重搭了一个，愁)</p>]]></content>
      
      
      <categories>
          
          <category> 容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新年伊始-开年记</title>
      <link href="2018/02/28/%E6%96%B0%E5%B9%B4%E4%BC%8A%E5%A7%8B-%E5%BC%80%E5%B9%B4%E8%AE%B0/"/>
      <url>2018/02/28/%E6%96%B0%E5%B9%B4%E4%BC%8A%E5%A7%8B-%E5%BC%80%E5%B9%B4%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>随波逐流，还是不停的瞎折腾~</p><a id="more"></a><h3 id="新年伊始"><a href="#新年伊始" class="headerlink" title="新年伊始"></a>新年伊始</h3><p>过年来上班第一天就发现，SSR又登不上了，也就意味着，google啊，又离我远去。。。搞啥啊，查了下黄历，没啥问题啊，翻了下新华社新闻，好吧，开会了。。不出所料，被墙了。</p><p>周二时候有点不服，把vultr上几乎所有VPS都重搭了下，好吧，居然IP全挂，这么多台都全挂，有点服。。<br>今天早上过来，感觉还是有点不爽，主要是每次打开浏览器，由于我设置的Chrome主页就是google，每次进来都是空荡荡的，感觉很难受，抱着不死就折腾的心态，又开始搭，结果还真找到个漏网之鱼，苍天啊，真的是泪流满面o(╥﹏╥)o</p><p>立刻重建，还好有这个经历：</p><blockquote><p><a href="http://tokyle.com/2018/01/24/VPS%E9%87%8D%E5%BB%BA%E8%AE%B0/#more">VPS重建记</a></p></blockquote><p>一台新机器，花了半个小时就完成了，终于，又可以科学上网，hexo又可以更博了！！</p><h3 id="日常记忆"><a href="#日常记忆" class="headerlink" title="日常记忆"></a>日常记忆</h3><p>随手记下昨天遇到的小白问题：<br>在搭建自动化框架时，基本会把页面元素的定位信息放在类似于<code>example.ini</code>的配置文件中，然后从文件中获取定位方式以及定位表达式，这样方便维护。<br>读取<code>example.ini</code>文件配置内容，我是使用的<code>configparser</code>，用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cf &#x3D; configparser.ConfigParser()</span><br><span class="line">cf.read(&#39;example.ini&#39;)</span><br></pre></td></tr></table></figure><p>这样就会把配置文件中的配置信息加载到内存中，获取信息一般使用两种方式：</p><h4 id="获取特定的optionValue"><a href="#获取特定的optionValue" class="headerlink" title="获取特定的optionValue"></a>获取特定的optionValue</h4><p>使用<code>cf.get(section, option)</code>即可获取特定的option的值<br>例如，有一个<code>example.ini</code>内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[126mail_login]</span><br><span class="line">loginPage.frame &#x3D; id &gt; x-URS-iframe</span><br><span class="line">loginPage.username &#x3D; xpath &gt; &#x2F;&#x2F;input[@name&#x3D;&quot;email&quot;]</span><br><span class="line">loginPage.password &#x3D; xpath &gt; &#x2F;&#x2F;input[@name&#x3D;&quot;password&quot;]</span><br><span class="line">loginPage.loginbutton &#x3D; id &gt; dologin</span><br></pre></td></tr></table></figure><p>想要获取切换到登录frame的定位方式及表达式，只需要：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">frame126 &#x3D; cf.get(&quot;126mail_login&quot;, &quot;loginPage.frame&quot;)</span><br><span class="line">print(frame126)</span><br></pre></td></tr></table></figure><p>打印出定位方式及表达式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id &gt; x-URS-iframe</span><br></pre></td></tr></table></figure><h4 id="获取指定section下的所有option"><a href="#获取指定section下的所有option" class="headerlink" title="获取指定section下的所有option"></a>获取指定section下的所有option</h4><p>使用<code>cf.items(section)</code>即可获取该section下的所有option，返回的是一个列表，包含option以及对应的value<br>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">options &#x3D; cf.items(&quot;126mail_login&quot;)</span><br><span class="line">print(options)</span><br></pre></td></tr></table></figure><p>返回结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(&#39;loginpage.frame&#39;, &#39;id &gt; x-URS-iframe&#39;), (&#39;loginpage.username&#39;, &#39;xpath &gt; &#x2F;&#x2F;input[@name&#x3D;&quot;email&quot;]&#39;), (&#39;loginpage.password&#39;, &#39;xpath &gt; &#x2F;&#x2F;input[@name&#x3D;&quot;password&quot;]&#39;), (&#39;loginpage.loginbutton&#39;, &#39;id &gt; dologin&#39;)]</span><br></pre></td></tr></table></figure><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>由于日常的开发环境是windows，系统的默认编码是<strong>gbk</strong>，所有在windows下使用<code>configparser</code>来读取配置文件时，有的时候会报编码错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UnicodeDecodeError: &#39;gbk&#39; codec can&#39;t decode byte 0xae in position 272: illegal multibyte sequence</span><br></pre></td></tr></table></figure><h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><p>解决方法很简单，直接看<code>cf.read()</code>的源码，源码是这样的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">def read(self, filenames, encoding&#x3D;None):</span><br><span class="line">    &quot;&quot;&quot;Read and parse a filename or a list of filenames.</span><br><span class="line"></span><br><span class="line">    Files that cannot be opened are silently ignored; this is</span><br><span class="line">    designed so that you can specify a list of potential</span><br><span class="line">    configuration file locations (e.g. current directory, user&#39;s</span><br><span class="line">    home directory, systemwide directory), and all existing</span><br><span class="line">    configuration files in the list will be read.  A single</span><br><span class="line">    filename may also be given.</span><br><span class="line"></span><br><span class="line">    Return list of successfully read files.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if isinstance(filenames, str):</span><br><span class="line">        filenames &#x3D; [filenames]</span><br><span class="line">    read_ok &#x3D; []</span><br><span class="line">    for filename in filenames:</span><br><span class="line">        try:</span><br><span class="line">            with open(filename, encoding&#x3D;encoding) as fp:</span><br><span class="line">                self._read(fp, filename)</span><br><span class="line">        except OSError:</span><br><span class="line">            continue</span><br><span class="line">        read_ok.append(filename)</span><br><span class="line">    return read_ok</span><br></pre></td></tr></table></figure><p>默认的<code>read()</code>是没有指定编码的<code>encoding=None</code>，所以只需要指定编码为<code>utf-8</code>即可解决：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cf.read(pageElementLocatorPath, encoding&#x3D;&#39;utf-8&#39;)</span><br></pre></td></tr></table></figure><p>其中pageElementLocatorPath为<code>example.ini</code>文件</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>生活不就是不断的折腾嘛，墙了继续试，大不了你再墙嘛~</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>写在2018新年来临</title>
      <link href="2018/02/12/%E5%86%99%E5%9C%A82018%E6%96%B0%E5%B9%B4%E6%9D%A5%E4%B8%B4/"/>
      <url>2018/02/12/%E5%86%99%E5%9C%A82018%E6%96%B0%E5%B9%B4%E6%9D%A5%E4%B8%B4/</url>
      
        <content type="html"><![CDATA[<p>写在春节来临之际<br>农历2017年最后一个工作日，明天就要回家过春节了，想想，2017，好像过去的挺快的。来篇流水账，写写，我的2017。</p><a id="more"></a><p>活在苏州：<br><img src="http://ww1.sinaimg.cn/large/a025e134gy1fodg98px0aj20zk0qo0xr.jpg" alt="山塘夕阳"></p><h3 id="工作篇"><a href="#工作篇" class="headerlink" title="工作篇"></a>工作篇</h3><p>有苦有甜才是生活，作为占据我一天一半时间的大头，首先还是想看看在这上面，我的2017到底发生了些什么。<br>工作内容还是日常的做个<code>行走的BUG</code>，以做一个开发及其烦躁的<strong>tester</strong>为荣，并在这条道上，坚定的走到黑！</p><h4 id="安硕生涯"><a href="#安硕生涯" class="headerlink" title="安硕生涯"></a>安硕生涯</h4><p>2016年7月来到安硕，工作了也有段时间，工作方式，好歹是从个外人眼中看来，测试就是定点点的工作转换成了性能测试做的多一点的，入门级性能测试工程师。日常工作，积累了一套性能需求分析-脚本编写-结果分析-瓶颈定位-性能调优的性能测试步骤，说起来，做的还是有点乐此不疲的，就是记忆力有点差，mysql性能调优经常忘。。（(ಥ_ಥ) ）<br>同时，接触到了大数据相关，虽然和我的关联不是特别大，最多就是帮着测测规则，测测数据，好歹是打开了另一扇窗；眼界不是来自于期刊杂志，有真正自己去接触了，才是有自己的感受，所以，还是挺感激这段经历。<br>然后2017年9月，离开了安硕。</p><h4 id="新的开始"><a href="#新的开始" class="headerlink" title="新的开始"></a>新的开始</h4><p>2017年9月21日，正式从安硕来到了这，正式开始了测试带队（虽然手下就一人~~~），也正式捡起了放下一年半的python。刚毕业那会，和舍友选语言，他选了python做爬虫，我选了java，后来兜兜转转，我的java技术还是那么菜，压根入门都没达到就半路夭折，好在，还有补牢的机会，重新拿起python，做起了自动化。<br>9月至今，python书籍看完两本，简陋自动化框架搭建完成一个，算是还对的起自己。路还在脚下，当慢慢走。</p><h3 id="生活篇"><a href="#生活篇" class="headerlink" title="生活篇"></a>生活篇</h3><p>2017年的生活，不再那么浑浑噩噩，上班下班，周末宅；生活中发生了好几件大事。<br>2017年5月13日，在苏州买了房，从此开始房奴生涯（o(╥﹏╥)o）<br>2017年5月23日，回句容领了证，从此告别一个人的时光（(｀・ω・´)）<br>7月，失去了一位亲人..<br>总的来说，2017，算是翻天覆地的一年，本命年的我，经历了也就这些。<br>人间烟火，不过是比落叶还轻的生活；<br>该开的开，山野鲜花依然澎湃；该来的来，路上精彩还在等待。</p><h3 id="玩乐篇"><a href="#玩乐篇" class="headerlink" title="玩乐篇"></a>玩乐篇</h3><p>换个心情，回忆点轻松的，作为一个从小就喜欢满田野疯的“野孩子”，整年不出门去看看那是不现实的。<br><strong>3月</strong>，的确是个赏樱花的季节，<code>无锡-鼋头渚</code></p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1fodgazgujjj234028jb2a.jpg" alt="水墨江南"><br>原谅手残，技术不到家，樱花实在没拍的好，照片只能待在自己手机没事用来傻笑~<br><strong>4月</strong>，好像是万条垂下绿丝绦的时节了，<code>杭州-西湖</code><br><code>九溪烟树</code>，<code>云栖竹径</code>，<code>苏堤春晓</code>，<code>柳浪闻莺</code>，<code>梅坞春早</code>，<code>钱塘江</code>，<code>龙井村</code>等等，带着个小胖子，也有过一天翻越无数山头，暴走30公里的经历。（杭州之行，照片太丑，不拿出来丢人。。。）<br><strong>8月</strong>，拿着婚假，怀着点点感伤，踏上了川藏线的朝圣之路，<code>成都-&gt;拉萨</code><br>成都遇上海燕和莉儿，一行，10天，成都出发，终点拉萨。南方的孩子，还是应该在8月到雪山上去看看雪的，不是吗~<br>感芸芸众生，人世无常，茫茫大海，谁可争流；不如步入山野，凭栏远眺，闲庭信步，观云卷云舒。</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1fodge4m00tj23vc2kwhdz.jpg" alt="川藏线一角"></p><p>竺法渐传三界远，<br>盛音近绕佛堂前。<br>达布拉宫，只有亲眼看见，才知道，眼前，真的就是一幅画。</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1fodgghppwvj23vc2kwb2d.jpg" alt="夜间布达拉"></p><p>然后，<strong>12月</strong>，前往丽江拍婚纱照，天和西藏一样蓝，就是商业气息过于浓重了点，小憩可以，不宜久居。时间有限，没去成泸沽湖，没机会去洱海，都算是遗憾，谁说不是呢，有遗憾，才是真正的活着嘛。（照片，在相机，忘了传手机了。。。）</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>不大不小，24周岁，不多不少，两个人了；愿能够笑看沧桑，轻盈过往；淡看流年烟火，细品岁月静好。<br>花有花的灿烂，云有云的诗意，淡然的面对生命的一切逝去，在似水流年间细细品味每一个过往，每一种滋味，每一份流逝。</p><p>最后，最后一天了，祝所有，在未来的日子里，恬然，静候花开。</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1fodgr5k11fj20u01hc7pr.jpg" alt="水墨江南"></p><p>（原谅通篇流水账~~~太久不会写文字了￣□￣｜｜）</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3完成mysql操作</title>
      <link href="2018/02/11/python3%E5%AE%8C%E6%88%90mysql%E6%93%8D%E4%BD%9C/"/>
      <url>2018/02/11/python3%E5%AE%8C%E6%88%90mysql%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>python3使用pymysql操作mysql5.7</p><a id="more"></a><p>版本信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MYSQL 5.7.21</span><br><span class="line">PYTHON 3.6</span><br><span class="line">pymysql 0.8.0</span><br><span class="line">WIN 10</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>首先，老样子，安装。<br>windows控制台直接执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pymysql</span><br></pre></td></tr></table></figure><p>即可，<code>pipenv</code>进行类包管理，控制台中进入工程所在目录下，执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv install pymysql</span><br></pre></td></tr></table></figure><h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><p>sql.py文件，包含初始化数据库，创建库，创建表所有sql：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 创建gloryroad数据库</span><br><span class="line">create_database &#x3D; &#39;CREATE DATABASE IF NOT EXISTS gloryroad DEFAULT CHARSET utf8 COLLATE utf8_general_ci;&#39;</span><br><span class="line"></span><br><span class="line"># 创建testdata表</span><br><span class="line">drop_table &#x3D; &#39;drop table if exists TESTDATA;&#39;</span><br><span class="line">create_table &#x3D; &quot;&quot;&quot;CREATE TABLE TESTDATA (</span><br><span class="line">         id INT NOT NULL,</span><br><span class="line">         bookname VARCHAR(40) NOT NULL UNIQUE,</span><br><span class="line">         author VARCHAR(30) NOT NULL)&quot;&quot;&quot;</span><br><span class="line">primary_sql &#x3D; &#39;alter table testdata add primary key(id);&#39;</span><br><span class="line">alter_id &#x3D; &#39;alter table testdata change id id int AUTO_INCREMENT NOT NULL;&#39;</span><br></pre></td></tr></table></figure><p>创建表时候，我们在mysql控制台，或者在类似<code>Navicat for mysql</code>这样的数据库连接工具中直接执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;testdata&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  &#96;bookname&#96; varchar(40) NOT NULL,</span><br><span class="line">  &#96;author&#96; varchar(30) NOT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">  UNIQUE KEY &#96;bookname&#96; (&#96;bookname&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;4 DEFAULT CHARSET&#x3D;utf8</span><br></pre></td></tr></table></figure><p>即可创建包含主键，唯一键，自增字段等属性的<code>testdata</code>表，但是不知道为啥，我直接在pycharm中执行，一直报错，又不想耗在这上面，就拆开来了，先创建表，再增加主键，修改字段等操作。</p><h3 id="pymysql创建数据库及表"><a href="#pymysql创建数据库及表" class="headerlink" title="pymysql创建数据库及表"></a>pymysql创建数据库及表</h3><h4 id="创建库和表"><a href="#创建库和表" class="headerlink" title="创建库和表"></a>创建库和表</h4><p>pymysql对mysql的操作，基本可以总结为几步：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">建立连接（connect）</span><br><span class="line">打开游标（cursor）</span><br><span class="line">执行sql（execute）</span><br><span class="line">提交事务（commit）</span><br><span class="line">关闭游标（close cursor）</span><br><span class="line">关闭连接（connect close）</span><br></pre></td></tr></table></figure><p>所以进行创建数据库和表操作时，一步一步执行即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;11 13:06</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from SQL import *</span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class DataBaseInit(object):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    1、数据库初始化</span><br><span class="line">    2、创建数据库及表，并向表中插入测试数据</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    def __init__(self, host, port, dbName, username, password, charset):</span><br><span class="line">        self.host &#x3D; host</span><br><span class="line">        self.port &#x3D; port</span><br><span class="line">        self.db &#x3D; dbName</span><br><span class="line">        self.username &#x3D; username</span><br><span class="line">        self.password &#x3D; password</span><br><span class="line">        self.charset &#x3D; charset</span><br><span class="line"></span><br><span class="line">    def creaete(self):</span><br><span class="line">        # 建库及表</span><br><span class="line">        try:</span><br><span class="line">            # 连接mysql数据库</span><br><span class="line">            conn &#x3D; pymysql.connect(</span><br><span class="line">                host &#x3D; self.host,</span><br><span class="line">                port &#x3D; self.port,</span><br><span class="line">                user &#x3D; self.username,</span><br><span class="line">                passwd &#x3D; self.password,</span><br><span class="line">                charset &#x3D; self.charset</span><br><span class="line">            )</span><br><span class="line">            # 获取数据库游标</span><br><span class="line">            cur &#x3D; conn.cursor()</span><br><span class="line">            # 创建数据库</span><br><span class="line">            cur.execute(create_database)</span><br><span class="line">            # 选择创建好的数据库</span><br><span class="line">            conn.select_db(&quot;gloryroad&quot;)</span><br><span class="line">            # 建表并更改字段</span><br><span class="line">            cur.execute(drop_table)</span><br><span class="line">            cur.execute(create_table)</span><br><span class="line">            cur.execute(primary_sql)</span><br><span class="line">            cur.execute(alter_id)</span><br><span class="line">        except pymysql.Error as e:</span><br><span class="line">            raise e</span><br><span class="line">        else:</span><br><span class="line">            # 关闭游标</span><br><span class="line">            cur.close()</span><br><span class="line">            # commit</span><br><span class="line">            conn.commit()</span><br><span class="line">            # 关闭连接</span><br><span class="line">            conn.close()</span><br><span class="line">            print(u&quot;创建数据库及表成功&quot;)</span><br></pre></td></tr></table></figure><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><p>插入数据也是正常步骤即可，当插入不止一条数据，可以使用<code>executemany()</code>来一次插入多条数据，配合<code>insert into table (col1, col2) values (%s, %s)</code>可以完成参数化一次插入大量数据；插入数据方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">def insertData(self):</span><br><span class="line">    # 插入数据</span><br><span class="line">    try:</span><br><span class="line">        # 连接具体某个库</span><br><span class="line">        conn &#x3D; pymysql.connect(</span><br><span class="line">            host&#x3D;self.host,</span><br><span class="line">            port&#x3D;self.port,</span><br><span class="line">            db&#x3D;self.db,</span><br><span class="line">            user&#x3D;self.username,</span><br><span class="line">            passwd&#x3D;self.password,</span><br><span class="line">            charset&#x3D;self.charset</span><br><span class="line">        )</span><br><span class="line">        # 打开游标</span><br><span class="line">        cur &#x3D; conn.cursor()</span><br><span class="line">        # 插入数据</span><br><span class="line">        sql &#x3D; &quot;insert into testdata (bookname, author) values (%s, %s)&quot;</span><br><span class="line">        cur.executemany(sql, [</span><br><span class="line">            [&#39;FACE TO FACE WITH FARE&#39;, &#39;Amana Trobe&#39;],</span><br><span class="line">            [&#39;Relationship&#39;, &#39;Christopher benas Meng&#39;],</span><br><span class="line">            [&#39;ZOO&#39;, &#39;Yiyi&#39;]</span><br><span class="line">        ])</span><br><span class="line">    except pymysql.Error as e:</span><br><span class="line">        raise e</span><br><span class="line">    else:</span><br><span class="line">        conn.commit()</span><br><span class="line">        print(u&quot;初始化数据插入成功&quot;)</span><br><span class="line">        # 确认插入成功</span><br><span class="line">        # cur.execute(&quot;select * from testdata;&quot;)</span><br><span class="line">        # for i in cur.fetchall():</span><br><span class="line">        #     print(i[1], i[2])</span><br><span class="line">        cur.close()</span><br><span class="line">        conn.close()</span><br></pre></td></tr></table></figure><h3 id="从mysql获取数据"><a href="#从mysql获取数据" class="headerlink" title="从mysql获取数据"></a>从mysql获取数据</h3><p>很简单，一步一步走即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def getDataFromDataBases(self):</span><br><span class="line">    # 从testdata表获取测试数据</span><br><span class="line">    # bookname作为testdata，author作为expectdata</span><br><span class="line">    self.cur.execute(&quot;select bookname, author from testdata;&quot;)</span><br><span class="line">    # 取查询结果</span><br><span class="line">    datasTuple &#x3D; self.cur.fetchall()</span><br><span class="line">    return datasTuple</span><br><span class="line"></span><br><span class="line">def closeDatabase(self):</span><br><span class="line">    # 数据库后续操作</span><br><span class="line">    self.cur.close()</span><br><span class="line">    self.conn.commit()</span><br><span class="line">    self.conn.close()</span><br></pre></td></tr></table></figure><p>至此，就可以完成测试数据存在mysql中，从数据库表中完成测试数据的读取以及断言判断等操作。</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> python3 </tag>
            
            <tag> pymysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于python3的UI自动化框架搭建系列（二）</title>
      <link href="2018/02/09/%E5%9F%BA%E4%BA%8Epython3%E7%9A%84UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>2018/02/09/%E5%9F%BA%E4%BA%8Epython3%E7%9A%84UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>自动化测试框架雏形搭建完成</p><a id="more"></a><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>框架终于差不多完成了，包含了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">自定义日志</span><br><span class="line">自定义测试报告</span><br><span class="line">实时邮件发送</span><br></pre></td></tr></table></figure><p>等模块。<br>目前可以实现：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">测试过程中控制台实时打印日志</span><br><span class="line">测试过程中实时写日志入自定义log文件</span><br><span class="line">测试过程中发生断言失败，实时截图，并且将堆栈日志打印到指定log文件</span><br><span class="line">测试完成自动生成html格式测试报告</span><br><span class="line">测试完成自动发送邮件</span><br></pre></td></tr></table></figure><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>以下是实现的简单的从excel中读取数据进行自动化测试的实例（测试用例使用excel编写）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;9 15:30</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from ExcelUtil import GetDataFromExcel</span><br><span class="line">from selenium.common.exceptions import NoSuchElementException</span><br><span class="line">from Log import *</span><br><span class="line">from MailSend import MailSend</span><br><span class="line">from ReportTemplate import htmlTemplate</span><br><span class="line">from nose.tools import assert_true</span><br><span class="line">from MakeDirs import *</span><br><span class="line">import time,traceback</span><br><span class="line">import sys,ddt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># excel路径，sheet名</span><br><span class="line">path &#x3D; &quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;DdtData&#x2F;testData.xlsx&quot;</span><br><span class="line">sheetname &#x3D; &quot;search_data&quot;</span><br><span class="line">excel &#x3D; GetDataFromExcel(path, sheetname)</span><br><span class="line">@ddt.ddt</span><br><span class="line">class TestDdtByExcel():</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def setUpClass(cls):</span><br><span class="line">        TestDdtByExcel.trStr &#x3D; &quot;&quot;</span><br><span class="line"></span><br><span class="line">    def setUp(self):</span><br><span class="line">        self.browser &#x3D; webdriver.Chrome()</span><br><span class="line">        # 设置测试状态及结果标志</span><br><span class="line">        self.status &#x3D; None</span><br><span class="line">        self.flag &#x3D; 0</span><br><span class="line"></span><br><span class="line">    @ddt.data(* excel.getData())</span><br><span class="line">    def test_ddtbyexcel(self, data):</span><br><span class="line">        # 声明全局变量</span><br><span class="line">        global start, starttime</span><br><span class="line">        # 定义执行结果的颜色</span><br><span class="line">        flagDict &#x3D; &#123;0: &#39;red&#39;, 1: &#39;00AC4E&#39;&#125;</span><br><span class="line">        # 获取测试用例名称</span><br><span class="line">        casename &#x3D; sys._getframe().f_code.co_name</span><br><span class="line">        testdata, expectdata &#x3D; tuple(data)</span><br><span class="line">        url &#x3D; &quot;https:&#x2F;&#x2F;www.baidu.com&quot;</span><br><span class="line">        self.browser.get(url)</span><br><span class="line">        self.browser.implicitly_wait(10)</span><br><span class="line">        try:</span><br><span class="line">            # 获取当前时间戳</span><br><span class="line">            start &#x3D; time.time()</span><br><span class="line">            # 获取当前时间</span><br><span class="line">            starttime &#x3D; time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())</span><br><span class="line">            # 搜索</span><br><span class="line">            self.browser.find_element_by_id(&#39;kw&#39;).send_keys(testdata)</span><br><span class="line">            self.browser.find_element_by_id(&#39;su&#39;).click()</span><br><span class="line">            # 休眠3s</span><br><span class="line">            time.sleep(3)</span><br><span class="line">            # 断言</span><br><span class="line">            assert_true(expectdata in self.browser.page_source)</span><br><span class="line">        except NoSuchElementException as e:</span><br><span class="line">            error(u&quot;页面元素不存在：&quot; +</span><br><span class="line">                  str(traceback.print_exc(</span><br><span class="line">                      file&#x3D;open(&quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;Logs&#x2F;Error&#x2F;DdtTest.log&quot;, &quot;a&quot;))))</span><br><span class="line">            self.flag &#x3D; 0</span><br><span class="line">            self.status &#x3D; &#39;fail&#39;</span><br><span class="line">            takeScreenShot(self.browser)</span><br><span class="line">        except AssertionError as e:</span><br><span class="line">            error(u&quot;搜索“&#123;0&#125;，期望“&#123;1&#125;”，失败”&quot;.format(testdata, expectdata) +</span><br><span class="line">                  str(traceback.print_exc(</span><br><span class="line">                      file&#x3D;open(&quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;Logs&#x2F;Error&#x2F;DdtTest.log&quot;, &quot;a&quot;))))</span><br><span class="line">            self.flag &#x3D; 0</span><br><span class="line">            self.status &#x3D; &#39;fail&#39;</span><br><span class="line">            takeScreenShot(self.browser)</span><br><span class="line">        except Exception as e:</span><br><span class="line">            error(u&quot;未知错误：&quot; +</span><br><span class="line">                  str(traceback.print_exc(</span><br><span class="line">                      file&#x3D;open(&quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;Logs&#x2F;Error&#x2F;DdtTest.log&quot;, &quot;a&quot;))))</span><br><span class="line">            self.flag &#x3D; 0</span><br><span class="line">            self.status &#x3D; &#39;fail&#39;</span><br><span class="line">            takeScreenShot(self.browser)</span><br><span class="line">        else:</span><br><span class="line">            info(u&quot;搜索“&#123;0&#125;，期望“&#123;1&#125;”，通过”&quot;.format(testdata, expectdata))</span><br><span class="line">            self.status &#x3D; &#39;pass&#39;</span><br><span class="line">            self.flag &#x3D; 1</span><br><span class="line">        # 计算消耗时间</span><br><span class="line">        # 10位时间戳，单位为s</span><br><span class="line">        spends &#x3D; time.time() - start - 3</span><br><span class="line">        # 取两位小数</span><br><span class="line">        spendtime &#x3D; &quot;%.2f&quot; %spends</span><br><span class="line">        # 报告中添加数据</span><br><span class="line">        TestDdtByExcel.trStr +&#x3D; u&#39;&#39;&#39;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;&#123;0&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;td&gt;&#123;1&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;td&gt;&#123;2&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;td&gt;&#123;3&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;td&gt;&#123;4&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                    &lt;td style&#x3D;&quot;color: &#123;5&#125;&quot;&gt;&#123;6&#125;&lt;&#x2F;td&gt;</span><br><span class="line">                &lt;&#x2F;tr&gt;</span><br><span class="line">                &#39;&#39;&#39;.format(casename, testdata, expectdata, starttime, spendtime, flagDict[self.flag], self.status)</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        self.browser.quit()</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def tearDownClass(cls):</span><br><span class="line">        # 写自定义报告</span><br><span class="line">        htmlTemplate(TestDdtByExcel.trStr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    os.system(&quot;nosetests  -s -v &#123;0&#125;&quot;.format(__file__))</span><br><span class="line">    info(u&quot;*****测试报告开始发送*****&quot;)</span><br><span class="line">    report_file &#x3D; &quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;Report&#x2F;DDTByExcel.html&quot;</span><br><span class="line">    mail_subject &#x3D; &quot;NoseTest测试报告_&#123;0&#125;&quot;.format(dt.now().strftime(&quot;%Y%m%d&quot;))</span><br><span class="line">    mailsend &#x3D; MailSend(mail_subject, report_file)</span><br><span class="line">    mailsend.sendMail()</span><br><span class="line">    info(u&quot;~~~测试报告发送完成，请注意查收~~~&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p>粗略结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">project</span><br><span class="line">|—— coding（主要代码）</span><br><span class="line">|—— DdtConf（一些配置，包括邮箱（.ini），日志(logger.conf)等）</span><br><span class="line">|—— DdtData（测试数据（excel，xml，json）等）</span><br><span class="line">|—— DdtTools（工具类（生成html文件，创建文件夹，截图，邮件发送，从文件读数据））等）</span><br><span class="line">|—— Logs（日志）</span><br><span class="line">    |—— Info</span><br><span class="line">    |—— Error</span><br><span class="line">|—— Pictures（断言失败的截图）</span><br><span class="line">|—— Report（测试报告）</span><br></pre></td></tr></table></figure><p>后期再慢慢改进，可以修改的地方还有很多！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python3 </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> nose </tag>
            
            <tag> ddt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows安装mysql5.7</title>
      <link href="2018/02/09/windows%E5%AE%89%E8%A3%85mysql5-7/"/>
      <url>2018/02/09/windows%E5%AE%89%E8%A3%85mysql5-7/</url>
      
        <content type="html"><![CDATA[<p>winwods环境安装配置mysql5.7</p><a id="more"></a><p>版本信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">win 10</span><br><span class="line">mysql 5.7.21</span><br></pre></td></tr></table></figure><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>直接上官网下载：</p><blockquote><p><a href="https://dev.mysql.com/downloads/mysql/">mysql下载官网</a></p></blockquote><p>以前官网上的下载是有<code>.msi</code>格式的安装包的，现在好像没怎么找到（也可能是眼睛花了。。），现在下载的是<code>.zip</code>压缩包，也就是直接解压缩就可以了。</p><h3 id="安装及配置"><a href="#安装及配置" class="headerlink" title="安装及配置"></a>安装及配置</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>将压缩包下载到本地，解压缩到你自定义的目录下，如我下载的是<code>mysql-5.7.21-winx64.zip</code>文件，解压缩到我本地软件安装盘：<code>E:\Test\</code></p><h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><p>解压完成之后，进行日常操作，配置环境变量，将你解压完成之后的mysql的<strong>bin</strong>目录所在路径添加到系统环境变量<strong>path</strong>中，另外可以新建一个<code>MYSQL_HOME</code>的环境变量，变量值也是你的bin目录所在路径，例如我的配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path</span><br><span class="line">E:\Test\mysql-5.7.21-winx64\bin</span><br><span class="line">MYSQL_HOME</span><br><span class="line">E:\Test\mysql-5.7.21-winx64\bin</span><br></pre></td></tr></table></figure><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><h5 id="服务注册"><a href="#服务注册" class="headerlink" title="服务注册"></a>服务注册</h5><p>在你的mysql目录下，新建<code>my.ini</code>文件，来完成windows系统服务的注册，内容可参考我的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">port&#x3D;3306</span><br><span class="line">default-character-set&#x3D;utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">#解压目录</span><br><span class="line">basedir&#x3D;E:\Test\mysql-5.7.21-winx64</span><br><span class="line">#解压目录下data目录</span><br><span class="line">datadir&#x3D;E:\Test\mysql-5.7.21-winx64\data</span><br><span class="line">port&#x3D;3306</span><br><span class="line">character_set_server&#x3D;utf8</span><br><span class="line">#导出mysql数据的目录</span><br><span class="line">secure_file_priv &#x3D;E:\Test\mysql-5.7.21-winx64\data</span><br><span class="line">sql_mode&#x3D;NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line">#开启查询缓存</span><br><span class="line">explicit_defaults_for_timestamp&#x3D;true</span><br><span class="line">#skip-grant-tables</span><br><span class="line"></span><br><span class="line">[WinMySQLAdmin]</span><br><span class="line">E:\Test\mysql-5.7.21-winx64\bin\mysql.exe</span><br></pre></td></tr></table></figure><h5 id="DATA文件夹"><a href="#DATA文件夹" class="headerlink" title="DATA文件夹"></a>DATA文件夹</h5><p>在mysql 5.6版本之前，默认就是在<code>E:\Test\mysql-5.7.21-winx64</code>下就有<code>data</code>文件夹，现在没有了，需要自己手动新建<code>E:\Test\mysql-5.7.21-winx64\data</code><br>新建完成之后，右键<strong>管理员</strong>打开<code>cmd</code>，进入mysql的bin目录下（<code>E:\Test\mysql-5.7.21-winx64\bin</code>），执行命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize</span><br></pre></td></tr></table></figure><p>运行完成之后，在data目录下就有生成一些初始化的文件，里面有个<code>你的机器.err</code>格式的文件，用文本编辑器打开之后，可以看见随机生成的root的密码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-02-09T01:51:43.117196Z 1 [Note] A temporary password is generated for root@localhost: PaFe#w##v6zD</span><br></pre></td></tr></table></figure><h4 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h4><p>管理员模式打开的cmd中，进入\mysql\bin目录下，输入服务安装命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld -install</span><br></pre></td></tr></table></figure><h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><p>安装没有报错情况下，可以选择在windows的服务中手动起服务，也可以命令行起：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br></pre></td></tr></table></figure><p>打印信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; net start mysql</span><br><span class="line">MySQL 服务正在启动 .</span><br><span class="line">MySQL 服务已经启动成功。</span><br></pre></td></tr></table></figure><p>表明mysql服务已经成功启动。</p><h3 id="mysql操作"><a href="#mysql操作" class="headerlink" title="mysql操作"></a>mysql操作</h3><p>mysql服务启动之后，用root用户登录(密码在前步生成的xxx.err文件中)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p密码</span><br></pre></td></tr></table></figure><p>进入mysql控制台。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 4</span><br><span class="line">Server version: 5.7.21 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>表示成功进入控制台。</p><h4 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a>修改root密码</h4><p>控制台下执行:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;新密码&#39;;</span><br></pre></td></tr></table></figure><p>回车即可。<br>用新密码重新登录进控制台，随意看看mysql吧（关于数据库的操作就不提了，教程一大堆，用多了就熟悉了）~</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use sys;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+-----------------------------------------------+</span><br><span class="line">| Tables_in_sys                                 |</span><br><span class="line">+-----------------------------------------------+</span><br><span class="line">| host_summary                                  |</span><br><span class="line">| host_summary_by_file_io                       |</span><br><span class="line">| host_summary_by_file_io_type                  |</span><br><span class="line">| host_summary_by_stages</span><br></pre></td></tr></table></figure><p>慢查询及版本信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;</span><br><span class="line">mysql&gt; show variables like &quot;%slow%&quot;;</span><br><span class="line">+---------------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name             | Value                                                     |</span><br><span class="line">+---------------------------+-----------------------------------------------------------+</span><br><span class="line">| log_slow_admin_statements | OFF                                                       |</span><br><span class="line">| log_slow_slave_statements | OFF                                                       |</span><br><span class="line">| slow_launch_time          | 2                                                         |</span><br><span class="line">| slow_query_log            | OFF                                                       |</span><br><span class="line">| slow_query_log_file       | E:\Test\mysql-5.7.21-winx64\data\DESKTOP-PBQIU7V-slow.log |</span><br><span class="line">+---------------------------+-----------------------------------------------------------+</span><br><span class="line">5 rows in set, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;  show variables like &quot;%version%&quot;;</span><br><span class="line">+-------------------------+------------------------------+</span><br><span class="line">| Variable_name           | Value                        |</span><br><span class="line">+-------------------------+------------------------------+</span><br><span class="line">| innodb_version          | 5.7.21                       |</span><br><span class="line">| protocol_version        | 10                           |</span><br><span class="line">| slave_type_conversions  |                              |</span><br><span class="line">| tls_version             | TLSv1,TLSv1.1                |</span><br><span class="line">| version                 | 5.7.21                       |</span><br><span class="line">| version_comment         | MySQL Community Server (GPL) |</span><br><span class="line">| version_compile_machine | x86_64                       |</span><br><span class="line">| version_compile_os      | Win64                        |</span><br><span class="line">+-------------------------+------------------------------+</span><br><span class="line">8 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3操作excel</title>
      <link href="2018/02/09/python3%E6%93%8D%E4%BD%9Cexcel/"/>
      <url>2018/02/09/python3%E6%93%8D%E4%BD%9Cexcel/</url>
      
        <content type="html"><![CDATA[<p>python3使用openpyxl完成excel数据读和写</p><a id="more"></a><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>python3操作excel数据，对于excel 2007及以上版本，一般使用<code>openpyxl</code>来进行操作；windows下，只需要控制台执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install openpyxl</span><br></pre></td></tr></table></figure><p>即可，若是使用<code>pipenv</code>进行类库管理的，控制台下进入工程所在目录（<code>Pipfile</code>所在路径），执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv install openpyxl</span><br></pre></td></tr></table></figure><p>即可。对于<code>pipenv</code>在之前的一篇博客中有提及：</p><blockquote><p><a href="http://tokyle.com/2018/01/18/python%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-pipenv/">python项目依赖管理工具</a></p></blockquote><p>安装完成之后，执行命令<code>python</code>进入python交互环境，引包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import openpyxl</span><br></pre></td></tr></table></figure><p>不报错则安装成功</p><h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 引包</span><br><span class="line">import openpyxl</span><br><span class="line"></span><br><span class="line"># excel文件路径</span><br><span class="line">file &#x3D; &quot;G:\workstation\py_workstation\DataDriverTest\DdtData\testData.xlsx&quot;</span><br><span class="line"># 打开excel</span><br><span class="line">wb &#x3D; openpyxl.load_workbook(file)</span><br><span class="line"># 获取指定sheet页，名称：“search_data”</span><br><span class="line">sheet &#x3D; wb[&quot;search_data&quot;]</span><br><span class="line"># 获取所有sheet的名称</span><br><span class="line">sheets &#x3D; wb.sheetnames</span><br><span class="line"></span><br><span class="line"># 获取行数</span><br><span class="line">nrow &#x3D; sheet.max_row</span><br><span class="line"># 获取列数</span><br><span class="line">ncol &#x3D; sheet.max_column</span><br><span class="line"># 获取单元格值</span><br><span class="line">cell_1 &#x3D; sheet.cell(row&#x3D;2, column&#x3D;2).value</span><br><span class="line"># 单元格赋值</span><br><span class="line">cell_2 &#x3D; sheet.cell(row&#x3D;2, column&#x3D;2, value&#x3D;&quot;YIDA&quot;)</span><br><span class="line"></span><br><span class="line"># 保存excel</span><br><span class="line">wb.save(file)</span><br></pre></td></tr></table></figure><h3 id="读写excel"><a href="#读写excel" class="headerlink" title="读写excel"></a>读写excel</h3><p>进行ddt时，有的时候测试数据，甚至测试用例是在excel中，如下表，标示出了测试数据，预期结果。</p><p>number&emsp;&emsp;testdata    &emsp;&emsp;&emsp;expectdata<br>1&emsp;&emsp;&emsp;&emsp;&ensp;Jordan&emsp;&emsp;&emsp;&emsp;&ensp;DRFSA<br>2&emsp;&emsp;&emsp;&emsp;&ensp;Garnett&emsp;&emsp;&emsp;&emsp;&ensp;Kevin<br>3&emsp;&emsp;&emsp;&emsp;&ensp;Oneal&emsp;&emsp;&emsp;&emsp;&emsp;Shaquille<br>4&emsp;&emsp;&emsp;&emsp;&ensp;Nowitzki&emsp;&emsp;&emsp;&emsp;rsdffd<br>5&emsp;&emsp;&emsp;&emsp;&ensp;Duncan&emsp;&emsp;&emsp;&emsp;Tim</p><p>首先是尝试使用python3 把数据写入excel</p><h4 id="写数据"><a href="#写数据" class="headerlink" title="写数据"></a>写数据</h4><p>直接上代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;9 13:25</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import openpyxl</span><br><span class="line"></span><br><span class="line">file &#x3D; &quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;DdtData&#x2F;test.xlsx&quot;</span><br><span class="line">wb &#x3D; openpyxl.load_workbook(file)</span><br><span class="line">sheet &#x3D; wb.active</span><br><span class="line">sheet.title &#x3D; &quot;search_data&quot;</span><br><span class="line"></span><br><span class="line">value &#x3D; [</span><br><span class="line">    [&quot;number&quot;, &quot;testdata&quot;, &quot;expectdata&quot;],</span><br><span class="line">    [&quot;1&quot;, &quot;Jordan&quot;, &quot;DRFSA&quot;],</span><br><span class="line">    [&quot;2&quot;, &quot;Garnett&quot;, &quot;Kevin&quot;]</span><br><span class="line">]</span><br><span class="line">for i in range(0, 3):</span><br><span class="line">    for j in range(0, len(value[i])):</span><br><span class="line">        sheet.cell(row&#x3D;i+1, column&#x3D;j+1, value&#x3D;str(value[i][j]))</span><br><span class="line">wb.save(file)</span><br></pre></td></tr></table></figure><h4 id="读数据"><a href="#读数据" class="headerlink" title="读数据"></a>读数据</h4><p>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;9 14:15</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import openpyxl</span><br><span class="line"></span><br><span class="line"># 打开excel</span><br><span class="line">wb &#x3D; openpyxl.load_workbook(&quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;DdtData&#x2F;testData.xlsx&quot;)</span><br><span class="line"># 获取指定sheet页</span><br><span class="line">sheet &#x3D; wb[&quot;search_data&quot;]</span><br><span class="line"></span><br><span class="line"># 获取列表中最大行数和最大列数</span><br><span class="line">nrows &#x3D; sheet.max_row</span><br><span class="line">ncol &#x3D; sheet.max_column</span><br><span class="line"></span><br><span class="line">testdata &#x3D; []</span><br><span class="line"></span><br><span class="line"># 获取2到6行</span><br><span class="line">for i in list(range(2,nrows+1)):</span><br><span class="line">    tmplist &#x3D; []</span><br><span class="line">    tmplist.append(sheet.cell(row&#x3D;i, column&#x3D;2).value) #2,2</span><br><span class="line">    tmplist.append(sheet.cell(row&#x3D;i, column&#x3D;3).value) #2,3</span><br><span class="line">    testdata.append(tmplist)</span><br><span class="line">print(testdata)</span><br></pre></td></tr></table></figure><p>完成！！！</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>估计是快过年，快放假了，都没什么心思敲了；真的是弄了好久才读出数据。。。python3操作excel是真的跟python2很不一样，网上的教程很多都不能用，最明显的就是:<br>python2可以遍历工作表区域每一行，跳过第一行，直接写成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for row in sheet.rows[1:]:</span><br></pre></td></tr></table></figure><p>但是python3实现不了。。<br>不过自己能折腾出来，感觉还是有点小小的成就感的~</p><p>附环境版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python  3.6</span><br><span class="line">openpyxl 2.5.0</span><br><span class="line">win 10</span><br><span class="line">office 2013</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> openpyxl </tag>
            
            <tag> ddt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义测试报告</title>
      <link href="2018/02/08/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/"/>
      <url>2018/02/08/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p>解决自动化测试中捕获断言之后，测试报告展示为ok无法查看具体哪条用例执行失败的问题</p><a id="more"></a><p>问题来自之前博客中折腾的单元测试异常捕获问题：<a href="http://tokyle.com/2018/02/08/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7/#more">自动化测试断言捕获</a><br>当时折腾出的解决方案是自定义测试报告的模板，定义<code>status</code>状态位，作为测试用例执行结果的状态标志，一旦发生断言异常捕获，将<code>status</code>状态为置为<code>fail</code>，最后体现在测试报告上。</p><h3 id="自定义报告"><a href="#自定义报告" class="headerlink" title="自定义报告"></a>自定义报告</h3><p>自定义报告模块，参考nose生成的报告，又东拼西凑折腾出了这份最简单的测试报告，最终报告生成原理就是：首先html文件中创建表格，预留html的尾部，在后续执行自动化测试过程中，将生成的测试数据拼接到不完整的html文件中，最终生成完成的html文件作为测试报告。</p><p><code>ReportTemplate.py</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;8 11:21</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">def htmlTemplate(trData):</span><br><span class="line">    &quot;&quot;&quot;自定义测试报告样式&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    htmlStr &#x3D; u&#39;&#39;&#39;</span><br><span class="line">        &lt;!DOCTYPE html&gt;</span><br><span class="line">    &lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Unit Test Report&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;UTF-8&quot;&#x2F;&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    body&#123;</span><br><span class="line">        width: 80%;                 &#x2F;* 整个body区域占浏览器百分比 *&#x2F;</span><br><span class="line">        margin: 40px auto;          &#x2F;* 整个body区域相对浏览器窗口摆放位置（左右，上下）*&#x2F;、</span><br><span class="line">        font-weight: bold;          &#x2F;* 整个body区域字体加粗 *&#x2F;</span><br><span class="line">        font-family: Calibri, &quot;Trebuchet MS&quot;, sans-serif;       &#x2F;* 表格中文字的字体类型 *&#x2F;</span><br><span class="line">        font-size: 18px;            &#x2F;* 字体大小 *&#x2F;</span><br><span class="line">        color: #000;</span><br><span class="line">    &#125;</span><br><span class="line">    table&#123;</span><br><span class="line">        border-spacing: 0;          &#x2F;* 表格边框宽度 *&#x2F;</span><br><span class="line">        width: 100%;                &#x2F;* 整个表格相对父元素的宽度 *&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">    .tableStyle&#123;</span><br><span class="line">        border-style: outset;       &#x2F;* 整个表格外边框样式 *&#x2F;</span><br><span class="line">        border-width: 2px;          &#x2F;* 整个表格外边框宽度 *&#x2F;</span><br><span class="line">        border-color: blue;         &#x2F;* 整个表格外边框颜色 *&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">    .tableStyle tr:hover&#123;</span><br><span class="line">        background: rgb(173,216,230);       &#x2F;* 鼠标滑过一行，动态显示的颜色 *&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">    .tableStyle td&#123;</span><br><span class="line">        border-left: solid 1px rgb(146,208,80);     &#x2F;* 表格的竖线颜色 *&#x2F;</span><br><span class="line">        border-top: 1px solid rgb(146,208,80);      &#x2F;* 表格的横线颜色 *&#x2F;</span><br><span class="line">        padding: 15px;                              &#x2F;* 表格内边框尺寸 *&#x2F;</span><br><span class="line">        text-align: center;                         &#x2F;* 表格内容显示位置 *&#x2F;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line">    .tableStyle th&#123;</span><br><span class="line">        border-left: solid 1px rgb(146,208,80);</span><br><span class="line">        border-top: 1px solid rgb(146,208,80);</span><br><span class="line">        padding: 15px;</span><br><span class="line">        text-align: center;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line">    .tableStyle th&#123;</span><br><span class="line">        padding: 15px;                              &#x2F;* 表格标题栏，字体尺寸 *&#x2F;</span><br><span class="line">        background-color: rgb(146,208,80);          &#x2F;* 表格标题栏背景颜色 *&#x2F;</span><br><span class="line">        &#x2F;* 标题栏设置渐变色 *&#x2F;</span><br><span class="line">        background-image: -webkit-gradient(linear, left top, left bottom, from(#92D050), to(#A2D668));</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;&#x2F;head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;center&gt;&lt;h1&gt;TestReport&lt;&#x2F;h1&gt;&lt;&#x2F;center&gt;&lt;br &#x2F;&gt;</span><br><span class="line">        &lt;table class&#x3D;&quot;tableStyle&quot;&gt;</span><br><span class="line">            &lt;thead&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;CaseName&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;TestData&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;ExpectData&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;StartTime&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;SpendTime&lt;&#x2F;th&gt;</span><br><span class="line">                &lt;th&gt;Result&lt;&#x2F;th&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">            &lt;&#x2F;thead&gt;</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    endStr &#x3D; u&#39;&#39;&#39;</span><br><span class="line">        &lt;&#x2F;table&gt;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">    &lt;&#x2F;html&gt;</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    # 拼接成完整html文件</span><br><span class="line">    htmlf_file &#x3D; htmlStr + trData + endStr</span><br><span class="line">    with open(r&quot;D:&#x2F;bug_things&#x2F;selenium&#x2F;report&#x2F;DDTByObj.html&quot;, &quot;w&quot;, encoding&#x3D;&#39;utf-8&#39;) as f_obj:</span><br><span class="line">        f_obj.write(htmlf_file)</span><br><span class="line">    #f.close()</span><br></pre></td></tr></table></figure><h3 id="ddt数据驱动"><a href="#ddt数据驱动" class="headerlink" title="ddt数据驱动"></a>ddt数据驱动</h3><p>使用ddt进行自动化测试，单元测试框架使用nose，实现如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;8 14:07</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from ReportTemplate import htmlTemplate</span><br><span class="line">from selenium.common.exceptions import NoSuchElementException</span><br><span class="line">from DdtTools.Log import *</span><br><span class="line">from DdtTools.MailSend import MailSend</span><br><span class="line">from datetime import datetime as dt</span><br><span class="line">from nose.tools import assert_true</span><br><span class="line">import sys</span><br><span class="line">import ddt</span><br><span class="line">import time</span><br><span class="line">import traceback</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@ddt.ddt</span><br><span class="line">class TestDdtByJson():</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def setUpClass(cls):</span><br><span class="line">        # 只调一次</span><br><span class="line">        TestDdtByJson.trStr &#x3D; &quot;&quot;</span><br><span class="line"></span><br><span class="line">    def setUp(self):</span><br><span class="line">        self.browser &#x3D; webdriver.Chrome()</span><br><span class="line">        # 存放测试结果状态，失败为fail，成功为pass</span><br><span class="line">        self.status &#x3D; None</span><br><span class="line">        # 数据驱动测试结果的标志，成功置1，失败置0</span><br><span class="line">        self.flag &#x3D; 0</span><br><span class="line"></span><br><span class="line">    @ddt.file_data(&quot;G:&#x2F;workstation&#x2F;py_workstation&#x2F;DataDriverTest&#x2F;DdtData&#x2F;test_data_list.json&quot;)</span><br><span class="line">    def test_ddtbyjson(self, value):</span><br><span class="line">        global start, starttime</span><br><span class="line">        # 获取当前测试用例名</span><br><span class="line">        casename &#x3D; sys._getframe().f_code.co_name</span><br><span class="line">        # 确定报告中状态单元格中内容颜色</span><br><span class="line">        flagDict &#x3D; &#123;0: &#39;red&#39;, 1: &#39;#00AC4E&#39;&#125;</span><br><span class="line"></span><br><span class="line">        url &#x3D; &quot;https:&#x2F;&#x2F;www.baidu.com&quot;</span><br><span class="line">        self.browser.get(url)</span><br><span class="line">        #self.browser.maximize_window()</span><br><span class="line">        # 将json中测试数据用“||”分隔成测试数据及期望结果</span><br><span class="line">        testdata, expectdata &#x3D; tuple(value.strip().split(&quot;||&quot;))</span><br><span class="line">        self.browser.implicitly_wait(10)</span><br><span class="line">        try:</span><br><span class="line">            # 获取当前时间时间戳，用于计算耗时</span><br><span class="line">            start &#x3D; time.time()</span><br><span class="line">            # 获取当前时间</span><br><span class="line">            starttime &#x3D; time.strftime(&quot;%Y-%m-%d %H:%M%S&quot;, time.localtime())</span><br><span class="line">            # 开始搜索</span><br><span class="line">            self.browser.find_element_by_id(&#39;kw&#39;).send_keys(testdata)</span><br><span class="line">            self.browser.find_element_by_id(&#39;su&#39;).click()</span><br><span class="line">            time.sleep(3)</span><br><span class="line">            # 断言</span><br><span class="line">            assert_true(expectdata in self.browser.page_source)</span><br><span class="line">        except NoSuchElementException as e:</span><br><span class="line">            error(u&quot;页面元素不存在：&quot; +</span><br><span class="line">                  str(traceback.print_exc(file&#x3D;(open(&quot;D:&#x2F;bug_things&#x2F;selenium&#x2F;logs&#x2F;errors&#x2F;DdtTest.log&quot;, &#39;a&#39;)))))</span><br><span class="line">            self.status &#x3D; &#39;fail&#39;</span><br><span class="line">            self.flag &#x3D; 0</span><br><span class="line">        except AssertionError as e:</span><br><span class="line">            error(u&#39;搜索“&#123;0&#125;”，期望“&#123;1&#125;”，失败&#39;.format(testdata, expectdata) +</span><br><span class="line">                  str(traceback.print_exc(file&#x3D;open(&quot;D:&#x2F;bug_things&#x2F;selenium&#x2F;logs&#x2F;errors&#x2F;DdtTest.log&quot;, &#39;a&#39;))))</span><br><span class="line">            self.status &#x3D; &#39;fail&#39;</span><br><span class="line">            self.flag &#x3D; 0</span><br><span class="line">        except Exception as e:</span><br><span class="line">            error(u&quot;未知错误：&quot; +</span><br><span class="line">                  str(traceback.print_exc(file&#x3D;open(&quot;D:&#x2F;bug_things&#x2F;selenium&#x2F;logs&#x2F;errors&#x2F;DdtTest.log&quot;, &#39;a&#39;))))</span><br><span class="line">            self.status &#x3D; &#39;fail&#39;</span><br><span class="line">            self.flag &#x3D; 0</span><br><span class="line">        else:</span><br><span class="line">            info(u&#39;搜索“&#123;0&#125;”，期望“&#123;1&#125;”，通过&#39;.format(testdata, expectdata))</span><br><span class="line">            self.status &#x3D; &#39;pass&#39;</span><br><span class="line">            self.flag &#x3D; 1</span><br><span class="line">        # 计算消耗时间</span><br><span class="line">        # 时间戳相减(10位时间戳单位为s)</span><br><span class="line">        spends &#x3D; time.time() - start - 3</span><br><span class="line">        # 取两位小数</span><br><span class="line">        spendtime &#x3D; &quot;%.2f&quot; %spends</span><br><span class="line">        # 报告中添加测试数据</span><br><span class="line">        TestDdtByJson.trStr +&#x3D; u&#39;&#39;&#39;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;&#123;0&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;td&gt;&#123;1&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;td&gt;&#123;2&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;td&gt;&#123;3&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;td&gt;&#123;4&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;td style&#x3D;&quot;color: &#123;5&#125;&quot;&gt;&#123;6&#125;&lt;&#x2F;td&gt;</span><br><span class="line">        &lt;&#x2F;tr&gt;</span><br><span class="line">        &#39;&#39;&#39;.format(casename, testdata, expectdata, starttime, spendtime, flagDict[self.flag], self.status)</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        self.browser.quit()</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def tearDownClass(cls):</span><br><span class="line">        # 写自定义测试报告</span><br><span class="line">        htmlTemplate(TestDdtByJson.trStr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    os.system(&quot;nosetests  -s -v &#123;0&#125;&quot;.format(__file__))</span><br><span class="line">    info(u&quot;测试报告开始发送&quot;)</span><br><span class="line">    report_file &#x3D; &quot;D:&#x2F;bug_things&#x2F;selenium&#x2F;report&#x2F;DDTByObj.html&quot;</span><br><span class="line">    mail_subject &#x3D; &quot;UnitTest测试报告_&#123;0&#125;&quot;.format(dt.now().strftime(&quot;%Y%m%d&quot;))</span><br><span class="line">    mailsend &#x3D; MailSend(mail_subject, report_file)</span><br><span class="line">    mailsend.sendMail()</span><br><span class="line">    info(u&quot;测试报告发送完成&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中涉及到的邮件发送模块和日志模块可以参照以前的博客：</p><blockquote><p><a href="http://tokyle.com/2018/02/01/%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB/">邮件模块</a><br><a href="http://tokyle.com/2018/02/02/logging%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/">日志配置</a></p></blockquote><p>其中日志模块增加了对error级别的日志的配置，很简单，和info级别类似，就不多说了。<br>最终实现效果，测试过程中在控制台以及<code>D:/bug_things/selenium/logs/info/AutoDDT.log</code>中实时写入<strong>info</strong>以及<strong>error</strong>的日志，当出现堆栈错误，写入<code>D:/bug_things/selenium/logs/errors/DdtTest.log</code>文件中，两个日志文件的写入方式都是<code>append</code>，测试完成之后邮件发送包含html附件的测试报告到指定邮箱；同时邮件正文中展示包含测试结果的表格，出现<code>fail</code>状态，可直接前往<code>D:/bug_things/selenium/logs/errors/DdtTest.log</code>日志中查看具体出错，以及具体出错行。<br>需要改进的是，<code>D:/bug_things/selenium/logs/errors/DdtTest.log</code>文件没有明显对各个用例的区分，甚至没有空格行来让显示更明确，还是需要自己去搜索。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>现在终于是完成了自动化测试的基本模块，日志和测试报告真的是折腾了…后期自己前端知识丰富之后，还需要优化测试报告。接下来，除了完成从excel和数据库中读取测试数据之外，就真的开始搭建自己的框架了（这几天这牛角尖钻的，解决之后还是挺舒服的~）</p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> nose </tag>
            
            <tag> ddt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单元测试异常捕获</title>
      <link href="2018/02/08/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7/"/>
      <url>2018/02/08/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7/</url>
      
        <content type="html"><![CDATA[<p>关于自动化测试执行期间断言的异常的选择迷茫</p><a id="more"></a><p>大概是这段时间有点压抑，昨天下午就不知道怎么钻在了单元测试断言失败需不需要捕获异常这个问题上。<br>大家都知道，进行单元测试时，加入断言验证单元测试结果，断言失败会报错，通过会打印<code>ok</code>标识。</p><h3 id="nose进行单元测试"><a href="#nose进行单元测试" class="headerlink" title="nose进行单元测试"></a>nose进行单元测试</h3><p>使用nose进行单元测试示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from nose.tools import assert_equal</span><br><span class="line"></span><br><span class="line">def test_sum():</span><br><span class="line">    a &#x3D; 1</span><br><span class="line">    b &#x3D; 2</span><br><span class="line">    res &#x3D; 5</span><br><span class="line">    assert_equal(res, a+b)</span><br></pre></td></tr></table></figure><p>控制台执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v -s Testexec.py</span><br></pre></td></tr></table></figure><p>打印信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Testexec.test_sum ... FAIL</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">FAIL: Testexec.test_sum</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;g:\skills\python36\lib\site-packages\nose\case.py&quot;, line 198, in runTest</span><br><span class="line">    self.test(*self.arg)</span><br><span class="line">  File &quot;G:\workstation\py_workstation\DataDriverTest\Testexec.py&quot;, line 17, in test_sum</span><br><span class="line">    assert_equal(res, a+b)</span><br><span class="line">AssertionError: 5 !&#x3D; 3</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Ran 1 test in 0.007s</span><br><span class="line"></span><br><span class="line">FAILED (failures&#x3D;1)</span><br></pre></td></tr></table></figure><p>可以看出，断言失败了，控制台也打印出了断言失败的信息。但是在进行自动化测试过程中，如果你想加入日志模块，在执行过程中就在控制台或者文件中打印日志，例如：<code>Testexec.test_sum ... 断言失败，3不等于5</code>这样的信息，很明显，直接用上述写法是不会走到打印失败信息这一步，所以就需要将断言失败的异常捕获，类似这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from nose.tools import assert_equal</span><br><span class="line"></span><br><span class="line">def test_sum():</span><br><span class="line">    try:</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        res &#x3D; 5</span><br><span class="line">        assert_equal(res, a+b)</span><br><span class="line">    except AssertionError as e:</span><br><span class="line">        print(&quot;断言失败，&#123;0&#125;不等于&#123;1&#125;&quot;.format(a+b, res))</span><br></pre></td></tr></table></figure><p>这种写法执行单元测试，结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; nosetests -v -s Testexec.py</span><br><span class="line">Testexec.test_sum ... 断言失败，3不等于5</span><br><span class="line">ok</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Ran 1 test in 0.002s</span><br><span class="line"></span><br><span class="line">OK</span><br></pre></td></tr></table></figure><p>可以看见在断言失败的情况下，打印出了自定义的断言失败信息，这样也就满足进行自动化测试时，实时有日志生成，方便查看，但是这样有个问题，<strong>你一旦把断言失败的异常捕获了，那该条测试执行结果就是OK状态，到最后统计时候就不容易看出是哪条执行失败了，只能查看日志</strong>；而且日志中也没有展示具体在哪一行有报错，所以这样的方式需要改进。</p><h3 id="打印堆栈信息"><a href="#打印堆栈信息" class="headerlink" title="打印堆栈信息"></a>打印堆栈信息</h3><p>在断言失败时，把异常捕获，此时不会展示具体断言错误的信息，所以就需要添加堆栈信息打印：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def test_sum():</span><br><span class="line">    try:</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        res &#x3D; 5</span><br><span class="line">        assert_equal(res, a+b)</span><br><span class="line">    except AssertionError as e:</span><br><span class="line">        logging.error(&quot;断言失败，&#123;0&#125;不等于&#123;1&#125;&quot;.format(a+b, res) +</span><br><span class="line">              str(traceback.print_exc())</span><br></pre></td></tr></table></figure><p>这样就可以获取堆栈信息，可以查看具体哪一行有报错，<strong>但是，这样堆栈的日志也只会打印在控制台上，不利于查看</strong>，好<code>traceback.print_exc()</code>可以指定日志输出路径，所以只需要修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def test_sum():</span><br><span class="line">    try:</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        res &#x3D; 5</span><br><span class="line">        assert_equal(res, a+b)</span><br><span class="line">    except AssertionError as e:</span><br><span class="line">        logging.error(&quot;断言失败，&#123;0&#125;不等于&#123;1&#125;&quot;.format(a+b, res) +</span><br><span class="line">              str(traceback.print_exc(file&#x3D;open(&#39;test.log&#39;, &#39;a&#39;))))</span><br></pre></td></tr></table></figure><p>这样就可以完成，错误日志打印到文件中，其中<code>a</code>表示append。</p><h3 id="邮件附件"><a href="#邮件附件" class="headerlink" title="邮件附件"></a>邮件附件</h3><p>在进行自动化测试时，我们经常不仅需要日志文件，更多用到的是测试报告，在自动化用例执行完成之后以邮件形式发送到指定邮箱，只需要查看邮件的附件，就可以知晓用例执行情况；但是使用<code>unittest</code>或者<code>nose</code>时，一旦把断言异常捕获，那该条用例结果就是ok状态，实际上我们知道这条用例其实是执行失败了，这样，使用<code>HTMLTestRunner</code>或者是<code>nosetests --with-html --html-file</code>生成的html文件中，用例执行状态就都是<code>success</code>状态，很显然是不正确的。</p><p>所以我考虑的是，自己写自定义的测试报告样式，定义一个状态标志<code>status</code>，初始状态为<code>success</code>，在用例执行过程中，一旦捕获了断言异常，就将状态更新为<code>fail</code>，在测试报告中，执行结果栏展示的是该状态，这样就可以实现结果查看了。</p><p>自定义测试报告样式。。现在还是只有这个想法，未完待续，待实现了再来更新！（前端知识匮乏啊，越来越觉得自己弱。。。）</p><p>断言捕获，可以生成日志，在屏幕和日志文件中打印显示，但是，这样，所有的单元测试都是通过状态，没有一条fail；</p><p>断言不捕获，直接邮件发送结果，可以在邮件中看出具体哪条用例执行失败，可以点开失败，查看具体失败信息</p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> 单元测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nose执行顺序</title>
      <link href="2018/02/07/nose%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/"/>
      <url>2018/02/07/nose%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>nose单元测试执行顺序</p><a id="more"></a><p>nose和unittest一样，都可以在用例中指定<code>setUp()</code>和<code>tearDown()</code>（用户测试初始化以及测试结束后的操作），在nose中，package、module、class都可以设置setup()和teardown()；</p><h3 id="package中设置"><a href="#package中设置" class="headerlink" title="package中设置"></a>package中设置</h3><p>在package中设置，整个测试的运行期间只会执行一次（新建python package时，会生成一个<strong>init</strong>.py文件，在其中设置setUp()以及tearDown()即可）</p><h3 id="用例中每次都执行setup及teardown"><a href="#用例中每次都执行setup及teardown" class="headerlink" title="用例中每次都执行setup及teardown"></a>用例中每次都执行setup及teardown</h3><p>在模块、类中执行顺序示例：<br>新建Testexec.py文件，内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;7 10:39</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from nose.plugins.skip import SkipTest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestClass():</span><br><span class="line"></span><br><span class="line">    def setUp(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    def test_fun1(self):</span><br><span class="line">        print(&quot;This is test_fun1*******&quot;)</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def test_fun2(self):</span><br><span class="line">        print(&quot;This is test_fun2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def test_fun3(self):</span><br><span class="line">        print(&quot;This is test_fun3~~~~~~~~~&quot;)</span><br><span class="line">        raise SkipTest</span><br><span class="line"></span><br><span class="line">    def test_Fun1(self):</span><br><span class="line">        print(&quot;This is test_Fun1***&#x3D;&#x3D;&#x3D;&#x3D;***&quot;)</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure><p>命令行执行nosetests：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v -s Testexec.py</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; nosetests -v -s Testexec.py                                               </span><br><span class="line">Testexec.TestClass.test_Fun1 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">This is test_Fun1***&#x3D;&#x3D;&#x3D;&#x3D;***                                                      </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                   </span><br><span class="line">ok                                                                               </span><br><span class="line">Testexec.TestClass.test_fun1 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">This is test_fun1*******                                                         </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                   </span><br><span class="line">ok                                                                               </span><br><span class="line">Testexec.TestClass.test_fun2 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">This is test_fun2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                                           </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                   </span><br><span class="line">ok                                                                               </span><br><span class="line">Testexec.TestClass.test_fun3 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;  </span><br><span class="line">This is test_fun3~~~~~~~~~                                                       </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                   </span><br><span class="line">SKIP                                                                             </span><br><span class="line">                                                                                 </span><br><span class="line">----------------------------------------------------------------------           </span><br><span class="line">Ran 4 tests in 0.005s                                                            </span><br><span class="line">                                                                                 </span><br><span class="line">OK (SKIP&#x3D;1)                                                                      </span><br></pre></td></tr></table></figure><p>可以看见在对每一个函数进行测试时，都执行了一次<code>setUp()</code>以及<code>tearDown()</code>；且用例执行顺序是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test_Fun1 -&gt; test_fun1 -&gt; test_fun2 -&gt; test_fun3</span><br></pre></td></tr></table></figure><p>其中<code>test_fun3</code>跳过了测试，执行顺序是按照先大写字母，再小写字母，然后再按阿拉伯数字排列的。</p><h3 id="用例中只执行一次setup及teardown"><a href="#用例中只执行一次setup及teardown" class="headerlink" title="用例中只执行一次setup及teardown"></a>用例中只执行一次setup及teardown</h3><p>只需要在<code>setUpClass()</code>及<code>tearDownClass()</code>前加修饰器<code>@classmethod</code>即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;7 10:39</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from nose.plugins.skip import SkipTest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestClass():</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def setUpClass(cls):</span><br><span class="line">        print(&quot;只初始化一次setup&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def tearDownClass(cls):</span><br><span class="line">        print(&quot;只teardown一次***********&quot;)</span><br><span class="line"></span><br><span class="line">    def setUp(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    def test_fun1(self):</span><br><span class="line">        print(&quot;This is test_fun1*******&quot;)</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def test_fun2(self):</span><br><span class="line">        print(&quot;This is test_fun2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def test_fun3(self):</span><br><span class="line">        print(&quot;This is test_fun3~~~~~~~~~&quot;)</span><br><span class="line">        raise SkipTest</span><br><span class="line"></span><br><span class="line">    def test_Fun1(self):</span><br><span class="line">        print(&quot;This is test_Fun1***&#x3D;&#x3D;&#x3D;&#x3D;***&quot;)</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure><p>执行测试：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v -s Testexec.py</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; nosetests -v -s Testexec.py                                                   </span><br><span class="line">只初始化一次setup&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                                                   </span><br><span class="line">Testexec.TestClass.test_Fun1 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;      </span><br><span class="line">This is test_Fun1***&#x3D;&#x3D;&#x3D;&#x3D;***                                                          </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                       </span><br><span class="line">ok                                                                                   </span><br><span class="line">Testexec.TestClass.test_fun1 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;      </span><br><span class="line">This is test_fun1*******                                                             </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                       </span><br><span class="line">ok                                                                                   </span><br><span class="line">Testexec.TestClass.test_fun2 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;      </span><br><span class="line">This is test_fun2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                                               </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                       </span><br><span class="line">ok                                                                                   </span><br><span class="line">Testexec.TestClass.test_fun3 ... &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;-My Testcase is setup-&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;      </span><br><span class="line">This is test_fun3~~~~~~~~~                                                           </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;My Testcase is teardown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;                                       </span><br><span class="line">SKIP                                                                                 </span><br><span class="line">只teardown一次***********                                                               </span><br><span class="line">                                                                                     </span><br><span class="line">----------------------------------------------------------------------               </span><br><span class="line">Ran 4 tests in 0.006s                                                                </span><br><span class="line">                                                                                     </span><br><span class="line">OK (SKIP&#x3D;1)                                                                          </span><br></pre></td></tr></table></figure><p>可以看见，<code>setUpClass()</code>以及<code>tearDownClass</code>都只执行了一次。在自动化测试中，可用来加载配置信息，只需要加载一次即可。</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nose </tag>
            
            <tag> 单元测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于python3的UI自动化框架搭建系列（一）</title>
      <link href="2018/02/07/%E5%9F%BA%E4%BA%8Epython3%E7%9A%84UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>2018/02/07/%E5%9F%BA%E4%BA%8Epython3%E7%9A%84UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>基于python3搭建appium ui自动化测试框架尝试系列（一）</p><a id="more"></a><h3 id="框架实现目标"><a href="#框架实现目标" class="headerlink" title="框架实现目标"></a>框架实现目标</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">自动找设备，连接设备</span><br><span class="line">自动启动appium server</span><br><span class="line">使用yml编写用例</span><br><span class="line">配置信息储存在ini文件或conf文件中</span><br><span class="line">自定义log，断言失败截图</span><br><span class="line">用例框架使用unittest或者nose</span><br><span class="line">用例报告html，用例执行完成邮件发送，附件测试报告</span><br><span class="line">多线程执行用例，失败重跑机制</span><br><span class="line">android自动监控权限弹窗</span><br><span class="line">执行过程红性能捕获（adb或者其他形式）</span><br></pre></td></tr></table></figure><h3 id="基于ddt和nose的简单尝试"><a href="#基于ddt和nose的简单尝试" class="headerlink" title="基于ddt和nose的简单尝试"></a>基于ddt和nose的简单尝试</h3><p>当前我能实现的appium自动化测试还是需要手动去起<code>appium server</code>，这点后面需要改善，github上有很多已经实现了的框架，但是不是很想直接拿来用，还是希望能够自己去一点一点的搭建。</p><p>即使是简单的尝试，还是想尽量实现多模块。</p><h4 id="配置模块"><a href="#配置模块" class="headerlink" title="配置模块"></a>配置模块</h4><p>邮箱配置：包含邮件收发件人，密码，服务器等信息配置；<br>日志配置：包含日志级别，时间格式，流处理器等；<br>文件夹创建：包含获取当前日期，时间，创建文件夹等；</p><p>其实在之前的博客中已经实现，就不再贴代码了：</p><blockquote><p><a href="http://tokyle.com/2018/02/01/%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB/">邮箱配置</a><br><a href="http://tokyle.com/2018/02/02/logging%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/">日志配置</a></p></blockquote><p>文件夹创建是为了在测试过程中，出现断言失败的场景进行截图保存，文件夹使用两层，上一层为当前日期，下一层为当前时间，截图保存名字为断言失败的名字：<br><code>MakeDirs.py</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: kyle</span><br><span class="line">@time: 2018&#x2F;2&#x2F;7 10:17</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import time,os</span><br><span class="line">import traceback</span><br><span class="line">from datetime import datetime as dt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def getCurrentDate():</span><br><span class="line">    &quot;&quot;&quot;获取当前日期&quot;&quot;&quot;</span><br><span class="line">    date  &#x3D; time.localtime()</span><br><span class="line">    today &#x3D; str(date.tm_year) + &quot;-&quot; + str(date.tm_mon) + &quot;-&quot; + str(date.tm_mday)</span><br><span class="line">    return today</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def getCurrentTime():</span><br><span class="line">    &quot;&quot;&quot;获取当前时间&quot;&quot;&quot;</span><br><span class="line">    time_str &#x3D; dt.now()</span><br><span class="line">    now &#x3D; time_str.strftime(&#39;%H-%M-%S&#39;)</span><br><span class="line">    return now</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def createDir():</span><br><span class="line">    &quot;&quot;&quot;获取当前文件所在路径绝对路径&quot;&quot;&quot;</span><br><span class="line">    current_path &#x3D; os.path.abspath(&#39;.&#39;)</span><br><span class="line">    # 获取当前日期</span><br><span class="line">    today &#x3D; getCurrentDate()</span><br><span class="line">    # 构造以今天日期命名的目录的绝对路径</span><br><span class="line">    date_dir &#x3D; os.path.join(current_path, today)</span><br><span class="line">    print(date_dir)</span><br><span class="line"></span><br><span class="line">    if not os.path.exists(date_dir):</span><br><span class="line">        # 如果以今天日期命名的目录不存在则创建</span><br><span class="line">        os.mkdir(date_dir)</span><br><span class="line">        # 获取当前时间字符串</span><br><span class="line">        now &#x3D; getCurrentTime()</span><br><span class="line">        # 构造以当前时间命名的目录的绝对路径</span><br><span class="line">        time_dir &#x3D; os.path.join(date_dir, now)</span><br><span class="line">        print(time_dir)</span><br><span class="line">        if not os.path.exists(time_dir):</span><br><span class="line">            # 如果以当前时间命名的目录不存在则创建</span><br><span class="line">            os.mkdir(time_dir)</span><br><span class="line">        return time_dir</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def takeScreenShot(driver, save_path, pic_name):</span><br><span class="line">    &quot;&quot;&quot;截屏&quot;&quot;&quot;</span><br><span class="line">    pic_path &#x3D; os.path.join(save_path, str(pic_name) + &quot;.png&quot;)</span><br><span class="line">    try:</span><br><span class="line">        driver.get_screenshot_as_file(pic_path)</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(traceback.print_exc(), e)</span><br></pre></td></tr></table></figure><h4 id="执行模块"><a href="#执行模块" class="headerlink" title="执行模块"></a>执行模块</h4><p>实现思路是<code>ddt</code>获取数据对象，进行测试数据和代码分离，数据对象包含输入数据以及预期结果，对预期结果进行断言，实现测试实现。<br>以百度搜索测试为例:<br><code>DataDriverByObj.py</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import ddt,time</span><br><span class="line">import traceback,logging</span><br><span class="line">from DdtTools.Log import *</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from nose.tools import assert_true</span><br><span class="line">from selenium.common.exceptions import NoSuchElementException</span><br><span class="line">from datetime import datetime as dt</span><br><span class="line">from DdtTools.MailSend import MailSend</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@ddt.ddt</span><br><span class="line">class TestDDTByObj():</span><br><span class="line">    &quot;&quot;&quot;数据驱动测试&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        &quot;&quot;&quot;初始化&quot;&quot;&quot;</span><br><span class="line">        self.browser &#x3D; webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">    @ddt.data(</span><br><span class="line">        [u&quot;龙猫&quot;, &quot;宫崎骏&quot;],</span><br><span class="line">        [u&quot;大话西游之月光宝盒&quot;, &quot;周星驰&quot;],</span><br><span class="line">        [u&quot;卧虎藏龙&quot;, &quot;李安&quot;]</span><br><span class="line">    )</span><br><span class="line">    @ddt.unpack</span><br><span class="line">    def test_dataDrivenByObj(self, testdata, expectdata):</span><br><span class="line">        url &#x3D; &quot;https:&#x2F;&#x2F;www.baidu.com&quot;</span><br><span class="line">        self.browser.get(url)</span><br><span class="line">        # 隐式等待10s</span><br><span class="line">        self.browser.implicitly_wait(10)</span><br><span class="line">        try:</span><br><span class="line">            # 定位搜索输入框，并输入测试数据</span><br><span class="line">            self.browser.find_element_by_id(&#39;kw&#39;).send_keys(testdata)</span><br><span class="line">            # 定位搜索按键，单击</span><br><span class="line">            self.browser.find_element_by_id(&#39;su&#39;).click()</span><br><span class="line">            time.sleep(3)</span><br><span class="line">            # 断言期望结果是否出现在页面源码中</span><br><span class="line">            assert_true(expectdata in self.browser.page_source)</span><br><span class="line">        except NoSuchElementException as e:</span><br><span class="line">            logging.error(u&quot;查找的页面元素不存在，异常堆栈信息：&quot; + str(traceback.print_exc()))</span><br><span class="line"></span><br><span class="line">        except AssertionError as e:</span><br><span class="line">            info(u&quot;搜索：&#123;0&#125;，期望：&#123;1&#125;，失败&quot;.format(testdata, expectdata))</span><br><span class="line">        except Exception as e:</span><br><span class="line">            logging.error(u&quot;未知错误，错误信息：&quot; + str(traceback.print_exc()))</span><br><span class="line">        else:</span><br><span class="line">            info(u&quot;搜索：&#123;0&#125;，期望：&#123;1&#125;，通过&quot;.format(testdata, expectdata))</span><br><span class="line"></span><br><span class="line">        time.sleep(2)</span><br><span class="line">        self.browser.quit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    # mail_subject, report_file</span><br><span class="line">    mail_subject &#x3D; &#39;NoseTests_测试报告_&#123;0&#125;&#39;.format(dt.now().strftime(&#39;%Y%m%d&#39;))</span><br><span class="line">    report_file &#x3D; &#39;D:&#x2F;bug_things&#x2F;selenium&#x2F;report&#x2F;DDTByObj.html&#39;</span><br><span class="line">    mailsend &#x3D; MailSend(mail_subject, report_file)</span><br><span class="line"></span><br><span class="line">    print(&#39;开始执行自动化测试...&#39;)</span><br><span class="line">    os.system(&#39;nosetests -v &#123;0&#125; --with-html --html-file&#x3D;&#123;1&#125;&#39;.format(__file__, report_file))</span><br><span class="line">    # 发送测试报告邮件</span><br><span class="line">    print(&#39;开始发送测试报告...&#39;)</span><br><span class="line">    mailsend.sendMail()</span><br><span class="line">    print(&#39;测试报告发送完成...&#39;)</span><br></pre></td></tr></table></figure><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>差不多现在还是实现到现在的程度，后面至少可以优化，测试数据从<code>xls</code>，<code>xml</code>，<code>excel</code>，<code>mysql</code>中读取。<br>（感觉自己现在实现的还是好弱。。。）</p><p>附上github上已经实现的框架，供参考，建议还是自己去一点一点的搭建，直接用个人觉得是有点功利的做法了，写代码，还是慢慢来的好。</p><blockquote><p><a href="https://github.com/NetEaseGame/ATX">ATX</a><br><a href="https://github.com/ztwo/Auto_Analysis">Auto_Analysis</a><br><a href="https://github.com/Louis-me/appium">APPIUM</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> appium </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> nose </tag>
            
            <tag> ddt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】python实现chrome伪装成M站</title>
      <link href="2018/02/06/%E3%80%90%E8%BD%AC%E3%80%91python%E5%AE%9E%E7%8E%B0chrome%E4%BC%AA%E8%A3%85%E6%88%90M%E7%AB%99/"/>
      <url>2018/02/06/%E3%80%90%E8%BD%AC%E3%80%91python%E5%AE%9E%E7%8E%B0chrome%E4%BC%AA%E8%A3%85%E6%88%90M%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<p>selenium实现Chrome伪装成M站，模拟手机端浏览器，并完成页面操作</p><a id="more"></a><p>原理：<br>通过<code>--user-agent=&quot;xxx&quot;</code>来修改HTTP请求头部的Agent字符串，设置个人代理，使得PC端的Chrome浏览器伪装成手机浏览器，可以在地址栏输入”about:version”查看修改效果。</p><p>代码示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from Log import *</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestMobile():</span><br><span class="line">    &quot;&quot;&quot;测试chrome伪装成手机M站&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def test_iPadChrome(self):</span><br><span class="line">        # 添加chrome设置</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;伪装成ipad&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;开始设置ipad个人代理&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        options &#x3D; webdriver.ChromeOptions()</span><br><span class="line">        options.add_argument(</span><br><span class="line">            &#39;--user-agent&#x3D;Mozilla&#x2F;5.0(iPad; CPU OS 5_0 like Mac OS X)&#39;</span><br><span class="line">            &#39;AppleWebKit&#x2F;534.46(KHTML, like Gecko) Version&#x2F;5.1&#39;</span><br><span class="line">            &#39;Mobile&#x2F;9A334 Safari&#x2F;7534.48.3&#39;</span><br><span class="line">        )</span><br><span class="line">        browser &#x3D; webdriver.Chrome(chrome_options&#x3D;options)</span><br><span class="line">        browser.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">        time.sleep(3)</span><br><span class="line">        browser.find_element_by_id(&#39;kw&#39;).send_keys(&quot;iPad&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        # 通过在Chrome浏览器地址栏输入about:version，查看伪装效果</span><br><span class="line">        browser.get(&quot;about:version&quot;)</span><br><span class="line">        # 人工确认“用户代理”项配置信息是否和设置一致</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;伪装ipad成功&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        browser.quit()</span><br><span class="line"></span><br><span class="line">    def test_iPhoneChrome(self):</span><br><span class="line">        # 添加chrome配置</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;测伪装成iphone&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;设置iphone个人代理&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        options &#x3D; webdriver.ChromeOptions()</span><br><span class="line">        options.add_argument(</span><br><span class="line">            &#39;--user-agent&#x3D;Mozilla&#x2F;5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X)&#39;</span><br><span class="line">            &#39;AppleWebKit&#x2F;534.46(KHTML, like Gecko) Version&#x2F;5.1&#39;</span><br><span class="line">            &#39;Mobile&#x2F;9A334 Safari&#x2F;7534.48.3&#39;</span><br><span class="line">        )</span><br><span class="line">        browser &#x3D; webdriver.Chrome(chrome_options&#x3D;options)</span><br><span class="line">        browser.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">        time.sleep(3)</span><br><span class="line">        # 定位搜索框</span><br><span class="line">        browser.find_element_by_id(&quot;index-kw&quot;).send_keys(&quot;iPhone&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        browser.get(&quot;about:version&quot;)</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;伪装成iphone成功&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        browser.quit()</span><br><span class="line"></span><br><span class="line">    def testAndroid236Chrome(self):</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;测试伪装成android2.3.6&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;设置android2.3.6个人代理&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        options &#x3D; webdriver.ChromeOptions()</span><br><span class="line">        options.add_argument(</span><br><span class="line">            &#39;--user-agent&#x3D;Mozilla&#x2F;5.0 (Linux; U; Android 2.3.5; en-us)&#39;</span><br><span class="line">            &#39;Nexus S Build&#x2F;GRK39F) AppleWebKit&#x2F;533.1&#39;</span><br><span class="line">            &#39;(KHTML, like Gecko) Version&#x2F;4.0 Mobile Safari&#x2F;533.1&#39;</span><br><span class="line">        )</span><br><span class="line">        brower &#x3D; webdriver.Chrome(chrome_options&#x3D;options)</span><br><span class="line">        brower.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">        # 定位搜索输入框</span><br><span class="line">        brower.find_element_by_id(&quot;index-kw&quot;).send_keys(&quot;Android 2.3.6&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        brower.get(&quot;about:version&quot;)</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;伪装成android2.3.6成功&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        brower.quit()</span><br><span class="line"></span><br><span class="line">    def testAndroid402Chrome(self):</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;测试伪装成android4.0.2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;设置android4.0.2个人代理&quot;)</span><br><span class="line">        options &#x3D; webdriver.ChromeOptions()</span><br><span class="line">        options.add_argument(</span><br><span class="line">            &#39;--user-agent&#x3D;Mozilla&#x2F;5.0 (Linux; U; Android 4.0.2;&#39;</span><br><span class="line">            &#39;en-us; Galaxy Nexus Build&#x2F;ICL53F) AppleWebKit&#x2F;534.30&#39;</span><br><span class="line">            &#39;(KHTML, like Gecko) Version&#x2F;4.0 Mobile Safari&#x2F;534.30&#39;</span><br><span class="line">        )</span><br><span class="line">        browser &#x3D; webdriver.Chrome(chrome_options&#x3D;options)</span><br><span class="line">        browser.get(&quot;http:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">        time.sleep(3)</span><br><span class="line">        browser.find_element_by_id(&quot;index-kw&quot;).send_keys(&quot;Android 4.0.2&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        browser.get(&quot;about:version&quot;)</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;伪装成android4.0.2成功&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        browser.quit()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    testmobile &#x3D; TestMobile()</span><br><span class="line">    testmobile.testAndroid402Chrome()</span><br><span class="line">    testmobile.testAndroid236Chrome()</span><br><span class="line">    testmobile.test_iPhoneChrome()</span><br><span class="line">    testmobile.test_iPadChrome()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>偶然看见这个实现，目前没想到应用场景。。直接使用appium进行移动自动化好像也能实现啊。。（可能工作中遇见的太少了）</p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>logging模块使用简介</title>
      <link href="2018/02/02/logging%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/"/>
      <url>2018/02/02/logging%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>python3日志模块，logging使用简介</p><a id="more"></a><h3 id="日志打印"><a href="#日志打印" class="headerlink" title="日志打印"></a>日志打印</h3><p>python3使用<code>logging</code>进行日志打印，很简单，直接引<code>logging</code>包即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line"></span><br><span class="line">logging.warning(&quot;This is warning message&quot;)</span><br><span class="line">logging.critical(&quot;This is critical message&quot;)</span><br><span class="line">logging.error(&quot;This is error message&quot;)</span><br><span class="line"># 打印结果</span><br><span class="line">WARNING:root:This is warning message</span><br><span class="line">CRITICAL:root:This is critical message</span><br><span class="line">ERROR:root:This is error message</span><br></pre></td></tr></table></figure><p>默认情况下只显示了大于等于WARNING级别的日志。<br><strong>日志级别</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">critical(50) &gt; error(40) &gt; warning(30) &gt; info(20) &gt; debug(10)</span><br></pre></td></tr></table></figure><h3 id="简单应用"><a href="#简单应用" class="headerlink" title="简单应用"></a>简单应用</h3><p>通过<code>logging.basicConfig</code>函数对日志的输出格式及方式做相关配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import logging</span><br><span class="line"></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    filename&#x3D;&#39;test.log&#39;,</span><br><span class="line">    format&#x3D;&#39;%(asctime)s - %(name)s - %(levelname)s - %(module)s: %(message)s&#39;,</span><br><span class="line">    datefmt&#x3D;&#39;%Y-%m-%d %H-%M-%S&#39;,</span><br><span class="line">    level&#x3D;logging.DEBUG,</span><br><span class="line">    #level&#x3D;10</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">logging.critical(&quot;This ia critical message&quot;)</span><br><span class="line">logging.error(&quot;This is error message&quot;)</span><br><span class="line">logging.warning(&quot;This is warning message&quot;)</span><br><span class="line">logging.info(&quot;This is info message&quot;)</span><br><span class="line">logging.debug(&quot;This is debug message&quot;)</span><br></pre></td></tr></table></figure><p><strong>logging.basicConfig</strong>函数各参数</p><p>1.filename：指定日志文件名<br>2.filemode：和file函数意义相同，指定日志文件的打开模式，’w’或’a’；默认为’a’表示“append”。<br>3.format：指定输出的格式和内容，format可以输出很多有用信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">format参数中可能用到的格式化串：</span><br><span class="line">%(name)s Logger的名字</span><br><span class="line">%(levelno)s 数字形式的日志级别</span><br><span class="line">%(levelname)s 文本形式的日志级别</span><br><span class="line">%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class="line">%(filename)s 调用日志输出函数的模块的文件名</span><br><span class="line">%(module)s 调用日志输出函数的模块名</span><br><span class="line">%(funcName)s 调用日志输出函数的函数名</span><br><span class="line">%(lineno)d 调用日志输出函数的语句所在的代码行</span><br><span class="line">%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</span><br><span class="line">%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</span><br><span class="line">%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class="line">%(thread)d 线程ID。可能没有</span><br><span class="line">%(threadName)s 线程名。可能没有</span><br><span class="line">%(process)d 进程ID。可能没有</span><br><span class="line">%(message)s用户输出的消息</span><br></pre></td></tr></table></figure><p>4.datefmt：指定时间格式，同time.strftime()<br>5.level：设置日志级别，默认为logging.WARNING<br>6.stream：指定将日志的输出流，可以指定输出到<code>sys.stderr</code>，<code>sys.stdout</code>或者文件，默认输出到sys.stderr，当stream和filename同时指定时，stream被忽略</p><h3 id="模块介绍"><a href="#模块介绍" class="headerlink" title="模块介绍"></a>模块介绍</h3><p>若要对logging进行更多灵活的控制，必须了解Logger，Handler，Formatter，Filter的概念：<br>logger提供了应用程序可以直接使用的接口；<br>handle将（logger创建的）日志记录发送到合适的目的输出；<br>filter提供了细度设备来决定输出哪条日志记录；<br>formatter决定日志记录的最终输出格式；</p><h4 id="Logger"><a href="#Logger" class="headerlink" title="Logger"></a>Logger</h4><p>每个程序在输出信息之前都要获得一个Logger。Logger通常对应了程序的模块名，比如聊天工具的图形界面模块可以这样获得它的Logger：<br>LOG=logging.getLogger(”chat.gui”)<br>而核心模块可以这样：<br>LOG=logging.getLogger(”chat.kernel”)</p><p>Logger.setLevel(lel):指定最低的日志级别，低于lel的级别将被忽略。debug是最低的内置级别，critical为最高<br>Logger.addFilter(filt)、Logger.removeFilter(filt):添加或删除指定的filter<br>Logger.addHandler(hdlr)、Logger.removeHandler(hdlr)：增加或删除指定的handler<br>Logger.debug()、Logger.info()、Logger.warning()、Logger.error()、Logger.critical()：可以设置的日志级别</p><h4 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h4><p>handler对象负责发送相关的信息到指定目的地。Python的日志系统有多种Handler可以使用。有些Handler可以把信息输出到控制台，有些Logger可以把信息输出到文件，还有些Handler可以把信息发送到网络上。如果觉得不够用，还可以编写自己的Handler。可以通过addHandler()方法添加多个多handler<br>Handler.setLevel(lel):指定被处理的信息级别，低于lel级别的信息将被忽略<br>Handler.setFormatter()：给这个handler选择一个格式<br>Handler.addFilter(filt)、Handler.removeFilter(filt)：新增或删除一个filter对象</p><p>每个Logger可以附加多个Handler。接下来我们就来介绍一些常用的Handler：</p><h5 id="1-logging-StreamHandler"><a href="#1-logging-StreamHandler" class="headerlink" title="1) logging.StreamHandler"></a>1) logging.StreamHandler</h5><p>使用这个Handler可以向类似与sys.stdout或者sys.stderr的任何文件对象(file object)输出信息。它的构造函数是:StreamHandler([strm])<br>其中strm参数是一个文件对象。默认是sys.stderr</p><h5 id="2-logging-FileHandler"><a href="#2-logging-FileHandler" class="headerlink" title="2) logging.FileHandler"></a>2) logging.FileHandler</h5><p>和StreamHandler类似，用于向一个文件输出日志信息。不过FileHandler会帮你打开这个文件。它的构造函数是：FileHandler(filename[,mode])<br>filename是文件名，必须指定一个文件名。<br>mode是文件的打开方式。参见Python内置函数open()的用法。默认是’a’，即添加到文件末尾。</p><h5 id="3-logging-handlers-RotatingFileHandler"><a href="#3-logging-handlers-RotatingFileHandler" class="headerlink" title="3) logging.handlers.RotatingFileHandler"></a>3) logging.handlers.RotatingFileHandler</h5><p>这个Handler类似于上面的FileHandler，但是它可以管理文件大小。当文件达到一定大小之后，它会自动将当前日志文件改名，然后创建 一个新的同名日志文件继续输出。比如日志文件是chat.log。当chat.log达到指定的大小之后，RotatingFileHandler自动把文件改名为chat.log.1。不过，如果chat.log.1已经存在，会先把chat.log.1重命名为chat.log.2。。。最后重新创建 chat.log，继续输出日志信息。它的构造函数是：<br>RotatingFileHandler( filename[, mode[, maxBytes[, backupCount]]])<br>其中filename和mode两个参数和FileHandler一样。<br>maxBytes用于指定日志文件的最大文件大小。如果maxBytes为0，意味着日志文件可以无限大，这时上面描述的重命名过程就不会发生。<br>backupCount用于指定保留的备份文件的个数。比如，如果指定为2，当上面描述的重命名过程发生时，原有的chat.log.2并不会被更名，而是被删除。</p><h5 id="4-logging-handlers-TimedRotatingFileHandler"><a href="#4-logging-handlers-TimedRotatingFileHandler" class="headerlink" title="4) logging.handlers.TimedRotatingFileHandler"></a>4) logging.handlers.TimedRotatingFileHandler</h5><p>这个Handler和RotatingFileHandler类似，不过，它没有通过判断文件大小来决定何时重新创建日志文件，而是间隔一定时间就 自动创建新的日志文件。重命名的过程与RotatingFileHandler类似，不过新的文件不是附加数字，而是当前时间。它的构造函数是：<br>TimedRotatingFileHandler( filename [,when [,interval [,backupCount]]])<br>其中filename参数和backupCount参数和RotatingFileHandler具有相同的意义。<br>interval是时间间隔。<br>when参数是一个字符串。表示时间间隔的单位，不区分大小写。它有以下取值：<br>S 秒<br>M 分<br>H 小时<br>D 天<br>W 每星期（interval==0时代表星期一）<br>midnight 每天凌晨</p><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>日志的一般操作顺序为：<br>1.创建一个流类型handler用于输出日志到控制台(控制器)<br>2.定义输出日志级别<br>3.定义handler的输出格式formatter<br>4.将handler添加到logging对象</p><h4 id="同时输出日志到控制台和文件"><a href="#同时输出日志到控制台和文件" class="headerlink" title="同时输出日志到控制台和文件"></a>同时输出日志到控制台和文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import logging</span><br><span class="line"></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    filename&#x3D;&#39;test.log&#39;,</span><br><span class="line">    format&#x3D;&#39;%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s&#39;,</span><br><span class="line">    datefmt&#x3D;&#39;%Y-%m-%d %H-%M-%S&#39;,</span><br><span class="line">    level&#x3D;10</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># 定义一个StreamHandler(日志流处理器)，将INFO级别或更高的日志信息打印到标准错误，并将其添加到当前的日志处理对象</span><br><span class="line">console &#x3D; logging.StreamHandler()</span><br><span class="line">console.setLevel(logging.INFO)</span><br><span class="line"># 格式化，设置控制台的日志输出格式</span><br><span class="line">formatter &#x3D; logging.Formatter(&#39;%(name)-12s: %(levelname)-8s %(message)s&#39;)</span><br><span class="line"># 定义控制器的日志输出格式</span><br><span class="line">console.setFormatter(formatter)</span><br><span class="line"># 将控制器添加到logging对象</span><br><span class="line">logging.getLogger(&#39;&#39;).addHandler(console)</span><br><span class="line"></span><br><span class="line">logging.critical(&quot;This is critical message&quot;)</span><br><span class="line">logging.error(&quot;This is error message&quot;)</span><br><span class="line">logging.warning(&quot;This is warning message&quot;)</span><br><span class="line">logging.info(&quot;This is info message&quot;)</span><br><span class="line">logging.debug(&quot;This is debug message&quot;)</span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>用法类似于java中的log4j的logging.config，我们也可以自己配置<code>logger.conf</code>文件：</p><h4 id="Logger-conf"><a href="#Logger-conf" class="headerlink" title="Logger.conf"></a>Logger.conf</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">###############################################</span><br><span class="line">[loggers]</span><br><span class="line">keys&#x3D;root,example01,example02</span><br><span class="line"></span><br><span class="line">[logger_root]</span><br><span class="line">level&#x3D;DEBUG</span><br><span class="line"></span><br><span class="line">handlers&#x3D;hand01,hand02</span><br><span class="line"></span><br><span class="line">[logger_example01]</span><br><span class="line">handlers&#x3D;hand01,hand02</span><br><span class="line">qualname&#x3D;example01</span><br><span class="line">propagate&#x3D;0</span><br><span class="line"></span><br><span class="line">[logger_example02]</span><br><span class="line">handlers&#x3D;hand01,hand03</span><br><span class="line">qualname&#x3D;example02</span><br><span class="line">propagate&#x3D;0</span><br><span class="line">###############################################</span><br><span class="line">[handlers]</span><br><span class="line">keys&#x3D;hand01,hand02,hand03</span><br><span class="line"></span><br><span class="line">[handler_hand01]</span><br><span class="line">class&#x3D;StreamHandler</span><br><span class="line">level&#x3D;INFO</span><br><span class="line">formatter&#x3D;form02</span><br><span class="line">args&#x3D;(sys.stderr,)</span><br><span class="line"></span><br><span class="line">[handler_hand02]</span><br><span class="line">class&#x3D;FileHandler</span><br><span class="line">level&#x3D;DEBUG</span><br><span class="line">formatter&#x3D;form01</span><br><span class="line">args&#x3D;(&#39;D:&#x2F;bug_things&#x2F;selenium&#x2F;logs&#x2F;AutoTest.log&#39;, &#39;a&#39;, &#39;utf-8&#39;)</span><br><span class="line"></span><br><span class="line">[handler_hand03]</span><br><span class="line">class&#x3D;handlers.RotatingFileHandler</span><br><span class="line">level&#x3D;INFO</span><br><span class="line">formatter&#x3D;form02</span><br><span class="line">args&#x3D;(&#39;D:&#x2F;bug_things&#x2F;selenium&#x2F;logs&#x2F;AutoTest.log&#39;, &#39;a&#39;, 10*1024*1024, 5, &#39;utf-8&#39;)</span><br><span class="line">###############################################</span><br><span class="line">[formatters]</span><br><span class="line">keys&#x3D;form01,form02</span><br><span class="line"></span><br><span class="line">[formatter_form01]</span><br><span class="line">format&#x3D;%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s</span><br><span class="line">datefmt&#x3D;%a, %d %b %Y %H:%M:%S</span><br><span class="line"></span><br><span class="line">[formatter_form02]</span><br><span class="line">format&#x3D;%(name)-12s: %(levelname)-8s %(message)s</span><br><span class="line">datefmt&#x3D;%Y %m %d %H %M %S</span><br></pre></td></tr></table></figure><h4 id="封装方法"><a href="#封装方法" class="headerlink" title="封装方法"></a>封装方法</h4><p>将配置文件中定义的日志打印的配置进行封装，生成<code>debug</code>，<code>info</code>，<code>message</code>方法：<br>Log.py</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import logging.config</span><br><span class="line"></span><br><span class="line">logging.config.fileConfig(&quot;Logger.conf&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def debug(message):</span><br><span class="line">    # 打印debug级别的日志方法</span><br><span class="line">    logging.debug(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def warning(message):</span><br><span class="line">    # 打印warning级别的日志方法</span><br><span class="line">    logging.warning(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def info(message):</span><br><span class="line">    # 打印info级别的日志方法</span><br><span class="line">    logging.info(message)</span><br></pre></td></tr></table></figure><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><p>以百度搜索为例:<br>BaiDu.py</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from Log import *</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestBaiDuSearch():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 启动浏览器</span><br><span class="line">        self.browser &#x3D; webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">    def test_baidu_search(self):</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;搜索&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        url &#x3D; &quot;https:&#x2F;&#x2F;www.baidu.com&quot;</span><br><span class="line">        self.browser.get(url)</span><br><span class="line">        info(u&quot;访问百度首页&quot;)</span><br><span class="line">        self.browser.find_element_by_id(&#39;kw&#39;).send_keys(u&quot;自动化测试&quot;)</span><br><span class="line">        info(u&quot;在输入框中搜索关键字“自动化测试”&quot;)</span><br><span class="line">        self.browser.find_element_by_id(&#39;su&#39;).click()</span><br><span class="line">        info(u&quot;单击搜索按键&quot;)</span><br><span class="line">        info(u&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;测试执行结束&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">        time.sleep(3)</span><br><span class="line">        self.browser.quit()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    testbaidu &#x3D; TestBaiDuSearch()</span><br><span class="line">    testbaidu.test_baidu_search()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行BaiDu.py文件，在<code>D:/bug_things/selenium/logs</code>目录下会生成<code>AutoTest.log</code>日志文件，文件内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Fri, 02 Feb 2018 17:10:52 Log.py[line:20] INFO &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;搜索&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Fri, 02 Feb 2018 17:10:53 Log.py[line:20] INFO 访问百度首页</span><br><span class="line">Fri, 02 Feb 2018 17:10:53 Log.py[line:20] INFO 在输入框中搜索关键字“自动化测试”</span><br><span class="line">Fri, 02 Feb 2018 17:10:53 Log.py[line:20] INFO 单击搜索按键</span><br><span class="line">Fri, 02 Feb 2018 17:10:53 Log.py[line:20] INFO &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;测试执行结束&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><p>同时控制台打印信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root        : INFO     &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;搜索&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">root        : INFO     访问百度首页</span><br><span class="line">root        : INFO     在输入框中搜索关键字“自动化测试”</span><br><span class="line">root        : INFO     单击搜索按键</span><br><span class="line">root        : INFO     &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;测试执行结束&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://blog.csdn.net/a953713428/article/details/78648298">参考文章</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python黑科技 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python3 </tag>
            
            <tag> logging </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字符编码简单总结</title>
      <link href="2018/02/02/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93/"/>
      <url>2018/02/02/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>python字符串和编码</p><a id="more"></a><p>首先，字符串是一种数据类型，我们还经常会用到，然后，最常见的字符串问题就是字符编码问题，经常会看见文件打开一堆乱码，然后手工转<code>utf-8</code>啥的。</p><h3 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h3><h4 id="计算机基础"><a href="#计算机基础" class="headerlink" title="计算机基础"></a>计算机基础</h4><p>计算机能够处理的只有数字，所以其他类型的数据想要被计算机识别并处理，首先要进行的就是字符编码，转换成数字之后处理。最早的计算机在设计时采用8个比特（bit）作为一个字节（byte），所以，一个字节能表示的最大的整数就是(11111111,二进制的255)，如果要表示更大的整数，就必须更多的字节，比如两个字节可以表示最大整数是65535。</p><p>上个世纪60年代，美国制定了一套字符编码，对英语字符与二进制位之间的关系，做了统一规定。这被称为 ASCII 码，一直沿用至今。<br>ASCII 码一共规定了128个字符的编码，比如空格SPACE是32（二进制00100000），大写的字母A是65（二进制01000001）。这128个符号（包括32个不能打印出来的控制符号），只占用了一个字节的后面7位，最前面的一位统一规定为0。</p><h4 id="字库表"><a href="#字库表" class="headerlink" title="字库表"></a>字库表</h4><p>字库表是一个相当于所有可读或者可显示字符的数据库，字库表决定了整个字符集能够展现表示的所有字符的范围。</p><h4 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h4><p>字符集是一个系统支持的所有抽象字符的集合。常见的字符集有<code>ASCII</code>，<code>UTF-8</code>，<code>UTG-16</code>，<code>GB2313</code>等。</p><h4 id="字符编码-1"><a href="#字符编码-1" class="headerlink" title="字符编码"></a>字符编码</h4><p>字符编码可以看成是一套规则，目的就是在符号集合和数字系统直接建立对应关系。常见的字符编码有<code>Unicode</code>，<code>ASCII</code>，<code>UTF-8</code>等</p><h4 id="三者关系"><a href="#三者关系" class="headerlink" title="三者关系"></a>三者关系</h4><p>字库表可以看成是一个全球统一的可读可用的字符库，但是实际使用过程中，很少需要用到这么多字符，例如，中文系统基本就用不到日文的字符，所以也就不需要日文字符的那一部分集合；因此就会诞生一个个的类似于定制的字符集合，这就是字符集，集合中包含了数据和字母的一个个对应关系，这就是字符编码。以ASCII为例：</p><h3 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h3><p>ASCII（American Standard Code for Information Interchange，美国信息交换标准代码）是基于拉丁字母的一套电脑编码系统。它主要用于显示现代英语，而其扩展版本EASCII则可以勉强显示其他西欧语言。它是现今最通用的单字节编码系统（但是有被Unicode追上的迹象），并等同于国际标准ISO/IEC 646。</p><p>ASCII字符集：主要包括控制字符（回车键、退格、换行键等）；可显示字符（英文大小写字符、阿拉伯数字和西文符号）。</p><p>ASCII编码：将ASCII字符集转换为计算机可以接受的数字系统的数的规则。使用7位（bits）表示一个字符，共128字符；但是7位编码的字符集只能支持128个字符，为了表示更多的欧洲常用字符对ASCII进行了扩展，ASCII扩展字符集使用8位（bits）表示一个字符，共256字符。</p><h3 id="python字符编码"><a href="#python字符编码" class="headerlink" title="python字符编码"></a>python字符编码</h3><p>ASCII是出现比较早的字符编码，但是其中只包含了数字和英文大小写字符，对于中文，日文等字符就不适用了，国内学者为了能够完成中文编码，就指定了<code>GB2312</code>编码，同样的，很多国家都有指定自己的编码，这样就会遇到一个问题，中文编码到日文编码的环境查看，会发生乱码，因为根本就不支持这样的字符，为了解决这个问题，一个统一的编码就诞生了<code>Unicode</code>，Unicode编码不同于ASCII的使用一个字节表示一个字符，它使用的是两个字节表示一个字符（中文至少需要两个字节），生僻字符就需要4个字符。<br>字母’A’用ASCII编码，十进制是<code>65</code>，二进制是<code>01000001</code>；用Unicode编码结果是<code>00000000 01000001</code>。<br>当全部都使用Unicode编码时，乱码问题肯定是得到解决了，但是有个问题，Unicode编码时连个字节表示的一个字符，那么就会比原来使用ASCII编码多出了至少一倍的内存空间占用，怎么都觉得很亏。<br>所以，为了节约内存空间，又出现了把Unicode编码转换为“可变长编码”的<code>utf-8</code>编码。UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节，常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节。如果你要传输的文本包含大量英文字符，用UTF-8编码就能节省空间。</p><p>下面来弄清楚python的字符编码：<br>在python3中，字符串是以Unicode编码的，也就是说，支持多语言。由于Python的字符串类型是str，在内存中以Unicode表示，一个字符对应若干个字节。如果要在网络上传输，或者保存到磁盘上，就需要把<code>str</code>变为以字节为单位的<code>bytes</code>。<br><strong>Python对bytes类型的数据用带b前缀的单引号或双引号表示</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &#x3D; b&#39;ABC&#39;</span><br></pre></td></tr></table></figure><p>注意区分’ABC’和b’ABC’，前者是str，后者虽然内容显示得和前者一样，但bytes的每个字符都只占用一个字节。<br>纯英文的str可以用ASCII编码为bytes，内容是一样的，含有中文的str可以用UTF-8编码为bytes。含有中文的str无法用ASCII编码，因为中文编码的范围超过了ASCII编码的范围，Python会报错。</p><h3 id="编码及解码"><a href="#编码及解码" class="headerlink" title="编码及解码"></a>编码及解码</h3><p>首先python使用的是Unicode编码，字符串进行网络或者磁盘存储时，需要先编码成指定类型<code>bytes</code>，使用<code>encode()</code>方法即可。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(&#39;中文&#39;.encode(&#39;utf-8&#39;))</span><br><span class="line">b&#39;\xe4\xb8\xad\xe6\x96\x87&#39;</span><br></pre></td></tr></table></figure><p>反过来，从网络或者磁盘上读取字节流，那么读到的数据是<code>bytes</code>，要把<code>bytes</code>转换为<code>str</code>，就需要使用<code>decode()</code>方法进行解码，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(b&#39;\xe4\xb8\xad\xe6\x96\x87&#39;.decode(&#39;utf-8&#39;))</span><br><span class="line">中文</span><br></pre></td></tr></table></figure><p>在进行日常python编程中，在操作字符串时，我们经常遇到<code>str</code>和<code>bytes</code>的互相转换。为了避免乱码问题，应当始终坚持使用UTF-8编码对<code>str</code>和<code>bytes</code>进行转换。</p><p>由于Python源代码也是一个文本文件，所以，当你的源代码中包含中文的时候，在保存源代码时，就需要务必指定保存为UTF-8编码。当Python解释器读取源代码时，为了让它按UTF-8编码读取，我们通常在文件开头写上:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br></pre></td></tr></table></figure><p>pycharm设置方法：<br><code>File-Settings-Editor-File and Code Templates-Python Script</code>设置中添加上这两行即可。</p><p>以前曾经写过一篇博，关于设置python编码的:<a href="http://tokyle.com/2017/12/13/python%E7%BC%96%E7%A0%81/">python编码</a></p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431664106267f12e9bef7ee14cf6a8776a479bdec9b9000">廖雪峰的python教程</a><br><a href="https://www.cnblogs.com/skynet/archive/2011/05/03/2035105.html">字符集合字符编码</a></p></blockquote><p>后记：由于昨天公司发生的很无语加无理取闹的一些事，整个办公室氛围都是压抑的，网上的教程资料也没怎么细致的看进去，写出来的总结也就是乱七八糟的，估计静下来之后我自己都看不懂。。。以后再来修改吧。唉，做技术的，干嘛不追求技术的进步，弄一些有的没的办公室政治呢，有意思吗？</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现断言失败截图</title>
      <link href="2018/02/02/%E5%AE%9E%E7%8E%B0%E6%96%AD%E8%A8%80%E5%A4%B1%E8%B4%A5%E6%88%AA%E5%9B%BE/"/>
      <url>2018/02/02/%E5%AE%9E%E7%8E%B0%E6%96%AD%E8%A8%80%E5%A4%B1%E8%B4%A5%E6%88%AA%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>python基于selenium进行自动化测试，实现断言失败进行截图</p><a id="more"></a><p>进行自动化测试过程中，经常会遇见断言失败，时候补查失败的场景，要么是保存日志，要么就是保存失败的截图。尝试实现，在断言失败时候，加入实时截图：</p><h3 id="编码出错"><a href="#编码出错" class="headerlink" title="编码出错"></a>编码出错</h3><p>遇到问题：<br>截图文件名编码格式转换时候，会报错（以下写法在python 2.7可以使用）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pic_path &#x3D; os.path.join(save_path, str(pic_name).decode(&quot;utf-8&quot;).encode(&quot;gbk&quot;) + &quot;.png&quot;)</span><br></pre></td></tr></table></figure><p>报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AttributeError: &#39;str&#39; object has no attribute &#39;decode&#39;</span><br></pre></td></tr></table></figure><p>查找原因：<br>既然<code>python 2.7</code>可以正常执行，那就应该是<code>python 3</code>对于编码进行了变更。</p><p><code>Stack Overflow</code>上大家好像都是经常踩我踩过的所有坑..又找到答案了：<br>这位大哥的回答：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Begin with Python 3, all string is unicode object.</span><br><span class="line">  a &#x3D; &#39;Happy New Year&#39; # Python 3</span><br><span class="line">  b &#x3D; unicode(&#39;Happy New Year&#39;) # Python 2</span><br><span class="line">the code before are same. So I think you should remove the .decode(&#39;utf-8&#39;). Because you have already get the unicode object.</span><br></pre></td></tr></table></figure><p>python3的普通字符串是str，所以python3的str就相当于python2的Unicode。大致意思好像就是python3使用的str类型并不关心你最终是什么编码，无论是utf-8还是gb2312，它只是用Unicode字符集编码来表示每一个字符，直到输出到文件流，需要转换为<code>bytes</code>类型时，才用encode指定具体的编码实现方式。</p><p>python的中间编码是Unicode，所以python2就需要先进行解码（decode）到中间编码，再进行编码（encode）到指定编；，而python3直接可以转换到指定编码（encode）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在python3中，str-- encode -&gt; bytes-- decode -&gt; str</span><br></pre></td></tr></table></figure><h3 id="python3编码"><a href="#python3编码" class="headerlink" title="python3编码"></a>python3编码</h3><p>系统编码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line"># 系统默认编码</span><br><span class="line">print(sys.getdefaultencoding())</span><br><span class="line"># 字符串编码</span><br><span class="line">s &#x3D; &quot;中文&quot;</span><br><span class="line">s_utf8 &#x3D; s.encode(&#39;utf-8&#39;)</span><br><span class="line">print(type(s))</span><br><span class="line">print(type(s_utf8))</span><br><span class="line"></span><br><span class="line">utf-8</span><br><span class="line">&lt;class &#39;str&#39;&gt;</span><br><span class="line">&lt;class &#39;bytes&#39;&gt;</span><br></pre></td></tr></table></figure><p>可以看到，python3的系统编码就是<code>utf-8</code>，为了避免自找麻烦，牢记使用<code>utf-8</code>即可！<br>所以上述报错代码可以更改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pic_path &#x3D; os.path.join(save_path, str(pic_name) + &quot;.png&quot;)</span><br></pre></td></tr></table></figure><h3 id="断言失败截图实例"><a href="#断言失败截图实例" class="headerlink" title="断言失败截图实例"></a>断言失败截图实例</h3><p>实现目标是在进行自动化测试过程中，一旦发生断言失败，就根据当前时间，在工程下创建名称为当前日期的目录，，目录下创建名称为当前时间的文件夹，文件夹中保存断言失败的屏幕截图</p><h4 id="获取当前日期和时间"><a href="#获取当前日期和时间" class="headerlink" title="获取当前日期和时间"></a>获取当前日期和时间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import time</span><br><span class="line">from datetime import datetime as dt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">用于获取当前的日期以及时间</span><br><span class="line">用于生成保存截图文件目录名</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">def current_date():</span><br><span class="line">    date &#x3D; time.localtime()</span><br><span class="line">    # 构造今天的日期字符串</span><br><span class="line">    today &#x3D; str(date.tm_year) + &quot;-&quot; + str(date.tm_mon) + &quot;-&quot; + str(date.tm_mday)</span><br><span class="line">    return today</span><br><span class="line"></span><br><span class="line">def current_time():</span><br><span class="line">    time_str &#x3D; dt.now()</span><br><span class="line">    # 构建当期时间字符串</span><br><span class="line">    now &#x3D; time_str.strftime(&#39;%H-%M-%S&#39;)</span><br><span class="line">    return now</span><br></pre></td></tr></table></figure><h4 id="创建目录和文件夹"><a href="#创建目录和文件夹" class="headerlink" title="创建目录和文件夹"></a>创建目录和文件夹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from DateUtil import current_time, current_date</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">用于创建目录，用于存放异常截图</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">def create_dir():</span><br><span class="line">    # 获得当前文件所在目录的绝对路径</span><br><span class="line">    current_path &#x3D; os.path.abspath(&#39;.&#39;)</span><br><span class="line">    # 获取今天的日期字符串</span><br><span class="line">    today &#x3D; current_date()</span><br><span class="line">    # 构造以今天日期命名的目录的绝对路径</span><br><span class="line">    date_dir &#x3D; os.path.join(current_path, today)</span><br><span class="line">    print(date_dir)</span><br><span class="line"></span><br><span class="line">    if not os.path.exists(date_dir):</span><br><span class="line">        # 如果以今天日期命名的目录不存在则创建</span><br><span class="line">        os.mkdir(date_dir)</span><br><span class="line">        # 获取当前的时间字符串</span><br><span class="line">        now &#x3D; current_time()</span><br><span class="line">        # 构造以当前时间命名的目录的绝对路径</span><br><span class="line">        time_dir &#x3D; os.path.join(date_dir, now)</span><br><span class="line">        print(time_dir)</span><br><span class="line">        if not os.path.exists(time_dir):</span><br><span class="line">            # 如果以当前时间命名的目录不存在则创建</span><br><span class="line">            os.mkdir(time_dir)</span><br><span class="line">        return time_dir</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="百度搜索示例"><a href="#百度搜索示例" class="headerlink" title="百度搜索示例"></a>百度搜索示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from FileUtil import create_dir</span><br><span class="line">from nose.tools import assert_true</span><br><span class="line">import time,os</span><br><span class="line">import traceback</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 创建存放异常截图的目录，并得到本次实例中存放图片目录的绝对路径，作为全局变量，供本次所有测试用例调用</span><br><span class="line">pic_dir &#x3D; create_dir()</span><br><span class="line"></span><br><span class="line">def take_screenshot(driver, save_path, pic_name):</span><br><span class="line">    # 封装截屏方法</span><br><span class="line">    # 构造屏幕截图路径及图片名</span><br><span class="line">    # 因为windows默认编码是GBK，而传入的图片名是utf-8编码，所以需要进行转码，以便让图片名中的中文字符能够正常显示</span><br><span class="line">    pic_path &#x3D; os.path.join(save_path, str(pic_name) + &quot;.png&quot;)</span><br><span class="line">    try:</span><br><span class="line">        # 调用webdriver提供的get_screenshot_as_file()方法，将截取的屏幕图片保存为本地文件</span><br><span class="line">        driver.get_screenshot_as_file(pic_path)</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(traceback.print_exc(), e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TestFailCaptureScreen():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        &quot;&quot;&quot;启动浏览器&quot;&quot;&quot;</span><br><span class="line">        self.browser &#x3D; webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">    def test_baidu_search(self):</span><br><span class="line">        url &#x3D; &quot;https:&#x2F;&#x2F;www.baidu.com&quot;</span><br><span class="line">        self.browser.get(url)</span><br><span class="line">        try:</span><br><span class="line">            self.browser.find_element_by_id(&#39;kw&#39;).send_keys(u&quot;自动化测试&quot;)</span><br><span class="line">            self.browser.find_element_by_id(&#39;su&#39;).click()</span><br><span class="line">            time.sleep(3)</span><br><span class="line">            # 断言页面的代码中是否存在“自动化测试框架_百度百科”这几个字</span><br><span class="line">            assert_true(u&quot;纯净方糖&quot; in self.browser.page_source)</span><br><span class="line">            # 页面中没有断言的几个字，所以会触发except语句的执行，并触发截图操作</span><br><span class="line">        except AssertionError as e:</span><br><span class="line">            take_screenshot(self.browser, pic_dir, e)</span><br><span class="line">        except Exception as e:</span><br><span class="line">            take_screenshot(self.browser, pic_dir, e)</span><br><span class="line"></span><br><span class="line">        time.sleep(2)</span><br><span class="line">        self.browser.quit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    testfailscreen &#x3D; TestFailCaptureScreen()</span><br><span class="line">    testfailscreen.test_baidu_search()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>感觉是时候研究一波python字符编码了…</p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现自动化测试数据分离</title>
      <link href="2018/02/01/%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB/"/>
      <url>2018/02/01/%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB/</url>
      
        <content type="html"><![CDATA[<p>使用数据分离自动化测试，测试执行完成自动邮件发送</p><a id="more"></a><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>配置文件中的内容为工程所有配置信息，各个模块的元素定位的方法以及值，服务器（应用服务器和数据库服务器）配置信息，用户账号密码等信息</p><p>实例，cashier.ini</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[login]</span><br><span class="line">storeNo &#x3D; id &gt; com.anmav.cashierdesk:id&#x2F;etStoreNo</span><br><span class="line">username &#x3D; id &gt; com.anmav.cashierdesk:id&#x2F;login_accountEdt</span><br><span class="line">pwd &#x3D; id &gt; com.anmav.cashierdesk:id&#x2F;login_paswEdt</span><br><span class="line">login &#x3D; id &gt; com.anmav.cashierdesk:id&#x2F;tvLogin</span><br><span class="line">login_store &#x3D; ***</span><br><span class="line">login_user &#x3D; ***</span><br><span class="line">login_pwd &#x3D; ***</span><br><span class="line"></span><br><span class="line">[mailmsg]</span><br><span class="line">mail_user &#x3D; ***</span><br><span class="line">mail_pwd &#x3D; ***</span><br><span class="line">mail_to &#x3D; ***</span><br><span class="line">mail_host &#x3D; ***</span><br></pre></td></tr></table></figure><p>该配置文件包含了<code>login</code>模块进行元素定位需要的方法以及值，在工程中进行元素定位值，只需要使用<code>configparser</code>模块完成配置文件读取即可。</p><h3 id="邮件发送数据分离"><a href="#邮件发送数据分离" class="headerlink" title="邮件发送数据分离"></a>邮件发送数据分离</h3><p>封装数据分离之后的邮件发送类(MailSend.py)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.mime.multipart import MIMEMultipart</span><br><span class="line">import smtplib</span><br><span class="line">import configparser</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MailSend():</span><br><span class="line">    &quot;&quot;&quot;邮件发送&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, mail_subject, report_file):</span><br><span class="line">        self.mail_subject &#x3D; mail_subject</span><br><span class="line">        self.report_file &#x3D; report_file</span><br><span class="line">        self.settings &#x3D; os.path.abspath(&#39;..&#39;) + &quot;\cashier_conf\cashier_setting.ini&quot;</span><br><span class="line"></span><br><span class="line">    def send_mail(self):</span><br><span class="line">        &quot;&quot;&quot;读取测试报告&quot;&quot;&quot;</span><br><span class="line">        cf &#x3D; configparser.ConfigParser()</span><br><span class="line">        cf.read(self.settings)</span><br><span class="line">        cf.sections()</span><br><span class="line"></span><br><span class="line">        # 获取邮箱发件人，密码，收件人，邮件服务器</span><br><span class="line">        mail_user &#x3D; cf.get(&#39;mailmsg&#39;, &#39;mail_user&#39;)</span><br><span class="line">        mail_pwd &#x3D; cf.get(&#39;mailmsg&#39;, &#39;mail_pwd&#39;)</span><br><span class="line">        mail_to &#x3D; cf.get(&#39;mailmsg&#39;, &#39;mail_to&#39;)</span><br><span class="line">        mail_host &#x3D; cf.get(&#39;mailmsg&#39;, &#39;mail_host&#39;)</span><br><span class="line"></span><br><span class="line">        # 发送邮件配置</span><br><span class="line">        with open(self.report_file, &#39;r&#39;, encoding&#x3D;&#39;utf-8&#39;) as f_obj:</span><br><span class="line">            content &#x3D; f_obj.read()</span><br><span class="line">        msg &#x3D; MIMEMultipart(&#39;mixed&#39;)</span><br><span class="line">        # 添加邮件内容</span><br><span class="line">        msg_html &#x3D; MIMEText(content, &#39;html&#39;, &#39;utf-8&#39;)</span><br><span class="line">        msg.attach(msg_html)</span><br><span class="line"></span><br><span class="line">        # 添加附件</span><br><span class="line">        msg_attachment &#x3D; MIMEText(content, &#39;html&#39;, &#39;utf-8&#39;)</span><br><span class="line">        msg_attachment[&quot;Content-Disposition&quot;] &#x3D; &#39;attachment; filename&#x3D;&#123;0&#125;&#39;.format(self.report_file)</span><br><span class="line">        msg.attach(msg_attachment)</span><br><span class="line"></span><br><span class="line">        msg[&#39;Subject&#39;] &#x3D; self.mail_subject</span><br><span class="line">        msg[&#39;Form&#39;] &#x3D; mail_user</span><br><span class="line">        msg[&#39;To&#39;] &#x3D; mail_to</span><br><span class="line">        try:</span><br><span class="line">            # 连接邮箱服务器</span><br><span class="line">            s &#x3D; smtplib.SMTP()</span><br><span class="line">            s.connect(mail_host)</span><br><span class="line">            # 登录</span><br><span class="line">            s.login(mail_user, mail_pwd)</span><br><span class="line">            # 发送邮件</span><br><span class="line">            s.sendmail(mail_user, mail_to, msg.as_string())</span><br><span class="line">            s.quit()</span><br><span class="line">        except Exception as e:</span><br><span class="line">            print(&quot;发送邮件异常：&quot;, e)</span><br></pre></td></tr></table></figure><h3 id="元素定位数据分离"><a href="#元素定位数据分离" class="headerlink" title="元素定位数据分离"></a>元素定位数据分离</h3><p>封装了元素定位的方法（find_element_by…），实现在工程中进行元素定位时，直接调用方法(GetElement.py)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from selenium.webdriver.support.ui import WebDriverWait</span><br><span class="line">import os</span><br><span class="line">import configparser</span><br><span class="line">import traceback</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class GetElement():</span><br><span class="line">    &quot;&quot;&quot;获取元素定位方法和值&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 读取配置文件</span><br><span class="line">        self.settings &#x3D; os.path.abspath(&#39;..&#39;) + &quot;&#x2F;cashier_conf&#x2F;cashier_setting.ini&quot;</span><br><span class="line">        self.cf &#x3D; configparser.ConfigParser()</span><br><span class="line">        self.cf.read(self.settings)</span><br><span class="line">        self.cf.sections()</span><br><span class="line"></span><br><span class="line">    def get_elementId(self, driver, webSiteName, webelement):</span><br><span class="line">        try:</span><br><span class="line">            # 获取配置文件中的定位方法以及定位元素</span><br><span class="line">            webElemnt &#x3D; self.cf.get(webSiteName, webelement).split(&#39;&gt;&#39;)</span><br><span class="line">            webelement_method &#x3D; webElemnt[0].strip()</span><br><span class="line">            webelement_expression &#x3D; webElemnt[1].strip()</span><br><span class="line">            element &#x3D; WebDriverWait(driver, 10).until\</span><br><span class="line">                (lambda x: x.find_element(webelement_method, webelement_expression))</span><br><span class="line">        except Exception as e:</span><br><span class="line">            print(traceback.print_exc(), e)</span><br><span class="line">        else:</span><br><span class="line">            return element</span><br></pre></td></tr></table></figure><h3 id="自动化测试实现数据分离"><a href="#自动化测试实现数据分离" class="headerlink" title="自动化测试实现数据分离"></a>自动化测试实现数据分离</h3><p>使用数据分离的方式完成<strong>系统登录</strong>的自动化测试，方便维护，后期只需要维护<code>cashier_setting.ini</code>文件即可(testlogin.py)。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import configparser, os</span><br><span class="line">import traceback</span><br><span class="line">from datetime import datetime as dt</span><br><span class="line">from appium import webdriver</span><br><span class="line">from nose.tools import assert_true</span><br><span class="line">from selenium.webdriver.support.ui import WebDriverWait</span><br><span class="line">from selenium.common.exceptions import NoSuchElementException,TimeoutException</span><br><span class="line">from cashier_tools.GetElement import GetElement</span><br><span class="line">from cashier_tools.MailSend import MailSend</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Login():</span><br><span class="line">    &quot;&quot;&quot;登录&quot;&quot;&quot;</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 初始化，配置环境</span><br><span class="line">        self.desired_caps &#x3D; &#123;&#125;</span><br><span class="line">        self.desired_caps[&#39;platformName&#39;] &#x3D; &#39;Android&#39;</span><br><span class="line">        self.desired_caps[&#39;platformVersion&#39;] &#x3D; &#39;5.1&#39;</span><br><span class="line">        self.desired_caps[&#39;deviceName&#39;] &#x3D; &#39;Android Emulator&#39;</span><br><span class="line">        self.desired_caps[&#39;noReset&#39;] &#x3D; True</span><br><span class="line">        self.desired_caps[&#39;appPackage&#39;] &#x3D; &#39;com.anmav.cashierdesk&#39;</span><br><span class="line">        self.desired_caps[&#39;appActivity&#39;] &#x3D; &#39;com.anmav.cashierdesk.login.activity.LoginActivity&#39;</span><br><span class="line"></span><br><span class="line">        self.driver &#x3D; webdriver.Remote(&#39;http:&#x2F;&#x2F;localhost:4723&#x2F;wd&#x2F;hub&#39;, self.desired_caps)</span><br><span class="line">        self.elementid &#x3D; GetElement()</span><br><span class="line"></span><br><span class="line">    def test_login(self):</span><br><span class="line">        settings &#x3D; os.path.abspath(&#39;..&#39;) + &quot;&#x2F;cashier_conf&#x2F;cashier_setting.ini&quot;</span><br><span class="line">        cf &#x3D; configparser.ConfigParser()</span><br><span class="line">        cf.read(settings)</span><br><span class="line">        cf.sections()</span><br><span class="line"></span><br><span class="line">        # 定位门店编号输入框</span><br><span class="line">        storeno &#x3D; self.elementid.get_elementId(self.driver, &#39;login&#39;, &#39;storeNo&#39;)</span><br><span class="line">        storeno.click()</span><br><span class="line">        storeno.clear()</span><br><span class="line">        store_no &#x3D; cf.get(&#39;login&#39;, &#39;login_store&#39;)</span><br><span class="line">        storeno.send_keys(store_no)</span><br><span class="line">        self.driver.hide_keyboard()</span><br><span class="line"></span><br><span class="line">        # 定位用户名</span><br><span class="line">        username &#x3D; self.elementid.get_elementId(self.driver, &#39;login&#39;, &#39;username&#39;)</span><br><span class="line">        username.click()</span><br><span class="line">        username.clear()</span><br><span class="line">        user &#x3D; cf.get(&#39;login&#39;, &#39;login_user&#39;)</span><br><span class="line">        username.send_keys(user)</span><br><span class="line">        self.driver.hide_keyboard()</span><br><span class="line"></span><br><span class="line">        # 定位密码</span><br><span class="line">        pwd &#x3D; self.elementid.get_elementId(self.driver, &#39;login&#39;, &#39;pwd&#39;)</span><br><span class="line">        pwd.click()</span><br><span class="line">        pwd.clear()</span><br><span class="line">        password &#x3D; cf.get(&#39;login&#39;, &#39;login_pwd&#39;)</span><br><span class="line">        pwd.send_keys(password)</span><br><span class="line">        self.driver.hide_keyboard()</span><br><span class="line"></span><br><span class="line">        # 登录</span><br><span class="line">        self.elementid.get_elementId(self.driver, &#39;login&#39;, &#39;login&#39;).click()</span><br><span class="line"></span><br><span class="line">        try:</span><br><span class="line">            # 显示等待，门店名称出现</span><br><span class="line">            WebDriverWait(self.driver, 10).until(lambda x:x.find_element_by_id(cf.get(&#39;order&#39;, &#39;store_name&#39;)))</span><br><span class="line">            # 断言登录成功</span><br><span class="line">            assert_true(u&quot;点餐&quot; in self.driver.page_source)</span><br><span class="line">        except NoSuchElementException as e:</span><br><span class="line">            print(traceback.print_exc(), e)</span><br><span class="line">        except TimeoutException as e:</span><br><span class="line">            print(traceback.print_exc(), e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    mail_subject &#x3D; &#39;NoseTests_测试报告_&#123;0&#125;&#39;.format(dt.now().strftime(&#39;%Y%m%d&#39;))</span><br><span class="line">    report_file &#x3D; &#39;Login.html&#39;</span><br><span class="line">    mailsend &#x3D; MailSend(mail_subject, report_file)</span><br><span class="line"></span><br><span class="line">    print(&#39;开始执行自动化测试...&#39;)</span><br><span class="line">    os.system(&#39;nosetests -v &#123;0&#125; --with-html --html-file&#x3D;&#123;1&#125;&#39;.format(__file__, report_file))</span><br><span class="line"></span><br><span class="line">    # 发送测试报告邮件</span><br><span class="line">    print(&#39;开始发送测试报告...&#39;)</span><br><span class="line">    mailsend.send_mail()</span><br><span class="line">    print(&#39;测试报告发送成功&#39;)</span><br></pre></td></tr></table></figure><p>单独的邮件发送模块可参照之前一篇：<a href="http://tokyle.com/2018/01/23/python%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A%E9%82%AE%E4%BB%B6%E5%AE%9E%E6%97%B6%E5%8F%91%E9%80%81/">python实现自动化测试报告邮件实时发送</a></p>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> 数据分离 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【转】python元类介绍</title>
      <link href="2018/01/31/%E3%80%90%E8%BD%AC%E3%80%91python%E5%85%83%E7%B1%BB%E4%BB%8B%E7%BB%8D/"/>
      <url>2018/01/31/%E3%80%90%E8%BD%AC%E3%80%91python%E5%85%83%E7%B1%BB%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<p>python元类</p><p>转自<code>stackoverflow</code> 神级人物<strong>e-satis</strong>的神级回复，以及国内翻译组汉化结果：</p><a id="more"></a><h2 id="写在前面："><a href="#写在前面：" class="headerlink" title="写在前面："></a>写在前面：</h2><p>经常在<code>stackoverflow</code>上看见一些神一般的回答，也看到过很多次创建<code>Foo</code>类，特意上<a href="https://zh.wikipedia.org/wiki/Foobar">维基百科</a>搜了，解释如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foobar是计算机程序领域里的术语炒作，并无实际用途和参考意义。 在计算机程序设计与计算机技术的相关文档中，术语foobar是一个常见的无名氏化名，常被作为“伪变量”使用。单词“foobar”或分离的“foo”与“bar”常出现于程序设计的案例中，如同Hello World程序一样，它们常被用于向学习者介绍某种程序语言。</span><br><span class="line"></span><br><span class="line">“foo”常被作为函数／方法的名称，而“bar”则常被用作变量名。</span><br></pre></td></tr></table></figure><h2 id="正题"><a href="#正题" class="headerlink" title="正题"></a>正题</h2><h3 id="类也是对象（Classes-as-objects）"><a href="#类也是对象（Classes-as-objects）" class="headerlink" title="类也是对象（Classes as objects）"></a>类也是对象（Classes as objects）</h3><p>在理解元类之前，需要先掌握Python中的类。Python中类的概念借鉴于Smalltalk，这显得有些奇特。在大多数编程语言中，类就是一组用来描述如何生成一个对象的代码段。在Python中这一点仍然成立：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class ObjectCreator(object):</span><br><span class="line">    pass</span><br><span class="line">my_object &#x3D; ObjectCreator()</span><br><span class="line">print(my_object)</span><br><span class="line"></span><br><span class="line">&lt;__main__.ObjectCreator object at 0x000001899B36E550&gt;</span><br></pre></td></tr></table></figure><p>但是python中的类远不止如此。类同样也是一种对象 <strong>这个对象（类）自身用创建对象（类实例）的能力，而这就是为什么它是一个类的原因</strong>。但是，它本质上仍然是一个对象，所以，你可以对它进行如下操作：<br>1、将它赋值给一个变量<br>2、拷贝它<br>3、为它增加属性<br>4、将它作为函数参数进行传递</p><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class ObjectCreator(object):</span><br><span class="line">    pass</span><br><span class="line"># 打印一个类，因为它其实也是一个对象</span><br><span class="line">print(ObjectCreator)</span><br><span class="line">&lt;class &#39;__main__.ObjectCreator&#39;&gt;</span><br><span class="line"># 将类作为参数传给函数</span><br><span class="line">def echo(o):</span><br><span class="line">    print(o)</span><br><span class="line">echo(ObjectCreator)</span><br><span class="line">&lt;class &#39;__main__.ObjectCreator&#39;&gt;</span><br><span class="line"># 为类增加属性</span><br><span class="line">print(hasattr(ObjectCreator, &#39;new_attribute&#39;))</span><br><span class="line">ObjectCreator.new_attribute &#x3D; &#39;foo&#39;</span><br><span class="line">print(hasattr(ObjectCreator, &#39;new_attribute&#39;))</span><br><span class="line">print(ObjectCreator.new_attribute)</span><br><span class="line">False</span><br><span class="line">True</span><br><span class="line">foo</span><br><span class="line"># 将类赋值给一个变量</span><br><span class="line">ObjectCreatorMirror &#x3D; ObjectCreator</span><br><span class="line">print(ObjectCreatorMirror())</span><br><span class="line">&lt;__main__.ObjectCreator object at 0x000002C21DF1E550&gt;</span><br></pre></td></tr></table></figure><h3 id="动态地创建类"><a href="#动态地创建类" class="headerlink" title="动态地创建类"></a>动态地创建类</h3><p>因为类也是对象，你可以在运行时动态地创建它们，就想其他任何时候一样。首先，你可以在函数中创建类，使用class关键字即可。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def choose_class(name):</span><br><span class="line">    if name &#x3D;&#x3D; &#39;foo&#39;:</span><br><span class="line">        class Foo(object):</span><br><span class="line">            pass</span><br><span class="line">        return Foo</span><br><span class="line">    else:</span><br><span class="line">        class Bar(object):</span><br><span class="line">            pass</span><br><span class="line">        return Bar</span><br><span class="line">MyClass &#x3D; choose_class(&#39;foo&#39;)</span><br><span class="line">print(MyClass)</span><br><span class="line">print(MyClass())</span><br><span class="line">&lt;class &#39;__main__.choose_class.&lt;locals&gt;.Foo&#39;&gt;</span><br><span class="line">&lt;__main__.choose_class.&lt;locals&gt;.Foo object at 0x000002B57928B518&gt;</span><br></pre></td></tr></table></figure><p>但这还不够动态，因为你仍然需要自己编写整个类的代码。由于类也是对象，所以它们必须是用过什么东西来生成的才对。当你使用class关键字时，Python解释器自动创建这个对象，但就和python中的大多数事情一样，python仍然提供给你手动处理的方法。內建函数type，可以让你知道一个对象的类型是什么：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(type(1))</span><br><span class="line">print(type(&quot;1&quot;))</span><br><span class="line">print(type(ObjectCreator))</span><br><span class="line">print(type(ObjectCreator()))</span><br><span class="line">&lt;class &#39;int&#39;&gt;</span><br><span class="line">&lt;class &#39;str&#39;&gt;</span><br><span class="line">&lt;class &#39;type&#39;&gt;</span><br><span class="line">&lt;class &#39;__main__.ObjectCreator&#39;&gt;</span><br></pre></td></tr></table></figure><p>这里，type有一种完全不同的能力，它也能动态的创建类。type可以接受一个类的描述作为参数，然后返回一个类（同一个函数拥有两种完全不同的用法是一件很傻的事情，但这在Python中是为了保持向后的兼容性）</p><p>type可以像这样工作：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type(类名, 父类的元组（针对继承的情况，可以为空），包含属性的字典（名称知道）)</span><br></pre></td></tr></table></figure><p>比如如下的代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class MyShinyClass(object):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure><p>可以手动像这样创建：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 返回一个对象</span><br><span class="line">MyShinyClass &#x3D; type(&#39;MyShinyClASS&#39;, (), &#123;&#125;)</span><br><span class="line">print(MyShinyClass)</span><br><span class="line">print(MyShinyClass())</span><br><span class="line">&lt;class &#39;__main__.MyShinyClASS&#39;&gt;</span><br><span class="line">&lt;__main__.MyShinyClASS object at 0x00000214ED6FE5F8&gt;</span><br></pre></td></tr></table></figure><p>type接受一个字典来为类定义属性，因此</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class Foo(object):</span><br><span class="line">    bar &#x3D; True</span><br></pre></td></tr></table></figure><p>可以翻译为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Foo &#x3D; type(&#39;Foo&#39;, (), &#123;&#39;bar&#39;:True&#125;)</span><br></pre></td></tr></table></figure><p>并且可以将Foo当做一个普通的类一样使用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(Foo)</span><br><span class="line">print(Foo.bar)</span><br><span class="line">f &#x3D; Foo()</span><br><span class="line">print(f)</span><br><span class="line">print(f.bar)</span><br><span class="line">&lt;class &#39;__main__.Foo&#39;&gt;</span><br><span class="line">True</span><br><span class="line">&lt;__main__.Foo object at 0x000002C77F0FD4E0&gt;</span><br><span class="line">True</span><br></pre></td></tr></table></figure><p>当然，你可以向这个类继承，所以，如下的代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class FooChild(Foo):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure><p>就可以写成：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FooChild &#x3D; type(&#39;FooChild&#39;, (Foo,), &#123;&#125;)</span><br><span class="line">print(FooChild)</span><br><span class="line">print(FooChild.bar)</span><br></pre></td></tr></table></figure><h3 id="到底什么是元类"><a href="#到底什么是元类" class="headerlink" title="到底什么是元类"></a>到底什么是元类</h3><p>元类就是用来创建类的“东西”，你创建类就是为了创建类的实例对象，但是我们知道python中的类也是对象，而元类就是用来创建这些类（对象）的，所以，元类就是类的类，可以这样理解：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyClass &#x3D; MetaClass()</span><br><span class="line">MyObject &#x3D; MyClass()</span><br></pre></td></tr></table></figure><p>你可以看到了type可以让你像这样做：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyClass &#x3D; type(&#39;MyClass&#39;, (), &#123;&#125;)</span><br></pre></td></tr></table></figure><p>这是因为函数type实际上是一个元类，type就是python背后用来创建所有类的元类，所以type为什么不写成Type也就知道了吧，或许就是为了和str保持一致性，str是用来创建字符串对象的类，而int是用来创建整数对象的类。type即使创建类对象的类。你可以通过__class__属性来看到这一点。Python中的所有的东西，注意，所有的东西——都是对象。这包含整数、字符串、函数和类。它们都是对象，而且它们都是从一个类创建来的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">age &#x3D; 24</span><br><span class="line">print(age.__class__)</span><br><span class="line">name &#x3D; &#39;bob&#39;</span><br><span class="line">print(name.__class__)</span><br><span class="line">def foo():</span><br><span class="line">    pass</span><br><span class="line">print(foo.__class__)</span><br><span class="line">&lt;class &#39;int&#39;&gt;</span><br><span class="line">&lt;class &#39;str&#39;&gt;</span><br><span class="line">&lt;class &#39;function&#39;&gt;</span><br></pre></td></tr></table></figure><p>现在，对于任何一个__class__的__class__属性又是什么呢？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(age.__class__.__class__)</span><br><span class="line">print(name.__class__.__class__)</span><br><span class="line">print(foo.__class__.__class__)</span><br><span class="line">&lt;class &#39;type&#39;&gt;</span><br><span class="line">&lt;class &#39;type&#39;&gt;</span><br><span class="line">&lt;class &#39;type&#39;&gt;</span><br></pre></td></tr></table></figure><p>因此，元类就是窗累类这种对象的东西，如果你喜欢的话，可以把元类称谓”类工厂”（不是工厂类）,<code>type</code>就是python內建的元类，当然了，你也可以创建自己的元类。</p><h3 id="metaclass-属性"><a href="#metaclass-属性" class="headerlink" title="__metaclass__属性"></a><code>__metaclass__</code>属性</h3><p>你可以在写一个类的时候为其添加__metaclass__属性。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Foo(object):</span><br><span class="line">    __metaclass__ &#x3D; somethind,.,</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><p>如果你这么做了，python就会用元类来创建类Foo。这里面有技巧，你首先写下class Foo(object)，但是类对象Foo还没有在内存中创建。Python会在类的定义中寻找<code>__metaclass__</code>属性，如果找到了，Python就会用它创建类Foo，如果没找到，就会用內建的type来创建这个类。</p><p>当你写下如下代码时：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class Foo(Bar):</span><br><span class="line">pass</span><br></pre></td></tr></table></figure><p>Python做了如下的操作：</p><p>Foo中有<code>__metaclass__</code>这个属性吗？如果有，python会在内存中通过<code>__metaclass__</code>创建一个名字为Foo的类对象（注意是类对象）。如果python没有找到<code>__metaclass__</code>，它会继续在Bar（父类）中寻找<code>__metaclass__</code>属性，并尝试做和前面同样的操作。如果python在任何父类中都找不到<code>__metaclass__</code>，它就会在模块层面中去寻找<code>__metaclass__</code>，并尝试做同样的操作。如果还是找不到<code>__metaclass__</code>，python就会用内置的type来创建这个类对象。</p><p>现在的问题就是，你可以在<code>__metaclass__</code>中放置些什么代码呢？答案是：可以是可以创建一个类的东西。那什么可以用来创建一个类呢？<strong>type</strong>，或者任何使用到type或者子类化type的东西都可以。</p><h3 id="自定义元类"><a href="#自定义元类" class="headerlink" title="自定义元类"></a>自定义元类</h3><p>元类的主要目的就是为了<strong>当创建类时能够自动地改变类</strong>。通常，你会为API做这样的事情，你希望可以创建符合当前上下文的类。假想一个很傻的例子，你决定你的模块里所有的类的属性都应该是大写形式，有好几种方法可以实现，单其中一种就是通过在模块级别设定<code>__metaclass__</code>，采用这种方法，这个模块中的所有类都会通过这个元类来创建，我们只需要告诉元类把所有的属性都改写成大写形式就解决了。</p><p>幸运的是，<code>__metaclass__</code>实际上可以被任意调用，它并不需要是一个正式的类（我们都知道，名字里面带’class’的东西，并不一定是个class）</p><p>我们这里先以一个简单的函数作为例子开始：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 元类会自动将你通常传给&#39;type&#39;的参数作为自己的参数传入</span><br><span class="line">def upper_attr(future_class_name, future_class_parents, future_class_attr):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    返回一个类对象，将属性都转为大写形式</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 识别所有不以&#39;__&#39;开头的属性，将它转换为大写</span><br><span class="line">    uppercase_attr &#x3D; &#123;&#125;</span><br><span class="line">    for name, val in future_class_attr.items():</span><br><span class="line">        if not name.startswith(&#39;__&#39;):</span><br><span class="line">            uppercase_attr[name.upper()] &#x3D; val</span><br><span class="line">        else:</span><br><span class="line">            uppercase_attr[name] &#x3D; val</span><br><span class="line"></span><br><span class="line">    # type创建这个类</span><br><span class="line">    return type(future_class_name, future_class_parents, uppercase_attr)</span><br><span class="line"></span><br><span class="line"># 这行会影响模块中的所有类</span><br><span class="line">__metaclass__ &#x3D; upper_attr</span><br><span class="line"></span><br><span class="line">class Foo():</span><br><span class="line">    # 全局 __metaclass__不会和&#39;object&#39;一起生效，但是我们可以在这里定义__metaclass__来只对这个类生效</span><br><span class="line">    bar &#x3D; &#39;bip&#39;</span><br><span class="line"></span><br><span class="line">print(hasattr(Foo, &#39;bar&#39;))</span><br><span class="line">print(hasattr(Foo, &#39;BAR&#39;))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在让我们再做一次，这一次用一个真正的class来当元类</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 请记住，&#39;type&#39;实际上是一个类，就像&#39;str&#39;和&#39;int&#39;一样</span><br><span class="line"># 所以，你可以从type继承</span><br><span class="line">class UpperAttrMetaclass(type):</span><br><span class="line">    # __new__ 是在 __init__之前被调用的特殊方法</span><br><span class="line">    # __new__是用来创建对象并返回的方法</span><br><span class="line">    # __init__只是用来把传入的参数初始化给对象</span><br><span class="line">    # 你很少用到__new__，除非你希望能够控制对象的创建</span><br><span class="line">    # 这里，创建的对象是类，我们希望能够自定义它，所以我们这里改写__new__</span><br><span class="line">    # 如果你希望的话，你也可以在__init__中做些事情</span><br><span class="line">    # 还有一些高级的用法会涉及到改写__call__特殊方法，但是我们这里不用</span><br><span class="line">    def __new__(upperattr_metaclass, future_class_name,</span><br><span class="line">                future_class_parents, future_class_attr):</span><br><span class="line"></span><br><span class="line">        uppercase_attr &#x3D; &#123;&#125;</span><br><span class="line">        for name, val in future_class_attr.items():</span><br><span class="line">            if not name.startswith(&#39;__&#39;):</span><br><span class="line">                uppercase_attr[name.upper()] &#x3D; val</span><br><span class="line">            else:</span><br><span class="line">                uppercase_attr[name] &#x3D; val</span><br><span class="line"></span><br><span class="line">        return type(future_class_name, future_class_parents, uppercase_at</span><br></pre></td></tr></table></figure><p>但是这不是OOP（Object-oriented programming，面向对象编程）。我们直接调用了type，而且我们没有改写父类的__new__方法。现在，我们这样去处理：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class UpperAttrMetaclass(type): </span><br><span class="line"></span><br><span class="line">    def __new__(upperattr_metaclass, future_class_name, </span><br><span class="line">                future_class_parents, future_class_attr):</span><br><span class="line"></span><br><span class="line">        uppercase_attr &#x3D; &#123;&#125;</span><br><span class="line">        for name, val in future_class_attr.items():</span><br><span class="line">            if not name.startswith(&#39;__&#39;):</span><br><span class="line">                uppercase_attr[name.upper()] &#x3D; val</span><br><span class="line">            else:</span><br><span class="line">                uppercase_attr[name] &#x3D; val</span><br><span class="line"></span><br><span class="line">        # 复用type.__new__方法</span><br><span class="line">        # 这就是基本的OOP编程，没什么魔法</span><br><span class="line">        return type.__new__(upperattr_metaclass, future_class_name, </span><br><span class="line">                            future_class_parents, uppercase_attr)</span><br></pre></td></tr></table></figure><p>你可以已经注意到了有个额外的参数uppersttr_metaclass，这并没有什么特别的。类方法的第一个参数总是表示当前的实例，就想在普通的类方法中的self参数一样。当然了，为了清晰起见，这边将名字起的比较长。但是就想self一样，所有的参数都有它们的传统名称。因此，在真是的产品代码中一个元类应该像这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class UpperAttrMetaclass(type): </span><br><span class="line"></span><br><span class="line">    def __new__(cls, clsname, bases, dct):</span><br><span class="line"></span><br><span class="line">        uppercase_attr &#x3D; &#123;&#125;</span><br><span class="line">        for name, val in dct.items():</span><br><span class="line">            if not name.startswith(&#39;__&#39;):</span><br><span class="line">                uppercase_attr[name.upper()] &#x3D; val</span><br><span class="line">            else:</span><br><span class="line">                uppercase_attr[name] &#x3D; val</span><br><span class="line"></span><br><span class="line">        return type.__new__(cls, clsname, bases, uppercase_attr)</span><br></pre></td></tr></table></figure><p>如果使用super方法的话，我们还可以使它变得更清晰一些，这会缓解继承（是的，你可以拥有元类，从元类继承，从type继承）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class UpperAttrMetaclass(type): </span><br><span class="line"></span><br><span class="line">    def __new__(cls, clsname, bases, dct):</span><br><span class="line"></span><br><span class="line">        uppercase_attr &#x3D; &#123;&#125;</span><br><span class="line">        for name, val in dct.items():</span><br><span class="line">            if not name.startswith(&#39;__&#39;):</span><br><span class="line">                uppercase_attr[name.upper()] &#x3D; val</span><br><span class="line">            else:</span><br><span class="line">                uppercase_attr[name] &#x3D; val</span><br><span class="line"></span><br><span class="line">        return super(UpperAttrMetaclass, cls).__new__(cls, clsname, bases, uppercase_attr)</span><br></pre></td></tr></table></figure><p>就是这样，除此之外，关于元类真的没有别的可说的了。使用到元类的代码比较复杂，这背后的原因倒不是因为元类本身，二十因为你通常会使用元类去做一些晦涩的事情，依赖于自省，控制继承等等。确实，用元类来搞些“黑魔法”是特别有用的，因而会搞出些复杂的东西来。但是元类本身而言，它们其实是很简单的：</p><p>1，拦截类的创建<br>2，修改类<br>3，返回修改之后的类</p><h3 id="为什么要用metaclass类而不是函数"><a href="#为什么要用metaclass类而不是函数" class="headerlink" title="为什么要用metaclass类而不是函数"></a>为什么要用metaclass类而不是函数</h3><p>由于<code>__metaclass__</code>可以接受任何可调用的对象，那为什么还要使用类呢，因为很显然使用类会更加复杂，这里有好几个原因：</p><p>1，意图会更加清晰，当你读到UpperAttrMetaclass(type)时，你知道接下来要发生什么<br>2，你可以使用OOP编程。元类可以从元类中继承，改写父类方法，甚至可以使用元类<br>3，你可以把代码组织的更好，当你使用元类的时候肯定不会像上述的简单场景，通常都是针对比较复杂的问题。将多个方法归总到一个类中会很有帮助，也会使得代码更容易阅读。<br>4，你可以使用<code>__new__</code>，<code>__init__</code>以及<code>__call__</code>这样的特殊方法。它们能帮你处理不同的任务。就算通常你可以把所有的东西都在<code>__new__</code>里处理掉，有些人还是觉得用<code>__init__</code>更舒服点。</p><h3 id="究竟为什么要使用元类"><a href="#究竟为什么要使用元类" class="headerlink" title="究竟为什么要使用元类"></a>究竟为什么要使用元类</h3><p>现在回到我们的大主题上来，究竟是为什么你会去使用这样一种容易出错且晦涩的特性？好吧，一般来说，根本用不上它：</p><p>“元类就是深度的魔法，99%的用户根本不必为此操心。如果你想搞清楚究竟是否需要用来元类，那么你就不需要它。那么实际用到元类的人都非常清楚地知道他们需要做什么，而且根本不需要解释为什么要用元类”  ——Python界的领袖Tim Peters</p><p>元类的主要用途是创建API，一个典型的例子是Django ORM。它允许你像这样定义：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Person(models.Model):</span><br><span class="line">  name &#x3D; models.CharField(max_length&#x3D;30)</span><br><span class="line">  age &#x3D; models.IntegerField()</span><br></pre></td></tr></table></figure><p>但是如果你像这样做的话：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">guy  &#x3D; Person(name&#x3D;&#39;bob&#39;, age&#x3D;&#39;35&#39;)</span><br><span class="line">print guy.age</span><br></pre></td></tr></table></figure><p>这并不会返回一个IntegerFied对象，而是会放回一个int，甚至可以直接从数据库中取出数据。这是有可能的，因为models.Model定义了<code>__metaclass__</code>，并且使用了一些魔法能够将你刚刚定义的简单的Person类转变成对数据库的一个复杂hook。Django框架将这些看起来很复杂的东西通过暴露出一个简单的使用元类的API将其化简，通过这个API重新创建代码，在背后完成真正的工作。</p><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>首先，你知道了类其实是能够创建出类实例的对象。事实上，类本身也是实例，当然，它们是元类的实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class Foo(object):</span><br><span class="line">    pass</span><br><span class="line">print(id(Foo))</span><br><span class="line">1973075749880</span><br></pre></td></tr></table></figure><p>Python中的一切都是对象，它们要么是类的实例，要么是元类的实例，除了type。type实际上是它自己的元类，在纯python环境中这可不是你能够做到的，这是通过在实现层面耍一些小手段做到的。其次，元类是很复杂的。对于非常简单的类，你可能不希望通过使用元类来对类做修改。你可以通过其他两种技术来修改类：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Monkey patching</span><br><span class="line">class decorators</span><br></pre></td></tr></table></figure><p>当你需要动态修改类时，99%的时间里你最好使用上面这两种技术。当然，其实在99%的时间里你根本就不需要动态修改类。</p><h3 id="原链接"><a href="#原链接" class="headerlink" title="原链接"></a>原链接</h3><blockquote><p><a href="https://stackoverflow.com/questions/100003/what-are-metaclasses-in-python">stackoverflow原链接</a><br><a href="http://blog.jobbole.com/21351/">国内翻译站</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python黑科技 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VPS重建记</title>
      <link href="2018/01/24/VPS%E9%87%8D%E5%BB%BA%E8%AE%B0/"/>
      <url>2018/01/24/VPS%E9%87%8D%E5%BB%BA%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>VPS重新部署日常环境，及hexo博客快速重建</p><a id="more"></a><h3 id="VPS受灾记"><a href="#VPS受灾记" class="headerlink" title="VPS受灾记"></a>VPS受灾记</h3><p>大早上来发现<code>stackoverflow</code>首页都打不开，对于天天科学上网的我来说，简直莫名其妙。</p><h4 id="本地网络原因"><a href="#本地网络原因" class="headerlink" title="本地网络原因"></a>本地网络原因</h4><p>本地windows PC机，控制台ping IP：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping VPS_IP</span><br></pre></td></tr></table></figure><p>直接就超时了，匪夷所思。。VPS服务器 ping自己：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 127.0.0.1</span><br></pre></td></tr></table></figure><p>好歹能通，那就是中间路由断了。</p><p>手机下载个网络工具，尝试在手机端ping VPS的IP（排除公司DNS搞的鬼），手机上ping也直接超时了，好吧，可以去检查是不是在某个不知名的时候自己把防火墙开了，还把22等端口关了。。</p><h4 id="VPS排查"><a href="#VPS排查" class="headerlink" title="VPS排查"></a>VPS排查</h4><p>我的VPS是在LA的<code>CENTOS7</code>主机，centos7查看防火墙状态：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd    --state</span><br></pre></td></tr></table></figure><p>发现是关着的。。。为了排除自己之前装过<code>iptables</code>的服务，查看<code>iptables.service</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status iptables.service</span><br></pre></td></tr></table></figure><p>这个果然是开着的，查看启用的端口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;etc&#x2F;sysconfig&#x2F;iptables</span><br></pre></td></tr></table></figure><p>该开的端口也都开了，好吧，无语了。</p><h4 id="大环境排查"><a href="#大环境排查" class="headerlink" title="大环境排查"></a>大环境排查</h4><p>基于大家都懂的网络环境，怀疑是IP被墙了，检测：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;ping.chinaz.com</span><br></pre></td></tr></table></figure><p>果然，除了香港和国外，其他都ping不通VPS，好吧，可以下结论了:IP被墙了…</p><p>真的很想骂人啊！到底是哪个JR没事瞎玩，搞出个异常流量，害的无辜躺枪！！！<br>hexo还在VPS上，小飞机也在VPS上，没有梯子，科学上网个鬼啊！！！</p><p>骂人几轮，该弄得还是得弄，方案嘛，无非就是换IP，还好<code>Vultr</code>重建台服务还是很方便的。</p><h3 id="VPS重建"><a href="#VPS重建" class="headerlink" title="VPS重建"></a>VPS重建</h3><p><code>Vultr</code>重买服务器，这次比较幸运，居然有$2.5的，直接买：<br><a href="https://www.vultr.com/">Vultr官网</a><br>拿到IP之后，第一件事，肯定是ping IP，还好，可以ping通，就是你了！</p><p>VPS简单设置</p><h4 id="防火墙设置"><a href="#防火墙设置" class="headerlink" title="防火墙设置"></a>防火墙设置</h4><p><code>xshell</code>远程连接上VPS之后，习惯性操作，第一步，更新<code>yum</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><h5 id="firewall设置"><a href="#firewall设置" class="headerlink" title="firewall设置"></a>firewall设置</h5><p>由于centos7默认的防火墙服务时<code>firewalld</code>的，很不习惯，改！</p><p>查看防火墙状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd    --state</span><br></pre></td></tr></table></figure><p>关闭防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl  stop   firewalld.service</span><br></pre></td></tr></table></figure><p>禁止开机启动启动防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl   disable   firewalld.service</span><br></pre></td></tr></table></figure><h5 id="iptables设置"><a href="#iptables设置" class="headerlink" title="iptables设置"></a>iptables设置</h5><p>安装iptables服务：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install  iptables-services</span><br></pre></td></tr></table></figure><p>开启iptables防火墙:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl  start  iptables.service</span><br></pre></td></tr></table></figure><p>开启特定端口：<br>编辑文件：/etc/sysconfig/iptables，加入想要开放的端口即可，例如开放8090端口：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -p tcp -m tcp --dport 8090 -j ACCEPT</span><br></pre></td></tr></table></figure><p>保存，退出之后，重启防火墙完成设置:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl  restart  iptables.service</span><br></pre></td></tr></table></figure><h4 id="ShadowsocksR（小飞机）配置"><a href="#ShadowsocksR（小飞机）配置" class="headerlink" title="ShadowsocksR（小飞机）配置"></a>ShadowsocksR（小飞机）配置</h4><p>科学上网必不可少的工具，<code>ShadowsocksR</code></p><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;teddysun&#x2F;shadowsocks_install&#x2F;master&#x2F;shadowsocksR.sh</span><br><span class="line">chmod +x shadowsocksR.sh</span><br><span class="line">.&#x2F;shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log</span><br></pre></td></tr></table></figure><p>完成配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">服务器端口：自己设定（如不设定，默认为 8989）</span><br><span class="line">密码：自己设定（如不设定，默认为 teddysun.com）</span><br><span class="line">加密方式：自己设定（如不设定，默认为 aes-256-cfb）</span><br><span class="line">协议（Protocol）：自己设定（如不设定，默认为 origin）</span><br><span class="line">混淆（obfs）：自己设定（如不设定，默认为 plain）</span><br></pre></td></tr></table></figure><p>附上我的配置，仅供参考：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Your Server IP        :  ***.***.***.*** </span><br><span class="line">Your Server Port      :  ***** </span><br><span class="line">Your Password         :  ******* </span><br><span class="line">Your Protocol         :  auth_sha1_v4 </span><br><span class="line">Your obfs             :  tls1.2_ticket_auth </span><br><span class="line">Your Encryption Method:  aes-256-cfb </span><br></pre></td></tr></table></figure><p>配置完成之后就可以在本地PC机使用客户端进行梯子配置，完了就可以科学上网啦！！！<br><a href="https://pan.baidu.com/s/1dMkFYe">客户端度娘盘链接</a></p><h3 id="Hexo重建"><a href="#Hexo重建" class="headerlink" title="Hexo重建"></a>Hexo重建</h3><p>预备动作：<strong>原来VPS上面的hexo所在目录，直接打成压缩包scp出来</strong></p><h4 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h4><p>首先安装gcc用于编译：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ kernel-devel</span><br></pre></td></tr></table></figure><p>开始安装node.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;nodejs.org&#x2F;dist&#x2F;v4.5.0&#x2F;node-v4.5.0.tar.gz</span><br><span class="line">tar -xf node-v4.5.0.tar.gz</span><br></pre></td></tr></table></figure><p>解压缩之后，进入目录，编译：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd node-v4.5.0</span><br><span class="line">.&#x2F;configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>完成！<br>验证：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm</span><br></pre></td></tr></table></figure><p>安装完成的是4.5的版本，升级：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g n</span><br><span class="line">n stable</span><br></pre></td></tr></table></figure><h4 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h4><p>由于买的VPS已经集成了git，所以怎么安装，怎么配置环境变量啥的就不废话了。<br>1、VPS设置git：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">git config --global user.name &quot;Your Name&quot;</span><br></pre></td></tr></table></figure><p>邮箱和用户名都对应于github</p><p>2、生成ssh秘钥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C example@163.com</span><br></pre></td></tr></table></figure><p>默认保存路径是/root/.ssh下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub</span><br></pre></td></tr></table></figure><p>获取秘钥，然后到<code>github</code>的web页面将秘钥配置进去，完成！</p><h4 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h4><p>1、安装hexo<br>创建目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir blog</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd blog</span><br><span class="line">npm install -g hexo-cli</span><br><span class="line">#初始化</span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>2、安装插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br><span class="line">npm install hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-stylus --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><p>3、修改Hexo配置文件，完成！</p><p><strong>或者，直接把原来VPS上面hexo的压缩包解压，再配置安装hexo即可</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;home&#x2F;blog</span><br><span class="line">npm install hexo --save</span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h4 id="环境测试"><a href="#环境测试" class="headerlink" title="环境测试"></a>环境测试</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;安装测试&quot;</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><p>执行不报错，进入博客可以看见<code>安装测试</code>该文章，部署成功！</p><p>真的是坑啊，又重布环境，国内的网络环境啊，ε=(´ο｀*)))唉~</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p><a href="https://www.jianshu.com/p/0823e387c019">centos搭建hexo博客</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python实现自动化测试报告邮件实时发送</title>
      <link href="2018/01/23/python%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A%E9%82%AE%E4%BB%B6%E5%AE%9E%E6%97%B6%E5%8F%91%E9%80%81/"/>
      <url>2018/01/23/python%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A%E9%82%AE%E4%BB%B6%E5%AE%9E%E6%97%B6%E5%8F%91%E9%80%81/</url>
      
        <content type="html"><![CDATA[<p>实现自动化用例执行完成之后，自动发送带html附件的邮件到邮箱</p><a id="more"></a><p>实现思路：<br>读取html附件内容，添加到邮件正文中，添加html附件，实现用例执行完成，测试报告自动发送到邮箱。<br>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import os</span><br><span class="line">import smtplib</span><br><span class="line">from datetime import datetime as dt</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.mime.multipart import MIMEMultipart</span><br><span class="line">from nose.tools import assert_equal</span><br><span class="line"></span><br><span class="line">def send_mail():</span><br><span class="line">    &quot;&quot;&quot;读取测试报告&quot;&quot;&quot;</span><br><span class="line">    with open(report_file, &#39;r&#39;, encoding&#x3D;&#39;utf-8&#39;) as f_obj:</span><br><span class="line">        content &#x3D; f_obj.read()</span><br><span class="line"></span><br><span class="line">    msg &#x3D; MIMEMultipart(&#39;mixed&#39;)</span><br><span class="line">    # 添加邮件内容</span><br><span class="line">    msg_html &#x3D; MIMEText(content, &#39;html&#39;, &#39;utf-8&#39;)</span><br><span class="line">    msg.attach(msg_html)</span><br><span class="line"></span><br><span class="line">    #添加附件</span><br><span class="line">    msg_attachment &#x3D; MIMEText(content, &#39;html&#39;, &#39;utf-8&#39;)</span><br><span class="line">    msg_attachment[&quot;Content-Disposition&quot;] &#x3D; &#39;attachment; filename&#x3D;&quot;&#123;0&#125;&quot;&#39;.format(report_file)</span><br><span class="line">    msg.attach(msg_attachment)</span><br><span class="line"></span><br><span class="line">    msg[&#39;Subject&#39;] &#x3D; mail_subject</span><br><span class="line">    msg[&#39;Form&#39;] &#x3D; mail_user</span><br><span class="line">    msg[&#39;To&#39;] &#x3D; mail_to</span><br><span class="line">    try:</span><br><span class="line">        # 连接邮件服务器</span><br><span class="line">        s &#x3D; smtplib.SMTP()</span><br><span class="line">        s.connect(mail_host)</span><br><span class="line">        # 登录</span><br><span class="line">        s.login(mail_user, mail_pwd)</span><br><span class="line">        # 发送邮件</span><br><span class="line">        s.sendmail(mail_user, mail_to, msg.as_string())</span><br><span class="line">        # 退出</span><br><span class="line">        s.quit()</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&quot;Exception&quot;, e)</span><br><span class="line"></span><br><span class="line">class Mailsend():</span><br><span class="line"></span><br><span class="line">    def test_mul(self):</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        res &#x3D; 3</span><br><span class="line">        assert_equal(res, a+b)</span><br><span class="line"></span><br><span class="line">if  __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    # 邮件服务器</span><br><span class="line">    mail_host &#x3D; &#39;smtp.163.com&#39;</span><br><span class="line">    # 发件人地址</span><br><span class="line">    mail_user &#x3D; &#39;***&#39;</span><br><span class="line">    # 发件人密码</span><br><span class="line">    mail_pwd &#x3D; &#39;***&#39;</span><br><span class="line">    # 邮件标题</span><br><span class="line">    mail_subject &#x3D; u&#39;NoseTests_测试报告_&#123;0&#125;&#39;.format(dt.now().strftime(&#39;%Y%m%d&#39;))</span><br><span class="line">    # 收件人地址</span><br><span class="line">    mail_to &#x3D; &#39;***&#39;</span><br><span class="line">    # 测试报告名称</span><br><span class="line">    report_file &#x3D; &#39;NoseTestReport.html&#39;</span><br><span class="line"></span><br><span class="line">    # 运行nosetests进行自动化测试并生成测试报告</span><br><span class="line">    print(&#39;Run NoseTests Now...&#39;)</span><br><span class="line">    os.system(&#39;nosetests -v mail_html.py:Mailsend --with-html --html-file&#x3D;NoseTestReport.html&#39;)</span><br><span class="line"></span><br><span class="line">    # 发送测试报告邮件</span><br><span class="line">    print(&#39;Send Test Report Mail Now...&#39;)</span><br><span class="line">    send_mail()</span><br></pre></td></tr></table></figure><p>tips:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python客户端进行163,126邮箱邮件发送前，需要在web版邮箱中设置允许客户端访问，设置客户端授权码</span><br><span class="line"></span><br><span class="line">设置完授权码之后，此时的客户端登录密码为授权码，不是原来的邮箱密码</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> smtplib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python数据分离</title>
      <link href="2018/01/20/python%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB/"/>
      <url>2018/01/20/python%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB/</url>
      
        <content type="html"><![CDATA[<p>python数据分离——读取配置文件</p><a id="more"></a><p>版本：<br><code>python 3.6</code></p><p>进行数据/配置和代码分离时，python3.6 可以使用<code>configparser</code>进行配置信息读取或创建。可以实现程序和数据的分离，便于后期维护程序，也能在一定程序上满足不会编码的人进行自动化测试（只需改配置文件。）</p><p>以创建/读取<code>ini</code>格式配置文件为例：</p><h3 id="创建配置文件："><a href="#创建配置文件：" class="headerlink" title="创建配置文件："></a>创建配置文件：</h3><p>每个ini文件都是有n个<code>sections</code>组成（可以理解为组成部分或者是段落。。我是这么理解的），每个<code>sections</code>包含若干个键值对（keys:values），所以某种程度上，你可以把每个section看成是个字典（dictionary），虽然这俩意义上完全无关。<br>python3.6创建ini配置文件代码示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">import configparser</span><br><span class="line"></span><br><span class="line">cf &#x3D; configparser.ConfigParser()</span><br><span class="line">cf[&#39;DEFAULT&#39;] &#x3D; &#123;&quot;browser&quot; : &quot;Chrome&quot;,</span><br><span class="line">                 &quot;version&quot; : &quot;63.0.3239.132&quot;,</span><br><span class="line">                 &quot;driver&quot; : &quot;chromedriver.exe&quot;,</span><br><span class="line">                 &#125;</span><br><span class="line"></span><br><span class="line">cf[&#39;tokyle.com&#39;] &#x3D; &#123;&#125;</span><br><span class="line">cf[&#39;tokyle.com&#39;][&#39;Author&#39;] &#x3D; &#39;kyle&#39;</span><br><span class="line"></span><br><span class="line">cf[&#39;baidu.com&#39;] &#x3D; &#123;&#125;</span><br><span class="line">baiduSearch &#x3D; cf[&#39;baidu.com&#39;]</span><br><span class="line">baiduSearch[&#39;searchBox&#39;] &#x3D; &#39;id &gt; kw&#39;</span><br><span class="line">baiduSearch[&#39;searchButton&#39;] &#x3D; &#39;id &gt; su&#39;</span><br><span class="line"></span><br><span class="line">cf[&#39;DEFAULT&#39;][&#39;noRetry&#39;] &#x3D; &#39;yes&#39;</span><br><span class="line"></span><br><span class="line">with open(&#39;test.ini&#39;, &#39;w&#39;) as configfile:</span><br><span class="line">    cf.write(configfile)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上述代码执行完成之后会在该.py文件所在目录下创建一个<code>test.ini</code>的配置文件，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">browser &#x3D; Chrome</span><br><span class="line">version &#x3D; 63.0.3239.132</span><br><span class="line">driver &#x3D; chromedriver.exe</span><br><span class="line">noretry &#x3D; yes</span><br><span class="line"></span><br><span class="line">[tokyle.com]</span><br><span class="line">author &#x3D; kyle</span><br><span class="line"></span><br><span class="line">[baidu.com]</span><br><span class="line">searchbox &#x3D; id &gt; kw</span><br><span class="line">searchbutton &#x3D; id &gt; su</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>每个ini文件可以包含一个<code>[&#39;DEFAULT&#39;]</code> section，也可以没有，<code>[&#39;DEFAULT&#39;]</code>部分定义了默认设置，例如默认使用的浏览器，浏览器版本等。</p><h3 id="读取配置信息"><a href="#读取配置信息" class="headerlink" title="读取配置信息"></a>读取配置信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import configparser</span><br><span class="line"></span><br><span class="line">cf &#x3D; configparser.ConfigParser()</span><br><span class="line">cf.read(&#39;test.ini&#39;)</span><br></pre></td></tr></table></figure><p>获取所有<code>sections</code>使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cf.sections()</span><br></pre></td></tr></table></figure><p>即可，需要注意的是，这样，是默认不会获取都[‘DEFAULT’]的，可以实验一下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">section &#x3D; cf.sections()</span><br><span class="line">print(section)</span><br></pre></td></tr></table></figure><p>打印出的结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#39;tokyle.com&#39;, &#39;baidu.com&#39;]</span><br></pre></td></tr></table></figure><p>可以看见默认不包含[‘DEFAULT’]。</p><p>其实读取配置信息就和读取字典里的数据做法一样，使用for循环就可以打印出全部信息，例如进行自动化测试时想获取[‘baidu.com’]里存的<code>百度搜索输入框</code>以及<code>百度一下按键</code>，可以：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">baidu_msg &#x3D; cf[&#39;baidu.com&#39;]</span><br><span class="line">for key,value in baidu_msg.items():</span><br><span class="line">    print(key + &#39; : &#39; + value)</span><br></pre></td></tr></table></figure><p>打印出的信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">searchbox : id &gt; kw</span><br><span class="line">searchbutton : id &gt; su</span><br><span class="line">browser : Chrome</span><br><span class="line">version : 63.0.3239.132</span><br><span class="line">driver : chromedriver.exe</span><br><span class="line">noretry : yes</span><br></pre></td></tr></table></figure><p>可以看见，这样不仅会把[‘baidu.com’]模块的信息全部打印，[‘DEFAULT’]模块的信息也会被打印出来。</p><h3 id="使用配置文件实例-简单的数据分离-："><a href="#使用配置文件实例-简单的数据分离-：" class="headerlink" title="使用配置文件实例(简单的数据分离)："></a>使用配置文件实例(简单的数据分离)：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">import configparser</span><br><span class="line">import traceback,time</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.support.ui import WebDriverWait</span><br><span class="line">from nose.tools import assert_true</span><br><span class="line"></span><br><span class="line">class ElementId():</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        #读取配置文件</span><br><span class="line">        self.cf &#x3D; configparser.ConfigParser()</span><br><span class="line">        self.cf.read(&#39;test.ini&#39;)</span><br><span class="line">        self.cf.sections()</span><br><span class="line"></span><br><span class="line">    def get_elementId(self, driver, webSiteName, webelement):</span><br><span class="line">        try:</span><br><span class="line">            #获取配置文件中的定位方法以及定位元素</span><br><span class="line">            webElemnt &#x3D; self.cf.get(webSiteName, webelement).split(&#39;&gt;&#39;)</span><br><span class="line">            webelement_method &#x3D; webElemnt[0].strip()</span><br><span class="line">            webelement_expression &#x3D; webElemnt[1].strip()</span><br><span class="line">            element &#x3D; WebDriverWait(driver, 10).until\</span><br><span class="line">                (lambda x: x.find_element(webelement_method, webelement_expression))</span><br><span class="line">        except Exception as e:</span><br><span class="line">            print(traceback.print_exc(), e)</span><br><span class="line">        else:</span><br><span class="line">            return element</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    &quot;&quot;&quot;测试百度搜索&quot;&quot;&quot;</span><br><span class="line">    #打开百度首页</span><br><span class="line">    browser &#x3D; webdriver.Chrome()</span><br><span class="line">    browser.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">    #获取定位元素</span><br><span class="line">    elementid &#x3D; ElementId()</span><br><span class="line">    searchBox &#x3D; elementid.get_elementId(browser, &#39;baidu.com&#39;, &#39;searchbox&#39;)</span><br><span class="line">    searchBox.send_keys(&#39;selenium&#39;)</span><br><span class="line">    searchButton &#x3D; elementid.get_elementId(browser, &#39;baidu.com&#39;, &#39;searchbutton&#39;)</span><br><span class="line">    searchButton.click()</span><br><span class="line">    time.sleep(3)</span><br><span class="line">    #断言完成百度搜索&quot;selenium&quot;</span><br><span class="line">    assert_true(u&quot;Selenium - Web Browser Automation&quot; in browser.page_source)</span><br><span class="line">    browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>（我在执行上述示例之前，把<code>test.ini</code>中的[‘DEFAULT’]注释掉了，此例不需要[‘DEFAULT’]中的信息）</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自娱自乐一</title>
      <link href="2018/01/20/%E8%87%AA%E5%A8%B1%E8%87%AA%E4%B9%90%E4%B8%80/"/>
      <url>2018/01/20/%E8%87%AA%E5%A8%B1%E8%87%AA%E4%B9%90%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>自娱自乐系列一：</p><p>为了过年提前回家，周六过来加班调休，又不大想干活，就想着捣鼓点自娱自乐的东西：</p><a id="more"></a><h3 id="输入年龄判断是否有投票资格："><a href="#输入年龄判断是否有投票资格：" class="headerlink" title="输入年龄判断是否有投票资格："></a>输入年龄判断是否有投票资格：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def judge_age():</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        try:</span><br><span class="line">            age &#x3D; int(input(&quot;\nPlease enter your age：&quot;))</span><br><span class="line">        except ValueError:</span><br><span class="line">            print(&quot;Sorry,I can&#39;t understand what you entered.Please enter a correct number.&quot;)</span><br><span class="line">            continue</span><br><span class="line">        else:</span><br><span class="line">            break</span><br><span class="line">    if age &gt;&#x3D; 18:</span><br><span class="line">        print(&quot;You are able to vote in the United States!&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;You are too young to vote in the United States!&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    judge_age()</span><br></pre></td></tr></table></figure><h3 id="判断输入的正整数"><a href="#判断输入的正整数" class="headerlink" title="判断输入的正整数:"></a>判断输入的正整数:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">def get_non_negative_int(prompt):</span><br><span class="line">    try:</span><br><span class="line">        value &#x3D; int(input(prompt))</span><br><span class="line">    except ValueError:</span><br><span class="line">        print(&quot;Sorry,I can&#39;t understand that.&quot;)</span><br><span class="line">        return get_non_negative_int(prompt)</span><br><span class="line"></span><br><span class="line">    if value &lt; 0:</span><br><span class="line">        print(&quot;Sorry,your response must not be negative.&quot;)</span><br><span class="line">        return get_non_negative_int(prompt)</span><br><span class="line">    else:</span><br><span class="line">        return value</span><br><span class="line"></span><br><span class="line">def guess_number():</span><br><span class="line">    number &#x3D; get_non_negative_int(&quot;Please enter a number to guess: (only positive integer can work,thanks!)&quot;)</span><br><span class="line">    while True:</span><br><span class="line">        guess &#x3D; get_non_negative_int(&quot;guess the number.&quot;)</span><br><span class="line">        if guess &gt; number:</span><br><span class="line">            print(&quot;You could enter a lower one.&quot;)</span><br><span class="line">        elif guess &lt; number:</span><br><span class="line">            print(&quot;I think it could be higher.&quot;)</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;Congratulations! You got it!&quot;)</span><br><span class="line">            break</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    guess_number()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>纯属自娱自乐，毫无技术含量 Thanks?(?ω?)?</p><h4 id="顺便贴个常识坑："><a href="#顺便贴个常识坑：" class="headerlink" title="顺便贴个常识坑："></a>顺便贴个常识坑：</h4><p>文件夹不能取名是**<em>code**</em>，否则pycharm的debug模式会报错！！！（stackoverflow真是个好网站！什么坑都能找到填的办法。。）<br>原因：<br>debug模式会引个包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from code import InteractiveConsole </span><br></pre></td></tr></table></figure><p>工程中有code文件夹，会找不到debug需要的方法</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> lives </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appium应用简介</title>
      <link href="2018/01/19/appium%E5%BA%94%E7%94%A8%E7%AE%80%E4%BB%8B/"/>
      <url>2018/01/19/appium%E5%BA%94%E7%94%A8%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>appium应用篇，简单介绍自己工作中用到的一些appium应用。</p><a id="more"></a><h2 id="Appium等待类型"><a href="#Appium等待类型" class="headerlink" title="Appium等待类型"></a>Appium等待类型</h2><h3 id="固定时间等待"><a href="#固定时间等待" class="headerlink" title="固定时间等待"></a>固定时间等待</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line"></span><br><span class="line">time.sleep(3)</span><br></pre></td></tr></table></figure><p>固定等待时间3秒，强制等待，必须等完3秒之后才会进行下一步操作。</p><h3 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.implicitly_wait(5)</span><br></pre></td></tr></table></figure><p>隐式等待的好处是不用想固定时间（time.sleep()）一样死等固定时间，可以在一定程度上提高执行效率，但是这种等待方式也是需要等页面所有元素都加载完成才会去进行下一步操作，例如有的时候，页面你需要的元素已经加载完成，但是必须还是要等待个别资源加载完才会执行下一步，一定程度上来说还是效率降低。</p><h3 id="显示等待"><a href="#显示等待" class="headerlink" title="显示等待"></a>显示等待</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from selenium.webdriver.support.ui import WebDriverWait</span><br><span class="line"></span><br><span class="line">WebDriverWait(driver, 10).\</span><br><span class="line">        until(lambda x:x.find_element_by_id(&#39;com.anmav.cashierdesk:id&#x2F;tvOpenTable&#39;))</span><br></pre></td></tr></table></figure><p>显示等待原理是每隔一段时间（默认0.5秒），执行一次判断条件，如果条件成立，就执行下一步，直到超过设定的最大等待时间，抛出TimeoutException异常</p><h2 id="Appium定位弹窗"><a href="#Appium定位弹窗" class="headerlink" title="Appium定位弹窗"></a>Appium定位弹窗</h2><h3 id="切换webview"><a href="#切换webview" class="headerlink" title="切换webview"></a>切换webview</h3><p>原理和<code>selenium</code>一样，类似于selenium中先获取页面句柄，再切换。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver.contexts</span><br><span class="line"></span><br><span class="line">方法一：driver.switch_to.context(&quot;contextname&quot;)     #contextname为想切换到的上下文</span><br><span class="line">方法二：driver.switch_to.context(contexts[1])      # 从contexts里取第二个参数</span><br></pre></td></tr></table></figure><h2 id="Appium连接真机"><a href="#Appium连接真机" class="headerlink" title="Appium连接真机"></a>Appium连接真机</h2><p>使用真机作为测试机，进行app自动化测试（android）步骤：</p><h3 id="adb连接真机"><a href="#adb连接真机" class="headerlink" title="adb连接真机"></a>adb连接真机</h3><p>首先是本地PC连接到真机，保证真机所在网段PC可以ping通（局域网或者同一WiFi）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;lamb&#125; adb connect 192.168.0.194:9555</span><br><span class="line">connected to 192.168.0.194:9555</span><br></pre></td></tr></table></figure><p>进入cmd，输入adb连接命名，连接到真机</p><h3 id="起appium服务"><a href="#起appium服务" class="headerlink" title="起appium服务"></a>起appium服务</h3><p>本地PC装有appium-desktop，直接启动appium-desktop，即完成appium服务启动</p><h3 id="运行自动化测试脚本"><a href="#运行自动化测试脚本" class="headerlink" title="运行自动化测试脚本"></a>运行自动化测试脚本</h3><p>配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">self.desired_caps &#x3D; &#123;&#125;</span><br><span class="line">self.desired_caps[&#39;platformName&#39;] &#x3D; &#39;Android&#39;</span><br><span class="line">self.desired_caps[&#39;platformVersion&#39;] &#x3D; &#39;6.0.1&#39;</span><br><span class="line">self.desired_caps[&#39;deviceName&#39;] &#x3D; &#39;Android Emulator&#39;</span><br><span class="line">self.desired_caps[&#39;app&#39;] &#x3D; &#39;‪G:&#x2F;apk&#x2F;1.2.5&#x2F;test_release_v1.2.5.apk&#39;</span><br><span class="line">self.desired_caps[&#39;noReset&#39;] &#x3D; True</span><br><span class="line">self.desired_caps[&#39;appPackage&#39;] &#x3D; &#39;com.anmav.test&#39;</span><br><span class="line">self.desired_caps[&#39;appActivity&#39;] &#x3D; &#39;com.anmav.test.login.activity.LoginActivity&#39;</span><br><span class="line"></span><br><span class="line">self.driver &#x3D; webdriver.Remote(&#39;http:&#x2F;&#x2F;localhost:4723&#x2F;wd&#x2F;hub&#39;, self.desired_caps)</span><br></pre></td></tr></table></figure><p>之后再加上用户名，密码等信息输入，即可完成远程真机app自动安装，登录。</p>]]></content>
      
      
      <categories>
          
          <category> appium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> appium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python项目依赖管理工具-pipenv</title>
      <link href="2018/01/18/python%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-pipenv/"/>
      <url>2018/01/18/python%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-pipenv/</url>
      
        <content type="html"><![CDATA[<p>偶然发现一个很好用的python项目包管理工具<strong>pipenv</strong></p><a id="more"></a><p>github上简介是一句话<code>Pipenv: Python Development Workflow for Humans</code></p><p>现在已经是<a href="https://packaging.python.org/tutorials/managing-dependencies/#managing-dependencies">python.org</a>官方推荐的工具。</p><h2 id="具体功能："><a href="#具体功能：" class="headerlink" title="具体功能："></a>具体功能：</h2><p>pipenv能够自动创建和管理你工程的虚拟环境，当你安装/卸载包时，会自动从你的Pipfile中添加/移除包；为啥要用这个工具，python的特点，python进行工程环境创建，一般是创建一个<code>Virtualenv</code>虚拟环境，然后列出所需要的工具包，pip安装，但是这样你就要手动去添加你需要的包，删除你已经不需要的包，并且由于工具包的更新，你可能还需要手动去更新你的工具包，而且，类似于单元测试这样的场景，需要安装<code>nose</code>包，但是生产环境又不需要该包，也就无法做到生产环境和开发环境安装包的分离，而以上这些，pipenv都可以解决。</p><h2 id="使用简介"><a href="#使用简介" class="headerlink" title="使用简介"></a>使用简介</h2><h3 id="首先安装pipenv"><a href="#首先安装pipenv" class="headerlink" title="首先安装pipenv"></a>首先安装pipenv</h3><p>使用pip安装pipenv及其依赖项</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipenv</span><br></pre></td></tr></table></figure><p>macOS安装则使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install pipenv</span><br></pre></td></tr></table></figure><p>进入你项目所在文件夹，启动Pipenv</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd your_project</span><br><span class="line">pipenv install</span><br></pre></td></tr></table></figure><p>启动之后，项目文件夹下会多出两个文件<code>Pipfile</code>，<code>Pipfile.lock</code><br>Pipfile文件包含项目的依赖包信息。</p><h3 id="管理依赖包"><a href="#管理依赖包" class="headerlink" title="管理依赖包"></a>管理依赖包</h3><p>要为项目安装依赖包，跟pip类似</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv install nose</span><br></pre></td></tr></table></figure><p>卸载</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv uninstall nose</span><br></pre></td></tr></table></figure><p>可以通过更新<code>Pipfile.lock</code>来冻结软件包名称及其版本以及其自己的依赖关系的列表。 这是使用lock关键字完成:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv lock</span><br></pre></td></tr></table></figure><p>如果你同事或者朋友想clone你的依赖库，直接拿你的<code>Pipfile</code>，然后他本地安装pipenv之后，<code>pipenv install</code>即可完成依赖库安装</p><h3 id="环境分离"><a href="#环境分离" class="headerlink" title="环境分离"></a>环境分离</h3><p>只为开发环境安装包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv install --dev nose</span><br></pre></td></tr></table></figure><p>这样，在生产环境执行<code>pipenv install</code>是不会安装<code>nose</code>的，想要安装开发环境的依赖，执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv install --dev</span><br></pre></td></tr></table></figure><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p><strong>pipenv</strong>所有关键字及解释：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">$ pipenv</span><br><span class="line">Usage: pipenv [OPTIONS] COMMAND [ARGS]...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --update         Update Pipenv &amp; pip to latest.</span><br><span class="line">  --where          Output project home information.</span><br><span class="line">  --venv           Output virtualenv information.</span><br><span class="line">  --py             Output Python interpreter information.</span><br><span class="line">  --envs           Output Environment Variable options.</span><br><span class="line">  --rm             Remove the virtualenv.</span><br><span class="line">  --bare           Minimal output.</span><br><span class="line">  --completion     Output completion (to be eval&#39;d).</span><br><span class="line">  --man            Display manpage.</span><br><span class="line">  --three &#x2F; --two  Use Python 3&#x2F;2 when creating virtualenv.</span><br><span class="line">  --python TEXT    Specify which version of Python virtualenv should use.</span><br><span class="line">  --site-packages  Enable site-packages for the virtualenv.</span><br><span class="line">  --jumbotron      An easter egg, effectively.</span><br><span class="line">  --version        Show the version and exit.</span><br><span class="line">  -h, --help       Show this message and exit.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Usage Examples:</span><br><span class="line">   Create a new project using Python 3.6, specifically:</span><br><span class="line">   $ pipenv --python 3.6</span><br><span class="line"></span><br><span class="line">   Install all dependencies for a project (including dev):</span><br><span class="line">   $ pipenv install --dev</span><br><span class="line"></span><br><span class="line">   Create a lockfile containing pre-releases:</span><br><span class="line">   $ pipenv lock --pre</span><br><span class="line"></span><br><span class="line">   Show a graph of your installed dependencies:</span><br><span class="line">   $ pipenv graph</span><br><span class="line"></span><br><span class="line">   Check your installed dependencies for security vulnerabilities:</span><br><span class="line">   $ pipenv check</span><br><span class="line"></span><br><span class="line">   Install a local setup.py into your virtual environment&#x2F;Pipfile:</span><br><span class="line">   $ pipenv install -e .</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  check      Checks for security vulnerabilities and...</span><br><span class="line">  graph      Displays currently–installed dependency graph...</span><br><span class="line">  install    Installs provided packages and adds them to...</span><br><span class="line">  lock       Generates Pipfile.lock.</span><br><span class="line">  open       View a given module in your editor.</span><br><span class="line">  run        Spawns a command installed into the...</span><br><span class="line">  shell      Spawns a shell within the virtualenv.</span><br><span class="line">  uninstall  Un-installs a provided package and removes it...</span><br><span class="line">  update     Uninstalls all packages, and re-installs...</span><br></pre></td></tr></table></figure><h3 id="定位工程"><a href="#定位工程" class="headerlink" title="定位工程"></a>定位工程</h3><p>展示工程路径以及环境路径，进入工程(类似于linux)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv --where</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv --venv</span><br></pre></td></tr></table></figure><p>定位python解释器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv --py</span><br></pre></td></tr></table></figure><h3 id="其他使用"><a href="#其他使用" class="headerlink" title="其他使用"></a>其他使用</h3><h4 id="激活工程环境"><a href="#激活工程环境" class="headerlink" title="激活工程环境"></a>激活工程环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv shell</span><br></pre></td></tr></table></figure><h4 id="运行python脚本"><a href="#运行python脚本" class="headerlink" title="运行python脚本"></a>运行python脚本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv run python main.py</span><br></pre></td></tr></table></figure><h4 id="展示依赖关系图"><a href="#展示依赖关系图" class="headerlink" title="展示依赖关系图"></a>展示依赖关系图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv graph</span><br></pre></td></tr></table></figure><h4 id="卸载所有"><a href="#卸载所有" class="headerlink" title="卸载所有"></a>卸载所有</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv uninstall --all</span><br></pre></td></tr></table></figure><h2 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h2><blockquote><p><a href="https://github.com/pypa/pipenv">github项目地址</a><br><a href="https://packaging.python.org/tutorials/managing-dependencies/#managing-dependencies">python.org官网推荐地址</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pipenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cmder简介</title>
      <link href="2018/01/18/cmder%E7%AE%80%E4%BB%8B/"/>
      <url>2018/01/18/cmder%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>windows小工具介绍</p><p>windows系统cmd工具，说实话，用的还是有点不舒服的，用习惯<code>vim</code>之后，真的是很想在windows上用类似的，还好，找到个小工具<code>cmder</code>。</p><a id="more"></a><h2 id="下载地址："><a href="#下载地址：" class="headerlink" title="下载地址："></a>下载地址：</h2><p>照旧，官方下载地址是托管在github上</p><blockquote><p><a href="https://github.com/cmderdev/cmder/releases/">github下载地址</a></p></blockquote><p>但是不知道最近抽什么疯，github上n多项目下载页面直接404，索性提供本地度娘盘地址：</p><blockquote><p><a href="https://pan.baidu.com/s/1ghb9lvl">度娘盘地址</a></p></blockquote><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><p>下载完成之后，解压缩，然后将<code>cmder.exe</code>所在目录添加到系统环境变量中，完成~双击打开即可使用。</p><h2 id="简单设置"><a href="#简单设置" class="headerlink" title="简单设置"></a>简单设置</h2><h3 id="解决中文乱码问题："><a href="#解决中文乱码问题：" class="headerlink" title="解决中文乱码问题："></a>解决中文乱码问题：</h3><p>类似于linux，alias文件中添加设置即可；alias文件位置：<code>cmder/config/aliases</code><br>添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l&#x3D;ls --show-control-chars</span><br><span class="line">la&#x3D;ls -aF --show-control-chars</span><br><span class="line">ll&#x3D;ls -alF --show-control-chars</span><br></pre></td></tr></table></figure><h3 id="中文字重叠在一起"><a href="#中文字重叠在一起" class="headerlink" title="中文字重叠在一起"></a>中文字重叠在一起</h3><p>cmder进入设置（快捷键<code>win+alt+p</code>），找到<code>main</code>，取消<code>monospace(固定宽度)</code>勾选</p><p>基本就是设置完成了，可以进行使用了，后续再发现什么其他的好功能再更新。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#切换盘</span><br><span class="line">D:</span><br><span class="line">#展示文件</span><br><span class="line">ls</span><br><span class="line">ll</span><br><span class="line">#查看文件内容</span><br><span class="line">cat xxx.txt</span><br><span class="line">#编辑文件内容</span><br><span class="line">vim xxx.txt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cmder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appium键盘事件</title>
      <link href="2018/01/17/appium%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6/"/>
      <url>2018/01/17/appium%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>appium键盘事件</p><a id="more"></a><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.keyevent(keyCode)</span><br></pre></td></tr></table></figure><h2 id="电话键"><a href="#电话键" class="headerlink" title="电话键"></a>电话键</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">KEYCODE_CALL 拨号键 5</span><br><span class="line">KEYCODE_ENDCALL 挂机键 6</span><br><span class="line">KEYCODE_HOME 按键Home 3</span><br><span class="line">KEYCODE_MENU 菜单键 82</span><br><span class="line">KEYCODE_BACK 返回键 4</span><br><span class="line">KEYCODE_SEARCH 搜索键 84</span><br><span class="line">KEYCODE_CAMERA 拍照键 27</span><br><span class="line">KEYCODE_FOCUS 拍照对焦键 80</span><br><span class="line">KEYCODE_POWER 电源键 26</span><br><span class="line">KEYCODE_NOTIFICATION 通知键 83</span><br><span class="line">KEYCODE_MUTE 话筒静音键 91</span><br><span class="line">KEYCODE_VOLUME_MUTE 扬声器静音键 164</span><br><span class="line">KEYCODE_VOLUME_UP 音量增加键 24</span><br><span class="line">KEYCODE_VOLUME_DOWN 音量减小键 25</span><br></pre></td></tr></table></figure><h2 id="控制键"><a href="#控制键" class="headerlink" title="控制键"></a>控制键</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">KEYCODE_ENTER 回车键 66</span><br><span class="line">KEYCODE_ESCAPE ESC键 111</span><br><span class="line">KEYCODE_DPAD_CENTER 导航键 确定键 23</span><br><span class="line">KEYCODE_DPAD_UP 导航键 向上 19</span><br><span class="line">KEYCODE_DPAD_DOWN 导航键 向下 20</span><br><span class="line">KEYCODE_DPAD_LEFT 导航键 向左 21</span><br><span class="line">KEYCODE_DPAD_RIGHT 导航键 向右 22</span><br><span class="line">KEYCODE_MOVE_HOME 光标移动到开始键 122</span><br><span class="line">KEYCODE_MOVE_END 光标移动到末尾键 123</span><br><span class="line">KEYCODE_PAGE_UP 向上翻页键 92</span><br><span class="line">KEYCODE_PAGE_DOWN 向下翻页键 93</span><br><span class="line">KEYCODE_DEL 退格键 67</span><br><span class="line">KEYCODE_FORWARD_DEL 删除键 112</span><br><span class="line">KEYCODE_INSERT 插入键 124</span><br><span class="line">KEYCODE_TAB Tab键 61</span><br><span class="line">KEYCODE_NUM_LOCK 小键盘锁 143</span><br><span class="line">KEYCODE_CAPS_LOCK 大写锁定键 115</span><br><span class="line">KEYCODE_BREAK Break&#x2F;Pause键 121</span><br><span class="line">KEYCODE_SCROLL_LOCK 滚动锁定键 116</span><br><span class="line">KEYCODE_ZOOM_IN 放大键 168</span><br><span class="line">KEYCODE_ZOOM_OUT 缩小键 169</span><br></pre></td></tr></table></figure><h2 id="组合键"><a href="#组合键" class="headerlink" title="组合键"></a>组合键</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">KEYCODE_ALT_LEFT Alt+Left</span><br><span class="line">KEYCODE_ALT_RIGHT Alt+Right</span><br><span class="line">KEYCODE_CTRL_LEFT Control+Left</span><br><span class="line">KEYCODE_CTRL_RIGHT Control+Right</span><br><span class="line">KEYCODE_SHIFT_LEFT Shift+Left</span><br><span class="line">KEYCODE_SHIFT_RIGHT Shift+Right</span><br></pre></td></tr></table></figure><h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">KEYCODE_0 按键&#39;0&#39; 7</span><br><span class="line">KEYCODE_1 按键&#39;1&#39; 8</span><br><span class="line">KEYCODE_2 按键&#39;2&#39; 9</span><br><span class="line">KEYCODE_3 按键&#39;3&#39; 10</span><br><span class="line">KEYCODE_4 按键&#39;4&#39; 11</span><br><span class="line">KEYCODE_5 按键&#39;5&#39; 12</span><br><span class="line">KEYCODE_6 按键&#39;6&#39; 13</span><br><span class="line">KEYCODE_7 按键&#39;7&#39; 14</span><br><span class="line">KEYCODE_8 按键&#39;8&#39; 15</span><br><span class="line">KEYCODE_9 按键&#39;9&#39; 16</span><br><span class="line">KEYCODE_A 按键&#39;A&#39; 29</span><br><span class="line">KEYCODE_B 按键&#39;B&#39; 30</span><br><span class="line">KEYCODE_C 按键&#39;C&#39; 31</span><br><span class="line">KEYCODE_D 按键&#39;D&#39; 32</span><br><span class="line">KEYCODE_E 按键&#39;E&#39; 33</span><br><span class="line">KEYCODE_F 按键&#39;F&#39; 34</span><br><span class="line">KEYCODE_G 按键&#39;G&#39; 35</span><br><span class="line">KEYCODE_H 按键&#39;H&#39; 36</span><br><span class="line">KEYCODE_I 按键&#39;I&#39; 37</span><br><span class="line">KEYCODE_J 按键&#39;J&#39; 38</span><br><span class="line">KEYCODE_K 按键&#39;K&#39; 39</span><br><span class="line">KEYCODE_L 按键&#39;L&#39; 40</span><br><span class="line">KEYCODE_M 按键&#39;M&#39; 41</span><br><span class="line">KEYCODE_N 按键&#39;N&#39; 42</span><br><span class="line">KEYCODE_O 按键&#39;O&#39; 43</span><br><span class="line">KEYCODE_P 按键&#39;P&#39; 44</span><br><span class="line">KEYCODE_Q 按键&#39;Q&#39; 45</span><br><span class="line">KEYCODE_R 按键&#39;R&#39; 46</span><br><span class="line">KEYCODE_S 按键&#39;S&#39; 47</span><br><span class="line">KEYCODE_T 按键&#39;T&#39; 48</span><br><span class="line">KEYCODE_U 按键&#39;U&#39; 49</span><br><span class="line">KEYCODE_V 按键&#39;V&#39; 50</span><br><span class="line">KEYCODE_W 按键&#39;W&#39; 51</span><br><span class="line">KEYCODE_X 按键&#39;X&#39; 52</span><br><span class="line">KEYCODE_Y 按键&#39;Y&#39; 53</span><br><span class="line">KEYCODE_Z 按键&#39;Z&#39; 54</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> appium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化测试 </tag>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appium定位</title>
      <link href="2018/01/17/appium%E5%AE%9A%E4%BD%8D/"/>
      <url>2018/01/17/appium%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<p>appium的常用操作以及元素定位的简单介绍</p><a id="more"></a><h2 id="appium常用操作"><a href="#appium常用操作" class="headerlink" title="appium常用操作"></a>appium常用操作</h2><h3 id="锁屏"><a href="#锁屏" class="headerlink" title="锁屏"></a>锁屏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.lock(5)</span><br></pre></td></tr></table></figure><h3 id="切换应用至后台"><a href="#切换应用至后台" class="headerlink" title="切换应用至后台"></a>切换应用至后台</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driver.background_app(5)  # 置于后台，持续5秒</span><br><span class="line">driver.background_app(-1) # 持续置于后台</span><br><span class="line">driver.background_app(&#123;&#39;timeout&#39;: None&#125;) # 持续置于后台</span><br></pre></td></tr></table></figure><h3 id="收起键盘"><a href="#收起键盘" class="headerlink" title="收起键盘"></a>收起键盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.hide_keyboard()</span><br></pre></td></tr></table></figure><h3 id="启动Activity"><a href="#启动Activity" class="headerlink" title="启动Activity"></a>启动Activity</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.start_activity(&#39;com.example.android.apis&#39;, &#39;.Foo&#39;)</span><br></pre></td></tr></table></figure><h3 id="检测应用是否被安装"><a href="#检测应用是否被安装" class="headerlink" title="检测应用是否被安装"></a>检测应用是否被安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.is_app_installed(&#39;com.example.android.apis&#39;)</span><br></pre></td></tr></table></figure><h3 id="安装应用"><a href="#安装应用" class="headerlink" title="安装应用"></a>安装应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.install_app(&#39;path&#x2F;to&#x2F;my.apk&#39;)</span><br></pre></td></tr></table></figure><h3 id="卸载应用"><a href="#卸载应用" class="headerlink" title="卸载应用"></a>卸载应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.remove_app(&#39;com.example.android.apis&#39;)</span><br></pre></td></tr></table></figure><h3 id="模拟设备摇一摇"><a href="#模拟设备摇一摇" class="headerlink" title="模拟设备摇一摇"></a>模拟设备摇一摇</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.shake()</span><br></pre></td></tr></table></figure><h3 id="关闭应用"><a href="#关闭应用" class="headerlink" title="关闭应用"></a>关闭应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.close_app()</span><br></pre></td></tr></table></figure><h3 id="启动应用"><a href="#启动应用" class="headerlink" title="启动应用"></a>启动应用</h3><p>使用前提是<code>desired capabilities </code>设置了 <code>autoLaunch=false</code> 关键字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.launch_app()</span><br></pre></td></tr></table></figure><h3 id="操作上下文（Contexts）"><a href="#操作上下文（Contexts）" class="headerlink" title="操作上下文（Contexts）"></a>操作上下文（Contexts）</h3><h4 id="获取所有"><a href="#获取所有" class="headerlink" title="获取所有"></a>获取所有</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.contexts</span><br></pre></td></tr></table></figure><h4 id="获取当前"><a href="#获取当前" class="headerlink" title="获取当前"></a>获取当前</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.current_context</span><br></pre></td></tr></table></figure><h4 id="切换至默认"><a href="#切换至默认" class="headerlink" title="切换至默认"></a>切换至默认</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to.context(None)</span><br></pre></td></tr></table></figure><h3 id="按键事件"><a href="#按键事件" class="headerlink" title="按键事件"></a>按键事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.keyevent(176)</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://tokyle.com/2018/01/17/appium%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6/">具体键值</a></p></blockquote><h3 id="点击操作-多点触控操作"><a href="#点击操作-多点触控操作" class="headerlink" title="点击操作/多点触控操作"></a>点击操作/多点触控操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">action &#x3D; TouchAction(driver)</span><br><span class="line">action.press(element&#x3D;el, x&#x3D;10, y&#x3D;10).release().perform()</span><br></pre></td></tr></table></figure><h3 id="滑动屏幕"><a href="#滑动屏幕" class="headerlink" title="滑动屏幕"></a>滑动屏幕</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.swipe(start_x&#x3D;75, start_y&#x3D;500, end_x&#x3D;75, end_y&#x3D;0, duration&#x3D;800)</span><br></pre></td></tr></table></figure><h3 id="从设备拉去文件"><a href="#从设备拉去文件" class="headerlink" title="从设备拉去文件"></a>从设备拉去文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.pull_file(&#39;Library&#x2F;AddressBook&#x2F;AddressBook.sqlitedb&#39;)</span><br></pre></td></tr></table></figure><h3 id="推送文件到设备"><a href="#推送文件到设备" class="headerlink" title="推送文件到设备"></a>推送文件到设备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data &#x3D; &quot;some data for the file&quot;</span><br><span class="line">path &#x3D; &quot;&#x2F;data&#x2F;local&#x2F;tmp&#x2F;file.txt&quot;</span><br><span class="line">driver.push_file(path, data.encode(&#39;base64&#39;))</span><br></pre></td></tr></table></figure><h2 id="appium元素定位"><a href="#appium元素定位" class="headerlink" title="appium元素定位"></a>appium元素定位</h2><p>使用id，class等和selenium基本没差别的定位就不介绍了，主要介绍appium独有<code>uiautomator UiSelector</code></p><p>页面class和id等都不能唯一确定元素，但是元素有text属性时，可以使用以下进行定位：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().text(&quot;Custom View&quot;)&#39;).click()         #text</span><br><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().textContains(&quot;View&quot;)&#39;).click()        #textContains</span><br><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().textStartsWith(&quot;Custom&quot;)&#39;).click()    #textStartsWith</span><br><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().textMatches(&quot;^Custom.*&quot;)&#39;).click()    #textMatches</span><br></pre></td></tr></table></figure><p>也可以加上class属性：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().className(&quot;android.widget.TextView&quot;).text(&quot;Custom View&quot;)&#39;).click()     #className</span><br><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().classNameMatches(&quot;.*TextView$&quot;).text(&quot;Custom View&quot;)&#39;).click()          #classNameMatches</span><br></pre></td></tr></table></figure><p>多条件精准定位</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_android_uiautomator(&#39;new UiSelector().className(&quot;android.widget.EditText&quot;).resourceId(&quot;com.anmav.cashierdesk:id&#x2F;etToPayPrice&quot;)&#39;)</span><br></pre></td></tr></table></figure><h2 id="操作坐标"><a href="#操作坐标" class="headerlink" title="操作坐标"></a>操作坐标</h2><p>appium在进行元素定位时，定位不到唯一标志的元素，可以获取元素的坐标，使用坐标进行操作</p><p><code>appium</code>以及<code>uiautomatorviewer</code>都可以很容易获取到坐标</p><p>appium操作坐标</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.tap([(100, 20), (100, 60), (100, 100)], 500)</span><br></pre></td></tr></table></figure><p>三个坐标表示模拟三根手指，只需要一个手指，改成一个坐标即可，500表示持续时间500ms</p><p>或者使用adb命令也可实现同样效果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.popen(&quot;adb shell input tap &quot; + str(100) + &quot; &quot; + str(20))</span><br></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><blockquote><p><a href="https://testerhome.com/topics/799">appium 基础之键盘处理</a><br><a href="https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/appium-bindings.md">appium-bindings</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> appium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>app安装卸载</title>
      <link href="2018/01/17/app%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD/"/>
      <url>2018/01/17/app%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>appium-模拟器安装卸载app</p><a id="more"></a><p>模拟器安装apk</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install XXX.apk</span><br></pre></td></tr></table></figure><p>卸载apk</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb uninstall your_package</span><br></pre></td></tr></table></figure><p>例子：</p><p>启动android模拟器，参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">desired_caps[&#39;platformName&#39;] &#x3D; &#39;Android&#39;</span><br><span class="line">desired_caps[&#39;platformVersion&#39;] &#x3D; &#39;7.1.1&#39;</span><br><span class="line">desired_caps[&#39;deviceName&#39;] &#x3D; &#39;Android Emulator&#39;</span><br><span class="line">desired_caps[&#39;appPackage&#39;] &#x3D; &#39;com.anmav.cashierdesk&#39;</span><br><span class="line">desired_caps[&#39;appActivity&#39;] &#x3D; &#39;com.anmav.cashierdesk.view.LoginActivity&#39;</span><br></pre></td></tr></table></figure><p>win10打开控制台，进入apk文件所在目录，执行命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install cashierdesk.apk</span><br></pre></td></tr></table></figure><p>在模拟器中可以发现该app已完成安装。</p><p>控制台执行命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb uninstall com.anmav.cashierdesk</span><br></pre></td></tr></table></figure><p>模拟器中可以看见该app完成卸载</p>]]></content>
      
      
      <categories>
          
          <category> appium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> appium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>appium入门篇</title>
      <link href="2018/01/16/appium%E5%85%A5%E9%97%A8%E7%AF%87/"/>
      <url>2018/01/16/appium%E5%85%A5%E9%97%A8%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>appium环境搭建及简单使用</p><p>测试人员进行app自动化测试的可选框架之一—— <strong>appium</strong></p><a id="more"></a><p>平台说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WIN10_64</span><br><span class="line">python 3.6</span><br></pre></td></tr></table></figure><h2 id="appium环境安装"><a href="#appium环境安装" class="headerlink" title="appium环境安装"></a>appium环境安装</h2><h3 id="安装Android-Studio"><a href="#安装Android-Studio" class="headerlink" title="安装Android Studio"></a>安装Android Studio</h3><p>网上之前的教程基本都是安装SDK或者ADT来进行安装，开始我也是这么装的，在最后创建完虚拟机，开启虚拟机时候报错了，报错信息只记得是建议安装Android Studio，索性也就换成了Android Studio。</p><blockquote><p><a href="https://developer.android.com/studio/index.html">Android Studio下载链接</a></p></blockquote><p>如果下载的是不包含SDK的版本，还需要另外下载SDK。安装Android Studio很简单，和Pycharm一模一样，有使用Pycharm经验或者IntelliJ IDEA的应该很熟悉，安装完成之后，找到SDK Manager</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File-Settings-Appearance&amp;Behavior &gt; System Settings &gt; Android SDK</span><br></pre></td></tr></table></figure><p>如果本地有SDK，可以在此选择本地的SDK路径，该设置页也支持下载各种SDK Platforms。<br>对应的SDK安装完成之后就可以进行创建虚拟机，找到<code>AVD Manager</code>按键，点击创建。</p><h3 id="安装Android-SDK（和安装Android-Studio任选一种方式即可）"><a href="#安装Android-SDK（和安装Android-Studio任选一种方式即可）" class="headerlink" title="安装Android SDK（和安装Android Studio任选一种方式即可）"></a>安装Android SDK（和安装Android Studio任选一种方式即可）</h3><p><a href="http://developer.android.com/sdk/index.html">官方下载地址</a></p><p>但是由于国内众所周知的某种原因，不能科学上网貌似无法保证可以下载~</p><p><a href="http://www.androiddevtools.cn/">国内优质android工具网站</a></p><p>搜索<code>android-sdk</code>找到对应系统版本，进行下载。</p><h4 id="配置android环境变量"><a href="#配置android环境变量" class="headerlink" title="配置android环境变量"></a>配置android环境变量</h4><p>与配置JAVA环境变量类似，新增系统变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">变量名：ANDROID_HOME </span><br><span class="line">变量值：D:\android\android-sdk-windows</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">变量名：PATH</span><br><span class="line">变量值：;%ANDROID_HOME%\platform-tools;%ANDROID_HOME%\tools;</span><br></pre></td></tr></table></figure><h4 id="SDK-Manager安装模拟器"><a href="#SDK-Manager安装模拟器" class="headerlink" title="SDK Manager安装模拟器"></a>SDK Manager安装模拟器</h4><p>在你本地解压完成之后的<code>android-sdk-windows</code>目录下找到<code>SDK Manager.exe</code>，双击打开；</p><p><a href="http://www.androiddevtools.cn/">配置参考</a></p><h4 id="安装SDK-Platform-Tools"><a href="#安装SDK-Platform-Tools" class="headerlink" title="安装SDK Platform-Tools"></a>安装SDK Platform-Tools</h4><p>在AndroidDevTools.cn 网站上找到Android SDK Platform-tools下载链接，下载，解压，把解压出来的 platform-tools 文件夹放在<code>android-sdk-windows</code>目录下</p><h3 id="安装Appium"><a href="#安装Appium" class="headerlink" title="安装Appium"></a>安装Appium</h3><h4 id="安装方式一：-使用NodeJS-安装"><a href="#安装方式一：-使用NodeJS-安装" class="headerlink" title="安装方式一： 使用NodeJS 安装"></a>安装方式一： 使用NodeJS 安装</h4><p>1，首先到<a href="https://nodejs.org/zh-cn/download/">官网</a>下载安装最新的NodeJS，Windows下属于傻瓜安装。<br>安装完成验证<code>npm</code>或者<code>node -v</code>不报错表明安装完成</p><p>2，安装appium，<code>npm install -g appium</code>命令安装appium（个人实验的效果不好，太慢了，建议采用第二种，安装包安装）</p><h4 id="安装方式二：安装包安装"><a href="#安装方式二：安装包安装" class="headerlink" title="安装方式二：安装包安装"></a>安装方式二：安装包安装</h4><p>建议直接安装appium-desktop，appium server在2015年就不再更新，取而代之的是appium-desktop的出现。</p><p>Appium安装包托管在github上，<a href="https://github.com/appium/appium-desktop/releases">下载地址</a></p><p>但是个人实验，很多版本都是跳转404页面。。。无语。。。</p><p><a href="https://pan.baidu.com/s/1dmsyiM">个人网盘地址</a>，密码：<code>v3lt</code>（版本1.2.7）</p><p>下载完成后，安装即可。</p><h4 id="appium环境检查"><a href="#appium环境检查" class="headerlink" title="appium环境检查"></a>appium环境检查</h4><p>可以使用<code>appium-doctor</code>工具进行环境检查，<code>npm install -g appium-doctor</code>进行安装。</p><h2 id="Appium-desktop使用简介"><a href="#Appium-desktop使用简介" class="headerlink" title="Appium-desktop使用简介"></a>Appium-desktop使用简介</h2><p>打开appium-desktop，点击“放大镜”图标进行设置，</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1fnij5mz213j21an0qs40e.jpg" alt="示例"><br>设置完成后点击 Start Session</p><p><img src="http://ww1.sinaimg.cn/large/a025e134gy1fnij7beapkj21cr0qm77r.jpg" alt="完成之后"></p><p>直接单击最左栏的元素，在中间和右边会显示该元素属性，找到对应的ID值等，定位方式和selenium类似。</p><h2 id="查找appPackage和appActivity"><a href="#查找appPackage和appActivity" class="headerlink" title="查找appPackage和appActivity"></a>查找appPackage和appActivity</h2><p>appium进行自动化测试，需要<code>appPackage</code>和<code>appActivity</code>两个参数，下面是从apk文件获取的方法：</p><h3 id="apk反编译"><a href="#apk反编译" class="headerlink" title="apk反编译"></a>apk反编译</h3><h4 id="apktool"><a href="#apktool" class="headerlink" title="apktool"></a>apktool</h4><blockquote><p>地址： <a href="https://bitbucket.org/iBotPeaches/apktool/downloads/">apktool</a></p></blockquote><p>用法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar apktool.jar d yourApkFile.apk</span><br></pre></td></tr></table></figure><h3 id="获取appPackage和appActivity"><a href="#获取appPackage和appActivity" class="headerlink" title="获取appPackage和appActivity"></a>获取appPackage和appActivity</h3><p>打开apk反编译之后的文件夹，打开<code>AndroidManifest.xml</code>文件</p><p><code>package</code>获取 <code>appPackage</code>，<code>activity</code>获取<code>appActivity</code>。</p><h2 id="appium-Demo"><a href="#appium-Demo" class="headerlink" title="appium Demo"></a>appium Demo</h2><p>实现计算器计算，代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">from appium import webdriver</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">desired_caps &#x3D; &#123;&#125;</span><br><span class="line">desired_caps[&#39;platformName&#39;] &#x3D; &#39;Android&#39;</span><br><span class="line">desired_caps[&#39;platformVersion&#39;] &#x3D; &#39;7.1.1&#39;</span><br><span class="line">desired_caps[&#39;deviceName&#39;] &#x3D; &#39;Android Emulator&#39;</span><br><span class="line">desired_caps[&#39;appPackage&#39;] &#x3D; &#39;com.android.calculator2&#39;</span><br><span class="line">desired_caps[&#39;appActivity&#39;] &#x3D; &#39;.Calculator&#39;</span><br><span class="line">desired_caps[&#39;noReset&#39;] &#x3D; True</span><br><span class="line"></span><br><span class="line">driver &#x3D; webdriver.Remote(&#39;http:&#x2F;&#x2F;localhost:4723&#x2F;wd&#x2F;hub&#39;, desired_caps)</span><br><span class="line"></span><br><span class="line">driver.find_element_by_id(&#39;com.android.calculator2:id&#x2F;digit_4&#39;).click()</span><br><span class="line">driver.find_element_by_accessibility_id(&#39;multiply&#39;).click()</span><br><span class="line">driver.find_element_by_id(&#39;com.android.calculator2:id&#x2F;digit_9&#39;).click()</span><br><span class="line">driver.find_element_by_accessibility_id(&#39;plus&#39;).click()</span><br><span class="line">driver.find_element_by_id(&#39;com.android.calculator2:id&#x2F;digit_1&#39;).click()</span><br><span class="line">driver.find_element_by_id(&#39;com.android.calculator2:id&#x2F;digit_4&#39;).click()</span><br><span class="line">driver.find_element_by_accessibility_id(&#39;equals&#39;).click()</span><br><span class="line"></span><br><span class="line">time.sleep(3)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> appium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> appium </tag>
            
            <tag> 自动化测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>smtp发邮件</title>
      <link href="2018/01/12/smtp%E5%8F%91%E9%82%AE%E4%BB%B6/"/>
      <url>2018/01/12/smtp%E5%8F%91%E9%82%AE%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>使用python3发送网易邮箱邮件</p><a id="more"></a><p>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import smtplib</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def send_email(mail_host, from_account, from_passwd, to_account, subject, content):</span><br><span class="line">    mail &#x3D; smtplib.SMTP()</span><br><span class="line">    mail.connect(mail_host)</span><br><span class="line">    mail.login(from_account, from_passwd)</span><br><span class="line"></span><br><span class="line">    # 发送邮件</span><br><span class="line">    message &#x3D; MIMEText(content, &#39;plain&#39;, &#39;utf-8&#39;)</span><br><span class="line">    message[&#39;From&#39;] &#x3D; from_account</span><br><span class="line">    message[&#39;To&#39;] &#x3D; to_account</span><br><span class="line">    message[&#39;Subject&#39;] &#x3D; Header(subject, &#39;utf-8&#39;)</span><br><span class="line">    mail.sendmail(from_account, to_account, message.as_string())</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>菜鸟教程上有一种写法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;python3</span><br><span class="line"> </span><br><span class="line">import smtplib</span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line">from email.header import Header</span><br><span class="line"> </span><br><span class="line"># 第三方 SMTP 服务</span><br><span class="line">mail_host&#x3D;&quot;smtp.XXX.com&quot;  #设置服务器</span><br><span class="line">mail_user&#x3D;&quot;XXXX&quot;    #用户名</span><br><span class="line">mail_pass&#x3D;&quot;XXXXXX&quot;   #口令 </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">sender &#x3D; &#39;from@runoob.com&#39;</span><br><span class="line">receivers &#x3D; [&#39;429240967@qq.com&#39;]  # 接收邮件，可设置为你的QQ邮箱或者其他邮箱</span><br><span class="line"> </span><br><span class="line">message &#x3D; MIMEText(&#39;Python 邮件发送测试...&#39;, &#39;plain&#39;, &#39;utf-8&#39;)</span><br><span class="line">message[&#39;From&#39;] &#x3D; Header(&quot;菜鸟教程&quot;, &#39;utf-8&#39;)</span><br><span class="line">message[&#39;To&#39;] &#x3D;  Header(&quot;测试&quot;, &#39;utf-8&#39;)</span><br><span class="line"> </span><br><span class="line">subject &#x3D; &#39;Python SMTP 邮件测试&#39;</span><br><span class="line">message[&#39;Subject&#39;] &#x3D; Header(subject, &#39;utf-8&#39;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">try:</span><br><span class="line">    smtpObj &#x3D; smtplib.SMTP() </span><br><span class="line">    smtpObj.connect(mail_host, 25)    # 25 为 SMTP 端口号</span><br><span class="line">    smtpObj.login(mail_user,mail_pass)</span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    print (&quot;邮件发送成功&quot;)</span><br><span class="line">except smtplib.SMTPException:</span><br><span class="line">    print (&quot;Error: 无法发送邮件&quot;)</span><br></pre></td></tr></table></figure><p>这样执行，会报错<br><code>smtplib.SMTPDataError: (554, &#39;DT:SPM 126 smtp5,jtKowAD3MJz2c1JXLcK2AA--.52114S2 1465021431,please see http://mail.163.com/help/help_spam_16.htm?ip=123.114.121.110&amp;hostid=smtp5&amp;time=1465021431&#39;)</code></p><p>解决办法就是指定收发件人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message[&#39;From&#39;] &#x3D; from_account</span><br><span class="line">message[&#39;To&#39;] &#x3D; to_account</span><br></pre></td></tr></table></figure><p>p.s 网易邮箱客户端默认授权码是关闭的，直接执行python调用会失败，要先进客户端，把客户授权码打开<br>位置：<code>设置-客户端授权密码</code><br>设置完成之后，登录密码就使用你设置的授权码</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python3 </tag>
            
            <tag> smtplib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium无干预下载</title>
      <link href="2018/01/10/selenium%E6%97%A0%E5%B9%B2%E9%A2%84%E4%B8%8B%E8%BD%BD/"/>
      <url>2018/01/10/selenium%E6%97%A0%E5%B9%B2%E9%A2%84%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>selenium自带了无人工干预实现下载功能的模块，下载时不需要弹窗点击确定下载</p><a id="more"></a><p>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">from selenium import webdriver</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">class MacDownload():</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        &quot;&quot;&quot;初始化&quot;&quot;&quot;</span><br><span class="line">        # 创建一个FirefoxProfile实例，用于存放自定义配置</span><br><span class="line">        profile &#x3D; webdriver.FirefoxProfile()</span><br><span class="line">        # 指定下载路径，默认自动创建一级目录</span><br><span class="line">        profile.set_preference(&#39;browser.download.dir&#39;, &#39;G:\idownload&#39;)</span><br><span class="line">        # 将browser.download.folderLis设置为2，表示将文件下载到指定目录（0表示桌面，1表示默认路径）</span><br><span class="line">        profile.set_preference(&quot;browser.download.folderList&quot;, 2)</span><br><span class="line">        # browser.helperApps.alwaysAsk.force对于未知的MIME类型文件会弹出窗口</span><br><span class="line">        # 让用户处理，默认值为True，设定为False表示不会记录打开未知MIME类型文件的方式</span><br><span class="line">        profile.set_preference(&quot;browser.helperApps.alwaysAsk.force&quot;, False)</span><br><span class="line">        # 在开始下载时是否显示下载管理器</span><br><span class="line">        profile.set_preference(&quot;browser.download.manager.showWhenStarting&quot;, False)</span><br><span class="line">        # 设定为False会把下载狂隐藏</span><br><span class="line">        profile.set_preference(&quot;browser.download.manager.useWindow&quot;, False)</span><br><span class="line">        # 默认为True，设定为False表示不获取焦点</span><br><span class="line">        profile.set_preference(&quot;browser.download.manager.focusWhenStarting&quot;, False)</span><br><span class="line">        # 下载.exe文件弹出警告，默认值为True，设定为False则不会弹出警告</span><br><span class="line">        profile.set_preference(&quot;browser.download.manager.alertOnEXEOpen&quot;, False)</span><br><span class="line">        # browser.helperApps.neverAsk.openFile表示直接打开下载文件，不显示确定框</span><br><span class="line">        # 默认值为空字符串，下行代码行设定了多种文件的MIME类型，</span><br><span class="line">        # 例如application&#x2F;exe,表示 .exe类型的文件；application&#x2F;excel表示excel类型的文件</span><br><span class="line">        profile.set_preference(&quot;browser.helperApps.neverAsk.openFile&quot;, &quot;application&#x2F;pdf&quot;)</span><br><span class="line">        # 对所给出文件类型不在弹出提示框进行询问，直接保存到本地磁盘</span><br><span class="line">        profile.set_preference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application&#x2F;zip, application&#x2F;octet-stream&quot;)</span><br><span class="line">        # browser.download.manager.showAlertOnComplete设定下载文件结束后是否显示下载完成提示框</span><br><span class="line">        # 默认为True，设定为False表示下载完成后不显示下载完成提示框</span><br><span class="line">        profile.set_preference(&quot;browser.download.manager.showAlertOnComplete&quot;, False)</span><br><span class="line">        # browser.download.manager.closeWhenDone设定下载结束后是都自动关闭下载框</span><br><span class="line">        # 默认为True，设定为False表示不关闭下载管理器</span><br><span class="line">        profile.set_preference(&quot;browser.download.manager.closeWhenDone&quot;, False)</span><br><span class="line"></span><br><span class="line">        # 启动浏览器，通过firfox_profile参数将自动配置添加到FirefoxProfile对象中sef.driver &#x3D; webdriver.Firefox(firefox_profile&#x3D;profile)</span><br><span class="line">        self.driver &#x3D; webdriver.Firefox(firefox_profile&#x3D;profile)</span><br><span class="line"></span><br><span class="line">    def test_dataPicker(self):</span><br><span class="line">        #访问WebDriver驱动firefox的驱动文件下载网址</span><br><span class="line">        # url1 &#x3D; &quot;https:&#x2F;&#x2F;github.com&#x2F;mozilla&#x2F;geckodriver&#x2F;releases&quot;</span><br><span class="line">        # self.driver.get(url1)</span><br><span class="line">        # #选择下载ZIP类型的文件，使用application&#x2F;zip指代此类型文件</span><br><span class="line">        # self.driver.find_element_by_xpath(&#39;&#x2F;&#x2F;strong[. &#x3D; &quot;geckodriver-v0.19.1-win32.zip&quot;]&#39;).click()</span><br><span class="line">        # time.sleep(10)</span><br><span class="line"></span><br><span class="line">        #访问Python2.7.12文件下载页面，下载扩展名为msi的文件</span><br><span class="line">        #使用application&#x2F;octet - stream来指明次文件类型</span><br><span class="line">        url &#x3D; &quot;https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F;release&#x2F;python-2712&#x2F;&quot;</span><br><span class="line">        self.driver.get(url)</span><br><span class="line">        self.driver.find_element_by_link_text(&#39;Windows x86-64 MSI installer&#39;).click()</span><br><span class="line">        time.sleep(100)</span><br><span class="line"></span><br><span class="line">        self.driver.quit()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12306余票监控</title>
      <link href="2018/01/10/12306%E4%BD%99%E7%A5%A8%E7%9B%91%E6%8E%A7/"/>
      <url>2018/01/10/12306%E4%BD%99%E7%A5%A8%E7%9B%91%E6%8E%A7/</url>
      
        <content type="html"><![CDATA[<p>翻日历突然意识到，好像要放假了，又是一年春运时，就想着可不可以用selenium做个自己的监控12306余票的程序。</p><a id="more"></a><p>动手：<br>思路也就是输入起点，终点，选择列车，选择座位，查询是否有余票。</p><p>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.keys import Keys</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">class monitorTickets():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    查询12306硬座，硬卧，软卧余票</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    def __init__(self):</span><br><span class="line">        &quot;&quot;&quot;初始化&quot;&quot;&quot;</span><br><span class="line">        #使用chrome浏览器打开查询12306查询页面</span><br><span class="line">        self.browser &#x3D; webdriver.Chrome()</span><br><span class="line">        url &#x3D; &#39;https:&#x2F;&#x2F;kyfw.12306.cn&#x2F;otn&#x2F;leftTicket&#x2F;init&#39;</span><br><span class="line">        self.browser.get(url)</span><br><span class="line"></span><br><span class="line">    def search_tickets(self,train_name, start_stations, end_stations, ticket_id):</span><br><span class="line">        &quot;&quot;&quot;循环获取余票&quot;&quot;&quot;</span><br><span class="line">        print(&quot;开始查询【%s】次列车余票信息&quot; % train_name)</span><br><span class="line">        for start_station in start_stations:</span><br><span class="line">            try:</span><br><span class="line">                for end_station in end_stations:</span><br><span class="line">                    #输入起点</span><br><span class="line">                    starts &#x3D; self.browser.find_element_by_id(&quot;fromStationText&quot;)</span><br><span class="line">                    starts.click()</span><br><span class="line">                    starts.clear()</span><br><span class="line">                    starts.send_keys(start_station)</span><br><span class="line">                    starts.send_keys(Keys.ENTER)</span><br><span class="line"></span><br><span class="line">                    #输入到站</span><br><span class="line">                    ends &#x3D; self.browser.find_element_by_id(&quot;toStationText&quot;)</span><br><span class="line">                    ends.click()</span><br><span class="line">                    ends.clear()</span><br><span class="line">                    ends.send_keys(end_station)</span><br><span class="line">                    ends.send_keys(Keys.ENTER)</span><br><span class="line"></span><br><span class="line">                    #选择时间</span><br><span class="line">                    #使用js将只读属性去除，完成选择时间</span><br><span class="line">                    js &#x3D; &#39;document.getElementById(&quot;train_date&quot;).removeAttribute(&quot;readonly&quot;);&#39;</span><br><span class="line">                    self.browser.execute_script(js)</span><br><span class="line">                    date &#x3D; self.browser.find_element_by_id(&#39;train_date&#39;)</span><br><span class="line">                    date.clear()</span><br><span class="line">                    date.send_keys(&#39;2018-02-10&#39;)</span><br><span class="line">                    date.click()</span><br><span class="line"></span><br><span class="line">                    self.browser.find_element_by_id(&quot;query_ticket&quot;).click()</span><br><span class="line">                    time.sleep(2)</span><br><span class="line"></span><br><span class="line">                    text &#x3D; self.browser.find_element_by_id(ticket_id).text</span><br><span class="line">                    if text &#x3D;&#x3D; u&quot;无&quot;:</span><br><span class="line">                        print(u&quot;【%s】到【%s】的余票为0，节哀～&quot; % (start_station, end_station))</span><br><span class="line">                        time.sleep(1)</span><br><span class="line">                    elif text &#x3D;&#x3D; u&quot;*&quot;:</span><br><span class="line">                        print(u&quot;【%s】到【%s】的车票还未开售，请耐心等待～&quot; % (start_station, end_station))</span><br><span class="line">                        time.sleep(1)</span><br><span class="line">                    else:</span><br><span class="line">                        print(u&quot;发现【%s】到【%s】的余票，抢!&quot; % (start_station, end_station))</span><br><span class="line">            except:</span><br><span class="line">                continue</span><br><span class="line">        print(&quot;结束查询【%s】次列车余票信息&quot; % train_name)</span><br><span class="line"></span><br><span class="line">    def close_browser(self):</span><br><span class="line">        &quot;&quot;&quot;关浏览器&quot;&quot;&quot;</span><br><span class="line">        time.sleep(3)</span><br><span class="line">        self.browser.quit()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    #查票</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    search_ticket &#x3D; monitorTickets()</span><br><span class="line">    while True:</span><br><span class="line">        print(&quot;监控硬座&quot;)</span><br><span class="line">        search_ticket.search_tickets(&#39;T116&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;陇西&#39;], &#39;YZ_550000T11671&#39;)</span><br><span class="line">        search_ticket.search_tickets(&#39;Z216&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;甘谷&#39;], &#39;YZ_550000Z21605&#39;)</span><br><span class="line">        search_ticket.search_tickets(&#39;T112&#39;, [&#39;嘉兴&#39;, &#39;昆山&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;陇西&#39;], &#39;YZ_560000T11251&#39;)</span><br><span class="line">        search_ticket.search_tickets(&#39;T204&#39;, [&#39;上海&#39;, &#39;昆山&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;兰州&#39;], &#39;YZ_550000T20450&#39;)</span><br><span class="line">        search_ticket.search_tickets(&#39;Z40&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;兰州&#39;], &#39;YZ_5500000Z4061&#39;)</span><br><span class="line">        print(&quot;监控硬座结束&quot;)</span><br><span class="line"></span><br><span class="line">        # print(&quot;监控硬卧&quot;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;T116&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;陇西&#39;], &#39;YW_550000T11671&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;Z216&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;甘谷&#39;], &#39;YW_550000Z21605&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;T112&#39;, [&#39;嘉兴&#39;, &#39;昆山&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;陇西&#39;], &#39;YW_560000T11251&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;T204&#39;, [&#39;上海&#39;, &#39;昆山&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;兰州&#39;], &#39;YW_550000T20450&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;Z40&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;兰州&#39;], &#39;YW_5500000Z4061&#39;)</span><br><span class="line">        # print(&quot;监控硬卧结束&quot;)</span><br><span class="line">        #</span><br><span class="line">        # print(&quot;监控软卧&quot;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;T116&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;陇西&#39;], &#39;RW_550000T11671&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;Z216&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;甘谷&#39;], &#39;RW_550000Z21605&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;T112&#39;, [&#39;嘉兴&#39;, &#39;昆山&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;陇西&#39;], &#39;RW_560000T11251&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;T204&#39;, [&#39;上海&#39;, &#39;昆山&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;兰州&#39;], &#39;RW_550000T20450&#39;)</span><br><span class="line">        # search_ticket.search_tickets(&#39;Z40&#39;, [&#39;上海&#39;, &#39;苏州&#39;], [&#39;宝鸡&#39;, &#39;天水&#39;, &#39;兰州&#39;], &#39;RW_5500000Z4061&#39;)</span><br><span class="line">        # print(&quot;监控软卧结束&quot;)</span><br><span class="line">    #     msg &#x3D; input(&quot;Enter &#39;q&#39; to quit&quot;)</span><br><span class="line">    #     if msg &#x3D;&#x3D; &#39;q&#39;:</span><br><span class="line">    #         break</span><br><span class="line">    # search_ticket.close_browser()</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>登录网易邮箱</title>
      <link href="2018/01/05/%E7%99%BB%E5%BD%95%E7%BD%91%E6%98%93%E9%82%AE%E7%AE%B1/"/>
      <url>2018/01/05/%E7%99%BB%E5%BD%95%E7%BD%91%E6%98%93%E9%82%AE%E7%AE%B1/</url>
      
        <content type="html"><![CDATA[<p>基于python3的自动化测试框架selenium3实践</p><a id="more"></a><p>登录网易邮箱（126,163）</p><p><strong>登录163</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.keys import Keys</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">browser &#x3D; webdriver.Chrome()</span><br><span class="line">browser.get(&#39;http:&#x2F;&#x2F;mail.163.com&#x2F;&#39;)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line">#切换进iframe</span><br><span class="line">browser.implicitly_wait(5)</span><br><span class="line">browser.switch_to.frame(&#39;x-URS-iframe&#39;)</span><br><span class="line">time.sleep(1)</span><br><span class="line"></span><br><span class="line">#定位账号</span><br><span class="line">username &#x3D; browser.find_element_by_name(&#39;email&#39;)</span><br><span class="line">username.clear()</span><br><span class="line">username.send_keys(&#39;***&#39;)</span><br><span class="line">time.sleep(1)</span><br><span class="line">#定位密码</span><br><span class="line">pwd &#x3D; browser.find_element_by_name(&#39;password&#39;)</span><br><span class="line">pwd.clear()</span><br><span class="line">pwd.send_keys(&#39;***&#39;)</span><br><span class="line"></span><br><span class="line">#登录</span><br><span class="line">pwd.send_keys(Keys.ENTER)</span><br><span class="line">time.sleep(3)</span><br><span class="line">browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#coding:utf-8</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.keys import Keys</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">driver &#x3D; webdriver.Firefox()</span><br><span class="line">driver.get(&#39;http:&#x2F;&#x2F;mail.163.com&#x2F;&#39;)</span><br><span class="line">driver.implicitly_wait(10)</span><br><span class="line">#切换iframe</span><br><span class="line">iframe &#x3D; driver.find_elements_by_tag_name(&#39;iframe&#39;)</span><br><span class="line">driver.switch_to_frame(iframe)</span><br><span class="line">#driver.switch_to.frame(&#39;x-URS-iframe&#39;)</span><br><span class="line">driver.find_element_by_name(&#39;email&#39;).send_keys(&#39;123&#39;)</span><br><span class="line">driver.find_element_by_name(&#39;password&#39;).send_keys(&#39;456&#39;)</span><br><span class="line">brower.find_element_by_name(&quot;password&quot;).send_keys(Keys.ENTER)</span><br></pre></td></tr></table></figure><p><strong>登录126</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.keys import Keys</span><br><span class="line"></span><br><span class="line">browser &#x3D; webdriver.Chrome()</span><br><span class="line">browser.get(&#39;http:&#x2F;&#x2F;mail.126.com&#x2F;&#39;)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line"># 切换iframe</span><br><span class="line">browser.implicitly_wait(5)</span><br><span class="line">browser.switch_to.frame(&#39;x-URS-iframe&#39;)</span><br><span class="line">time.sleep(1)</span><br><span class="line"></span><br><span class="line"># 定位用户名</span><br><span class="line">username &#x3D; browser.find_element_by_name(&#39;email&#39;)</span><br><span class="line">username.clear()</span><br><span class="line">username.send_keys(&#39;***&#39;)</span><br><span class="line">time.sleep(1)</span><br><span class="line"></span><br><span class="line">#定位密码</span><br><span class="line">pwd &#x3D; browser.find_element_by_name(&#39;password&#39;)</span><br><span class="line">pwd.clear()</span><br><span class="line">pwd.send_keys(&#39;***&#39;)</span><br><span class="line"></span><br><span class="line">#登录</span><br><span class="line">pwd.send_keys(Keys.ENTER)</span><br><span class="line">time.sleep(3)</span><br><span class="line">browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>~记小白入坑selenium</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nose跳过测试</title>
      <link href="2018/01/04/nose%E8%B7%B3%E8%BF%87%E6%B5%8B%E8%AF%95/"/>
      <url>2018/01/04/nose%E8%B7%B3%E8%BF%87%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>nose进行单元测试，和unittest一样，有跳过某个方法，指定特定类进行测试的功能。</p><a id="more"></a><h3 id="识别规则"><a href="#识别规则" class="headerlink" title="识别规则"></a>识别规则</h3><p>使用nose进行单元测试，测试用例识别规则如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nosetests only_test_this.py</span><br><span class="line">nosetests test.module</span><br><span class="line">nosetests another.test:TestCase.test_method</span><br><span class="line">nosetests a.test:TestCase</span><br><span class="line">nosetests &#x2F;path&#x2F;to&#x2F;test&#x2F;file.py:test.function</span><br></pre></td></tr></table></figure><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h4 id="执行全部测试"><a href="#执行全部测试" class="headerlink" title="执行全部测试"></a>执行全部测试</h4><p>直接代码示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import traceback</span><br><span class="line">from nose.tools import eq_</span><br><span class="line">from nose.plugins.attrib import attr</span><br><span class="line">from nose.plugins.skip import SkipTest</span><br><span class="line">from functools import reduce</span><br><span class="line"></span><br><span class="line">class test_nosetests():</span><br><span class="line"></span><br><span class="line">    #测试加法</span><br><span class="line">    def test_sum(self):</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        res &#x3D; 3</span><br><span class="line">        eq_(a+b,res)</span><br><span class="line"></span><br><span class="line">    #测试乘法</span><br><span class="line">    def test_mul(self):</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        res &#x3D; 2</span><br><span class="line">        eq_(a*b, res)</span><br><span class="line"></span><br><span class="line">    #测试除法</span><br><span class="line">    def test_div(self):</span><br><span class="line">        a &#x3D; 2</span><br><span class="line">        b &#x3D; 0</span><br><span class="line">        res &#x3D; 1</span><br><span class="line">        try:</span><br><span class="line">            eq_(a&#x2F;b, res)</span><br><span class="line">        except ZeroDivisionError as e:</span><br><span class="line">            print(traceback.print_exc())</span><br><span class="line"></span><br><span class="line">    #测试reduce函数</span><br><span class="line">    def test_reduce(self):</span><br><span class="line">        req &#x3D; range(1,6)</span><br><span class="line">        a &#x3D; 120</span><br><span class="line">        res &#x3D; reduce(lambda x, y: x*y, req)</span><br><span class="line">        eq_(a, res)</span><br></pre></td></tr></table></figure><p>想要对<code>test_nosetests</code>该方法进行测试，可以：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. nosetests -v NoseTestsexercise.py --with-html --html-file&#x3D;G:&#x2F;workstation&#x2F;report&#x2F;test_nosetests.html</span><br><span class="line">2. nosetests -v NoseTestsexercise.py:test_nosetests --with-html --html-file&#x3D;G:&#x2F;workstation&#x2F;report&#x2F;test_nosetests.html</span><br></pre></td></tr></table></figure><p>由于该python文件只有这一个测试类，所以直接nosetests该python文件即可以进行测试，或者是指定该python文件的测试类如<code>NoseTestsexercise.py:test_nosetests</code>方式</p><p>测试结果：<img src="/images/nosetests_py.jpg"></p><h4 id="执行指定方法的测试"><a href="#执行指定方法的测试" class="headerlink" title="执行指定方法的测试"></a>执行指定方法的测试</h4><p>执行指定的一个方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v NoseTestsexercise.py:test_nosetests.test_reduce --with-html --html-file&#x3D;G:&#x2F;workstation&#x2F;report&#x2F;test_nosetests.html</span><br></pre></td></tr></table></figure><p>示例执行了<code>test_nosetests</code>类下的<code>test_reduce</code>方法的测试</p><p>测试结果：<img src="/images/nosetests_single.jpg"></p><h4 id="跳过指定方法的测试"><a href="#跳过指定方法的测试" class="headerlink" title="跳过指定方法的测试"></a>跳过指定方法的测试</h4><p>有的时候，只需要跳过某个方法：<br>例如想跳过<code>test_mul</code>该方法，只需要在代码上增加跳过标志即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#测试乘法</span><br><span class="line">   def test_mul(self):</span><br><span class="line">       a &#x3D; 1</span><br><span class="line">       b &#x3D; 2</span><br><span class="line">       res &#x3D; 2</span><br><span class="line">       eq_(a*b, res)</span><br><span class="line">       raise SkipTest</span><br></pre></td></tr></table></figure><p>执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v NoseTestsexercise.py:test_nosetests --with-html --html-file&#x3D;G:&#x2F;workstation&#x2F;report&#x2F;test_nosetests.html</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>测试结果：<img src="/images/nosetests_skip.jpg"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>另外，nosetests也有用例执行优先级的功能</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from nose.plugins.attrib import attr</span><br><span class="line">@attr(speed&#x3D;&#39;slow&#39;)</span><br><span class="line">    def test_big_download(self):</span><br><span class="line">        print(&#39;pass&#39;)</span><br></pre></td></tr></table></figure><p>执行只需要：<code>nosetests -a speed=slow</code>即可</p><blockquote><p><a href="http://www.cnblogs.com/landhu/p/5689414.html">参考用法</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nose </tag>
            
            <tag> 单元测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python单元测试框架-nose</title>
      <link href="2018/01/03/python%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6-nose/"/>
      <url>2018/01/03/python%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6-nose/</url>
      
        <content type="html"><![CDATA[<p>python单元测试框架 nose简介</p><a id="more"></a><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>nose是python单元测试的另一框架，nose可以自动识别继承于unittest.TestCase的测试单元，并执行测试，而且，nose也可以测试非继承于unittest.TestCase的测试单元。nose提供了丰富的API便于编写测试代码。</p><h3 id="安装及使用"><a href="#安装及使用" class="headerlink" title="安装及使用"></a>安装及使用</h3><p>安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install nose</span><br></pre></td></tr></table></figure><p>基本语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nosetests [options] [(optional) test files or directories]</span><br></pre></td></tr></table></figure><h3 id="扩展使用"><a href="#扩展使用" class="headerlink" title="扩展使用"></a>扩展使用</h3><p>nose自动收集单元测试，收集它当前工作目录下的源代码文件、目录以及包。任何的源代码文件、目录或者包只要匹配正则表达式，他们就会被自动收集。包的测试收集按照树的层级级别一级一级进行，因此package.tests、package.sub.tests、package.sub.sub2.tests将会被收集。</p><h4 id="扩展插件"><a href="#扩展插件" class="headerlink" title="扩展插件"></a>扩展插件</h4><p>nose支持多种插件，可完成基本大部分测试需要。nose拥有很多内置的插件帮助进行输出抓取、错误查找、代码覆盖、文档测试（doctest）等等。</p><p>命令行执行命令可查看插件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nosetests –plugins</span><br></pre></td></tr></table></figure><p>若想查看详细信息，可执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nosetests –plugins -v</span><br><span class="line">nosetests –plugins -vv</span><br></pre></td></tr></table></figure><h4 id="nose使用"><a href="#nose使用" class="headerlink" title="nose使用"></a>nose使用</h4><p>nose使用和unittest类似，unittest的断言，nose.tools中都可以选择使用<br>使用示例：<br>unittest：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import unittest</span><br><span class="line"></span><br><span class="line">class NoseTest(unittest.TestCase):</span><br><span class="line"></span><br><span class="line">    def setUp(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;setUp&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    def test_Pass(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;begin test&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">        a &#x3D; 1</span><br><span class="line">        b &#x3D; 2</span><br><span class="line">        self.assertTrue(a &#x3D;&#x3D; b, &#39;断言失败, %a !&#x3D; %a&#39;% (a, b))</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;tearDown&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p>nose:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from nose.tools import eq_</span><br><span class="line">from nose.tools import assert_equal</span><br><span class="line"></span><br><span class="line">class noseTest():</span><br><span class="line">    a &#x3D; 1</span><br><span class="line">    b &#x3D; 2</span><br><span class="line">    #assert_equal(a, b, &#39;%a !&#x3D; %a&#39;%(a,b))</span><br><span class="line">    eq_(a, b)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>nose也支持在代码中直接运行<code>nose.main()</code>或者<code>nose.run()</code>这样类似于unittest的方式，但是还是建议在命令行中运行nosetests来执行单元测试<br>参考示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v HandleFrameByPageSource.py:test_handleFrameByPageSource --with-html --html-file&#x3D;G:\workstation\report\handleframe.html</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nosetests -v: 显示详细的运行信息和调试信息</span><br><span class="line">HandleFrameByPageSource.py:test_handleFrameByPageSource ：测试对象为该python文件下的test_handleFrameByPageSource类</span><br><span class="line">--with-html ：使用html插件,生成标准HTML格式测试报告</span><br><span class="line">--html-file&#x3D;G:\workstation\report\handleframe.html ：测试结果输出为该路径下handleframe.html文件</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nose </tag>
            
            <tag> 单元测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win32api_VK_CODE</title>
      <link href="2018/01/02/win32api-VK-CODE/"/>
      <url>2018/01/02/win32api-VK-CODE/</url>
      
        <content type="html"><![CDATA[<p>python使用win32api模块，可模拟键盘按键，应用于爬虫及自动化测试。</p><a id="more"></a><p>键盘按键对应的<code>Vitual keystroke</code>如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br></pre></td><td class="code"><pre><span class="line">#Giant dictonary to hold key name and VK value</span><br><span class="line">VK_CODE &#x3D; &#123;&#39;backspace&#39;:0x08,</span><br><span class="line">           &#39;tab&#39;:0x09,</span><br><span class="line">           &#39;clear&#39;:0x0C,</span><br><span class="line">           &#39;enter&#39;:0x0D,</span><br><span class="line">           &#39;shift&#39;:0x10,</span><br><span class="line">           &#39;ctrl&#39;:0x11,</span><br><span class="line">           &#39;alt&#39;:0x12,</span><br><span class="line">           &#39;pause&#39;:0x13,</span><br><span class="line">           &#39;caps_lock&#39;:0x14,</span><br><span class="line">           &#39;esc&#39;:0x1B,</span><br><span class="line">           &#39;spacebar&#39;:0x20,</span><br><span class="line">           &#39;page_up&#39;:0x21,</span><br><span class="line">           &#39;page_down&#39;:0x22,</span><br><span class="line">           &#39;end&#39;:0x23,</span><br><span class="line">           &#39;home&#39;:0x24,</span><br><span class="line">           &#39;left_arrow&#39;:0x25,</span><br><span class="line">           &#39;up_arrow&#39;:0x26,</span><br><span class="line">           &#39;right_arrow&#39;:0x27,</span><br><span class="line">           &#39;down_arrow&#39;:0x28,</span><br><span class="line">           &#39;select&#39;:0x29,</span><br><span class="line">           &#39;print&#39;:0x2A,</span><br><span class="line">           &#39;execute&#39;:0x2B,</span><br><span class="line">           &#39;print_screen&#39;:0x2C,</span><br><span class="line">           &#39;ins&#39;:0x2D,</span><br><span class="line">           &#39;del&#39;:0x2E,</span><br><span class="line">           &#39;help&#39;:0x2F,</span><br><span class="line">           &#39;0&#39;:0x30,</span><br><span class="line">           &#39;1&#39;:0x31,</span><br><span class="line">           &#39;2&#39;:0x32,</span><br><span class="line">           &#39;3&#39;:0x33,</span><br><span class="line">           &#39;4&#39;:0x34,</span><br><span class="line">           &#39;5&#39;:0x35,</span><br><span class="line">           &#39;6&#39;:0x36,</span><br><span class="line">           &#39;7&#39;:0x37,</span><br><span class="line">           &#39;8&#39;:0x38,</span><br><span class="line">           &#39;9&#39;:0x39,</span><br><span class="line">           &#39;a&#39;:0x41,</span><br><span class="line">           &#39;b&#39;:0x42,</span><br><span class="line">           &#39;c&#39;:0x43,</span><br><span class="line">           &#39;d&#39;:0x44,</span><br><span class="line">           &#39;e&#39;:0x45,</span><br><span class="line">           &#39;f&#39;:0x46,</span><br><span class="line">           &#39;g&#39;:0x47,</span><br><span class="line">           &#39;h&#39;:0x48,</span><br><span class="line">           &#39;i&#39;:0x49,</span><br><span class="line">           &#39;j&#39;:0x4A,</span><br><span class="line">           &#39;k&#39;:0x4B,</span><br><span class="line">           &#39;l&#39;:0x4C,</span><br><span class="line">           &#39;m&#39;:0x4D,</span><br><span class="line">           &#39;n&#39;:0x4E,</span><br><span class="line">           &#39;o&#39;:0x4F,</span><br><span class="line">           &#39;p&#39;:0x50,</span><br><span class="line">           &#39;q&#39;:0x51,</span><br><span class="line">           &#39;r&#39;:0x52,</span><br><span class="line">           &#39;s&#39;:0x53,</span><br><span class="line">           &#39;t&#39;:0x54,</span><br><span class="line">           &#39;u&#39;:0x55,</span><br><span class="line">           &#39;v&#39;:0x56,</span><br><span class="line">           &#39;w&#39;:0x57,</span><br><span class="line">           &#39;x&#39;:0x58,</span><br><span class="line">           &#39;y&#39;:0x59,</span><br><span class="line">           &#39;z&#39;:0x5A,</span><br><span class="line">           &#39;numpad_0&#39;:0x60,</span><br><span class="line">           &#39;numpad_1&#39;:0x61,</span><br><span class="line">           &#39;numpad_2&#39;:0x62,</span><br><span class="line">           &#39;numpad_3&#39;:0x63,</span><br><span class="line">           &#39;numpad_4&#39;:0x64,</span><br><span class="line">           &#39;numpad_5&#39;:0x65,</span><br><span class="line">           &#39;numpad_6&#39;:0x66,</span><br><span class="line">           &#39;numpad_7&#39;:0x67,</span><br><span class="line">           &#39;numpad_8&#39;:0x68,</span><br><span class="line">           &#39;numpad_9&#39;:0x69,</span><br><span class="line">           &#39;multiply_key&#39;:0x6A,</span><br><span class="line">           &#39;add_key&#39;:0x6B,</span><br><span class="line">           &#39;separator_key&#39;:0x6C,</span><br><span class="line">           &#39;subtract_key&#39;:0x6D,</span><br><span class="line">           &#39;decimal_key&#39;:0x6E,</span><br><span class="line">           &#39;divide_key&#39;:0x6F,</span><br><span class="line">           &#39;F1&#39;:0x70,</span><br><span class="line">           &#39;F2&#39;:0x71,</span><br><span class="line">           &#39;F3&#39;:0x72,</span><br><span class="line">           &#39;F4&#39;:0x73,</span><br><span class="line">           &#39;F5&#39;:0x74,</span><br><span class="line">           &#39;F6&#39;:0x75,</span><br><span class="line">           &#39;F7&#39;:0x76,</span><br><span class="line">           &#39;F8&#39;:0x77,</span><br><span class="line">           &#39;F9&#39;:0x78,</span><br><span class="line">           &#39;F10&#39;:0x79,</span><br><span class="line">           &#39;F11&#39;:0x7A,</span><br><span class="line">           &#39;F12&#39;:0x7B,</span><br><span class="line">           &#39;F13&#39;:0x7C,</span><br><span class="line">           &#39;F14&#39;:0x7D,</span><br><span class="line">           &#39;F15&#39;:0x7E,</span><br><span class="line">           &#39;F16&#39;:0x7F,</span><br><span class="line">           &#39;F17&#39;:0x80,</span><br><span class="line">           &#39;F18&#39;:0x81,</span><br><span class="line">           &#39;F19&#39;:0x82,</span><br><span class="line">           &#39;F20&#39;:0x83,</span><br><span class="line">           &#39;F21&#39;:0x84,</span><br><span class="line">           &#39;F22&#39;:0x85,</span><br><span class="line">           &#39;F23&#39;:0x86,</span><br><span class="line">           &#39;F24&#39;:0x87,</span><br><span class="line">           &#39;num_lock&#39;:0x90,</span><br><span class="line">           &#39;scroll_lock&#39;:0x91,</span><br><span class="line">           &#39;left_shift&#39;:0xA0,</span><br><span class="line">           &#39;right_shift &#39;:0xA1,</span><br><span class="line">           &#39;left_control&#39;:0xA2,</span><br><span class="line">           &#39;right_control&#39;:0xA3,</span><br><span class="line">           &#39;left_menu&#39;:0xA4,</span><br><span class="line">           &#39;right_menu&#39;:0xA5,</span><br><span class="line">           &#39;browser_back&#39;:0xA6,</span><br><span class="line">           &#39;browser_forward&#39;:0xA7,</span><br><span class="line">           &#39;browser_refresh&#39;:0xA8,</span><br><span class="line">           &#39;browser_stop&#39;:0xA9,</span><br><span class="line">           &#39;browser_search&#39;:0xAA,</span><br><span class="line">           &#39;browser_favorites&#39;:0xAB,</span><br><span class="line">           &#39;browser_start_and_home&#39;:0xAC,</span><br><span class="line">           &#39;volume_mute&#39;:0xAD,</span><br><span class="line">           &#39;volume_Down&#39;:0xAE,</span><br><span class="line">           &#39;volume_up&#39;:0xAF,</span><br><span class="line">           &#39;next_track&#39;:0xB0,</span><br><span class="line">           &#39;previous_track&#39;:0xB1,</span><br><span class="line">           &#39;stop_media&#39;:0xB2,</span><br><span class="line">           &#39;play&#x2F;pause_media&#39;:0xB3,</span><br><span class="line">           &#39;start_mail&#39;:0xB4,</span><br><span class="line">           &#39;select_media&#39;:0xB5,</span><br><span class="line">           &#39;start_application_1&#39;:0xB6,</span><br><span class="line">           &#39;start_application_2&#39;:0xB7,</span><br><span class="line">           &#39;attn_key&#39;:0xF6,</span><br><span class="line">           &#39;crsel_key&#39;:0xF7,</span><br><span class="line">           &#39;exsel_key&#39;:0xF8,</span><br><span class="line">           &#39;play_key&#39;:0xFA,</span><br><span class="line">           &#39;zoom_key&#39;:0xFB,</span><br><span class="line">           &#39;clear_key&#39;:0xFE,</span><br><span class="line">           &#39;+&#39;:0xBB,</span><br><span class="line">           &#39;,&#39;:0xBC,</span><br><span class="line">           &#39;-&#39;:0xBD,</span><br><span class="line">           &#39;.&#39;:0xBE,</span><br><span class="line">           &#39;&#x2F;&#39;:0xBF,</span><br><span class="line">           &#39;&#96;&#39;:0xC0,</span><br><span class="line">           &#39;;&#39;:0xBA,</span><br><span class="line">           &#39;[&#39;:0xDB,</span><br><span class="line">           &#39;\\&#39;:0xDC,</span><br><span class="line">           &#39;]&#39;:0xDD,</span><br><span class="line">           &quot;&#39;&quot;:0xDE,</span><br><span class="line">           &#39;&#96;&#39;:0xC0&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def press(*args):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    one press, one release.</span><br><span class="line">    accepts as many arguments as you want. e.g. press(&#39;left_arrow&#39;, &#39;a&#39;,&#39;b&#39;).</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    for i in args:</span><br><span class="line">        win32api.keybd_event(VK_CODE[i], 0,0,0)</span><br><span class="line">        time.sleep(.05)</span><br><span class="line">        win32api.keybd_event(VK_CODE[i],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">def pressAndHold(*args):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    press and hold. Do NOT release.</span><br><span class="line">    accepts as many arguments as you want.</span><br><span class="line">    e.g. pressAndHold(&#39;left_arrow&#39;, &#39;a&#39;,&#39;b&#39;).</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    for i in args:</span><br><span class="line">        win32api.keybd_event(VK_CODE[i], 0,0,0)</span><br><span class="line">        time.sleep(.05)</span><br><span class="line">           </span><br><span class="line">def pressHoldRelease(*args):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    press and hold passed in strings. Once held, release</span><br><span class="line">    accepts as many arguments as you want.</span><br><span class="line">    e.g. pressAndHold(&#39;left_arrow&#39;, &#39;a&#39;,&#39;b&#39;).</span><br><span class="line"></span><br><span class="line">    this is useful for issuing shortcut command or shift commands.</span><br><span class="line">    e.g. pressHoldRelease(&#39;ctrl&#39;, &#39;alt&#39;, &#39;del&#39;), pressHoldRelease(&#39;shift&#39;,&#39;a&#39;)</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    for i in args:</span><br><span class="line">        win32api.keybd_event(VK_CODE[i], 0,0,0)</span><br><span class="line">        time.sleep(.05)</span><br><span class="line">            </span><br><span class="line">    for i in args:</span><br><span class="line">            win32api.keybd_event(VK_CODE[i],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            time.sleep(.1)</span><br><span class="line">            </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">def release(*args):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    release depressed keys</span><br><span class="line">    accepts as many arguments as you want.</span><br><span class="line">    e.g. release(&#39;left_arrow&#39;, &#39;a&#39;,&#39;b&#39;).</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    for i in args:</span><br><span class="line">           win32api.keybd_event(VK_CODE[i],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def typer(string&#x3D;None,*args):</span><br><span class="line">##    time.sleep(4)</span><br><span class="line">    for i in string:</span><br><span class="line">        if i &#x3D;&#x3D; &#39; &#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;spacebar&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;spacebar&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;!&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;1&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;1&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;@&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;2&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;2&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&#123;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;[&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;[&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;?&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;&#x2F;&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;&#x2F;&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;:&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;;&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;;&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&quot;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;\&#39;&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;\&#39;&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&#125;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;]&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;]&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;#&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;3&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;3&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;$&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;4&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;4&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;%&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;5&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;5&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;^&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;6&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;6&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&amp;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;7&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;7&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;*&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;8&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;8&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;(&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;9&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;9&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;)&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;0&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;0&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;_&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;-&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;-&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&#x3D;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;+&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;+&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;~&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;&#96;&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;&#96;&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&lt;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;,&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;,&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;&gt;&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;.&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;.&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;A&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;a&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;a&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;B&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;b&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;b&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;C&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;c&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;c&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;D&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;d&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;d&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;E&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;e&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;e&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;F&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;f&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;f&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;G&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;g&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;g&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;H&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;h&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;h&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;I&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;i&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;i&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;J&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;j&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;j&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;K&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;k&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;k&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;L&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;l&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;l&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;M&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;m&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;m&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;N&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;n&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;n&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;O&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;o&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;o&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;P&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;p&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;p&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;Q&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;q&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;q&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;R&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;r&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;r&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;S&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;s&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;s&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;T&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;t&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;t&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;U&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;u&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;u&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;V&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;v&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;v&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;W&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;w&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;w&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;X&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;x&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;x&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;Y&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;y&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;y&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">        elif i &#x3D;&#x3D; &#39;Z&#39;:</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;], 0,0,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;z&#39;], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;left_shift&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line">            win32api.keybd_event(VK_CODE[&#39;z&#39;],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        else:    </span><br><span class="line">            win32api.keybd_event(VK_CODE[i], 0,0,0)</span><br><span class="line">            time.sleep(.05)</span><br><span class="line">            win32api.keybd_event(VK_CODE[i],0 ,win32con.KEYEVENTF_KEYUP ,0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://gist.github.com/chriskiehl/2906125">参考地址</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
            <tag> win32api </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3.6安装pywin32</title>
      <link href="2017/12/28/python3-6%E5%AE%89%E8%A3%85pywin32/"/>
      <url>2017/12/28/python3-6%E5%AE%89%E8%A3%85pywin32/</url>
      
        <content type="html"><![CDATA[<p>python3.6装载win32api模块</p><a id="more"></a><p>使用pip安装win32报错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could not find a version that satisfies the requirement win32api (from versions: )No matching distribution found for win32api </span><br></pre></td></tr></table></figure><p>stack overflow上面有两种回答</p><ol><li><code>pip install pypiwin32</code></li><li>从<a href="https://sourceforge.net/projects/pywin32/files/pywin32/Build%20220/">windowsapi官网</a>下载安装程序，点击安装</li></ol><p>首先尝试了第一种方式，没啥用，还是找不到win32api<br>尝试第二种方法，直接报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python version 3.6-32 required, which was not found in the registry.</span><br></pre></td></tr></table></figure><p>找半天问题，首先本地python是64位版本，下载的也是64位安装包，报这莫名其妙的注册表错误。<br>后来在注册表里加了个python3.6-32就能安装了，莫名其妙。。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SOFTWARE\Python\PythonCore\3.6-32</span><br></pre></td></tr></table></figure><p>导入了个奇奇怪怪的win32api，貌似用不了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import win32.win32api</span><br><span class="line">import win32.win32clipboard</span><br><span class="line">import win32com</span><br></pre></td></tr></table></figure><p>根据以往踩坑经验，改注册表好像都没什么好下场，于是乎，把装好的win32全部删除，注册表还原，重新下载更新版本的pywin32：<a href="https://sourceforge.net/projects/pywin32/files/pywin32/Build%20221/">下载链接</a></p><p>重新安装之后，重启pycharm，这次好像是成功了。。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import win32api</span><br><span class="line">import win32con</span><br><span class="line"></span><br><span class="line">def keyDown(keyName):</span><br><span class="line">    win32api.keybd_event()</span><br><span class="line">    win32con.KEYEVENTF_KEYUP</span><br></pre></td></tr></table></figure><p>反正过程是挺无语的，莫名其妙的就好了。</p><p>附上环境信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WIN-10 64位</span><br><span class="line">python-3.6 64位</span><br><span class="line">pywin32-221.win-amd64-py3.6</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pywin32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python3_map()函数</title>
      <link href="2017/12/27/python3-map-%E5%87%BD%E6%95%B0/"/>
      <url>2017/12/27/python3-map-%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>坑爹python3改动之map()函数</p><a id="more"></a><p>做自动化测试，获取并校验下拉列表中所有值，由于实在不想先写个空列表，再来个for循环全部加到列表中，就想到了map()函数，折腾半天，各种报错，墙里墙外翻半天，终于找到跟我一样入坑的人。</p><p>map()函数，python3改动</p><p>在python2中，以下代码可输出一个列表<code>[1, 2, 3, 4, 5]</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; map(lambda x:x, [1, 2, 3, 4, 5])</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure><p>但是python3，这玩意只能输出个map对象：<code>&lt;map object at 0x00000278CB45D4E0&gt;</code></p><p>遇到这玩意也很多次了，直接加list：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; list(map(lambda x: x, [1, 2, 3, 4, 5]))</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure><p>这样，在python3就可以输出<code>[1, 2, 3, 4, 5]</code></p><p>附自动化测试比较下拉列表值是否符合预期示例代码（百度新闻高级设置-显示条数为例）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.support.ui import Select</span><br><span class="line">import unittest</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">class News_Baidu(unittest.TestCase):</span><br><span class="line"></span><br><span class="line">    def setUp(self):</span><br><span class="line">        #打开浏览器</span><br><span class="line">        self.brower &#x3D; webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">    def test_Checklist(self):</span><br><span class="line">        #打开百度新闻页面</span><br><span class="line">        self.brower.get(&quot;http:&#x2F;&#x2F;news.baidu.com&#x2F;&quot;)</span><br><span class="line">        #定位“高级设置”，并点击</span><br><span class="line">        self.brower.find_element_by_link_text(&quot;高级搜索&quot;).click()</span><br><span class="line">        #定位“搜索结果显示条数”</span><br><span class="line">        select_element &#x3D; Select(self.brower.find_element_by_name(&#39;rn&#39;))</span><br><span class="line">        #获取下拉列表所有元素对象</span><br><span class="line">        select_options &#x3D; select_element.options</span><br><span class="line">        #声明一个期望下拉列表值的列表(百度也是够坑的，值前面还有一个空格)</span><br><span class="line">        expect_optionlist &#x3D; [&#39; 每页显示10条&#39;, &#39; 每页显示20条&#39;, &#39; 每页显示50条&#39;]</span><br><span class="line">        #获取实际的下拉列表值的列表</span><br><span class="line">        actual_optionlist &#x3D; list(map(lambda option:option.text, select_options))</span><br><span class="line">        #断言结果是否适合期望</span><br><span class="line">        self.assertListEqual(actual_optionlist, expect_optionlist)</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        #休眠</span><br><span class="line">        time.sleep(5)</span><br><span class="line">        #退出浏览器</span><br><span class="line">        self.brower.quit()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    unittest.main()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>html报告乱码</title>
      <link href="2017/12/26/html%E6%8A%A5%E5%91%8A%E4%B9%B1%E7%A0%81/"/>
      <url>2017/12/26/html%E6%8A%A5%E5%91%8A%E4%B9%B1%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>使用HTMLTestRunner进行测试报告输出时，错误说明，中午乱码，版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3.6</span><br><span class="line">HTMLTestRunner 1.1.1</span><br></pre></td></tr></table></figure><a id="more"></a><p>网上搜了一堆，全是用python2.x的，心痛，2.X到2020年不就不支持了嘛，为啥一个个的都在2.X上面，没办法，自己去捣鼓源码。</p><p>报告输出的html文件，使用类似于notepad的编辑器打开，编码格式改为UTF-8，重新在浏览器中打开，错误描述的中文显示就是正常文字。所以，只要在输出时，设置编码为“utf-8”应该就可以。</p><p>找到本地的HTMLTestRunner安装路径，一般都是在<code>G:\skills\python36\Lib\site-packages\HtmlTestRunner</code>类似这样的路径下，毕竟扩展包。下面有三个文件，和一个文件夹，文件夹里是报告的模板，不考虑，三个文件，一个是HtmlTestRunner的介绍，一个是<code>runner.py</code>，一个是<code>result.py</code>，输出报告，应该就在<code>result.py</code>文件中。</p><p>编辑器打开<code>result.py</code>，找到第350行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">with open(path_file, &#39;w&#39;) as report_file:</span><br></pre></td></tr></table></figure><p>只要修改成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">with open(path_file, &#39;w&#39;,encoding&#x3D;&#39;utf-8&#39;) as report_file:</span><br></pre></td></tr></table></figure><p>即可。</p><p>附上<code>百度搜索自动化测试</code>代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import unittest</span><br><span class="line">import time</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from HtmlTestRunner import HTMLTestRunner</span><br><span class="line"></span><br><span class="line">class GloryRoad(unittest.TestCase):</span><br><span class="line">    def setUp(self):</span><br><span class="line">        #启动chrome浏览器</span><br><span class="line">        self.brower &#x3D; webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">    def test_baidu(self):</span><br><span class="line">        #访问百度首页</span><br><span class="line">        self.brower.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line">        #清空输入框内容</span><br><span class="line">        self.brower.find_element_by_id(&#39;kw&#39;).clear()</span><br><span class="line">        #搜索框输入“selenium3”</span><br><span class="line">        self.brower.find_element_by_id(&#39;kw&#39;).send_keys(&#39;selenium3&#39;)</span><br><span class="line">        #点击“百度一下”按键</span><br><span class="line">        self.brower.find_element_by_id(&#39;su&#39;).click()</span><br><span class="line">        #休眠3s</span><br><span class="line">        time.sleep(3)</span><br><span class="line">        assert &quot;google&quot; in self.brower.page_source, &quot;页面中不存在要寻找的关键字！&quot;</span><br><span class="line"></span><br><span class="line">    def tearDown(self):</span><br><span class="line">        #退出浏览器</span><br><span class="line">        self.brower.quit()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    suite &#x3D; unittest.TestLoader().loadTestsFromTestCase(GloryRoad)</span><br><span class="line">    runner &#x3D; HTMLTestRunner(output&#x3D;&#39;G:&#x2F;workstation&#x2F;report&#39;, report_title&#x3D;&#39;Test Result&#39;)</span><br><span class="line">    runner.run(suite)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pycharm单元测试</title>
      <link href="2017/12/25/pycharm%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
      <url>2017/12/25/pycharm%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>使用pycharm编写/执行单元测试用例</p><a id="more"></a><p>python单元测试用例，调用方式使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unittest.main()</span><br></pre></td></tr></table></figure><p>该方式，在python shell中可执行成功，在pycharm中会一直报错，参考网上的写法，最后校验调用改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if _name_ &#x3D;&#x3D; &#39;_main_&#39;:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p>结果一直报错，<code>NameError: name &#39;_name_&#39; is not defined </code></p><p>简直了，找了半天，还是在墙外找到跟我有一样经历的哥们的求救，报错原因是<br><code>_name_</code>和<code>_main</code>都是双下划线，正确写法是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p>真是日常坑自己…</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pycharm </tag>
            
            <tag> unittest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium3+python3.6搭建测试</title>
      <link href="2017/12/25/selenium3-python3-6%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95/"/>
      <url>2017/12/25/selenium3-python3-6%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>python3.6<br>selenium3<br>chrome64<br>firefox57</p><a id="more"></a><p>selenium3开始，需要浏览器驱动，加载驱动方式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1，驱动放在任意位置，代码中，引驱动，打开浏览器（webdriver.Chrome(executable_path&#x3D;&quot;驱动路径&quot;）</span><br><span class="line">2，将驱动放到浏览器安装目录下，和浏览器启动程序同级，将浏览器安装路径加到环境变量Path中，重启pycharm</span><br></pre></td></tr></table></figure><p>自动化测试示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from selenium import webdriver</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#加载驱动程序</span><br><span class="line">#firefox(驱动放到浏览器安装目录，目录加到Path)</span><br><span class="line">#driver &#x3D; webdriver.Firefox()</span><br><span class="line">#chrome(驱动放到浏览器安装目录，目录加到Path)</span><br><span class="line">driver &#x3D; webdriver.Chrome()</span><br><span class="line">#chrome默认安装路径，驱动指定路径</span><br><span class="line">#driver &#x3D; webdriver.Chrome(executable_path&#x3D;&quot;G:&#x2F;Selenium&#x2F;drivers&#x2F;chromedriver.exe&quot;)</span><br><span class="line">#打开百度首页</span><br><span class="line">driver.get(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)</span><br><span class="line"></span><br><span class="line">#清空搜索输入框默认内容</span><br><span class="line">driver.find_element_by_id(&quot;kw&quot;).clear()</span><br><span class="line">#输入框中输入“自动化测试”</span><br><span class="line">driver.find_element_by_id(&quot;kw&quot;).send_keys(&quot;自动化测试&quot;)</span><br><span class="line">#单击搜索按钮</span><br><span class="line">driver.find_element_by_id(&quot;su&quot;).click()</span><br><span class="line"></span><br><span class="line">#等待3秒</span><br><span class="line">time.sleep(3)</span><br><span class="line"></span><br><span class="line">#退出浏览器</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 自动化测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>world_map</title>
      <link href="2017/12/21/world-map/"/>
      <url>2017/12/21/world-map/</url>
      
        <content type="html"><![CDATA[<p>pygal-2.4<br>pygal-maps-world-1.0.2    世界地图模块位置变更</p><a id="more"></a><p>pygal内置世界地图模块，包括国别码模块<code>COUNTRIES</code>以及世界地图模块<code>World</code>。</p><p>当前版本下，绘制世界地图，需要从<code>pygal_maps_world.i18n</code>中引国别码，需要从<code>pygal_maps_world.maps</code>中引世界地图。</p><p>参考代码如下：</p><h2 id="countries-py"><a href="#countries-py" class="headerlink" title="countries.py"></a><code>countries.py</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from pygal_maps_world.i18n import COUNTRIES</span><br><span class="line"></span><br><span class="line">def get_country_code(country_name):</span><br><span class="line">    &quot;&quot;&quot;根据指定国家，返回国别码&quot;&quot;&quot;</span><br><span class="line">    for code, name in COUNTRIES.items():</span><br><span class="line">        if name &#x3D;&#x3D; country_name or name &#x3D;&#x3D; country_name.title():</span><br><span class="line">            return code</span><br><span class="line">    return None</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="population-data-py"><a href="#population-data-py" class="headerlink" title="population_data.py"></a><code>population_data.py</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from settings import Settings</span><br><span class="line">from countries import get_country_code</span><br><span class="line">from pygal.style import RotateStyle as RS,LightColorizedStyle as LCS</span><br><span class="line">import pygal_maps_world.maps</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_setting &#x3D; Settings()</span><br><span class="line">filename &#x3D; data_setting.json_population</span><br><span class="line"></span><br><span class="line">with open(filename) as f_obj:</span><br><span class="line">    pop_data &#x3D; json.load(f_obj)</span><br><span class="line"></span><br><span class="line">#打印每个国家2010年的人口</span><br><span class="line">cc_population &#x3D; &#123;&#125;</span><br><span class="line">for pop_dict in pop_data:</span><br><span class="line">    if pop_dict[&#39;Year&#39;] &#x3D;&#x3D; &#39;2010&#39;:</span><br><span class="line">        country_name &#x3D; pop_dict[&#39;Country Name&#39;]</span><br><span class="line">        population &#x3D; int(float(pop_dict[&#39;Value&#39;]))</span><br><span class="line">        code &#x3D; get_country_code(country_name)</span><br><span class="line">        if code:</span><br><span class="line">            cc_population[code] &#x3D; population</span><br><span class="line">#按人口给国家分组</span><br><span class="line">cc_pops_1, cc_pops_2, cc_pops_3 &#x3D; &#123;&#125;, &#123;&#125;, &#123;&#125;</span><br><span class="line">for cc, pop in cc_population.items():</span><br><span class="line">    if pop &lt; 10000000:</span><br><span class="line">        cc_pops_1[cc] &#x3D; pop</span><br><span class="line">    elif pop &lt; 1000000000:</span><br><span class="line">        cc_pops_2[cc] &#x3D; pop</span><br><span class="line">    else:</span><br><span class="line">        cc_pops_3[cc] &#x3D; pop</span><br><span class="line"></span><br><span class="line">wm_style &#x3D; RS(&#39;#336699&#39;,base_style&#x3D;LCS)</span><br><span class="line">wm &#x3D; pygal_maps_world.maps.World(style&#x3D;wm_style)</span><br><span class="line">wm.title &#x3D; &quot;World Population in 2010.by Country&quot;</span><br><span class="line">wm.add(&#39;0-10m&#39;, cc_pops_1)</span><br><span class="line">wm.add(&#39;10m-1bn&#39;, cc_pops_2)</span><br><span class="line">wm.add(&#39;&gt;1bn&#39;, cc_pops_3)</span><br><span class="line"></span><br><span class="line">wm.render_to_file(&#39;world_population.svg&#39;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pygal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>绘制随机漫步图</title>
      <link href="2017/12/20/%E7%BB%98%E5%88%B6%E9%9A%8F%E6%9C%BA%E6%BC%AB%E6%AD%A5%E5%9B%BE/"/>
      <url>2017/12/20/%E7%BB%98%E5%88%B6%E9%9A%8F%E6%9C%BA%E6%BC%AB%E6%AD%A5%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>matplotlib可绘制随机漫步图，取随机X个数，在画布上绘制，并加入渐变颜色，效果还是挺好看的</p><a id="more"></a><p>代码如下：</p><h3 id="random-walk-py"><a href="#random-walk-py" class="headerlink" title="random_walk.py"></a><code>random_walk.py</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from random import choice</span><br><span class="line"></span><br><span class="line">class RandomWalk():</span><br><span class="line">    &quot;&quot;&quot;一个生成随机漫步数据的类&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self,num_point&#x3D;5000):</span><br><span class="line">        &quot;&quot;&quot;初始化随机漫步的属性&quot;&quot;&quot;</span><br><span class="line">        self.num_point &#x3D; num_point</span><br><span class="line"></span><br><span class="line">        #所有随机漫步的点都始于（0,0）</span><br><span class="line">        self.x_values &#x3D; [0]</span><br><span class="line">        self.y_values &#x3D; [0]</span><br><span class="line"></span><br><span class="line">    def get_step(self):</span><br><span class="line">        &quot;&quot;&quot;设置前进方向及距离&quot;&quot;&quot;</span><br><span class="line">        direction &#x3D; choice([1, -1])</span><br><span class="line">        distance &#x3D; choice([0, 1, 2, 3, 4])</span><br><span class="line">        step &#x3D; distance * direction</span><br><span class="line">        return step</span><br><span class="line"></span><br><span class="line">    def fill_walk(self):</span><br><span class="line">        &quot;&quot;&quot;计算随机漫步的所有点&quot;&quot;&quot;</span><br><span class="line">        while len(self.x_values) &lt; self.num_point:</span><br><span class="line">            x_step &#x3D; self.get_step()</span><br><span class="line">            y_step &#x3D; self.get_step()</span><br><span class="line"></span><br><span class="line">            #排除原地踏步情况</span><br><span class="line">            if x_step &#x3D;&#x3D; 0 and y_step &#x3D;&#x3D; 0:</span><br><span class="line">                continue</span><br><span class="line"></span><br><span class="line">            #计算下一个点的位置</span><br><span class="line">            next_x &#x3D; self.x_values[-1] + x_step</span><br><span class="line">            next_y &#x3D; self.y_values[-1] + y_step</span><br><span class="line"></span><br><span class="line">            self.x_values.append(next_x)</span><br><span class="line">            self.y_values.append(next_y)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="rw-visual-py"><a href="#rw-visual-py" class="headerlink" title="rw_visual.py"></a><code>rw_visual.py</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from random_walk import RandomWalk</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    #创建一个随机漫步实例，并将所有包含的点绘制出</span><br><span class="line">    rw &#x3D; RandomWalk(30000)</span><br><span class="line">    rw.fill_walk()</span><br><span class="line"></span><br><span class="line">    point_num &#x3D; list(range(rw.num_point))</span><br><span class="line">    plt.scatter(rw.x_values, rw.y_values, c&#x3D;point_num, cmap&#x3D;plt.cm.Blues, s&#x3D;5)</span><br><span class="line">    #突出起点和终点</span><br><span class="line">    plt.scatter(0, 0, c&#x3D;&#39;green&#39;, s&#x3D;100)</span><br><span class="line">    plt.scatter(rw.x_values[-1], rw.y_values[-1], c&#x3D;&#39;red&#39;, s&#x3D;100)</span><br><span class="line"></span><br><span class="line">    #隐藏坐标轴</span><br><span class="line">    plt.axes().get_xaxis().set_visible(False)</span><br><span class="line">    plt.axes().get_yaxis().set_visible(False)</span><br><span class="line">    #plt.subplot().set_xticks([])</span><br><span class="line">    #plt.subplot().set_yticks([])</span><br><span class="line"></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    keep_drawing &#x3D; input(&quot;Make another walk?y&#x2F;n&quot;)</span><br><span class="line">    if keep_drawing &#x3D;&#x3D; &#39;n&#39;:</span><br><span class="line">        break</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>可成功绘制随机漫步图，然而有个警告报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance.  In a future version, a new instance will always be created and returned.  Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.warnings.warn(message, mplDeprecation, stacklevel&#x3D;1)</span><br></pre></td></tr></table></figure><p>原因是matplotlib版本问题，出在隐藏坐标轴<code>plt.axes().get_yaxis()</code>处，尝试修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.subplot().set_xticks([])</span><br><span class="line">plt.subplot().set_yticks([])</span><br></pre></td></tr></table></figure><p>然而没啥用，还是在警告，暂时没解决。。好在不影响功能，不是强迫症也就无视这红字了。。</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>matplotlib绘制渐变图</title>
      <link href="2017/12/20/matplotlib%E7%BB%98%E5%88%B6%E6%B8%90%E5%8F%98%E5%9B%BE/"/>
      <url>2017/12/20/matplotlib%E7%BB%98%E5%88%B6%E6%B8%90%E5%8F%98%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>使用matplotlib绘制1-1000所有整数立方值图形报错</p><a id="more"></a><p>绘制1~1000所有整数的立方图，颜色采用渐变蓝色，点越接近坐标原点，颜色越浅。<br>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">x_values &#x3D; list(range(1,1001))</span><br><span class="line">y_values &#x3D; [x**3 for x in x_values]</span><br><span class="line"></span><br><span class="line">plt.scatter(x_values, y_values, c&#x3D;y_values,cmap&#x3D;plt.cm.Blues,s&#x3D;40)</span><br><span class="line"></span><br><span class="line">#设置图表坐标并设置坐标标签</span><br><span class="line">plt.title(&quot;Square Numbers&quot;,fontsize&#x3D;24)</span><br><span class="line">plt.xlabel(&quot;Values&quot;,fontsize&#x3D;14)</span><br><span class="line">plt.ylabel(&quot;Square of Value&quot;,fontsize&#x3D;14)</span><br><span class="line"></span><br><span class="line">#设置坐标轴刻度</span><br><span class="line">plt.tick_params(axis&#x3D;&#39;both&#39;, labelsize&#x3D;14)</span><br><span class="line"></span><br><span class="line">#设置坐标轴取值</span><br><span class="line">plt.axes([0,1100,0,1100000])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>可以成功绘制图形，但是有警告报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserWarning: Unable to find pixel distance along axis for interval padding of ticks; assuming no interval padding needed.warnings.warn(&quot;Unable to find pixel distance along axis &quot;</span><br></pre></td></tr></table></figure><p>原因：<br>设置坐标轴取值时，使用的是<em>plt.axes</em>，该函数创建的是一个轴对象，并将输入解释为指定位置的矩形，绘制的坐标轴中取值0在绘制的图形之外，超出了限制范围，所以警告报错。</p><p>解决方案：<br>使用<code>plt.axis()</code>代替<code>plt.axes()</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#设置坐标轴取值</span><br><span class="line">plt.axis([0,1100,0,1100000])</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django2.0更新内容记录</title>
      <link href="2017/12/19/Django2-0%E6%9B%B4%E6%96%B0%E5%86%85%E5%AE%B9%E8%AE%B0%E5%BD%95/"/>
      <url>2017/12/19/Django2-0%E6%9B%B4%E6%96%B0%E5%86%85%E5%AE%B9%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>Django 2.0 变更内容(不按版本敲着实是有点坑o(╥﹏╥)o)</p><a id="more"></a><h2 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h2><p>Django 1.9在创建<code>models.ForeignKey</code>外键时，可写成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">topic &#x3D; models.ForeignKey(Topic）</span><br></pre></td></tr></table></figure><p>Django 2.0需要多传一个字段<code>on_delete</code>，且可给定默认值<code>models.CASCADE</code><br>所以上述可写为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">topic &#x3D; models.ForeignKey(Topic,on_delete&#x3D;models.CASCADE)</span><br></pre></td></tr></table></figure><h2 id="指定app-name"><a href="#指定app-name" class="headerlink" title="指定app_name"></a>指定app_name</h2><p>Django 1.9在映射URL时，<em>工程的urls.py</em>可写成：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path,include</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    path(&#39;admin&#x2F;&#39;, admin.site.urls),</span><br><span class="line">    path(&#39;&#39;,include(&#39;learning_logs.urls&#39;, namespace&#x3D;&#39;learning_logs&#39;))</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><em>应用的urls.py</em>可写成：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;定义learning_logs的URL模式&quot;&quot;&quot;</span><br><span class="line">from django.urls import path</span><br><span class="line">from . import views</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    #主页</span><br><span class="line">    path(&#39;&#39;, views.index, name&#x3D;&#39;index&#39;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>该写法在Django 2.0中会出现报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#39;Specifying a namespace in include() without providing an app_name &#39;</span><br><span class="line">django.core.exceptions.ImproperlyConfigured: Specifying a namespace in include() without providing an app_name is not supported. Set the app_name attribute in the included module, or pass a 2-tuple containing the list of patterns and app_name instead.</span><br></pre></td></tr></table></figure><p>意思是缺少了app_name，所以需要指定app_name，我的做法是在应用的urls.py文件中指定app_name，也就是工程的urls.py保持不变，<em>应用的urls.py</em>增加app_name指定：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;定义learning_logs的URL模式&quot;&quot;&quot;</span><br><span class="line">from django.urls import path</span><br><span class="line">from . import views</span><br><span class="line"></span><br><span class="line">app_name &#x3D; &#39;learning_logs&#39;</span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    #主页</span><br><span class="line">    path(&#39;&#39;, views.index, name&#x3D;&#39;index&#39;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="映射URL"><a href="#映射URL" class="headerlink" title="映射URL"></a>映射URL</h2><p>对于django.urls.path()函数，允许有简单的表示方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(r’^articles&#x2F;(?P[0-9]&#123;4&#125;)&#x2F;$’, views.year_archive),</span><br></pre></td></tr></table></figure><p>可以写成：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(‘articles&#x2F;&#x2F;‘, views.year_archive),</span><br></pre></td></tr></table></figure><blockquote><p><a href="http://tokyle.com/2017/12/13/Django%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E7%89%B9%E5%AE%9A%E9%93%BE%E6%8E%A5/#more">用法参见前博客记录</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>性能测试-理发师模型</title>
      <link href="2017/12/15/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95-%E7%90%86%E5%8F%91%E5%B8%88%E6%A8%A1%E5%9E%8B/"/>
      <url>2017/12/15/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95-%E7%90%86%E5%8F%91%E5%B8%88%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>性能测试有个有名的模型，理发店模型，理发店标配：一间或大或小的店面，一个或几个理发师，几张理发的椅子和顾客休息的椅子。<br>本文介绍一下理发店模型（相关资料网上一堆，只是为了自己记录）</p><a id="more"></a><h1 id="场景假设"><a href="#场景假设" class="headerlink" title="场景假设"></a>场景假设</h1><p><img src="/images/barbershop.jpg"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">该理发店：</span><br><span class="line">1. 理发店共有3名理发师；</span><br><span class="line">2. 每位理发师剪一个发的时间都是1小时；</span><br><span class="line">3. 我们顾客们都是很有时间观念的人而且非常挑剔，他们对于每次光顾理发店时所能容忍的等待时间+剪发时间是3小时，而且等待时间越长，顾客的满意度越低。如果3个小时还不能剪完头发，我们的顾客会立马生气的走人。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="场景模拟"><a href="#场景模拟" class="headerlink" title="场景模拟"></a>场景模拟</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 当理发店内只有1位顾客时，只需要有1名理发师为他提供服务，其他两名理发师可能继续等着，也可能会帮忙打打杂。1小时后，这位顾客剪完头发出门走了。那么在这1个小时里，整个理发店只服务了1位顾客，这位顾客花费在这次剪发的时间是1小时；</span><br><span class="line">2. 当理发店内同时有两位顾客时，就会同时有两名理发师在为顾客服务，另外1位发呆或者打杂帮忙。仍然是1小时后，两位顾客剪完头发出门。在这1小时里，理发店服务了两位顾客，这两位顾客花费在剪发的时间均为1小时；</span><br><span class="line">3. 很容易理解，当理发店内同时有三位顾客时，理发店可以在1小时内同时服务三位顾客，每位顾客花费在这次剪发的时间仍然是均为1小时；</span><br></pre></td></tr></table></figure><p>从上面几个场景中我们可以发现，在理发店同时服务的顾客数量从1位增加到3位的过程中，随着顾客数量的增多，理发店的整体工作效率在提高，但是每位顾客在理发店内所呆的时间并未延长。</p><p>当然，我们可以假设当只有1位顾客和2位顾客时，空闲的理发师可以帮忙打杂，使得其他理发师的工作效率提高，并使每位顾客的剪发时间小于1小时。不过即使根据这个假设，虽然随着顾客数量的增多，每位顾客的服务时间有所延长，但是这个时间始终还被控制在顾客可接受的范围之内，并且顾客是不需要等待的。</p><p>不过随着理发店的生意越来越好，顾客也越来越多，新的场景出现了。假设有一次顾客A、B、C刚进理发店准备剪发，外面一推门又进来了顾客D、E、F。因为A、B、C三位顾客先到，所以D、E、F三位只好坐在长板凳上等着。1小时后，A、B、C三位剪完头发走了，他们每个人这次剪发所花费的时间均为1小时。可是D、E、F三位就没有这么好运，因为他们要先等A、B、C三位剪完才能剪，所以他们每个人这次剪发所花费的时间均为2小时——包括等待1小时和剪发1小时。</p><p>通过上面这个场景我们可以发现，对于理发店来说，都是每小时服务三位顾客——第1个小时是A、B、C，第二个小时是D、E、F；但是对于顾客D、E、F来说，“响应时间”延长了。如果你可以理解上面的这些场景，就可以继续往下看了。</p><p>在新的场景中，我们假设这次理发店里一次来了9位顾客，根据我们上面的场景，相信你不难推断，这9位顾客中有3位的“响应时间”为1小时，有3位的“响应时间”为2小时（等待1小时+剪发1小时），还有3位的“响应时间”为3小时（等待2小时+剪发1小时）——已经到达用户所能忍受的极限。假如在把这个场景中的顾客数量改为10，那么我们已经可以断定，一定会有1位顾客因为“响应时间”过长而无法忍受，最终离开理发店走了。</p><h1 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h1><p><img src="/images/performance.jpg"></p><p>这张图中展示的是1个标准的软件性能模型。在图中有三条曲线，分别表示<code>资源的利用情况</code>（Utilization，包括硬件资源和软件资源）、<code>吞吐量</code>（Throughput，这里是指每秒事务数）以及<code>响应时间</code>（Response Time）。图中坐标轴的横轴从左到右表现了并发用户数（Number of Concurrent Users）的不断增长。</p><p>在这张图中我们可以看到，<strong>最开始，随着并发用户数的增长，资源占用率和吞吐量会相应的增长，但是响应时间的变化不大；不过当并发用户数增长到一定程度后，资源占用达到饱和，吞吐量增长明显放缓甚至停止增长，而响应时间却进一步延长。如果并发用户数继续增长，你会发现软硬件资源占用继续维持在饱和状态，但是吞吐量开始下降，响应时间明显的超出了用户可接受的范围，并且最终导致用户放弃了这次请求甚至离开。</strong></p><p>根据这种性能表现，图中划分了三个区域，分别是Light Load（较轻的压力）、Heavy Load（较重的压力）和Buckle Zone（用户无法忍受并放弃请求）。在Light Load和Heavy Load 两个区域交界处的并发用户数，我们称为“**<em>最佳并发用户数**</em>（The Optimum Number of Concurrent Users）”，而Heavy Load和Buckle Zone两个区域交界处的并发用户数则称为“<strong>最大并发用户数</strong>（The Maximum Number of Concurrent Users）”。</p><p>当系统的负载等于最佳并发用户数时，系统的整体效率最高，没有资源被浪费，用户也不需要等待；当系统负载处于最佳并发用户数和最大并发用户数之间时，系统可以继续工作，但是用户的等待时间延长，满意度开始降低，并且如果负载一直持续，将最终会导致有些用户无法忍受而放弃；而当系统负载大于最大并发用户数时，将注定会导致某些用户无法忍受超长的响应时间而放弃。</p><p>对应到我们上面理发店的例子，每小时3个顾客就是这个理发店的最佳并发用户数，而每小时9个顾客则是它的最大并发用户数。当每小时都有3个顾客到来时，理发店的整体工作效率最高；而当每小时都有9个顾客到来时，前几个小时来的顾客还可以忍受，但是随着等待的顾客人数越来越多，等待时间越来越长，最终还是会有顾客无法忍受而离开。同时，随着理发店里顾客人数的增多和理发师工作时间的延长，理发师会逐渐产生疲劳，还要多花一些时间来清理环境和维持秩序，这些因素将最终导致理发师的工作效率随着顾客人数的增多和工作的延长而逐渐的下降，到最后可能要1.5小时甚至2个小时才能剪完1个发了。<br>当然，如果一开始就有10个顾客到来，则注定有1位顾客剪不到头发了。</p><blockquote><p><a href="http://www.cnblogs.com/jackei/archive/2006/11/20/565527.html">大神原网址</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeter系统监控配置</title>
      <link href="2017/12/15/Jmeter%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE/"/>
      <url>2017/12/15/Jmeter%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>Jmeter是测试人员经常会使用的一款压力测试工具，经常会使用来测试接口的性能；Jmeter同时具备监控服务器资源使用情况的功能。</p><p>主要介绍一下怎么使用Jmeter来监控服务器的CPU,内存,IO等信息。</p><a id="more"></a><h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>使用Jmeter监控系统性能，实际上是插件的使用，可以认为是在Jmeter中装载了一个小型监控系统的客户端，同时在需要监控的系统内装载服务端，在允许Jmeter时，同时打开监控服务端，进行系统资源的监控。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">客户端：JMeterPlugins-Standard</span><br><span class="line">服务端：ServerAgent</span><br></pre></td></tr></table></figure><p>下载地址：</p><blockquote><p><a href="http://jmeter-plugins.org/downloads/all/">官网下载</a></p></blockquote><p>百度云链接：</p><blockquote><p><a href="https://pan.baidu.com/s/1eR5iOue">JMeterPlugins-Standard-1.4.0</a><br><a href="https://pan.baidu.com/s/1nvKJQad">ServerAgent-2.2.1</a></p></blockquote><h1 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a>配置说明</h1><p>将 JMeterPlugins-Standard-1.4.0.zip 中 lib\ext 目录下的 JmeterPlugins-Standard.jar 文件都放到apache-jmeter-2.13\lib\ext目录中。<br>将 ServerAgent-2.2.1.zip 解压后放到要监控的服务器中待使用。</p><h1 id="监控设置"><a href="#监控设置" class="headerlink" title="监控设置"></a>监控设置</h1><ol><li>启动Jmeter后，右击<code>线程组</code>，选择<code>添加- 监听器- jp@gc-PerfMon Metrics Collector </code></li><li>打开<code>jp@gc - PerfMon Metrics Collector </code>，点击<code>Add Row</code>选择相应监控对象（服务器IP和监控内容），端口默认<code>4444</code>即可。</li></ol><p><img src="/images/jmeter-setting.jpg"></p><h1 id="开启监控"><a href="#开启监控" class="headerlink" title="开启监控"></a>开启监控</h1><ol><li>设置<code>永远循环</code>，否则监控会运行一次就断开，设置方式：<code>线程组-循环次数（选择永远）</code></li><li>服务端运行<code>ServerAgent</code>，Linux系统运行shell脚本，windows系统执行bat脚本（系统需事先完成jdk配置）</li></ol><p>成功完成系统资源监控</p><p><img src="/images/jmeter-cpu.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> 性能测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeter </tag>
            
            <tag> 性能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客中加入图片</title>
      <link href="2017/12/14/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E5%9B%BE%E7%89%87/"/>
      <url>2017/12/14/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>好不容易搭好了hexo，插个图片各种错</p><a id="more"></a><h1 id="本地引用"><a href="#本地引用" class="headerlink" title="本地引用"></a>本地引用</h1><h2 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h2><p>markdown语法实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source&#x2F;images&#x2F;image.jpg</span><br><span class="line">   ![](&#x2F;images&#x2F;image.jpg)</span><br></pre></td></tr></table></figure><p>这样，图片既可以在首页内容访问，也可以在文章正文中使用</p><h2 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h2><p>首先在/blog/_config.yml 中设置 post_asset_folder: true ，这样在 hexo new “文章” 时会生成与文章标题一样的目录，将文章中需要使用的图片存在该目录下（source//_posts/文章）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_posts&#x2F;post_name&#x2F;image.jpg</span><br><span class="line">   ![](image.jpg)</span><br></pre></td></tr></table></figure><h1 id="CDN引用"><a href="#CDN引用" class="headerlink" title="CDN引用"></a>CDN引用</h1><p>现在大多数做法是使用图床，自己也看过七牛云之类的做为图床，但是，七牛云个流氓，还要手持身份证认证，所以暂时放弃。（该方法就是在图床中生成链接，直接引链接即可）</p><blockquote><p><a href="https://coding.net/help/doc/project/markdown.html">Markdown 语法介绍</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python编码</title>
      <link href="2017/12/13/python%E7%BC%96%E7%A0%81/"/>
      <url>2017/12/13/python%E7%BC%96%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>python日常踩坑系列（二）</p><a id="more"></a><p>日常编写python脚本，鉴于java各种坑编码经历，首先就会把pycharm编码设置成utf-8，但是不知道什么鬼，设置完成之后，编译还是会报编码gbk的错误</p><p><img src="/images/utf8.jpg"></p><p>问题如下：</p><p>“UnicodeDecodeError: ‘gbk’ codec can’t decode byte 0x80 in position 34: illegal multibyte sequence”</p><p>解决方案：</p><p>1，设置所有文件编码默认为utf-8（文件最前面指定）</p><p><img src="/images/pycharm_setting.jpg"></p><p>2，处理数据时进行转码：</p><p>with open(“population.json”,encoding=’UTF-8’) as data:</p><p>–完 (#^.^#)</p>]]></content>
      
      
      <categories>
          
          <category> python基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django获取不到特定链接</title>
      <link href="2017/12/13/Django%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E7%89%B9%E5%AE%9A%E9%93%BE%E6%8E%A5/"/>
      <url>2017/12/13/Django%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E7%89%B9%E5%AE%9A%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<p>python日常踩坑系列</p><a id="more"></a><p><img src="/images/new_python.jpg"></p><p>按照教程方式打开本地特定链接报错<br>源码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># Home page.</span></span><br><span class="line">    url(<span class="string">r&#x27;^$&#x27;</span>, views.index, name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Show all topics.</span></span><br><span class="line">    url(<span class="string">r&#x27;^topics/$&#x27;</span>, views.topics, name=<span class="string">&#x27;topics&#x27;</span>),</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Detail page for a single topic.</span></span><br><span class="line">    url(<span class="string">r&#x27;^topics/(?P&lt;topic_id&gt;\d+)/$&#x27;</span>, views.topic, name=<span class="string">&#x27;topic&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>打开<a href="http://127.0.0.1:8000/topics/1/%E6%8A%A5%E9%94%99%EF%BC%9A">http://127.0.0.1:8000/topics/1/报错：</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> Using the URLconf defined in learning_log.urls, Django tried these URL patterns, in <span class="keyword">this</span> order:</span><br><span class="line">  <span class="number">1.</span> admin/</span><br><span class="line">  <span class="number">2.</span> [name=<span class="string">&#x27;index&#x27;</span>]</span><br><span class="line">  <span class="number">3.</span> topics [name=<span class="string">&#x27;topics&#x27;</span>]</span><br><span class="line">  <span class="number">4.</span> topics/?P&lt;topic_id&gt;\d+/ [name=<span class="string">&#x27;topic&#x27;</span>]</span><br><span class="line">The current path, topics/<span class="number">1</span>/, didn<span class="string">&#x27;t match any of these.</span></span><br></pre></td></tr></table></figure><h2 id="原因："><a href="#原因：" class="headerlink" title="原因："></a>原因：</h2><p>Django2.0有更新<br>对于django.urls.path()函数，允许有简单的表示方法：</p><p><em>url(r’^articles/(?P<year>[0-9]{4})/$’, views.year_archive),</em></p><p>可以写成：</p><p><em>path(‘articles/<a href="int:year">int:year</a>/‘, views.year_archive),</em></p><p>所以代码可更改为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">app_name = <span class="string">&#x27;lerning_logs&#x27;</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#主页</span></span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.index, name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    <span class="comment">#显示所有主题</span></span><br><span class="line">    path(<span class="string">&#x27;topics&#x27;</span>, views.topics, name=<span class="string">&#x27;topics&#x27;</span>),</span><br><span class="line">    <span class="comment">#特定主题的详细页面</span></span><br><span class="line">    <span class="comment">#path(&#x27;topics/?P&lt;topic_id&gt;\d+/&#x27;, views.topic, name=&#x27;topic&#x27;),</span></span><br><span class="line">    path(<span class="string">&#x27;topics/&lt;topic_id&gt;/&#x27;</span>, views.topic, name=<span class="string">&#x27;topic&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
